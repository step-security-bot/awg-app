var Cg=Object.defineProperty,Sg=Object.defineProperties,Ag=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,mp=Object.prototype.propertyIsEnumerable,gp=(J,ie,ue)=>ie in J?Cg(J,ie,{enumerable:!0,configurable:!0,writable:!0,value:ue}):J[ie]=ue,gn=(J,ie)=>{for(var ue in ie||(ie={}))yp.call(ie,ue)&&gp(J,ue,ie[ue]);if(Nu)for(var ue of Nu(ie))mp.call(ie,ue)&&gp(J,ue,ie[ue]);return J},gs=(J,ie)=>Sg(J,Ag(ie)),bp=(J,ie)=>{var ue={};for(var q in J)yp.call(J,q)&&ie.indexOf(q)<0&&(ue[q]=J[q]);if(null!=J&&Nu)for(var q of Nu(J))ie.indexOf(q)<0&&mp.call(J,q)&&(ue[q]=J[q]);return ue};function dateConverter(J){const ie=1721425.5,q=["So","Mo","Di","Mi","Do","Fr","Sa"],l={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function F(v,f){return v-f*Math.floor(v/f)}function e(v){return(v=parseInt(v))%4==0&&!(v%100==0&&v%400!=0)}function o(v,f,w){return ie-1+365*(v-1)+Math.floor((v-1)/4)+-Math.floor((v-1)/100)+Math.floor((v-1)/400)+Math.floor((367*f-362)/12+(f<=2?0:e(v)?-1:-2)+w)}function d(v,f){v=parseInt(v);const w={};let T;switch(f){case"GREGORIAN":case"gregorian":T=function u(v){let f,w,T,E,P,M,j,O,L,G,W,V,$,fe;return f=Math.floor(v-.5)+.5,w=f-ie,T=Math.floor(w/146097),E=F(w,146097),P=Math.floor(E/36524),M=F(E,36524),j=Math.floor(M/1461),O=F(M,1461),L=Math.floor(O/365),G=400*T+100*P+4*j+L,4==P||4==L||G++,W=f-o(G,1,1),V=f<o(G,3,1)?0:e(G)?1:2,$=Math.floor((12*(W+V)+373)/367),fe=f-o(G,$,1)+1,G<=0&&G--,new Array(G,$,fe)}(v);break;case"JULIAN":case"julian":T=S.jd_to_julian(v);break;case"JEWISH":case"jewish":T=S.jd_to_hebrew(v);break;case"FRENCH":case"french":T=S.jd_to_french_revolutionary(v)}return w.year=T[0],w.month=T[1],w.day=T[2],w.weekday=function y(v){return v=Number(v),F(Math.floor(v+1.5),7)}(v),w}const b=d(J.dateval1,J.calendar),h=d(J.dateval2,J.calendar);let k="";if(J.dateprecision1==J.dateprecision2)switch(J.dateprecision1){case"DAY":k=b.year===h.year&&b.month===h.month&&b.day===h.day?"["+q[b.weekday]+"] "+b.day+". "+l[J.calendar][b.month]+" "+b.year:"["+q[b.weekday]+"] "+b.day+". "+l[J.calendar][b.month]+" "+b.year+" \u2013 ["+q[h.weekday]+"] "+h.day+". "+l[J.calendar][h.month]+" "+h.year;break;case"MONTH":k=b.year===h.year&&b.month===h.month?l[J.calendar][b.month]+" "+b.year:l[J.calendar][b.month]+" "+b.year+" \u2013 "+l[J.calendar][h.month]+" "+h.year;break;case"YEAR":k=b.year===h.year?b.year:b.year+"\u2013"+h.year}else{switch(J.dateprecision1){case"DAY":k="["+q[b.weekday]+"] "+b.day+". "+l[J.calendar][b.month]+" "+b.year;break;case"MONTH":k=l[J.calendar][b.month]+" "+b.year;break;case"YEAR":k=b.year}switch(k+=" \u2013 ",J.dateprecision2){case"DAY":k+="["+q[h.weekday]+"] "+h.day+". "+l[J.calendar][h.month]+" "+h.year;break;case"MONTH":k+=l[J.calendar][h.month]+" "+h.year;break;case"YEAR":k+=h.year}}return k+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[J.calendar].short+")",k}function htmlConverter(J,ie){let q,l,F,y,e,o,u,d,b,h,ue="";const k={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},v={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},f={};for(let T in v.settings.matching)f[v.settings.matching[T]]=T;const w=Object.keys(J);w.sort(function(T,E){return k[f[T]]-k[f[E]]}),q=[];for(let T in w)for(u in o=w[T],J[o])F=J[o][u].start,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"start"}),"_link"==q[F][q[F].length-1].propname?(q[F][q[F].length-1].href=J[o][u].href,void 0!==J[o][u].resid&&(q[F][q[F].length-1].resid=J[o][u].resid)):"style"==q[F][q[F].length-1].propname&&(q[F][q[F].length-1].css=J[o][u].css),F=J[o][u].end,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"end"});for(l=[],d=0;d<=ie.length;d++){if(void 0!==q[d]){for(e=[],h=[],b=q[d].length-1;b>=0;b--)if("end"==q[d][b].proptype&&"linebreak"!=q[d][b].propname){for(;void 0!==(y=l.pop())&&(ue+="</"+f[y]+">",y!=q[d][b].propname);)e.push(y);for(;void 0!==(y=e.pop());)l.push(y),ue+="<"+f[y]+">"}for(b in q[d])if("start"==q[d][b].proptype)if("linebreak"==q[d][b].propname)ue+="<br/>";else if("_link"==q[d][b].propname){l.push(q[d][b].propname);let T=q[d][b].href;void 0===T&&void 0!==q[d][b].resid&&(T="https://www.salsah.org/api/resources/"+q[d][b].resid),ue+="<"+f[q[d][b].propname]+' href="'+T,void 0!==q[d][b].resid?ue+='" class="salsah-link">':ue+='">'}else"style"==q[d][b].propname?(l.push(q[d][b].propname),ue+="<"+f[q[d][b].propname]+' style="'+q[d][b].css+'">'):(l.push(q[d][b].propname),ue+="<"+f[q[d][b].propname]+">")}d<ie.length&&(ue+=ie.charAt(d))}return ue=ue.replace(/\n/g,"<br/>"),ue=ue.replace(/\r/g,""),ue}(function(J){var ie,ue,q="0.5.0",l="hasOwnProperty",F=/[\.\/]/,y=/\s*,\s*/,o=function(f,w){return f-w},u={n:{}},d=function(){for(var f=0,w=this.length;w>f;f++)if(void 0!==this[f])return this[f]},b=function(){for(var f=this.length;--f;)if(void 0!==this[f])return this[f]},h=Object.prototype.toString,k=String,v=Array.isArray||function(f){return f instanceof Array||"[object Array]"==h.call(f)};eve=function(f,w){var T,E=ue,P=Array.prototype.slice.call(arguments,2),M=eve.listeners(f),j=0,O=[],L={},G=[],W=ie;G.firstDefined=d,G.lastDefined=b,ie=f,ue=0;for(var V=0,$=M.length;$>V;V++)"zIndex"in M[V]&&(O.push(M[V].zIndex),M[V].zIndex<0&&(L[M[V].zIndex]=M[V]));for(O.sort(o);O[j]<0;)if(T=L[O[j++]],G.push(T.apply(w,P)),ue)return ue=E,G;for(V=0;$>V;V++)if("zIndex"in(T=M[V]))if(T.zIndex==O[j]){if(G.push(T.apply(w,P)),ue)break;do{if((T=L[O[++j]])&&G.push(T.apply(w,P)),ue)break}while(T)}else L[T.zIndex]=T;else if(G.push(T.apply(w,P)),ue)break;return ue=E,ie=W,G},eve._events=u,eve.listeners=function(f){var w,T,E,P,M,j,O,L,G=v(f)?f:f.split(F),W=u,V=[W],$=[];for(P=0,M=G.length;M>P;P++){for(L=[],j=0,O=V.length;O>j;j++)for(T=[(W=V[j].n)[G[P]],W["*"]],E=2;E--;)(w=T[E])&&(L.push(w),$=$.concat(w.f||[]));V=L}return $},eve.separator=function(f){f?(f="["+(f=k(f).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",F=new RegExp(f)):F=/[\.\/]/},eve.on=function(f,w){if("function"!=typeof w)return function(){};for(var T=v(f)?v(f[0])?f:[f]:k(f).split(y),E=0,P=T.length;P>E;E++)!function(M){for(var j,O=v(M)?M:k(M).split(F),L=u,G=0,W=O.length;W>G;G++)L=(L=L.n).hasOwnProperty(O[G])&&L[O[G]]||(L[O[G]]={n:{}});for(L.f=L.f||[],G=0,W=L.f.length;W>G;G++)if(L.f[G]==w){j=!0;break}!j&&L.f.push(w)}(T[E]);return function(M){+M==+M&&(w.zIndex=+M)}},eve.f=function(f){var w=[].slice.call(arguments,1);return function(){eve.apply(null,[f,null].concat(w).concat([].slice.call(arguments,0)))}},eve.stop=function(){ue=1},eve.nt=function(f){var w=v(ie)?ie.join("."):ie;return f?new RegExp("(?:\\.|\\/|^)"+f+"(?:\\.|\\/|$)").test(w):w},eve.nts=function(){return v(ie)?ie:ie.split(F)},eve.off=eve.unbind=function(f,w){if(f){var T=v(f)?v(f[0])?f:[f]:k(f).split(y);if(T.length>1)for(var E=0,P=T.length;P>E;E++)eve.off(T[E],w);else{T=v(f)?f:k(f).split(F);var M,j,O,L,G,W=[u],V=[];for(E=0,P=T.length;P>E;E++)for(L=0;L<W.length;L+=O.length-2){if(O=[L,1],M=W[L].n,"*"!=T[E])M[T[E]]&&(O.push(M[T[E]]),V.unshift({n:M,name:T[E]}));else for(j in M)M[l](j)&&(O.push(M[j]),V.unshift({n:M,name:j}));W.splice.apply(W,O)}for(E=0,P=W.length;P>E;E++)for(M=W[E];M.n;){if(w){if(M.f){for(L=0,G=M.f.length;G>L;L++)if(M.f[L]==w){M.f.splice(L,1);break}!M.f.length&&delete M.f}for(j in M.n)if(M.n[l](j)&&M.n[j].f){var $=M.n[j].f;for(L=0,G=$.length;G>L;L++)if($[L]==w){$.splice(L,1);break}!$.length&&delete M.n[j].f}}else for(j in delete M.f,M.n)M.n[l](j)&&M.n[j].f&&delete M.n[j].f;M=M.n}e:for(E=0,P=V.length;P>E;E++){for(j in(M=V[E]).n[M.name].f)continue e;for(j in M.n[M.name].n)continue e;delete M.n[M.name]}}}else eve._events=u={n:{}}},eve.once=function(f,w){var T=function(){return eve.off(f,T),w.apply(this,arguments)};return eve.on(f,T)},eve.version=q,eve.toString=function(){return"You are running Eve "+q},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):J.eve=eve})(this),function(J,ie){if("function"==typeof define&&define.amd)define(["eve"],function(q){return ie(J,q)});else if("undefined"!=typeof exports){var ue=require("eve");module.exports=ie(J,ue)}else ie(J,J.eve)}(window||this,function(J,ie){var l,F,y,e,o,u,d,h,k,v,f,w,T,E,P,M,j,ue=(l=void 0===ie?function(){}:ie,y={},e=J.requestAnimationFrame||J.webkitRequestAnimationFrame||J.mozRequestAnimationFrame||J.oRequestAnimationFrame||J.msRequestAnimationFrame||function(O){return setTimeout(O,16,(new Date).getTime()),!0},o=Array.isArray||function(O){return O instanceof Array||"[object Array]"==Object.prototype.toString.call(O)},u=0,d="M"+(+new Date).toString(36),h=Date.now||function(){return+new Date},k=function(O){var L=this;if(null==O)return L.s;var G=L.s-O;L.b+=L.dur*G,L.B+=L.dur*G,L.s=O},v=function(O){return null==O?this.spd:void(this.spd=O)},f=function(O){var L=this;return null==O?L.dur:(L.s=L.s*O/L.dur,void(L.dur=O))},w=function(){var O=this;delete y[O.id],O.update(),l("mina.stop."+O.id,O)},T=function(){var O=this;O.pdif||(delete y[O.id],O.update(),O.pdif=O.get()-O.b)},E=function(){var O=this;O.pdif&&(O.b=O.get()-O.pdif,delete O.pdif,y[O.id]=O,M())},P=function(){var O,L=this;if(o(L.start)){O=[];for(var G=0,W=L.start.length;W>G;G++)O[G]=+L.start[G]+(L.end[G]-L.start[G])*L.easing(L.s)}else O=+L.start+(L.end-L.start)*L.easing(L.s);L.set(O)},M=function(O){if(O){var L=0;for(var G in y)if(y.hasOwnProperty(G)){var W=y[G],V=W.get();L++,W.s=(V-W.b)/(W.dur/W.spd),W.s>=1&&(delete y[G],W.s=1,L--,function($){setTimeout(function(){l("mina.finish."+$.id,$)})}(W)),W.update()}F=!!L&&e(M)}else F||(F=e(M))},(j=function(O,L,G,W,V,$,fe){var ce={id:d+(u++).toString(36),start:O,end:L,b:G,s:0,dur:W-G,spd:1,get:V,set:$,easing:fe||j.linear,status:k,speed:v,duration:f,stop:w,pause:T,resume:E,update:P};y[ce.id]=ce;var xe,te=0;for(xe in y)if(y.hasOwnProperty(xe)&&2==++te)break;return 1==te&&M(),ce}).time=h,j.getById=function(O){return y[O]||null},j.linear=function(O){return O},j.easeout=function(O){return Math.pow(O,1.7)},j.easein=function(O){return Math.pow(O,.48)},j.easeinout=function(O){if(1==O)return 1;if(0==O)return 0;var L=.48-O/1.04,G=Math.sqrt(.1734+L*L),W=G-L,$=-G-L,ce=Math.pow(Math.abs(W),1/3)*(0>W?-1:1)+Math.pow(Math.abs($),1/3)*(0>$?-1:1)+.5;return 3*(1-ce)*ce*ce+ce*ce*ce},j.backin=function(O){if(1==O)return 1;var L=1.70158;return O*O*((L+1)*O-L)},j.backout=function(O){if(0==O)return 0;var L=1.70158;return(O-=1)*O*((L+1)*O+L)+1},j.elastic=function(O){return O==!!O?O:Math.pow(2,-10*O)*Math.sin((O-.075)*(2*Math.PI)/.3)+1},j.bounce=function(O){var G=7.5625,W=2.75;return 1/W>O?G*O*O:2/W>O?G*(O-=1.5/W)*O+.75:2.5/W>O?G*(O-=2.25/W)*O+.9375:G*(O-=2.625/W)*O+.984375},J.mina=j,j),q=function(l){function F(K,oe){if(K){if(K.nodeType)return G(K);if(e(K,"array")&&F.set)return F.set.apply(F,K);if(K instanceof M)return K;if(null==oe)return G(K=V.doc.querySelector(String(K)))}return new L(K=null==K?"100%":K,oe=null==oe?"100%":oe)}function y(K,oe){if(oe){if("#text"==K&&(K=V.doc.createTextNode(oe.text||oe["#text"]||"")),"#comment"==K&&(K=V.doc.createComment(oe.text||oe["#text"]||"")),"string"==typeof K&&(K=y(K)),"string"==typeof oe)return 1==K.nodeType?"xlink:"==oe.substring(0,6)?K.getAttributeNS(Ne,oe.substring(6)):"xml:"==oe.substring(0,4)?K.getAttributeNS(ke,oe.substring(4)):K.getAttribute(oe):"text"==oe?K.nodeValue:null;if(1==K.nodeType){for(var he in oe)if(oe[$](he)){var be=fe(oe[he]);be?"xlink:"==he.substring(0,6)?K.setAttributeNS(Ne,he.substring(6),be):"xml:"==he.substring(0,4)?K.setAttributeNS(ke,he.substring(4),be):K.setAttribute(he,be):K.removeAttribute(he)}}else"text"in oe&&(K.nodeValue=oe.text)}else K=V.doc.createElementNS(ke,K);return K}function e(K,oe){return"finite"==(oe=fe.prototype.toLowerCase.call(oe))?isFinite(K):!("array"!=oe||!(K instanceof Array||Array.isArray&&Array.isArray(K)))||("null"==oe&&null===K||oe==typeof K&&null!==K||"object"==oe&&K===Object(K)||de.call(K).slice(8,-1).toLowerCase()==oe)}function u(K,oe){for(var he=0,be=K.length;be>he;he++)if(K[he]===oe)return K.push(K.splice(he,1)[0])}function d(K,oe,he){return function be(){var Le=Array.prototype.slice.call(arguments,0),Se=Le.join("\u2400"),_e=be.cache=be.cache||{},je=be.count=be.count||[];return _e[$](Se)?(u(je,Se),he?he(_e[Se]):_e[Se]):(je.length>=1e3&&delete _e[je.shift()],je.push(Se),_e[Se]=K.apply(oe,Le),he?he(_e[Se]):_e[Se])}}function h(K){return K%360*Ce/180}function T(K){return K.node.ownerSVGElement&&G(K.node.ownerSVGElement)||F.select("svg")}function P(K){e(K,"array")||(K=Array.prototype.slice.call(arguments,0));for(var oe=0,he=0,be=this.node;this[oe];)delete this[oe++];for(oe=0;oe<K.length;oe++)"set"==K[oe].type?K[oe].forEach(function(Se){be.appendChild(Se.node)}):be.appendChild(K[oe].node);var Le=be.childNodes;for(oe=0;oe<Le.length;oe++)this[he++]=G(Le[oe]);return this}function M(K){if(K.snap in Pe)return Pe[K.snap];var oe;try{oe=K.ownerSVGElement}catch(Le){}this.node=K,oe&&(this.paper=new L(oe)),this.type=K.tagName||K.nodeName;var he=this.id=pe(this);if(this.anims={},this._={transform:[]},K.snap=he,Pe[he]=this,"g"==this.type&&(this.add=P),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var be in L.prototype)L.prototype[$](be)&&(this[be]=L.prototype[be])}function j(K){this.node=K}function O(K,oe){var he=y(K);return oe.appendChild(he),G(he)}function L(K,oe){var he,be,Le,Se=L.prototype;if(K&&K.tagName&&"svg"==K.tagName.toLowerCase()){if(K.snap in Pe)return Pe[K.snap];var _e=K.ownerDocument;for(var je in he=new M(K),be=K.getElementsByTagName("desc")[0],Le=K.getElementsByTagName("defs")[0],be||((be=y("desc")).appendChild(_e.createTextNode("Created with Snap")),he.node.appendChild(be)),Le||(Le=y("defs"),he.node.appendChild(Le)),he.defs=Le,Se)Se[$](je)&&(he[je]=Se[je]);he.paper=he.root=he}else y((he=O("svg",V.doc.body)).node,{height:oe,version:1.1,width:K,xmlns:ke});return he}function G(K){return K&&(K instanceof M||K instanceof j?K:K.tagName&&"svg"==K.tagName.toLowerCase()?new L(K):K.tagName&&"object"==K.tagName.toLowerCase()&&"image/svg+xml"==K.type?new L(K.contentDocument.getElementsByTagName("svg")[0]):new M(K))}function W(K,oe){for(var he=0,be=K.length;be>he;he++){var Le={type:K[he].type,attr:K[he].attr()},Se=K[he].children();oe.push(Le),Se.length&&W(Se,Le.childNodes=[])}}F.version="0.5.1",F.toString=function(){return"Snap v"+this.version},F._={};var V={win:l.window,doc:l.window.document};F._.glob=V;var K,oe,$="hasOwnProperty",fe=String,ce=parseFloat,xe=parseInt,te=Math,se=te.max,ne=te.min,ve=te.abs,Ce=(te.pow,te.PI),me=(te.round,""),de=Object.prototype.toString,ye=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,Ee=(F._.separator=/[,\s]+/,/[\s]*,[\s]*/),Be={hs:1,rg:1},Ie=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,qe=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,U=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,H=0,ee="S"+(+new Date).toString(36),pe=function(K){return(K&&K.type?K.type:me)+ee+(H++).toString(36)},Ne="http://www.w3.org/1999/xlink",ke="http://www.w3.org/2000/svg",Pe={};F.url=function(K){return"url('#"+K+"')"},F._.$=y,F._.id=pe,F.format=(K=/\{([^\}]+)\}/g,oe=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(be,Le){return fe(be).replace(K,function(Se,_e){return function(be,Le,Se){var _e=Se;return Le.replace(oe,function(je,He,Ze,rt,Ve){He=He||rt,_e&&(He in _e&&(_e=_e[He]),"function"==typeof _e&&Ve&&(_e=_e()))}),_e=(null==_e||_e==Se?be:_e)+""}(Se,_e,Le)})}),F._.clone=function o(K){if("function"==typeof K||Object(K)!==K)return K;var oe=new K.constructor;for(var he in K)K[$](he)&&(oe[he]=o(K[he]));return oe},F._.cacher=d,F.rad=h,F.deg=function k(K){return 180*K/Ce%360},F.sin=function(K){return te.sin(F.rad(K))},F.tan=function(K){return te.tan(F.rad(K))},F.cos=function(K){return te.cos(F.rad(K))},F.asin=function(K){return F.deg(te.asin(K))},F.acos=function(K){return F.deg(te.acos(K))},F.atan=function(K){return F.deg(te.atan(K))},F.atan2=function(K){return F.deg(te.atan2(K))},F.angle=function b(K,oe,he,be,Le,Se){if(null==Le){var _e=K-he,je=oe-be;return _e||je?(180+180*te.atan2(-je,-_e)/Ce+360)%360:0}return b(K,oe,Le,Se)-b(he,be,Le,Se)},F.len=function(K,oe,he,be){return Math.sqrt(F.len2(K,oe,he,be))},F.len2=function(K,oe,he,be){return(K-he)*(K-he)+(oe-be)*(oe-be)},F.closestPoint=function(K,oe,he){function be(Tt){var Ct=Tt.x-oe,Et=Tt.y-he;return Ct*Ct+Et*Et}for(var Le,Se,_e,je,He=K.node,Ze=He.getTotalLength(),rt=Ze/He.pathSegList.numberOfItems*.125,Ve=1/0,et=0;Ze>=et;et+=rt)(je=be(_e=He.getPointAtLength(et)))<Ve&&(Le=_e,Se=et,Ve=je);for(rt*=.5;rt>.5;){var kt,vt,mt,bt,yt,st;(mt=Se-rt)>=0&&(yt=be(kt=He.getPointAtLength(mt)))<Ve?(Le=kt,Se=mt,Ve=yt):(bt=Se+rt)<=Ze&&(st=be(vt=He.getPointAtLength(bt)))<Ve?(Le=vt,Se=bt,Ve=st):rt*=.5}return{x:Le.x,y:Le.y,length:Se,distance:Math.sqrt(Ve)}},F.is=e,F.snapTo=function(K,oe,he){if(he=e(he,"finite")?he:10,e(K,"array")){for(var be=K.length;be--;)if(ve(K[be]-oe)<=he)return K[be]}else{var Le=oe%(K=+K);if(he>Le)return oe-Le;if(Le>K-he)return oe-Le+K}return oe},F.getRGB=d(function(K){if(!K||(K=fe(K)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:pt};if("none"==K)return{r:-1,g:-1,b:-1,hex:"none",toString:pt};if(!(Be[$](K.toLowerCase().substring(0,2))||"#"==K.charAt())&&(K=Je(K)),!K)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:pt};var oe,he,be,Le,Se,_e,je=K.match(ye);return je?(je[2]&&(be=xe(je[2].substring(5),16),he=xe(je[2].substring(3,5),16),oe=xe(je[2].substring(1,3),16)),je[3]&&(be=xe((Se=je[3].charAt(3))+Se,16),he=xe((Se=je[3].charAt(2))+Se,16),oe=xe((Se=je[3].charAt(1))+Se,16)),je[4]&&(_e=je[4].split(Ee),oe=ce(_e[0]),"%"==_e[0].slice(-1)&&(oe*=2.55),he=ce(_e[1]),"%"==_e[1].slice(-1)&&(he*=2.55),be=ce(_e[2]),"%"==_e[2].slice(-1)&&(be*=2.55),"rgba"==je[1].toLowerCase().slice(0,4)&&(Le=ce(_e[3])),_e[3]&&"%"==_e[3].slice(-1)&&(Le/=100)),je[5]?(_e=je[5].split(Ee),oe=ce(_e[0]),"%"==_e[0].slice(-1)&&(oe/=100),he=ce(_e[1]),"%"==_e[1].slice(-1)&&(he/=100),be=ce(_e[2]),"%"==_e[2].slice(-1)&&(be/=100),("deg"==_e[0].slice(-3)||"\xb0"==_e[0].slice(-1))&&(oe/=360),"hsba"==je[1].toLowerCase().slice(0,4)&&(Le=ce(_e[3])),_e[3]&&"%"==_e[3].slice(-1)&&(Le/=100),F.hsb2rgb(oe,he,be,Le)):je[6]?(_e=je[6].split(Ee),oe=ce(_e[0]),"%"==_e[0].slice(-1)&&(oe/=100),he=ce(_e[1]),"%"==_e[1].slice(-1)&&(he/=100),be=ce(_e[2]),"%"==_e[2].slice(-1)&&(be/=100),("deg"==_e[0].slice(-3)||"\xb0"==_e[0].slice(-1))&&(oe/=360),"hsla"==je[1].toLowerCase().slice(0,4)&&(Le=ce(_e[3])),_e[3]&&"%"==_e[3].slice(-1)&&(Le/=100),F.hsl2rgb(oe,he,be,Le)):(oe=ne(te.round(oe),255),he=ne(te.round(he),255),be=ne(te.round(be),255),Le=ne(se(Le,0),1),(je={r:oe,g:he,b:be,toString:pt}).hex="#"+(16777216|be|he<<8|oe<<16).toString(16).slice(1),je.opacity=e(Le,"finite")?Le:1,je)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:pt}},F),F.hsb=d(function(K,oe,he){return F.hsb2rgb(K,oe,he).hex}),F.hsl=d(function(K,oe,he){return F.hsl2rgb(K,oe,he).hex}),F.rgb=d(function(K,oe,he,be){if(e(be,"finite")){var Le=te.round;return"rgba("+[Le(K),Le(oe),Le(he),+be.toFixed(2)]+")"}return"#"+(16777216|he|oe<<8|K<<16).toString(16).slice(1)});var Je=function(K){var oe=V.doc.getElementsByTagName("head")[0]||V.doc.getElementsByTagName("svg")[0],he="rgb(255, 0, 0)";return(Je=d(function(be){if("red"==be.toLowerCase())return he;oe.style.color=he,oe.style.color=be;var Le=V.doc.defaultView.getComputedStyle(oe,me).getPropertyValue("color");return Le==he?null:Le}))(K)},Ke=function(){return"hsb("+[this.h,this.s,this.b]+")"},at=function(){return"hsl("+[this.h,this.s,this.l]+")"},pt=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Wt=function(K,oe,he){if(null==oe&&e(K,"object")&&"r"in K&&"g"in K&&"b"in K&&(he=K.b,oe=K.g,K=K.r),null==oe&&e(K,string)){var be=F.getRGB(K);K=be.r,oe=be.g,he=be.b}return(K>1||oe>1||he>1)&&(K/=255,oe/=255,he/=255),[K,oe,he]},zt=function(K,oe,he,be){var Le={r:K=te.round(255*K),g:oe=te.round(255*oe),b:he=te.round(255*he),opacity:e(be,"finite")?be:1,hex:F.rgb(K,oe,he),toString:pt};return e(be,"finite")&&(Le.opacity=be),Le};F.color=function(K){var oe;return e(K,"object")&&"h"in K&&"s"in K&&"b"in K?(oe=F.hsb2rgb(K),K.r=oe.r,K.g=oe.g,K.b=oe.b,K.opacity=1,K.hex=oe.hex):e(K,"object")&&"h"in K&&"s"in K&&"l"in K?(oe=F.hsl2rgb(K),K.r=oe.r,K.g=oe.g,K.b=oe.b,K.opacity=1,K.hex=oe.hex):(e(K,"string")&&(K=F.getRGB(K)),e(K,"object")&&"r"in K&&"g"in K&&"b"in K&&!("error"in K)?(oe=F.rgb2hsl(K),K.h=oe.h,K.s=oe.s,K.l=oe.l,oe=F.rgb2hsb(K),K.v=oe.b):((K={hex:"none"}).r=K.g=K.b=K.h=K.s=K.v=K.l=-1,K.error=1)),K.toString=pt,K},F.hsb2rgb=function(K,oe,he,be){var Le,Se,_e,je,He;return e(K,"object")&&"h"in K&&"s"in K&&"b"in K&&(he=K.b,oe=K.s,be=K.o,K=K.h),Le=Se=_e=he-(He=he*oe),Le+=[He,je=He*(1-ve((K=(K*=360)%360/60)%2-1)),0,0,je,He][K=~~K],Se+=[je,He,He,je,0,0][K],_e+=[0,0,je,He,He,je][K],zt(Le,Se,_e,be)},F.hsl2rgb=function(K,oe,he,be){var Le,Se,_e,je,He;return e(K,"object")&&"h"in K&&"s"in K&&"l"in K&&(he=K.l,oe=K.s,K=K.h),(K>1||oe>1||he>1)&&(K/=360,oe/=100,he/=100),Le=Se=_e=he-(He=2*oe*(.5>he?he:1-he))/2,Le+=[He,je=He*(1-ve((K=(K*=360)%360/60)%2-1)),0,0,je,He][K=~~K],Se+=[je,He,He,je,0,0][K],_e+=[0,0,je,He,He,je][K],zt(Le,Se,_e,be)},F.rgb2hsb=function(K,oe,he){var Se,_e;return K=(he=Wt(K,oe,he))[0],oe=he[1],he=he[2],{h:((0==(_e=(Se=se(K,oe,he))-ne(K,oe,he))?null:Se==K?(oe-he)/_e:Se==oe?(he-K)/_e+2:(K-oe)/_e+4)+360)%6*60/360,s:0==_e?0:_e/Se,b:Se,toString:Ke}},F.rgb2hsl=function(K,oe,he){var Se,_e,je,He;return K=(he=Wt(K,oe,he))[0],oe=he[1],he=he[2],Se=((_e=se(K,oe,he))+(je=ne(K,oe,he)))/2,{h:((0==(He=_e-je)?null:_e==K?(oe-he)/He:_e==oe?(he-K)/He+2:(K-oe)/He+4)+360)%6*60/360,s:0==He?0:.5>Se?He/(2*Se):He/(2-2*Se),l:Se,toString:at}},F.parsePathString=function(K){if(!K)return null;var oe=F.path(K);if(oe.arr)return F.path.clone(oe.arr);var he={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},be=[];return e(K,"array")&&e(K[0],"array")&&(be=F.path.clone(K)),be.length||fe(K).replace(Ie,function(Le,Se,_e){var je=[],He=Se.toLowerCase();if(_e.replace(U,function(Ze,rt){rt&&je.push(+rt)}),"m"==He&&je.length>2&&(be.push([Se].concat(je.splice(0,2))),He="l",Se="m"==Se?"l":"L"),"o"==He&&1==je.length&&be.push([Se,je[0]]),"r"==He)be.push([Se].concat(je));else for(;je.length>=he[He]&&(be.push([Se].concat(je.splice(0,he[He]))),he[He]););}),be.toString=F.path.toString,oe.arr=F.path.clone(be),be};var Te=F.parseTransformString=function(K){if(!K)return null;var oe=[];return e(K,"array")&&e(K[0],"array")&&(oe=F.path.clone(K)),oe.length||fe(K).replace(qe,function(he,be,Le){var Se=[];be.toLowerCase(),Le.replace(U,function(_e,je){je&&Se.push(+je)}),oe.push([be].concat(Se))}),oe.toString=F.path.toString,oe};F._.svgTransform2string=function v(K){var oe=[];return K=K.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(he,be,Le){return Le=Le.split(/\s*,\s*|\s+/),"rotate"==be&&1==Le.length&&Le.push(0,0),"scale"==be&&(Le.length>2?Le=Le.slice(0,2):2==Le.length&&Le.push(0,0),1==Le.length&&Le.push(Le[0],0,0)),"skewX"==be?oe.push(["m",1,0,te.tan(h(Le[0])),1,0,0]):"skewY"==be?oe.push(["m",1,te.tan(h(Le[0])),0,1,0,0]):oe.push([be.charAt(0)].concat(Le)),he}),oe},F._.rgTransform=/^[a-z][\s]*-?\.?\d/i,F._.transform2matrix=function f(K,oe){var he=Te(K),be=new F.Matrix;if(he)for(var Le=0,Se=he.length;Se>Le;Le++){var _e,je,He,Ze,rt,Ve=he[Le],et=Ve.length,kt=fe(Ve[0]).toLowerCase(),vt=Ve[0]!=kt,mt=vt?be.invert():0;"t"==kt&&2==et?be.translate(Ve[1],0):"t"==kt&&3==et?vt?(_e=mt.x(0,0),je=mt.y(0,0),He=mt.x(Ve[1],Ve[2]),Ze=mt.y(Ve[1],Ve[2]),be.translate(He-_e,Ze-je)):be.translate(Ve[1],Ve[2]):"r"==kt?2==et?(rt=rt||oe,be.rotate(Ve[1],rt.x+rt.width/2,rt.y+rt.height/2)):4==et&&(vt?(He=mt.x(Ve[2],Ve[3]),Ze=mt.y(Ve[2],Ve[3]),be.rotate(Ve[1],He,Ze)):be.rotate(Ve[1],Ve[2],Ve[3])):"s"==kt?2==et||3==et?(rt=rt||oe,be.scale(Ve[1],Ve[et-1],rt.x+rt.width/2,rt.y+rt.height/2)):4==et?vt?(He=mt.x(Ve[2],Ve[3]),Ze=mt.y(Ve[2],Ve[3]),be.scale(Ve[1],Ve[1],He,Ze)):be.scale(Ve[1],Ve[1],Ve[2],Ve[3]):5==et&&(vt?(He=mt.x(Ve[3],Ve[4]),Ze=mt.y(Ve[3],Ve[4]),be.scale(Ve[1],Ve[2],He,Ze)):be.scale(Ve[1],Ve[2],Ve[3],Ve[4])):"m"==kt&&7==et&&be.add(Ve[1],Ve[2],Ve[3],Ve[4],Ve[5],Ve[6])}return be},F._unit2px=function E(K,oe,he){function be(Ze){if(null==Ze)return me;if(Ze==+Ze)return Ze;y(He,{width:Ze});try{return He.getBBox().width}catch(rt){return 0}}function Le(Ze){if(null==Ze)return me;if(Ze==+Ze)return Ze;y(He,{height:Ze});try{return He.getBBox().height}catch(rt){return 0}}function Se(Ze,rt){null==oe?je[Ze]=rt(K.attr(Ze)||0):Ze==oe&&(je=rt(null==he?K.attr(Ze)||0:he))}var _e=T(K).node,je={},He=_e.querySelector(".svg---mgr");switch(He||(He=y("rect"),y(He,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),_e.appendChild(He)),K.type){case"rect":Se("rx",be),Se("ry",Le);case"image":Se("width",be),Se("height",Le);case"text":Se("x",be),Se("y",Le);break;case"circle":Se("cx",be),Se("cy",Le),Se("r",be);break;case"ellipse":Se("cx",be),Se("cy",Le),Se("rx",be),Se("ry",Le);break;case"line":Se("x1",be),Se("x2",be),Se("y1",Le),Se("y2",Le);break;case"marker":Se("refX",be),Se("markerWidth",be),Se("refY",Le),Se("markerHeight",Le);break;case"radialGradient":Se("fx",be),Se("fy",Le);break;case"tspan":Se("dx",be),Se("dy",Le);break;default:Se(oe,be)}return _e.removeChild(He),je},V.doc.contains||V.doc.compareDocumentPosition,F._.getSomeDefs=function w(K){var oe=K.node.ownerSVGElement&&G(K.node.ownerSVGElement)||K.node.parentNode&&G(K.node.parentNode)||F.select("svg")||F(0,0),he=oe.select("defs"),be=null!=he&&he.node;return be||(be=O("defs",oe.node).node),be},F._.getSomeSVG=T,F.select=function(K){return K=fe(K).replace(/([^\\]):/g,"$1\\:"),G(V.doc.querySelector(K))},F.selectAll=function(K){for(var oe=V.doc.querySelectorAll(K),he=(F.set||Array)(),be=0;be<oe.length;be++)he.push(G(oe[be]));return he},setInterval(function(){for(var K in Pe)if(Pe[$](K)){var oe=Pe[K],he=oe.node;("svg"!=oe.type&&!he.ownerSVGElement||"svg"==oe.type&&(!he.parentNode||"ownerSVGElement"in he.parentNode&&!he.ownerSVGElement))&&delete Pe[K]}},1e4),M.prototype.attr=function(K,oe){var he=this,be=he.node;if(!K){if(1!=be.nodeType)return{text:be.nodeValue};for(var Le=be.attributes,Se={},_e=0,je=Le.length;je>_e;_e++)Se[Le[_e].nodeName]=Le[_e].nodeValue;return Se}if(e(K,"string")){if(!(arguments.length>1))return ie("snap.util.getattr."+K,he).firstDefined();var He={};He[K]=oe,K=He}for(var Ze in K)K[$](Ze)&&ie("snap.util.attr."+Ze,he,K[Ze]);return he},F.parse=function(K){var oe=V.doc.createDocumentFragment(),he=!0,be=V.doc.createElement("div");if((K=fe(K)).match(/^\s*<\s*svg(?:\s|>)/)||(K="<svg>"+K+"</svg>",he=!1),be.innerHTML=K,K=be.getElementsByTagName("svg")[0])if(he)oe=K;else for(;K.firstChild;)oe.appendChild(K.firstChild);return new j(oe)},F.fragment=function(){for(var K=Array.prototype.slice.call(arguments,0),oe=V.doc.createDocumentFragment(),he=0,be=K.length;be>he;he++){var Le=K[he];Le.node&&Le.node.nodeType&&oe.appendChild(Le.node),Le.nodeType&&oe.appendChild(Le),"string"==typeof Le&&oe.appendChild(F.parse(Le).node)}return new j(oe)},F._.make=O,F._.wrap=G,L.prototype.el=function(K,oe){var he=O(K,this.node);return oe&&he.attr(oe),he},M.prototype.children=function(){for(var K=[],oe=this.node.childNodes,he=0,be=oe.length;be>he;he++)K[he]=F(oe[he]);return K},M.prototype.toJSON=function(){var K=[];return W([this],K),K[0]},ie.on("snap.util.getattr",function(){var K=ie.nt(),oe=(K=K.substring(K.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(he){return"-"+he.toLowerCase()});return De[$](oe)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(oe):y(this.node,K)});var De={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};ie.on("snap.util.attr",function(K){var oe=ie.nt(),he={};he[oe=oe.substring(oe.lastIndexOf(".")+1)]=K;var be=oe.replace(/-(\w)/gi,function(Se,_e){return _e.toUpperCase()}),Le=oe.replace(/[A-Z]/g,function(Se){return"-"+Se.toLowerCase()});De[$](Le)?this.node.style[be]=null==K?me:K:y(this.node,he)}),L.prototype,F.ajax=function(K,oe,he,be){var Le=new XMLHttpRequest,Se=pe();if(Le){if(e(oe,"function"))be=he,he=oe,oe=null;else if(e(oe,"object")){var _e=[];for(var je in oe)oe.hasOwnProperty(je)&&_e.push(encodeURIComponent(je)+"="+encodeURIComponent(oe[je]));oe=_e.join("&")}return Le.open(oe?"POST":"GET",K,!0),oe&&(Le.setRequestHeader("X-Requested-With","XMLHttpRequest"),Le.setRequestHeader("Content-type","application/x-www-form-urlencoded")),he&&(ie.once("snap.ajax."+Se+".0",he),ie.once("snap.ajax."+Se+".200",he),ie.once("snap.ajax."+Se+".304",he)),Le.onreadystatechange=function(){4==Le.readyState&&ie("snap.ajax."+Se+"."+Le.status,be,Le)},4==Le.readyState||Le.send(oe),Le}},F.load=function(K,oe,he){F.ajax(K,function(be){var Le=F.parse(be.responseText);he?oe.call(he,Le):oe(Le)})};return F.getElementByPoint=function(K,oe){var be=(this.canvas,V.doc.elementFromPoint(K,oe));if(V.win.opera&&"svg"==be.tagName){var Le=function(K){var oe=K.getBoundingClientRect(),he=K.ownerDocument,be=he.body,Le=he.documentElement,Se=Le.clientTop||be.clientTop||0,_e=Le.clientLeft||be.clientLeft||0;return{y:oe.top+(g.win.pageYOffset||Le.scrollTop||be.scrollTop)-Se,x:oe.left+(g.win.pageXOffset||Le.scrollLeft||be.scrollLeft)-_e}}(be),Se=be.createSVGRect();Se.x=K-Le.x,Se.y=oe-Le.y,Se.width=Se.height=1;var _e=be.getIntersectionList(Se,null);_e.length&&(be=_e[_e.length-1])}return be?G(be):null},F.plugin=function(K){K(F,M,L,V,j)},V.win.Snap=F,F}(J||this);return q.plugin(function(l,F,y,e,o){function u(L,G){if(null==G){var W=!0;if(!(G="linearGradient"==L.type||"radialGradient"==L.type?L.node.getAttribute("gradientTransform"):"pattern"==L.type?L.node.getAttribute("patternTransform"):L.node.getAttribute("transform")))return new l.Matrix;G=l._.svgTransform2string(G)}else G=l._.rgTransform.test(G)?v(G).replace(/\.{3}|\u2026/g,L._.transform||""):l._.svgTransform2string(G),k(G,"array")&&(G=l.path?l.path.toString.call(G):v(G)),L._.transform=G;var V=l._.transform2matrix(G,L.getBBox(1));return W?V:void(L.matrix=V)}function b(L){return function(){var G=L?"<"+this.type:"",W=this.node.attributes,V=this.node.childNodes;if(L)for(var $=0,fe=W.length;fe>$;$++)G+=" "+W[$].name+'="'+W[$].value.replace(/"/g,'\\"')+'"';if(V.length){for(L&&(G+=">"),$=0,fe=V.length;fe>$;$++)3==V[$].nodeType?G+=V[$].nodeValue:1==V[$].nodeType&&(G+=M(V[$]).toString());L&&(G+="</"+this.type+">")}else L&&(G+="/>");return G}}var h=F.prototype,k=l.is,v=String,f=l._unit2px,w=l._.$,T=l._.make,E=l._.getSomeDefs,P="hasOwnProperty",M=l._.wrap;h.getBBox=function(L){if("tspan"==this.type)return l._.box(this.node.getClientRects().item(0));if(!l.Matrix||!l.path)return this.node.getBBox();var G=this,W=new l.Matrix;if(G.removed)return l._.box();for(;"use"==G.type;)if(L||(W=W.add(G.transform().localMatrix.translate(G.attr("x")||0,G.attr("y")||0))),G.original)G=G.original;else{var V=G.attr("xlink:href");G=G.original=G.node.ownerDocument.getElementById(V.substring(V.indexOf("#")+1))}var $=G._,fe=l.path.get[G.type]||l.path.get.deflt;try{return L?($.bboxwt=fe?l.path.getBBox(G.realPath=fe(G)):l._.box(G.node.getBBox()),l._.box($.bboxwt)):(G.realPath=fe(G),G.matrix=G.transform().localMatrix,$.bbox=l.path.getBBox(l.path.map(G.realPath,W.add(G.matrix))),l._.box($.bbox))}catch(ce){return l._.box()}};var j=function(){return this.string};h.transform=function(L){var G=this._;if(null==L){for(var W,V=this,$=new l.Matrix(this.node.getCTM()),fe=u(this),ce=[fe],xe=new l.Matrix,te=fe.toTransformString(),se=v(fe)==v(this.matrix)?v(G.transform):te;"svg"!=V.type&&(V=V.parent());)ce.push(u(V));for(W=ce.length;W--;)xe.add(ce[W]);return{string:se,globalMatrix:$,totalMatrix:xe,localMatrix:fe,diffMatrix:$.clone().add(fe.invert()),global:$.toTransformString(),total:xe.toTransformString(),local:te,toString:j}}return L instanceof l.Matrix?(this.matrix=L,this._.transform=L.toTransformString()):u(this,L),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?w(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?w(this.node,{patternTransform:this.matrix}):w(this.node,{transform:this.matrix})),this},h.parent=function(){return M(this.node.parentNode)},h.append=h.add=function(L){if(L){if("set"==L.type){var G=this;return L.forEach(function(W){G.add(W)}),this}L=M(L),this.node.appendChild(L.node),L.paper=this.paper}return this},h.appendTo=function(L){return L&&(L=M(L)).append(this),this},h.prepend=function(L){if(L){if("set"==L.type){var G,W=this;return L.forEach(function($){G?G.after($):W.prepend($),G=$}),this}var V=(L=M(L)).parent();this.node.insertBefore(L.node,this.node.firstChild),this.add&&this.add(),L.paper=this.paper,this.parent()&&this.parent().add(),V&&V.add()}return this},h.prependTo=function(L){return(L=M(L)).prepend(this),this},h.before=function(L){if("set"==L.type){var G=this;return L.forEach(function(V){var $=V.parent();G.node.parentNode.insertBefore(V.node,G.node),$&&$.add()}),this.parent().add(),this}var W=(L=M(L)).parent();return this.node.parentNode.insertBefore(L.node,this.node),this.parent()&&this.parent().add(),W&&W.add(),L.paper=this.paper,this},h.after=function(L){var G=(L=M(L)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(L.node,this.node.nextSibling):this.node.parentNode.appendChild(L.node),this.parent()&&this.parent().add(),G&&G.add(),L.paper=this.paper,this},h.insertBefore=function(L){L=M(L);var G=this.parent();return L.node.parentNode.insertBefore(this.node,L.node),this.paper=L.paper,G&&G.add(),L.parent()&&L.parent().add(),this},h.insertAfter=function(L){L=M(L);var G=this.parent();return L.node.parentNode.insertBefore(this.node,L.node.nextSibling),this.paper=L.paper,G&&G.add(),L.parent()&&L.parent().add(),this},h.remove=function(){var L=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,L&&L.add(),this},h.select=function(L){return M(this.node.querySelector(L))},h.selectAll=function(L){for(var G=this.node.querySelectorAll(L),W=(l.set||Array)(),V=0;V<G.length;V++)W.push(M(G[V]));return W},h.asPX=function(L,G){return null==G&&(G=this.attr(L)),+f(this,L,G)},h.use=function(){var L,G=this.node.id;return G||(G=this.id,w(this.node,{id:G})),L="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?T(this.type,this.node.parentNode):T("use",this.node.parentNode),w(L.node,{"xlink:href":"#"+G}),L.original=this,L},h.clone=function(){var L=M(this.node.cloneNode(!0));return w(L.node,"id")&&w(L.node,{id:L.id}),function d(L){function G(de,ye){var Ee=w(de.node,ye);(Ee=(Ee=Ee&&Ee.match(fe))&&Ee[2])&&"#"==Ee.charAt()&&(Ee=Ee.substring(1))&&(xe[Ee]=(xe[Ee]||[]).concat(function(Be){var Ie={};Ie[ye]=l.url(Be),w(de.node,Ie)}))}function W(de){var ye=w(de.node,"xlink:href");ye&&"#"==ye.charAt()&&(ye=ye.substring(1))&&(xe[ye]=(xe[ye]||[]).concat(function(Ee){de.attr("xlink:href","#"+Ee)}))}for(var V,$=L.selectAll("*"),fe=/^\s*url\(("|'|)(.*)\1\)\s*$/,ce=[],xe={},te=0,se=$.length;se>te;te++){G(V=$[te],"fill"),G(V,"stroke"),G(V,"filter"),G(V,"mask"),G(V,"clip-path"),W(V);var ne=w(V.node,"id");ne&&(w(V.node,{id:V.id}),ce.push({old:ne,id:V.id}))}for(te=0,se=ce.length;se>te;te++){var ve=xe[ce[te].old];if(ve)for(var Ce=0,me=ve.length;me>Ce;Ce++)ve[Ce](ce[te].id)}}(L),L.insertAfter(this),L},h.toDefs=function(){return E(this).appendChild(this.node),this},h.pattern=h.toPattern=function(L,G,W,V){var $=T("pattern",E(this));return null==L&&(L=this.getBBox()),k(L,"object")&&"x"in L&&(G=L.y,W=L.width,V=L.height,L=L.x),w($.node,{x:L,y:G,width:W,height:V,patternUnits:"userSpaceOnUse",id:$.id,viewBox:[L,G,W,V].join(" ")}),$.node.appendChild(this.node),$},h.marker=function(L,G,W,V,$,fe){var ce=T("marker",E(this));return null==L&&(L=this.getBBox()),k(L,"object")&&"x"in L&&(G=L.y,W=L.width,V=L.height,$=L.refX||L.cx,fe=L.refY||L.cy,L=L.x),w(ce.node,{viewBox:[L,G,W,V].join(" "),markerWidth:W,markerHeight:V,orient:"auto",refX:$||0,refY:fe||0,id:ce.id}),ce.node.appendChild(this.node),ce};var O={};h.data=function(L,G){var W=O[this.id]=O[this.id]||{};if(0==arguments.length)return ie("snap.data.get."+this.id,this,W,null),W;if(1==arguments.length){if(l.is(L,"object")){for(var V in L)L[P](V)&&this.data(V,L[V]);return this}return ie("snap.data.get."+this.id,this,W[L],L),W[L]}return W[L]=G,ie("snap.data.set."+this.id,this,G,L),this},h.removeData=function(L){return null==L?O[this.id]={}:O[this.id]&&delete O[this.id][L],this},h.outerSVG=h.toString=b(1),h.innerSVG=b(),h.toDataURL=function(){if(J&&J.btoa){var L=this.getBBox(),G=l.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+L.x.toFixed(3),y:+L.y.toFixed(3),width:+L.width.toFixed(3),height:+L.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(G)))}},o.prototype.select=h.select,o.prototype.selectAll=h.selectAll}),q.plugin(function(l,F,y,e,o){function u(f,w,T){return function(E){var P=E.slice(f,w);return 1==P.length&&(P=P[0]),T?T(P):P}}var d=F.prototype,b=l.is,h=String,k="hasOwnProperty",v=function(f,w,T,E){"function"!=typeof T||T.length||(E=T,T=ue.linear),this.attr=f,this.dur=w,T&&(this.easing=T),E&&(this.callback=E)};l._.Animation=v,l.animation=function(f,w,T,E){return new v(f,w,T,E)},d.inAnim=function(){var f=this,w=[];for(var T in f.anims)f.anims[k](T)&&function(E){w.push({anim:new v(E._attrs,E.dur,E.easing,E._callback),mina:E,curStatus:E.status(),status:function(P){return E.status(P)},stop:function(){E.stop()}})}(f.anims[T]);return w},l.animate=function(f,w,T,E,P,M){"function"!=typeof P||P.length||(M=P,P=ue.linear);var j=ue.time(),O=ue(f,w,j,j+E,ue.time,T,P);return M&&ie.once("mina.finish."+O.id,M),O},d.stop=function(){for(var f=this.inAnim(),w=0,T=f.length;T>w;w++)f[w].stop();return this},d.animate=function(f,w,T,E){"function"!=typeof T||T.length||(E=T,T=ue.linear),f instanceof v&&(E=f.callback,T=f.easing,w=f.dur,f=f.attr);var P,M,j,O,L=[],G=[],W={},V=this;for(var $ in f)if(f[k]($)){V.equal?(P=(O=V.equal($,h(f[$]))).from,M=O.to,j=O.f):(P=+V.attr($),M=+f[$]);var fe=b(P,"array")?P.length:1;W[$]=u(L.length,L.length+fe,j),L=L.concat(P),G=G.concat(M)}var ce=ue.time(),xe=ue(L,G,ce,ce+w,ue.time,function(te){var se={};for(var ne in W)W[k](ne)&&(se[ne]=W[ne](te));V.attr(se)},T);return V.anims[xe.id]=xe,xe._attrs=f,xe._callback=E,ie("snap.animcreated."+V.id,xe),ie.once("mina.finish."+xe.id,function(){ie.off("mina.*."+xe.id),delete V.anims[xe.id],E&&E.call(V)}),ie.once("mina.stop."+xe.id,function(){ie.off("mina.*."+xe.id),delete V.anims[xe.id]}),V}}),q.plugin(function(l,F,y,e,o){function u(v,f,w,T,E,P){return null==f&&"[object SVGMatrix]"==d.call(v)?(this.a=v.a,this.b=v.b,this.c=v.c,this.d=v.d,this.e=v.e,void(this.f=v.f)):void(null!=v?(this.a=+v,this.b=+f,this.c=+w,this.d=+T,this.e=+E,this.f=+P):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var d=Object.prototype.toString,b=String,h=Math;(function(v){function f(T){return T[0]*T[0]+T[1]*T[1]}function w(T){var E=h.sqrt(f(T));T[0]&&(T[0]/=E),T[1]&&(T[1]/=E)}v.add=function(T,E,P,M,j,O){if(T&&T instanceof u)return this.add(T.a,T.b,T.c,T.d,T.e,T.f);var L=T*this.a+E*this.c,G=T*this.b+E*this.d;return this.e+=j*this.a+O*this.c,this.f+=j*this.b+O*this.d,this.c=P*this.a+M*this.c,this.d=P*this.b+M*this.d,this.a=L,this.b=G,this},u.prototype.multLeft=function(T,E,P,M,j,O){if(T&&T instanceof u)return this.multLeft(T.a,T.b,T.c,T.d,T.e,T.f);var L=T*this.a+P*this.b,G=T*this.c+P*this.d,W=T*this.e+P*this.f+j;return this.b=E*this.a+M*this.b,this.d=E*this.c+M*this.d,this.f=E*this.e+M*this.f+O,this.a=L,this.c=G,this.e=W,this},v.invert=function(){var T=this,E=T.a*T.d-T.b*T.c;return new u(T.d/E,-T.b/E,-T.c/E,T.a/E,(T.c*T.f-T.d*T.e)/E,(T.b*T.e-T.a*T.f)/E)},v.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)},v.translate=function(T,E){return this.e+=T*this.a+E*this.c,this.f+=T*this.b+E*this.d,this},v.scale=function(T,E,P,M){return null==E&&(E=T),(P||M)&&this.translate(P,M),this.a*=T,this.b*=T,this.c*=E,this.d*=E,(P||M)&&this.translate(-P,-M),this},v.rotate=function(T,E,P){T=l.rad(T),E=E||0,P=P||0;var M=+h.cos(T).toFixed(9),j=+h.sin(T).toFixed(9);return this.add(M,j,-j,M,E,P),this.add(1,0,0,1,-E,-P)},v.skewX=function(T){return this.skew(T,0)},v.skewY=function(T){return this.skew(0,T)},v.skew=function(T,E){T=T||0,E=E||0,T=l.rad(T),E=l.rad(E);var P=h.tan(T).toFixed(9),M=h.tan(E).toFixed(9);return this.add(1,M,P,1,0,0)},v.x=function(T,E){return T*this.a+E*this.c+this.e},v.y=function(T,E){return T*this.b+E*this.d+this.f},v.get=function(T){return+this[b.fromCharCode(97+T)].toFixed(4)},v.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},v.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},v.determinant=function(){return this.a*this.d-this.b*this.c},v.split=function(){var T={};T.dx=this.e,T.dy=this.f;var E=[[this.a,this.b],[this.c,this.d]];T.scalex=h.sqrt(f(E[0])),w(E[0]),T.shear=E[0][0]*E[1][0]+E[0][1]*E[1][1],E[1]=[E[1][0]-E[0][0]*T.shear,E[1][1]-E[0][1]*T.shear],T.scaley=h.sqrt(f(E[1])),w(E[1]),T.shear/=T.scaley,this.determinant()<0&&(T.scalex=-T.scalex);var P=E[0][1],M=E[1][1];return 0>M?(T.rotate=l.deg(h.acos(M)),0>P&&(T.rotate=360-T.rotate)):T.rotate=l.deg(h.asin(P)),T.isSimple=!(+T.shear.toFixed(9)||T.scalex.toFixed(9)!=T.scaley.toFixed(9)&&T.rotate),T.isSuperSimple=!+T.shear.toFixed(9)&&T.scalex.toFixed(9)==T.scaley.toFixed(9)&&!T.rotate,T.noRotation=!+T.shear.toFixed(9)&&!T.rotate,T},v.toTransformString=function(T){var E=T||this.split();return+E.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(E.scalex=+E.scalex.toFixed(4),E.scaley=+E.scaley.toFixed(4),E.rotate=+E.rotate.toFixed(4),(E.dx||E.dy?"t"+[+E.dx.toFixed(4),+E.dy.toFixed(4)]:"")+(E.rotate?"r"+[+E.rotate.toFixed(4),0,0]:"")+(1!=E.scalex||1!=E.scaley?"s"+[E.scalex,E.scaley,0,0]:""))}})(u.prototype),l.Matrix=u,l.matrix=function(v,f,w,T,E,P){return new u(v,f,w,T,E,P)}}),q.plugin(function(l,F,y,e,o){function u(G){return function(W){if(ie.stop(),W instanceof o&&1==W.node.childNodes.length&&("radialGradient"==W.node.firstChild.tagName||"linearGradient"==W.node.firstChild.tagName||"pattern"==W.node.firstChild.tagName)&&(W=W.node.firstChild,w(this).appendChild(W),W=v(W)),W instanceof F)if("radialGradient"==W.type||"linearGradient"==W.type||"pattern"==W.type){W.node.id||E(W.node,{id:W.id});var V=P(W.node.id)}else V=W.attr(G);else if((V=l.color(W)).error){var $=l(w(this).ownerSVGElement).gradient(W);$?($.node.id||E($.node,{id:$.id}),V=P($.node.id)):V=W}else V=M(V);var fe={};fe[G]=V,E(this.node,fe),this.node.style[G]=O}}function d(G){ie.stop(),G==+G&&(G+="px"),this.node.style.fontSize=G}function b(G){for(var W=[],V=G.childNodes,$=0,fe=V.length;fe>$;$++){var ce=V[$];3==ce.nodeType&&W.push(ce.nodeValue),"tspan"==ce.tagName&&(1==ce.childNodes.length&&3==ce.firstChild.nodeType?W.push(ce.firstChild.nodeValue):W.push(b(ce)))}return W}function h(){return ie.stop(),this.node.style.fontSize}var G,k=l._.make,v=l._.wrap,f=l.is,w=l._.getSomeDefs,T=/^url\((['"]?)([^)]+)\1\)$/,E=l._.$,P=l.url,M=String,j=l._.separator,O="";l.deurl=function(G){var W=String(G).match(T);return W?W[2]:G},ie.on("snap.util.attr.mask",function(G){if(G instanceof F||G instanceof o){if(ie.stop(),G instanceof o&&1==G.node.childNodes.length&&(G=G.node.firstChild,w(this).appendChild(G),G=v(G)),"mask"==G.type)var W=G;else(W=k("mask",w(this))).node.appendChild(G.node);!W.node.id&&E(W.node,{id:W.id}),E(this.node,{mask:P(W.id)})}}),G=function(G){if(G instanceof F||G instanceof o){ie.stop();for(var W,V=G.node;V;){if("clipPath"===V.nodeName){W=new F(V);break}if("svg"===V.nodeName){W=void 0;break}V=V.parentNode}W||((W=k("clipPath",w(this))).node.appendChild(G.node),!W.node.id&&E(W.node,{id:W.id})),E(this.node,{"clip-path":P(W.node.id||W.id)})}},ie.on("snap.util.attr.clip",G),ie.on("snap.util.attr.clip-path",G),ie.on("snap.util.attr.clipPath",G),ie.on("snap.util.attr.fill",u("fill")),ie.on("snap.util.attr.stroke",u("stroke"));var L=/^([lr])(?:\(([^)]*)\))?(.*)$/i;ie.on("snap.util.grad.parse",function(G){function W(ve,Ce){for(var me=(Ce-te)/(ve-se),de=se;ve>de;de++)ce[de].offset=+(+te+me*(de-se)).toFixed(2);se=ve,te=Ce}var V=(G=M(G)).match(L);if(!V)return null;var $=V[1],fe=V[2],ce=V[3];1==(fe=fe.split(/\s*,\s*/).map(function(ve){return+ve==ve?+ve:ve})).length&&0==fe[0]&&(fe=[]);var xe=(ce=(ce=ce.split("-")).map(function(ve){var Ce={color:(ve=ve.split(":"))[0]};return ve[1]&&(Ce.offset=parseFloat(ve[1])),Ce})).length,te=0,se=0;xe--;for(var ne=0;xe>ne;ne++)"offset"in ce[ne]&&W(ne,ce[ne].offset);return ce[xe].offset=ce[xe].offset||100,W(xe,ce[xe].offset),{type:$,params:fe,stops:ce}}),ie.on("snap.util.attr.d",function(G){ie.stop(),f(G,"array")&&f(G[0],"array")&&(G=l.path.toString.call(G)),(G=M(G)).match(/[ruo]/i)&&(G=l.path.toAbsolute(G)),E(this.node,{d:G})})(-1),ie.on("snap.util.attr.#text",function(G){ie.stop(),G=M(G);for(var W=e.doc.createTextNode(G);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(W)})(-1),ie.on("snap.util.attr.path",function(G){ie.stop(),this.attr({d:G})})(-1),ie.on("snap.util.attr.class",function(G){ie.stop(),this.node.className.baseVal=G})(-1),ie.on("snap.util.attr.viewBox",function(G){var W;W=f(G,"object")&&"x"in G?[G.x,G.y,G.width,G.height].join(" "):f(G,"array")?G.join(" "):G,E(this.node,{viewBox:W}),ie.stop()})(-1),ie.on("snap.util.attr.transform",function(G){this.transform(G),ie.stop()})(-1),ie.on("snap.util.attr.r",function(G){"rect"==this.type&&(ie.stop(),E(this.node,{rx:G,ry:G}))})(-1),ie.on("snap.util.attr.textpath",function(G){if(ie.stop(),"text"==this.type){var W,V,$;if(!G&&this.textPath){for(V=this.textPath;V.node.firstChild;)this.node.appendChild(V.node.firstChild);return V.remove(),void delete this.textPath}if(f(G,"string")){var fe=w(this),ce=v(fe.parentNode).path(G);fe.appendChild(ce.node),W=ce.id,ce.attr({id:W})}else(G=v(G))instanceof F&&((W=G.attr("id"))||(W=G.id,G.attr({id:W})));if(W)if(V=this.textPath,$=this.node,V)V.attr({"xlink:href":"#"+W});else{for(V=E("textPath",{"xlink:href":"#"+W});$.firstChild;)V.appendChild($.firstChild);$.appendChild(V),this.textPath=v(V)}}})(-1),ie.on("snap.util.attr.text",function(G){if("text"==this.type){for(var W=this.node,V=function(fe){var ce=E("tspan");if(f(fe,"array"))for(var xe=0;xe<fe.length;xe++)ce.appendChild(V(fe[xe]));else ce.appendChild(e.doc.createTextNode(fe));return ce.normalize&&ce.normalize(),ce};W.firstChild;)W.removeChild(W.firstChild);for(var $=V(G);$.firstChild;)W.appendChild($.firstChild)}ie.stop()})(-1),ie.on("snap.util.attr.fontSize",d)(-1),ie.on("snap.util.attr.font-size",d)(-1),ie.on("snap.util.getattr.transform",function(){return ie.stop(),this.transform()})(-1),ie.on("snap.util.getattr.textpath",function(){return ie.stop(),this.textPath})(-1),function(){function G(V){return function(){ie.stop();var $=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+V);return"none"==$?$:l(e.doc.getElementById($.match(T)[1]))}}function W(V){return function($){ie.stop();var fe="marker"+V.charAt(0).toUpperCase()+V.substring(1);if(""!=$&&$){if("marker"==$.type){var ce=$.node.id;return ce||E($.node,{id:$.id}),void(this.node.style[fe]=P(ce))}}else this.node.style[fe]="none"}}ie.on("snap.util.getattr.marker-end",G("end"))(-1),ie.on("snap.util.getattr.markerEnd",G("end"))(-1),ie.on("snap.util.getattr.marker-start",G("start"))(-1),ie.on("snap.util.getattr.markerStart",G("start"))(-1),ie.on("snap.util.getattr.marker-mid",G("mid"))(-1),ie.on("snap.util.getattr.markerMid",G("mid"))(-1),ie.on("snap.util.attr.marker-end",W("end"))(-1),ie.on("snap.util.attr.markerEnd",W("end"))(-1),ie.on("snap.util.attr.marker-start",W("start"))(-1),ie.on("snap.util.attr.markerStart",W("start"))(-1),ie.on("snap.util.attr.marker-mid",W("mid"))(-1),ie.on("snap.util.attr.markerMid",W("mid"))(-1)}(),ie.on("snap.util.getattr.r",function(){return"rect"==this.type&&E(this.node,"rx")==E(this.node,"ry")?(ie.stop(),E(this.node,"rx")):void 0})(-1),ie.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){ie.stop();var G=b(this.node);return 1==G.length?G[0]:G}})(-1),ie.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),ie.on("snap.util.getattr.fill",function(G){if(!G){ie.stop();var W=ie("snap.util.getattr.fill",this,!0).firstDefined();return l(l.deurl(W))||W}})(-1),ie.on("snap.util.getattr.stroke",function(G){if(!G){ie.stop();var W=ie("snap.util.getattr.stroke",this,!0).firstDefined();return l(l.deurl(W))||W}})(-1),ie.on("snap.util.getattr.viewBox",function(){ie.stop();var G=E(this.node,"viewBox");return G?(G=G.split(j),l._.box(+G[0],+G[1],+G[2],+G[3])):void 0})(-1),ie.on("snap.util.getattr.points",function(){var G=E(this.node,"points");return ie.stop(),G?G.split(j):void 0})(-1),ie.on("snap.util.getattr.path",function(){var G=E(this.node,"d");return ie.stop(),G})(-1),ie.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),ie.on("snap.util.getattr.fontSize",h)(-1),ie.on("snap.util.getattr.font-size",h)(-1)}),q.plugin(function(l,F,y,e,o){var u=/\S+/g,d=String,b=F.prototype;b.addClass=function(h){var k,f,w,T=d(h||"").match(u)||[],E=this.node,P=E.className.baseVal,M=P.match(u)||[];if(T.length){for(k=0;f=T[k++];)~M.indexOf(f)||M.push(f);P!=(w=M.join(" "))&&(E.className.baseVal=w)}return this},b.removeClass=function(h){var k,v,f,w,T=d(h||"").match(u)||[],E=this.node,P=E.className.baseVal,M=P.match(u)||[];if(M.length){for(k=0;f=T[k++];)~(v=M.indexOf(f))&&M.splice(v,1);P!=(w=M.join(" "))&&(E.className.baseVal=w)}return this},b.hasClass=function(h){return!!~(this.node.className.baseVal.match(u)||[]).indexOf(h)},b.toggleClass=function(h,k){if(null!=k)return k?this.addClass(h):this.removeClass(h);var v,f,w,T,E=(h||"").match(u)||[],P=this.node,M=P.className.baseVal,j=M.match(u)||[];for(v=0;w=E[v++];)~(f=j.indexOf(w))?j.splice(f,1):j.push(w);return M!=(T=j.join(" "))&&(P.className.baseVal=T),this}}),q.plugin(function(l,F,y,e,o){function u(f){return f}function d(f){return function(w){return+w.toFixed(3)+f}}var b={"+":function(f,w){return f+w},"-":function(f,w){return f-w},"/":function(f,w){return f/w},"*":function(f,w){return f*w}},h=String,k=/[a-z]+$/i,v=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;ie.on("snap.util.attr",function(f){var w=h(f).match(v);if(w){var T=ie.nt(),E=T.substring(T.lastIndexOf(".")+1),P=this.attr(E),M={};ie.stop();var j=w[3]||"",O=P.match(k),L=b[w[1]];if(O&&O==j?f=L(parseFloat(P),+w[2]):(P=this.asPX(E),f=L(this.asPX(E),this.asPX(E,w[2]+j))),isNaN(P)||isNaN(f))return;M[E]=f,this.attr(M)}})(-10),ie.on("snap.util.equal",function(f,w){var T=h(this.attr(f)||""),E=h(w).match(v);if(E){ie.stop();var P=E[3]||"",M=T.match(k),j=b[E[1]];return M&&M==P?{from:parseFloat(T),to:j(parseFloat(T),+E[2]),f:d(M)}:{from:T=this.asPX(f),to:j(T,this.asPX(f,E[2]+P)),f:u}}})(-10)}),q.plugin(function(l,F,y,e,o){var u=y.prototype,d=l.is;u.rect=function(h,k,v,f,w,T){var E;return null==T&&(T=w),d(h,"object")&&"[object Object]"==h?E=h:null!=h&&(E={x:h,y:k,width:v,height:f},null!=w&&(E.rx=w,E.ry=T)),this.el("rect",E)},u.circle=function(h,k,v){var f;return d(h,"object")&&"[object Object]"==h?f=h:null!=h&&(f={cx:h,cy:k,r:v}),this.el("circle",f)};var b=function(){function h(){this.parentNode.removeChild(this)}return function(k,v){var f=e.doc.createElement("img"),w=e.doc.body;f.style.cssText="position:absolute;left:-9999em;top:-9999em",f.onload=function(){v.call(f),f.onload=f.onerror=null,w.removeChild(f)},f.onerror=h,w.appendChild(f),f.src=k}}();u.image=function(h,k,v,f,w){var T=this.el("image");if(d(h,"object")&&"src"in h)T.attr(h);else if(null!=h){var E={"xlink:href":h,preserveAspectRatio:"none"};null!=k&&null!=v&&(E.x=k,E.y=v),null!=f&&null!=w?(E.width=f,E.height=w):b(h,function(){l._.$(T.node,{width:this.offsetWidth,height:this.offsetHeight})}),l._.$(T.node,E)}return T},u.ellipse=function(h,k,v,f){var w;return d(h,"object")&&"[object Object]"==h?w=h:null!=h&&(w={cx:h,cy:k,rx:v,ry:f}),this.el("ellipse",w)},u.path=function(h){var k;return d(h,"object")&&!d(h,"array")?k=h:h&&(k={d:h}),this.el("path",k)},u.group=u.g=function(h){var k=this.el("g");return 1==arguments.length&&h&&!h.type?k.attr(h):arguments.length&&k.add(Array.prototype.slice.call(arguments,0)),k},u.svg=function(h,k,v,f,w,T,E,P){var M={};return d(h,"object")&&null==k?M=h:(null!=h&&(M.x=h),null!=k&&(M.y=k),null!=v&&(M.width=v),null!=f&&(M.height=f),null!=w&&null!=T&&null!=E&&null!=P&&(M.viewBox=[w,T,E,P])),this.el("svg",M)},u.mask=function(h){var k=this.el("mask");return 1==arguments.length&&h&&!h.type?k.attr(h):arguments.length&&k.add(Array.prototype.slice.call(arguments,0)),k},u.ptrn=function(h,k,v,f,w,T,E,P){if(d(h,"object"))var M=h;else M={patternUnits:"userSpaceOnUse"},h&&(M.x=h),k&&(M.y=k),null!=v&&(M.width=v),null!=f&&(M.height=f),M.viewBox=null!=w&&null!=T&&null!=E&&null!=P?[w,T,E,P]:[h||0,k||0,v||0,f||0];return this.el("pattern",M)},u.use=function(h){return null!=h?(h instanceof F&&(h.attr("id")||h.attr({id:l._.id(h)}),h=h.attr("id")),"#"==String(h).charAt()&&(h=h.substring(1)),this.el("use",{"xlink:href":"#"+h})):F.prototype.use.call(this)},u.symbol=function(h,k,v,f){var w={};return null!=h&&null!=k&&null!=v&&null!=f&&(w.viewBox=[h,k,v,f]),this.el("symbol",w)},u.text=function(h,k,v){var f={};return d(h,"object")?f=h:null!=h&&(f={x:h,y:k,text:v||""}),this.el("text",f)},u.line=function(h,k,v,f){var w={};return d(h,"object")?w=h:null!=h&&(w={x1:h,x2:v,y1:k,y2:f}),this.el("line",w)},u.polyline=function(h){arguments.length>1&&(h=Array.prototype.slice.call(arguments,0));var k={};return d(h,"object")&&!d(h,"array")?k=h:null!=h&&(k={points:h}),this.el("polyline",k)},u.polygon=function(h){arguments.length>1&&(h=Array.prototype.slice.call(arguments,0));var k={};return d(h,"object")&&!d(h,"array")?k=h:null!=h&&(k={points:h}),this.el("polygon",k)},function(){function h(){return this.selectAll("stop")}function k(M,j){var O=P("stop"),L={offset:+j+"%"};M=l.color(M),L["stop-color"]=M.hex,M.opacity<1&&(L["stop-opacity"]=M.opacity),P(O,L);for(var G,W=this.stops(),V=0;V<W.length;V++){if(parseFloat(W[V].attr("offset"))>j){this.node.insertBefore(O,W[V].node),G=!0;break}}return G||this.node.appendChild(O),this}function v(){if("linearGradient"==this.type){var M=P(this.node,"x1")||0,j=P(this.node,"x2")||1,O=P(this.node,"y1")||0,L=P(this.node,"y2")||0;return l._.box(M,O,math.abs(j-M),math.abs(L-O))}var G=this.node.cx||.5,W=this.node.cy||.5,V=this.node.r||0;return l._.box(G-V,W-V,2*V,2*V)}function f(M){var j=M,O=this.stops();if("string"==typeof M&&(j=ie("snap.util.grad.parse",null,"l(0,0,0,1)"+M).firstDefined().stops),l.is(j,"array")){for(var L=0;L<O.length;L++)if(j[L]){var G=l.color(j[L].color),W={offset:j[L].offset+"%"};W["stop-color"]=G.hex,G.opacity<1&&(W["stop-opacity"]=G.opacity),O[L].attr(W)}else O[L].remove();for(L=O.length;L<j.length;L++)this.addStop(j[L].color,j[L].offset);return this}}function T(M,j,O,L,G){var W=l._.make("linearGradient",M);return W.stops=h,W.addStop=k,W.getBBox=v,W.setStops=f,null!=j&&P(W.node,{x1:j,y1:O,x2:L,y2:G}),W}function E(M,j,O,L,G,W){var V=l._.make("radialGradient",M);return V.stops=h,V.addStop=k,V.getBBox=v,null!=j&&P(V.node,{cx:j,cy:O,r:L}),null!=G&&null!=W&&P(V.node,{fx:G,fy:W}),V}var P=l._.$;u.gradient=function(M){return function w(M,j){var O,L=ie("snap.util.grad.parse",null,j).firstDefined();if(!L)return null;L.params.unshift(M),O="l"==L.type.toLowerCase()?T.apply(0,L.params):E.apply(0,L.params),L.type!=L.type.toLowerCase()&&P(O.node,{gradientUnits:"userSpaceOnUse"});for(var G=L.stops,W=G.length,V=0;W>V;V++){var $=G[V];O.addStop($.color,$.offset)}return O}(this.defs,M)},u.gradientLinear=function(M,j,O,L){return T(this.defs,M,j,O,L)},u.gradientRadial=function(M,j,O,L,G){return E(this.defs,M,j,O,L,G)},u.toString=function(){var M,j=this.node.ownerDocument,O=j.createDocumentFragment(),L=j.createElement("div"),G=this.node.cloneNode(!0);return O.appendChild(L),L.appendChild(G),l._.$(G,{xmlns:"http://www.w3.org/2000/svg"}),M=L.innerHTML,O.removeChild(O.firstChild),M},u.toDataURL=function(){return J&&J.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},u.clear=function(){for(var M,j=this.node.firstChild;j;)M=j.nextSibling,"defs"!=j.tagName?j.parentNode.removeChild(j):u.clear.call({node:j}),j=M}}()}),q.plugin(function(l,F,y,e){function o(Te){var De=o.ps=o.ps||{};return De[Te]?De[Te].sleep=100:De[Te]={sleep:100},setTimeout(function(){for(var Re in De)De[qe](Re)&&Re!=Te&&(De[Re].sleep--,!De[Re].sleep&&delete De[Re])}),De[Te]}function u(Te,De,Re,K){return null==Te&&(Te=De=Re=K=0),null==De&&(De=Te.y,Re=Te.width,K=Te.height,Te=Te.x),{x:Te,y:De,width:Re,w:Re,height:K,h:K,x2:Te+Re,y2:De+K,cx:Te+Re/2,cy:De+K/2,r1:ee.min(Re,K)/2,r2:ee.max(Re,K)/2,r0:ee.sqrt(Re*Re+K*K)/2,path:fe(Te,De,Re,K),vb:[Te,De,Re,K].join(" ")}}function d(){return this.join(",").replace(U,"$1")}function b(Te){var De=Ie(Te);return De.toString=d,De}function h(Te,De,Re,K,oe,he,be,Le,Se){return null==Se?P(Te,De,Re,K,oe,he,be,Le):v(Te,De,Re,K,oe,he,be,Le,function M(Te,De,Re,K,oe,he,be,Le,Se){if(!(0>Se||P(Te,De,Re,K,oe,he,be,Le)<Se)){var _e,je=1,He=je/2,Ze=je-He,rt=.01;for(_e=P(Te,De,Re,K,oe,he,be,Le,Ze);Je(_e-Se)>rt;)_e=P(Te,De,Re,K,oe,he,be,Le,Ze+=(Se>_e?1:-1)*(He/=2));return Ze}}(Te,De,Re,K,oe,he,be,Le,Se))}function k(Te,De){function Re(K){return+(+K).toFixed(3)}return l._.cacher(function(K,oe,he){K instanceof F&&(K=K.attr("d"));for(var be,Le,Se,_e,je,He="",Ze={},rt=0,Ve=0,et=(K=me(K)).length;et>Ve;Ve++){if("M"==(Se=K[Ve])[0])be=+Se[1],Le=+Se[2];else{if(rt+(_e=h(be,Le,Se[1],Se[2],Se[3],Se[4],Se[5],Se[6]))>oe){if(De&&!Ze.start){if(He+=["C"+Re((je=h(be,Le,Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],oe-rt)).start.x),Re(je.start.y),Re(je.m.x),Re(je.m.y),Re(je.x),Re(je.y)],he)return He;Ze.start=He,He=["M"+Re(je.x),Re(je.y)+"C"+Re(je.n.x),Re(je.n.y),Re(je.end.x),Re(je.end.y),Re(Se[5]),Re(Se[6])].join(),rt+=_e,be=+Se[5],Le=+Se[6];continue}if(!Te&&!De)return h(be,Le,Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],oe-rt)}rt+=_e,be=+Se[5],Le=+Se[6]}He+=Se.shift()+Se}return Ze.end=He,Te?rt:De?Ze:v(be,Le,Se[0],Se[1],Se[2],Se[3],Se[4],Se[5],1)},null,l._.clone)}function v(Te,De,Re,K,oe,he,be,Le,Se){var _e=1-Se,je=Pe(_e,3),He=Pe(_e,2),Ze=Se*Se,rt=Ze*Se,kt=Te+2*Se*(Re-Te)+Ze*(oe-2*Re+Te),vt=De+2*Se*(K-De)+Ze*(he-2*K+De),mt=Re+2*Se*(oe-Re)+Ze*(be-2*oe+Re),bt=K+2*Se*(he-K)+Ze*(Le-2*he+K);return{x:je*Te+3*He*Se*Re+3*_e*Se*Se*oe+rt*be,y:je*De+3*He*Se*K+3*_e*Se*Se*he+rt*Le,m:{x:kt,y:vt},n:{x:mt,y:bt},start:{x:_e*Te+Se*Re,y:_e*De+Se*K},end:{x:_e*oe+Se*be,y:_e*he+Se*Le},alpha:90-180*ee.atan2(kt-mt,vt-bt)/pe}}function f(Te,De,Re,K,oe,he,be,Le){l.is(Te,"array")||(Te=[Te,De,Re,K,oe,he,be,Le]);var Se=Ce.apply(null,Te);return u(Se.min.x,Se.min.y,Se.max.x-Se.min.x,Se.max.y-Se.min.y)}function w(Te,De,Re){return De>=Te.x&&De<=Te.x+Te.width&&Re>=Te.y&&Re<=Te.y+Te.height}function T(Te,De){return Te=u(Te),w(De=u(De),Te.x,Te.y)||w(De,Te.x2,Te.y)||w(De,Te.x,Te.y2)||w(De,Te.x2,Te.y2)||w(Te,De.x,De.y)||w(Te,De.x2,De.y)||w(Te,De.x,De.y2)||w(Te,De.x2,De.y2)||(Te.x<De.x2&&Te.x>De.x||De.x<Te.x2&&De.x>Te.x)&&(Te.y<De.y2&&Te.y>De.y||De.y<Te.y2&&De.y>Te.y)}function E(Te,De,Re,K,oe){return Te*(Te*(-3*De+9*Re-9*K+3*oe)+6*De-12*Re+6*K)-3*De+3*Re}function P(Te,De,Re,K,oe,he,be,Le,Se){null==Se&&(Se=1);for(var _e=(Se=Se>1?1:0>Se?0:Se)/2,He=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ze=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],rt=0,Ve=0;12>Ve;Ve++){var et=_e*He[Ve]+_e,kt=E(et,Te,Re,oe,be),vt=E(et,De,K,he,Le),mt=kt*kt+vt*vt;rt+=Ze[Ve]*ee.sqrt(mt)}return _e*rt}function j(Te,De,Re,K,oe,he,be,Le){if(!(ke(Te,Re)<Ne(oe,be)||Ne(Te,Re)>ke(oe,be)||ke(De,K)<Ne(he,Le)||Ne(De,K)>ke(he,Le))){var je=(Te-Re)*(he-Le)-(De-K)*(oe-be);if(je){var He=((Te*K-De*Re)*(oe-be)-(Te-Re)*(oe*Le-he*be))/je,Ze=((Te*K-De*Re)*(he-Le)-(De-K)*(oe*Le-he*be))/je,rt=+He.toFixed(2),Ve=+Ze.toFixed(2);if(!(rt<+Ne(Te,Re).toFixed(2)||rt>+ke(Te,Re).toFixed(2)||rt<+Ne(oe,be).toFixed(2)||rt>+ke(oe,be).toFixed(2)||Ve<+Ne(De,K).toFixed(2)||Ve>+ke(De,K).toFixed(2)||Ve<+Ne(he,Le).toFixed(2)||Ve>+ke(he,Le).toFixed(2)))return{x:He,y:Ze}}}}function O(Te,De,Re){if(!T(f(Te),f(De)))return Re?0:[];for(var Le=~~(P.apply(0,Te)/8),Se=~~(P.apply(0,De)/8),_e=[],je=[],He={},Ze=Re?0:[],rt=0;Le+1>rt;rt++){var Ve=v.apply(0,Te.concat(rt/Le));_e.push({x:Ve.x,y:Ve.y,t:rt/Le})}for(rt=0;Se+1>rt;rt++)Ve=v.apply(0,De.concat(rt/Se)),je.push({x:Ve.x,y:Ve.y,t:rt/Se});for(rt=0;Le>rt;rt++)for(var et=0;Se>et;et++){var kt=_e[rt],vt=_e[rt+1],mt=je[et],bt=je[et+1],yt=Je(vt.x-kt.x)<.001?"y":"x",st=Je(bt.x-mt.x)<.001?"y":"x",Tt=j(kt.x,kt.y,vt.x,vt.y,mt.x,mt.y,bt.x,bt.y);if(Tt){if(He[Tt.x.toFixed(4)]==Tt.y.toFixed(4))continue;He[Tt.x.toFixed(4)]=Tt.y.toFixed(4);var Ct=kt.t+Je((Tt[yt]-kt[yt])/(vt[yt]-kt[yt]))*(vt.t-kt.t),Et=mt.t+Je((Tt[st]-mt[st])/(bt[st]-mt[st]))*(bt.t-mt.t);Ct>=0&&1>=Ct&&Et>=0&&1>=Et&&(Re?Ze++:Ze.push({x:Tt.x,y:Tt.y,t1:Ct,t2:Et}))}}return Ze}function W(Te,De,Re){Te=me(Te),De=me(De);for(var K,oe,he,be,Le,Se,_e,je,He,Ze,rt=Re?0:[],Ve=0,et=Te.length;et>Ve;Ve++){var kt=Te[Ve];if("M"==kt[0])K=Le=kt[1],oe=Se=kt[2];else{"C"==kt[0]?(He=[K,oe].concat(kt.slice(1)),K=He[6],oe=He[7]):(He=[K,oe,K,oe,Le,Se,Le,Se],K=Le,oe=Se);for(var vt=0,mt=De.length;mt>vt;vt++){var bt=De[vt];if("M"==bt[0])he=_e=bt[1],be=je=bt[2];else{"C"==bt[0]?(Ze=[he,be].concat(bt.slice(1)),he=Ze[6],be=Ze[7]):(Ze=[he,be,he,be,_e,je,_e,je],he=_e,be=je);var yt=O(He,Ze,Re);if(Re)rt+=yt;else{for(var st=0,Tt=yt.length;Tt>st;st++)yt[st].segment1=Ve,yt[st].segment2=vt,yt[st].bez1=He,yt[st].bez2=Ze;rt=rt.concat(yt)}}}}}return rt}function $(Te){var De=o(Te);if(De.bbox)return Ie(De.bbox);if(!Te)return u();for(var Re,K=0,oe=0,he=[],be=[],Le=0,Se=(Te=me(Te)).length;Se>Le;Le++)if("M"==(Re=Te[Le])[0])K=Re[1],oe=Re[2],he.push(K),be.push(oe);else{var _e=Ce(K,oe,Re[1],Re[2],Re[3],Re[4],Re[5],Re[6]);he=he.concat(_e.min.x,_e.max.x),be=be.concat(_e.min.y,_e.max.y),K=Re[5],oe=Re[6]}var je=Ne.apply(0,he),He=Ne.apply(0,be),Ve=u(je,He,ke.apply(0,he)-je,ke.apply(0,be)-He);return De.bbox=Ie(Ve),Ve}function fe(Te,De,Re,K,oe){if(oe)return[["M",+Te+ +oe,De],["l",Re-2*oe,0],["a",oe,oe,0,0,1,oe,oe],["l",0,K-2*oe],["a",oe,oe,0,0,1,-oe,oe],["l",2*oe-Re,0],["a",oe,oe,0,0,1,-oe,-oe],["l",0,2*oe-K],["a",oe,oe,0,0,1,oe,-oe],["z"]];var he=[["M",Te,De],["l",Re,0],["l",0,K],["l",-Re,0],["z"]];return he.toString=d,he}function ce(Te,De,Re,K,oe){if(null==oe&&null==K&&(K=Re),Te=+Te,De=+De,Re=+Re,K=+K,null!=oe)var he=Math.PI/180,be=Te+Re*Math.cos(-K*he),Le=Te+Re*Math.cos(-oe*he),je=[["M",be,De+Re*Math.sin(-K*he)],["A",Re,Re,0,+(oe-K>180),0,Le,De+Re*Math.sin(-oe*he)]];else je=[["M",Te,De],["m",0,-K],["a",Re,K,0,1,1,0,2*K],["a",Re,K,0,1,1,0,-2*K],["z"]];return je.toString=d,je}function te(Te){var De=o(Te);if(De.abs)return b(De.abs);if(Be(Te,"array")&&Be(Te&&Te[0],"array")||(Te=l.parsePathString(Te)),!Te||!Te.length)return[["M",0,0]];var Re,K=[],oe=0,he=0,be=0,Le=0,Se=0;"M"==Te[0][0]&&(be=oe=+Te[0][1],Le=he=+Te[0][2],Se++,K[0]=["M",oe,he]);for(var _e,je,He=3==Te.length&&"M"==Te[0][0]&&"R"==Te[1][0].toUpperCase()&&"Z"==Te[2][0].toUpperCase(),Ze=Se,rt=Te.length;rt>Ze;Ze++){if(K.push(_e=[]),(Re=(je=Te[Ze])[0])!=Re.toUpperCase())switch(_e[0]=Re.toUpperCase(),_e[0]){case"A":_e[1]=je[1],_e[2]=je[2],_e[3]=je[3],_e[4]=je[4],_e[5]=je[5],_e[6]=+je[6]+oe,_e[7]=+je[7]+he;break;case"V":_e[1]=+je[1]+he;break;case"H":_e[1]=+je[1]+oe;break;case"R":for(var Ve=[oe,he].concat(je.slice(1)),et=2,kt=Ve.length;kt>et;et++)Ve[et]=+Ve[et]+oe,Ve[++et]=+Ve[et]+he;K.pop(),K=K.concat(ye(Ve,He));break;case"O":K.pop(),(Ve=ce(oe,he,je[1],je[2])).push(Ve[0]),K=K.concat(Ve);break;case"U":K.pop(),K=K.concat(ce(oe,he,je[1],je[2],je[3])),_e=["U"].concat(K[K.length-1].slice(-2));break;case"M":be=+je[1]+oe,Le=+je[2]+he;default:for(et=1,kt=je.length;kt>et;et++)_e[et]=+je[et]+(et%2?oe:he)}else if("R"==Re)Ve=[oe,he].concat(je.slice(1)),K.pop(),K=K.concat(ye(Ve,He)),_e=["R"].concat(je.slice(-2));else if("O"==Re)K.pop(),(Ve=ce(oe,he,je[1],je[2])).push(Ve[0]),K=K.concat(Ve);else if("U"==Re)K.pop(),K=K.concat(ce(oe,he,je[1],je[2],je[3])),_e=["U"].concat(K[K.length-1].slice(-2));else for(var vt=0,mt=je.length;mt>vt;vt++)_e[vt]=je[vt];if("O"!=(Re=Re.toUpperCase()))switch(_e[0]){case"Z":oe=+be,he=+Le;break;case"H":oe=_e[1];break;case"V":he=_e[1];break;case"M":be=_e[_e.length-2],Le=_e[_e.length-1];default:oe=_e[_e.length-2],he=_e[_e.length-1]}}return K.toString=d,De.abs=b(K),K}function se(Te,De,Re,K){return[Te,De,Re,K,Re,K]}function ne(Te,De,Re,K,oe,he){var be=.3333333333333333,Le=2/3;return[be*Te+Le*Re,be*De+Le*K,be*oe+Le*Re,be*he+Le*K,oe,he]}function ve(Te,De,Re,K,oe,he,be,Le,Se,_e){var je,He=120*pe/180,Ze=pe/180*(+oe||0),rt=[],Ve=l._.cacher(function(mn,ii,Lr){return{x:mn*ee.cos(Lr)-ii*ee.sin(Lr),y:mn*ee.sin(Lr)+ii*ee.cos(Lr)}});if(!Re||!K)return[Te,De,Le,Se,Le,Se];if(_e)Ct=_e[0],Et=_e[1],st=_e[2],Tt=_e[3];else{Te=(je=Ve(Te,De,-Ze)).x,De=je.y,Le=(je=Ve(Le,Se,-Ze)).x,Se=je.y;var et=(ee.cos(pe/180*oe),ee.sin(pe/180*oe),(Te-Le)/2),kt=(De-Se)/2,vt=et*et/(Re*Re)+kt*kt/(K*K);vt>1&&(Re*=vt=ee.sqrt(vt),K*=vt);var mt=Re*Re,bt=K*K,yt=(he==be?-1:1)*ee.sqrt(Je((mt*bt-mt*kt*kt-bt*et*et)/(mt*kt*kt+bt*et*et))),st=yt*Re*kt/K+(Te+Le)/2,Tt=yt*-K*et/Re+(De+Se)/2,Ct=ee.asin(((De-Tt)/K).toFixed(9)),Et=ee.asin(((Se-Tt)/K).toFixed(9));0>(Ct=st>Te?pe-Ct:Ct)&&(Ct=2*pe+Ct),0>(Et=st>Le?pe-Et:Et)&&(Et=2*pe+Et),be&&Ct>Et&&(Ct-=2*pe),!be&&Et>Ct&&(Et-=2*pe)}var jn=Et-Ct;if(Je(jn)>He){var yn=Et,Ei=Le,ho=Se;Et=Ct+He*(be&&Et>Ct?1:-1),rt=ve(Le=st+Re*ee.cos(Et),Se=Tt+K*ee.sin(Et),Re,K,oe,0,be,Ei,ho,[Et,yn,st,Tt])}jn=Et-Ct;var ys=ee.cos(Ct),Ti=ee.sin(Ct),ms=ee.cos(Et),Hr=ee.sin(Et),ri=ee.tan(jn/4),Rr=4/3*Re*ri,ni=4/3*K*ri,po=[Te,De],Wr=[Te+Rr*Ti,De-ni*ys],vo=[Le+Rr*Hr,Se-ni*ms],Dn=[Le,Se];if(Wr[0]=2*po[0]-Wr[0],Wr[1]=2*po[1]-Wr[1],_e)return[Wr,vo,Dn].concat(rt);for(var en=[],zr=0,bs=(rt=[Wr,vo,Dn].concat(rt).join().split(",")).length;bs>zr;zr++)en[zr]=zr%2?Ve(rt[zr-1],rt[zr],Ze).y:Ve(rt[zr],rt[zr+1],Ze).x;return en}function Ce(Te,De,Re,K,oe,he,be,Le){for(var Se,_e,je,He,Ze,rt,Ve,et,kt=[],vt=[[],[]],mt=0;2>mt;++mt)if(0==mt?(_e=6*Te-12*Re+6*oe,Se=-3*Te+9*Re-9*oe+3*be,je=3*Re-3*Te):(_e=6*De-12*K+6*he,Se=-3*De+9*K-9*he+3*Le,je=3*K-3*De),Je(Se)<1e-12){if(Je(_e)<1e-12)continue;(He=-je/_e)>0&&1>He&&kt.push(He)}else Ve=_e*_e-4*je*Se,et=ee.sqrt(Ve),0>Ve||((Ze=(-_e+et)/(2*Se))>0&&1>Ze&&kt.push(Ze),(rt=(-_e-et)/(2*Se))>0&&1>rt&&kt.push(rt));for(var bt,yt=kt.length,st=yt;yt--;)bt=1-(He=kt[yt]),vt[0][yt]=bt*bt*bt*Te+3*bt*bt*He*Re+3*bt*He*He*oe+He*He*He*be,vt[1][yt]=bt*bt*bt*De+3*bt*bt*He*K+3*bt*He*He*he+He*He*He*Le;return vt[0][st]=Te,vt[1][st]=De,vt[0][st+1]=be,vt[1][st+1]=Le,vt[0].length=vt[1].length=st+2,{min:{x:Ne.apply(0,vt[0]),y:Ne.apply(0,vt[1])},max:{x:ke.apply(0,vt[0]),y:ke.apply(0,vt[1])}}}function me(Te,De){var Re=!De&&o(Te);if(!De&&Re.curve)return b(Re.curve);for(var K=te(Te),oe=De&&te(De),he={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},be={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Le=function(yt,st,Tt){var Ct,Et;if(!yt)return["C",st.x,st.y,st.x,st.y,st.x,st.y];switch(!(yt[0]in{T:1,Q:1})&&(st.qx=st.qy=null),yt[0]){case"M":st.X=yt[1],st.Y=yt[2];break;case"A":yt=["C"].concat(ve.apply(0,[st.x,st.y].concat(yt.slice(1))));break;case"S":"C"==Tt||"S"==Tt?(Ct=2*st.x-st.bx,Et=2*st.y-st.by):(Ct=st.x,Et=st.y),yt=["C",Ct,Et].concat(yt.slice(1));break;case"T":"Q"==Tt||"T"==Tt?(st.qx=2*st.x-st.qx,st.qy=2*st.y-st.qy):(st.qx=st.x,st.qy=st.y),yt=["C"].concat(ne(st.x,st.y,st.qx,st.qy,yt[1],yt[2]));break;case"Q":st.qx=yt[1],st.qy=yt[2],yt=["C"].concat(ne(st.x,st.y,yt[1],yt[2],yt[3],yt[4]));break;case"L":yt=["C"].concat(se(st.x,st.y,yt[1],yt[2]));break;case"H":yt=["C"].concat(se(st.x,st.y,yt[1],st.y));break;case"V":yt=["C"].concat(se(st.x,st.y,st.x,yt[1]));break;case"Z":yt=["C"].concat(se(st.x,st.y,st.X,st.Y))}return yt},Se=function(yt,st){if(yt[st].length>7){yt[st].shift();for(var Tt=yt[st];Tt.length;)je[st]="A",oe&&(He[st]="A"),yt.splice(st++,0,["C"].concat(Tt.splice(0,6)));yt.splice(st,1),et=ke(K.length,oe&&oe.length||0)}},_e=function(yt,st,Tt,Ct,Et){yt&&st&&"M"==yt[Et][0]&&"M"!=st[Et][0]&&(st.splice(Et,0,["M",Ct.x,Ct.y]),Tt.bx=0,Tt.by=0,Tt.x=yt[Et][1],Tt.y=yt[Et][2],et=ke(K.length,oe&&oe.length||0))},je=[],He=[],Ze="",rt="",Ve=0,et=ke(K.length,oe&&oe.length||0);et>Ve;Ve++){K[Ve]&&(Ze=K[Ve][0]),"C"!=Ze&&(je[Ve]=Ze,Ve&&(rt=je[Ve-1])),K[Ve]=Le(K[Ve],he,rt),"A"!=je[Ve]&&"C"==Ze&&(je[Ve]="C"),Se(K,Ve),oe&&(oe[Ve]&&(Ze=oe[Ve][0]),"C"!=Ze&&(He[Ve]=Ze,Ve&&(rt=He[Ve-1])),oe[Ve]=Le(oe[Ve],be,rt),"A"!=He[Ve]&&"C"==Ze&&(He[Ve]="C"),Se(oe,Ve)),_e(K,oe,he,be,Ve),_e(oe,K,be,he,Ve);var kt=K[Ve],vt=oe&&oe[Ve],mt=kt.length,bt=oe&&vt.length;he.x=kt[mt-2],he.y=kt[mt-1],he.bx=H(kt[mt-4])||he.x,he.by=H(kt[mt-3])||he.y,be.bx=oe&&(H(vt[bt-4])||be.x),be.by=oe&&(H(vt[bt-3])||be.y),be.x=oe&&vt[bt-2],be.y=oe&&vt[bt-1]}return oe||(Re.curve=b(K)),oe?[K,oe]:K}function ye(Te,De){for(var Re=[],K=0,oe=Te.length;oe-2*!De>K;K+=2){var he=[{x:+Te[K-2],y:+Te[K-1]},{x:+Te[K],y:+Te[K+1]},{x:+Te[K+2],y:+Te[K+3]},{x:+Te[K+4],y:+Te[K+5]}];De?K?oe-4==K?he[3]={x:+Te[0],y:+Te[1]}:oe-2==K&&(he[2]={x:+Te[0],y:+Te[1]},he[3]={x:+Te[2],y:+Te[3]}):he[0]={x:+Te[oe-2],y:+Te[oe-1]}:oe-4==K?he[3]=he[2]:K||(he[0]={x:+Te[K],y:+Te[K+1]}),Re.push(["C",(-he[0].x+6*he[1].x+he[2].x)/6,(-he[0].y+6*he[1].y+he[2].y)/6,(he[1].x+6*he[2].x-he[3].x)/6,(he[1].y+6*he[2].y-he[3].y)/6,he[2].x,he[2].y])}return Re}var Ee=F.prototype,Be=l.is,Ie=l._.clone,qe="hasOwnProperty",U=/,?([a-z]),?/gi,H=parseFloat,ee=Math,pe=ee.PI,Ne=ee.min,ke=ee.max,Pe=ee.pow,Je=ee.abs,Ke=k(1),at=k(),pt=k(0,1),Wt=l._unit2px,zt={path:function(Te){return Te.attr("path")},circle:function(Te){var De=Wt(Te);return ce(De.cx,De.cy,De.r)},ellipse:function(Te){var De=Wt(Te);return ce(De.cx||0,De.cy||0,De.rx,De.ry)},rect:function(Te){var De=Wt(Te);return fe(De.x||0,De.y||0,De.width,De.height,De.rx,De.ry)},image:function(Te){var De=Wt(Te);return fe(De.x||0,De.y||0,De.width,De.height)},line:function(Te){return"M"+[Te.attr("x1")||0,Te.attr("y1")||0,Te.attr("x2"),Te.attr("y2")]},polyline:function(Te){return"M"+Te.attr("points")},polygon:function(Te){return"M"+Te.attr("points")+"z"},deflt:function(Te){var De=Te.node.getBBox();return fe(De.x,De.y,De.width,De.height)}};l.path=o,l.path.getTotalLength=Ke,l.path.getPointAtLength=at,l.path.getSubpath=function(Te,De,Re){if(this.getTotalLength(Te)-Re<1e-6)return pt(Te,De).end;var K=pt(Te,Re,1);return De?pt(K,De).end:K},Ee.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},Ee.getPointAtLength=function(Te){return at(this.attr("d"),Te)},Ee.getSubpath=function(Te,De){return l.path.getSubpath(this.attr("d"),Te,De)},l._.box=u,l.path.findDotsAtSegment=v,l.path.bezierBBox=f,l.path.isPointInsideBBox=w,l.closest=function(Te,De,Re,K){for(var oe=100,he=u(Te-oe/2,De-oe/2,oe,oe),be=[],Le=Re[0].hasOwnProperty("x")?function(et){return{x:Re[et].x,y:Re[et].y}}:function(et){return{x:Re[et],y:K[et]}},Se=0;1e6>=oe&&!Se;){for(var _e=0,je=Re.length;je>_e;_e++){var He=Le(_e);if(w(he,He.x,He.y)){Se++,be.push(He);break}}Se||(he=u(Te-(oe*=2)/2,De-oe/2,oe,oe))}if(1e6!=oe){var Ze,rt=1/0;for(_e=0,je=be.length;je>_e;_e++){var Ve=l.len(Te,De,be[_e].x,be[_e].y);rt>Ve&&(rt=Ve,be[_e].len=Ve,Ze=be[_e])}return Ze}},l.path.isBBoxIntersect=T,l.path.intersection=function L(Te,De){return W(Te,De)},l.path.intersectionNumber=function G(Te,De){return W(Te,De,1)},l.path.isPointInside=function V(Te,De,Re){var K=$(Te);return w(K,De,Re)&&W(Te,[["M",De,Re],["H",K.x2+10]],1)%2==1},l.path.getBBox=$,l.path.get=zt,l.path.toRelative=function xe(Te){var De=o(Te),Re=String.prototype.toLowerCase;if(De.rel)return b(De.rel);l.is(Te,"array")&&l.is(Te&&Te[0],"array")||(Te=l.parsePathString(Te));var K=[],oe=0,he=0,be=0,Le=0,Se=0;"M"==Te[0][0]&&(be=oe=Te[0][1],Le=he=Te[0][2],Se++,K.push(["M",oe,he]));for(var _e=Se,je=Te.length;je>_e;_e++){var He=K[_e]=[],Ze=Te[_e];if(Ze[0]!=Re.call(Ze[0]))switch(He[0]=Re.call(Ze[0]),He[0]){case"a":He[1]=Ze[1],He[2]=Ze[2],He[3]=Ze[3],He[4]=Ze[4],He[5]=Ze[5],He[6]=+(Ze[6]-oe).toFixed(3),He[7]=+(Ze[7]-he).toFixed(3);break;case"v":He[1]=+(Ze[1]-he).toFixed(3);break;case"m":be=Ze[1],Le=Ze[2];default:for(var rt=1,Ve=Ze.length;Ve>rt;rt++)He[rt]=+(Ze[rt]-(rt%2?oe:he)).toFixed(3)}else{He=K[_e]=[],"m"==Ze[0]&&(be=Ze[1]+oe,Le=Ze[2]+he);for(var et=0,kt=Ze.length;kt>et;et++)K[_e][et]=Ze[et]}var vt=K[_e].length;switch(K[_e][0]){case"z":oe=be,he=Le;break;case"h":oe+=+K[_e][vt-1];break;case"v":he+=+K[_e][vt-1];break;default:oe+=+K[_e][vt-2],he+=+K[_e][vt-1]}}return K.toString=d,De.rel=b(K),K},l.path.toAbsolute=te,l.path.toCubic=me,l.path.map=function de(Te,De){if(!De)return Te;var Re,K,oe,he,be,Le,Se;for(oe=0,be=(Te=me(Te)).length;be>oe;oe++)for(he=1,Le=(Se=Te[oe]).length;Le>he;he+=2)Re=De.x(Se[he],Se[he+1]),K=De.y(Se[he],Se[he+1]),Se[he]=Re,Se[he+1]=K;return Te},l.path.toString=d,l.path.clone=b}),q.plugin(function(l,F,y,e){var o=Math.max,u=Math.min,d=function(h){if(this.items=[],this.bindings={},this.length=0,this.type="set",h)for(var k=0,v=h.length;v>k;k++)h[k]&&(this[this.items.length]=this.items[this.items.length]=h[k],this.length++)},b=d.prototype;b.push=function(){for(var h,k,v=0,f=arguments.length;f>v;v++)(h=arguments[v])&&(this[k=this.items.length]=this.items[k]=h,this.length++);return this},b.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},b.forEach=function(h,k){for(var v=0,f=this.items.length;f>v;v++)if(!1===h.call(k,this.items[v],v))return this;return this},b.animate=function(h,k,v,f){"function"!=typeof v||v.length||(f=v,v=ue.linear),h instanceof l._.Animation&&(f=h.callback,v=h.easing,k=v.dur,h=h.attr);var w=arguments;if(l.is(h,"array")&&l.is(w[w.length-1],"array"))var T=!0;var E,P=function(){E?this.b=E:E=this.b},M=0,j=this,O=f&&function(){++M==j.length&&f.call(this)};return this.forEach(function(L,G){ie.once("snap.animcreated."+L.id,P),T?w[G]&&L.animate.apply(L,w[G]):L.animate(h,k,v,O)})},b.remove=function(){for(;this.length;)this.pop().remove();return this},b.bind=function(h,k,v){var f={};if("function"==typeof k)this.bindings[h]=k;else{var w=v||h;this.bindings[h]=function(T){f[w]=T,k.attr(f)}}return this},b.attr=function(h){var k={};for(var v in h)this.bindings[v]?this.bindings[v](h[v]):k[v]=h[v];for(var f=0,w=this.items.length;w>f;f++)this.items[f].attr(k);return this},b.clear=function(){for(;this.length;)this.pop()},b.splice=function(h,k,v){h=0>h?o(this.length+h,0):h,k=o(0,u(this.length-h,k));var f,w=[],T=[],E=[];for(f=2;f<arguments.length;f++)E.push(arguments[f]);for(f=0;k>f;f++)T.push(this[h+f]);for(;f<this.length-h;f++)w.push(this[h+f]);var P=E.length;for(f=0;f<P+w.length;f++)this.items[h+f]=this[h+f]=P>f?E[f]:w[f-P];for(f=this.items.length=this.length-=k-P;this[f];)delete this[f++];return new d(T)},b.exclude=function(h){for(var k=0,v=this.length;v>k;k++)if(this[k]==h)return this.splice(k,1),!0;return!1},b.insertAfter=function(h){for(var k=this.items.length;k--;)this.items[k].insertAfter(h);return this},b.getBBox=function(){for(var h=[],k=[],v=[],f=[],w=this.items.length;w--;)if(!this.items[w].removed){var T=this.items[w].getBBox();h.push(T.x),k.push(T.y),v.push(T.x+T.width),f.push(T.y+T.height)}return{x:h=u.apply(0,h),y:k=u.apply(0,k),x2:v=o.apply(0,v),y2:f=o.apply(0,f),width:v-h,height:f-k,cx:h+(v-h)/2,cy:k+(f-k)/2}},b.clone=function(h){h=new d;for(var k=0,v=this.items.length;v>k;k++)h.push(this.items[k].clone());return h},b.toString=function(){return"Snap\u2018s set"},b.type="set",l.Set=d,l.set=function(){var h=new d;return arguments.length&&h.push.apply(h,Array.prototype.slice.call(arguments,0)),h}}),q.plugin(function(l,F,y,e){function o(j){var O=j[0];switch(O.toLowerCase()){case"t":return[O,0,0];case"m":return[O,1,0,0,1,0,0];case"r":return 4==j.length?[O,0,j[2],j[3]]:[O,0];case"s":return 5==j.length?[O,1,1,j[3],j[4]]:3==j.length?[O,1,1]:[O,1]}}function d(j){return j}function b(j){return function(O){return+O.toFixed(3)+j}}function h(j){return j.join(" ")}function k(j){return l.rgb(j[0],j[1],j[2],j[3])}function v(j){var O,L,G,W,V,$,fe=0,ce=[];for(O=0,L=j.length;L>O;O++){for(V="[",$=['"'+j[O][0]+'"'],G=1,W=j[O].length;W>G;G++)$[G]="val["+fe+++"]";V+=$+"]",ce[O]=V}return Function("val","return Snap.path.toString.call(["+ce+"])")}function f(j){for(var O=[],L=0,G=j.length;G>L;L++)for(var W=1,V=j[L].length;V>W;W++)O.push(j[L][W]);return O}function w(j){return isFinite(j)}var E={},P=/[%a-z]+$/i,M=String;E.stroke=E.fill="colour",F.prototype.equal=function(j,O){return ie("snap.util.equal",this,j,O).firstDefined()},ie.on("snap.util.equal",function(j,O){var L,G,W=M(this.attr(j)||""),V=this;if("colour"==E[j])return L=l.color(W),G=l.color(O),{from:[L.r,L.g,L.b,L.opacity],to:[G.r,G.g,G.b,G.opacity],f:k};if("viewBox"==j)return{from:L=this.attr(j).vb.split(" ").map(Number),to:G=O.split(" ").map(Number),f:h};if("transform"==j||"gradientTransform"==j||"patternTransform"==j)return"string"==typeof O&&(O=M(O).replace(/\.{3}|\u2026/g,W)),function u(j,O,L){j=j||new l.Matrix,O=O||new l.Matrix,j=l.parseTransformString(j.toTransformString())||[],O=l.parseTransformString(O.toTransformString())||[];for(var G,W,V,$,fe=Math.max(j.length,O.length),ce=[],xe=[],te=0;fe>te;te++){if(V=j[te]||o(O[te]),$=O[te]||o(V),V[0]!=$[0]||"r"==V[0].toLowerCase()&&(V[2]!=$[2]||V[3]!=$[3])||"s"==V[0].toLowerCase()&&(V[3]!=$[3]||V[4]!=$[4])){j=l._.transform2matrix(j,L()),O=l._.transform2matrix(O,L()),ce=[["m",j.a,j.b,j.c,j.d,j.e,j.f]],xe=[["m",O.a,O.b,O.c,O.d,O.e,O.f]];break}for(ce[te]=[],xe[te]=[],G=0,W=Math.max(V.length,$.length);W>G;G++)G in V&&(ce[te][G]=V[G]),G in $&&(xe[te][G]=$[G])}return{from:f(ce),to:f(xe),f:v(ce)}}(W=this.matrix,O=l._.rgTransform.test(O)?l._.transform2matrix(O,this.getBBox()):l._.transform2matrix(l._.svgTransform2string(O),this.getBBox()),function(){return V.getBBox(1)});if("d"==j||"path"==j)return{from:f((L=l.path.toCubic(W,O))[0]),to:f(L[1]),f:v(L[0])};if("points"==j)return{from:L=M(W).split(l._.separator),to:G=M(O).split(l._.separator),f:function(ce){return ce}};if(w(W)&&w(O))return{from:parseFloat(W),to:parseFloat(O),f:d};var $=W.match(P),fe=M(O).match(P);return $&&function T(j,O){return!(!l.is(j,"array")||!l.is(O,"array"))&&j.toString()==O.toString()}($,fe)?{from:parseFloat(W),to:parseFloat(O),f:b($)}:{from:this.asPX(j),to:this.asPX(j,O),f:d}})}),q.plugin(function(l,F,y,e){for(var o=F.prototype,d=("createTouch"in e.doc),b=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],h={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},k=function(O,L){var G="y"==O?"scrollTop":"scrollLeft",W=L&&L.node?L.node.ownerDocument:e.doc;return W[G in W.documentElement?"documentElement":"body"][G]},v=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},w=function(O,L,G,W){var V=d&&h[L]?h[L]:L,$=function(fe){var ce=k("y",W),xe=k("x",W);if(d&&h.hasOwnProperty(L))for(var te=0,se=fe.targetTouches&&fe.targetTouches.length;se>te;te++)if(fe.targetTouches[te].target==O||O.contains(fe.targetTouches[te].target)){var ne=fe;(fe=fe.targetTouches[te]).originalEvent=ne,fe.preventDefault=v,fe.stopPropagation=f;break}var ve=fe.clientX+xe,Ce=fe.clientY+ce;return G.call(W,fe,ve,Ce)};return L!==V&&O.addEventListener(L,$,!1),O.addEventListener(V,$,!1),function(){return L!==V&&O.removeEventListener(L,$,!1),O.removeEventListener(V,$,!1),!0}},T=[],E=function(O){for(var L,G=O.clientX,W=O.clientY,V=k("y"),$=k("x"),fe=T.length;fe--;){if(L=T[fe],d){for(var ce,xe=O.touches&&O.touches.length;xe--;)if((ce=O.touches[xe]).identifier==L.el._drag.id||L.el.node.contains(ce.target)){G=ce.clientX,W=ce.clientY,(O.originalEvent?O.originalEvent:O).preventDefault();break}}else O.preventDefault();var te=L.el.node;te.nextSibling,te.parentNode,te.style.display,G+=$,W+=V,ie("snap.drag.move."+L.el.id,L.move_scope||L.el,G-L.el._drag.x,W-L.el._drag.y,G,W,O)}},P=function(O){l.unmousemove(E).unmouseup(P);for(var L,G=T.length;G--;)(L=T[G]).el._drag={},ie("snap.drag.end."+L.el.id,L.end_scope||L.start_scope||L.move_scope||L.el,O),ie.off("snap.drag.*."+L.el.id);T=[]},M=b.length;M--;)!function(O){l[O]=o[O]=function(L,G){if(l.is(L,"function"))this.events=this.events||[],this.events.push({name:O,f:L,unbind:w(this.node||document,O,L,G||this)});else for(var W=0,V=this.events.length;V>W;W++)if(this.events[W].name==O)try{this.events[W].f.call(this)}catch($){}return this},l["un"+O]=o["un"+O]=function(L){for(var G=this.events||[],W=G.length;W--;)if(G[W].name==O&&(G[W].f==L||!L))return G[W].unbind(),G.splice(W,1),!G.length&&delete this.events,this;return this}}(b[M]);o.hover=function(O,L,G,W){return this.mouseover(O,G).mouseout(L,W||G)},o.unhover=function(O,L){return this.unmouseover(O).unmouseout(L)};var j=[];o.drag=function(O,L,G,W,V,$){function fe(se,ne,ve){(se.originalEvent||se).preventDefault(),xe._drag.x=ne,xe._drag.y=ve,xe._drag.id=se.identifier,!T.length&&l.mousemove(E).mouseup(P),T.push({el:xe,move_scope:W,start_scope:V,end_scope:$}),L&&ie.on("snap.drag.start."+xe.id,L),O&&ie.on("snap.drag.move."+xe.id,O),G&&ie.on("snap.drag.end."+xe.id,G),ie("snap.drag.start."+xe.id,V||W||xe,ne,ve,se)}function ce(se,ne,ve){ie("snap.draginit."+xe.id,xe,se,ne,ve)}var te,xe=this;return arguments.length?(ie.on("snap.draginit."+xe.id,fe),xe._drag={},j.push({el:xe,start:fe,init:ce}),xe.mousedown(ce),xe):xe.drag(function(se,ne){this.attr({transform:te+(te?"T":"t")+[se,ne]})},function(){te=this.transform().local})},o.undrag=function(){for(var O=j.length;O--;)j[O].el==this&&(this.unmousedown(j[O].init),j.splice(O,1),ie.unbind("snap.drag.*."+this.id),ie.unbind("snap.draginit."+this.id));return!j.length&&l.unmousemove(E).unmouseup(P),this}}),q.plugin(function(l,F,y,e){var o=(F.prototype,y.prototype),u=/^\s*url\((.+)\)/,d=String,b=l._.$;l.filter={},o.filter=function(h){var k=this;"svg"!=k.type&&(k=k.paper);var v=l.parse(d(h)),f=l._.id(),w=(k.node.offsetWidth,k.node.offsetHeight,b("filter"));return b(w,{id:f,filterUnits:"userSpaceOnUse"}),w.appendChild(v.node),k.defs.appendChild(w),new F(w)},ie.on("snap.util.getattr.filter",function(){ie.stop();var h=b(this.node,"filter");if(h){var k=d(h).match(u);return k&&l.select(k[1])}}),ie.on("snap.util.attr.filter",function(h){if(h instanceof F&&"filter"==h.type){ie.stop();var k=h.node.id;k||(b(h.node,{id:h.id}),k=h.id),b(this.node,{filter:l.url(k)})}h&&"none"!=h||(ie.stop(),this.node.removeAttribute("filter"))}),l.filter.blur=function(h,k){null==h&&(h=2);var v=null==k?h:[h,k];return l.format('<feGaussianBlur stdDeviation="{def}"/>',{def:v})},l.filter.blur.toString=function(){return this()},l.filter.shadow=function(h,k,v,f,w){return null==w&&(null==f?(w=v,v=4,f="#000"):(w=f,f=v,v=4)),null==v&&(v=4),null==w&&(w=1),null==h&&(h=0,k=2),null==k&&(k=h),f=l.color(f),l.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:f,dx:h,dy:k,blur:v,opacity:w})},l.filter.shadow.toString=function(){return this()},l.filter.grayscale=function(h){return null==h&&(h=1),l.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-h),b:.7152-.7152*(1-h),c:.0722-.0722*(1-h),d:.2126-.2126*(1-h),e:.7152+.2848*(1-h),f:.0722-.0722*(1-h),g:.2126-.2126*(1-h),h:.0722+.9278*(1-h)})},l.filter.grayscale.toString=function(){return this()},l.filter.sepia=function(h){return null==h&&(h=1),l.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-h),b:.769-.769*(1-h),c:.189-.189*(1-h),d:.349-.349*(1-h),e:.686+.314*(1-h),f:.168-.168*(1-h),g:.272-.272*(1-h),h:.534-.534*(1-h),i:.131+.869*(1-h)})},l.filter.sepia.toString=function(){return this()},l.filter.saturate=function(h){return null==h&&(h=1),l.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-h})},l.filter.saturate.toString=function(){return this()},l.filter.hueRotate=function(h){return h=h||0,l.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:h})},l.filter.hueRotate.toString=function(){return this()},l.filter.invert=function(h){return null==h&&(h=1),l.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:h,amount2:1-h})},l.filter.invert.toString=function(){return this()},l.filter.brightness=function(h){return null==h&&(h=1),l.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:h})},l.filter.brightness.toString=function(){return this()},l.filter.contrast=function(h){return null==h&&(h=1),l.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:h,amount2:.5-h/2})},l.filter.contrast.toString=function(){return this()}}),q.plugin(function(l,F,y,e,o){var u=l._.box,d=l.is,b=/^[^a-z]*([tbmlrc])/i,h=function(){return"T"+this.dx+","+this.dy};F.prototype.getAlign=function(k,v){null==v&&d(k,"string")&&(v=k,k=null);var f=(k=k||this.paper).getBBox?k.getBBox():u(k),w=this.getBBox(),T={};switch(v=(v=v&&v.match(b))?v[1].toLowerCase():"c"){case"t":T.dx=0,T.dy=f.y-w.y;break;case"b":T.dx=0,T.dy=f.y2-w.y2;break;case"m":T.dx=0,T.dy=f.cy-w.cy;break;case"l":T.dx=f.x-w.x,T.dy=0;break;case"r":T.dx=f.x2-w.x2,T.dy=0;break;default:T.dx=f.cx-w.cx,T.dy=0}return T.toString=h,T},F.prototype.align=function(k,v){return this.transform("..."+this.getAlign(k,v))}}),q.plugin(function(l,F,y,e){function o(fe){fe=fe.split(/(?=#)/);var ce=new String(fe[5]);return ce[50]=fe[0],ce[100]=fe[1],ce[200]=fe[2],ce[300]=fe[3],ce[400]=fe[4],ce[500]=fe[5],ce[600]=fe[6],ce[700]=fe[7],ce[800]=fe[8],ce[900]=fe[9],fe[10]&&(ce.A100=fe[10],ce.A200=fe[11],ce.A400=fe[12],ce.A700=fe[13]),ce}l.mui={},l.flat={},l.mui.red=o("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),l.mui.pink=o("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),l.mui.purple=o("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),l.mui.deeppurple=o("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),l.mui.indigo=o("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),l.mui.blue=o("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),l.mui.lightblue=o("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),l.mui.cyan=o("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),l.mui.teal=o("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),l.mui.green=o("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),l.mui.lightgreen=o("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),l.mui.lime=o("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),l.mui.yellow=o("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),l.mui.amber=o("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),l.mui.orange=o("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),l.mui.deeporange=o("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),l.mui.brown=o("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),l.mui.grey=o("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),l.mui.bluegrey=o("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),l.flat.turquoise="#1abc9c",l.flat.greensea="#16a085",l.flat.sunflower="#f1c40f",l.flat.orange="#f39c12",l.flat.emerland="#2ecc71",l.flat.nephritis="#27ae60",l.flat.carrot="#e67e22",l.flat.pumpkin="#d35400",l.flat.peterriver="#3498db",l.flat.belizehole="#2980b9",l.flat.alizarin="#e74c3c",l.flat.pomegranate="#c0392b",l.flat.amethyst="#9b59b6",l.flat.wisteria="#8e44ad",l.flat.clouds="#ecf0f1",l.flat.silver="#bdc3c7",l.flat.wetasphalt="#34495e",l.flat.midnightblue="#2c3e50",l.flat.concrete="#95a5a6",l.flat.asbestos="#7f8c8d",l.importMUIColors=function(){for(var fe in l.mui)l.mui.hasOwnProperty(fe)&&(J[fe]=l.mui[fe])}}),q}),function(J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J():"function"==typeof define&&define.amd?define([],J):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rdfstore=J()}(function(){var define,module,exports;return function J(ie,ue,q){function l(e,o){if(!ue[e]){if(!ie[e]){var u="function"==typeof require&&require;if(!o&&u)return u(e,!0);if(F)return F(e,!0);var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}var b=ue[e]={exports:{}};ie[e][0].call(b.exports,function(h){return l(ie[e][1][h]||h)},b,b.exports,J,ie,ue,q)}return ue[e].exports}for(var F="function"==typeof require&&require,y=0;y<q.length;y++)l(q[y]);return l}({1:[function(J,ie,ue){(function(q){(function(){"use strict";var l=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],F="undefined"==typeof globalThis?q:globalThis;ie.exports=function(){for(var y=[],e=0;e<l.length;e++)"function"==typeof F[l[e]]&&(y[y.length]=l[e]);return y}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(J,ie,ue){"use strict";ue.byteLength=function(b){var h=u(b),k=h[0],v=h[1];return 3*(k+v)/4-v},ue.toByteArray=function(b){var h,k,O,v=u(b),f=v[0],w=v[1],T=new F(3*(f+(O=w))/4-O),E=0,P=w>0?f-4:f;for(k=0;k<P;k+=4)h=l[b.charCodeAt(k)]<<18|l[b.charCodeAt(k+1)]<<12|l[b.charCodeAt(k+2)]<<6|l[b.charCodeAt(k+3)],T[E++]=h>>16&255,T[E++]=h>>8&255,T[E++]=255&h;return 2===w&&(h=l[b.charCodeAt(k)]<<2|l[b.charCodeAt(k+1)]>>4,T[E++]=255&h),1===w&&(h=l[b.charCodeAt(k)]<<10|l[b.charCodeAt(k+1)]<<4|l[b.charCodeAt(k+2)]>>2,T[E++]=h>>8&255,T[E++]=255&h),T},ue.fromByteArray=function(b){for(var h,k=b.length,v=k%3,f=[],w=0,T=k-v;w<T;w+=16383)f.push(d(b,w,w+16383>T?T:w+16383));return 1===v?(h=b[k-1],f.push(q[h>>2]+q[h<<4&63]+"==")):2===v&&(h=(b[k-2]<<8)+b[k-1],f.push(q[h>>10]+q[h>>4&63]+q[h<<2&63]+"=")),f.join("")};for(var q=[],l=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=y.length;e<o;++e)q[e]=y[e],l[y.charCodeAt(e)]=e;function u(b){var h=b.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.indexOf("=");return-1===k&&(k=h),[k,k===h?0:4-k%4]}function d(b,h,k){for(var v,f,w=[],T=h;T<k;T+=3)v=(b[T]<<16&16711680)+(b[T+1]<<8&65280)+(255&b[T+2]),w.push(q[(f=v)>>18&63]+q[f>>12&63]+q[f>>6&63]+q[63&f]);return w.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],3:[function(J,ie,ue){},{}],4:[function(J,ie,ue){arguments[4][3][0].apply(ue,arguments)},{dup:3}],5:[function(J,ie,ue){(function(q){(function(){!function(l){var F="object"==typeof ue&&ue&&!ue.nodeType&&ue,y="object"==typeof ie&&ie&&!ie.nodeType&&ie,e="object"==typeof q&&q;e.global!==e&&e.window!==e&&e.self!==e||(l=e);var o,u,d=2147483647,b=36,P=/^xn--/,M=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=Math.floor,W=String.fromCharCode;function V(Ce){throw new RangeError(O[Ce])}function $(Ce,me){for(var de=Ce.length,ye=[];de--;)ye[de]=me(Ce[de]);return ye}function fe(Ce,me){var de=Ce.split("@"),ye="";return de.length>1&&(ye=de[0]+"@",Ce=de[1]),ye+$((Ce=Ce.replace(j,".")).split("."),me).join(".")}function ce(Ce){for(var me,de,ye=[],Ee=0,Be=Ce.length;Ee<Be;)(me=Ce.charCodeAt(Ee++))>=55296&&me<=56319&&Ee<Be?56320==(64512&(de=Ce.charCodeAt(Ee++)))?ye.push(((1023&me)<<10)+(1023&de)+65536):(ye.push(me),Ee--):ye.push(me);return ye}function xe(Ce){return $(Ce,function(me){var de="";return me>65535&&(de+=W((me-=65536)>>>10&1023|55296),me=56320|1023&me),de+W(me)}).join("")}function te(Ce,me){return Ce+22+75*(Ce<26)-((0!=me)<<5)}function se(Ce,me,de){var ye=0;for(Ce=de?G(Ce/700):Ce>>1,Ce+=G(Ce/me);Ce>455;ye+=b)Ce=G(Ce/35);return G(ye+36*Ce/(Ce+38))}function ne(Ce){var me,de,ye,Ee,Be,Ie,qe,U,H,ee,pe,Ne=[],ke=Ce.length,Pe=0,Je=128,Ke=72;for((de=Ce.lastIndexOf("-"))<0&&(de=0),ye=0;ye<de;++ye)Ce.charCodeAt(ye)>=128&&V("not-basic"),Ne.push(Ce.charCodeAt(ye));for(Ee=de>0?de+1:0;Ee<ke;){for(Be=Pe,Ie=1,qe=b;Ee>=ke&&V("invalid-input"),((U=(pe=Ce.charCodeAt(Ee++))-48<10?pe-22:pe-65<26?pe-65:pe-97<26?pe-97:b)>=b||U>G((d-Pe)/Ie))&&V("overflow"),Pe+=U*Ie,!(U<(H=qe<=Ke?1:qe>=Ke+26?26:qe-Ke));qe+=b)Ie>G(d/(ee=b-H))&&V("overflow"),Ie*=ee;Ke=se(Pe-Be,me=Ne.length+1,0==Be),G(Pe/me)>d-Je&&V("overflow"),Je+=G(Pe/me),Pe%=me,Ne.splice(Pe++,0,Je)}return xe(Ne)}function ve(Ce){var me,de,ye,Ee,Be,Ie,qe,U,H,ee,pe,Ne,ke,Pe,Je,Ke=[];for(Ne=(Ce=ce(Ce)).length,me=128,de=0,Be=72,Ie=0;Ie<Ne;++Ie)(pe=Ce[Ie])<128&&Ke.push(W(pe));for(ye=Ee=Ke.length,Ee&&Ke.push("-");ye<Ne;){for(qe=d,Ie=0;Ie<Ne;++Ie)(pe=Ce[Ie])>=me&&pe<qe&&(qe=pe);for(qe-me>G((d-de)/(ke=ye+1))&&V("overflow"),de+=(qe-me)*ke,me=qe,Ie=0;Ie<Ne;++Ie)if((pe=Ce[Ie])<me&&++de>d&&V("overflow"),pe==me){for(U=de,H=b;!(U<(ee=H<=Be?1:H>=Be+26?26:H-Be));H+=b)Je=U-ee,Pe=b-ee,Ke.push(W(te(ee+Je%Pe,0))),U=G(Je/Pe);Ke.push(W(te(U,0))),Be=se(de,ke,ye==Ee),de=0,++ye}++de,++me}return Ke.join("")}if(o={version:"1.4.1",ucs2:{decode:ce,encode:xe},decode:ne,encode:ve,toASCII:function(Ce){return fe(Ce,function(me){return M.test(me)?"xn--"+ve(me):me})},toUnicode:function(Ce){return fe(Ce,function(me){return P.test(me)?ne(me.slice(4).toLowerCase()):me})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(F&&y)if(ie.exports==F)y.exports=o;else for(u in o)o.hasOwnProperty(u)&&(F[u]=o[u]);else l.punycode=o}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(J,ie,ue){ie.exports=function(q){return q&&"object"==typeof q&&"function"==typeof q.copy&&"function"==typeof q.fill&&"function"==typeof q.readUInt8}},{}],7:[function(J,ie,ue){"use strict";var q=J("is-arguments"),l=J("is-generator-function"),F=J("which-typed-array"),y=J("is-typed-array");function e(ne){return ne.call.bind(ne)}var o="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,d=e(Object.prototype.toString),b=e(Number.prototype.valueOf),h=e(String.prototype.valueOf),k=e(Boolean.prototype.valueOf);if(o)var v=e(BigInt.prototype.valueOf);if(u)var f=e(Symbol.prototype.valueOf);function w(ne,ve){if("object"!=typeof ne)return!1;try{return ve(ne),!0}catch(Ce){return!1}}function T(ne){return"[object Map]"===d(ne)}function E(ne){return"[object Set]"===d(ne)}function P(ne){return"[object WeakMap]"===d(ne)}function M(ne){return"[object WeakSet]"===d(ne)}function j(ne){return"[object ArrayBuffer]"===d(ne)}function O(ne){return"undefined"!=typeof ArrayBuffer&&(j.working?j(ne):ne instanceof ArrayBuffer)}function L(ne){return"[object DataView]"===d(ne)}function G(ne){return"undefined"!=typeof DataView&&(L.working?L(ne):ne instanceof DataView)}ue.isArgumentsObject=q,ue.isGeneratorFunction=l,ue.isTypedArray=y,ue.isPromise=function(ne){return"undefined"!=typeof Promise&&ne instanceof Promise||null!==ne&&"object"==typeof ne&&"function"==typeof ne.then&&"function"==typeof ne.catch},ue.isArrayBufferView=function(ne){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ne):y(ne)||G(ne)},ue.isUint8Array=function(ne){return"Uint8Array"===F(ne)},ue.isUint8ClampedArray=function(ne){return"Uint8ClampedArray"===F(ne)},ue.isUint16Array=function(ne){return"Uint16Array"===F(ne)},ue.isUint32Array=function(ne){return"Uint32Array"===F(ne)},ue.isInt8Array=function(ne){return"Int8Array"===F(ne)},ue.isInt16Array=function(ne){return"Int16Array"===F(ne)},ue.isInt32Array=function(ne){return"Int32Array"===F(ne)},ue.isFloat32Array=function(ne){return"Float32Array"===F(ne)},ue.isFloat64Array=function(ne){return"Float64Array"===F(ne)},ue.isBigInt64Array=function(ne){return"BigInt64Array"===F(ne)},ue.isBigUint64Array=function(ne){return"BigUint64Array"===F(ne)},T.working="undefined"!=typeof Map&&T(new Map),ue.isMap=function(ne){return"undefined"!=typeof Map&&(T.working?T(ne):ne instanceof Map)},E.working="undefined"!=typeof Set&&E(new Set),ue.isSet=function(ne){return"undefined"!=typeof Set&&(E.working?E(ne):ne instanceof Set)},P.working="undefined"!=typeof WeakMap&&P(new WeakMap),ue.isWeakMap=function(ne){return"undefined"!=typeof WeakMap&&(P.working?P(ne):ne instanceof WeakMap)},M.working="undefined"!=typeof WeakSet&&M(new WeakSet),ue.isWeakSet=function(ne){return M(ne)},j.working="undefined"!=typeof ArrayBuffer&&j(new ArrayBuffer),ue.isArrayBuffer=O,L.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&L(new DataView(new ArrayBuffer(1),0,1)),ue.isDataView=G;var W="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function V(ne){return"[object SharedArrayBuffer]"===d(ne)}function $(ne){return void 0!==W&&(void 0===V.working&&(V.working=V(new W)),V.working?V(ne):ne instanceof W)}function fe(ne){return w(ne,b)}function ce(ne){return w(ne,h)}function xe(ne){return w(ne,k)}function te(ne){return o&&w(ne,v)}function se(ne){return u&&w(ne,f)}ue.isSharedArrayBuffer=$,ue.isAsyncFunction=function(ne){return"[object AsyncFunction]"===d(ne)},ue.isMapIterator=function(ne){return"[object Map Iterator]"===d(ne)},ue.isSetIterator=function(ne){return"[object Set Iterator]"===d(ne)},ue.isGeneratorObject=function(ne){return"[object Generator]"===d(ne)},ue.isWebAssemblyCompiledModule=function(ne){return"[object WebAssembly.Module]"===d(ne)},ue.isNumberObject=fe,ue.isStringObject=ce,ue.isBooleanObject=xe,ue.isBigIntObject=te,ue.isSymbolObject=se,ue.isBoxedPrimitive=function(ne){return fe(ne)||ce(ne)||xe(ne)||te(ne)||se(ne)},ue.isAnyArrayBuffer=function(ne){return"undefined"!=typeof Uint8Array&&(O(ne)||$(ne))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ne){Object.defineProperty(ue,ne,{enumerable:!1,value:function(){throw new Error(ne+" is not supported in userland")}})})},{"is-arguments":27,"is-generator-function":29,"is-typed-array":30,"which-typed-array":118}],8:[function(J,ie,ue){(function(q){(function(){var l=Object.getOwnPropertyDescriptors||function(te){for(var se=Object.keys(te),ne={},ve=0;ve<se.length;ve++)ne[se[ve]]=Object.getOwnPropertyDescriptor(te,se[ve]);return ne},F=/%[sdj%]/g;ue.format=function(te){if(!P(te)){for(var se=[],ne=0;ne<arguments.length;ne++)se.push(u(arguments[ne]));return se.join(" ")}ne=1;for(var ve=arguments,Ce=ve.length,me=String(te).replace(F,function(ye){if("%%"===ye)return"%";if(ne>=Ce)return ye;switch(ye){case"%s":return String(ve[ne++]);case"%d":return Number(ve[ne++]);case"%j":try{return JSON.stringify(ve[ne++])}catch(Ee){return"[Circular]"}default:return ye}}),de=ve[ne];ne<Ce;de=ve[++ne])T(de)||!O(de)?me+=" "+de:me+=" "+u(de);return me},ue.deprecate=function(te,se){if(void 0!==q&&!0===q.noDeprecation)return te;if(void 0===q)return function(){return ue.deprecate(te,se).apply(this,arguments)};var ne=!1;return function(){if(!ne){if(q.throwDeprecation)throw new Error(se);q.traceDeprecation?console.trace(se):console.error(se),ne=!0}return te.apply(this,arguments)}};var y={},e=/^$/;if(q.env.NODE_DEBUG){var o=q.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+o+"$","i")}function u(te,se){var ne={seen:[],stylize:b};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),w(se)?ne.showHidden=se:se&&ue._extend(ne,se),M(ne.showHidden)&&(ne.showHidden=!1),M(ne.depth)&&(ne.depth=2),M(ne.colors)&&(ne.colors=!1),M(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=d),h(ne,te,ne.depth)}function d(te,se){var ne=u.styles[se];return ne?"\x1b["+u.colors[ne][0]+"m"+te+"\x1b["+u.colors[ne][1]+"m":te}function b(te,se){return te}function h(te,se,ne){if(te.customInspect&&se&&W(se.inspect)&&se.inspect!==ue.inspect&&(!se.constructor||se.constructor.prototype!==se)){var ve=se.inspect(ne,te);return P(ve)||(ve=h(te,ve,ne)),ve}var Ce=function(U,H){if(M(H))return U.stylize("undefined","undefined");if(P(H)){var ee="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return U.stylize(ee,"string")}return E(H)?U.stylize(""+H,"number"):w(H)?U.stylize(""+H,"boolean"):T(H)?U.stylize("null","null"):void 0}(te,se);if(Ce)return Ce;var H,me=Object.keys(se),de=(H={},me.forEach(function(ee,pe){H[ee]=!0}),H);if(te.showHidden&&(me=Object.getOwnPropertyNames(se)),G(se)&&(me.indexOf("message")>=0||me.indexOf("description")>=0))return k(se);if(0===me.length){if(W(se)){var ye=se.name?": "+se.name:"";return te.stylize("[Function"+ye+"]","special")}if(j(se))return te.stylize(RegExp.prototype.toString.call(se),"regexp");if(L(se))return te.stylize(Date.prototype.toString.call(se),"date");if(G(se))return k(se)}var Ee,Be="",Ie=!1,qe=["{","}"];return f(se)&&(Ie=!0,qe=["[","]"]),W(se)&&(Be=" [Function"+(se.name?": "+se.name:"")+"]"),j(se)&&(Be=" "+RegExp.prototype.toString.call(se)),L(se)&&(Be=" "+Date.prototype.toUTCString.call(se)),G(se)&&(Be=" "+k(se)),0!==me.length||Ie&&0!=se.length?ne<0?j(se)?te.stylize(RegExp.prototype.toString.call(se),"regexp"):te.stylize("[Object]","special"):(te.seen.push(se),Ee=Ie?function(U,H,ee,pe,Ne){for(var ke=[],Pe=0,Je=H.length;Pe<Je;++Pe)ce(H,String(Pe))?ke.push(v(U,H,ee,pe,String(Pe),!0)):ke.push("");return Ne.forEach(function(Ke){Ke.match(/^\d+$/)||ke.push(v(U,H,ee,pe,Ke,!0))}),ke}(te,se,ne,de,me):me.map(function(U){return v(te,se,ne,de,U,Ie)}),te.seen.pop(),function(U,H,ee){return U.reduce(function(pe,Ne){return Ne.indexOf("\n"),pe+Ne.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ee[0]+(""===H?"":H+"\n ")+" "+U.join(",\n  ")+" "+ee[1]:ee[0]+H+" "+U.join(", ")+" "+ee[1]}(Ee,Be,qe)):qe[0]+Be+qe[1]}function k(te){return"["+Error.prototype.toString.call(te)+"]"}function v(te,se,ne,ve,Ce,me){var de,ye,Ee;if((Ee=Object.getOwnPropertyDescriptor(se,Ce)||{value:se[Ce]}).get?ye=Ee.set?te.stylize("[Getter/Setter]","special"):te.stylize("[Getter]","special"):Ee.set&&(ye=te.stylize("[Setter]","special")),ce(ve,Ce)||(de="["+Ce+"]"),ye||(te.seen.indexOf(Ee.value)<0?(ye=T(ne)?h(te,Ee.value,null):h(te,Ee.value,ne-1)).indexOf("\n")>-1&&(ye=me?ye.split("\n").map(function(Be){return"  "+Be}).join("\n").substr(2):"\n"+ye.split("\n").map(function(Be){return"   "+Be}).join("\n")):ye=te.stylize("[Circular]","special")),M(de)){if(me&&Ce.match(/^\d+$/))return ye;(de=JSON.stringify(""+Ce)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(de=de.substr(1,de.length-2),de=te.stylize(de,"name")):(de=de.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),de=te.stylize(de,"string"))}return de+": "+ye}function f(te){return Array.isArray(te)}function w(te){return"boolean"==typeof te}function T(te){return null===te}function E(te){return"number"==typeof te}function P(te){return"string"==typeof te}function M(te){return void 0===te}function j(te){return O(te)&&"[object RegExp]"===V(te)}function O(te){return"object"==typeof te&&null!==te}function L(te){return O(te)&&"[object Date]"===V(te)}function G(te){return O(te)&&("[object Error]"===V(te)||te instanceof Error)}function W(te){return"function"==typeof te}function V(te){return Object.prototype.toString.call(te)}function $(te){return te<10?"0"+te.toString(10):te.toString(10)}ue.debuglog=function(te){if(te=te.toUpperCase(),!y[te])if(e.test(te)){var se=q.pid;y[te]=function(){var ne=ue.format.apply(ue,arguments);console.error("%s %d: %s",te,se,ne)}}else y[te]=function(){};return y[te]},ue.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ue.types=J("./support/types"),ue.isArray=f,ue.isBoolean=w,ue.isNull=T,ue.isNullOrUndefined=function(te){return null==te},ue.isNumber=E,ue.isString=P,ue.isSymbol=function(te){return"symbol"==typeof te},ue.isUndefined=M,ue.isRegExp=j,ue.types.isRegExp=j,ue.isObject=O,ue.isDate=L,ue.types.isDate=L,ue.isError=G,ue.types.isNativeError=G,ue.isFunction=W,ue.isPrimitive=function(te){return null===te||"boolean"==typeof te||"number"==typeof te||"string"==typeof te||"symbol"==typeof te||void 0===te},ue.isBuffer=J("./support/isBuffer");var fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(te,se){return Object.prototype.hasOwnProperty.call(te,se)}ue.log=function(){var te,se;console.log("%s - %s",(se=[$((te=new Date).getHours()),$(te.getMinutes()),$(te.getSeconds())].join(":"),[te.getDate(),fe[te.getMonth()],se].join(" ")),ue.format.apply(ue,arguments))},ue.inherits=J("inherits"),ue._extend=function(te,se){if(!se||!O(se))return te;for(var ne=Object.keys(se),ve=ne.length;ve--;)te[ne[ve]]=se[ne[ve]];return te};var xe="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;ue.promisify=function(te){if("function"!=typeof te)throw new TypeError('The "original" argument must be of type Function');if(xe&&te[xe]){var se;if("function"!=typeof(se=te[xe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(se,xe,{value:se,enumerable:!1,writable:!1,configurable:!0}),se}function se(){for(var ne,ve,Ce=new Promise(function(ye,Ee){ne=ye,ve=Ee}),me=[],de=0;de<arguments.length;de++)me.push(arguments[de]);me.push(function(ye,Ee){ye?ve(ye):ne(Ee)});try{te.apply(this,me)}catch(ye){ve(ye)}return Ce}return Object.setPrototypeOf(se,Object.getPrototypeOf(te)),xe&&Object.defineProperty(se,xe,{value:se,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(se,l(te))},ue.promisify.custom=xe,ue.callbackify=function(te){if("function"!=typeof te)throw new TypeError('The "original" argument must be of type Function');function se(){for(var ne=[],ve=0;ve<arguments.length;ve++)ne.push(arguments[ve]);var Ce=ne.pop();if("function"!=typeof Ce)throw new TypeError("The last argument must be of type Function");var me=this,de=function(){return Ce.apply(me,arguments)};te.apply(this,ne).then(function(ye){q.nextTick(de.bind(null,null,ye))},function(ye){q.nextTick(function(Ee,Be){if(!Ee){var Ie=new Error("Promise was rejected with a falsy value");Ie.reason=Ee,Ee=Ie}return Be(Ee)}.bind(null,ye,de))})}return Object.setPrototypeOf(se,Object.getPrototypeOf(te)),Object.defineProperties(se,l(te)),se}}).call(this)}).call(this,J("_process"))},{"./support/isBuffer":6,"./support/types":7,_process:62,inherits:26}],9:[function(J,ie,ue){(function(q){(function(){"use strict";var l=J("base64-js"),F=J("ieee754");ue.Buffer=o,ue.SlowBuffer=function(U){return+U!=U&&(U=0),o.alloc(+U)},ue.INSPECT_MAX_BYTES=50;var y=2147483647;function e(U){if(U>y)throw new RangeError('The value "'+U+'" is invalid for option "size"');var H=new Uint8Array(U);return H.__proto__=o.prototype,H}function o(U,H,ee){if("number"==typeof U){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return b(U)}return u(U,H,ee)}function u(U,H,ee){if("string"==typeof U)return function(ke,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!o.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var Je=0|v(ke,Pe),Ke=e(Je),at=Ke.write(ke,Pe);return at!==Je&&(Ke=Ke.slice(0,at)),Ke}(U,H);if(ArrayBuffer.isView(U))return h(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(Ie(U,ArrayBuffer)||U&&Ie(U.buffer,ArrayBuffer))return function(ke,Pe,Je){if(Pe<0||ke.byteLength<Pe)throw new RangeError('"offset" is outside of buffer bounds');if(ke.byteLength<Pe+(Je||0))throw new RangeError('"length" is outside of buffer bounds');var Ke;return(Ke=void 0===Pe&&void 0===Je?new Uint8Array(ke):void 0===Je?new Uint8Array(ke,Pe):new Uint8Array(ke,Pe,Je)).__proto__=o.prototype,Ke}(U,H,ee);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=U.valueOf&&U.valueOf();if(null!=pe&&pe!==U)return o.from(pe,H,ee);var Ne=function(ke){if(o.isBuffer(ke)){var Pe=0|k(ke.length),Je=e(Pe);return 0===Je.length||ke.copy(Je,0,0,Pe),Je}return void 0!==ke.length?"number"!=typeof ke.length||qe(ke.length)?e(0):h(ke):"Buffer"===ke.type&&Array.isArray(ke.data)?h(ke.data):void 0}(U);if(Ne)return Ne;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return o.from(U[Symbol.toPrimitive]("string"),H,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function d(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function b(U){return d(U),e(U<0?0:0|k(U))}function h(U){for(var H=U.length<0?0:0|k(U.length),ee=e(H),pe=0;pe<H;pe+=1)ee[pe]=255&U[pe];return ee}function k(U){if(U>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|U}function v(U,H){if(o.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||Ie(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var ee=U.length,pe=arguments.length>2&&!0===arguments[2];if(!pe&&0===ee)return 0;for(var Ne=!1;;)switch(H){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return ye(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ee;case"hex":return ee>>>1;case"base64":return Ee(U).length;default:if(Ne)return pe?-1:ye(U).length;H=(""+H).toLowerCase(),Ne=!0}}function f(U,H,ee){var pe=U[H];U[H]=U[ee],U[ee]=pe}function w(U,H,ee,pe,Ne){if(0===U.length)return-1;if("string"==typeof ee?(pe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),qe(ee=+ee)&&(ee=Ne?0:U.length-1),ee<0&&(ee=U.length+ee),ee>=U.length){if(Ne)return-1;ee=U.length-1}else if(ee<0){if(!Ne)return-1;ee=0}if("string"==typeof H&&(H=o.from(H,pe)),o.isBuffer(H))return 0===H.length?-1:T(U,H,ee,pe,Ne);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?Ne?Uint8Array.prototype.indexOf.call(U,H,ee):Uint8Array.prototype.lastIndexOf.call(U,H,ee):T(U,[H],ee,pe,Ne);throw new TypeError("val must be string, number or Buffer")}function T(U,H,ee,pe,Ne){var ke,Pe=1,Je=U.length,Ke=H.length;if(void 0!==pe&&("ucs2"===(pe=String(pe).toLowerCase())||"ucs-2"===pe||"utf16le"===pe||"utf-16le"===pe)){if(U.length<2||H.length<2)return-1;Pe=2,Je/=2,Ke/=2,ee/=2}function at(Te,De){return 1===Pe?Te[De]:Te.readUInt16BE(De*Pe)}if(Ne){var pt=-1;for(ke=ee;ke<Je;ke++)if(at(U,ke)===at(H,-1===pt?0:ke-pt)){if(-1===pt&&(pt=ke),ke-pt+1===Ke)return pt*Pe}else-1!==pt&&(ke-=ke-pt),pt=-1}else for(ee+Ke>Je&&(ee=Je-Ke),ke=ee;ke>=0;ke--){for(var Wt=!0,zt=0;zt<Ke;zt++)if(at(U,ke+zt)!==at(H,zt)){Wt=!1;break}if(Wt)return ke}return-1}function E(U,H,ee,pe){ee=Number(ee)||0;var Ne=U.length-ee;pe?(pe=Number(pe))>Ne&&(pe=Ne):pe=Ne;var ke=H.length;pe>ke/2&&(pe=ke/2);for(var Pe=0;Pe<pe;++Pe){var Je=parseInt(H.substr(2*Pe,2),16);if(qe(Je))return Pe;U[ee+Pe]=Je}return Pe}function P(U,H,ee,pe){return Be(ye(H,U.length-ee),U,ee,pe)}function M(U,H,ee,pe){return Be(function(Ne){for(var ke=[],Pe=0;Pe<Ne.length;++Pe)ke.push(255&Ne.charCodeAt(Pe));return ke}(H),U,ee,pe)}function j(U,H,ee,pe){return M(U,H,ee,pe)}function O(U,H,ee,pe){return Be(Ee(H),U,ee,pe)}function L(U,H,ee,pe){return Be(function(Ne,ke){for(var Pe,Je,Ke,at=[],pt=0;pt<Ne.length&&!((ke-=2)<0);++pt)Je=(Pe=Ne.charCodeAt(pt))>>8,Ke=Pe%256,at.push(Ke),at.push(Je);return at}(H,U.length-ee),U,ee,pe)}function G(U,H,ee){return 0===H&&ee===U.length?l.fromByteArray(U):l.fromByteArray(U.slice(H,ee))}function W(U,H,ee){ee=Math.min(U.length,ee);for(var pe=[],Ne=H;Ne<ee;){var ke,Pe,Je,Ke,at=U[Ne],pt=null,Wt=at>239?4:at>223?3:at>191?2:1;if(Ne+Wt<=ee)switch(Wt){case 1:at<128&&(pt=at);break;case 2:128==(192&(ke=U[Ne+1]))&&(Ke=(31&at)<<6|63&ke)>127&&(pt=Ke);break;case 3:ke=U[Ne+1],Pe=U[Ne+2],128==(192&ke)&&128==(192&Pe)&&(Ke=(15&at)<<12|(63&ke)<<6|63&Pe)>2047&&(Ke<55296||Ke>57343)&&(pt=Ke);break;case 4:ke=U[Ne+1],Pe=U[Ne+2],Je=U[Ne+3],128==(192&ke)&&128==(192&Pe)&&128==(192&Je)&&(Ke=(15&at)<<18|(63&ke)<<12|(63&Pe)<<6|63&Je)>65535&&Ke<1114112&&(pt=Ke)}null===pt?(pt=65533,Wt=1):pt>65535&&(pt-=65536,pe.push(pt>>>10&1023|55296),pt=56320|1023&pt),pe.push(pt),Ne+=Wt}return function(zt){var Te=zt.length;if(Te<=V)return String.fromCharCode.apply(String,zt);for(var De="",Re=0;Re<Te;)De+=String.fromCharCode.apply(String,zt.slice(Re,Re+=V));return De}(pe)}ue.kMaxLength=y,o.TYPED_ARRAY_SUPPORT=function(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch(H){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(U,H,ee){return u(U,H,ee)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(U,H,ee){return Ne=H,ke=ee,d(pe=U),pe<=0?e(pe):void 0!==Ne?"string"==typeof ke?e(pe).fill(Ne,ke):e(pe).fill(Ne):e(pe);var pe,Ne,ke},o.allocUnsafe=function(U){return b(U)},o.allocUnsafeSlow=function(U){return b(U)},o.isBuffer=function(U){return null!=U&&!0===U._isBuffer&&U!==o.prototype},o.compare=function(U,H){if(Ie(U,Uint8Array)&&(U=o.from(U,U.offset,U.byteLength)),Ie(H,Uint8Array)&&(H=o.from(H,H.offset,H.byteLength)),!o.isBuffer(U)||!o.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===H)return 0;for(var ee=U.length,pe=H.length,Ne=0,ke=Math.min(ee,pe);Ne<ke;++Ne)if(U[Ne]!==H[Ne]){ee=U[Ne],pe=H[Ne];break}return ee<pe?-1:pe<ee?1:0},o.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(U,H){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(0===U.length)return o.alloc(0);var ee;if(void 0===H)for(H=0,ee=0;ee<U.length;++ee)H+=U[ee].length;var pe=o.allocUnsafe(H),Ne=0;for(ee=0;ee<U.length;++ee){var ke=U[ee];if(Ie(ke,Uint8Array)&&(ke=o.from(ke)),!o.isBuffer(ke))throw new TypeError('"list" argument must be an Array of Buffers');ke.copy(pe,Ne),Ne+=ke.length}return pe},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var U=this.length;if(U%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<U;H+=2)f(this,H,H+1);return this},o.prototype.swap32=function(){var U=this.length;if(U%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<U;H+=4)f(this,H,H+3),f(this,H+1,H+2);return this},o.prototype.swap64=function(){var U=this.length;if(U%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<U;H+=8)f(this,H,H+7),f(this,H+1,H+6),f(this,H+2,H+5),f(this,H+3,H+4);return this},o.prototype.toString=function(){var U=this.length;return 0===U?"":0===arguments.length?W(this,0,U):function(H,ee,pe){var Ne=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===pe||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(ee>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return ce(this,ee,pe);case"utf8":case"utf-8":return W(this,ee,pe);case"ascii":return $(this,ee,pe);case"latin1":case"binary":return fe(this,ee,pe);case"base64":return G(this,ee,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,ee,pe);default:if(Ne)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),Ne=!0}}.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(U){if(!o.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U||0===o.compare(this,U)},o.prototype.inspect=function(){var U="",H=ue.INSPECT_MAX_BYTES;return U=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(U+=" ... "),"<Buffer "+U+">"},o.prototype.compare=function(U,H,ee,pe,Ne){if(Ie(U,Uint8Array)&&(U=o.from(U,U.offset,U.byteLength)),!o.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(void 0===H&&(H=0),void 0===ee&&(ee=U?U.length:0),void 0===pe&&(pe=0),void 0===Ne&&(Ne=this.length),H<0||ee>U.length||pe<0||Ne>this.length)throw new RangeError("out of range index");if(pe>=Ne&&H>=ee)return 0;if(pe>=Ne)return-1;if(H>=ee)return 1;if(this===U)return 0;for(var ke=(Ne>>>=0)-(pe>>>=0),Pe=(ee>>>=0)-(H>>>=0),Je=Math.min(ke,Pe),Ke=this.slice(pe,Ne),at=U.slice(H,ee),pt=0;pt<Je;++pt)if(Ke[pt]!==at[pt]){ke=Ke[pt],Pe=at[pt];break}return ke<Pe?-1:Pe<ke?1:0},o.prototype.includes=function(U,H,ee){return-1!==this.indexOf(U,H,ee)},o.prototype.indexOf=function(U,H,ee){return w(this,U,H,ee,!0)},o.prototype.lastIndexOf=function(U,H,ee){return w(this,U,H,ee,!1)},o.prototype.write=function(U,H,ee,pe){if(void 0===H)pe="utf8",ee=this.length,H=0;else if(void 0===ee&&"string"==typeof H)pe=H,ee=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(ee)?(ee>>>=0,void 0===pe&&(pe="utf8")):(pe=ee,ee=void 0)}var Ne=this.length-H;if((void 0===ee||ee>Ne)&&(ee=Ne),U.length>0&&(ee<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var ke=!1;;)switch(pe){case"hex":return E(this,U,H,ee);case"utf8":case"utf-8":return P(this,U,H,ee);case"ascii":return M(this,U,H,ee);case"latin1":case"binary":return j(this,U,H,ee);case"base64":return O(this,U,H,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,U,H,ee);default:if(ke)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),ke=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function $(U,H,ee){var pe="";ee=Math.min(U.length,ee);for(var Ne=H;Ne<ee;++Ne)pe+=String.fromCharCode(127&U[Ne]);return pe}function fe(U,H,ee){var pe="";ee=Math.min(U.length,ee);for(var Ne=H;Ne<ee;++Ne)pe+=String.fromCharCode(U[Ne]);return pe}function ce(U,H,ee){var pe=U.length;(!H||H<0)&&(H=0),(!ee||ee<0||ee>pe)&&(ee=pe);for(var Ne="",ke=H;ke<ee;++ke)Ne+=de(U[ke]);return Ne}function xe(U,H,ee){for(var pe=U.slice(H,ee),Ne="",ke=0;ke<pe.length;ke+=2)Ne+=String.fromCharCode(pe[ke]+256*pe[ke+1]);return Ne}function te(U,H,ee){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+H>ee)throw new RangeError("Trying to access beyond buffer length")}function se(U,H,ee,pe,Ne,ke){if(!o.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Ne||H<ke)throw new RangeError('"value" argument is out of bounds');if(ee+pe>U.length)throw new RangeError("Index out of range")}function ne(U,H,ee,pe,Ne,ke){if(ee+pe>U.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function ve(U,H,ee,pe,Ne){return H=+H,ee>>>=0,Ne||ne(U,0,ee,4),F.write(U,H,ee,pe,23,4),ee+4}function Ce(U,H,ee,pe,Ne){return H=+H,ee>>>=0,Ne||ne(U,0,ee,8),F.write(U,H,ee,pe,52,8),ee+8}o.prototype.slice=function(U,H){var ee=this.length;(U=~~U)<0?(U+=ee)<0&&(U=0):U>ee&&(U=ee),(H=void 0===H?ee:~~H)<0?(H+=ee)<0&&(H=0):H>ee&&(H=ee),H<U&&(H=U);var pe=this.subarray(U,H);return pe.__proto__=o.prototype,pe},o.prototype.readUIntLE=function(U,H,ee){U>>>=0,H>>>=0,ee||te(U,H,this.length);for(var pe=this[U],Ne=1,ke=0;++ke<H&&(Ne*=256);)pe+=this[U+ke]*Ne;return pe},o.prototype.readUIntBE=function(U,H,ee){U>>>=0,H>>>=0,ee||te(U,H,this.length);for(var pe=this[U+--H],Ne=1;H>0&&(Ne*=256);)pe+=this[U+--H]*Ne;return pe},o.prototype.readUInt8=function(U,H){return U>>>=0,H||te(U,1,this.length),this[U]},o.prototype.readUInt16LE=function(U,H){return U>>>=0,H||te(U,2,this.length),this[U]|this[U+1]<<8},o.prototype.readUInt16BE=function(U,H){return U>>>=0,H||te(U,2,this.length),this[U]<<8|this[U+1]},o.prototype.readUInt32LE=function(U,H){return U>>>=0,H||te(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+16777216*this[U+3]},o.prototype.readUInt32BE=function(U,H){return U>>>=0,H||te(U,4,this.length),16777216*this[U]+(this[U+1]<<16|this[U+2]<<8|this[U+3])},o.prototype.readIntLE=function(U,H,ee){U>>>=0,H>>>=0,ee||te(U,H,this.length);for(var pe=this[U],Ne=1,ke=0;++ke<H&&(Ne*=256);)pe+=this[U+ke]*Ne;return pe>=(Ne*=128)&&(pe-=Math.pow(2,8*H)),pe},o.prototype.readIntBE=function(U,H,ee){U>>>=0,H>>>=0,ee||te(U,H,this.length);for(var pe=H,Ne=1,ke=this[U+--pe];pe>0&&(Ne*=256);)ke+=this[U+--pe]*Ne;return ke>=(Ne*=128)&&(ke-=Math.pow(2,8*H)),ke},o.prototype.readInt8=function(U,H){return U>>>=0,H||te(U,1,this.length),128&this[U]?-1*(255-this[U]+1):this[U]},o.prototype.readInt16LE=function(U,H){U>>>=0,H||te(U,2,this.length);var ee=this[U]|this[U+1]<<8;return 32768&ee?4294901760|ee:ee},o.prototype.readInt16BE=function(U,H){U>>>=0,H||te(U,2,this.length);var ee=this[U+1]|this[U]<<8;return 32768&ee?4294901760|ee:ee},o.prototype.readInt32LE=function(U,H){return U>>>=0,H||te(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},o.prototype.readInt32BE=function(U,H){return U>>>=0,H||te(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},o.prototype.readFloatLE=function(U,H){return U>>>=0,H||te(U,4,this.length),F.read(this,U,!0,23,4)},o.prototype.readFloatBE=function(U,H){return U>>>=0,H||te(U,4,this.length),F.read(this,U,!1,23,4)},o.prototype.readDoubleLE=function(U,H){return U>>>=0,H||te(U,8,this.length),F.read(this,U,!0,52,8)},o.prototype.readDoubleBE=function(U,H){return U>>>=0,H||te(U,8,this.length),F.read(this,U,!1,52,8)},o.prototype.writeUIntLE=function(U,H,ee,pe){U=+U,H>>>=0,ee>>>=0,pe||se(this,U,H,ee,Math.pow(2,8*ee)-1,0);var Ne=1,ke=0;for(this[H]=255&U;++ke<ee&&(Ne*=256);)this[H+ke]=U/Ne&255;return H+ee},o.prototype.writeUIntBE=function(U,H,ee,pe){U=+U,H>>>=0,ee>>>=0,pe||se(this,U,H,ee,Math.pow(2,8*ee)-1,0);var Ne=ee-1,ke=1;for(this[H+Ne]=255&U;--Ne>=0&&(ke*=256);)this[H+Ne]=U/ke&255;return H+ee},o.prototype.writeUInt8=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,1,255,0),this[H]=255&U,H+1},o.prototype.writeUInt16LE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,2,65535,0),this[H]=255&U,this[H+1]=U>>>8,H+2},o.prototype.writeUInt16BE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,2,65535,0),this[H]=U>>>8,this[H+1]=255&U,H+2},o.prototype.writeUInt32LE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,4,4294967295,0),this[H+3]=U>>>24,this[H+2]=U>>>16,this[H+1]=U>>>8,this[H]=255&U,H+4},o.prototype.writeUInt32BE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,4,4294967295,0),this[H]=U>>>24,this[H+1]=U>>>16,this[H+2]=U>>>8,this[H+3]=255&U,H+4},o.prototype.writeIntLE=function(U,H,ee,pe){if(U=+U,H>>>=0,!pe){var Ne=Math.pow(2,8*ee-1);se(this,U,H,ee,Ne-1,-Ne)}var ke=0,Pe=1,Je=0;for(this[H]=255&U;++ke<ee&&(Pe*=256);)U<0&&0===Je&&0!==this[H+ke-1]&&(Je=1),this[H+ke]=(U/Pe>>0)-Je&255;return H+ee},o.prototype.writeIntBE=function(U,H,ee,pe){if(U=+U,H>>>=0,!pe){var Ne=Math.pow(2,8*ee-1);se(this,U,H,ee,Ne-1,-Ne)}var ke=ee-1,Pe=1,Je=0;for(this[H+ke]=255&U;--ke>=0&&(Pe*=256);)U<0&&0===Je&&0!==this[H+ke+1]&&(Je=1),this[H+ke]=(U/Pe>>0)-Je&255;return H+ee},o.prototype.writeInt8=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,1,127,-128),U<0&&(U=255+U+1),this[H]=255&U,H+1},o.prototype.writeInt16LE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,2,32767,-32768),this[H]=255&U,this[H+1]=U>>>8,H+2},o.prototype.writeInt16BE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,2,32767,-32768),this[H]=U>>>8,this[H+1]=255&U,H+2},o.prototype.writeInt32LE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,4,2147483647,-2147483648),this[H]=255&U,this[H+1]=U>>>8,this[H+2]=U>>>16,this[H+3]=U>>>24,H+4},o.prototype.writeInt32BE=function(U,H,ee){return U=+U,H>>>=0,ee||se(this,U,H,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[H]=U>>>24,this[H+1]=U>>>16,this[H+2]=U>>>8,this[H+3]=255&U,H+4},o.prototype.writeFloatLE=function(U,H,ee){return ve(this,U,H,!0,ee)},o.prototype.writeFloatBE=function(U,H,ee){return ve(this,U,H,!1,ee)},o.prototype.writeDoubleLE=function(U,H,ee){return Ce(this,U,H,!0,ee)},o.prototype.writeDoubleBE=function(U,H,ee){return Ce(this,U,H,!1,ee)},o.prototype.copy=function(U,H,ee,pe){if(!o.isBuffer(U))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),pe||0===pe||(pe=this.length),H>=U.length&&(H=U.length),H||(H=0),pe>0&&pe<ee&&(pe=ee),pe===ee||0===U.length||0===this.length)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),U.length-H<pe-ee&&(pe=U.length-H+ee);var Ne=pe-ee;if(this===U&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(H,ee,pe);else if(this===U&&ee<H&&H<pe)for(var ke=Ne-1;ke>=0;--ke)U[ke+H]=this[ke+ee];else Uint8Array.prototype.set.call(U,this.subarray(ee,pe),H);return Ne},o.prototype.fill=function(U,H,ee,pe){if("string"==typeof U){if("string"==typeof H?(pe=H,H=0,ee=this.length):"string"==typeof ee&&(pe=ee,ee=this.length),void 0!==pe&&"string"!=typeof pe)throw new TypeError("encoding must be a string");if("string"==typeof pe&&!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(1===U.length){var Ne=U.charCodeAt(0);("utf8"===pe&&Ne<128||"latin1"===pe)&&(U=Ne)}}else"number"==typeof U&&(U&=255);if(H<0||this.length<H||this.length<ee)throw new RangeError("Out of range index");if(ee<=H)return this;var ke;if(H>>>=0,ee=void 0===ee?this.length:ee>>>0,U||(U=0),"number"==typeof U)for(ke=H;ke<ee;++ke)this[ke]=U;else{var Pe=o.isBuffer(U)?U:o.from(U,pe),Je=Pe.length;if(0===Je)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(ke=0;ke<ee-H;++ke)this[ke+H]=Pe[ke%Je]}return this};var me=/[^+/0-9A-Za-z-_]/g;function de(U){return U<16?"0"+U.toString(16):U.toString(16)}function ye(U,H){var ee;H=H||1/0;for(var pe=U.length,Ne=null,ke=[],Pe=0;Pe<pe;++Pe){if((ee=U.charCodeAt(Pe))>55295&&ee<57344){if(!Ne){if(ee>56319){(H-=3)>-1&&ke.push(239,191,189);continue}if(Pe+1===pe){(H-=3)>-1&&ke.push(239,191,189);continue}Ne=ee;continue}if(ee<56320){(H-=3)>-1&&ke.push(239,191,189),Ne=ee;continue}ee=65536+(Ne-55296<<10|ee-56320)}else Ne&&(H-=3)>-1&&ke.push(239,191,189);if(Ne=null,ee<128){if((H-=1)<0)break;ke.push(ee)}else if(ee<2048){if((H-=2)<0)break;ke.push(ee>>6|192,63&ee|128)}else if(ee<65536){if((H-=3)<0)break;ke.push(ee>>12|224,ee>>6&63|128,63&ee|128)}else{if(!(ee<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;ke.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,63&ee|128)}}return ke}function Ee(U){return l.toByteArray(function(H){if((H=(H=H.split("=")[0]).trim().replace(me,"")).length<2)return"";for(;H.length%4!=0;)H+="=";return H}(U))}function Be(U,H,ee,pe){for(var Ne=0;Ne<pe&&!(Ne+ee>=H.length||Ne>=U.length);++Ne)H[Ne+ee]=U[Ne];return Ne}function Ie(U,H){return U instanceof H||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===H.name}function qe(U){return U!=U}}).call(this)}).call(this,J("buffer").Buffer)},{"base64-js":2,buffer:9,ieee754:25}],10:[function(J,ie,ue){ie.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],11:[function(J,ie,ue){"use strict";var q=J("get-intrinsic"),l=J("./"),F=l(q("String.prototype.indexOf"));ie.exports=function(y,e){var o=q(y,!!e);return"function"==typeof o&&F(y,".prototype.")>-1?l(o):o}},{"./":12,"get-intrinsic":19}],12:[function(J,ie,ue){"use strict";var q=J("function-bind"),l=J("get-intrinsic"),F=l("%Function.prototype.apply%"),y=l("%Function.prototype.call%"),e=l("%Reflect.apply%",!0)||q.call(y,F),o=l("%Object.getOwnPropertyDescriptor%",!0),u=l("%Object.defineProperty%",!0),d=l("%Math.max%");if(u)try{u({},"a",{value:1})}catch(h){u=null}ie.exports=function(h){var k=e(q,y,arguments);return o&&u&&o(k,"length").configurable&&u(k,"length",{value:1+d(0,h.length-(arguments.length-1))}),k};var b=function(){return e(q,F,arguments)};u?u(ie.exports,"apply",{value:b}):ie.exports.apply=b},{"function-bind":18,"get-intrinsic":19}],13:[function(J,ie,ue){"use strict";ie.exports=function q(l){return null===l||"object"!=typeof l||null!=l.toJSON?JSON.stringify(l):Array.isArray(l)?"["+l.reduce((F,y,e)=>F+(0===e?"":",")+q(void 0===y||"symbol"==typeof y?null:y),"")+"]":"{"+Object.keys(l).sort().reduce((F,y,e)=>void 0===l[y]||"symbol"==typeof l[y]?F:F+(0===F.length?"":",")+q(y)+":"+q(l[y]),"")+"}"}},{}],14:[function(J,ie,ue){"use strict";var q=J("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(q)try{q([],"length")}catch(l){q=null}ie.exports=q},{"get-intrinsic":19}],15:[function(J,ie,ue){"use strict";var q,l="object"==typeof Reflect?Reflect:null,F=l&&"function"==typeof l.apply?l.apply:function(T,E,P){return Function.prototype.apply.call(T,E,P)};q=l&&"function"==typeof l.ownKeys?l.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var y=Number.isNaN||function(T){return T!=T};function e(){e.init.call(this)}ie.exports=e,ie.exports.once=function(T,E){return new Promise(function(P,M){function j(L){T.removeListener(E,O),M(L)}function O(){"function"==typeof T.removeListener&&T.removeListener("error",j),P([].slice.call(arguments))}var L,G;w(T,E,O,{once:!0}),"error"!==E&&(G=j,"function"==typeof(L=T).on&&w(L,"error",G,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function u(T){if("function"!=typeof T)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function d(T){return void 0===T._maxListeners?e.defaultMaxListeners:T._maxListeners}function b(T,E,P,M){var j,O,L,G;if(u(P),void 0===(O=T._events)?(O=T._events=Object.create(null),T._eventsCount=0):(void 0!==O.newListener&&(T.emit("newListener",E,P.listener?P.listener:P),O=T._events),L=O[E]),void 0===L)L=O[E]=P,++T._eventsCount;else if("function"==typeof L?L=O[E]=M?[P,L]:[L,P]:M?L.unshift(P):L.push(P),(j=d(T))>0&&L.length>j&&!L.warned){L.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=T,W.type=E,W.count=L.length,G=W,console&&console.warn&&console.warn(G)}return T}function h(T,E,P){var M={fired:!1,wrapFn:void 0,target:T,type:E,listener:P},j=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(M);return j.listener=P,M.wrapFn=j,j}function k(T,E,P){var M=T._events;if(void 0===M)return[];var j=M[E];return void 0===j?[]:"function"==typeof j?P?[j.listener||j]:[j]:P?function(O){for(var L=new Array(O.length),G=0;G<L.length;++G)L[G]=O[G].listener||O[G];return L}(j):f(j,j.length)}function v(T){var E=this._events;if(void 0!==E){var P=E[T];if("function"==typeof P)return 1;if(void 0!==P)return P.length}return 0}function f(T,E){for(var P=new Array(E),M=0;M<E;++M)P[M]=T[M];return P}function w(T,E,P,M){if("function"==typeof T.on)M.once?T.once(E,P):T.on(E,P);else{if("function"!=typeof T.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(E,function j(O){M.once&&T.removeEventListener(E,j),P(O)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if("number"!=typeof T||T<0||y(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(T){if("number"!=typeof T||T<0||y(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},e.prototype.getMaxListeners=function(){return d(this)},e.prototype.emit=function(T){for(var E=[],P=1;P<arguments.length;P++)E.push(arguments[P]);var M="error"===T,j=this._events;if(void 0!==j)M=M&&void 0===j.error;else if(!M)return!1;if(M){var O;if(E.length>0&&(O=E[0]),O instanceof Error)throw O;var L=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw L.context=O,L}var G=j[T];if(void 0===G)return!1;if("function"==typeof G)F(G,this,E);else{var W=G.length,V=f(G,W);for(P=0;P<W;++P)F(V[P],this,E)}return!0},e.prototype.addListener=function(T,E){return b(this,T,E,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(T,E){return b(this,T,E,!0)},e.prototype.once=function(T,E){return u(E),this.on(T,h(this,T,E)),this},e.prototype.prependOnceListener=function(T,E){return u(E),this.prependListener(T,h(this,T,E)),this},e.prototype.removeListener=function(T,E){var P,M,j,O,L;if(u(E),void 0===(M=this._events))return this;if(void 0===(P=M[T]))return this;if(P===E||P.listener===E)0==--this._eventsCount?this._events=Object.create(null):(delete M[T],M.removeListener&&this.emit("removeListener",T,P.listener||E));else if("function"!=typeof P){for(j=-1,O=P.length-1;O>=0;O--)if(P[O]===E||P[O].listener===E){L=P[O].listener,j=O;break}if(j<0)return this;0===j?P.shift():function(G,W){for(;W+1<G.length;W++)G[W]=G[W+1];G.pop()}(P,j),1===P.length&&(M[T]=P[0]),void 0!==M.removeListener&&this.emit("removeListener",T,L||E)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(T){var E,P,M;if(void 0===(P=this._events))return this;if(void 0===P.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==P[T]&&(0==--this._eventsCount?this._events=Object.create(null):delete P[T]),this;if(0===arguments.length){var j,O=Object.keys(P);for(M=0;M<O.length;++M)"removeListener"!==(j=O[M])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(E=P[T]))this.removeListener(T,E);else if(void 0!==E)for(M=E.length-1;M>=0;M--)this.removeListener(T,E[M]);return this},e.prototype.listeners=function(T){return k(this,T,!0)},e.prototype.rawListeners=function(T){return k(this,T,!1)},e.listenerCount=function(T,E){return"function"==typeof T.listenerCount?T.listenerCount(E):v.call(T,E)},e.prototype.listenerCount=v,e.prototype.eventNames=function(){return this._eventsCount>0?q(this._events):[]}},{}],16:[function(J,ie,ue){"use strict";var q=J("is-callable"),l=Object.prototype.toString,F=Object.prototype.hasOwnProperty;ie.exports=function(y,e,o){if(!q(e))throw new TypeError("iterator must be a function");var u;arguments.length>=3&&(u=o),"[object Array]"===l.call(y)?function(d,b,h){for(var k=0,v=d.length;k<v;k++)F.call(d,k)&&(null==h?b(d[k],k,d):b.call(h,d[k],k,d))}(y,e,u):"string"==typeof y?function(d,b,h){for(var k=0,v=d.length;k<v;k++)null==h?b(d.charAt(k),k,d):b.call(h,d.charAt(k),k,d)}(y,e,u):function(d,b,h){for(var k in d)F.call(d,k)&&(null==h?b(d[k],k,d):b.call(h,d[k],k,d))}(y,e,u)}},{"is-callable":28}],17:[function(J,ie,ue){"use strict";var q=Array.prototype.slice,l=Object.prototype.toString;ie.exports=function(F){var y=this;if("function"!=typeof y||"[object Function]"!==l.call(y))throw new TypeError("Function.prototype.bind called on incompatible "+y);for(var e,o=q.call(arguments,1),u=Math.max(0,y.length-o.length),d=[],b=0;b<u;b++)d.push("$"+b);if(e=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof e){var k=y.apply(this,o.concat(q.call(arguments)));return Object(k)===k?k:this}return y.apply(F,o.concat(q.call(arguments)))}),y.prototype){var h=function(){};h.prototype=y.prototype,e.prototype=new h,h.prototype=null}return e}},{}],18:[function(J,ie,ue){"use strict";var q=J("./implementation");ie.exports=Function.prototype.bind||q},{"./implementation":17}],19:[function(J,ie,ue){"use strict";var q=SyntaxError,l=Function,F=TypeError,y=function(V){try{return l('"use strict"; return ('+V+").constructor;")()}catch($){}},e=Object.getOwnPropertyDescriptor;if(e)try{e({},"")}catch(V){e=null}var o=function(){throw new F},u=e?function(){try{return arguments.callee,o}catch(V){try{return e(arguments,"callee").get}catch($){return o}}}():o,d=J("has-symbols")(),b=Object.getPrototypeOf||function(V){return V.__proto__},h={},k="undefined"==typeof Uint8Array?void 0:b(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":d?b([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?b(b([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?b((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?b((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?b(""[Symbol.iterator]()):void 0,"%Symbol%":d?Symbol:void 0,"%SyntaxError%":q,"%ThrowTypeError%":u,"%TypedArray%":k,"%TypeError%":F,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=J("function-bind"),T=J("has"),E=w.call(Function.call,Array.prototype.concat),P=w.call(Function.apply,Array.prototype.splice),M=w.call(Function.call,String.prototype.replace),j=w.call(Function.call,String.prototype.slice),O=w.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G=/\\(\\)?/g,W=function(V,$){var fe,ce=V;if(T(f,ce)&&(ce="%"+(fe=f[ce])[0]+"%"),T(v,ce)){var xe=v[ce];if(xe===h&&(xe=function te(se){var ne;if("%AsyncFunction%"===se)ne=y("async function () {}");else if("%GeneratorFunction%"===se)ne=y("function* () {}");else if("%AsyncGeneratorFunction%"===se)ne=y("async function* () {}");else if("%AsyncGenerator%"===se){var ve=te("%AsyncGeneratorFunction%");ve&&(ne=ve.prototype)}else if("%AsyncIteratorPrototype%"===se){var Ce=te("%AsyncGenerator%");Ce&&(ne=b(Ce.prototype))}return v[se]=ne,ne}(ce)),void 0===xe&&!$)throw new F("intrinsic "+V+" exists, but is not available. Please file an issue!");return{alias:fe,name:ce,value:xe}}throw new q("intrinsic "+V+" does not exist!")};ie.exports=function(V,$){if("string"!=typeof V||0===V.length)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof $)throw new F('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/g,V))throw new q("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var fe=function(Ie){var qe=j(Ie,0,1),U=j(Ie,-1);if("%"===qe&&"%"!==U)throw new q("invalid intrinsic syntax, expected closing `%`");if("%"===U&&"%"!==qe)throw new q("invalid intrinsic syntax, expected opening `%`");var H=[];return M(Ie,L,function(ee,pe,Ne,ke){H[H.length]=Ne?M(ke,G,"$1"):pe||ee}),H}(V),ce=fe.length>0?fe[0]:"",xe=W("%"+ce+"%",$),te=xe.name,se=xe.value,ne=!1,ve=xe.alias;ve&&(ce=ve[0],P(fe,E([0,1],ve)));for(var Ce=1,me=!0;Ce<fe.length;Ce+=1){var de=fe[Ce],ye=j(de,0,1),Ee=j(de,-1);if(('"'===ye||"'"===ye||"`"===ye||'"'===Ee||"'"===Ee||"`"===Ee)&&ye!==Ee)throw new q("property names with quotes must have matching quotes");if("constructor"!==de&&me||(ne=!0),T(v,te="%"+(ce+="."+de)+"%"))se=v[te];else if(null!=se){if(!(de in se)){if(!$)throw new F("base intrinsic for "+V+" exists, but the property is not available.");return}if(e&&Ce+1>=fe.length){var Be=e(se,de);se=(me=!!Be)&&"get"in Be&&!("originalValue"in Be.get)?Be.get:se[de]}else me=T(se,de),se=se[de];me&&!ne&&(v[te]=se)}}return se}},{"function-bind":18,has:23,"has-symbols":20}],20:[function(J,ie,ue){"use strict";var q="undefined"!=typeof Symbol&&Symbol,l=J("./shams");ie.exports=function(){return"function"==typeof q&&"function"==typeof Symbol&&"symbol"==typeof q("foo")&&"symbol"==typeof Symbol("bar")&&l()}},{"./shams":21}],21:[function(J,ie,ue){"use strict";ie.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var q={},l=Symbol("test"),F=Object(l);if("string"==typeof l||"[object Symbol]"!==Object.prototype.toString.call(l)||"[object Symbol]"!==Object.prototype.toString.call(F))return!1;for(l in q[l]=42,q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(q).length)return!1;var y=Object.getOwnPropertySymbols(q);if(1!==y.length||y[0]!==l||!Object.prototype.propertyIsEnumerable.call(q,l))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(q,l);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],22:[function(J,ie,ue){"use strict";var q=J("has-symbols/shams");ie.exports=function(){return q()&&!!Symbol.toStringTag}},{"has-symbols/shams":21}],23:[function(J,ie,ue){"use strict";var q=J("function-bind");ie.exports=q.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":18}],24:[function(J,ie,ue){var q=J("http"),l=J("url"),F=ie.exports;for(var y in q)q.hasOwnProperty(y)&&(F[y]=q[y]);function e(o){if("string"==typeof o&&(o=l.parse(o)),o.protocol||(o.protocol="https:"),"https:"!==o.protocol)throw new Error('Protocol "'+o.protocol+'" not supported. Expected "https:"');return o}F.request=function(o,u){return o=e(o),q.request.call(this,o,u)},F.get=function(o,u){return o=e(o),q.get.call(this,o,u)}},{http:94,url:115}],25:[function(J,ie,ue){ue.read=function(q,l,F,y,e){var o,u,d=8*e-y-1,b=(1<<d)-1,h=b>>1,k=-7,v=F?e-1:0,f=F?-1:1,w=q[l+v];for(v+=f,o=w&(1<<-k)-1,w>>=-k,k+=d;k>0;o=256*o+q[l+v],v+=f,k-=8);for(u=o&(1<<-k)-1,o>>=-k,k+=y;k>0;u=256*u+q[l+v],v+=f,k-=8);if(0===o)o=1-h;else{if(o===b)return u?NaN:1/0*(w?-1:1);u+=Math.pow(2,y),o-=h}return(w?-1:1)*u*Math.pow(2,o-y)},ue.write=function(q,l,F,y,e,o){var u,d,b,h=8*o-e-1,k=(1<<h)-1,v=k>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,w=y?0:o-1,T=y?1:-1,E=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(d=isNaN(l)?1:0,u=k):(u=Math.floor(Math.log(l)/Math.LN2),l*(b=Math.pow(2,-u))<1&&(u--,b*=2),(l+=u+v>=1?f/b:f*Math.pow(2,1-v))*b>=2&&(u++,b/=2),u+v>=k?(d=0,u=k):u+v>=1?(d=(l*b-1)*Math.pow(2,e),u+=v):(d=l*Math.pow(2,v-1)*Math.pow(2,e),u=0));e>=8;q[F+w]=255&d,w+=T,d/=256,e-=8);for(u=u<<e|d,h+=e;h>0;q[F+w]=255&u,w+=T,u/=256,h-=8);q[F+w-T]|=128*E}},{}],26:[function(J,ie,ue){"function"==typeof Object.create?ie.exports=function(q,l){l&&(q.super_=l,q.prototype=Object.create(l.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}))}:ie.exports=function(q,l){if(l){q.super_=l;var F=function(){};F.prototype=l.prototype,q.prototype=new F,q.prototype.constructor=q}}},{}],27:[function(J,ie,ue){"use strict";var q=J("has-tostringtag/shams")(),l=J("call-bind/callBound")("Object.prototype.toString"),F=function(o){return!(q&&o&&"object"==typeof o&&Symbol.toStringTag in o)&&"[object Arguments]"===l(o)},y=function(o){return!!F(o)||null!==o&&"object"==typeof o&&"number"==typeof o.length&&o.length>=0&&"[object Array]"!==l(o)&&"[object Function]"===l(o.callee)},e=function(){return F(arguments)}();F.isLegacyArguments=y,ie.exports=e?F:y},{"call-bind/callBound":11,"has-tostringtag/shams":22}],28:[function(J,ie,ue){"use strict";var q,l,F=Function.prototype.toString,y="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof y&&"function"==typeof Object.defineProperty)try{q=Object.defineProperty({},"length",{get:function(){throw l}}),l={},y(function(){throw 42},null,q)}catch(h){h!==l&&(y=null)}else y=null;var e=/^\s*class\b/,o=function(h){try{var k=F.call(h);return e.test(k)}catch(v){return!1}},u=Object.prototype.toString,d="function"==typeof Symbol&&!!Symbol.toStringTag,b="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};ie.exports=y?function(h){if(h===b)return!0;if(!h||"function"!=typeof h&&"object"!=typeof h)return!1;if("function"==typeof h&&!h.prototype)return!0;try{y(h,null,q)}catch(k){if(k!==l)return!1}return!o(h)}:function(h){if(h===b)return!0;if(!h||"function"!=typeof h&&"object"!=typeof h)return!1;if("function"==typeof h&&!h.prototype)return!0;if(d)return function(v){try{return!o(v)&&(F.call(v),!0)}catch(f){return!1}}(h);if(o(h))return!1;var k=u.call(h);return"[object Function]"===k||"[object GeneratorFunction]"===k}},{}],29:[function(J,ie,ue){"use strict";var q,l=Object.prototype.toString,F=Function.prototype.toString,y=/^\s*(?:function)?\*/,e=J("has-tostringtag/shams")(),o=Object.getPrototypeOf;ie.exports=function(u){if("function"!=typeof u)return!1;if(y.test(F.call(u)))return!0;if(!e)return"[object GeneratorFunction]"===l.call(u);if(!o)return!1;if(void 0===q){var d=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch(b){}}();q=!!d&&o(d)}return o(u)===q}},{"has-tostringtag/shams":22}],30:[function(J,ie,ue){(function(q){(function(){"use strict";var l=J("for-each"),F=J("available-typed-arrays"),y=J("call-bind/callBound"),e=y("Object.prototype.toString"),o=J("has-tostringtag/shams")(),u="undefined"==typeof globalThis?q:globalThis,d=F(),b=y("Array.prototype.indexOf",!0)||function(w,T){for(var E=0;E<w.length;E+=1)if(w[E]===T)return E;return-1},h=y("String.prototype.slice"),k={},v=J("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;o&&v&&f&&l(d,function(w){var T=new u[w];if(Symbol.toStringTag in T){var E=f(T),P=v(E,Symbol.toStringTag);if(!P){var M=f(E);P=v(M,Symbol.toStringTag)}k[w]=P.get}}),ie.exports=function(w){if(!w||"object"!=typeof w)return!1;if(!o||!(Symbol.toStringTag in w)){var T=h(e(w),8,-1);return b(d,T)>-1}return!!v&&(E=w,P=!1,l(k,function(M,j){if(!P)try{P=M.call(E)===j}catch(O){}}),P);var E,P}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":11,"es-abstract/helpers/getOwnPropertyDescriptor":14,"for-each":16,"has-tostringtag/shams":22}],31:[function(J,ie,ue){"use strict";const{isArray:q,isObject:l,isString:F}=J("./types"),{asArray:y}=J("./util"),{prependBase:e}=J("./url"),o=J("./JsonLdError"),u=J("./ResolvedContext");function d(b){throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:b})}ie.exports=class{constructor({sharedCache:b}){this.perOpCache=new Map,this.sharedCache=b}async resolve({activeCtx:b,context:h,documentLoader:k,base:v,cycles:f=new Set}){h&&l(h)&&h["@context"]&&(h=h["@context"]),h=y(h);const w=[];for(const T of h){if(F(T)){let M=this._get(T);M||(M=await this._resolveRemoteContext({activeCtx:b,url:T,documentLoader:k,base:v,cycles:f})),q(M)?w.push(...M):w.push(M);continue}if(null===T){w.push(new u({document:null}));continue}l(T)||d(h);const E=JSON.stringify(T);let P=this._get(E);P||(P=new u({document:T}),this._cacheResolvedContext({key:E,resolved:P,tag:"static"})),w.push(P)}return w}_get(b){let h=this.perOpCache.get(b);if(!h){const k=this.sharedCache.get(b);k&&(h=k.get("static"))&&this.perOpCache.set(b,h)}return h}_cacheResolvedContext({key:b,resolved:h,tag:k}){if(this.perOpCache.set(b,h),void 0!==k){let v=this.sharedCache.get(b);v||(v=new Map,this.sharedCache.set(b,v)),v.set(k,h)}return h}async _resolveRemoteContext({activeCtx:b,url:h,documentLoader:k,base:v,cycles:f}){h=e(v,h);const{context:w,remoteDoc:T}=await this._fetchContext({activeCtx:b,url:h,documentLoader:k,cycles:f});!function P({context:M,base:j}){if(!M)return;const O=M["@context"];if(F(O))M["@context"]=e(j,O);else if(q(O))for(let L=0;L<O.length;++L){const G=O[L];F(G)?O[L]=e(j,G):l(G)&&P({context:{"@context":G},base:j})}else if(l(O))for(const L in O)P({context:O[L],base:j})}({context:w,base:v=T.documentUrl||h});const E=await this.resolve({activeCtx:b,context:w,documentLoader:k,base:v,cycles:f});return this._cacheResolvedContext({key:h,resolved:E,tag:T.tag}),E}async _fetchContext({activeCtx:b,url:h,documentLoader:k,cycles:v}){if(v.size>10)throw new o("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===b.processingMode?"loading remote context failed":"context overflow",max:10});if(v.has(h))throw new o("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===b.processingMode?"recursive context inclusion":"context overflow",url:h});let f,w;v.add(h);try{f=(w=await k(h)).document||null,F(f)&&(f=JSON.parse(f))}catch(T){throw new o("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:h,cause:T})}if(!l(f))throw new o("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:h});return f="@context"in f?{"@context":f["@context"]}:{"@context":{}},w.contextUrl&&(q(f["@context"])||(f["@context"]=[f["@context"]]),f["@context"].push(w.contextUrl)),{context:f,remoteDoc:w}}}},{"./JsonLdError":32,"./ResolvedContext":36,"./types":50,"./url":51,"./util":52}],32:[function(J,ie,ue){"use strict";ie.exports=class extends Error{constructor(q="An unspecified JSON-LD error occurred.",l="jsonld.Error",F={}){super(q),this.name=l,this.message=q,this.details=F}}},{}],33:[function(J,ie,ue){"use strict";ie.exports=q=>{class l{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(l,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(l.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:l}),l.compact=function(F,y){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(F,y)},l.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(F)},l.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(F)},l}},{}],34:[function(J,ie,ue){"use strict";ie.exports=J("rdf-canonize").NQuads},{"rdf-canonize":66}],35:[function(J,ie,ue){"use strict";ie.exports=class{constructor(){this._requests={}}wrapLoader(q){const l=this;return l._loader=q,function(){return l.add.apply(l,arguments)}}async add(q){let l=this._requests[q];if(l)return Promise.resolve(l);l=this._requests[q]=this._loader(q);try{return await l}finally{delete this._requests[q]}}}},{}],36:[function(J,ie,ue){"use strict";const q=J("lru-cache");ie.exports=class{constructor({document:l}){this.document=l,this.cache=new q({max:10})}getProcessed(l){return this.cache.get(l)}setProcessed(l,F){this.cache.set(l,F)}}},{"lru-cache":53}],37:[function(J,ie,ue){"use strict";const q=J("./JsonLdError"),{isArray:l,isObject:F,isString:y,isUndefined:e}=J("./types"),{isList:o,isValue:u,isGraph:d,isSimpleGraph:b,isSubjectReference:h}=J("./graphTypes"),{expandIri:k,getContextValue:v,isKeyword:f,process:w,processingMode:T}=J("./context"),{removeBase:E,prependBase:P}=J("./url"),{addValue:M,asArray:j,compareShortestLeast:O}=J("./util"),L={};function G(W,V,$){if("@nest"!==k(W,V,{vocab:!0},$))throw new q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ie.exports=L,L.compact=async({activeCtx:W,activeProperty:V=null,element:$,options:fe={},compactionMap:ce=(()=>{})})=>{if(l($)){let te=[];for(let se=0;se<$.length;++se){let ne=await L.compact({activeCtx:W,activeProperty:V,element:$[se],options:fe,compactionMap:ce});null===ne&&void 0===(ne=await ce({unmappedValue:$[se],activeCtx:W,activeProperty:V,parent:$,index:se,options:fe}))||te.push(ne)}return fe.compactArrays&&1===te.length&&0===(v(W,V,"@container")||[]).length&&(te=te[0]),te}const xe=v(W,V,"@context");if(e(xe)||(W=await w({activeCtx:W,localCtx:xe,propagate:!0,overrideProtected:!0,options:fe})),F($)){if(fe.link&&"@id"in $&&fe.link.hasOwnProperty($["@id"])){const ye=fe.link[$["@id"]];for(let Ee=0;Ee<ye.length;++Ee)if(ye[Ee].expanded===$)return ye[Ee].compacted}if(u($)||h($)){const ye=L.compactValue({activeCtx:W,activeProperty:V,value:$,options:fe});return fe.link&&h($)&&(fe.link.hasOwnProperty($["@id"])||(fe.link[$["@id"]]=[]),fe.link[$["@id"]].push({expanded:$,compacted:ye})),ye}if(o($)&&(v(W,V,"@container")||[]).includes("@list"))return L.compact({activeCtx:W,activeProperty:V,element:$["@list"],options:fe,compactionMap:ce});const te="@reverse"===V,se={},ne=W;u($)||h($)||(W=W.revertToPreviousContext());const ve=v(ne,V,"@context");e(ve)||(W=await w({activeCtx:W,localCtx:ve,propagate:!0,overrideProtected:!0,options:fe})),fe.link&&"@id"in $&&(fe.link.hasOwnProperty($["@id"])||(fe.link[$["@id"]]=[]),fe.link[$["@id"]].push({expanded:$,compacted:se}));let Ce=$["@type"]||[];Ce.length>1&&(Ce=Array.from(Ce).sort());const me=W;for(const ye of Ce){const Ee=L.compactIri({activeCtx:me,iri:ye,relativeTo:{vocab:!0}}),Be=v(ne,Ee,"@context");e(Be)||(W=await w({activeCtx:W,localCtx:Be,options:fe,propagate:!1}))}const de=Object.keys($).sort();for(const ye of de){const Ee=$[ye];if("@id"!==ye)if("@type"!==ye)if("@reverse"!==ye)if("@preserve"!==ye)if("@index"!==ye)if("@graph"!==ye&&"@list"!==ye&&"@included"!==ye&&f(ye)){const Be=L.compactIri({activeCtx:W,iri:ye,relativeTo:{vocab:!0}});M(se,Be,Ee)}else{if(!l(Ee))throw new q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Ee.length){const Be=L.compactIri({activeCtx:W,iri:ye,value:Ee,relativeTo:{vocab:!0},reverse:te}),Ie=W.mappings.has(Be)?W.mappings.get(Be)["@nest"]:null;let qe=se;Ie&&(G(W,Ie,fe),F(se[Ie])||(se[Ie]={}),qe=se[Ie]),M(qe,Be,Ee,{propertyIsArray:!0})}for(const Be of Ee){const Ie=L.compactIri({activeCtx:W,iri:ye,value:Be,relativeTo:{vocab:!0},reverse:te}),qe=W.mappings.has(Ie)?W.mappings.get(Ie)["@nest"]:null;let U=se;qe&&(G(W,qe,fe),F(se[qe])||(se[qe]={}),U=se[qe]);const H=v(W,Ie,"@container")||[],ee=d(Be),pe=o(Be);let Ne;pe?Ne=Be["@list"]:ee&&(Ne=Be["@graph"]);let ke=await L.compact({activeCtx:W,activeProperty:Ie,element:pe||ee?Ne:Be,options:fe,compactionMap:ce});if(pe){if(l(ke)||(ke=[ke]),H.includes("@list")){M(U,Ie,ke,{valueIsArray:!0,allowDuplicate:!0});continue}ke={[L.compactIri({activeCtx:W,iri:"@list",relativeTo:{vocab:!0}})]:ke},"@index"in Be&&(ke[L.compactIri({activeCtx:W,iri:"@index",relativeTo:{vocab:!0}})]=Be["@index"])}if(ee)if(H.includes("@graph")&&(H.includes("@id")||H.includes("@index")&&b(Be))){let Pe;U.hasOwnProperty(Ie)?Pe=U[Ie]:U[Ie]=Pe={};const Je=(H.includes("@id")?Be["@id"]:Be["@index"])||L.compactIri({activeCtx:W,iri:"@none",relativeTo:{vocab:!0}});M(Pe,Je,ke,{propertyIsArray:!fe.compactArrays||H.includes("@set")})}else H.includes("@graph")&&b(Be)?(l(ke)&&ke.length>1&&(ke={"@included":ke}),M(U,Ie,ke,{propertyIsArray:!fe.compactArrays||H.includes("@set")})):(l(ke)&&1===ke.length&&fe.compactArrays&&(ke=ke[0]),ke={[L.compactIri({activeCtx:W,iri:"@graph",relativeTo:{vocab:!0}})]:ke},"@id"in Be&&(ke[L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}})]=Be["@id"]),"@index"in Be&&(ke[L.compactIri({activeCtx:W,iri:"@index",relativeTo:{vocab:!0}})]=Be["@index"]),M(U,Ie,ke,{propertyIsArray:!fe.compactArrays||H.includes("@set")}));else if(H.includes("@language")||H.includes("@index")||H.includes("@id")||H.includes("@type")){let Pe,Je;if(U.hasOwnProperty(Ie)?Pe=U[Ie]:U[Ie]=Pe={},H.includes("@language"))u(ke)&&(ke=ke["@value"]),Je=Be["@language"];else if(H.includes("@index")){const Ke=v(W,Ie,"@index")||"@index",at=L.compactIri({activeCtx:W,iri:Ke,relativeTo:{vocab:!0}});if("@index"===Ke)Je=Be["@index"],delete ke[at];else{let pt;if([Je,...pt]=j(ke[Ke]||[]),y(Je))switch(pt.length){case 0:delete ke[Ke];break;case 1:ke[Ke]=pt[0];break;default:ke[Ke]=pt}else Je=null}}else if(H.includes("@id")){const Ke=L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}});Je=ke[Ke],delete ke[Ke]}else if(H.includes("@type")){const Ke=L.compactIri({activeCtx:W,iri:"@type",relativeTo:{vocab:!0}});let at;switch([Je,...at]=j(ke[Ke]||[]),at.length){case 0:delete ke[Ke];break;case 1:ke[Ke]=at[0];break;default:ke[Ke]=at}1===Object.keys(ke).length&&"@id"in Be&&(ke=await L.compact({activeCtx:W,activeProperty:Ie,element:{"@id":Be["@id"]},options:fe,compactionMap:ce}))}Je||(Je=L.compactIri({activeCtx:W,iri:"@none",relativeTo:{vocab:!0}})),M(Pe,Je,ke,{propertyIsArray:H.includes("@set")})}else{const Pe=!fe.compactArrays||H.includes("@set")||H.includes("@list")||l(ke)&&0===ke.length||"@list"===ye||"@graph"===ye;M(U,Ie,ke,{propertyIsArray:Pe})}}}else{if((v(W,V,"@container")||[]).includes("@index"))continue;const Be=L.compactIri({activeCtx:W,iri:ye,relativeTo:{vocab:!0}});M(se,Be,Ee)}else{const Be=await L.compact({activeCtx:W,activeProperty:V,element:Ee,options:fe,compactionMap:ce});l(Be)&&0===Be.length||M(se,ye,Be)}else{const Be=await L.compact({activeCtx:W,activeProperty:"@reverse",element:Ee,options:fe,compactionMap:ce});for(const Ie in Be)if(W.mappings.has(Ie)&&W.mappings.get(Ie).reverse){const qe=Be[Ie],U=(v(W,Ie,"@container")||[]).includes("@set")||!fe.compactArrays;M(se,Ie,qe,{propertyIsArray:U}),delete Be[Ie]}if(Object.keys(Be).length>0){const Ie=L.compactIri({activeCtx:W,iri:ye,relativeTo:{vocab:!0}});M(se,Ie,Be)}}else{let Be=j(Ee).map(U=>L.compactIri({activeCtx:ne,iri:U,relativeTo:{vocab:!0}}));1===Be.length&&(Be=Be[0]);const Ie=L.compactIri({activeCtx:W,iri:"@type",relativeTo:{vocab:!0}}),qe=(v(W,Ie,"@container")||[]).includes("@set")&&T(W,1.1)||l(Be)&&0===Ee.length;M(se,Ie,Be,{propertyIsArray:qe})}else{let Be=j(Ee).map(Ie=>L.compactIri({activeCtx:W,iri:Ie,relativeTo:{vocab:!1},base:fe.base}));1===Be.length&&(Be=Be[0]),se[L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}})]=Be}}return se}return $},L.compactIri=({activeCtx:W,iri:V,value:$=null,relativeTo:fe={vocab:!1},reverse:ce=!1,base:xe=null})=>{if(null===V)return V;W.isPropertyTermScoped&&W.previousContext&&(W=W.previousContext);const te=W.getInverse();if(f(V)&&V in te&&"@none"in te[V]&&"@type"in te[V]["@none"]&&"@none"in te[V]["@none"]["@type"])return te[V]["@none"]["@type"]["@none"];if(fe.vocab&&V in te){const me=W["@language"]||"@none",de=[];F($)&&"@index"in $&&!("@graph"in $)&&de.push("@index","@index@set"),F($)&&"@preserve"in $&&($=$["@preserve"][0]),d($)?("@index"in $&&de.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in $&&de.push("@graph@id","@graph@id@set"),de.push("@graph","@graph@set","@set"),"@index"in $||de.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in $||de.push("@graph@id","@graph@id@set")):F($)&&!u($)&&de.push("@id","@id@set","@type","@set@type");let ye="@language",Ee="@null";if(ce)ye="@type",Ee="@reverse",de.push("@set");else if(o($)){"@index"in $||de.push("@list");const Ie=$["@list"];if(0===Ie.length)ye="@any",Ee="@none";else{let qe=0===Ie.length?me:null,U=null;for(let H=0;H<Ie.length;++H){const ee=Ie[H];let pe="@none",Ne="@none";if(u(ee)?"@direction"in ee?pe=`${(ee["@language"]||"").toLowerCase()}_${ee["@direction"]}`:"@language"in ee?pe=ee["@language"].toLowerCase():"@type"in ee?Ne=ee["@type"]:pe="@null":Ne="@id",null===qe?qe=pe:pe!==qe&&u(ee)&&(qe="@none"),null===U?U=Ne:Ne!==U&&(U="@none"),"@none"===qe&&"@none"===U)break}qe=qe||"@none","@none"!==(U=U||"@none")?(ye="@type",Ee=U):Ee=qe}}else{if(u($))if("@language"in $&&!("@index"in $)){de.push("@language","@language@set"),Ee=$["@language"];const Ie=$["@direction"];Ie&&(Ee=`${Ee}_${Ie}`)}else"@direction"in $&&!("@index"in $)?Ee=`_${$["@direction"]}`:"@type"in $&&(ye="@type",Ee=$["@type"]);else ye="@type",Ee="@id";de.push("@set")}de.push("@none"),!F($)||"@index"in $||de.push("@index","@index@set"),u($)&&1===Object.keys($).length&&de.push("@language","@language@set");const Be=function(Ie,qe,U,H,ee,pe){null===pe&&(pe="@null");const Ne=[];if(("@id"===pe||"@reverse"===pe)&&F(U)&&"@id"in U){"@reverse"===pe&&Ne.push("@reverse");const Pe=L.compactIri({activeCtx:Ie,iri:U["@id"],relativeTo:{vocab:!0}});Ie.mappings.has(Pe)&&Ie.mappings.get(Pe)&&Ie.mappings.get(Pe)["@id"]===U["@id"]?Ne.push.apply(Ne,["@vocab","@id"]):Ne.push.apply(Ne,["@id","@vocab"])}else{Ne.push(pe);const Pe=Ne.find(Je=>Je.includes("_"));Pe&&Ne.push(Pe.replace(/^[^_]+_/,"_"))}Ne.push("@none");const ke=Ie.inverse[qe];for(const Pe of H){if(!(Pe in ke))continue;const Je=ke[Pe][ee];for(const Ke of Ne)if(Ke in Je)return Je[Ke]}return null}(W,V,$,de,ye,Ee);if(null!==Be)return Be}if(fe.vocab&&"@vocab"in W){const me=W["@vocab"];if(0===V.indexOf(me)&&V!==me){const de=V.substr(me.length);if(!W.mappings.has(de))return de}}let se=null;const ne=[];let ve=W.fastCurieMap;const Ce=V.length-1;for(let me=0;me<Ce&&V[me]in ve;++me)""in(ve=ve[V[me]])&&ne.push(ve[""][0]);for(let me=ne.length-1;me>=0;--me){const de=ne[me],ye=de.terms;for(const Ee of ye){const Be=Ee+":"+V.substr(de.iri.length);W.mappings.get(Ee)._prefix&&(!W.mappings.has(Be)||null===$&&W.mappings.get(Be)["@id"]===V)&&(null===se||O(Be,se)<0)&&(se=Be)}}if(null!==se)return se;for(const[me,de]of W.mappings)if(de&&de._prefix&&V.startsWith(me+":"))throw new q(`Absolute IRI "${V}" confused with prefix "${me}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:W});return fe.vocab?V:"@base"in W?W["@base"]?E(P(xe,W["@base"]),V):V:E(xe,V)},L.compactValue=({activeCtx:W,activeProperty:V,value:$,options:fe})=>{if(u($)){const se=v(W,V,"@type"),ne=v(W,V,"@language"),ve=v(W,V,"@direction"),Ce=v(W,V,"@container")||[],me="@index"in $&&!Ce.includes("@index");if(!me&&"@none"!==se&&($["@type"]===se||"@language"in $&&$["@language"]===ne&&"@direction"in $&&$["@direction"]===ve||"@language"in $&&$["@language"]===ne||"@direction"in $&&$["@direction"]===ve))return $["@value"];const de=Object.keys($).length,ye=1===de||2===de&&"@index"in $&&!me,Ee="@language"in W,Be=y($["@value"]),Ie=W.mappings.has(V)&&null===W.mappings.get(V)["@language"];if(ye&&"@none"!==se&&(!Ee||!Be||Ie))return $["@value"];const qe={};return me&&(qe[L.compactIri({activeCtx:W,iri:"@index",relativeTo:{vocab:!0}})]=$["@index"]),"@type"in $?qe[L.compactIri({activeCtx:W,iri:"@type",relativeTo:{vocab:!0}})]=L.compactIri({activeCtx:W,iri:$["@type"],relativeTo:{vocab:!0}}):"@language"in $&&(qe[L.compactIri({activeCtx:W,iri:"@language",relativeTo:{vocab:!0}})]=$["@language"]),"@direction"in $&&(qe[L.compactIri({activeCtx:W,iri:"@direction",relativeTo:{vocab:!0}})]=$["@direction"]),qe[L.compactIri({activeCtx:W,iri:"@value",relativeTo:{vocab:!0}})]=$["@value"],qe}const ce=k(W,V,{vocab:!0},fe),xe=v(W,V,"@type"),te=L.compactIri({activeCtx:W,iri:$["@id"],relativeTo:{vocab:"@vocab"===xe},base:fe.base});return"@id"===xe||"@vocab"===xe||"@graph"===ce?te:{[L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}})]:te}}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./types":50,"./url":51,"./util":52}],38:[function(J,ie,ue){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",l="http://www.w3.org/2001/XMLSchema#";ie.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:l,XSD_BOOLEAN:l+"boolean",XSD_DOUBLE:l+"double",XSD_INTEGER:l+"integer",XSD_STRING:l+"string"}},{}],39:[function(J,ie,ue){"use strict";const q=J("./util"),l=J("./JsonLdError"),{isArray:F,isObject:y,isString:e,isUndefined:o}=J("./types"),{isAbsolute:u,isRelative:d,prependBase:b}=J("./url"),{asArray:h,compareShortestLeast:k}=J("./util"),v=new Map,f=/^@[a-zA-Z]+$/,w={};function T(E,P,M,j,O,L){if(null===P||!e(P)||w.isKeyword(P))return P;if(P.match(f))return null;if(j&&j.hasOwnProperty(P)&&!0!==O.get(P)&&w.createTermDefinition({activeCtx:E,localCtx:j,term:P,defined:O,options:L}),(M=M||{}).vocab){const W=E.mappings.get(P);if(null===W)return null;if(y(W)&&"@id"in W)return W["@id"]}const G=P.indexOf(":");if(G>0){const W=P.substr(0,G),V=P.substr(G+1);if("_"===W||0===V.indexOf("//"))return P;j&&j.hasOwnProperty(W)&&w.createTermDefinition({activeCtx:E,localCtx:j,term:W,defined:O,options:L});const $=E.mappings.get(W);if($&&$._prefix)return $["@id"]+V;if(u(P))return P}if(M.vocab&&"@vocab"in E)return E["@vocab"]+P;if(M.base&&"@base"in E){if(E["@base"])return b(b(L.base,E["@base"]),P)}else if(M.base)return b(L.base,P);return P}ie.exports=w,w.process=async({activeCtx:E,localCtx:P,options:M,propagate:j=!0,overrideProtected:O=!1,cycles:L=new Set})=>{if(y(P)&&"@context"in P&&F(P["@context"])&&(P=P["@context"]),0===h(P).length)return E;const G=await M.contextResolver.resolve({activeCtx:E,context:P,documentLoader:M.documentLoader,base:M.base});y(G[0].document)&&"boolean"==typeof G[0].document["@propagate"]&&(j=G[0].document["@propagate"]);let W=E;j||W.previousContext||((W=W.clone()).previousContext=E);for(const V of G){let{document:$}=V;if(E=W,null===$){if(!O&&0!==Object.keys(E.protected).length){const xe=M&&M.protectedMode||"error";if("error"===xe)throw new l("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===xe){console.warn("WARNING: invalid context nullification");const te=V.getProcessed(E);if(te){W=E=te;continue}const se=E;W=E=w.getInitialContext(M).clone();for(const[ne,ve]of Object.entries(se.protected))ve&&(E.mappings[ne]=q.clone(se.mappings[ne]));E.protected=q.clone(se.protected),V.setProcessed(se,W);continue}throw new l("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,protectedMode:xe})}W=E=w.getInitialContext(M).clone();continue}const fe=V.getProcessed(E);if(fe){W=E=fe;continue}if(y($)&&"@context"in $&&($=$["@context"]),!y($))throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:$});W=W.clone();const ce=new Map;if("@version"in $){if(1.1!==$["@version"])throw new l("Unsupported JSON-LD version: "+$["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:$});if(E.processingMode&&"json-ld-1.0"===E.processingMode)throw new l("@version: "+$["@version"]+" not compatible with "+E.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:$});W.processingMode="json-ld-1.1",W["@version"]=$["@version"],ce.set("@version",!0)}if(W.processingMode=W.processingMode||E.processingMode,"@base"in $){let xe=$["@base"];if(null!==xe&&!u(xe)){if(!d(xe))throw new l('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:$});xe=b(W["@base"],xe)}W["@base"]=xe,ce.set("@base",!0)}if("@vocab"in $){const xe=$["@vocab"];if(null===xe)delete W["@vocab"];else{if(!e(xe))throw new l('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:$});if(!u(xe)&&w.processingMode(W,1))throw new l('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:$});W["@vocab"]=T(W,xe,{vocab:!0,base:!0},void 0,void 0,M)}ce.set("@vocab",!0)}if("@language"in $){const xe=$["@language"];if(null===xe)delete W["@language"];else{if(!e(xe))throw new l('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:$});W["@language"]=xe.toLowerCase()}ce.set("@language",!0)}if("@direction"in $){const xe=$["@direction"];if("json-ld-1.0"===E.processingMode)throw new l("Invalid JSON-LD syntax; @direction not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:$});if(null===xe)delete W["@direction"];else{if("ltr"!==xe&&"rtl"!==xe)throw new l('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:$});W["@direction"]=xe}ce.set("@direction",!0)}if("@propagate"in $){const xe=$["@propagate"];if("json-ld-1.0"===E.processingMode)throw new l("Invalid JSON-LD syntax; @propagate not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:$});if("boolean"!=typeof xe)throw new l("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:P});ce.set("@propagate",!0)}if("@import"in $){const xe=$["@import"];if("json-ld-1.0"===E.processingMode)throw new l("Invalid JSON-LD syntax; @import not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:$});if(!e(xe))throw new l("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:P});const te=await M.contextResolver.resolve({activeCtx:E,context:xe,documentLoader:M.documentLoader,base:M.base});if(1!==te.length)throw new l("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:P});const se=te[0].getProcessed(E);if(se)$=se;else{const ne=te[0].document;if("@import"in ne)throw new l("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:P});for(const ve in ne)$.hasOwnProperty(ve)||($[ve]=ne[ve]);te[0].setProcessed(E,$)}ce.set("@import",!0)}ce.set("@protected",$["@protected"]||!1);for(const xe in $)if(w.createTermDefinition({activeCtx:W,localCtx:$,term:xe,defined:ce,options:M,overrideProtected:O}),y($[xe])&&"@context"in $[xe]){const te=$[xe]["@context"];let se=!0;if(e(te)){const ne=b(M.base,te);L.has(ne)?se=!1:L.add(ne)}if(se)try{await w.process({activeCtx:W.clone(),localCtx:$[xe]["@context"],overrideProtected:!0,options:M,cycles:L})}catch(ne){throw new l("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:$[xe]["@context"],term:xe})}}V.setProcessed(E,W)}return W},w.createTermDefinition=({activeCtx:E,localCtx:P,term:M,defined:j,options:O,overrideProtected:L=!1})=>{if(j.has(M)){if(j.get(M))return;throw new l("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:P,term:M})}let G;if(j.set(M,!1),P.hasOwnProperty(M)&&(G=P[M]),"@type"===M&&y(G)&&"@set"===(G["@container"]||"@set")&&w.processingMode(E,1.1)){const te=["@container","@id","@protected"],se=Object.keys(G);if(0===se.length||se.some(ne=>!te.includes(ne)))throw new l("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:M})}else{if(w.isKeyword(M))throw new l("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:M});if(M.match(f))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:M});if(""===M)throw new l("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:P})}const W=E.mappings.get(M);E.mappings.has(M)&&E.mappings.delete(M);let V=!1;if((e(G)||null===G)&&(V=!0,G={"@id":G}),!y(G))throw new l("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:P});const $={};E.mappings.set(M,$),$.reverse=!1;const fe=["@container","@id","@language","@reverse","@type"];w.processingMode(E,1.1)&&fe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const te in G)if(!fe.includes(te))throw new l("Invalid JSON-LD syntax; a term definition must not contain "+te,"jsonld.SyntaxError",{code:"invalid term definition",context:P});const ce=M.indexOf(":");if($._termHasColon=ce>0,"@reverse"in G){if("@id"in G)throw new l("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});if("@nest"in G)throw new l("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});const te=G["@reverse"];if(!e(te))throw new l("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(!w.isKeyword(te)&&te.match(f))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:te}),void(W?E.mappings.set(M,W):E.mappings.delete(M));const se=T(E,te,{vocab:!0,base:!1},P,j,O);if(!u(se))throw new l("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});$["@id"]=se,$.reverse=!0}else if("@id"in G){let te=G["@id"];if(te&&!e(te))throw new l("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(null===te)$["@id"]=null;else{if(!w.isKeyword(te)&&te.match(f))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:te}),void(W?E.mappings.set(M,W):E.mappings.delete(M));if(te!==M){if(te=T(E,te,{vocab:!0,base:!1},P,j,O),!u(te)&&!w.isKeyword(te))throw new l("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(M.match(/(?::[^:])|\//)&&T(E,M,{vocab:!0,base:!1},P,new Map(j).set(M,!0),O)!==te)throw new l("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});$["@id"]=te,$._prefix=V&&!$._termHasColon&&te.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in $))if($._termHasColon){const te=M.substr(0,ce);if(P.hasOwnProperty(te)&&w.createTermDefinition({activeCtx:E,localCtx:P,term:te,defined:j,options:O}),E.mappings.has(te)){const se=M.substr(ce+1);$["@id"]=E.mappings.get(te)["@id"]+se}else $["@id"]=M}else if("@type"===M)$["@id"]=M;else{if(!("@vocab"in E))throw new l("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P,term:M});$["@id"]=E["@vocab"]+M}if((!0===G["@protected"]||!0===j.get("@protected")&&!1!==G["@protected"])&&(E.protected[M]=!0,$.protected=!0),j.set(M,!0),"@type"in G){let te=G["@type"];if(!e(te))throw new l("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if("@json"===te||"@none"===te){if(w.processingMode(E,1))throw new l(`Invalid JSON-LD syntax; an @context @type value must not be "${te}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else if("@id"!==te&&"@vocab"!==te){if(te=T(E,te,{vocab:!0,base:!1},P,j,O),!u(te))throw new l("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if(0===te.indexOf("_:"))throw new l("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}$["@type"]=te}if("@container"in G){const te=e(G["@container"])?[G["@container"]]:G["@container"]||[],se=["@list","@set","@index","@language"];let ne=!0;const ve=te.includes("@set");if(w.processingMode(E,1.1)){if(se.push("@graph","@id","@type"),te.includes("@list")){if(1!==te.length)throw new l("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else if(te.includes("@graph")){if(te.some(Ce=>"@graph"!==Ce&&"@id"!==Ce&&"@index"!==Ce&&"@set"!==Ce))throw new l("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else ne&=te.length<=(ve?2:1);if(te.includes("@type")&&($["@type"]=$["@type"]||"@id",!["@id","@vocab"].includes($["@type"])))throw new l("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else ne&=!F(G["@container"]),ne&=te.length<=1;if(ne&=te.every(Ce=>se.includes(Ce)),!(ne&=!(ve&&te.includes("@list"))))throw new l("Invalid JSON-LD syntax; @context @container value must be one of the following: "+se.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:P});if($.reverse&&!te.every(Ce=>["@index","@set"].includes(Ce)))throw new l("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});$["@container"]=te}if("@index"in G){if(!("@container"in G)||!$["@container"].includes("@index"))throw new l(`Invalid JSON-LD syntax; @index without @index in @container: "${G["@index"]}" on term "${M}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});if(!e(G["@index"])||0===G["@index"].indexOf("@"))throw new l(`Invalid JSON-LD syntax; @index must expand to an IRI: "${G["@index"]}" on term "${M}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});$["@index"]=G["@index"]}if("@context"in G&&($["@context"]=G["@context"]),"@language"in G&&!("@type"in G)){let te=G["@language"];if(null!==te&&!e(te))throw new l("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:P});null!==te&&(te=te.toLowerCase()),$["@language"]=te}if("@prefix"in G){if(M.match(/:|\//))throw new l("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:P});if(w.isKeyword($["@id"]))throw new l("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:P});if("boolean"!=typeof G["@prefix"])throw new l("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:P});$._prefix=!0===G["@prefix"]}if("@direction"in G){const te=G["@direction"];if(null!==te&&"ltr"!==te&&"rtl"!==te)throw new l('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:P});$["@direction"]=te}if("@nest"in G){const te=G["@nest"];if(!e(te)||"@nest"!==te&&0===te.indexOf("@"))throw new l("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:P});$["@nest"]=te}const xe=$["@id"];if("@context"===xe||"@preserve"===xe)throw new l("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:P});if(W&&W.protected&&!L&&(E.protected[M]=!0,$.protected=!0,!function te(se,ne){if(!se||"object"!=typeof se||!ne||"object"!=typeof ne)return se===ne;const ve=Array.isArray(se);if(ve!==Array.isArray(ne))return!1;if(ve){if(se.length!==ne.length)return!1;for(let de=0;de<se.length;++de)if(!te(se[de],ne[de]))return!1;return!0}const Ce=Object.keys(se),me=Object.keys(ne);if(Ce.length!==me.length)return!1;for(const de in se){let ye=se[de],Ee=ne[de];if("@container"===de&&Array.isArray(ye)&&Array.isArray(Ee)&&(ye=ye.slice().sort(),Ee=Ee.slice().sort()),!te(ye,Ee))return!1}return!0}(W,$))){const te=O&&O.protectedMode||"error";if("error"===te)throw new l(`Invalid JSON-LD syntax; tried to redefine "${M}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:P,term:M});if("warn"===te)return void console.warn("WARNING: protected term redefinition",{term:M});throw new l("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,term:M,protectedMode:te})}},w.expandIri=(E,P,M,j)=>T(E,P,M,void 0,void 0,j),w.getInitialContext=E=>{const P=JSON.stringify({processingMode:E.processingMode}),M=v.get(P);if(M)return M;const j={processingMode:E.processingMode,mappings:new Map,inverse:null,getInverse:function(){const G=this;if(G.inverse)return G.inverse;const W=G.inverse={},V=G.fastCurieMap={},$={},fe=(G["@language"]||"@none").toLowerCase(),ce=G["@direction"],xe=G.mappings,te=[...xe.keys()].sort(k);for(const se of te){const ne=xe.get(se);if(null===ne)continue;let ve=ne["@container"]||"@none";if(ve=[].concat(ve).sort().join(""),null===ne["@id"])continue;const Ce=h(ne["@id"]);for(const me of Ce){let de=W[me];const ye=w.isKeyword(me);if(de)ye||ne._termHasColon||$[me].push(se);else if(W[me]=de={},!ye&&!ne._termHasColon){$[me]=[se];const Ee={iri:me,terms:$[me]};me[0]in V?V[me[0]].push(Ee):V[me[0]]=[Ee]}if(de[ve]||(de[ve]={"@language":{},"@type":{},"@any":{}}),de=de[ve],L(se,de["@any"],"@none"),ne.reverse)L(se,de["@type"],"@reverse");else if("@none"===ne["@type"])L(se,de["@any"],"@none"),L(se,de["@language"],"@none"),L(se,de["@type"],"@none");else if("@type"in ne)L(se,de["@type"],ne["@type"]);else if("@language"in ne&&"@direction"in ne){const Ee=ne["@language"],Be=ne["@direction"];L(se,de["@language"],Ee&&Be?`${Ee}_${Be}`.toLowerCase():Ee?Ee.toLowerCase():Be?`_${Be}`:"@null")}else"@language"in ne?L(se,de["@language"],(ne["@language"]||"@null").toLowerCase()):"@direction"in ne?ne["@direction"]?L(se,de["@language"],`_${ne["@direction"]}`):L(se,de["@language"],"@none"):ce?(L(se,de["@language"],`_${ce}`),L(se,de["@language"],"@none"),L(se,de["@type"],"@none")):(L(se,de["@language"],fe),L(se,de["@language"],"@none"),L(se,de["@type"],"@none"))}}for(const se in V)O(V,se,1);return W},clone:function(){const G={};return G.mappings=q.clone(this.mappings),G.clone=this.clone,G.inverse=null,G.getInverse=this.getInverse,G.protected=q.clone(this.protected),this.previousContext&&(G.previousContext=this.previousContext.clone()),G.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(G["@base"]=this["@base"]),"@language"in this&&(G["@language"]=this["@language"]),"@vocab"in this&&(G["@vocab"]=this["@vocab"]),G},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===v.size&&v.clear(),v.set(P,j),j;function O(G,W,V){const $=G[W],fe=G[W]={};let ce,xe;for(const te of $)(xe=V>=(ce=te.iri).length?"":ce[V])in fe?fe[xe].push(te):fe[xe]=[te];for(const te in fe)""!==te&&O(fe,te,V+1)}function L(G,W,V){W.hasOwnProperty(V)||(W[V]=G)}},w.getContextValue=(E,P,M)=>{if(null===P)return"@context"===M?void 0:null;if(E.mappings.has(P)){const j=E.mappings.get(P);if(o(M))return j;if(j.hasOwnProperty(M))return j[M]}return"@language"===M&&M in E||"@direction"===M&&M in E?E[M]:"@context"!==M?null:void 0},w.processingMode=(E,P)=>P.toString()>="1.1"?!E.processingMode||E.processingMode>="json-ld-"+P.toString():"json-ld-1.0"===E.processingMode,w.isKeyword=E=>{if(!e(E)||"@"!==E[0])return!1;switch(E){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":32,"./types":50,"./url":51,"./util":52}],40:[function(J,ie,ue){"use strict";const{parseLinkHeader:q,buildHeaders:l}=J("../util"),{LINK_HEADER_CONTEXT:F}=J("../constants"),y=J("../JsonLdError"),e=J("../RequestQueue"),{prependBase:o}=J("../url"),u=/(^|(\r\n))link:/i;ie.exports=({secure:d,headers:b={},xhr:h}={headers:{}})=>(b=l(b),(new e).wrapLoader(async function k(v){if(0!==v.indexOf("http:")&&0!==v.indexOf("https:"))throw new y('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:v});if(d&&0!==v.indexOf("https"))throw new y('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:v});let f;try{f=await function(M,j,O){const L=new(M=M||XMLHttpRequest);return new Promise((G,W)=>{L.onload=()=>G(L),L.onerror=V=>W(V),L.open("GET",j,!0);for(const V in O)L.setRequestHeader(V,O[V]);L.send()})}(h,v,b)}catch(M){throw new y("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:v,cause:M})}if(f.status>=400)throw new y("URL could not be dereferenced: "+f.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:v,httpStatusCode:f.status});let w={contextUrl:null,documentUrl:v,document:f.response},T=null;const E=f.getResponseHeader("Content-Type");let P;if(u.test(f.getAllResponseHeaders())&&(P=f.getResponseHeader("Link")),P&&"application/ld+json"!==E){const M=q(P),j=M[F];if(Array.isArray(j))throw new y("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:v});j&&(w.contextUrl=j.target),(T=M.alternate)&&"application/ld+json"==T.type&&!(E||"").match(/^application\/(\w*\+)?json$/)&&(w=await k(o(v,T.target)))}return w}))},{"../JsonLdError":32,"../RequestQueue":35,"../constants":38,"../url":51,"../util":52}],41:[function(J,ie,ue){"use strict";const q=J("./JsonLdError"),{isArray:l,isObject:F,isEmptyObject:y,isString:e,isUndefined:o}=J("./types"),{isList:u,isValue:d,isGraph:b,isSubject:h}=J("./graphTypes"),{expandIri:k,getContextValue:v,isKeyword:f,process:w,processingMode:T}=J("./context"),{isAbsolute:E}=J("./url"),{addValue:P,asArray:M,getValues:j,validateTypeValue:O}=J("./util"),L={};ie.exports=L;const G=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function W({activeCtx:fe,activeProperty:ce,value:xe,options:te}){if(null==xe)return null;const se=k(fe,ce,{vocab:!0},te);if("@id"===se)return k(fe,xe,{base:!0},te);if("@type"===se)return k(fe,xe,{vocab:!0,base:!0},te);const ne=v(fe,ce,"@type");if(("@id"===ne||"@graph"===se)&&e(xe))return{"@id":k(fe,xe,{base:!0},te)};if("@vocab"===ne&&e(xe))return{"@id":k(fe,xe,{vocab:!0,base:!0},te)};if(f(se))return xe;const ve={};if(ne&&!["@id","@vocab","@none"].includes(ne))ve["@type"]=ne;else if(e(xe)){const Ce=v(fe,ce,"@language");null!==Ce&&(ve["@language"]=Ce);const me=v(fe,ce,"@direction");null!==me&&(ve["@direction"]=me)}return["boolean","number","string"].includes(typeof xe)||(xe=xe.toString()),ve["@value"]=xe,ve}function V(fe,ce,xe,te){const se=[],ne=Object.keys(ce).sort();for(const ve of ne){const Ce=k(fe,ve,{vocab:!0},te);let me=ce[ve];l(me)||(me=[me]);for(const de of me){if(null===de)continue;if(!e(de))throw new q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ce});const ye={"@value":de};"@none"!==Ce&&(ye["@language"]=ve.toLowerCase()),xe&&(ye["@direction"]=xe),se.push(ye)}}return se}async function $({activeCtx:fe,options:ce,activeProperty:xe,value:te,expansionMap:se,asGraph:ne,indexKey:ve,propertyIndex:Ce}){const me=[],de=Object.keys(te).sort(),ye="@type"===ve;for(let Ee of de){if(ye){const qe=v(fe,Ee,"@context");o(qe)||(fe=await w({activeCtx:fe,localCtx:qe,propagate:!1,options:ce}))}let Be,Ie=te[Ee];l(Ie)||(Ie=[Ie]),Ie=await L.expand({activeCtx:fe,activeProperty:xe,element:Ie,options:ce,insideList:!1,insideIndex:!0,expansionMap:se}),Be=Ce?"@none"===Ee?"@none":W({activeCtx:fe,activeProperty:ve,value:Ee,options:ce}):k(fe,Ee,{vocab:!0},ce),"@id"===ve?Ee=k(fe,Ee,{base:!0},ce):ye&&(Ee=Be);for(let qe of Ie){if(ne&&!b(qe)&&(qe={"@graph":[qe]}),"@type"===ve)"@none"===Be||(qe["@type"]?qe["@type"]=[Ee].concat(qe["@type"]):qe["@type"]=[Ee]);else{if(d(qe)&&!["@language","@type","@index"].includes(ve))throw new q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${ve}".`,"jsonld.SyntaxError",{code:"invalid value object",value:qe});Ce?"@none"!==Be&&P(qe,Ce,Be,{propertyIsArray:!0,prependValue:!0}):"@none"===Be||ve in qe||(qe[ve]=Ee)}me.push(qe)}}return me}L.expand=async({activeCtx:fe,activeProperty:ce=null,element:xe,options:te={},insideList:se=!1,insideIndex:ne=!1,typeScopedContext:ve=null,expansionMap:Ce=(()=>{})})=>{if(null==xe)return null;if("@default"===ce&&(te=Object.assign({},te,{isFrame:!1})),!l(xe)&&!F(xe)){if(!se&&(null===ce||"@graph"===k(fe,ce,{vocab:!0},te))){const U=await Ce({unmappedValue:xe,activeCtx:fe,activeProperty:ce,options:te,insideList:se});return void 0===U?null:U}return W({activeCtx:fe,activeProperty:ce,value:xe,options:te})}if(l(xe)){let U=[];const H=v(fe,ce,"@container")||[];se=se||H.includes("@list");for(let ee=0;ee<xe.length;++ee){let pe=await L.expand({activeCtx:fe,activeProperty:ce,element:xe[ee],options:te,expansionMap:Ce,insideIndex:ne,typeScopedContext:ve});se&&l(pe)&&(pe={"@list":pe}),null===pe&&void 0===(pe=await Ce({unmappedValue:xe[ee],activeCtx:fe,activeProperty:ce,parent:xe,index:ee,options:te,expandedParent:U,insideList:se}))||(l(pe)?U=U.concat(pe):U.push(pe))}return U}const me=k(fe,ce,{vocab:!0},te),de=v(fe,ce,"@context");ve=ve||(fe.previousContext?fe:null);let ye=Object.keys(xe).sort(),Ee=!ne;if(Ee&&ve&&ye.length<=2&&!ye.includes("@context"))for(const U of ye){const H=k(ve,U,{vocab:!0},te);if("@value"===H){Ee=!1,fe=ve;break}if("@id"===H&&1===ye.length){Ee=!1;break}}Ee&&(fe=fe.revertToPreviousContext()),o(de)||(fe=await w({activeCtx:fe,localCtx:de,propagate:!0,overrideProtected:!0,options:te})),"@context"in xe&&(fe=await w({activeCtx:fe,localCtx:xe["@context"],options:te})),ve=fe;let Be=null;for(const U of ye)if("@type"===k(fe,U,{vocab:!0},te)){Be=Be||U;const H=xe[U],ee=Array.isArray(H)?H.length>1?H.slice().sort():H:[H];for(const pe of ee){const Ne=v(ve,pe,"@context");o(Ne)||(fe=await w({activeCtx:fe,localCtx:Ne,options:te,propagate:!1}))}}let Ie={};await async function U({activeCtx:H,activeProperty:ee,expandedActiveProperty:pe,element:Ne,expandedParent:ke,options:Pe={},insideList:Je,typeKey:Ke,typeScopedContext:at,expansionMap:pt}){const Wt=Object.keys(Ne).sort(),zt=[];let Te;const De=Ne[Ke]&&"@json"===k(H,l(Ne[Ke])?Ne[Ke][0]:Ne[Ke],{vocab:!0},Pe);for(const Re of Wt){let K,oe=Ne[Re];if("@context"===Re)continue;let he=k(H,Re,{vocab:!0},Pe);if((null===he||!E(he)&&!f(he))&&void 0===(he=pt({unmappedProperty:Re,activeCtx:H,activeProperty:ee,parent:Ne,options:Pe,insideList:Je,value:oe,expandedParent:ke})))continue;if(f(he)){if("@reverse"===pe)throw new q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:oe});if(he in ke&&"@included"!==he&&"@type"!==he)throw new q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:he})}if("@id"===he){if(!e(oe)){if(!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:oe});if(F(oe)){if(!y(oe))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:oe})}else{if(!l(oe))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:oe});if(!oe.every(_e=>e(_e)))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:oe})}}P(ke,"@id",M(oe).map(_e=>e(_e)?k(H,_e,{base:!0},Pe):_e),{propertyIsArray:Pe.isFrame});continue}if("@type"===he){F(oe)&&(oe=Object.fromEntries(Object.entries(oe).map(([_e,je])=>[k(at,_e,{vocab:!0}),M(je).map(He=>k(at,He,{base:!0,vocab:!0}))]))),O(oe,Pe.isFrame),P(ke,"@type",M(oe).map(_e=>e(_e)?k(at,_e,{base:!0,vocab:!0},Pe):_e),{propertyIsArray:Pe.isFrame});continue}if("@included"===he&&T(H,1.1)){const _e=M(await L.expand({activeCtx:H,activeProperty:ee,element:oe,options:Pe,expansionMap:pt}));if(!_e.every(je=>h(je)))throw new q("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:oe});P(ke,"@included",_e,{propertyIsArray:!0});continue}if("@graph"===he&&!F(oe)&&!l(oe))throw new q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:oe});if("@value"===he){Te=oe,De&&T(H,1.1)?ke["@value"]=oe:P(ke,"@value",oe,{propertyIsArray:Pe.isFrame});continue}if("@language"===he){if(null===oe)continue;if(!e(oe)&&!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:oe});oe=M(oe).map(_e=>e(_e)?_e.toLowerCase():_e);for(const _e of oe)e(_e)&&!_e.match(G)&&console.warn(`@language must be valid BCP47: ${_e}`);P(ke,"@language",oe,{propertyIsArray:Pe.isFrame});continue}if("@direction"===he){if(!e(oe)&&!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:oe});oe=M(oe);for(const _e of oe)if(e(_e)&&"ltr"!==_e&&"rtl"!==_e)throw new q('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:oe});P(ke,"@direction",oe,{propertyIsArray:Pe.isFrame});continue}if("@index"===he){if(!e(oe))throw new q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:oe});P(ke,"@index",oe);continue}if("@reverse"===he){if(!F(oe))throw new q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:oe});if("@reverse"in(K=await L.expand({activeCtx:H,activeProperty:"@reverse",element:oe,options:Pe,expansionMap:pt})))for(const je in K["@reverse"])P(ke,je,K["@reverse"][je],{propertyIsArray:!0});let _e=ke["@reverse"]||null;for(const je in K){if("@reverse"===je)continue;null===_e&&(_e=ke["@reverse"]={}),P(_e,je,[],{propertyIsArray:!0});const He=K[je];for(let Ze=0;Ze<He.length;++Ze){const rt=He[Ze];if(d(rt)||u(rt))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:K});P(_e,je,rt,{propertyIsArray:!0})}}continue}if("@nest"===he){zt.push(Re);continue}let be=H;const Le=v(H,Re,"@context");o(Le)||(be=await w({activeCtx:H,localCtx:Le,propagate:!0,overrideProtected:!0,options:Pe}));const Se=v(be,Re,"@container")||[];if(Se.includes("@language")&&F(oe)){K=V(be,oe,v(be,Re,"@direction"),Pe)}else if(Se.includes("@index")&&F(oe)){const _e=Se.includes("@graph"),je=v(be,Re,"@index")||"@index",He="@index"!==je&&k(H,je,{vocab:!0},Pe);K=await $({activeCtx:be,options:Pe,activeProperty:Re,value:oe,expansionMap:pt,asGraph:_e,indexKey:je,propertyIndex:He})}else if(Se.includes("@id")&&F(oe)){const _e=Se.includes("@graph");K=await $({activeCtx:be,options:Pe,activeProperty:Re,value:oe,expansionMap:pt,asGraph:_e,indexKey:"@id"})}else if(Se.includes("@type")&&F(oe))K=await $({activeCtx:be.revertToPreviousContext(),options:Pe,activeProperty:Re,value:oe,expansionMap:pt,asGraph:!1,indexKey:"@type"});else{const _e="@list"===he;if(_e||"@set"===he){let je=ee;_e&&"@graph"===pe&&(je=null),K=await L.expand({activeCtx:be,activeProperty:je,element:oe,options:Pe,insideList:_e,expansionMap:pt})}else K="@json"===v(H,Re,"@type")?{"@type":"@json","@value":oe}:await L.expand({activeCtx:be,activeProperty:Re,element:oe,options:Pe,insideList:!1,expansionMap:pt})}if(null!==K||"@value"===he||void 0!==(K=pt({unmappedValue:oe,expandedProperty:he,activeCtx:be,activeProperty:ee,parent:Ne,options:Pe,insideList:Je,key:Re,expandedParent:ke})))if("@list"!==he&&!u(K)&&Se.includes("@list")&&(K={"@list":M(K)}),Se.includes("@graph")&&!Se.some(_e=>"@id"===_e||"@index"===_e)&&(K=M(K).map(_e=>({"@graph":M(_e)}))),be.mappings.has(Re)&&be.mappings.get(Re).reverse){const _e=ke["@reverse"]=ke["@reverse"]||{};K=M(K);for(let je=0;je<K.length;++je){const He=K[je];if(d(He)||u(He))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:K});P(_e,he,He,{propertyIsArray:!0})}}else P(ke,he,K,{propertyIsArray:!0})}if("@value"in ke&&("@json"!==ke["@type"]||!T(H,1.1))&&(F(Te)||l(Te))&&!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Te});for(const Re of zt){const K=l(Ne[Re])?Ne[Re]:[Ne[Re]];for(const oe of K){if(!F(oe)||Object.keys(oe).some(he=>"@value"===k(H,he,{vocab:!0},Pe)))throw new q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:oe});await U({activeCtx:H,activeProperty:ee,expandedActiveProperty:pe,element:oe,expandedParent:ke,options:Pe,insideList:Je,typeScopedContext:at,typeKey:Ke,expansionMap:pt})}}}({activeCtx:fe,activeProperty:ce,expandedActiveProperty:me,element:xe,expandedParent:Ie,options:te,insideList:se,typeKey:Be,typeScopedContext:ve,expansionMap:Ce});let qe=(ye=Object.keys(Ie)).length;if("@value"in Ie){if("@type"in Ie&&("@language"in Ie||"@direction"in Ie))throw new q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ie});let U=qe-1;if("@type"in Ie&&(U-=1),"@index"in Ie&&(U-=1),"@language"in Ie&&(U-=1),"@direction"in Ie&&(U-=1),0!==U)throw new q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ie});const H=null===Ie["@value"]?[]:M(Ie["@value"]),ee=j(Ie,"@type");if(!T(fe,1.1)||!ee.includes("@json")||1!==ee.length)if(0===H.length){const pe=await Ce({unmappedValue:Ie,activeCtx:fe,activeProperty:ce,element:xe,options:te,insideList:se});Ie=void 0!==pe?pe:null}else{if(!H.every(pe=>e(pe)||y(pe))&&"@language"in Ie)throw new q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Ie});if(!ee.every(pe=>E(pe)&&!(e(pe)&&0===pe.indexOf("_:"))||y(pe)))throw new q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Ie})}}else if("@type"in Ie&&!l(Ie["@type"]))Ie["@type"]=[Ie["@type"]];else if("@set"in Ie||"@list"in Ie){if(qe>1&&(2!==qe||!("@index"in Ie)))throw new q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Ie});"@set"in Ie&&(Ie=Ie["@set"],qe=(ye=Object.keys(Ie)).length)}else if(1===qe&&"@language"in Ie){const U=await Ce(Ie,{unmappedValue:Ie,activeCtx:fe,activeProperty:ce,element:xe,options:te,insideList:se});Ie=void 0!==U?U:null}if(F(Ie)&&!te.keepFreeFloatingNodes&&!se&&(null===ce||"@graph"===me)&&(0===qe||"@value"in Ie||"@list"in Ie||1===qe&&"@id"in Ie)){const U=await Ce({unmappedValue:Ie,activeCtx:fe,activeProperty:ce,element:xe,options:te,insideList:se});Ie=void 0!==U?U:null}return Ie}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./types":50,"./url":51,"./util":52}],42:[function(J,ie,ue){"use strict";const{isSubjectReference:q}=J("./graphTypes"),{createMergedNodeMap:l}=J("./nodeMap"),F={};ie.exports=F,F.flatten=y=>{const e=l(y),o=[],u=Object.keys(e).sort();for(let d=0;d<u.length;++d){const b=e[u[d]];q(b)||o.push(b)}return o}},{"./graphTypes":45,"./nodeMap":47}],43:[function(J,ie,ue){"use strict";const{isKeyword:q}=J("./context"),l=J("./graphTypes"),F=J("./types"),y=J("./util"),e=J("./url"),o=J("./JsonLdError"),{createNodeMap:u,mergeNodeMapGraphs:d}=J("./nodeMap"),b={};function h(j){const O={};for(const L in j)void 0!==j[L]&&(O["@"+L]=[j[L]]);return[O]}function k(j,O,L){for(let G=L.length-1;G>=0;--G){const W=L[G];if(W.graph===O&&W.subject["@id"]===j["@id"])return!0}return!1}function v(j,O,L){const G="@"+L;let W=G in j?j[G][0]:O[L];if("embed"===L)if(!0===W)W="@once";else if(!1===W)W="@never";else if("@always"!==W&&"@never"!==W&&"@link"!==W&&"@first"!==W&&"@last"!==W&&"@once"!==W)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:j});return W}function f(j){if(!F.isArray(j)||1!==j.length||!F.isObject(j[0]))throw new o("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:j});if("@id"in j[0])for(const O of y.asArray(j[0]["@id"]))if(!F.isObject(O)&&!e.isAbsolute(O)||F.isString(O)&&0===O.indexOf("_:"))throw new o("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:j});if("@type"in j[0])for(const O of y.asArray(j[0]["@type"]))if(!F.isObject(O)&&!e.isAbsolute(O)||F.isString(O)&&0===O.indexOf("_:"))throw new o("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:j})}function w(j,O,L,G){let W=!0,V=!1;for(const $ in L){let fe=!1;const ce=y.getValues(O,$),xe=0===y.getValues(L,$).length;if("@id"===$){if(F.isEmptyObject(L["@id"][0]||{})?fe=!0:L["@id"].length>=0&&(fe=L["@id"].includes(ce[0])),!G.requireAll)return fe}else if("@type"===$){if(W=!1,xe){if(ce.length>0)return!1;fe=!0}else if(1===L["@type"].length&&F.isEmptyObject(L["@type"][0]))fe=ce.length>0;else for(const te of L["@type"])fe=!(!F.isObject(te)||!("@default"in te))||fe||ce.some(se=>se===te);if(!G.requireAll)return fe}else{if(q($))continue;{const te=y.getValues(L,$)[0];let se=!1;if(te&&(f([te]),se="@default"in te),W=!1,0===ce.length&&se)continue;if(ce.length>0&&xe)return!1;if(void 0===te){if(ce.length>0)return!1;fe=!0}else if(l.isList(te)){const ne=te["@list"][0];if(l.isList(ce[0])){const ve=ce[0]["@list"];l.isValue(ne)?fe=ve.some(Ce=>M(ne,Ce)):(l.isSubject(ne)||l.isSubjectReference(ne))&&(fe=ve.some(Ce=>P(j,ne,Ce,G)))}}else fe=l.isValue(te)?ce.some(ne=>M(te,ne)):l.isSubjectReference(te)?ce.some(ne=>P(j,te,ne,G)):!!F.isObject(te)&&ce.length>0}}if(!fe&&G.requireAll)return!1;V=V||fe}return W||V}function T(j,O){const L=j.uniqueEmbeds[j.graph],G=L[O],W=G.parent,V=G.property,$={"@id":O};if(F.isArray(W)){for(let ce=0;ce<W.length;++ce)if(y.compareValues(W[ce],$)){W[ce]=$;break}}else{const ce=F.isArray(W[V]);y.removeValue(W,V,$,{propertyIsArray:ce}),y.addValue(W,V,$,{propertyIsArray:ce})}const fe=ce=>{const xe=Object.keys(L);for(const te of xe)te in L&&F.isObject(L[te].parent)&&L[te].parent["@id"]===ce&&(delete L[te],fe(te))};fe(O)}function E(j,O,L){F.isObject(j)?y.addValue(j,O,L,{propertyIsArray:!0}):j.push(L)}function P(j,O,L,G){if(!("@id"in L))return!1;const W=j.subjects[L["@id"]];return W&&w(j,W,O,G)}function M(j,O){const L=O["@value"],G=O["@type"],W=O["@language"],V=j["@value"]?F.isArray(j["@value"])?j["@value"]:[j["@value"]]:[],$=j["@type"]?F.isArray(j["@type"])?j["@type"]:[j["@type"]]:[],fe=j["@language"]?F.isArray(j["@language"])?j["@language"]:[j["@language"]]:[];return 0===V.length&&0===$.length&&0===fe.length||!(!V.includes(L)&&!F.isEmptyObject(V[0]))&&!!(!G&&0===$.length||$.includes(G)||G&&F.isEmptyObject($[0]))&&!!(!W&&0===fe.length||fe.includes(W)||W&&F.isEmptyObject(fe[0]))}ie.exports=b,b.frameMergedOrDefault=(j,O,L)=>{const G={options:L,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},W=new y.IdentifierIssuer("_:b");u(j,G.graphMap,"@default",W),L.merged&&(G.graphMap["@merged"]=d(G.graphMap),G.graph="@merged"),G.subjects=G.graphMap[G.graph];const V=[];return b.frame(G,Object.keys(G.subjects).sort(),O,V),L.pruneBlankNodeIdentifiers&&(L.bnodesToClear=Object.keys(G.bnodeMap).filter($=>1===G.bnodeMap[$].length)),L.link={},function $(fe,ce){if(F.isArray(fe))return fe.map(xe=>$(xe,ce));if(F.isObject(fe)){if("@preserve"in fe)return fe["@preserve"][0];if(l.isValue(fe))return fe;if(l.isList(fe))return fe["@list"]=$(fe["@list"],ce),fe;if("@id"in fe){const xe=fe["@id"];if(ce.link.hasOwnProperty(xe)){const te=ce.link[xe].indexOf(fe);if(-1!==te)return ce.link[xe][te];ce.link[xe].push(fe)}else ce.link[xe]=[fe]}for(const xe in fe)"@id"===xe&&ce.bnodesToClear.includes(fe[xe])?delete fe["@id"]:fe[xe]=$(fe[xe],ce)}return fe}(V,L)},b.frame=(j,O,L,G,W=null)=>{f(L),L=L[0];const V=j.options,$={embed:v(L,V,"embed"),explicit:v(L,V,"explicit"),requireAll:v(L,V,"requireAll")};j.link.hasOwnProperty(j.graph)||(j.link[j.graph]={});const fe=j.link[j.graph],ce=function(te,se,ne,ve){const Ce={};for(const me of se){const de=te.graphMap[te.graph][me];w(te,de,ne,ve)&&(Ce[me]=de)}return Ce}(j,O,L,$),xe=Object.keys(ce).sort();for(const te of xe){const se=ce[te];if(null===W?j.uniqueEmbeds={[j.graph]:{}}:j.uniqueEmbeds[j.graph]=j.uniqueEmbeds[j.graph]||{},"@link"===$.embed&&te in fe){E(G,W,fe[te]);continue}const ne={"@id":te};if(0===te.indexOf("_:")&&y.addValue(j.bnodeMap,te,ne,{propertyIsArray:!0}),fe[te]=ne,("@first"===$.embed||"@last"===$.embed)&&j.is11)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:L});if(j.embedded||!j.uniqueEmbeds[j.graph].hasOwnProperty(te))if(!j.embedded||"@never"!==$.embed&&!k(se,j.graph,j.subjectStack))if(!j.embedded||"@first"!=$.embed&&"@once"!=$.embed||!j.uniqueEmbeds[j.graph].hasOwnProperty(te)){if("@last"===$.embed&&te in j.uniqueEmbeds[j.graph]&&T(j,te),j.uniqueEmbeds[j.graph][te]={parent:G,property:W},j.subjectStack.push({subject:se,graph:j.graph}),te in j.graphMap){let ve=!1,Ce=null;"@graph"in L?(Ce=L["@graph"][0],ve=!("@merged"===te||"@default"===te),F.isObject(Ce)||(Ce={})):(ve="@merged"!==j.graph,Ce={}),ve&&b.frame(gs(gn({},j),{graph:te,embedded:!1}),Object.keys(j.graphMap[te]).sort(),[Ce],ne,"@graph")}"@included"in L&&b.frame(gs(gn({},j),{embedded:!1}),O,L["@included"],ne,"@included");for(const ve of Object.keys(se).sort())if(q(ve)){if(ne[ve]=y.clone(se[ve]),"@type"===ve)for(const Ce of se["@type"])0===Ce.indexOf("_:")&&y.addValue(j.bnodeMap,Ce,ne,{propertyIsArray:!0})}else if(!$.explicit||ve in L)for(const Ce of se[ve]){const me=ve in L?L[ve]:h($);if(l.isList(Ce)){const de=L[ve]&&L[ve][0]&&L[ve][0]["@list"]?L[ve][0]["@list"]:h($),ye={"@list":[]};E(ne,ve,ye);const Ee=Ce["@list"];for(const Be of Ee)l.isSubjectReference(Be)?b.frame(gs(gn({},j),{embedded:!0}),[Be["@id"]],de,ye,"@list"):E(ye,"@list",y.clone(Be))}else l.isSubjectReference(Ce)?b.frame(gs(gn({},j),{embedded:!0}),[Ce["@id"]],me,ne,ve):M(me[0],Ce)&&E(ne,ve,y.clone(Ce))}for(const ve of Object.keys(L).sort()){if("@type"===ve){if(!F.isObject(L[ve][0])||!("@default"in L[ve][0]))continue}else if(q(ve))continue;const Ce=L[ve][0]||{};if(!v(Ce,V,"omitDefault")&&!(ve in ne)){let me="@null";"@default"in Ce&&(me=y.clone(Ce["@default"])),F.isArray(me)||(me=[me]),ne[ve]=[{"@preserve":me}]}}for(const ve of Object.keys(L["@reverse"]||{}).sort()){const Ce=L["@reverse"][ve];for(const me of Object.keys(j.subjects))y.getValues(j.subjects[me],ve).some(de=>de["@id"]===te)&&(ne["@reverse"]=ne["@reverse"]||{},y.addValue(ne["@reverse"],ve,[],{propertyIsArray:!0}),b.frame(gs(gn({},j),{embedded:!0}),[me],Ce,ne["@reverse"][ve],W))}E(G,W,ne),j.subjectStack.pop()}else E(G,W,ne);else E(G,W,ne)}},b.cleanupNull=(j,O)=>{if(F.isArray(j))return j.map(L=>b.cleanupNull(L,O)).filter(L=>L);if("@null"===j)return null;if(F.isObject(j)){if("@id"in j){const L=j["@id"];if(O.link.hasOwnProperty(L)){const G=O.link[L].indexOf(j);if(-1!==G)return O.link[L][G];O.link[L].push(j)}else O.link[L]=[j]}for(const L in j)j[L]=b.cleanupNull(j[L],O)}return j}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./nodeMap":47,"./types":50,"./url":51,"./util":52}],44:[function(J,ie,ue){"use strict";const q=J("./JsonLdError"),l=J("./graphTypes"),F=J("./types"),y=J("./util"),{RDF_LIST:e,RDF_FIRST:o,RDF_REST:u,RDF_NIL:d,RDF_TYPE:b,RDF_JSON_LITERAL:h,XSD_BOOLEAN:k,XSD_DOUBLE:v,XSD_INTEGER:f,XSD_STRING:w}=J("./constants"),T=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,E={};function P(M,j,O){if(M.termType.endsWith("Node"))return{"@id":M.value};const L={"@value":M.value};if(M.language)L["@language"]=M.language;else{let G=M.datatype.value;if(G||(G=w),G===h){G="@json";try{L["@value"]=JSON.parse(L["@value"])}catch(W){throw new q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:L["@value"],cause:W})}}if(j){if(G===k)"true"===L["@value"]?L["@value"]=!0:"false"===L["@value"]&&(L["@value"]=!1);else if(F.isNumeric(L["@value"]))if(G===f){const W=parseInt(L["@value"],10);W.toFixed(0)===L["@value"]&&(L["@value"]=W)}else G===v&&(L["@value"]=parseFloat(L["@value"]));[k,f,v,w].includes(G)||(L["@type"]=G)}else if("i18n-datatype"===O&&G.startsWith("https://www.w3.org/ns/i18n#")){const[,W,V]=G.split(/[#_]/);W.length>0&&(L["@language"]=W,W.match(T)||console.warn(`@language must be valid BCP47: ${W}`)),L["@direction"]=V}else G!==w&&(L["@type"]=G)}return L}ie.exports=E,E.fromRDF=async(M,{useRdfType:j=!1,useNativeTypes:O=!1,rdfDirection:L=null})=>{const G={},W={"@default":G},V={};for(const ce of M){const xe="DefaultGraph"===ce.graph.termType?"@default":ce.graph.value;xe in W||(W[xe]={}),"@default"===xe||xe in G||(G[xe]={"@id":xe});const te=W[xe],se=ce.subject.value,ne=ce.predicate.value,ve=ce.object;se in te||(te[se]={"@id":se});const Ce=te[se],me=ve.termType.endsWith("Node");if(!me||ve.value in te||(te[ve.value]={"@id":ve.value}),ne===b&&!j&&me){y.addValue(Ce,"@type",ve.value,{propertyIsArray:!0});continue}const de=P(ve,O,L);if(y.addValue(Ce,ne,de,{propertyIsArray:!0}),me)if(ve.value===d){const ye=te[ve.value];"usages"in ye||(ye.usages=[]),ye.usages.push({node:Ce,property:ne,value:de})}else ve.value in V?V[ve.value]=!1:V[ve.value]={node:Ce,property:ne,value:de}}for(const ce in W){const xe=W[ce];if(!(d in xe))continue;const te=xe[d];if(te.usages){for(let se of te.usages){let ne=se.node,ve=se.property,Ce=se.value;const me=[],de=[];let ye=Object.keys(ne).length;for(;ve===u&&F.isObject(V[ne["@id"]])&&F.isArray(ne[o])&&1===ne[o].length&&F.isArray(ne[u])&&1===ne[u].length&&(3===ye||4===ye&&F.isArray(ne["@type"])&&1===ne["@type"].length&&ne["@type"][0]===e)&&(me.push(ne[o][0]),de.push(ne["@id"]),ne=(se=V[ne["@id"]]).node,ve=se.property,Ce=se.value,ye=Object.keys(ne).length,l.isBlankNode(ne)););delete Ce["@id"],Ce["@list"]=me.reverse();for(const Ee of de)delete xe[Ee]}delete te.usages}}const $=[],fe=Object.keys(G).sort();for(const ce of fe){const xe=G[ce];if(ce in W){const te=xe["@graph"]=[],se=W[ce],ne=Object.keys(se).sort();for(const ve of ne){const Ce=se[ve];l.isSubjectReference(Ce)||te.push(Ce)}}l.isSubjectReference(xe)||$.push(xe)}return $}},{"./JsonLdError":32,"./constants":38,"./graphTypes":45,"./types":50,"./util":52}],45:[function(J,ie,ue){"use strict";const q=J("./types"),l={};ie.exports=l,l.isSubject=F=>!(!q.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),l.isSubjectReference=F=>q.isObject(F)&&1===Object.keys(F).length&&"@id"in F,l.isValue=F=>q.isObject(F)&&"@value"in F,l.isList=F=>q.isObject(F)&&"@list"in F,l.isGraph=F=>q.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(y=>"@id"!==y&&"@index"!==y).length,l.isSimpleGraph=F=>l.isGraph(F)&&!("@id"in F),l.isBlankNode=F=>!!q.isObject(F)&&("@id"in F?0===F["@id"].indexOf("_:"):0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F))},{"./types":50}],46:[function(J,ie,ue){const q=J("rdf-canonize"),l=J("./platform"),F=J("./util"),y=J("./ContextResolver"),e=F.IdentifierIssuer,o=J("./JsonLdError"),u=J("lru-cache"),d=J("./NQuads"),{expand:b}=J("./expand"),{flatten:h}=J("./flatten"),{fromRDF:k}=J("./fromRdf"),{toRDF:v}=J("./toRdf"),{frameMergedOrDefault:f,cleanupNull:w}=J("./frame"),{isArray:T,isObject:E,isString:P}=J("./types"),{isSubjectReference:M}=J("./graphTypes"),{expandIri:j,getInitialContext:O,process:L,processingMode:G}=J("./context"),{compact:W,compactIri:V}=J("./compact"),{createNodeMap:$,createMergedNodeMap:fe,mergeNodeMaps:ce}=J("./nodeMap"),xe=function(se){const ne={},ve=new u({max:100});function Ce(me,Ee){var Be=Ee,{documentLoader:de=se.documentLoader}=Be,ye=bp(Be,["documentLoader"]);return Object.assign({},{documentLoader:de},ye,me)}return se.compact=async function(me,de,ye){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===de)throw new o("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===me)return null;let Ee;(ye=Ce(ye,{base:P(me)?me:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new y({sharedCache:ve})})).link&&(ye.skipExpansion=!0),ye.compactToRelative||delete ye.base,Ee=ye.skipExpansion?me:await se.expand(me,ye);const Be=await se.processContext(O(ye),de,ye);let Ie=await W({activeCtx:Be,element:Ee,options:ye,compactionMap:ye.compactionMap});ye.compactArrays&&!ye.graph&&T(Ie)?1===Ie.length?Ie=Ie[0]:0===Ie.length&&(Ie={}):ye.graph&&E(Ie)&&(Ie=[Ie]),E(de)&&"@context"in de&&(de=de["@context"]),de=F.clone(de),T(de)||(de=[de]);const qe=de;de=[];for(let H=0;H<qe.length;++H)(!E(qe[H])||Object.keys(qe[H]).length>0)&&de.push(qe[H]);const U=de.length>0;if(1===de.length&&(de=de[0]),T(Ie)){const H=V({activeCtx:Be,iri:"@graph",relativeTo:{vocab:!0}}),ee=Ie;Ie={},U&&(Ie["@context"]=de),Ie[H]=ee}else if(E(Ie)&&U){const H=Ie;Ie={"@context":de};for(const ee in H)Ie[ee]=H[ee]}return Ie},se.expand=async function(me,de){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(de=Ce(de,{keepFreeFloatingNodes:!1,contextResolver:new y({sharedCache:ve})})).expansionMap&&(de.expansionMap=void 0);const ye={},Ee=[];if("expandContext"in de){const U=F.clone(de.expandContext);E(U)&&"@context"in U?ye.expandContext=U:ye.expandContext={"@context":U},Ee.push(ye.expandContext)}let Be;if(P(me)){const U=await se.get(me,de);Be=U.documentUrl,ye.input=U.document,U.contextUrl&&(ye.remoteContext={"@context":U.contextUrl},Ee.push(ye.remoteContext))}else ye.input=F.clone(me);"base"in de||(de.base=Be||"");let Ie=O(de);for(const U of Ee)Ie=await L({activeCtx:Ie,localCtx:U,options:de});let qe=await b({activeCtx:Ie,element:ye.input,options:de,expansionMap:de.expansionMap});return E(qe)&&"@graph"in qe&&1===Object.keys(qe).length?qe=qe["@graph"]:null===qe&&(qe=[]),T(qe)||(qe=[qe]),qe},se.flatten=async function(me,de,ye){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");de="function"==typeof de?null:de||null,ye=Ce(ye,{base:P(me)?me:"",contextResolver:new y({sharedCache:ve})});const Ee=await se.expand(me,ye),Be=h(Ee);return null===de?Be:(ye.graph=!0,ye.skipExpansion=!0,await se.compact(Be,de,ye))},se.frame=async function(me,de,ye){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(ye=Ce(ye,{base:P(me)?me:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new y({sharedCache:ve})}),P(de)){const Ne=await se.get(de,ye);if(de=Ne.document,Ne.contextUrl){let ke=de["@context"];ke?T(ke)?ke.push(Ne.contextUrl):ke=[ke,Ne.contextUrl]:ke=Ne.contextUrl,de["@context"]=ke}}const Ee=de&&de["@context"]||{},Be=await se.processContext(O(ye),Ee,ye);ye.hasOwnProperty("omitGraph")||(ye.omitGraph=G(Be,1.1)),ye.hasOwnProperty("pruneBlankNodeIdentifiers")||(ye.pruneBlankNodeIdentifiers=G(Be,1.1));const Ie=await se.expand(me,ye),qe=gn({},ye);qe.isFrame=!0,qe.keepFreeFloatingNodes=!0;const U=await se.expand(de,qe),H=Object.keys(de).map(Ne=>j(Be,Ne,{vocab:!0}));qe.merged=!H.includes("@graph"),qe.is11=G(Be,1.1);const ee=f(Ie,U,qe);qe.graph=!ye.omitGraph,qe.skipExpansion=!0,qe.link={},qe.framing=!0;let pe=await se.compact(ee,Ee,qe);return qe.link={},w(pe,qe)},se.link=async function(me,de,ye){const Ee={};return de&&(Ee["@context"]=de),Ee["@embed"]="@link",se.frame(me,Ee,ye)},se.normalize=se.canonize=async function(me,de){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(de=Ce(de,{base:P(me)?me:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new y({sharedCache:ve})}))){if("application/n-quads"!==de.inputFormat&&"application/nquads"!==de.inputFormat)throw new o("Unknown canonicalization input format.","jsonld.CanonizeError");const Be=d.parse(me);return q.canonize(Be,de)}const ye=gn({},de);delete ye.format,ye.produceGeneralizedRdf=!1;const Ee=await se.toRDF(me,ye);return q.canonize(Ee,de)},se.fromRDF=async function(me,de){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");de=Ce(de,{format:P(me)?"application/n-quads":void 0});const{format:ye}=de;let{rdfParser:Ee}=de;if(ye){if(!(Ee=Ee||ne[ye]))throw new o("Unknown input format.","jsonld.UnknownFormat",{format:ye})}else Ee=()=>me;const Be=await Ee(me);return k(Be,de)},se.toRDF=async function(me,de){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let ye;ye=(de=Ce(de,{base:P(me)?me:"",skipExpansion:!1,contextResolver:new y({sharedCache:ve})})).skipExpansion?me:await se.expand(me,de);const Ee=v(ye,de);if(de.format){if("application/n-quads"===de.format||"application/nquads"===de.format)return d.serialize(Ee);throw new o("Unknown output format.","jsonld.UnknownFormat",{format:de.format})}return Ee},se.createNodeMap=async function(me,de){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");de=Ce(de,{base:P(me)?me:"",contextResolver:new y({sharedCache:ve})});const ye=await se.expand(me,de);return fe(ye,de)},se.merge=async function(me,de,ye){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!T(me))throw new TypeError('Could not merge, "docs" must be an array.');de="function"==typeof de?null:de||null,ye=Ce(ye,{contextResolver:new y({sharedCache:ve})});const Ee=await Promise.all(me.map(pe=>{const Ne=gn({},ye);return se.expand(pe,Ne)}));let Be=!0;"mergeNodes"in ye&&(Be=ye.mergeNodes);const Ie=ye.issuer||new e("_:b"),qe={"@default":{}};for(let pe=0;pe<Ee.length;++pe){const Ne=F.relabelBlankNodes(Ee[pe],{issuer:new e("_:b"+pe+"-")}),ke=Be||0===pe?qe:{"@default":{}};if($(Ne,ke,"@default",Ie),ke!==qe)for(const Pe in ke){const Je=ke[Pe];if(!(Pe in qe)){qe[Pe]=Je;continue}const Ke=qe[Pe];for(const at in Je)at in Ke||(Ke[at]=Je[at])}}const U=ce(qe),H=[],ee=Object.keys(U).sort();for(let pe=0;pe<ee.length;++pe){const Ne=U[ee[pe]];M(Ne)||H.push(Ne)}return null===de?H:(ye.graph=!0,ye.skipExpansion=!0,await se.compact(H,de,ye))},Object.defineProperty(se,"documentLoader",{get:()=>se._documentLoader,set:me=>se._documentLoader=me}),se.documentLoader=async me=>{throw new o("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:me})},se.get=async function(me,de){let ye;ye="function"==typeof de.documentLoader?de.documentLoader:se.documentLoader;const Ee=await ye(me);try{if(!Ee.document)throw new o("No remote document found at the given URL.","jsonld.NullRemoteDocument");P(Ee.document)&&(Ee.document=JSON.parse(Ee.document))}catch(Be){throw new o("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Be,remoteDoc:Ee})}return Ee},se.processContext=async function(me,de,ye){return ye=Ce(ye,{base:"",contextResolver:new y({sharedCache:ve})}),null===de?O(ye):(de=F.clone(de),E(de)&&"@context"in de||(de={"@context":de}),L({activeCtx:me,localCtx:de,options:ye}))},se.getContextValue=J("./context").getContextValue,se.documentLoaders={},se.useDocumentLoader=function(me){if(!(me in se.documentLoaders))throw new o('Unknown document loader type: "'+me+'"',"jsonld.UnknownDocumentLoader",{type:me});se.documentLoader=se.documentLoaders[me].apply(se,Array.prototype.slice.call(arguments,1))},se.registerRDFParser=function(me,de){ne[me]=de},se.unregisterRDFParser=function(me){delete ne[me]},se.registerRDFParser("application/n-quads",d.parse),se.registerRDFParser("application/nquads",d.parse),se.url=J("./url"),se.util=F,Object.assign(se,F),se.promises=se,se.RequestQueue=J("./RequestQueue"),se.JsonLdProcessor=J("./JsonLdProcessor")(se),l.setupGlobals(se),l.setupDocumentLoaders(se),se},te=function(){return xe(function(){return te()})};xe(te),ie.exports=te},{"./ContextResolver":31,"./JsonLdError":32,"./JsonLdProcessor":33,"./NQuads":34,"./RequestQueue":35,"./compact":37,"./context":39,"./expand":41,"./flatten":42,"./frame":43,"./fromRdf":44,"./graphTypes":45,"./nodeMap":47,"./platform":48,"./toRdf":49,"./types":50,"./url":51,"./util":52,"lru-cache":53,"rdf-canonize":66}],47:[function(J,ie,ue){"use strict";const{isKeyword:q}=J("./context"),l=J("./graphTypes"),F=J("./types"),y=J("./util"),e=J("./JsonLdError"),o={};ie.exports=o,o.createMergedNodeMap=(u,d)=>{const b=(d=d||{}).issuer||new y.IdentifierIssuer("_:b"),h={"@default":{}};return o.createNodeMap(u,h,"@default",b),o.mergeNodeMaps(h)},o.createNodeMap=(u,d,b,h,k,v)=>{if(F.isArray(u)){for(const E of u)o.createNodeMap(E,d,b,h,void 0,v);return}if(!F.isObject(u))return void(v&&v.push(u));if(l.isValue(u)){if("@type"in u){let E=u["@type"];0===E.indexOf("_:")&&(u["@type"]=E=h.getId(E))}return void(v&&v.push(u))}if(v&&l.isList(u)){const E=[];return o.createNodeMap(u["@list"],d,b,h,k,E),void v.push({"@list":E})}if("@type"in u){const E=u["@type"];for(const P of E)0===P.indexOf("_:")&&h.getId(P)}F.isUndefined(k)&&(k=l.isBlankNode(u)?h.getId(u["@id"]):u["@id"]),v&&v.push({"@id":k});const f=d[b],w=f[k]=f[k]||{};w["@id"]=k;const T=Object.keys(u).sort();for(let E of T){if("@id"===E)continue;if("@reverse"===E){const M={"@id":k},j=u["@reverse"];for(const O in j){const L=j[O];for(const G of L){let W=G["@id"];l.isBlankNode(G)&&(W=h.getId(W)),o.createNodeMap(G,d,b,h,W),y.addValue(f[W],O,M,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===E){k in d||(d[k]={}),o.createNodeMap(u[E],d,k,h);continue}if("@included"===E){o.createNodeMap(u[E],d,b,h);continue}if("@type"!==E&&q(E)){if("@index"===E&&E in w&&(u[E]!==w[E]||u[E]["@id"]!==w[E]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:w});w[E]=u[E];continue}const P=u[E];if(0===E.indexOf("_:")&&(E=h.getId(E)),0!==P.length)for(let M of P)if("@type"===E&&(M=0===M.indexOf("_:")?h.getId(M):M),l.isSubject(M)||l.isSubjectReference(M)){if("@id"in M&&!M["@id"])continue;const j=l.isBlankNode(M)?h.getId(M["@id"]):M["@id"];y.addValue(w,E,{"@id":j},{propertyIsArray:!0,allowDuplicate:!1}),o.createNodeMap(M,d,b,h,j)}else if(l.isValue(M))y.addValue(w,E,M,{propertyIsArray:!0,allowDuplicate:!1});else if(l.isList(M)){const j=[];o.createNodeMap(M["@list"],d,b,h,k,j),M={"@list":j},y.addValue(w,E,M,{propertyIsArray:!0,allowDuplicate:!1})}else o.createNodeMap(M,d,b,h,k),y.addValue(w,E,M,{propertyIsArray:!0,allowDuplicate:!1});else y.addValue(w,E,[],{propertyIsArray:!0})}},o.mergeNodeMapGraphs=u=>{const d={};for(const b of Object.keys(u).sort())for(const h of Object.keys(u[b]).sort()){const k=u[b][h];h in d||(d[h]={"@id":h});const v=d[h];for(const f of Object.keys(k).sort())if(q(f)&&"@type"!==f)v[f]=y.clone(k[f]);else for(const w of k[f])y.addValue(v,f,y.clone(w),{propertyIsArray:!0,allowDuplicate:!1})}return d},o.mergeNodeMaps=u=>{const d=u["@default"],b=Object.keys(u).sort();for(const h of b){if("@default"===h)continue;const k=u[h];let v=d[h];v?"@graph"in v||(v["@graph"]=[]):d[h]=v={"@id":h,"@graph":[]};const f=v["@graph"];for(const w of Object.keys(k).sort()){const T=k[w];l.isSubjectReference(T)||f.push(T)}}return d}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./types":50,"./util":52}],48:[function(J,ie,ue){"use strict";const q=J("./documentLoaders/xhr"),l={};ie.exports=l,l.setupDocumentLoaders=function(F){"undefined"!=typeof XMLHttpRequest&&(F.documentLoaders.xhr=q,F.useDocumentLoader("xhr"))},l.setupGlobals=function(F){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:F.JsonLdProcessor})}},{"./documentLoaders/xhr":40}],49:[function(J,ie,ue){"use strict";const{createNodeMap:q}=J("./nodeMap"),{isKeyword:l}=J("./context"),F=J("./graphTypes"),y=J("canonicalize"),e=J("./types"),o=J("./util"),{RDF_FIRST:u,RDF_REST:d,RDF_NIL:b,RDF_TYPE:h,RDF_JSON_LITERAL:k,RDF_LANGSTRING:v,XSD_BOOLEAN:f,XSD_DOUBLE:w,XSD_INTEGER:T,XSD_STRING:E}=J("./constants"),{isAbsolute:P}=J("./url"),M={};function j(L,G,W,V,$){const fe=Object.keys(G).sort();for(const ce of fe){const xe=G[ce],te=Object.keys(xe).sort();for(let se of te){const ne=xe[se];if("@type"===se)se=h;else if(l(se))continue;for(const ve of ne){const Ce={termType:ce.startsWith("_:")?"BlankNode":"NamedNode",value:ce};if(!P(ce))continue;const me={termType:se.startsWith("_:")?"BlankNode":"NamedNode",value:se};if(!P(se)||"BlankNode"===me.termType&&!$.produceGeneralizedRdf)continue;const de=O(ve,V,L,W,$.rdfDirection);de&&L.push({subject:Ce,predicate:me,object:de,graph:W})}}}}function O(L,G,W,V,$){const fe={};if(F.isValue(L)){fe.termType="Literal",fe.value=void 0,fe.datatype={termType:"NamedNode"};let ce=L["@value"];const xe=L["@type"]||null;if("@json"===xe)fe.value=y(ce),fe.datatype.value=k;else if(e.isBoolean(ce))fe.value=ce.toString(),fe.datatype.value=xe||f;else if(e.isDouble(ce)||xe===w)e.isDouble(ce)||(ce=parseFloat(ce)),fe.value=ce.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),fe.datatype.value=xe||w;else if(e.isNumber(ce))fe.value=ce.toFixed(0),fe.datatype.value=xe||T;else if("i18n-datatype"===$&&"@direction"in L){const te="https://www.w3.org/ns/i18n#"+(L["@language"]||"")+`_${L["@direction"]}`;fe.datatype.value=te,fe.value=ce}else"@language"in L?(fe.value=ce,fe.datatype.value=xe||v,fe.language=L["@language"]):(fe.value=ce,fe.datatype.value=xe||E)}else if(F.isList(L)){const ce=function(xe,te,se,ne,ve){const Ce={termType:"NamedNode",value:u},me={termType:"NamedNode",value:d},de={termType:"NamedNode",value:b},ye=xe.pop(),Ee=ye?{termType:"BlankNode",value:te.getId()}:de;let Be=Ee;for(const Ie of xe){const qe=O(Ie,te,se,ne,ve),U={termType:"BlankNode",value:te.getId()};se.push({subject:Be,predicate:Ce,object:qe,graph:ne}),se.push({subject:Be,predicate:me,object:U,graph:ne}),Be=U}if(ye){const Ie=O(ye,te,se,ne,ve);se.push({subject:Be,predicate:Ce,object:Ie,graph:ne}),se.push({subject:Be,predicate:me,object:de,graph:ne})}return Ee}(L["@list"],G,W,V,$);fe.termType=ce.termType,fe.value=ce.value}else{const ce=e.isObject(L)?L["@id"]:L;fe.termType=ce.startsWith("_:")?"BlankNode":"NamedNode",fe.value=ce}return"NamedNode"!==fe.termType||P(fe.value)?fe:null}ie.exports=M,M.toRDF=(L,G)=>{const W=new o.IdentifierIssuer("_:b"),V={"@default":{}};q(L,V,"@default",W);const $=[],fe=Object.keys(V).sort();for(const ce of fe){let xe;if("@default"===ce)xe={termType:"DefaultGraph",value:""};else{if(!P(ce))continue;(xe=ce.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=ce}j($,V[ce],xe,W,G)}return $}},{"./constants":38,"./context":39,"./graphTypes":45,"./nodeMap":47,"./types":50,"./url":51,"./util":52,canonicalize:13}],50:[function(J,ie,ue){"use strict";const q={};ie.exports=q,q.isArray=Array.isArray,q.isBoolean=l=>"boolean"==typeof l||"[object Boolean]"===Object.prototype.toString.call(l),q.isDouble=l=>q.isNumber(l)&&(-1!==String(l).indexOf(".")||Math.abs(l)>=1e21),q.isEmptyObject=l=>q.isObject(l)&&0===Object.keys(l).length,q.isNumber=l=>"number"==typeof l||"[object Number]"===Object.prototype.toString.call(l),q.isNumeric=l=>!isNaN(parseFloat(l))&&isFinite(l),q.isObject=l=>"[object Object]"===Object.prototype.toString.call(l),q.isString=l=>"string"==typeof l||"[object String]"===Object.prototype.toString.call(l),q.isUndefined=l=>void 0===l},{}],51:[function(J,ie,ue){"use strict";const q=J("./types"),l={};ie.exports=l,l.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},l.parse=(y,e)=>{const o={},u=l.parsers[e||"full"],d=u.regex.exec(y);let b=u.keys.length;for(;b--;)o[u.keys[b]]=void 0===d[b]?null:d[b];return("https"===o.scheme&&"443"===o.port||"http"===o.scheme&&"80"===o.port)&&(o.href=o.href.replace(":"+o.port,""),o.authority=o.authority.replace(":"+o.port,""),o.port=null),o.normalizedPath=l.removeDotSegments(o.path),o},l.prependBase=(y,e)=>{if(null===y||l.isAbsolute(e))return e;y&&!q.isString(y)||(y=l.parse(y||""));const o=l.parse(e),u={protocol:y.protocol||""};if(null!==o.authority)u.authority=o.authority,u.path=o.path,u.query=o.query;else if(u.authority=y.authority,""===o.path)u.path=y.path,null!==o.query?u.query=o.query:u.query=y.query;else{if(0===o.path.indexOf("/"))u.path=o.path;else{let b=y.path;((b=b.substr(0,b.lastIndexOf("/")+1)).length>0||y.authority)&&"/"!==b.substr(-1)&&(b+="/"),b+=o.path,u.path=b}u.query=o.query}""!==o.path&&(u.path=l.removeDotSegments(u.path));let d=u.protocol;return null!==u.authority&&(d+="//"+u.authority),d+=u.path,null!==u.query&&(d+="?"+u.query),null!==o.fragment&&(d+="#"+o.fragment),""===d&&(d="./"),d},l.removeBase=(y,e)=>{if(null===y)return e;y&&!q.isString(y)||(y=l.parse(y||""));let o="";if(""!==y.href?o+=(y.protocol||"")+"//"+(y.authority||""):e.indexOf("//")&&(o+="//"),0!==e.indexOf(o))return e;const u=l.parse(e.substr(o.length)),d=y.normalizedPath.split("/"),b=u.normalizedPath.split("/"),h=u.fragment||u.query?0:1;for(;d.length>0&&b.length>h&&d[0]===b[0];)d.shift(),b.shift();let k="";if(d.length>0){d.pop();for(let v=0;v<d.length;++v)k+="../"}return k+=b.join("/"),null!==u.query&&(k+="?"+u.query),null!==u.fragment&&(k+="#"+u.fragment),""===k&&(k="./"),k},l.removeDotSegments=y=>{if(0===y.length)return"";const e=y.split("/"),o=[];for(;e.length>0;){const u=e.shift(),d=0===e.length;"."!==u?".."!==u?o.push(u):(o.pop(),d&&o.push("")):d&&o.push("")}return"/"===y[0]&&o.length>0&&""!==o[0]&&o.unshift(""),1===o.length&&""===o[0]?"/":o.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;l.isAbsolute=y=>q.isString(y)&&F.test(y),l.isRelative=y=>q.isString(y)},{"./types":50}],52:[function(J,ie,ue){"use strict";const q=J("./graphTypes"),l=J("./types"),F=J("rdf-canonize").IdentifierIssuer,y=J("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,d_accept="application/ld+json, application/json",b={};ie.exports=b,b.IdentifierIssuer=F,b.clone=function(h){if(h&&"object"==typeof h){let k;if(l.isArray(h)){k=[];for(let v=0;v<h.length;++v)k[v]=b.clone(h[v])}else if(h instanceof Map){k=new Map;for(const[v,f]of h)k.set(v,b.clone(f))}else if(h instanceof Set){k=new Set;for(const v of h)k.add(b.clone(v))}else if(l.isObject(h)){k={};for(const v in h)k[v]=b.clone(h[v])}else k=h.toString();return k}return h},b.asArray=function(h){return Array.isArray(h)?h:[h]},b.buildHeaders=(h={})=>{if(Object.keys(h).some(k=>"accept"===k.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+d_accept+'" is supported.');return Object.assign({Accept:d_accept},h)},b.parseLinkHeader=h=>{const k={},v=h.match(e);for(let f=0;f<v.length;++f){let w=v[f].match(o);if(!w)continue;const T={target:w[1]},E=w[2];for(;w=u.exec(E);)T[w[1]]=void 0===w[2]?w[3]:w[2];const P=T.rel||"";Array.isArray(k[P])?k[P].push(T):k.hasOwnProperty(P)?k[P]=[k[P],T]:k[P]=T}return k},b.validateTypeValue=(h,k)=>{if(!(l.isString(h)||l.isArray(h)&&h.every(v=>l.isString(v)))){if(k&&l.isObject(h))switch(Object.keys(h).length){case 0:return;case 1:if("@default"in h&&b.asArray(h["@default"]).every(v=>l.isString(v)))return}throw new y('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:h})}},b.hasProperty=(h,k)=>{if(h.hasOwnProperty(k)){const v=h[k];return!l.isArray(v)||v.length>0}return!1},b.hasValue=(h,k,v)=>{if(b.hasProperty(h,k)){let f=h[k];const w=q.isList(f);if(l.isArray(f)||w){w&&(f=f["@list"]);for(let T=0;T<f.length;++T)if(b.compareValues(v,f[T]))return!0}else if(!l.isArray(v))return b.compareValues(v,f)}return!1},b.addValue=(h,k,v,f)=>{if("propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1),"valueIsArray"in f||(f.valueIsArray=!1),"allowDuplicate"in f||(f.allowDuplicate=!0),"prependValue"in f||(f.prependValue=!1),f.valueIsArray)h[k]=v;else if(l.isArray(v)){0===v.length&&f.propertyIsArray&&!h.hasOwnProperty(k)&&(h[k]=[]),f.prependValue&&(v=v.concat(h[k]),h[k]=[]);for(let w=0;w<v.length;++w)b.addValue(h,k,v[w],f)}else if(h.hasOwnProperty(k)){const w=!f.allowDuplicate&&b.hasValue(h,k,v);l.isArray(h[k])||w&&!f.propertyIsArray||(h[k]=[h[k]]),w||(f.prependValue?h[k].unshift(v):h[k].push(v))}else h[k]=f.propertyIsArray?[v]:v},b.getValues=(h,k)=>[].concat(h[k]||[]),b.removeProperty=(h,k)=>{delete h[k]},b.removeValue=(h,k,v,f)=>{"propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1);const w=b.getValues(h,k).filter(T=>!b.compareValues(T,v));0===w.length?b.removeProperty(h,k):1!==w.length||f.propertyIsArray?h[k]=w:h[k]=w[0]},b.relabelBlankNodes=(h,k)=>function v(f,w){if(l.isArray(w))for(let T=0;T<w.length;++T)w[T]=v(f,w[T]);else if(q.isList(w))w["@list"]=v(f,w["@list"]);else if(l.isObject(w)){q.isBlankNode(w)&&(w["@id"]=f.getId(w["@id"]));const T=Object.keys(w).sort();for(let E=0;E<T.length;++E){const P=T[E];"@id"!==P&&(w[P]=v(f,w[P]))}}return w}((k=k||{}).issuer||new F("_:b"),h),b.compareValues=(h,k)=>h===k||!(!q.isValue(h)||!q.isValue(k)||h["@value"]!==k["@value"]||h["@type"]!==k["@type"]||h["@language"]!==k["@language"]||h["@index"]!==k["@index"])||!!(l.isObject(h)&&"@id"in h&&l.isObject(k)&&"@id"in k)&&h["@id"]===k["@id"],b.compareShortestLeast=(h,k)=>h.length<k.length?-1:k.length<h.length?1:h===k?0:h<k?-1:1},{"./JsonLdError":32,"./graphTypes":45,"./types":50,"rdf-canonize":66}],53:[function(J,ie,ue){"use strict";const q=J("yallist"),l=Symbol("max"),F=Symbol("length"),y=Symbol("lengthCalculator"),e=Symbol("allowStale"),o=Symbol("maxAge"),u=Symbol("dispose"),d=Symbol("noDisposeOnSet"),b=Symbol("lruList"),h=Symbol("cache"),k=Symbol("updateAgeOnGet"),v=()=>1,f=(j,O,L)=>{const G=j[h].get(O);if(G){const W=G.value;if(w(j,W)){if(E(j,G),!j[e])return}else L&&(j[k]&&(G.value.now=Date.now()),j[b].unshiftNode(G));return W.value}},w=(j,O)=>{if(!O||!O.maxAge&&!j[o])return!1;const L=Date.now()-O.now;return O.maxAge?L>O.maxAge:j[o]&&L>j[o]},T=j=>{if(j[F]>j[l])for(let O=j[b].tail;j[F]>j[l]&&null!==O;){const L=O.prev;E(j,O),O=L}},E=(j,O)=>{if(O){const L=O.value;j[u]&&j[u](L.key,L.value),j[F]-=L.length,j[h].delete(L.key),j[b].removeNode(O)}};class P{constructor(O,L,G,W,V){this.key=O,this.value=L,this.length=G,this.now=W,this.maxAge=V||0}}const M=(j,O,L,G)=>{let W=L.value;w(j,W)&&(E(j,L),j[e]||(W=void 0)),W&&O.call(G,W.value,W.key,j)};ie.exports=class{constructor(j){if("number"==typeof j&&(j={max:j}),j||(j={}),j.max&&("number"!=typeof j.max||j.max<0))throw new TypeError("max must be a non-negative number");this[l]=j.max||1/0;const O=j.length||v;if(this[y]="function"!=typeof O?v:O,this[e]=j.stale||!1,j.maxAge&&"number"!=typeof j.maxAge)throw new TypeError("maxAge must be a number");this[o]=j.maxAge||0,this[u]=j.dispose,this[d]=j.noDisposeOnSet||!1,this[k]=j.updateAgeOnGet||!1,this.reset()}set max(j){if("number"!=typeof j||j<0)throw new TypeError("max must be a non-negative number");this[l]=j||1/0,T(this)}get max(){return this[l]}set allowStale(j){this[e]=!!j}get allowStale(){return this[e]}set maxAge(j){if("number"!=typeof j)throw new TypeError("maxAge must be a non-negative number");this[o]=j,T(this)}get maxAge(){return this[o]}set lengthCalculator(j){"function"!=typeof j&&(j=v),j!==this[y]&&(this[y]=j,this[F]=0,this[b].forEach(O=>{O.length=this[y](O.value,O.key),this[F]+=O.length})),T(this)}get lengthCalculator(){return this[y]}get length(){return this[F]}get itemCount(){return this[b].length}rforEach(j,O){O=O||this;for(let L=this[b].tail;null!==L;){const G=L.prev;M(this,j,L,O),L=G}}forEach(j,O){O=O||this;for(let L=this[b].head;null!==L;){const G=L.next;M(this,j,L,O),L=G}}keys(){return this[b].toArray().map(j=>j.key)}values(){return this[b].toArray().map(j=>j.value)}reset(){this[u]&&this[b]&&this[b].length&&this[b].forEach(j=>this[u](j.key,j.value)),this[h]=new Map,this[b]=new q,this[F]=0}dump(){return this[b].map(j=>!w(this,j)&&{k:j.key,v:j.value,e:j.now+(j.maxAge||0)}).toArray().filter(j=>j)}dumpLru(){return this[b]}set(j,O,L){if((L=L||this[o])&&"number"!=typeof L)throw new TypeError("maxAge must be a number");const G=L?Date.now():0,W=this[y](O,j);if(this[h].has(j)){if(W>this[l])return E(this,this[h].get(j)),!1;const $=this[h].get(j).value;return this[u]&&(this[d]||this[u](j,$.value)),$.now=G,$.maxAge=L,$.value=O,this[F]+=W-$.length,$.length=W,this.get(j),T(this),!0}const V=new P(j,O,W,G,L);return V.length>this[l]?(this[u]&&this[u](j,O),!1):(this[F]+=V.length,this[b].unshift(V),this[h].set(j,this[b].head),T(this),!0)}has(j){if(!this[h].has(j))return!1;const O=this[h].get(j).value;return!w(this,O)}get(j){return f(this,j,!0)}peek(j){return f(this,j,!1)}pop(){const j=this[b].tail;return j?(E(this,j),j.value):null}del(j){E(this,this[h].get(j))}load(j){this.reset();const O=Date.now();for(let L=j.length-1;L>=0;L--){const G=j[L],W=G.e||0;if(0===W)this.set(G.k,G.v);else{const V=W-O;V>0&&this.set(G.k,G.v,V)}}}prune(){this[h].forEach((j,O)=>f(this,O,!1))}}},{yallist:121}],54:[function(J,ie,ue){var q=J;J=function(){},ue=ie.exports={Lexer:J("./lib/N3Lexer"),Parser:J("./lib/N3Parser"),Writer:J("./lib/N3Writer"),Store:J("./lib/N3Store"),StreamParser:J("./lib/N3StreamParser"),StreamWriter:J("./lib/N3StreamWriter"),Util:J("./lib/N3Util")},Object.keys(ue).forEach(function(l){Object.defineProperty(ue,l,{configurable:!0,enumerable:!0,get:function(){return delete ue[l],ue[l]=q("./lib/N3"+l)}})})},{"./lib/N3Lexer":55,"./lib/N3Parser":56,"./lib/N3Store":57,"./lib/N3StreamParser":58,"./lib/N3StreamWriter":59,"./lib/N3Util":60,"./lib/N3Writer":61}],55:[function(J,ie,ue){(function(q){(function(){var l=String.fromCharCode,F="function"==typeof q?q:function(d){setTimeout(d,0)},y=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},o=/[\x00-\x20<>\\"\{\}\|\^\`]/;function u(d){if(!(this instanceof u))return new u(d);if((d=d||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var b=this;this._tokenize=this.tokenize,this.tokenize=function(h,k){this._tokenize(h,function(v,f){!v&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(f.type)?k&&k(v,f):k&&k(v||b._syntaxError(f.type,k=null))})}}this._n3Mode=!1!==d.n3,this._comments=!!d.comments}u.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(d,b){for(var h=this._input,k=this._comments;;){for(var v,f;v=this._newline.exec(h);)k&&(f=this._comment.exec(v[0]))&&d(null,{line:this._line,type:"comment",value:f[1],prefix:""}),h=h.substr(v[0].length,h.length),this._line++;if((v=this._whitespace.exec(h))&&(h=h.substr(v[0].length,h.length)),this._endOfFile.test(h))return b&&(k&&(f=this._comment.exec(h))&&d(null,{line:this._line,type:"comment",value:f[1],prefix:""}),d(h=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=h;var w,T=this._line,E="",P="",M="",j=h[0],O=null,L=0,G=!1;switch(j){case"^":if(h.length<3)break;if("^"!==h[1]){this._n3Mode&&(L=1,E="^");break}if(this._previousMarker="^^","<"!==(h=h.substr(2))[0]){G=!0;break}case"<":if(O=this._unescapedIri.exec(h))E="IRI",P=O[1];else if(O=this._iri.exec(h)){if(null===(w=this._unescape(O[1]))||o.test(w))return V(this);E="IRI",P=w}else this._n3Mode&&h.length>1&&"="===h[1]&&(E="inverse",L=2,P="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((O=this._blank.exec(h))||b&&(O=this._blank.exec(h+" ")))&&(E="blank",M="_",P=O[1]);break;case'"':case"'":if(O=this._unescapedString.exec(h))E="literal",P=O[0];else if(O=this._singleQuotedString.exec(h)){if(null===(w=this._unescape(O[0])))return V(this);E="literal",P=w.replace(/^'|'$/g,'"')}else if(O=this._tripleQuotedString.exec(h)){if(w=O[1]||O[2],this._line+=w.split(/\r\n|\r|\n/).length-1,null===(w=this._unescape(w)))return V(this);E="literal",P=w.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(O=this._variable.exec(h))&&(E="var",P=O[0]);break;case"@":"literal"===this._previousMarker&&(O=this._langcode.exec(h))?(E="langcode",P=O[1]):(O=this._keyword.exec(h))&&(E=O[0]);break;case".":if(1===h.length?b:h[1]<"0"||h[1]>"9"){E=".",L=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(O=this._number.exec(h)||b&&(O=this._number.exec(h+" ")))&&(E="literal",P='"'+O[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(O[1]?"double":/^[+\-]?\d+$/.test(O[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(O=this._sparqlKeyword.exec(h))?E=O[0].toUpperCase():G=!0;break;case"f":case"t":(O=this._boolean.exec(h))?(E="literal",P='"'+O[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):G=!0;break;case"a":(O=this._shortPredicates.exec(h))?(E="abbreviation",P="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):G=!0;break;case"=":this._n3Mode&&h.length>1&&(E="abbreviation",">"!==h[1]?(L=1,P="http://www.w3.org/2002/07/owl#sameAs"):(L=2,P="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":L=1,E=j;break;default:G=!0}if(G&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(O=this._prefix.exec(h))?((O=this._prefixed.exec(h))||b&&(O=this._prefixed.exec(h+" ")))&&(E="prefixed",M=O[1]||"",P=this._unescape(O[2])):(E="prefix",P=O[1]||"")),"^^"===this._previousMarker)switch(E){case"prefixed":E="type";break;case"IRI":E="typeIRI";break;default:E=""}if(!E)return b||!/^'''|^"""/.test(h)&&/\n|\r/.test(h)?V(this):this._input=h;var W={line:T,type:E,value:P,prefix:M};d(null,W),this.previousToken=W,this._previousMarker=E,h=h.substr(L||O[0].length,h.length)}function V($){d($._syntaxError(/^\S*/.exec(h)[0]))}},_unescape:function(d){try{return d.replace(y,function(b,h,k,v){var f;if(h){if(f=parseInt(h,16),isNaN(f))throw new Error;return l(f)}if(k){if(f=parseInt(k,16),isNaN(f))throw new Error;return f<=65535?l(f):l(55296+(f-=65536)/1024,56320+(1023&f))}var w=e[v];if(!w)throw new Error;return w})}catch(b){return null}},_syntaxError:function(d){this._input=null;var b=new Error('Unexpected "'+d+'" on line '+this._line+".");return b.context={token:void 0,line:this._line,previousToken:this.previousToken},b},tokenize:function(d,b){var h=this;if(this._line=1,"string"==typeof d){if(this._input=d,"function"!=typeof b){var k,v=[];if(this._tokenizeToEnd(function(f,w){f?k=f:v.push(w)},!0),k)throw k;return v}F(function(){h._tokenizeToEnd(b,!0)})}else this._input="","function"==typeof d.setEncoding&&d.setEncoding("utf8"),d.on("data",function(f){null!==h._input&&(h._input+=f,h._tokenizeToEnd(b,!1))}),d.on("end",function(){null!==h._input&&h._tokenizeToEnd(b,!0)}),d.on("error",b)}},ie.exports=u}).call(this)}).call(this,J("timers").setImmediate)},{timers:114}],56:[function(J,ie,ue){var q=J("./N3Lexer"),l="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F=l+"nil",y=l+"first",e=l+"rest",o=/^[a-z][a-z0-9+.-]*:/i,u=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,d=/(?:^|\/)\.\.?(?:$|[\/#?])/,b=0,h=0;function k(f){if(!(this instanceof k))return new k(f);this._contextStack=[],this._graph=null,f=f||{},this._setBase(f.documentIRI);var w="string"==typeof f.format?f.format.match(/\w*$/)[0].toLowerCase():"",T="turtle"===w,E="trig"===w,P=/triple/.test(w),M=/quad/.test(w),j=this._n3Mode=/n3/.test(w),O=P||M;(this._supportsNamedGraphs=!(T||j))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(T||E||P||j),O&&(this._base="",this._resolveIRI=function(L){return this._error("Disallowed relative IRI",L),this._callback=v,this._subject=null}),this._blankNodePrefix="string"!=typeof f.blankNodePrefix?"":"_:"+f.blankNodePrefix.replace(/^_:/,""),this._lexer=f.lexer||new q({lineMode:O,n3:j}),this._explicitQuantifiers=!!f.explicitQuantifiers}function v(){}k._resetBlankNodeIds=function(){b=h=0},k.prototype={_setBase:function(f){if(f){var w=f.indexOf("#");w>=0&&(f=f.substr(0,w)),this._base=f,this._basePath=f.indexOf("/")<0?f:f.replace(/[^\/?]*(?:\?.*)?$/,""),f=f.match(u),this._baseRoot=f[0],this._baseScheme=f[1]}else this._base=null},_saveContext:function(f,w,T,E,P){var M=this._n3Mode;this._contextStack.push({subject:T,predicate:E,object:P,graph:w,type:f,inverse:!!M&&this._inversePredicate,blankPrefix:M?this._prefixes._:"",quantified:M?this._quantified:null}),M&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var f=this._contextStack.pop(),w=this._n3Mode;this._subject=f.subject,this._predicate=f.predicate,this._object=f.object,this._graph=f.graph,w&&(this._inversePredicate=f.inverse,this._prefixes._=f.blankPrefix,this._quantified=f.quantified)},_readInTopContext:function(f){switch(f.type){case"eof":return null!==this._graph?this._error("Unclosed graph",f):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(f)}},_readEntity:function(f,w){var T;switch(f.type){case"IRI":case"typeIRI":T=null===this._base||o.test(f.value)?f.value:this._resolveIRI(f);break;case"type":case"blank":case"prefixed":var E=this._prefixes[f.prefix];if(void 0===E)return this._error('Undefined prefix "'+f.prefix+':"',f);T=E+f.value;break;case"var":return f.value;default:return this._error("Expected entity but got "+f.type,f)}return!w&&this._n3Mode&&T in this._quantified&&(T=this._quantified[T]),T},_readSubject:function(f){switch(this._predicate=null,f.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+h++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,F,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+h++,null,null),this._readSubject):this._error("Unexpected graph",f);case"}":return this._readPunctuation(f);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',f);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',f);default:if(void 0===(this._subject=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(f){var w=f.type;switch(w){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=f.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+w,f):(this._subject=null,"]"===w?this._readBlankNodeTail(f):this._readPunctuation(f));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",f);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",f);default:if(void 0===(this._predicate=this._readEntity(f)))return}return this._readObject},_readObject:function(f){switch(f.type){case"literal":return this._object=f.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+h++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,F),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+h++),this._readSubject):this._error("Unexpected graph",f);default:if(void 0===(this._object=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(f){return"{"===f.type?this._readGraph(f):this._readPredicate(f)},_readGraph:function(f){return"{"!==f.type?this._error("Expected graph but got "+f.type,f):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(f){return"]"===f.type?(this._subject=null,this._readBlankNodeTail(f)):(this._predicate=null,this._readPredicate(f))},_readBlankNodeTail:function(f){if("]"!==f.type)return this._readBlankNodePunctuation(f);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var w=null===this._predicate;return this._restoreContext(),null===this._object?w?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(f){return"."!==f.type||this._contextStack.length?this._readPredicate(f):(this._subject=null,this._readPunctuation(f))},_readListItem:function(f){var w=null,T=null,E=this._subject,P=this._contextStack,M=P[P.length-1],j=this._readListItem,O=!0;switch(f.type){case"[":this._saveContext("blank",this._graph,T="_:b"+h++,y,this._subject=w="_:b"+h++),j=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,T="_:b"+h++,y,F),this._subject=null;break;case")":if(this._restoreContext(),0!==P.length&&"list"===P[P.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(j=this._readPredicate,this._subject===F)return j}else if(j=this._getContextEndReader(),this._object===F)return j;T=F;break;case"literal":w=f.value,O=!1,j=this._readListItemDataTypeOrLang;break;default:if(void 0===(w=this._readEntity(f)))return}if(null===T&&(this._subject=T="_:b"+h++),null===E?null===M.predicate?M.subject=T:M.object=T:this._triple(E,e,T,this._graph),null!==w){if(this._n3Mode&&("IRI"===f.type||"prefixed"===f.type))return this._saveContext("item",this._graph,T,y,w),this._subject=w,this._predicate=null,this._getPathReader(this._readListItem);O?this._triple(T,y,w,this._graph):this._object=w}return j},_readDataTypeOrLang:function(f){return this._completeLiteral(f,!1)},_readListItemDataTypeOrLang:function(f){return this._completeLiteral(f,!0)},_completeLiteral:function(f,w){var T=!1;switch(f.type){case"type":case"typeIRI":var E=this._readEntity(f);if(void 0===E)return;T=!0,this._object+="^^"+E;break;case"langcode":T=!0,this._object+="@"+f.value.toLowerCase()}return w&&this._triple(this._subject,y,this._object,this._graph),T?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(f))},_readFormulaTail:function(f){return"}"!==f.type?this._readPunctuation(f):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(f){var w,T=this._subject,E=this._graph,P=this._inversePredicate;switch(f.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",f);if(this._n3Mode)return this._readFormulaTail(f);this._graph=null;case".":this._subject=null,w=this._contextStack.length?this._readSubject:this._readInTopContext,P&&(this._inversePredicate=!1);break;case";":w=this._readPredicate;break;case",":w=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(E=this._readEntity(f))){w=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',f)}if(null!==T){var M=this._predicate,j=this._object;P?this._triple(j,M,T,E):this._triple(T,M,j,E)}return w},_readBlankNodePunctuation:function(f){var w;switch(f.type){case";":w=this._readPredicate;break;case",":w=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',f)}return this._triple(this._subject,this._predicate,this._object,this._graph),w},_readQuadPunctuation:function(f){return"."!==f.type?this._error("Expected dot to follow quad",f):this._readInTopContext},_readPrefix:function(f){return"prefix"!==f.type?this._error("Expected prefix to follow @prefix",f):(this._prefix=f.value,this._readPrefixIRI)},_readPrefixIRI:function(f){if("IRI"!==f.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',f);var w=this._readEntity(f);return this._prefixes[this._prefix]=w,this._prefixCallback(this._prefix,w),this._readDeclarationPunctuation},_readBaseIRI:function(f){return"IRI"!==f.type?this._error("Expected IRI to follow base declaration",f):(this._setBase(null===this._base||o.test(f.value)?f.value:this._resolveIRI(f)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(f){switch(f.type){case"IRI":case"blank":case"prefixed":return this._readSubject(f),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",f)}},_readNamedGraphBlankLabel:function(f){return"]"!==f.type?this._error("Invalid graph label",f):(this._subject="_:b"+h++,this._readGraph)},_readDeclarationPunctuation:function(f){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(f)):"."!==f.type?this._error("Expected declaration to end with a dot",f):this._readInTopContext},_readQuantifierList:function(f){var w;switch(f.type){case"IRI":case"prefixed":if(void 0!==(w=this._readEntity(f,!0)))break;default:return this._error("Unexpected "+f.type,f)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+h++,"urn:n3:quantifiers"):this._triple(this._subject,e,this._subject="_:b"+h++,"urn:n3:quantifiers"),this._triple(this._subject,y,w,"urn:n3:quantifiers")):this._quantified[w]=this._quantifiedPrefix+h++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(f){return","===f.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,F,"urn:n3:quantifiers"),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(f))},_getPathReader:function(f){return this._afterPath=f,this._readPath},_readPath:function(f){switch(f.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var w=this._contextStack,T=w.length&&w[w.length-1];if(T&&"item"===T.type){var E=this._subject;this._restoreContext(),this._triple(this._subject,y,E,this._graph)}return this._afterPath(f)}},_readForwardPath:function(f){var w,T,E="_:b"+h++;if(void 0!==(T=this._readEntity(f)))return null===this._predicate?(w=this._subject,this._subject=E):(w=this._object,this._object=E),this._triple(w,T,E,this._graph),this._readPath},_readBackwardPath:function(f){var w,T,E="_:b"+h++;if(void 0!==(w=this._readEntity(f)))return null===this._predicate?(T=this._subject,this._subject=E):(T=this._object,this._object=E),this._triple(E,w,T,this._graph),this._readPath},_getContextEndReader:function(){var f=this._contextStack;if(!f.length)return this._readPunctuation;switch(f[f.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(f,w,T,E){this._callback(null,{subject:f,predicate:w,object:T,graph:E||""})},_error:function(f,w){var T=new Error(f+" on line "+w.line+".");T.context={token:w,line:w.line,previousToken:this._lexer.previousToken},this._callback(T),this._callback=v},_resolveIRI:function(f){var w=f.value;switch(w[0]){case void 0:return this._base;case"#":return this._base+w;case"?":return this._base.replace(/(?:\?.*)?$/,w);case"/":return("/"===w[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(w);default:return this._removeDotSegments(this._basePath+w)}},_removeDotSegments:function(f){if(!d.test(f))return f;for(var w="",T=f.length,E=-1,P=-1,M=0,j="/";E<T;){switch(j){case":":if(P<0&&"/"===f[++E]&&"/"===f[++E])for(;(P=E+1)<T&&"/"!==f[P];)E=P;break;case"?":case"#":E=T;break;case"/":if("."===f[E+1])switch(j=f[1+ ++E]){case"/":w+=f.substring(M,E-1),M=E+1;break;case void 0:case"?":case"#":return w+f.substring(M,E)+f.substr(E+1);case".":if(void 0===(j=f[1+ ++E])||"/"===j||"?"===j||"#"===j){if((M=(w+=f.substring(M,E-2)).lastIndexOf("/"))>=P&&(w=w.substr(0,M)),"/"!==j)return w+"/"+f.substr(E+1);M=E+1}}}j=f[++E]}return w+f.substring(M)},parse:function(f,w,T){var E=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+b+++"_",this._prefixCallback=T||v,this._inversePredicate=!1,this._quantified=Object.create(null),!w){var P,M=[];if(this._callback=function(j,O){j?P=j:O&&M.push(O)},this._lexer.tokenize(f).every(function(j){return E._readCallback=E._readCallback(j)}),P)throw P;return M}this._callback=w,this._lexer.tokenize(f,function(j,O){null!==j?(E._callback(j),E._callback=v):E._readCallback&&(E._readCallback=E._readCallback(O))})}},ie.exports=k},{"./N3Lexer":55}],57:[function(J,ie,ue){var q=J("./N3Util").expandPrefixedName;function l(y,e){if(!(this instanceof l))return new l(y,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!y||y[0]||(e=y,y=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),y&&this.addTriples(y)}function F(y){return"string"==typeof y||y instanceof String}l.prototype={get size(){var y=this._size;if(null!==y)return y;y=0;var e,o,u=this._graphs;for(var d in u)for(var b in e=u[d].subjects)for(var h in o=e[b])y+=Object.keys(o[h]).length;return this._size=y},_addToIndex:function(y,e,o,u){var d=y[e]||(y[e]={}),b=d[o]||(d[o]={}),h=u in b;return h||(b[u]=null),!h},_removeFromIndex:function(y,e,o,u){var d,b=y[e],h=b[o];for(d in delete h[u],h)return;for(d in delete b[o],b)return;delete y[e]},_findInIndex:function(y,e,o,u,d,b,h,k,v,f){var w,T,E,P=!e+!o+!u>1?Object.keys(this._ids):this._entities;for(var M in e&&((w=y,y={})[e]=w[e]),y){var j=P[M];if(T=y[M])for(var O in o&&((w=T,T={})[o]=w[o]),T){var L=P[O];if(E=T[O])for(var G=(u?u in E?[u]:[]:Object.keys(E)),W=G.length-1;W>=0;W--){var V={subject:"",predicate:"",object:"",graph:k};if(V[d]=j,V[b]=L,V[h]=P[G[W]],f)f.push(V);else if(v(V))return!0}}}return f},_loop:function(y,e){for(var o in y)e(o)},_loopByKey0:function(y,e,o){var u,d;if(u=y[e])for(d in u)o(d)},_loopByKey1:function(y,e,o){var u;for(u in y)y[u][e]&&o(u)},_loopBy2Keys:function(y,e,o,u){var d,b,h;if((d=y[e])&&(b=d[o]))for(h in b)u(h)},_countInIndex:function(y,e,o,u){var d,b,h,k=0;for(var v in e&&((d=y,y={})[e]=d[e]),y)if(b=y[v])for(var f in o&&((d=b,b={})[o]=d[o]),b)(h=b[f])&&(u?u in h&&k++:k+=Object.keys(h).length);return k},_getGraphs:function(y){if(!F(y))return this._graphs;var e={};return e[y]=this._graphs[y],e},_uniqueEntities:function(y){var e=Object.create(null),o=this._entities;return function(u){u in e||(e[u]=!0,y(o[u]))}},addTriple:function(y,e,o,u){e||(u=y.graph,o=y.object,e=y.predicate,y=y.subject),u=u||"";var d=this._graphs[u];d||(d=this._graphs[u]={subjects:{},predicates:{},objects:{}},Object.freeze(d));var b=this._ids,h=this._entities;y=b[y]||(b[h[++this._id]=y]=this._id),e=b[e]||(b[h[++this._id]=e]=this._id),o=b[o]||(b[h[++this._id]=o]=this._id);var k=this._addToIndex(d.subjects,y,e,o);return this._addToIndex(d.predicates,e,o,y),this._addToIndex(d.objects,o,y,e),this._size=null,k},addTriples:function(y){for(var e=y.length-1;e>=0;e--)this.addTriple(y[e])},addPrefix:function(y,e){this._prefixes[y]=e},addPrefixes:function(y){for(var e in y)this.addPrefix(e,y[e])},removeTriple:function(y,e,o,u){e||(u=y.graph,o=y.object,e=y.predicate,y=y.subject),u=u||"";var d,b,h,k=this._ids,v=this._graphs;if(!((y=k[y])&&(e=k[e])&&(o=k[o])&&(d=v[u])&&(b=d.subjects[y])&&(h=b[e])&&o in h))return!1;for(y in this._removeFromIndex(d.subjects,y,e,o),this._removeFromIndex(d.predicates,e,o,y),this._removeFromIndex(d.objects,o,y,e),null!==this._size&&this._size--,d.subjects)return!0;return delete v[u],!0},removeTriples:function(y){for(var e=y.length-1;e>=0;e--)this.removeTriple(y[e])},getTriples:function(y,e,o,u){var d=this._prefixes;return this.getTriplesByIRI(q(y,d),q(e,d),q(o,d),q(u,d))},getTriplesByIRI:function(y,e,o,u){var d,b,h,k,v=[],f=this._getGraphs(u),w=this._ids;if(F(y)&&!(b=w[y])||F(e)&&!(h=w[e])||F(o)&&!(k=w[o]))return v;for(var T in f)(d=f[T])&&(b?k?this._findInIndex(d.objects,k,b,h,"object","subject","predicate",T,null,v):this._findInIndex(d.subjects,b,h,null,"subject","predicate","object",T,null,v):h?this._findInIndex(d.predicates,h,k,null,"predicate","object","subject",T,null,v):k?this._findInIndex(d.objects,k,null,null,"object","subject","predicate",T,null,v):this._findInIndex(d.subjects,null,null,null,"subject","predicate","object",T,null,v));return v},countTriples:function(y,e,o,u){var d=this._prefixes;return this.countTriplesByIRI(q(y,d),q(e,d),q(o,d),q(u,d))},countTriplesByIRI:function(y,e,o,u){var d,b,h,k,v=0,f=this._getGraphs(u),w=this._ids;if(F(y)&&!(b=w[y])||F(e)&&!(h=w[e])||F(o)&&!(k=w[o]))return 0;for(var T in f)(d=f[T])&&(v+=y?o?this._countInIndex(d.objects,k,b,h):this._countInIndex(d.subjects,b,h,k):e?this._countInIndex(d.predicates,h,k,b):this._countInIndex(d.objects,k,b,h));return v},forEach:function(y,e,o,u,d){var b=this._prefixes;this.forEachByIRI(y,q(e,b),q(o,b),q(u,b),q(d,b))},forEachByIRI:function(y,e,o,u,d){this.someByIRI(function(b){return y(b),!1},e,o,u,d)},every:function(y,e,o,u,d){var b=this._prefixes;return this.everyByIRI(y,q(e,b),q(o,b),q(u,b),q(d,b))},everyByIRI:function(y,e,o,u,d){var b=!1,h=!this.someByIRI(function(k){return b=!0,!y(k)},e,o,u,d);return b&&h},some:function(y,e,o,u,d){var b=this._prefixes;return this.someByIRI(y,q(e,b),q(o,b),q(u,b),q(d,b))},someByIRI:function(y,e,o,u,d){var b,h,k,v,f=this._getGraphs(d),w=this._ids;if(F(e)&&!(h=w[e])||F(o)&&!(k=w[o])||F(u)&&!(v=w[u]))return!1;for(var T in f)if(b=f[T])if(h){if(v){if(this._findInIndex(b.objects,v,h,k,"object","subject","predicate",T,y,null))return!0}else if(this._findInIndex(b.subjects,h,k,null,"subject","predicate","object",T,y,null))return!0}else if(k){if(this._findInIndex(b.predicates,k,v,null,"predicate","object","subject",T,y,null))return!0}else if(v){if(this._findInIndex(b.objects,v,null,null,"object","subject","predicate",T,y,null))return!0}else if(this._findInIndex(b.subjects,null,null,null,"subject","predicate","object",T,y,null))return!0;return!1},getSubjects:function(y,e,o){var u=this._prefixes;return this.getSubjectsByIRI(q(y,u),q(e,u),q(o,u))},getSubjectsByIRI:function(y,e,o){var u=[];return this.forSubjectsByIRI(function(d){u.push(d)},y,e,o),u},forSubjects:function(y,e,o,u){var d=this._prefixes;this.forSubjectsByIRI(y,q(e,d),q(o,d),q(u,d))},forSubjectsByIRI:function(y,e,o,u){var d,b,h,k=this._ids,v=this._getGraphs(u);if(y=this._uniqueEntities(y),!(F(e)&&!(b=k[e])||F(o)&&!(h=k[o])))for(u in v)(d=v[u])&&(b?h?this._loopBy2Keys(d.predicates,b,h,y):this._loopByKey1(d.subjects,b,y):h?this._loopByKey0(d.objects,h,y):this._loop(d.subjects,y))},getPredicates:function(y,e,o){var u=this._prefixes;return this.getPredicatesByIRI(q(y,u),q(e,u),q(o,u))},getPredicatesByIRI:function(y,e,o){var u=[];return this.forPredicatesByIRI(function(d){u.push(d)},y,e,o),u},forPredicates:function(y,e,o,u){var d=this._prefixes;this.forPredicatesByIRI(y,q(e,d),q(o,d),q(u,d))},forPredicatesByIRI:function(y,e,o,u){var d,b,h,k=this._ids,v=this._getGraphs(u);if(y=this._uniqueEntities(y),!(F(e)&&!(b=k[e])||F(o)&&!(h=k[o])))for(u in v)(d=v[u])&&(b?h?this._loopBy2Keys(d.objects,h,b,y):this._loopByKey0(d.subjects,b,y):h?this._loopByKey1(d.predicates,h,y):this._loop(d.predicates,y))},getObjects:function(y,e,o){var u=this._prefixes;return this.getObjectsByIRI(q(y,u),q(e,u),q(o,u))},getObjectsByIRI:function(y,e,o){var u=[];return this.forObjectsByIRI(function(d){u.push(d)},y,e,o),u},forObjects:function(y,e,o,u){var d=this._prefixes;this.forObjectsByIRI(y,q(e,d),q(o,d),q(u,d))},forObjectsByIRI:function(y,e,o,u){var d,b,h,k=this._ids,v=this._getGraphs(u);if(y=this._uniqueEntities(y),!(F(e)&&!(b=k[e])||F(o)&&!(h=k[o])))for(u in v)(d=v[u])&&(b?h?this._loopBy2Keys(d.subjects,b,h,y):this._loopByKey1(d.objects,b,y):h?this._loopByKey0(d.predicates,h,y):this._loop(d.objects,y))},getGraphs:function(y,e,o){var u=this._prefixes;return this.getGraphsByIRI(q(y,u),q(e,u),q(o,u))},getGraphsByIRI:function(y,e,o){var u=[];return this.forGraphsByIRI(function(d){u.push(d)},y,e,o),u},forGraphs:function(y,e,o,u){var d=this._prefixes;this.forGraphsByIRI(y,q(e,d),q(o,d),q(u,d))},forGraphsByIRI:function(y,e,o,u){for(var d in this._graphs)this.someByIRI(function(b){return y(b.graph),!0},e,o,u,d)},createBlankNode:function(y){var e,o;if(y)for(e=y="_:"+y,o=1;this._ids[e];)e=y+o++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},ie.exports=l},{"./N3Util":60}],58:[function(J,ie,ue){var q=J("stream").Transform,l=J("util"),F=J("./N3Parser.js");function y(e){if(!(this instanceof y))return new y(e);q.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var o,u,d=this;new F(e).parse({on:function(b,h){switch(b){case"data":o=h;break;case"end":u=h}}},function(b,h){b&&d.emit("error",b)||h&&d.push(h)},function(b,h){d.emit("prefix",b,h)}),this._transform=function(b,h,k){o(b),k()},this._flush=function(b){u(),b()}}l.inherits(y,q),ie.exports=y},{"./N3Parser.js":56,stream:78,util:8}],59:[function(J,ie,ue){var q=J("stream").Transform,l=J("util"),F=J("./N3Writer.js");function y(e){if(!(this instanceof y))return new y(e);q.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var o=this,u=new F({write:function(d,b,h){o.push(d),h&&h()},end:function(d){o.push(null),d&&d()}},e);this._transform=function(d,b,h){u.addTriple(d,h)},this._flush=function(d){u.end(d)}}l.inherits(y,q),ie.exports=y},{"./N3Writer.js":61,stream:78,util:8}],60:[function(J,ie,ue){var l="http://www.w3.org/2001/XMLSchema#double",F={isIRI:function(y){if("string"!=typeof y)return!1;if(0===y.length)return!0;var e=y[0];return'"'!==e&&"_"!==e},isLiteral:function(y){return"string"==typeof y&&'"'===y[0]},isBlank:function(y){return"string"==typeof y&&"_:"===y.substr(0,2)},isDefaultGraph:function(y){return!y},inDefaultGraph:function(y){return!y.graph},getLiteralValue:function(y){var e=/^"([^]*)"/.exec(y);if(!e)throw new Error(y+" is not a literal");return e[1]},getLiteralType:function(y){var e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(y);if(!e)throw new Error(y+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(y){var e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(y);if(!e)throw new Error(y+" is not a literal");return e[1]?e[1].toLowerCase():""},isPrefixedName:function(y){return"string"==typeof y&&/^[^:\/"']*:[^:\/"']+$/.test(y)},expandPrefixedName:function(y,e){var o,u,d,b=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(y);return b&&(u=e[o=b[1]],d=b.index),void 0===u?y:0===d?u+y.substr(o.length+1):y.substr(0,d+3)+u+y.substr(d+o.length+4)},createIRI:function(y){return y&&'"'===y[0]?F.getLiteralValue(y):y},createLiteral:function(y,e){if(!e)switch(typeof y){case"boolean":e="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":isFinite(y)?e=y%1==0?"http://www.w3.org/2001/XMLSchema#integer":l:(e=l,isNaN(y)||(y=y>0?"INF":"-INF"));break;default:return'"'+y+'"'}return'"'+y+(/^[a-z]+(-[a-z0-9]+)*$/i.test(e)?'"@'+e.toLowerCase():'"^^'+e)},prefix:function(y){return F.prefixes({"":y})("")},prefixes:function(y){var e=Object.create(null);for(var o in y)u(o,y[o]);function u(d,b){if(b||!(d in e)){var h=Object.create(null);b=b||"",e[d]=function(k){return h[k]||(h[k]=b+k)}}return e[d]}return u}};ie.exports=F},{}],61:[function(J,ie,ue){var q=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,l=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,F=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,y={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(u,d){if(!(this instanceof e))return new e(u,d);if(u&&"function"!=typeof u.write&&(d=u,u=null),d=d||{},u)this._outputStream=u,this._endStream=void 0===d.end||!!d.end;else{var b="";this._outputStream={write:function(h,k,v){b+=h,v&&v()},end:function(h){h&&h(null,b)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(d.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),d.prefixes&&this.addPrefixes(d.prefixes))}function o(u){var d=y[u];return void 0===d&&(1===u.length?(d=u.charCodeAt(0).toString(16),d="\\u0000".substr(0,6-d.length)+d):(d=(1024*(u.charCodeAt(0)-55296)+u.charCodeAt(1)+9216).toString(16),d="\\U00000000".substr(0,10-d.length)+d)),d}e.prototype={_write:function(u,d){this._outputStream.write(u,"utf8",d)},_writeTriple:function(u,d,b,h,k){try{this._graph!==h&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(h?this._encodeIriOrBlankNode(h)+" {\n":"")),this._subject=null,this._graph="["!==h[0]?h:"]"),this._subject===u?this._predicate===d?this._write(", "+this._encodeObject(b),k):this._write(";\n    "+this._encodePredicate(this._predicate=d)+" "+this._encodeObject(b),k):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=u)+" "+this._encodePredicate(this._predicate=d)+" "+this._encodeObject(b),k)}catch(v){k&&k(v)}},_writeTripleLine:function(u,d,b,h,k){delete this._prefixMatch;try{this._write(this.tripleToString(u,d,b,h),k)}catch(v){k&&k(v)}},tripleToString:function(u,d,b,h){return this._encodeIriOrBlankNode(u)+" "+this._encodeIriOrBlankNode(d)+" "+this._encodeObject(b)+(h?" "+this._encodeIriOrBlankNode(h)+".\n":".\n")},triplesToString:function(u){return u.map(function(d){return this.tripleToString(d.subject,d.predicate,d.object,d.graph)},this).join("")},_encodeIriOrBlankNode:function(u){var d=u[0];if("["===d||"("===d||"_"===d&&":"===u[1])return u;l.test(u)&&(u=u.replace(F,o));var b=this._prefixRegex.exec(u);return b?b[1]?this._prefixIRIs[b[1]]+b[2]:u:"<"+u+">"},_encodeLiteral:function(u,d,b){return l.test(u)&&(u=u.replace(F,o)),b?'"'+u+'"@'+b:d?'"'+u+'"^^'+this._encodeIriOrBlankNode(d):'"'+u+'"'},_encodeSubject:function(u){if('"'===u[0])throw new Error("A literal as subject is not allowed: "+u);return"["===u[0]&&(this._subject="]"),this._encodeIriOrBlankNode(u)},_encodePredicate:function(u){if('"'===u[0])throw new Error("A literal as predicate is not allowed: "+u);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===u?"a":this._encodeIriOrBlankNode(u)},_encodeObject:function(u){if('"'!==u[0])return this._encodeIriOrBlankNode(u);var d=q.exec(u);if(!d)throw new Error("Invalid literal: "+u);return this._encodeLiteral(d[1],d[2],d[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(u,d,b,h,k){void 0===b?this._writeTriple(u.subject,u.predicate,u.object,u.graph||"",d):"string"!=typeof h?this._writeTriple(u,d,b,"",h):this._writeTriple(u,d,b,h,k)},addTriples:function(u){for(var d=0;d<u.length;d++)this.addTriple(u[d])},addPrefix:function(u,d,b){var h={};h[u]=d,this.addPrefixes(h,b)},addPrefixes:function(u,d){var b=this._prefixIRIs,h=!1;for(var k in u){var v=u[k];/[#\/]$/.test(v)&&b[v]!==(k+=":")&&(h=!0,b[v]=k,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+k+" <"+v+">.\n"))}if(h){var f="",w="";for(var T in b)f+=f?"|"+T:T,w+=(w?"|":"")+b[T];f=f.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+w+")[^/]*$|^("+f+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(h?"\n":"",d)},blank:function(u,d){var b,h,k=u;switch(void 0===u?k=[]:"string"==typeof u?k=[{predicate:u,object:d}]:"length"in u||(k=[u]),h=k.length){case 0:return"[]";case 1:if("["!==(b=k[0]).object[0])return"[ "+this._encodePredicate(b.predicate)+" "+this._encodeObject(b.object)+" ]";default:for(var v="[",f=0;f<h;f++)(b=k[f]).predicate===u?v+=", "+this._encodeObject(b.object):(v+=(f?";\n  ":"\n  ")+this._encodePredicate(b.predicate)+" "+this._encodeObject(b.object),u=b.predicate);return v+"\n]"}},list:function(u){for(var d=u&&u.length||0,b=new Array(d),h=0;h<d;h++)b[h]=this._encodeObject(u[h]);return"("+b.join(" ")+")"},_prefixRegex:/$0^/,end:function(u){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var d=u&&function(b,h){d=null,u(b,h)};if(this._endStream)try{return this._outputStream.end(d)}catch(b){}d&&d()}},ie.exports=e},{}],62:[function(J,ie,ue){var q,l,F=ie.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(T){if(q===setTimeout)return setTimeout(T,0);if((q===y||!q)&&setTimeout)return q=setTimeout,setTimeout(T,0);try{return q(T,0)}catch(E){try{return q.call(null,T,0)}catch(P){return q.call(this,T,0)}}}!function(){try{q="function"==typeof setTimeout?setTimeout:y}catch(T){q=y}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(T){l=e}}();var u,d=[],b=!1,h=-1;function k(){b&&u&&(b=!1,u.length?d=u.concat(d):h=-1,d.length&&v())}function v(){if(!b){var T=o(k);b=!0;for(var E=d.length;E;){for(u=d,d=[];++h<E;)u&&u[h].run();h=-1,E=d.length}u=null,b=!1,function(P){if(l===clearTimeout)return clearTimeout(P);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(P);try{l(P)}catch(M){try{return l.call(null,P)}catch(j){return l.call(this,P)}}}(T)}}function f(T,E){this.fun=T,this.array=E}function w(){}F.nextTick=function(T){var E=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)E[P-1]=arguments[P];d.push(new f(T,E)),1!==d.length||b||o(v)},f.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=w,F.addListener=w,F.once=w,F.off=w,F.removeListener=w,F.removeAllListeners=w,F.emit=w,F.prependListener=w,F.prependOnceListener=w,F.listeners=function(T){return[]},F.binding=function(T){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(T){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},{}],63:[function(J,ie,ue){"use strict";function q(F,y){return Object.prototype.hasOwnProperty.call(F,y)}ie.exports=function(F,y,e,o){y=y||"&",e=e||"=";var u={};if("string"!=typeof F||0===F.length)return u;var d=/\+/g;F=F.split(y);var b=1e3;o&&"number"==typeof o.maxKeys&&(b=o.maxKeys);var h=F.length;b>0&&h>b&&(h=b);for(var k=0;k<h;++k){var v,f,w,T,E=F[k].replace(d,"%20"),P=E.indexOf(e);P>=0?(v=E.substr(0,P),f=E.substr(P+1)):(v=E,f=""),w=decodeURIComponent(v),T=decodeURIComponent(f),q(u,w)?l(u[w])?u[w].push(T):u[w]=[u[w],T]:u[w]=T}return u};var l=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)}},{}],64:[function(J,ie,ue){"use strict";var q=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};ie.exports=function(e,o,u,d){return o=o||"&",u=u||"=",null===e&&(e=void 0),"object"==typeof e?F(y(e),function(b){var h=encodeURIComponent(q(b))+u;return l(e[b])?F(e[b],function(k){return h+encodeURIComponent(q(k))}).join(o):h+encodeURIComponent(q(e[b]))}).join(o):d?encodeURIComponent(q(d))+u+encodeURIComponent(q(e)):""};var l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function F(e,o){if(e.map)return e.map(o);for(var u=[],d=0;d<e.length;d++)u.push(o(e[d],d));return u}var y=Object.keys||function(e){var o=[];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&o.push(u);return o}},{}],65:[function(J,ie,ue){"use strict";ue.decode=ue.parse=J("./decode"),ue.encode=ue.stringify=J("./encode")},{"./decode":63,"./encode":64}],66:[function(J,ie,ue){ie.exports=J("./lib")},{"./lib":75}],67:[function(J,ie,ue){"use strict";ie.exports=class xp{constructor(l,F=new Map,y=0){this.prefix=l,this._existing=F,this.counter=y}clone(){const{prefix:l,_existing:F,counter:y}=this;return new xp(l,new Map(F),y)}getId(l){const F=l&&this._existing.get(l);if(F)return F;const y=this.prefix+this.counter;return this.counter++,l&&this._existing.set(l,y),y}hasId(l){return this._existing.has(l)}getOldIds(){return[...this._existing.keys()]}}},{}],68:[function(J,ie,ue){"use strict";J("setimmediate");const q=self.crypto||self.msCrypto;ie.exports=class{constructor(l){if(!q||!q.subtle)throw new Error("crypto.subtle not found.");if("sha256"===l)this.algorithm={name:"SHA-256"};else{if("sha1"!==l)throw new Error(`Unsupport algorithm "${l}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(l){this._content+=l}async digest(){const l=(new TextEncoder).encode(this._content),F=new Uint8Array(await q.subtle.digest(this.algorithm,l));let y="";for(let e=0;e<F.length;++e)y+=F[e].toString(16).padStart(2,"0");return y}}},{setimmediate:77}],69:[function(J,ie,ue){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",l="http://www.w3.org/2001/XMLSchema#string",F="Literal",y={};function e(d,b){return d.subject.termType===b.subject.termType&&d.object.termType===b.object.termType&&d.subject.value===b.subject.value&&d.predicate.value===b.predicate.value&&d.object.value===b.object.value&&(d.object.termType!==F||d.object.datatype.termType===b.object.datatype.termType&&d.object.language===b.object.language&&d.object.datatype.value===b.object.datatype.value)}y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),ie.exports=class Ac{static parse(b){const h=[],k={},v=b.split(y.eoln);let f=0;for(const w of v){if(f++,y.empty.test(w))continue;const T=w.match(y.quad);if(null===T)throw new Error("N-Quads parse error on line "+f+".");const E={subject:null,predicate:null,object:null,graph:null};if(void 0!==T[1]?E.subject={termType:"NamedNode",value:T[1]}:E.subject={termType:"BlankNode",value:T[2]},E.predicate={termType:"NamedNode",value:T[3]},void 0!==T[4]?E.object={termType:"NamedNode",value:T[4]}:void 0!==T[5]?E.object={termType:"BlankNode",value:T[5]}:(E.object={termType:F,value:void 0,datatype:{termType:"NamedNode"}},void 0!==T[7]?E.object.datatype.value=T[7]:void 0!==T[8]?(E.object.datatype.value=q,E.object.language=T[8]):E.object.datatype.value=l,E.object.value=T[6].replace(u,function(P,M,j,O){if(M)switch(M){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(j)return String.fromCharCode(parseInt(j,16));if(O)throw new Error("Unsupported U escape")})),void 0!==T[9]?E.graph={termType:"NamedNode",value:T[9]}:void 0!==T[10]?E.graph={termType:"BlankNode",value:T[10]}:E.graph={termType:"DefaultGraph",value:""},E.graph.value in k){let P=!0;const M=k[E.graph.value];for(const j of M)if(e(j,E)){P=!1;break}P&&(M.push(E),h.push(E))}else k[E.graph.value]=[E],h.push(E)}return h}static serialize(b){Array.isArray(b)||(b=Ac.legacyDatasetToQuads(b));const h=[];for(const k of b)h.push(Ac.serializeQuad(k));return h.sort().join("")}static serializeQuad(b){const h=b.subject,k=b.predicate,v=b.object,f=b.graph;let w="";return"NamedNode"===h.termType?w+=`<${h.value}>`:w+=`${h.value}`,w+=` <${k.value}> `,"NamedNode"===v.termType?w+=`<${v.value}>`:"BlankNode"===v.termType?w+=v.value:(w+=`"${T=v.value,T.replace(o,function(E){switch(E){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,v.datatype.value===q?v.language&&(w+=`@${v.language}`):v.datatype.value!==l&&(w+=`^^<${v.datatype.value}>`)),"NamedNode"===f.termType?w+=` <${f.value}>`:"BlankNode"===f.termType&&(w+=` ${f.value}`),w+" .\n";var T}static legacyDatasetToQuads(b){const h=[],k={"blank node":"BlankNode",IRI:"NamedNode",literal:F};for(const v in b)b[v].forEach(f=>{const w={};for(const T in f){const E=f[T],P={termType:k[E.type],value:E.value};P.termType===F&&(P.datatype={termType:"NamedNode"},"datatype"in E&&(P.datatype.value=E.datatype),"language"in E?("datatype"in E||(P.datatype.value=q),P.language=E.language):"datatype"in E||(P.datatype.value=l)),w[T]=P}w.graph="@default"===v?{termType:"DefaultGraph",value:""}:{termType:v.startsWith("_:")?"BlankNode":"NamedNode",value:v},h.push(w)});return h}};const o=/["\\\n\r]/g,u=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],70:[function(J,ie,ue){"use strict";ie.exports=class{constructor(q){this.current=q.sort(),this.done=!1,this.dir=new Map;for(let l=0;l<q.length;++l)this.dir.set(q[l],!0)}hasNext(){return!this.done}next(){const{current:q,dir:l}=this,F=q.slice();let y=null,e=0;const o=q.length;for(let u=0;u<o;++u){const d=q[u],b=l.get(d);(null===y||d>y)&&(b&&u>0&&d>q[u-1]||!b&&u<o-1&&d>q[u+1])&&(y=d,e=u)}if(null===y)this.done=!0;else{const u=l.get(y)?e-1:e+1;q[e]=q[u],q[u]=y;for(const d of q)d>y&&l.set(d,!l.get(d))}return F}}},{}],71:[function(J,ie,ue){(function(q){(function(){"use strict";const l=J("./IdentifierIssuer"),F=J("./MessageDigest"),y=J("./Permuter"),e=J("./NQuads");function o(u,d){return u.hash<d.hash?-1:u.hash>d.hash?1:0}ie.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new l("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(u){this.quads=u;for(const w of u)this._addBlankNodeQuadInfo({quad:w,component:w.subject}),this._addBlankNodeQuadInfo({quad:w,component:w.object}),this._addBlankNodeQuadInfo({quad:w,component:w.graph});const d=new Map,b=[...this.blankNodeInfo.keys()];let h=0;for(const w of b)++h%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:w,hashToBlankNodes:d});const k=[...d.keys()].sort(),v=[];for(const w of k){const T=d.get(w);if(T.length>1){v.push(T);continue}const E=T[0];this.canonicalIssuer.getId(E)}for(const w of v){const T=[];for(const E of w){if(this.canonicalIssuer.hasId(E))continue;const P=new l("_:b");P.getId(E);const M=await this.hashNDegreeQuads(E,P);T.push(M)}T.sort(o);for(const E of T){const P=E.issuer.getOldIds();for(const M of P)this.canonicalIssuer.getId(M)}}const f=[];for(const w of this.quads){const T=gn({},w);T.subject=this._useCanonicalId({component:T.subject}),T.object=this._useCanonicalId({component:T.object}),T.graph=this._useCanonicalId({component:T.graph}),f.push(e.serializeQuad(T))}return f.sort(),f.join("")}async hashFirstDegreeQuads(u){const d=[],b=this.blankNodeInfo.get(u),h=b.quads;for(const v of h){const f={subject:null,predicate:v.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(u,v.subject,"subject"),f.object=this.modifyFirstDegreeComponent(u,v.object,"object"),f.graph=this.modifyFirstDegreeComponent(u,v.graph,"graph"),d.push(e.serializeQuad(f))}d.sort();const k=new F(this.hashAlgorithm);for(const v of d)k.update(v);return b.hash=await k.digest(),b.hash}async hashRelatedBlankNode(u,d,b,h){let k;k=this.canonicalIssuer.hasId(u)?this.canonicalIssuer.getId(u):b.hasId(u)?b.getId(u):this.blankNodeInfo.get(u).hash;const v=new F(this.hashAlgorithm);return v.update(h),"g"!==h&&v.update(this.getRelatedPredicate(d)),v.update(k),v.digest()}async hashNDegreeQuads(u,d){const b=new F(this.hashAlgorithm),h=await this.createHashToRelated(u,d),k=[...h.keys()].sort();for(const v of k){b.update(v);let f,w="";const T=new y(h.get(v));let E=0;for(;T.hasNext();){const P=T.next();++E%3==0&&await this._yield();let M=d.clone(),j="";const O=[];let L=!1;for(const G of P)if(this.canonicalIssuer.hasId(G)?j+=this.canonicalIssuer.getId(G):(M.hasId(G)||O.push(G),j+=M.getId(G)),0!==w.length&&j>w){L=!0;break}if(!L){for(const G of O){const W=await this.hashNDegreeQuads(G,M);if(j+=M.getId(G),j+=`<${W.hash}>`,M=W.issuer,0!==w.length&&j>w){L=!0;break}}L||(0===w.length||j<w)&&(w=j,f=M)}}b.update(w),d=f}return{hash:await b.digest(),issuer:d}}modifyFirstDegreeComponent(u,d){return"BlankNode"!==d.termType?d:{termType:"BlankNode",value:d.value===u?"_:a":"_:z"}}getRelatedPredicate(u){return`<${u.predicate.value}>`}async createHashToRelated(u,d){const b=new Map,h=this.blankNodeInfo.get(u).quads;let k=0;for(const v of h)++k%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:u,issuer:d,hashToRelated:b}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:u,issuer:d,hashToRelated:b}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:u,issuer:d,hashToRelated:b})]);return b}async _hashAndTrackBlankNode({id:u,hashToBlankNodes:d}){const b=await this.hashFirstDegreeQuads(u),h=d.get(b);h?h.push(u):d.set(b,[u])}_addBlankNodeQuadInfo({quad:u,component:d}){if("BlankNode"!==d.termType)return;const b=d.value,h=this.blankNodeInfo.get(b);h?h.quads.add(u):this.blankNodeInfo.set(b,{quads:new Set([u]),hash:null})}async _addRelatedBlankNodeHash({quad:u,component:d,position:b,id:h,issuer:k,hashToRelated:v}){if("BlankNode"!==d.termType||d.value===h)return;const f=d.value,w=await this.hashRelatedBlankNode(f,u,k,b),T=v.get(w);T?T.push(f):v.set(w,[f])}_useCanonicalId({component:u}){return"BlankNode"!==u.termType||u.value.startsWith(this.canonicalIssuer.prefix)?u:{termType:"BlankNode",value:this.canonicalIssuer.getId(u.value)}}async _yield(){return new Promise(u=>q(u))}}}).call(this)}).call(this,J("timers").setImmediate)},{"./IdentifierIssuer":67,"./MessageDigest":68,"./NQuads":69,"./Permuter":70,timers:114}],72:[function(J,ie,ue){"use strict";const q=J("./IdentifierIssuer"),l=J("./MessageDigest"),F=J("./Permuter"),y=J("./NQuads");function e(o,u){return o.hash<u.hash?-1:o.hash>u.hash?1:0}ie.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new q("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(o){this.quads=o;for(const v of o)this._addBlankNodeQuadInfo({quad:v,component:v.subject}),this._addBlankNodeQuadInfo({quad:v,component:v.object}),this._addBlankNodeQuadInfo({quad:v,component:v.graph});const u=new Map,d=[...this.blankNodeInfo.keys()];for(const v of d)this._hashAndTrackBlankNode({id:v,hashToBlankNodes:u});const b=[...u.keys()].sort(),h=[];for(const v of b){const f=u.get(v);if(f.length>1){h.push(f);continue}const w=f[0];this.canonicalIssuer.getId(w)}for(const v of h){const f=[];for(const w of v){if(this.canonicalIssuer.hasId(w))continue;const T=new q("_:b");T.getId(w);const E=this.hashNDegreeQuads(w,T);f.push(E)}f.sort(e);for(const w of f){const T=w.issuer.getOldIds();for(const E of T)this.canonicalIssuer.getId(E)}}const k=[];for(const v of this.quads){const f=gn({},v);f.subject=this._useCanonicalId({component:f.subject}),f.object=this._useCanonicalId({component:f.object}),f.graph=this._useCanonicalId({component:f.graph}),k.push(y.serializeQuad(f))}return k.sort(),k.join("")}hashFirstDegreeQuads(o){const u=[],d=this.blankNodeInfo.get(o),b=d.quads;for(const k of b){const v={subject:null,predicate:k.predicate,object:null,graph:null};v.subject=this.modifyFirstDegreeComponent(o,k.subject,"subject"),v.object=this.modifyFirstDegreeComponent(o,k.object,"object"),v.graph=this.modifyFirstDegreeComponent(o,k.graph,"graph"),u.push(y.serializeQuad(v))}u.sort();const h=new l(this.hashAlgorithm);for(const k of u)h.update(k);return d.hash=h.digest(),d.hash}hashRelatedBlankNode(o,u,d,b){let h;h=this.canonicalIssuer.hasId(o)?this.canonicalIssuer.getId(o):d.hasId(o)?d.getId(o):this.blankNodeInfo.get(o).hash;const k=new l(this.hashAlgorithm);return k.update(b),"g"!==b&&k.update(this.getRelatedPredicate(u)),k.update(h),k.digest()}hashNDegreeQuads(o,u){const d=new l(this.hashAlgorithm),b=this.createHashToRelated(o,u),h=[...b.keys()].sort();for(const k of h){d.update(k);let v,f="";const w=new F(b.get(k));for(;w.hasNext();){const T=w.next();let E=u.clone(),P="";const M=[];let j=!1;for(const O of T)if(this.canonicalIssuer.hasId(O)?P+=this.canonicalIssuer.getId(O):(E.hasId(O)||M.push(O),P+=E.getId(O)),0!==f.length&&P>f){j=!0;break}if(!j){for(const O of M){const L=this.hashNDegreeQuads(O,E);if(P+=E.getId(O),P+=`<${L.hash}>`,E=L.issuer,0!==f.length&&P>f){j=!0;break}}j||(0===f.length||P<f)&&(f=P,v=E)}}d.update(f),u=v}return{hash:d.digest(),issuer:u}}modifyFirstDegreeComponent(o,u){return"BlankNode"!==u.termType?u:{termType:"BlankNode",value:u.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,u){const d=new Map,b=this.blankNodeInfo.get(o).quads;for(const h of b)this._addRelatedBlankNodeHash({quad:h,component:h.subject,position:"s",id:o,issuer:u,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:h,component:h.object,position:"o",id:o,issuer:u,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:h,component:h.graph,position:"g",id:o,issuer:u,hashToRelated:d});return d}_hashAndTrackBlankNode({id:o,hashToBlankNodes:u}){const d=this.hashFirstDegreeQuads(o),b=u.get(d);b?b.push(o):u.set(d,[o])}_addBlankNodeQuadInfo({quad:o,component:u}){if("BlankNode"!==u.termType)return;const d=u.value,b=this.blankNodeInfo.get(d);b?b.quads.add(o):this.blankNodeInfo.set(d,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:u,position:d,id:b,issuer:h,hashToRelated:k}){if("BlankNode"!==u.termType||u.value===b)return;const v=u.value,f=this.hashRelatedBlankNode(v,o,h,d),w=k.get(f);w?w.push(v):k.set(f,[v])}_useCanonicalId({component:o}){return"BlankNode"!==o.termType||o.value.startsWith(this.canonicalIssuer.prefix)?o:{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}}}},{"./IdentifierIssuer":67,"./MessageDigest":68,"./NQuads":69,"./Permuter":70}],73:[function(J,ie,ue){"use strict";const q=J("./URDNA2015");ie.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(l,F,y){return"BlankNode"!==F.termType?F:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===l?"_:a":"_:z"}}getRelatedPredicate(l){return l.predicate.value}async createHashToRelated(l,F){const y=new Map,e=this.blankNodeInfo.get(l).quads;let o=0;for(const u of e){let d,b;if("BlankNode"===u.subject.termType&&u.subject.value!==l)b=u.subject.value,d="p";else{if("BlankNode"!==u.object.termType||u.object.value===l)continue;b=u.object.value,d="r"}++o%100==0&&await this._yield();const h=await this.hashRelatedBlankNode(b,u,F,d),k=y.get(h);k?k.push(b):y.set(h,[b])}return y}}},{"./URDNA2015":71}],74:[function(J,ie,ue){"use strict";const q=J("./URDNA2015Sync");ie.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(l,F,y){return"BlankNode"!==F.termType?F:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===l?"_:a":"_:z"}}getRelatedPredicate(l){return l.predicate.value}createHashToRelated(l,F){const y=new Map,e=this.blankNodeInfo.get(l).quads;for(const o of e){let u,d;if("BlankNode"===o.subject.termType&&o.subject.value!==l)d=o.subject.value,u="p";else{if("BlankNode"!==o.object.termType||o.object.value===l)continue;d=o.object.value,u="r"}const b=this.hashRelatedBlankNode(d,o,F,u),h=y.get(b);h?h.push(d):y.set(b,[d])}return y}}},{"./URDNA2015Sync":72}],75:[function(J,ie,ue){"use strict";const q=J("./URDNA2015"),l=J("./URGNA2012"),F=J("./URDNA2015Sync"),y=J("./URGNA2012Sync");let e;try{e=J("rdf-canonize-native")}catch(u){}const o={};ie.exports=o,o.NQuads=J("./NQuads"),o.IdentifierIssuer=J("./IdentifierIssuer"),o._rdfCanonizeNative=function(u){return u&&(e=u),e},o.canonize=async function(u,d){if(Array.isArray(u)||(u=o.NQuads.legacyDatasetToQuads(u)),d.useNative){if(!e)throw new Error("rdf-canonize-native not available");return new Promise((b,h)=>e.canonize(u,d,(k,v)=>k?h(k):b(v)))}if("URDNA2015"===d.algorithm)return new q(d).main(u);if("URGNA2012"===d.algorithm)return new l(d).main(u);throw"algorithm"in d?new Error("Invalid RDF Dataset Canonicalization algorithm: "+d.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},o._canonizeSync=function(u,d){if(Array.isArray(u)||(u=o.NQuads.legacyDatasetToQuads(u)),d.useNative){if(e)return e.canonizeSync(u,d);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===d.algorithm)return new F(d).main(u);if("URGNA2012"===d.algorithm)return new y(d).main(u);throw"algorithm"in d?new Error("Invalid RDF Dataset Canonicalization algorithm: "+d.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":67,"./NQuads":69,"./URDNA2015":71,"./URDNA2015Sync":72,"./URGNA2012":73,"./URGNA2012Sync":74,"rdf-canonize-native":4}],76:[function(J,ie,ue){var q=J("buffer"),l=q.Buffer;function F(e,o){for(var u in e)o[u]=e[u]}function y(e,o,u){return l(e,o,u)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?ie.exports=q:(F(q,ue),ue.Buffer=y),y.prototype=Object.create(l.prototype),F(l,y),y.from=function(e,o,u){if("number"==typeof e)throw new TypeError("Argument must not be a number");return l(e,o,u)},y.alloc=function(e,o,u){if("number"!=typeof e)throw new TypeError("Argument must be a number");var d=l(e);return void 0!==o?"string"==typeof u?d.fill(o,u):d.fill(o):d.fill(0),d},y.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return l(e)},y.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return q.SlowBuffer(e)}},{buffer:9}],77:[function(J,ie,ue){(function(q,l){(function(){!function(F,y){"use strict";if(!F.setImmediate){var e,o,u,d,b,h=1,k={},v=!1,f=F.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(F);w=w&&w.setTimeout?w:F,"[object process]"==={}.toString.call(F.process)?e=function(P){q.nextTick(function(){E(P)})}:function(){if(F.postMessage&&!F.importScripts){var P=!0,M=F.onmessage;return F.onmessage=function(){P=!1},F.postMessage("","*"),F.onmessage=M,P}}()?(d="setImmediate$"+Math.random()+"$",b=function(P){P.source===F&&"string"==typeof P.data&&0===P.data.indexOf(d)&&E(+P.data.slice(d.length))},F.addEventListener?F.addEventListener("message",b,!1):F.attachEvent("onmessage",b),e=function(P){F.postMessage(d+P,"*")}):F.MessageChannel?((u=new MessageChannel).port1.onmessage=function(P){E(P.data)},e=function(P){u.port2.postMessage(P)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,e=function(P){var M=f.createElement("script");M.onreadystatechange=function(){E(P),M.onreadystatechange=null,o.removeChild(M),M=null},o.appendChild(M)}):e=function(P){setTimeout(E,0,P)},w.setImmediate=function(P){"function"!=typeof P&&(P=new Function(""+P));for(var M=new Array(arguments.length-1),j=0;j<M.length;j++)M[j]=arguments[j+1];var O={callback:P,args:M};return k[h]=O,e(h),h++},w.clearImmediate=T}function T(P){delete k[P]}function E(P){if(v)setTimeout(E,0,P);else{var M=k[P];if(M){v=!0;try{!function(j){var O=j.callback,L=j.args;switch(L.length){case 0:O();break;case 1:O(L[0]);break;case 2:O(L[0],L[1]);break;case 3:O(L[0],L[1],L[2]);break;default:O.apply(undefined,L)}}(M)}finally{T(P),v=!1}}}}}("undefined"==typeof self?void 0===l?this:l:self)}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:62}],78:[function(J,ie,ue){ie.exports=l;var q=J("events").EventEmitter;function l(){q.call(this)}J("inherits")(l,q),l.Readable=J("readable-stream/lib/_stream_readable.js"),l.Writable=J("readable-stream/lib/_stream_writable.js"),l.Duplex=J("readable-stream/lib/_stream_duplex.js"),l.Transform=J("readable-stream/lib/_stream_transform.js"),l.PassThrough=J("readable-stream/lib/_stream_passthrough.js"),l.finished=J("readable-stream/lib/internal/streams/end-of-stream.js"),l.pipeline=J("readable-stream/lib/internal/streams/pipeline.js"),l.Stream=l,l.prototype.pipe=function(F,y){var e=this;function o(f){F.writable&&!1===F.write(f)&&e.pause&&e.pause()}function u(){e.readable&&e.resume&&e.resume()}e.on("data",o),F.on("drain",u),F._isStdio||y&&!1===y.end||(e.on("end",b),e.on("close",h));var d=!1;function b(){d||(d=!0,F.end())}function h(){d||(d=!0,"function"==typeof F.destroy&&F.destroy())}function k(f){if(v(),0===q.listenerCount(this,"error"))throw f}function v(){e.removeListener("data",o),F.removeListener("drain",u),e.removeListener("end",b),e.removeListener("close",h),e.removeListener("error",k),F.removeListener("error",k),e.removeListener("end",v),e.removeListener("close",v),F.removeListener("close",v)}return e.on("error",k),F.on("error",k),e.on("end",v),e.on("close",v),F.on("close",v),F.emit("pipe",e),F}},{events:15,inherits:26,"readable-stream/lib/_stream_duplex.js":80,"readable-stream/lib/_stream_passthrough.js":81,"readable-stream/lib/_stream_readable.js":82,"readable-stream/lib/_stream_transform.js":83,"readable-stream/lib/_stream_writable.js":84,"readable-stream/lib/internal/streams/end-of-stream.js":88,"readable-stream/lib/internal/streams/pipeline.js":90}],79:[function(J,ie,ue){"use strict";var q={};function l(y,e,o){o||(o=Error);var u=function(d){var b,h;function k(v,f,w){return d.call(this,(T=v,E=f,P=w,"string"==typeof e?e:e(T,E,P)))||this;var T,E,P}return h=d,(b=k).prototype=Object.create(h.prototype),b.prototype.constructor=b,b.__proto__=h,k}(o);u.prototype.name=o.name,u.prototype.code=y,q[y]=u}function F(y,e){if(Array.isArray(y)){var o=y.length;return y=y.map(function(u){return String(u)}),o>2?"one of ".concat(e," ").concat(y.slice(0,o-1).join(", "),", or ")+y[o-1]:2===o?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}l("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(y,e,o){var u,d,h,v,f,w;if("string"==typeof e&&(d="not ",e.substr(0,d.length)===d)?(u="must not be",e=e.replace(/^not /,"")):u="must be",v=y,f=" argument",(void 0===w||w>v.length)&&(w=v.length),v.substring(w-f.length,w)===f)h="The ".concat(y," ").concat(u," ").concat(F(e,"type"));else{var k=function(v,f,w){return"number"!=typeof w&&(w=0),!(w+".".length>v.length)&&-1!==v.indexOf(".",w)}(y)?"property":"argument";h='The "'.concat(y,'" ').concat(k," ").concat(u," ").concat(F(e,"type"))}return h+". Received type ".concat(typeof o)},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ie.exports.codes=q},{}],80:[function(J,ie,ue){(function(q){(function(){"use strict";var l=Object.keys||function(k){var v=[];for(var f in k)v.push(f);return v};ie.exports=d;var F=J("./_stream_readable"),y=J("./_stream_writable");J("inherits")(d,F);for(var e=l(y.prototype),o=0;o<e.length;o++){var u=e[o];d.prototype[u]||(d.prototype[u]=y.prototype[u])}function d(k){if(!(this instanceof d))return new d(k);F.call(this,k),y.call(this,k),this.allowHalfOpen=!0,k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",b)))}function b(){this._writableState.ended||q.nextTick(h,this)}function h(k){k.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}})}).call(this)}).call(this,J("_process"))},{"./_stream_readable":82,"./_stream_writable":84,_process:62,inherits:26}],81:[function(J,ie,ue){"use strict";ie.exports=l;var q=J("./_stream_transform");function l(F){if(!(this instanceof l))return new l(F);q.call(this,F)}J("inherits")(l,q),l.prototype._transform=function(F,y,e){e(null,F)}},{"./_stream_transform":83,inherits:26}],82:[function(J,ie,ue){(function(q,l){(function(){"use strict";var F;ie.exports=V,V.ReadableState=W,J("events").EventEmitter;var d,y=function(U,H){return U.listeners(H).length},e=J("./internal/streams/stream"),o=J("buffer").Buffer,u=l.Uint8Array||function(){},b=J("util");d=b&&b.debuglog?b.debuglog("stream"):function(){};var h,k,v,f=J("./internal/streams/buffer_list"),w=J("./internal/streams/destroy"),T=J("./internal/streams/state").getHighWaterMark,E=J("../errors").codes,P=E.ERR_INVALID_ARG_TYPE,M=E.ERR_STREAM_PUSH_AFTER_EOF,j=E.ERR_METHOD_NOT_IMPLEMENTED,O=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;J("inherits")(V,e);var L=w.errorOrDestroy,G=["error","close","destroy","pause","resume"];function W(U,H,ee){F=F||J("./_stream_duplex"),U=U||{},"boolean"!=typeof ee&&(ee=H instanceof F),this.objectMode=!!U.objectMode,ee&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=T(this,U,"readableHighWaterMark",ee),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==U.emitClose,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(h||(h=J("string_decoder/").StringDecoder),this.decoder=new h(U.encoding),this.encoding=U.encoding)}function V(U){if(F=F||J("./_stream_duplex"),!(this instanceof V))return new V(U);var H=this instanceof F;this._readableState=new W(U,this,H),this.readable=!0,U&&("function"==typeof U.read&&(this._read=U.read),"function"==typeof U.destroy&&(this._destroy=U.destroy)),e.call(this)}function $(U,H,ee,pe,Ne){d("readableAddChunk",H);var ke,Je,Ke,at,pt,Pe=U._readableState;if(null===H)Pe.reading=!1,function(Je,Ke){if(d("onEofChunk"),!Ke.ended){if(Ke.decoder){var at=Ke.decoder.end();at&&at.length&&(Ke.buffer.push(at),Ke.length+=Ke.objectMode?1:at.length)}Ke.ended=!0,Ke.sync?te(Je):(Ke.needReadable=!1,Ke.emittedReadable||(Ke.emittedReadable=!0,se(Je)))}}(U,Pe);else if(Ne||(Je=Pe,pt=Ke=H,o.isBuffer(pt)||pt instanceof u||"string"==typeof Ke||void 0===Ke||Je.objectMode||(at=new P("chunk",["string","Buffer","Uint8Array"],Ke)),ke=at),ke)L(U,ke);else if(Pe.objectMode||H&&H.length>0)if("string"==typeof H||Pe.objectMode||Object.getPrototypeOf(H)===o.prototype||(H=function(Je){return o.from(Je)}(H)),pe)Pe.endEmitted?L(U,new O):fe(U,Pe,H,!0);else if(Pe.ended)L(U,new M);else{if(Pe.destroyed)return!1;Pe.reading=!1,Pe.decoder&&!ee?(H=Pe.decoder.write(H),Pe.objectMode||0!==H.length?fe(U,Pe,H,!1):ne(U,Pe)):fe(U,Pe,H,!1)}else pe||(Pe.reading=!1,ne(U,Pe));return!Pe.ended&&(Pe.length<Pe.highWaterMark||0===Pe.length)}function fe(U,H,ee,pe){H.flowing&&0===H.length&&!H.sync?(H.awaitDrain=0,U.emit("data",ee)):(H.length+=H.objectMode?1:ee.length,pe?H.buffer.unshift(ee):H.buffer.push(ee),H.needReadable&&te(U)),ne(U,H)}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),V.prototype.destroy=w.destroy,V.prototype._undestroy=w.undestroy,V.prototype._destroy=function(U,H){H(U)},V.prototype.push=function(U,H){var ee,pe=this._readableState;return pe.objectMode?ee=!0:"string"==typeof U&&((H=H||pe.defaultEncoding)!==pe.encoding&&(U=o.from(U,H),H=""),ee=!0),$(this,U,H,!1,ee)},V.prototype.unshift=function(U){return $(this,U,null,!0,!1)},V.prototype.isPaused=function(){return!1===this._readableState.flowing},V.prototype.setEncoding=function(U){h||(h=J("string_decoder/").StringDecoder);var H=new h(U);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ee=this._readableState.buffer.head,pe="";null!==ee;)pe+=H.write(ee.data),ee=ee.next;return this._readableState.buffer.clear(),""!==pe&&this._readableState.buffer.push(pe),this._readableState.length=pe.length,this};var ce=1073741824;function xe(U,H){return U<=0||0===H.length&&H.ended?0:H.objectMode?1:U!=U?H.flowing&&H.length?H.buffer.head.data.length:H.length:(U>H.highWaterMark&&(H.highWaterMark=((ee=U)>=ce?ee=ce:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee)),U<=H.length?U:H.ended?H.length:(H.needReadable=!0,0));var ee}function te(U){var H=U._readableState;d("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(d("emitReadable",H.flowing),H.emittedReadable=!0,q.nextTick(se,U))}function se(U){var H=U._readableState;d("emitReadable_",H.destroyed,H.length,H.ended),H.destroyed||!H.length&&!H.ended||(U.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,ye(U)}function ne(U,H){H.readingMore||(H.readingMore=!0,q.nextTick(ve,U,H))}function ve(U,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&0===H.length);){var ee=H.length;if(d("maybeReadMore read 0"),U.read(0),ee===H.length)break}H.readingMore=!1}function Ce(U){var H=U._readableState;H.readableListening=U.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:U.listenerCount("data")>0&&U.resume()}function me(U){d("readable nexttick read 0"),U.read(0)}function de(U,H){d("resume",H.reading),H.reading||U.read(0),H.resumeScheduled=!1,U.emit("resume"),ye(U),H.flowing&&!H.reading&&U.read(0)}function ye(U){var H=U._readableState;for(d("flow",H.flowing);H.flowing&&null!==U.read(););}function Ee(U,H){return 0===H.length?null:(H.objectMode?ee=H.buffer.shift():!U||U>=H.length?(ee=H.decoder?H.buffer.join(""):1===H.buffer.length?H.buffer.first():H.buffer.concat(H.length),H.buffer.clear()):ee=H.buffer.consume(U,H.decoder),ee);var ee}function Be(U){var H=U._readableState;d("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,q.nextTick(Ie,H,U))}function Ie(U,H){if(d("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&0===U.length&&(U.endEmitted=!0,H.readable=!1,H.emit("end"),U.autoDestroy)){var ee=H._writableState;(!ee||ee.autoDestroy&&ee.finished)&&H.destroy()}}function qe(U,H){for(var ee=0,pe=U.length;ee<pe;ee++)if(U[ee]===H)return ee;return-1}V.prototype.read=function(U){d("read",U),U=parseInt(U,10);var H=this._readableState,ee=U;if(0!==U&&(H.emittedReadable=!1),0===U&&H.needReadable&&((0!==H.highWaterMark?H.length>=H.highWaterMark:H.length>0)||H.ended))return d("read: emitReadable",H.length,H.ended),0===H.length&&H.ended?Be(this):te(this),null;if(0===(U=xe(U,H))&&H.ended)return 0===H.length&&Be(this),null;var pe,Ne=H.needReadable;return d("need readable",Ne),(0===H.length||H.length-U<H.highWaterMark)&&d("length less than watermark",Ne=!0),H.ended||H.reading?d("reading or ended",Ne=!1):Ne&&(d("do read"),H.reading=!0,H.sync=!0,0===H.length&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(U=xe(ee,H))),null===(pe=U>0?Ee(U,H):null)?(H.needReadable=H.length<=H.highWaterMark,U=0):(H.length-=U,H.awaitDrain=0),0===H.length&&(H.ended||(H.needReadable=!0),ee!==U&&H.ended&&Be(this)),null!==pe&&this.emit("data",pe),pe},V.prototype._read=function(U){L(this,new j("_read()"))},V.prototype.pipe=function(U,H){var ee=this,pe=this._readableState;switch(pe.pipesCount){case 0:pe.pipes=U;break;case 1:pe.pipes=[pe.pipes,U];break;default:pe.pipes.push(U)}pe.pipesCount+=1,d("pipe count=%d opts=%j",pe.pipesCount,H);var Ne=H&&!1===H.end||U===q.stdout||U===q.stderr?Te:Pe;function Pe(){d("onend"),U.end()}pe.endEmitted?q.nextTick(Ne):ee.once("end",Ne),U.on("unpipe",function ke(De,Re){d("onunpipe"),De===ee&&Re&&!1===Re.hasUnpiped&&(Re.hasUnpiped=!0,d("cleanup"),U.removeListener("close",Wt),U.removeListener("finish",zt),U.removeListener("drain",Je),U.removeListener("error",pt),U.removeListener("unpipe",ke),ee.removeListener("end",Pe),ee.removeListener("end",Te),ee.removeListener("data",at),Ke=!0,!pe.awaitDrain||U._writableState&&!U._writableState.needDrain||Je())});var De,Je=(De=ee,function(){var Re=De._readableState;d("pipeOnDrain",Re.awaitDrain),Re.awaitDrain&&Re.awaitDrain--,0===Re.awaitDrain&&y(De,"data")&&(Re.flowing=!0,ye(De))});U.on("drain",Je);var Ke=!1;function at(De){d("ondata");var Re=U.write(De);d("dest.write",Re),!1===Re&&((1===pe.pipesCount&&pe.pipes===U||pe.pipesCount>1&&-1!==qe(pe.pipes,U))&&!Ke&&(d("false write response, pause",pe.awaitDrain),pe.awaitDrain++),ee.pause())}function pt(De){d("onerror",De),Te(),U.removeListener("error",pt),0===y(U,"error")&&L(U,De)}function Wt(){U.removeListener("finish",zt),Te()}function zt(){d("onfinish"),U.removeListener("close",Wt),Te()}function Te(){d("unpipe"),ee.unpipe(U)}return ee.on("data",at),function(De,Re,K){if("function"==typeof De.prependListener)return De.prependListener(Re,K);De._events&&De._events[Re]?Array.isArray(De._events[Re])?De._events[Re].unshift(K):De._events[Re]=[K,De._events[Re]]:De.on(Re,K)}(U,"error",pt),U.once("close",Wt),U.once("finish",zt),U.emit("pipe",ee),pe.flowing||(d("pipe resume"),ee.resume()),U},V.prototype.unpipe=function(U){var H=this._readableState,ee={hasUnpiped:!1};if(0===H.pipesCount)return this;if(1===H.pipesCount)return U&&U!==H.pipes||(U||(U=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,U&&U.emit("unpipe",this,ee)),this;if(!U){var pe=H.pipes,Ne=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var ke=0;ke<Ne;ke++)pe[ke].emit("unpipe",this,{hasUnpiped:!1});return this}var Pe=qe(H.pipes,U);return-1===Pe||(H.pipes.splice(Pe,1),H.pipesCount-=1,1===H.pipesCount&&(H.pipes=H.pipes[0]),U.emit("unpipe",this,ee)),this},V.prototype.on=function(U,H){var ee=e.prototype.on.call(this,U,H),pe=this._readableState;return"data"===U?(pe.readableListening=this.listenerCount("readable")>0,!1!==pe.flowing&&this.resume()):"readable"===U&&(pe.endEmitted||pe.readableListening||(pe.readableListening=pe.needReadable=!0,pe.flowing=!1,pe.emittedReadable=!1,d("on readable",pe.length,pe.reading),pe.length?te(this):pe.reading||q.nextTick(me,this))),ee},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(U,H){var ee=e.prototype.removeListener.call(this,U,H);return"readable"===U&&q.nextTick(Ce,this),ee},V.prototype.removeAllListeners=function(U){var H=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==U&&void 0!==U||q.nextTick(Ce,this),H},V.prototype.resume=function(){var H,ee,U=this._readableState;return U.flowing||(d("resume"),U.flowing=!U.readableListening,H=this,(ee=U).resumeScheduled||(ee.resumeScheduled=!0,q.nextTick(de,H,ee))),U.paused=!1,this},V.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},V.prototype.wrap=function(U){var H=this,ee=this._readableState,pe=!1;for(var Ne in U.on("end",function(){if(d("wrapped end"),ee.decoder&&!ee.ended){var Pe=ee.decoder.end();Pe&&Pe.length&&H.push(Pe)}H.push(null)}),U.on("data",function(Pe){d("wrapped data"),ee.decoder&&(Pe=ee.decoder.write(Pe)),ee.objectMode&&null==Pe||(ee.objectMode||Pe&&Pe.length)&&(H.push(Pe)||(pe=!0,U.pause()))}),U)void 0===this[Ne]&&"function"==typeof U[Ne]&&(this[Ne]=function(Pe){return function(){return U[Pe].apply(U,arguments)}}(Ne));for(var ke=0;ke<G.length;ke++)U.on(G[ke],this.emit.bind(this,G[ke]));return this._read=function(Pe){d("wrapped _read",Pe),pe&&(pe=!1,U.resume())},this},"function"==typeof Symbol&&(V.prototype[Symbol.asyncIterator]=function(){return void 0===k&&(k=J("./internal/streams/async_iterator")),k(this)}),Object.defineProperty(V.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(V.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(V.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(U){this._readableState&&(this._readableState.flowing=U)}}),V._fromList=Ee,Object.defineProperty(V.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(V.from=function(U,H){return void 0===v&&(v=J("./internal/streams/from")),v(V,U,H)})}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":79,"./_stream_duplex":80,"./internal/streams/async_iterator":85,"./internal/streams/buffer_list":86,"./internal/streams/destroy":87,"./internal/streams/from":89,"./internal/streams/state":91,"./internal/streams/stream":92,_process:62,buffer:9,events:15,inherits:26,"string_decoder/":93,util:4}],83:[function(J,ie,ue){"use strict";ie.exports=d;var q=J("../errors").codes,l=q.ERR_METHOD_NOT_IMPLEMENTED,F=q.ERR_MULTIPLE_CALLBACK,y=q.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=q.ERR_TRANSFORM_WITH_LENGTH_0,o=J("./_stream_duplex");function u(k,v){var f=this._transformState;f.transforming=!1;var w=f.writecb;if(null===w)return this.emit("error",new F);f.writechunk=null,f.writecb=null,null!=v&&this.push(v),w(k);var T=this._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}function d(k){if(!(this instanceof d))return new d(k);o.call(this,k),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,k&&("function"==typeof k.transform&&(this._transform=k.transform),"function"==typeof k.flush&&(this._flush=k.flush)),this.on("prefinish",b)}function b(){var k=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(v,f){h(k,v,f)})}function h(k,v,f){if(v)return k.emit("error",v);if(null!=f&&k.push(f),k._writableState.length)throw new e;if(k._transformState.transforming)throw new y;return k.push(null)}J("inherits")(d,o),d.prototype.push=function(k,v){return this._transformState.needTransform=!1,o.prototype.push.call(this,k,v)},d.prototype._transform=function(k,v,f){f(new l("_transform()"))},d.prototype._write=function(k,v,f){var w=this._transformState;if(w.writecb=f,w.writechunk=k,w.writeencoding=v,!w.transforming){var T=this._readableState;(w.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},d.prototype._read=function(k){var v=this._transformState;null===v.writechunk||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},d.prototype._destroy=function(k,v){o.prototype._destroy.call(this,k,function(f){v(f)})}},{"../errors":79,"./_stream_duplex":80,inherits:26}],84:[function(J,ie,ue){(function(q,l){(function(){"use strict";function F(ne){var ve=this;this.next=null,this.entry=null,this.finish=function(){!function(Ce,me,de){var ye=Ce.entry;for(Ce.entry=null;ye;){var Ee=ye.callback;me.pendingcb--,Ee(undefined),ye=ye.next}me.corkedRequestsFree.next=Ce}(ve,ne)}}var y;ie.exports=V,V.WritableState=W;var b,e={deprecate:J("util-deprecate")},o=J("./internal/streams/stream"),u=J("buffer").Buffer,d=l.Uint8Array||function(){},h=J("./internal/streams/destroy"),k=J("./internal/streams/state").getHighWaterMark,v=J("../errors").codes,f=v.ERR_INVALID_ARG_TYPE,w=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_MULTIPLE_CALLBACK,E=v.ERR_STREAM_CANNOT_PIPE,P=v.ERR_STREAM_DESTROYED,M=v.ERR_STREAM_NULL_VALUES,j=v.ERR_STREAM_WRITE_AFTER_END,O=v.ERR_UNKNOWN_ENCODING,L=h.errorOrDestroy;function G(){}function W(ne,ve,Ce){y=y||J("./_stream_duplex"),ne=ne||{},"boolean"!=typeof Ce&&(Ce=ve instanceof y),this.objectMode=!!ne.objectMode,Ce&&(this.objectMode=this.objectMode||!!ne.writableObjectMode),this.highWaterMark=k(this,ne,"writableHighWaterMark",Ce),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var me=!1===ne.decodeStrings;this.decodeStrings=!me,this.defaultEncoding=ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(de){!function(ye,Ee){var H,Be=ye._writableState,Ie=Be.sync,qe=Be.writecb;if("function"!=typeof qe)throw new T;if((H=Be).writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0,Ee)!function(H,ee,pe,Ne,ke){--ee.pendingcb,pe?(q.nextTick(ke,Ne),q.nextTick(se,H,ee),H._writableState.errorEmitted=!0,L(H,Ne)):(ke(Ne),H._writableState.errorEmitted=!0,L(H,Ne),se(H,ee))}(ye,Be,Ie,Ee,qe);else{var U=xe(Be)||ye.destroyed;U||Be.corked||Be.bufferProcessing||!Be.bufferedRequest||ce(ye,Be),Ie?q.nextTick(fe,ye,Be,U,qe):fe(ye,Be,U,qe)}}(ve,de)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ne.emitClose,this.autoDestroy=!!ne.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function V(ne){var ve=this instanceof(y=y||J("./_stream_duplex"));if(!ve&&!b.call(V,this))return new V(ne);this._writableState=new W(ne,this,ve),this.writable=!0,ne&&("function"==typeof ne.write&&(this._write=ne.write),"function"==typeof ne.writev&&(this._writev=ne.writev),"function"==typeof ne.destroy&&(this._destroy=ne.destroy),"function"==typeof ne.final&&(this._final=ne.final)),o.call(this)}function $(ne,ve,Ce,me,de,ye,Ee){ve.writelen=me,ve.writecb=Ee,ve.writing=!0,ve.sync=!0,ve.destroyed?ve.onwrite(new P("write")):Ce?ne._writev(de,ve.onwrite):ne._write(de,ye,ve.onwrite),ve.sync=!1}function fe(ne,ve,Ce,me){var de,ye;Ce||(de=ne,0===(ye=ve).length&&ye.needDrain&&(ye.needDrain=!1,de.emit("drain"))),ve.pendingcb--,me(),se(ne,ve)}function ce(ne,ve){ve.bufferProcessing=!0;var Ce=ve.bufferedRequest;if(ne._writev&&Ce&&Ce.next){var me=ve.bufferedRequestCount,de=new Array(me),ye=ve.corkedRequestsFree;ye.entry=Ce;for(var Ee=0,Be=!0;Ce;)de[Ee]=Ce,Ce.isBuf||(Be=!1),Ce=Ce.next,Ee+=1;de.allBuffers=Be,$(ne,ve,!0,ve.length,de,"",ye.finish),ve.pendingcb++,ve.lastBufferedRequest=null,ye.next?(ve.corkedRequestsFree=ye.next,ye.next=null):ve.corkedRequestsFree=new F(ve),ve.bufferedRequestCount=0}else{for(;Ce;){var Ie=Ce.chunk,qe=Ce.encoding,U=Ce.callback;if($(ne,ve,!1,ve.objectMode?1:Ie.length,Ie,qe,U),Ce=Ce.next,ve.bufferedRequestCount--,ve.writing)break}null===Ce&&(ve.lastBufferedRequest=null)}ve.bufferedRequest=Ce,ve.bufferProcessing=!1}function xe(ne){return ne.ending&&0===ne.length&&null===ne.bufferedRequest&&!ne.finished&&!ne.writing}function te(ne,ve){ne._final(function(Ce){ve.pendingcb--,Ce&&L(ne,Ce),ve.prefinished=!0,ne.emit("prefinish"),se(ne,ve)})}function se(ne,ve){var de,ye,Ce=xe(ve);if(Ce&&(de=ne,(ye=ve).prefinished||ye.finalCalled||("function"!=typeof de._final||ye.destroyed?(ye.prefinished=!0,de.emit("prefinish")):(ye.pendingcb++,ye.finalCalled=!0,q.nextTick(te,de,ye))),0===ve.pendingcb&&(ve.finished=!0,ne.emit("finish"),ve.autoDestroy))){var me=ne._readableState;(!me||me.autoDestroy&&me.endEmitted)&&ne.destroy()}return Ce}J("inherits")(V,o),W.prototype.getBuffer=function(){for(var ne=this.bufferedRequest,ve=[];ne;)ve.push(ne),ne=ne.next;return ve},function(){try{Object.defineProperty(W.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ne){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(ne){return!!b.call(this,ne)||this===V&&ne&&ne._writableState instanceof W}})):b=function(ne){return ne instanceof this},V.prototype.pipe=function(){L(this,new E)},V.prototype.write=function(ne,ve,Ce){var me,Be,de=this._writableState,ye=!1,Ee=!de.objectMode&&(me=ne,u.isBuffer(me)||me instanceof d);return Ee&&!u.isBuffer(ne)&&(Be=ne,ne=u.from(Be)),"function"==typeof ve&&(Ce=ve,ve=null),Ee?ve="buffer":ve||(ve=de.defaultEncoding),"function"!=typeof Ce&&(Ce=G),de.ending?function(Be,Ie){var qe=new j;L(Be,qe),q.nextTick(Ie,qe)}(this,Ce):(Ee||function(Be,Ie,qe,U){var H;return null===qe?H=new M:"string"==typeof qe||Ie.objectMode||(H=new f("chunk",["string","Buffer"],qe)),!H||(L(Be,H),q.nextTick(U,H),!1)}(this,de,ne,Ce))&&(de.pendingcb++,ye=function(Be,Ie,qe,U,H,ee){if(!qe){var pe=(Ke=U,at=H,(Je=Ie).objectMode||!1===Je.decodeStrings||"string"!=typeof Ke||(Ke=u.from(Ke,at)),Ke);U!==pe&&(qe=!0,H="buffer",U=pe)}var Je,Ke,at,Ne=Ie.objectMode?1:U.length;Ie.length+=Ne;var ke=Ie.length<Ie.highWaterMark;if(ke||(Ie.needDrain=!0),Ie.writing||Ie.corked){var Pe=Ie.lastBufferedRequest;Ie.lastBufferedRequest={chunk:U,encoding:H,isBuf:qe,callback:ee,next:null},Pe?Pe.next=Ie.lastBufferedRequest:Ie.bufferedRequest=Ie.lastBufferedRequest,Ie.bufferedRequestCount+=1}else $(Be,Ie,!1,Ne,U,H,ee);return ke}(this,de,Ee,ne,ve,Ce)),ye},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||ne.corked||ne.bufferProcessing||!ne.bufferedRequest||ce(this,ne))},V.prototype.setDefaultEncoding=function(ne){if("string"==typeof ne&&(ne=ne.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ne+"").toLowerCase())>-1))throw new O(ne);return this._writableState.defaultEncoding=ne,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),V.prototype._write=function(ne,ve,Ce){Ce(new w("_write()"))},V.prototype._writev=null,V.prototype.end=function(ne,ve,Ce){var de,ye,Ee,me=this._writableState;return"function"==typeof ne?(Ce=ne,ne=null,ve=null):"function"==typeof ve&&(Ce=ve,ve=null),null!=ne&&this.write(ne,ve),me.corked&&(me.corked=1,this.uncork()),me.ending||(de=this,Ee=Ce,(ye=me).ending=!0,se(de,ye),Ee&&(ye.finished?q.nextTick(Ee):de.once("finish",Ee)),ye.ended=!0,de.writable=!1),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ne){this._writableState&&(this._writableState.destroyed=ne)}}),V.prototype.destroy=h.destroy,V.prototype._undestroy=h.undestroy,V.prototype._destroy=function(ne,ve){ve(ne)}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":79,"./_stream_duplex":80,"./internal/streams/destroy":87,"./internal/streams/state":91,"./internal/streams/stream":92,_process:62,buffer:9,inherits:26,"util-deprecate":117}],85:[function(J,ie,ue){(function(q){(function(){"use strict";var l;function F(E,P,M){return P in E?Object.defineProperty(E,P,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[P]=M,E}var y=J("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),d=Symbol("ended"),b=Symbol("lastPromise"),h=Symbol("handlePromise"),k=Symbol("stream");function v(E,P){return{value:E,done:P}}function f(E){var P=E[e];if(null!==P){var M=E[k].read();null!==M&&(E[b]=null,E[e]=null,E[o]=null,P(v(M,!1)))}}var w=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((F(l={get stream(){return this[k]},next:function(){var E=this,P=this[u];if(null!==P)return Promise.reject(P);if(this[d])return Promise.resolve(v(void 0,!0));if(this[k].destroyed)return new Promise(function(L,G){q.nextTick(function(){E[u]?G(E[u]):L(v(void 0,!0))})});var M,L,G,j=this[b];if(j)M=new Promise((L=j,G=this,function(W,V){L.then(function(){G[d]?W(v(void 0,!0)):G[h](W,V)},V)}));else{var O=this[k].read();if(null!==O)return Promise.resolve(v(O,!1));M=new Promise(this[h])}return this[b]=M,M}},Symbol.asyncIterator,function(){return this}),F(l,"return",function(){var E=this;return new Promise(function(P,M){E[k].destroy(null,function(j){j?M(j):P(v(void 0,!0))})})}),l),w);ie.exports=function(E){var P,M=Object.create(T,(F(P={},k,{value:E,writable:!0}),F(P,e,{value:null,writable:!0}),F(P,o,{value:null,writable:!0}),F(P,u,{value:null,writable:!0}),F(P,d,{value:E._readableState.endEmitted,writable:!0}),F(P,h,{value:function(j,O){var L=M[k].read();L?(M[b]=null,M[e]=null,M[o]=null,j(v(L,!1))):(M[e]=j,M[o]=O)},writable:!0}),P));return M[b]=null,y(E,function(j){if(j&&"ERR_STREAM_PREMATURE_CLOSE"!==j.code){var O=M[o];return null!==O&&(M[b]=null,M[e]=null,M[o]=null,O(j)),void(M[u]=j)}var L=M[e];null!==L&&(M[b]=null,M[e]=null,M[o]=null,L(v(void 0,!0))),M[d]=!0}),E.on("readable",function(j){q.nextTick(f,j)}.bind(null,M)),M}}).call(this)}).call(this,J("_process"))},{"./end-of-stream":88,_process:62}],86:[function(J,ie,ue){"use strict";function q(u,d){var b=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);d&&(h=h.filter(function(k){return Object.getOwnPropertyDescriptor(u,k).enumerable})),b.push.apply(b,h)}return b}function l(u,d,b){return d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function F(u,d){for(var b=0;b<d.length;b++){var h=d[b];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}var y=J("buffer").Buffer,e=J("util").inspect,o=e&&e.custom||"inspect";ie.exports=function(){function u(){(function(k,v){if(!(k instanceof v))throw new TypeError("Cannot call a class as a function")})(this,u),this.head=null,this.tail=null,this.length=0}var d,b;return d=u,(b=[{key:"push",value:function(k){var v={data:k,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(k){var v={data:k,next:this.head};0===this.length&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var v=this.head,f=""+v.data;v=v.next;)f+=k+v.data;return f}},{key:"concat",value:function(k){if(0===this.length)return y.alloc(0);for(var v,f,w,T=y.allocUnsafe(k>>>0),E=this.head,P=0;E;)v=E.data,f=T,w=P,y.prototype.copy.call(v,f,w),P+=E.data.length,E=E.next;return T}},{key:"consume",value:function(k,v){var f;return k<this.head.data.length?(f=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):f=k===this.head.data.length?this.shift():v?this._getString(k):this._getBuffer(k),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var v=this.head,f=1,w=v.data;for(k-=w.length;v=v.next;){var T=v.data,E=k>T.length?T.length:k;if(E===T.length?w+=T:w+=T.slice(0,k),0==(k-=E)){E===T.length?(++f,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=T.slice(E));break}++f}return this.length-=f,w}},{key:"_getBuffer",value:function(k){var v=y.allocUnsafe(k),f=this.head,w=1;for(f.data.copy(v),k-=f.data.length;f=f.next;){var T=f.data,E=k>T.length?T.length:k;if(T.copy(v,v.length-k,0,E),0==(k-=E)){E===T.length?(++w,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=T.slice(E));break}++w}return this.length-=w,v}},{key:o,value:function(k,v){return e(this,function(f){for(var w=1;w<arguments.length;w++){var T=null!=arguments[w]?arguments[w]:{};w%2?q(Object(T),!0).forEach(function(E){l(f,E,T[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(T)):q(Object(T)).forEach(function(E){Object.defineProperty(f,E,Object.getOwnPropertyDescriptor(T,E))})}return f}({},v,{depth:0,customInspect:!1}))}}])&&F(d.prototype,b),u}()},{buffer:9,util:4}],87:[function(J,ie,ue){(function(q){(function(){"use strict";function l(e,o){y(e,o),F(e)}function F(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,o){e.emit("error",o)}ie.exports={destroy:function(e,o){var u=this,d=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return d||b?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(y,this,e)):q.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(h){!o&&h?u._writableState?u._writableState.errorEmitted?q.nextTick(F,u):(u._writableState.errorEmitted=!0,q.nextTick(l,u,h)):q.nextTick(l,u,h):o?(q.nextTick(F,u),o(h)):q.nextTick(F,u)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var u=e._readableState,d=e._writableState;u&&u.autoDestroy||d&&d.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,J("_process"))},{_process:62}],88:[function(J,ie,ue){"use strict";var q=J("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function l(){}ie.exports=function F(y,e,o){if("function"==typeof e)return F(y,null,e);var P,M;e||(e={}),P=o||l,M=!1,o=function(){if(!M){M=!0;for(var j=arguments.length,O=new Array(j),L=0;L<j;L++)O[L]=arguments[L];P.apply(this,O)}};var u=e.readable||!1!==e.readable&&y.readable,d=e.writable||!1!==e.writable&&y.writable,b=function(){y.writable||k()},h=y._writableState&&y._writableState.finished,k=function(){d=!1,h=!0,u||o.call(y)},v=y._readableState&&y._readableState.endEmitted,f=function(){u=!1,v=!0,d||o.call(y)},w=function(P){o.call(y,P)},T=function(){var P;return u&&!v?(y._readableState&&y._readableState.ended||(P=new q),o.call(y,P)):d&&!h?(y._writableState&&y._writableState.ended||(P=new q),o.call(y,P)):void 0},E=function(){y.req.on("finish",k)};return function(P){return P.setHeader&&"function"==typeof P.abort}(y)?(y.on("complete",k),y.on("abort",T),y.req?E():y.on("request",E)):d&&!y._writableState&&(y.on("end",b),y.on("close",b)),y.on("end",f),y.on("finish",k),!1!==e.error&&y.on("error",w),y.on("close",T),function(){y.removeListener("complete",k),y.removeListener("abort",T),y.removeListener("request",E),y.req&&y.req.removeListener("finish",k),y.removeListener("end",b),y.removeListener("close",b),y.removeListener("finish",k),y.removeListener("end",f),y.removeListener("error",w),y.removeListener("close",T)}}},{"../../../errors":79}],89:[function(J,ie,ue){ie.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],90:[function(J,ie,ue){"use strict";var q,l=J("../../../errors").codes,F=l.ERR_MISSING_ARGS,y=l.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function o(d){d()}function u(d,b){return d.pipe(b)}ie.exports=function(){for(var d=arguments.length,b=new Array(d),h=0;h<d;h++)b[h]=arguments[h];var k,w,v=(w=b).length?"function"!=typeof w[w.length-1]?e:w.pop():e;if(Array.isArray(b[0])&&(b=b[0]),b.length<2)throw new F("streams");var f=b.map(function(w,T){var E=T<b.length-1;return function(P,M,j,O){var W,V;W=O,V=!1,O=function(){V||(V=!0,W.apply(void 0,arguments))};var L=!1;P.on("close",function(){L=!0}),void 0===q&&(q=J("./end-of-stream")),q(P,{readable:M,writable:j},function(W){if(W)return O(W);L=!0,O()});var G=!1;return function(W){if(!L&&!G)return G=!0,function(V){return V.setHeader&&"function"==typeof V.abort}(P)?P.abort():"function"==typeof P.destroy?P.destroy():void O(W||new y("pipe"))}}(w,E,T>0,function(P){k||(k=P),P&&f.forEach(o),E||(f.forEach(o),v(k))})});return b.reduce(u)}},{"../../../errors":79,"./end-of-stream":88}],91:[function(J,ie,ue){"use strict";var q=J("../../../errors").codes.ERR_INVALID_OPT_VALUE;ie.exports={getHighWaterMark:function(l,F,y,e){var u,d,b,o=(d=e,b=y,null!=(u=F).highWaterMark?u.highWaterMark:d?u[b]:null);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new q(e?y:"highWaterMark",o);return Math.floor(o)}return l.objectMode?16:16384}}},{"../../../errors":79}],92:[function(J,ie,ue){ie.exports=J("events").EventEmitter},{events:15}],93:[function(J,ie,ue){"use strict";var q=J("safe-buffer").Buffer,l=q.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function F(v){var f;switch(this.encoding=function(w){var T=function(E){if(!E)return"utf8";for(var P;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(P)return;E=(""+E).toLowerCase(),P=!0}}(w);if("string"!=typeof T&&(q.isEncoding===l||!l(w)))throw new Error("Unknown encoding: "+w);return T||w}(v),this.encoding){case"utf16le":this.text=o,this.end=u,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=d,this.end=b,f=3;break;default:return this.write=h,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=q.allocUnsafe(f)}function y(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function e(v){var f=this.lastTotal-this.lastNeed,w=function(T,E,P){if(128!=(192&E[0]))return T.lastNeed=0,"\ufffd";if(T.lastNeed>1&&E.length>1){if(128!=(192&E[1]))return T.lastNeed=1,"\ufffd";if(T.lastNeed>2&&E.length>2&&128!=(192&E[2]))return T.lastNeed=2,"\ufffd"}}(this,v);return void 0!==w?w:this.lastNeed<=v.length?(v.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,f,0,v.length),void(this.lastNeed-=v.length))}function o(v,f){if((v.length-f)%2==0){var w=v.toString("utf16le",f);if(w){var T=w.charCodeAt(w.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",f,v.length-1)}function u(v){var f=v&&v.length?this.write(v):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return f+this.lastChar.toString("utf16le",0,w)}return f}function d(v,f){var w=(v.length-f)%3;return 0===w?v.toString("base64",f):(this.lastNeed=3-w,this.lastTotal=3,1===w?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",f,v.length-w))}function b(v){var f=v&&v.length?this.write(v):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function h(v){return v.toString(this.encoding)}function k(v){return v&&v.length?this.write(v):""}ue.StringDecoder=F,F.prototype.write=function(v){if(0===v.length)return"";var f,w;if(this.lastNeed){if(void 0===(f=this.fillLast(v)))return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<v.length?f?f+this.text(v,w):this.text(v,w):f||""},F.prototype.end=function(v){var f=v&&v.length?this.write(v):"";return this.lastNeed?f+"\ufffd":f},F.prototype.text=function(v,f){var w=function(E,P,M){var j=P.length-1;if(j<M)return 0;var O=y(P[j]);return O>=0?(O>0&&(E.lastNeed=O-1),O):--j<M||-2===O?0:(O=y(P[j]))>=0?(O>0&&(E.lastNeed=O-2),O):--j<M||-2===O?0:(O=y(P[j]))>=0?(O>0&&(2===O?O=0:E.lastNeed=O-3),O):0}(this,v,f);if(!this.lastNeed)return v.toString("utf8",f);this.lastTotal=w;var T=v.length-(w-this.lastNeed);return v.copy(this.lastChar,0,T),v.toString("utf8",f,T)},F.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},{"safe-buffer":76}],94:[function(J,ie,ue){(function(q){(function(){var l=J("./lib/request"),F=J("./lib/response"),y=J("xtend"),e=J("builtin-status-codes"),o=J("url"),u=ue;u.request=function(d,b){d="string"==typeof d?o.parse(d):y(d);var h=-1===q.location.protocol.search(/^https?:$/)?"http:":"",k=d.protocol||h,v=d.hostname||d.host,f=d.port,w=d.path||"/";v&&-1!==v.indexOf(":")&&(v="["+v+"]"),d.url=(v?k+"//"+v:"")+(f?":"+f:"")+w,d.method=(d.method||"GET").toUpperCase(),d.headers=d.headers||{};var T=new l(d);return b&&T.on("response",b),T},u.get=function(d,b){var h=u.request(d,b);return h.end(),h},u.ClientRequest=l,u.IncomingMessage=F.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=e,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":96,"./lib/response":97,"builtin-status-codes":10,url:115,xtend:119}],95:[function(J,ie,ue){(function(q){(function(){var l;function F(){if(void 0!==l)return l;if(q.XMLHttpRequest){l=new q.XMLHttpRequest;try{l.open("GET",q.XDomainRequest?"/":"https://example.com")}catch(o){l=null}}else l=null;return l}function y(o){var u=F();if(!u)return!1;try{return u.responseType=o,u.responseType===o}catch(d){}return!1}function e(o){return"function"==typeof o}ue.fetch=e(q.fetch)&&e(q.ReadableStream),ue.writableStream=e(q.WritableStream),ue.abortController=e(q.AbortController),ue.arraybuffer=ue.fetch||y("arraybuffer"),ue.msstream=!ue.fetch&&y("ms-stream"),ue.mozchunkedarraybuffer=!ue.fetch&&y("moz-chunked-arraybuffer"),ue.overrideMimeType=ue.fetch||!!F()&&e(F().overrideMimeType),l=null}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(J,ie,ue){(function(q,l,F){(function(){var y=J("./capability"),e=J("inherits"),o=J("./response"),u=J("readable-stream"),d=o.IncomingMessage,b=o.readyStates,h=ie.exports=function(v){var f,w=this;u.Writable.call(w),w._opts=v,w._body=[],w._headers={},v.auth&&w.setHeader("Authorization","Basic "+F.from(v.auth).toString("base64")),Object.keys(v.headers).forEach(function(E){w.setHeader(E,v.headers[E])});var E,P,T=!0;if("disable-fetch"===v.mode||"requestTimeout"in v&&!y.abortController)T=!1,f=!0;else if("prefer-streaming"===v.mode)f=!1;else if("allow-wrong-content-type"===v.mode)f=!y.overrideMimeType;else{if(v.mode&&"default"!==v.mode&&"prefer-fast"!==v.mode)throw new Error("Invalid value for opts.mode");f=!0}w._mode=(E=f,P=T,y.fetch&&P?"fetch":y.mozchunkedarraybuffer?"moz-chunked-arraybuffer":y.msstream?"ms-stream":y.arraybuffer&&E?"arraybuffer":"text"),w._fetchTimer=null,w._socketTimeout=null,w._socketTimer=null,w.on("finish",function(){w._onFinish()})};e(h,u.Writable),h.prototype.setHeader=function(v,f){var w=v.toLowerCase();-1===k.indexOf(w)&&(this._headers[w]={name:v,value:f})},h.prototype.getHeader=function(v){var f=this._headers[v.toLowerCase()];return f?f.value:null},h.prototype.removeHeader=function(v){delete this._headers[v.toLowerCase()]},h.prototype._onFinish=function(){var v=this;if(!v._destroyed){var f=v._opts;"timeout"in f&&0!==f.timeout&&v.setTimeout(f.timeout);var w=v._headers,T=null;"GET"!==f.method&&"HEAD"!==f.method&&(T=new Blob(v._body,{type:(w["content-type"]||{}).value||""}));var E=[];if(Object.keys(w).forEach(function(O){var L=w[O].name,G=w[O].value;Array.isArray(G)?G.forEach(function(W){E.push([L,W])}):E.push([L,G])}),"fetch"===v._mode){var P=null;if(y.abortController){var M=new AbortController;P=M.signal,v._fetchAbortController=M,"requestTimeout"in f&&0!==f.requestTimeout&&(v._fetchTimer=l.setTimeout(function(){v.emit("requestTimeout"),v._fetchAbortController&&v._fetchAbortController.abort()},f.requestTimeout))}l.fetch(v._opts.url,{method:v._opts.method,headers:E,body:T||void 0,mode:"cors",credentials:f.withCredentials?"include":"same-origin",signal:P}).then(function(O){v._fetchResponse=O,v._resetTimers(!1),v._connect()},function(O){v._resetTimers(!0),v._destroyed||v.emit("error",O)})}else{var j=v._xhr=new l.XMLHttpRequest;try{j.open(v._opts.method,v._opts.url,!0)}catch(O){return void q.nextTick(function(){v.emit("error",O)})}"responseType"in j&&(j.responseType=v._mode),"withCredentials"in j&&(j.withCredentials=!!f.withCredentials),"text"===v._mode&&"overrideMimeType"in j&&j.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in f&&(j.timeout=f.requestTimeout,j.ontimeout=function(){v.emit("requestTimeout")}),E.forEach(function(O){j.setRequestHeader(O[0],O[1])}),v._response=null,j.onreadystatechange=function(){switch(j.readyState){case b.LOADING:case b.DONE:v._onXHRProgress()}},"moz-chunked-arraybuffer"===v._mode&&(j.onprogress=function(){v._onXHRProgress()}),j.onerror=function(){v._destroyed||(v._resetTimers(!0),v.emit("error",new Error("XHR error")))};try{j.send(T)}catch(O){return void q.nextTick(function(){v.emit("error",O)})}}}},h.prototype._onXHRProgress=function(){this._resetTimers(!1),function(v){try{var f=v.status;return null!==f&&0!==f}catch(w){return!1}}(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))},h.prototype._connect=function(){var v=this;v._destroyed||(v._response=new d(v._xhr,v._fetchResponse,v._mode,v._resetTimers.bind(v)),v._response.on("error",function(f){v.emit("error",f)}),v.emit("response",v._response))},h.prototype._write=function(v,f,w){this._body.push(v),w()},h.prototype._resetTimers=function(v){var f=this;l.clearTimeout(f._socketTimer),f._socketTimer=null,v?(l.clearTimeout(f._fetchTimer),f._fetchTimer=null):f._socketTimeout&&(f._socketTimer=l.setTimeout(function(){f.emit("timeout")},f._socketTimeout))},h.prototype.abort=h.prototype.destroy=function(v){this._destroyed=!0,this._resetTimers(!0),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort(),v&&this.emit("error",v)},h.prototype.end=function(v,f,w){"function"==typeof v&&(w=v,v=void 0),u.Writable.prototype.end.call(this,v,f,w)},h.prototype.setTimeout=function(v,f){f&&this.once("timeout",f),this._socketTimeout=v,this._resetTimers(!1)},h.prototype.flushHeaders=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var k=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":95,"./response":97,_process:62,buffer:9,inherits:26,"readable-stream":112}],97:[function(J,ie,ue){(function(q,l,F){(function(){var y=J("./capability"),e=J("inherits"),o=J("readable-stream"),u=ue.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},d=ue.IncomingMessage=function(b,h,k,v){var f=this;if(o.Readable.call(f),f._mode=k,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",function(){q.nextTick(function(){f.emit("close")})}),"fetch"===k){if(f._fetchResponse=h,f.url=h.url,f.statusCode=h.status,f.statusMessage=h.statusText,h.headers.forEach(function(M,j){f.headers[j.toLowerCase()]=M,f.rawHeaders.push(j,M)}),y.writableStream){var w=new WritableStream({write:function(M){return v(!1),new Promise(function(j,O){f._destroyed?O():f.push(F.from(M))?j():f._resumeFetch=j})},close:function(){v(!0),f._destroyed||f.push(null)},abort:function(M){v(!0),f._destroyed||f.emit("error",M)}});try{return void h.body.pipeTo(w).catch(function(M){v(!0),f._destroyed||f.emit("error",M)})}catch(M){}}var T=h.body.getReader();!function M(){T.read().then(function(j){f._destroyed||(v(j.done),j.done?f.push(null):(f.push(F.from(j.value)),M()))}).catch(function(j){v(!0),f._destroyed||f.emit("error",j)})}()}else if(f._xhr=b,f._pos=0,f.url=b.responseURL,f.statusCode=b.status,f.statusMessage=b.statusText,b.getAllResponseHeaders().split(/\r?\n/).forEach(function(M){var j=M.match(/^([^:]+):\s*(.*)/);if(j){var O=j[1].toLowerCase();"set-cookie"===O?(void 0===f.headers[O]&&(f.headers[O]=[]),f.headers[O].push(j[2])):void 0!==f.headers[O]?f.headers[O]+=", "+j[2]:f.headers[O]=j[2],f.rawHeaders.push(j[1],j[2])}}),f._charset="x-user-defined",!y.overrideMimeType){var E=f.rawHeaders["mime-type"];if(E){var P=E.match(/;\s*charset=([^;])(;|$)/);P&&(f._charset=P[1].toLowerCase())}f._charset||(f._charset="utf-8")}};e(d,o.Readable),d.prototype._read=function(){var b=this._resumeFetch;b&&(this._resumeFetch=null,b())},d.prototype._onXHRProgress=function(b){var h=this,k=h._xhr,v=null;switch(h._mode){case"text":if((v=k.responseText).length>h._pos){var f=v.substr(h._pos);if("x-user-defined"===h._charset){for(var w=F.alloc(f.length),T=0;T<f.length;T++)w[T]=255&f.charCodeAt(T);h.push(w)}else h.push(f,h._charset);h._pos=v.length}break;case"arraybuffer":if(k.readyState!==u.DONE||!k.response)break;v=k.response,h.push(F.from(new Uint8Array(v)));break;case"moz-chunked-arraybuffer":if(v=k.response,k.readyState!==u.LOADING||!v)break;h.push(F.from(new Uint8Array(v)));break;case"ms-stream":if(v=k.response,k.readyState!==u.LOADING)break;var E=new l.MSStreamReader;E.onprogress=function(){E.result.byteLength>h._pos&&(h.push(F.from(new Uint8Array(E.result.slice(h._pos)))),h._pos=E.result.byteLength)},E.onload=function(){b(!0),h.push(null)},E.readAsArrayBuffer(v)}h._xhr.readyState===u.DONE&&"ms-stream"!==h._mode&&(b(!0),h.push(null))}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":95,_process:62,buffer:9,inherits:26,"readable-stream":112}],98:[function(J,ie,ue){arguments[4][79][0].apply(ue,arguments)},{dup:79}],99:[function(J,ie,ue){arguments[4][80][0].apply(ue,arguments)},{"./_stream_readable":101,"./_stream_writable":103,_process:62,dup:80,inherits:26}],100:[function(J,ie,ue){arguments[4][81][0].apply(ue,arguments)},{"./_stream_transform":102,dup:81,inherits:26}],101:[function(J,ie,ue){arguments[4][82][0].apply(ue,arguments)},{"../errors":98,"./_stream_duplex":99,"./internal/streams/async_iterator":104,"./internal/streams/buffer_list":105,"./internal/streams/destroy":106,"./internal/streams/from":108,"./internal/streams/state":110,"./internal/streams/stream":111,_process:62,buffer:9,dup:82,events:15,inherits:26,"string_decoder/":113,util:4}],102:[function(J,ie,ue){arguments[4][83][0].apply(ue,arguments)},{"../errors":98,"./_stream_duplex":99,dup:83,inherits:26}],103:[function(J,ie,ue){arguments[4][84][0].apply(ue,arguments)},{"../errors":98,"./_stream_duplex":99,"./internal/streams/destroy":106,"./internal/streams/state":110,"./internal/streams/stream":111,_process:62,buffer:9,dup:84,inherits:26,"util-deprecate":117}],104:[function(J,ie,ue){arguments[4][85][0].apply(ue,arguments)},{"./end-of-stream":107,_process:62,dup:85}],105:[function(J,ie,ue){arguments[4][86][0].apply(ue,arguments)},{buffer:9,dup:86,util:4}],106:[function(J,ie,ue){arguments[4][87][0].apply(ue,arguments)},{_process:62,dup:87}],107:[function(J,ie,ue){arguments[4][88][0].apply(ue,arguments)},{"../../../errors":98,dup:88}],108:[function(J,ie,ue){arguments[4][89][0].apply(ue,arguments)},{dup:89}],109:[function(J,ie,ue){arguments[4][90][0].apply(ue,arguments)},{"../../../errors":98,"./end-of-stream":107,dup:90}],110:[function(J,ie,ue){arguments[4][91][0].apply(ue,arguments)},{"../../../errors":98,dup:91}],111:[function(J,ie,ue){arguments[4][92][0].apply(ue,arguments)},{dup:92,events:15}],112:[function(J,ie,ue){(ue=ie.exports=J("./lib/_stream_readable.js")).Stream=ue,ue.Readable=ue,ue.Writable=J("./lib/_stream_writable.js"),ue.Duplex=J("./lib/_stream_duplex.js"),ue.Transform=J("./lib/_stream_transform.js"),ue.PassThrough=J("./lib/_stream_passthrough.js"),ue.finished=J("./lib/internal/streams/end-of-stream.js"),ue.pipeline=J("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":99,"./lib/_stream_passthrough.js":100,"./lib/_stream_readable.js":101,"./lib/_stream_transform.js":102,"./lib/_stream_writable.js":103,"./lib/internal/streams/end-of-stream.js":107,"./lib/internal/streams/pipeline.js":109}],113:[function(J,ie,ue){arguments[4][93][0].apply(ue,arguments)},{dup:93,"safe-buffer":76}],114:[function(J,ie,ue){(function(q,l){(function(){var F=J("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,o={},u=0;function d(b,h){this._id=b,this._clearFn=h}ue.setTimeout=function(){return new d(y.call(setTimeout,window,arguments),clearTimeout)},ue.setInterval=function(){return new d(y.call(setInterval,window,arguments),clearInterval)},ue.clearTimeout=ue.clearInterval=function(b){b.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},ue.enroll=function(b,h){clearTimeout(b._idleTimeoutId),b._idleTimeout=h},ue.unenroll=function(b){clearTimeout(b._idleTimeoutId),b._idleTimeout=-1},ue._unrefActive=ue.active=function(b){clearTimeout(b._idleTimeoutId);var h=b._idleTimeout;h>=0&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},h))},ue.setImmediate="function"==typeof q?q:function(b){var h=u++,k=!(arguments.length<2)&&e.call(arguments,1);return o[h]=!0,F(function(){o[h]&&(k?b.apply(null,k):b.call(null),ue.clearImmediate(h))}),h},ue.clearImmediate="function"==typeof l?l:function(b){delete o[b]}}).call(this)}).call(this,J("timers").setImmediate,J("timers").clearImmediate)},{"process/browser.js":62,timers:114}],115:[function(J,ie,ue){"use strict";var q=J("punycode"),l=J("./util");function F(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ue.parse=P,ue.resolve=function(M,j){return P(M,!1,!0).resolve(j)},ue.resolveObject=function(M,j){return M?P(M,!1,!0).resolveObject(j):j},ue.format=function(M){return l.isString(M)&&(M=P(M)),M instanceof F?M.format():F.prototype.format.call(M)},ue.Url=F;var y=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),b=["%","/","?",";","#"].concat(d),h=["/","?","#"],k=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=J("querystring");function P(M,j,O){if(M&&l.isObject(M)&&M instanceof F)return M;var L=new F;return L.parse(M,j,O),L}F.prototype.parse=function(M,j,O){if(!l.isString(M))throw new TypeError("Parameter 'url' must be a string, not "+typeof M);var L=M.indexOf("?"),G=-1!==L&&L<M.indexOf("#")?"?":"#",W=M.split(G);W[0]=W[0].replace(/\\/g,"/");var V=M=W.join(G);if(V=V.trim(),!O&&1===M.split("#").length){var $=o.exec(V);if($)return this.path=V,this.href=V,this.pathname=$[1],$[2]?(this.search=$[2],this.query=j?E.parse(this.search.substr(1)):this.search.substr(1)):j&&(this.search="",this.query={}),this}var fe=y.exec(V);if(fe){var ce=(fe=fe[0]).toLowerCase();this.protocol=ce,V=V.substr(fe.length)}if(O||fe||V.match(/^\/\/[^@\/]+@[^@\/]+/)){var xe="//"===V.substr(0,2);!xe||fe&&w[fe]||(V=V.substr(2),this.slashes=!0)}if(!w[fe]&&(xe||fe&&!T[fe])){for(var te,se,ne=-1,ve=0;ve<h.length;ve++)-1!==(Ce=V.indexOf(h[ve]))&&(-1===ne||Ce<ne)&&(ne=Ce);for(-1!==(se=-1===ne?V.lastIndexOf("@"):V.lastIndexOf("@",ne))&&(te=V.slice(0,se),V=V.slice(se+1),this.auth=decodeURIComponent(te)),ne=-1,ve=0;ve<b.length;ve++){var Ce;-1!==(Ce=V.indexOf(b[ve]))&&(-1===ne||Ce<ne)&&(ne=Ce)}-1===ne&&(ne=V.length),this.host=V.slice(0,ne),V=V.slice(ne),this.parseHost(),this.hostname=this.hostname||"";var me="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!me)for(var de=this.hostname.split(/\./),ye=(ve=0,de.length);ve<ye;ve++){var Ee=de[ve];if(Ee&&!Ee.match(k)){for(var Be="",Ie=0,qe=Ee.length;Ie<qe;Ie++)Ee.charCodeAt(Ie)>127?Be+="x":Be+=Ee[Ie];if(!Be.match(k)){var U=de.slice(0,ve),H=de.slice(ve+1),ee=Ee.match(v);ee&&(U.push(ee[1]),H.unshift(ee[2])),H.length&&(V="/"+H.join(".")+V),this.hostname=U.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),me||(this.hostname=q.toASCII(this.hostname));var pe=this.port?":"+this.port:"",Ne=this.hostname||"";this.host=Ne+pe,this.href+=this.host,me&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==V[0]&&(V="/"+V))}if(!f[ce])for(ve=0,ye=d.length;ve<ye;ve++){var ke=d[ve];if(-1!==V.indexOf(ke)){var Pe=encodeURIComponent(ke);Pe===ke&&(Pe=escape(ke)),V=V.split(ke).join(Pe)}}var Je=V.indexOf("#");-1!==Je&&(this.hash=V.substr(Je),V=V.slice(0,Je));var Ke=V.indexOf("?");if(-1!==Ke?(this.search=V.substr(Ke),this.query=V.substr(Ke+1),j&&(this.query=E.parse(this.query)),V=V.slice(0,Ke)):j&&(this.search="",this.query={}),V&&(this.pathname=V),T[ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){pe=this.pathname||"";var at=this.search||"";this.path=pe+at}return this.href=this.format(),this},F.prototype.format=function(){var M=this.auth||"";M&&(M=(M=encodeURIComponent(M)).replace(/%3A/i,":"),M+="@");var j=this.protocol||"",O=this.pathname||"",L=this.hash||"",G=!1,W="";this.host?G=M+this.host:this.hostname&&(G=M+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(G+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(W=E.stringify(this.query));var V=this.search||W&&"?"+W||"";return j&&":"!==j.substr(-1)&&(j+=":"),this.slashes||(!j||T[j])&&!1!==G?(G="//"+(G||""),O&&"/"!==O.charAt(0)&&(O="/"+O)):G||(G=""),L&&"#"!==L.charAt(0)&&(L="#"+L),V&&"?"!==V.charAt(0)&&(V="?"+V),j+G+(O=O.replace(/[?#]/g,function($){return encodeURIComponent($)}))+(V=V.replace("#","%23"))+L},F.prototype.resolve=function(M){return this.resolveObject(P(M,!1,!0)).format()},F.prototype.resolveObject=function(M){if(l.isString(M)){var j=new F;j.parse(M,!1,!0),M=j}for(var O=new F,L=Object.keys(this),G=0;G<L.length;G++){var W=L[G];O[W]=this[W]}if(O.hash=M.hash,""===M.href)return O.href=O.format(),O;if(M.slashes&&!M.protocol){for(var V=Object.keys(M),$=0;$<V.length;$++){var fe=V[$];"protocol"!==fe&&(O[fe]=M[fe])}return T[O.protocol]&&O.hostname&&!O.pathname&&(O.path=O.pathname="/"),O.href=O.format(),O}if(M.protocol&&M.protocol!==O.protocol){if(!T[M.protocol]){for(var ce=Object.keys(M),xe=0;xe<ce.length;xe++){var te=ce[xe];O[te]=M[te]}return O.href=O.format(),O}if(O.protocol=M.protocol,M.host||w[M.protocol])O.pathname=M.pathname;else{for(var se=(M.pathname||"").split("/");se.length&&!(M.host=se.shift()););M.host||(M.host=""),M.hostname||(M.hostname=""),""!==se[0]&&se.unshift(""),se.length<2&&se.unshift(""),O.pathname=se.join("/")}if(O.search=M.search,O.query=M.query,O.host=M.host||"",O.auth=M.auth,O.hostname=M.hostname||M.host,O.port=M.port,O.pathname||O.search){var ne=O.pathname||"",ve=O.search||"";O.path=ne+ve}return O.slashes=O.slashes||M.slashes,O.href=O.format(),O}var Ce=O.pathname&&"/"===O.pathname.charAt(0),me=M.host||M.pathname&&"/"===M.pathname.charAt(0),de=me||Ce||O.host&&M.pathname,ye=de,Ee=O.pathname&&O.pathname.split("/")||[],Be=(se=M.pathname&&M.pathname.split("/")||[],O.protocol&&!T[O.protocol]);if(Be&&(O.hostname="",O.port=null,O.host&&(""===Ee[0]?Ee[0]=O.host:Ee.unshift(O.host)),O.host="",M.protocol&&(M.hostname=null,M.port=null,M.host&&(""===se[0]?se[0]=M.host:se.unshift(M.host)),M.host=null),de=de&&(""===se[0]||""===Ee[0])),me)O.host=M.host||""===M.host?M.host:O.host,O.hostname=M.hostname||""===M.hostname?M.hostname:O.hostname,O.search=M.search,O.query=M.query,Ee=se;else if(se.length)Ee||(Ee=[]),Ee.pop(),Ee=Ee.concat(se),O.search=M.search,O.query=M.query;else if(!l.isNullOrUndefined(M.search))return Be&&(O.hostname=O.host=Ee.shift(),(ee=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=ee.shift(),O.host=O.hostname=ee.shift())),O.search=M.search,O.query=M.query,l.isNull(O.pathname)&&l.isNull(O.search)||(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O;if(!Ee.length)return O.pathname=null,O.search?O.path="/"+O.search:O.path=null,O.href=O.format(),O;for(var Ie=Ee.slice(-1)[0],qe=(O.host||M.host||Ee.length>1)&&("."===Ie||".."===Ie)||""===Ie,U=0,H=Ee.length;H>=0;H--)"."===(Ie=Ee[H])?Ee.splice(H,1):".."===Ie?(Ee.splice(H,1),U++):U&&(Ee.splice(H,1),U--);if(!de&&!ye)for(;U--;U)Ee.unshift("..");!de||""===Ee[0]||Ee[0]&&"/"===Ee[0].charAt(0)||Ee.unshift(""),qe&&"/"!==Ee.join("/").substr(-1)&&Ee.push("");var ee,pe=""===Ee[0]||Ee[0]&&"/"===Ee[0].charAt(0);return Be&&(O.hostname=O.host=pe?"":Ee.length?Ee.shift():"",(ee=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=ee.shift(),O.host=O.hostname=ee.shift())),(de=de||O.host&&Ee.length)&&!pe&&Ee.unshift(""),Ee.length?O.pathname=Ee.join("/"):(O.pathname=null,O.path=null),l.isNull(O.pathname)&&l.isNull(O.search)||(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=M.auth||O.auth,O.slashes=O.slashes||M.slashes,O.href=O.format(),O},F.prototype.parseHost=function(){var M=this.host,j=e.exec(M);j&&(":"!==(j=j[0])&&(this.port=j.substr(1)),M=M.substr(0,M.length-j.length)),M&&(this.hostname=M)}},{"./util":116,punycode:5,querystring:65}],116:[function(J,ie,ue){"use strict";ie.exports={isString:function(q){return"string"==typeof q},isObject:function(q){return"object"==typeof q&&null!==q},isNull:function(q){return null===q},isNullOrUndefined:function(q){return null==q}}},{}],117:[function(J,ie,ue){(function(q){(function(){function l(F){try{if(!q.localStorage)return!1}catch(e){return!1}var y=q.localStorage[F];return null!=y&&"true"===String(y).toLowerCase()}ie.exports=function(F,y){if(l("noDeprecation"))return F;var e=!1;return function(){if(!e){if(l("throwDeprecation"))throw new Error(y);l("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return F.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],118:[function(J,ie,ue){(function(q){(function(){"use strict";var l=J("for-each"),F=J("available-typed-arrays"),y=J("call-bind/callBound"),e=y("Object.prototype.toString"),o=J("has-tostringtag/shams")(),u="undefined"==typeof globalThis?q:globalThis,d=F(),b=y("String.prototype.slice"),h={},k=J("es-abstract/helpers/getOwnPropertyDescriptor"),v=Object.getPrototypeOf;o&&k&&v&&l(d,function(w){if("function"==typeof u[w]){var T=new u[w];if(Symbol.toStringTag in T){var E=v(T),P=k(E,Symbol.toStringTag);if(!P){var M=v(E);P=k(M,Symbol.toStringTag)}h[w]=P.get}}});var f=J("is-typed-array");ie.exports=function(w){return!!f(w)&&(o&&Symbol.toStringTag in w?(T=w,E=!1,l(h,function(P,M){if(!E)try{var j=P.call(T);j===M&&(E=j)}catch(O){}}),E):b(e(w),8,-1));var T,E}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":11,"es-abstract/helpers/getOwnPropertyDescriptor":14,"for-each":16,"has-tostringtag/shams":22,"is-typed-array":30}],119:[function(J,ie,ue){ie.exports=function(){for(var l={},F=0;F<arguments.length;F++){var y=arguments[F];for(var e in y)q.call(y,e)&&(l[e]=y[e])}return l};var q=Object.prototype.hasOwnProperty},{}],120:[function(J,ie,ue){"use strict";ie.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let l=this.head;l;l=l.next)yield l.value}}},{}],121:[function(J,ie,ue){"use strict";function q(o){var u=this;if(u instanceof q||(u=new q),u.tail=null,u.head=null,u.length=0,o&&"function"==typeof o.forEach)o.forEach(function(h){u.push(h)});else if(arguments.length>0)for(var d=0,b=arguments.length;d<b;d++)u.push(arguments[d]);return u}function l(o,u,d){var b=u===o.head?new e(d,null,u,o):new e(d,u,u.next,o);return null===b.next&&(o.tail=b),null===b.prev&&(o.head=b),o.length++,b}function F(o,u){o.tail=new e(u,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function y(o,u){o.head=new e(u,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function e(o,u,d,b){if(!(this instanceof e))return new e(o,u,d,b);this.list=b,this.value=o,u?(u.next=this,this.prev=u):this.prev=null,d?(d.prev=this,this.next=d):this.next=null}ie.exports=q,q.Node=e,q.create=q,q.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var u=o.next,d=o.prev;return u&&(u.prev=d),d&&(d.next=u),o===this.head&&(this.head=u),o===this.tail&&(this.tail=d),o.list.length--,o.next=null,o.prev=null,o.list=null,u},q.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var u=this.head;o.list=this,o.next=u,u&&(u.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},q.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var u=this.tail;o.list=this,o.prev=u,u&&(u.next=o),this.tail=o,this.head||(this.head=o),this.length++}},q.prototype.push=function(){for(var o=0,u=arguments.length;o<u;o++)F(this,arguments[o]);return this.length},q.prototype.unshift=function(){for(var o=0,u=arguments.length;o<u;o++)y(this,arguments[o]);return this.length},q.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},q.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},q.prototype.forEach=function(o,u){u=u||this;for(var d=this.head,b=0;null!==d;b++)o.call(u,d.value,b,this),d=d.next},q.prototype.forEachReverse=function(o,u){u=u||this;for(var d=this.tail,b=this.length-1;null!==d;b--)o.call(u,d.value,b,this),d=d.prev},q.prototype.get=function(o){for(var u=0,d=this.head;null!==d&&u<o;u++)d=d.next;if(u===o&&null!==d)return d.value},q.prototype.getReverse=function(o){for(var u=0,d=this.tail;null!==d&&u<o;u++)d=d.prev;if(u===o&&null!==d)return d.value},q.prototype.map=function(o,u){u=u||this;for(var d=new q,b=this.head;null!==b;)d.push(o.call(u,b.value,this)),b=b.next;return d},q.prototype.mapReverse=function(o,u){u=u||this;for(var d=new q,b=this.tail;null!==b;)d.push(o.call(u,b.value,this)),b=b.prev;return d},q.prototype.reduce=function(o,u){var d,b=this.head;if(arguments.length>1)d=u;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");b=this.head.next,d=this.head.value}for(var h=0;null!==b;h++)d=o(d,b.value,h),b=b.next;return d},q.prototype.reduceReverse=function(o,u){var d,b=this.tail;if(arguments.length>1)d=u;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");b=this.tail.prev,d=this.tail.value}for(var h=this.length-1;null!==b;h--)d=o(d,b.value,h),b=b.prev;return d},q.prototype.toArray=function(){for(var o=new Array(this.length),u=0,d=this.head;null!==d;u++)o[u]=d.value,d=d.next;return o},q.prototype.toArrayReverse=function(){for(var o=new Array(this.length),u=0,d=this.tail;null!==d;u++)o[u]=d.value,d=d.prev;return o},q.prototype.slice=function(o,u){(u=u||this.length)<0&&(u+=this.length),(o=o||0)<0&&(o+=this.length);var d=new q;if(u<o||u<0)return d;o<0&&(o=0),u>this.length&&(u=this.length);for(var b=0,h=this.head;null!==h&&b<o;b++)h=h.next;for(;null!==h&&b<u;b++,h=h.next)d.push(h.value);return d},q.prototype.sliceReverse=function(o,u){(u=u||this.length)<0&&(u+=this.length),(o=o||0)<0&&(o+=this.length);var d=new q;if(u<o||u<0)return d;o<0&&(o=0),u>this.length&&(u=this.length);for(var b=this.length,h=this.tail;null!==h&&b>u;b--)h=h.prev;for(;null!==h&&b>o;b--,h=h.prev)d.push(h.value);return d},q.prototype.splice=function(o,u,...d){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var b=0,h=this.head;null!==h&&b<o;b++)h=h.next;var k=[];for(b=0;h&&b<u;b++)k.push(h.value),h=this.removeNode(h);for(null===h&&(h=this.tail),h!==this.head&&h!==this.tail&&(h=h.prev),b=0;b<d.length;b++)h=l(this,h,d[b]);return k},q.prototype.reverse=function(){for(var o=this.head,u=this.tail,d=o;null!==d;d=d.prev){var b=d.prev;d.prev=d.next,d.next=b}return this.head=u,this.tail=o,this};try{J("./iterator.js")(q)}catch(o){}},{"./iterator.js":120}],122:[function(J,ie,ue){var q=J("./parser"),l=J("./utils"),F=l;function y(o,u){this.name="NonSupportedSparqlFeatureError",this.feature=o,this.message=u||"SPARQL feature "+o+" non supported"}function e(o){this.name=ParserError,this.message=o||"Error parsing SPARQL query"}y.prototype=new Error,y.constructor=y,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(o){return q.parse(o)},AbstractQueryTree.prototype.parseExecutableUnit=function(o){if("select"===o.kind)return this.parseSelect(o);if("ask"===o.kind)return this.parseSelect(o);if("modify"===o.kind)return this.parseSelect(o);if("construct"===o.kind)return this.parseSelect(o);if("insertdata"===o.kind)return this.parseInsertData(o);if("deletedata"===o.kind)return this.parseInsertData(o);if("load"===o.kind||"clear"===o.kind||"drop"===o.kind||"create"===o.kind)return o;throw new Error("unknown executable unit: "+o.kind)},AbstractQueryTree.prototype.parseSelect=function(o){return null==o?(console.log("error parsing query"),null):(o.pattern=this.build(o.pattern,{freshCounter:0}),o)},AbstractQueryTree.prototype.parseInsertData=function(o){return null==o?(console.log("error parsing query"),null):o},AbstractQueryTree.prototype.build=function(o,u){if("groupgraphpattern"===o.token)return this._buildGroupGraphPattern(o,u);if("basicgraphpattern"===o.token){var d={kind:"BGP",value:o.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(d,u)}if("graphunionpattern"===o.token)return{kind:"UNION",value:[this.build(o.value[0],u),this.build(o.value[1],u)]};if("graphgraphpattern"===o.token)return{kind:"GRAPH",value:this.build(o.value,u),graph:o.graph};throw null!=o.token?new y(o.token,"Non implemented SPARQL graph pattern: '"+o.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(o)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(o,u){for(var d,b,h,k=[],v=0;v<o.value.length;v++)if(o.value[v].predicate&&"path"===o.value[v].predicate.token){d=o.value[v],b=o.value.slice(v+1);var f=AbstractQueryTree.translatePathExpression(d,u),w=null;if("BGP"!==f.kind){if("ZERO_OR_MORE_PATH"===f.kind||"ONE_OR_MORE_PATH"===f.kind){if(h=k.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:k},rvalue:f}:f,"ZERO_OR_MORE_PATH"===f.kind)if("var"===f.y.token&&0===f.y.value.indexOf("fresh:")&&"var"===f.x.token&&0===f.x.value.indexOf("fresh:"))for(var T=0;T<o.value.length;T++)o.value[T].object&&"var"===o.value[T].object.token&&o.value[T].object.value===f.x.value&&((w=F.clone(o.value[T],!0)).object=f.y);else if("var"===f.y.token&&0===f.y.value.indexOf("fresh:"))for(T=0;T<o.value.length;T++)o.value[T].subject&&"var"===o.value[T].subject.token&&o.value[T].subject.value===f.y.value&&((w=F.clone(o.value[T],!0)).subject=f.x);if(b.length>0){var E=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:b},u);return null!=w?{kind:"UNION",value:[{kind:"JOIN",lvalue:h,rvalue:E},{kind:"BGP",value:k.concat([w]).concat(b)}]}:{kind:"JOIN",lvalue:h,rvalue:E}}return h}return f}k=k.concat(f.value)}else k.push(o.value[v]);return o.value=k,o},AbstractQueryTree.translatePathExpression=function(o,u){if("element"===o.predicate.kind)return"+"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,u),x:o.subject,y:o.object}):"*"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,u),x:o.subject,y:o.object}):(o.predicate=o.predicate.value,{kind:"BGP",value:[o]});if("sequence"===o.predicate.kind){for(var d,b,h=o.subject,k=o.object,v=o.graph,f=[],w=0;w<o.predicate.value.length;w++)w!=o.predicate.value.length-1?(d={token:"var",value:"fresh:"+u.freshCounter},u.freshCounter++):d=k,b={subject:h,predicate:o.predicate.value[w],object:d},null!=v&&(b.graph=F.clone(v,!0)),f.push(b),w!=o.predicate.value.length-1&&(h=F.clone(d,!0));var T={kind:"BGP",value:f};return AbstractQueryTree.translatePathExpressionsInBGP(T,u)}throw new y("Non supported path expression "+o.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(o,u){for(var d=o.filters||[],b=o.binds||[],h={kind:"EMPTY_PATTERN"},k=0;k<o.patterns.length;k++){var v=o.patterns[k];if("optionalgraphpattern"===v.token)h="FILTER"===(f=this.build(v.value,u)).kind?{kind:"LEFT_JOIN",lvalue:h,rvalue:f.value,filter:f.filter}:{kind:"LEFT_JOIN",lvalue:h,rvalue:f,filter:!0};else{var f=this.build(v,u);h="EMPTY_PATTERN"==h.kind?f:{kind:"JOIN",lvalue:h,rvalue:f}}}if(h.binds=b,0!=d.length){if("EMPTY_PATTERN"===h.kind)return{kind:"FILTER",filter:d,value:h};if("LEFT_JOIN"===h.kind&&!0===h.filter)return{kind:"FILTER",filter:d,value:h};if("LEFT_JOIN"===h.kind)return{kind:"FILTER",filter:d,value:h};if("JOIN"===h.kind)return{kind:"FILTER",filter:d,value:h};if("UNION"===h.kind)return{kind:"FILTER",filter:d,value:h};if("GRAPH"===h.kind)return{kind:"FILTER",filter:d,value:h};if("BGP"===h.kind)return{kind:"FILTER",filter:d,value:h};throw new Error("Unknow kind of algebra expression: "+h.kind)}return h},AbstractQueryTree.prototype.collectBasicTriples=function(o,u){if(null==u&&(u=[]),"select"===o.kind)u=this.collectBasicTriples(o.pattern,u);else if("BGP"===o.kind)u=u.concat(o.value);else if("ZERO_OR_MORE_PATH"===o.kind)u=this.collectBasicTriples(o.path);else if("UNION"===o.kind)u=this.collectBasicTriples(o.value[0],u),u=this.collectBasicTriples(o.value[1],u);else if("GRAPH"===o.kind)u=this.collectBasicTriples(o.value,u);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)u=this.collectBasicTriples(o.lvalue,u),u=this.collectBasicTriples(o.rvalue,u);else if("FILTER"===o.kind)u=this.collectBasicTriples(o.value,u);else if("construct"===o.kind)u=this.collectBasicTriples(o.pattern,u);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return u},AbstractQueryTree.prototype.bind=function(o,u){if(null!=o.graph&&o.graph.token&&"var"===o.graph.token&&null!=u[o.graph.value]&&(o.graph=u[o.graph.value]),null!=o.filter){for(var d=[],b=0;b<o.filter.length;b++)o.filter[b].value=this._bindFilter(o.filter[b].value,u),d.push(o.filter[b]);o.filter=d}if("select"===o.kind)o.pattern=this.bind(o.pattern,u);else if("BGP"===o.kind)o.value=this._bindTripleContext(o.value,u);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._bindTripleContext(o.path,u),o.x&&"var"===o.x.token&&null!=u[o.x.value]&&(o.x=u[o.x.value]),o.y&&"var"===o.y.token&&null!=u[o.y.value]&&(o.y=u[o.y.value]);else if("UNION"===o.kind)o.value[0]=this.bind(o.value[0],u),o.value[1]=this.bind(o.value[1],u);else if("GRAPH"===o.kind)o.value=this.bind(o.value,u);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.bind(o.lvalue,u),o.rvalue=this.bind(o.rvalue,u);else if("FILTER"===o.kind){var h=this;o.value=this.bind(o.value,u),o.filter=o.filter.map(function(k){return{token:"filter",value:h._bindFilter(k.value,u)}})}else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._bindTripleContext=function(o,u){for(var d=0;d<o.length;d++)for(var b in delete o[d].graph,delete o[d].variables,o[d]){var h=o[d][b];"var"===h.token&&null!=u[h.value]&&(o[d][b]=u[h.value])}return o},AbstractQueryTree.prototype._bindFilter=function(o,u){if(null!=o.expressionType){var d=o.expressionType;if("relationalexpression"==d)o.op1=this._bindFilter(o.op1,u),o.op2=this._bindFilter(o.op2,u);else if("conditionalor"==d||"conditionaland"==d)for(var b=0;b<o.operands.length;b++)o.operands[b]=this._bindFilter(o.operands[b],u);else if("additiveexpression"==d)for(o.summand=this._bindFilter(o.summand,u),b=0;b<o.summands.length;b++)o.summands[b].expression=this._bindFilter(o.summands[b].expression,u);else if("builtincall"==d)for(b=0;b<o.args.length;b++)o.args[b]=this._bindFilter(o.args[b],u);else if("multiplicativeexpression"==d)for(o.factor=this._bindFilter(o.factor,u),b=0;b<o.factors.length;b++)o.factors[b].expression=this._bindFilter(o.factors[b].expression,u);else if("unaryexpression"==d)o.expression=this._bindFilter(o.expression,u);else if("irireforfunction"==d)for(b=0;b<o.factors.args;b++)o.args[b]=this._bindFilter(o.args[b],u);else if("atomic"==d&&"var"==o.primaryexpression&&null!=u[o.value.value]){var h=u[o.value.value];"uri"===h.token?o.primaryexpression="iri":o.primaryexpression="literal",o.value=h}}return o},AbstractQueryTree.prototype.replace=function(o,u,d,b){if(null!=o.graph&&o.graph.token&&o.graph.token===u.token&&o.graph.value==u.value&&(o.graph=F.clone(d,!0)),null!=o.filter){for(var h=[],k=0;k<o.filter.length;k++)o.filter[k].value=this._replaceFilter(o.filter[k].value,u,d,b),h.push(o.filter[k]);o.filter=h}if("select"===o.kind)o.pattern=this.replace(o.pattern,u,d,b);else if("BGP"===o.kind)o.value=this._replaceTripleContext(o.value,u,d,b);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._replaceTripleContext(o.path,u,d,b),o.x&&o.x.token===u.token&&o.value===u.value&&(o.x=F.clone(d,!0)),o.y&&o.y.token===u.token&&o.value===u.value&&(o.y=F.clone(d,!0));else if("UNION"===o.kind)o.value[0]=this.replace(o.value[0],u,d,b),o.value[1]=this.replace(o.value[1],u,d,b);else if("GRAPH"===o.kind)o.value=this.replace(o.value,u,d);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.replace(o.lvalue,u,d,b),o.rvalue=this.replace(o.rvalue,u,d,b);else if("FILTER"===o.kind)o.value=this._replaceFilter(o.value,u,d,b);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._replaceTripleContext=function(o,u,d,b){for(var h=0;h<o.length;h++)for(var k in o[h]){var v=o[h][k];"var"===v.token&&"var"===u.token&&v.value===u.value||"blank"===v.token&&"blank"===u.token&&v.value===u.value?o[h][k]=d:"literal"!==v.token&&"uri"!==v.token||"literal"!==u.token&&"uri"!==u.token||v.token!==u.token||l.lexicalFormTerm(v,b)[v.token]!==l.lexicalFormTerm(u,b)[v.token]||(o[h][k]=d)}return o},AbstractQueryTree.prototype._replaceFilter=function(o,u,d,b){if(null!=o.expressionType){var h=o.expressionType;if("relationalexpression"==h)o.op1=this._replaceFilter(o.op1,u,d,b),o.op2=this._replaceFilter(o.op2,u,d,b);else if("conditionalor"==h||"conditionaland"==h)for(var k=0;k<o.operands.length;k++)o.operands[k]=this._replaceFilter(o.operands[k],u,d,b);else if("additiveexpression"==h)for(o.summand=this._replaceFilter(o.summand,u,d,b),k=0;k<o.summands.length;k++)o.summands[k].expression=this._replaceFilter(o.summands[k].expression,u,d,b);else if("builtincall"==h)for(k=0;k<o.args.length;k++)o.args[k]=this._replaceFilter(o.args[k],u,d,b);else if("multiplicativeexpression"==h)for(o.factor=this._replaceFilter(o.factor,u,d,b),k=0;k<o.factors.length;k++)o.factors[k].expression=this._replaceFilter(o.factors[k].expression,u,d,b);else if("unaryexpression"==h)o.expression=this._replaceFilter(o.expression,u,d,b);else if("irireforfunction"==h)for(k=0;k<o.factors.args;k++)o.args[k]=this._replaceFilter(o.args[k],u,d,b);else if("atomic"==h){var v=null;(o.primaryexpression==u.token&&o.value==u.value||"iri"==o.primaryexpression&&"uri"==u.token&&o.value==u.value)&&(v=d.value),null!=v&&("uri"===d.token?o.primaryexpression="iri":o.primaryexpression=d.token,o.value=v)}}return o},AbstractQueryTree.prototype.treeWithUnion=function(o){if(null==o||null==o.kind)return!1;if("select"===o.kind)return this.treeWithUnion(o.pattern);if("BGP"===o.kind)return this.treeWithUnion(o.value);if("ZERO_OR_MORE_PATH"===o.kind)return!1;if("UNION"===o.kind){if(null==o.value[0].value||null==o.value[0].value.variables||null==o.value[1].value||null==o.value[1].value.variables)return!0;if(o.value[0].variables.join("/")===o.values[1].variables.join("/"))return!!this.treeWithUnion(o.value[0])||this.treeWithUnion(o.value[1])}else{if("GRAPH"===o.kind)return!1;if("LEFT_JOIN"!==o.kind&&"JOIN"!==o.kind)return"FILTER"!==o.kind&&(o.kind,!1);if(this.treeWithUnion(o.lvalue))return!0;this.treeWithUnion(o.rvalue)}},ie.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:y,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(J,ie,ue){"use strict";var q=J("./utils"),l=q,F=q.nextTick,y=function(o,u){if(0!=arguments.length){this.order=o,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var d=this;this._diskWrite(this.root,function(b){d.root=b,d._updateRootNode(d.root,function(h){d.comparator=function(k,v){return k<v?-1:k>v?1:0},d.merger=null,null!=u&&u(d)})})}};y.prototype._allocateNode=function(){return new e},y.prototype._diskWrite=function(o,u){F(function(){u(o)})},y.prototype._diskRead=function(o,u){F(function(){u(o)})},y.prototype._diskDelete=function(o,u){F(function(){u()})},y.prototype._updateRootNode=function(o,u){u(o)},y.prototype.search=function(o,u,d){var b=this.root;this.__search(this,o,b,u,d)},y.prototype.__search=function(o,u,d,b,h){for(var k=0;k<d.numberActives&&1===o.comparator(u,d.keys[k].key);)k++;k<d.numberActives&&0===o.comparator(d.keys[k].key,u)?b(null!=h&&1==h||d.keys[k].data):!0===d.isLeaf?b(null):o._diskRead(d.children[k],function(v){o.__search(o,u,v,b,h)})},y.prototype.walk=function(o,u){this.__walk(this,this.root,o,u)},y.prototype.__walk=function(o,u,d,b){var h=u.numberActives,k=0;if(u.isLeaf){for(k=0;k<u.numberActives;k++)d(u.keys[k]);return b()}l.whilst(function(){return k<h},function(v){o._diskRead(u.children[k],function(f){o.__walk(o,f,d,function(){o._diskRead(u.keys[k],function(w){d(w),k++,v()})})})},function(){o._diskRead(u.children[h],function(v){o.__walk(o,v,d,function(){b()})})})},y.prototype.walkNodes=function(o){this.__walkNodes(this,root,o,function(){})},y.prototype.__walkNodes=function(o,u,d,b){if(u.isLeaf)return d(u),b();d(u);var h=u.numberActives,k=0;l.whilst(function(){return k<h},function(v){o._diskRead(u.children[k],function(f){o.__walkNodes(o,f,d,function(){k++,v()})})},function(){o._diskRead(u.children[h],function(v){o.__walkNodes(o,v,d,function(){})})})},y.prototype._splitChild=function(o,u,d,b){var h=this._allocateNode();h.isLeaf=d.isLeaf,h.level=d.level,h.numberActives=this.order-1;var k=d.keys[this.order-1];d.keys[this.order-1]=null;for(var v=0;v<this.order-1;v++)h.keys[v]=d.keys[v+this.order],d.keys[v+this.order]=null,d.isLeaf||(h.children[v]=d.children[v+this.order],d.children[v+this.order]=null);for(d.isLeaf||(h.children[v]=d.children[v+this.order],d.children[v+this.order]=null),d.numberActives=this.order-1,v=o.numberActives+1;v>u+1;v--)o.children[v]=o.children[v-1];for(o.children[u+1]=h,v=o.numberActives;v>u;v--)o.keys[v]=o.keys[v-1];o.keys[u]=k,o.numberActives++;var f=this;this._diskWrite(h,function(w){f._diskWrite(o,function(T){T.children[u+1]=w,f._diskWrite(d,function(E){return b(T)})})})},y.prototype.insert=function(o,u,d){if(this.root.numberActives===2*this.order-1){var b=this._allocateNode();b.isLeaf=!1,b.level=this.root.level+1,b.numberActives=0,b.children[0]=this.root;var h=this;this._splitChild(b,0,this.root,function(k){b=k,h.root=b,h._updateRootNode(b,function(v){h._insertNonFull(v,o,u,d)})})}else this._insertNonFull(this.root,o,u,d)},y.prototype._insertNonFull=function(o,u,d,b){var h=o.numberActives-1;this.__insertNonFull(this,o,h,u,d,b)},y.prototype.__insertNonFull=function(o,u,d,b,h,k){if(u.isLeaf){for(;d>=0&&-1===o.comparator(b,u.keys[d].key);)u.keys[d+1]=u.keys[d],d--;d>=0&&0===o.comparator(b,u.keys[d].key)?u.keys[d]={key:b,data:h}:(u.keys[d+1]={key:b,data:h},u.numberActives++),o._diskWrite(u,function(f){return k(f)})}else{for(;d>=0&&-1===o.comparator(b,u.keys[d].key);)d--;d++;var v=o;o._diskRead(u.children[d],function(f){f.numberActives===2*v.order-1?v._splitChild(u,d,f,function(){1===v.comparator(b,u.keys[d].key)&&d++,v._diskRead(u.children[d],function(w){d=w.numberActives-1,v.__insertNonFull(o,w,d,b,h,k)})}):v._diskRead(u.children[d],function(w){d=w.numberActives-1,v.__insertNonFull(o,w,d,b,h,k)})})}},y.prototype.delete=function(o,u){var d=this.root;y.prototype.__deleteSearchNode(this,o,d,u)},y.prototype.__deleteSearchNode=function(o,u,d,b){var h=0;if(0===d.numberActives)return b(!1);for(;h<d.numberActives&&1===o.comparator(u,d.keys[h].key);)h++;var k=h;if(h<d.numberActives&&0===o.comparator(u,d.keys[h].key))return o.__deleteNodeFound(o,k,u,d,b);if(!0===d.isLeaf)return b(!1);var v=d;o._diskRead(d.children[h],function(f){if(null===f)return b(!1);var w=!1,T=!1,E=null,P=null;k===v.numberActives?(T=!0,P=v.children[k-1],E=v.children[k-1]):0===k?(w=!0,E=v.children[1],P=v.children[1]):(P=v.children[k-1],E=v.children[k+1]),o._diskRead(P,function(M){o._diskRead(E,function(j){!0===T&&(j=null),!0===w&&(M=null),f.numberActives===o.order-1&&null!=v?null!=j&&j.numberActives>o.order-1?o._moveKey(v,h,-1,function(O){o.__deleteSearchNode(o,u,f,b)}):null!=M&&M.numberActives>o.order-1?o._moveKey(v,h,1,function(O){o.__deleteSearchNode(o,u,f,b)}):null!=M&&M.numberActives===o.order-1?o._mergeSiblings(v,h,-1,function(O){o.__deleteSearchNode(o,u,O,b)}):null!=j&&j.numberActives===o.order-1&&o._mergeSiblings(v,h,1,function(O){o.__deleteSearchNode(o,u,O,b)}):o.__deleteSearchNode(o,u,f,b)})})})},y.prototype.__deleteNodeFound=function(o,u,d,b,h){return b.isLeaf&&b.numberActives>o.order-1||b.isLeaf&&b===o.root?(o._deleteKeyFromNode(b,u,function(){h(!0)}),!0):(!1===b.isLeaf&&o._diskRead(b.children[u],function(k){k.numberActives>o.order-1?o._getMaxKeyPos(o,k,function(v){d=v.node.keys[v.index],b.keys[u]=d,o._diskWrite(b,function(f){f=k,d=d.key,o.__deleteSearchNode(o,d,f,h)})}):o._diskRead(b.children[u+1],function(v){v.numberActives>o.order-1?o._getMinKeyPos(o,v,function(f){d=f.node.keys[f.index],b.keys[u]=d,o._diskWrite(b,function(w){w=v,d=d.key,o.__deleteSearchNode(o,d,w,h)})}):k.numberActives===o.order-1&&v.numberActives===o.order-1&&o._mergeNodes(k,b.keys[u],v,function(f){b.children[u]=f;for(var w=++u;w<b.numberActives;w++)b.children[w]=b.children[w+1],b.keys[w-1]=b.keys[w];b.children[w]=null,b.keys[w-1]=null,b.numberActives--,0===b.numberActives&&o.root===b&&(o.root=f),o._diskWrite(b,function(T){o.__deleteSearchNode(o,d,f,h)})})})}),void(b.isLeaf&&b.numberActives>o.order-1&&o._deleteKeyFromNode(b,u,function(k){o.__deleteSearchNode(o,d,k,h)})))},y.prototype._moveKey=function(o,u,d,b){1===d&&u--;var h=this;h._diskRead(o.children[u],function(k){h._diskRead(o.children[u+1],function(v){if(-1==d){k.keys[k.numberActives]=o.keys[u],k.children[k.numberActives+1]=v.children[0],v.children[0]=null,k.numberActives++,o.keys[u]=v.keys[0];for(var f=1;f<v.numberActives;f++)v.keys[f-1]=v.keys[f],v.children[f-1]=v.children[f];v.children[v.numberActives-1]=v.children[v.numberActives],v.numberActives--}else{for(v.children[v.numberActives+1]=v.children[v.numberActives],f=v.numberActives;f>0;f--)v.children[f]=v.children[f-1],v.keys[f]=v.keys[f-1];v.keys[0]=null,v.children[0]=null,v.children[0]=k.children[k.numberActives],v.keys[0]=o.keys[u],v.numberActives++,k.children[k.numberActives]=null,o.keys[u]=k.keys[k.numberActives-1],k.keys[k.numberActives-1]=null,k.numberActives--}h._diskWrite(k,function(w){h._diskWrite(v,function(T){h._diskWrite(o,function(E){return b(E)})})})})})},y.prototype._mergeSiblings=function(o,u,d,b){var h,k,v,f;u===o.numberActives?(u--,v=o.children[o.numberActives-1],f=o.children[o.numberActives]):(v=o.children[u],f=o.children[u+1]);var w=this;w._diskRead(v,function(T){w._diskRead(f,function(E){var P=w._allocateNode();for(P.isLeaf=T.isLeaf,P.level=T.level,k=0;k<w.order-1;k++)P.keys[k]=T.keys[k],P.children[k]=T.children[k];for(P.keys[w.order-1]=o.keys[u],P.children[w.order-1]=T.children[w.order-1],k=0;k<w.order-1;k++)P.keys[k+w.order]=E.keys[k],P.children[k+w.order]=E.children[k];for(P.children[2*w.order-1]=E.children[w.order-1],o.children[u]=P,k=u;k<o.numberActives;k++)o.keys[k]=o.keys[k+1],o.children[k+1]=o.children[k+2];for(P.numberActives=T.numberActives+E.numberActives+1,o.numberActives--,h=o.numberActives;h<2*w.order-1;h++)o.keys[h]=null;0===o.numberActives&&w.root===o&&(w.root=P,P.level?P.isLeaf=!1:P.isLeaf=!0),w._diskWrite(P,function(M){w._diskWrite(o,function(j){w._diskDelete(T,function(){w._diskDelete(E,function(){if(w.root!==M)return b(M);w._updateRootNode(w.root,function(){return b(M)})})})})})})})},y.prototype._deleteKeyFromNode=function(o,u,d){var b,h=2*this.order-1;if(o.numberActives<h&&(h=o.numberActives),!1===o.isLeaf)return!1;for(o.keys[u],b=u;b<h-1;b++)o.keys[b]=o.keys[b+1];o.keys.pop(),o.numberActives--,this._diskWrite(o,function(k){return d(k)})},y.prototype._mergeNodes=function(o,u,d,b){var h,k;for((h=this._allocateNode()).isLeaf=!0,k=0;k<o.numberActives;k++)h.keys[k]=o.keys[k],h.children[k]=o.children[k];for(h.children[o.numberActives]=o.children[o.numberActives],h.keys[o.numberActives]=u,k=0;k<d.numberActives;k++)h.keys[k+o.numberActives+1]=d.keys[k],h.children[k+o.numberActives+1]=d.children[k];h.children[2*this.order-1]=d.children[d.numberActives],h.numberActives=o.numberActives+d.numberActives+1,h.isLeaf=o.isLeaf,h.level=o.level;var v=this;this._diskWrite(h,function(f){v._diskDelete(o,function(){v._diskDelete(d,function(){return b(f)})})})},y.prototype.audit=function(o){var u=[],d=[],b=this,h=function(v){for(var f=0;f<d.length;f++)if(0===b.comparator(d[f],v)){var w=" !!! duplicated key "+v;!0===o&&console.log(w),u.push(w)}},k=null;return b=this,this.walkNodes(function(v){!0===o&&(console.log("--- Node at "+v.level+" level"),console.log(" - leaf? "+v.isLeaf),console.log(" - num actives? "+v.numberActives),console.log(" - keys: "));for(var f=v.numberActives;f<v.keys.length;f++)null!=v.keys[f]&&!0===o&&(console.log(" * warning : redundant key data"),u.push(" * warning : redundant key data"));for(f=v.numberActives+1;f<v.children.length;f++)null!=v.children[f]&&!0===o&&(console.log(" * warning : redundant children data"),u.push(" * warning : redundant key data"));if(!1===v.isLeaf)for(f=0;f<v.numberActives;f++){var w=this._diskRead(v.children[f]).keys[this._diskRead(v.children[f]).numberActives-1].key,T=this._diskRead(v.children[f+1]).keys[0].key;if(!0===o&&console.log("   "+v.keys[f].key+"("+w+","+T+")"),-1===b.comparator(v.keys[f].key,w)){var E=" !!! value max left "+w+" > key "+v.keys[f].key;!0===o&&console.log(E),u.push(E)}1===b.comparator(v.keys[f].key,T)&&(E=" !!! value min right "+T+" < key "+v.keys[f].key,!0===o&&console.log(E),u.push(E)),h(v.keys[f].key),d.push(v.keys[f].key)}else for(null===k?k=v.level:k!=v.level&&(E=" !!! Leaf node with wrong level value",!0===o&&console.log(E),u.push(E)),f=0;f<v.numberActives;f++)!0===o&&console.log(" "+v.keys[f].key),h(v.keys[f].key),d.push(v.keys[f].key);v!=b.root&&(v.numberActives>2*b.order-1&&(!0===o&&(E=" !!!! MAX num keys restriction violated "),console.log(E),u.push(E)),v.numberActives<b.order-1&&(!0===o&&(E=" !!!! MIN num keys restriction violated "),console.log(E),u.push(E)))}),u},y.prototype._getMaxKeyPos=function(o,u,d){var b={};return null===u?d(null):!0===u.isLeaf?(b.node=u,b.index=u.numberActives-1,d(b)):(b.node=u,b.index=u.numberActives-1,void o._diskRead(u.children[u.numberActives],function(h){return o._getMaxKeyPos(o,h,d)}))},y.prototype._getMinKeyPos=function(o,u,d){var b={};if(null===u&&d(null),!0===u.isLeaf)return b.node=u,b.index=0,d(b);b.node=u,b.index=0,o._diskRead(u.children[0],function(h){return o._getMinKeyPos(o,h,d)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};ie.exports={Tree:y,Node:e}},{"./utils":140}],124:[function(J,ie,ue){var q=J("./utils"),l=J("./utils"),F=(J("./quad_index").QuadIndex,J("./quad_index").Pattern),y=J("./rdf_model"),e=J("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var o=0;o<this.indices.length;o++){var u=this.indices[o];this.indexMap[u]={},this.queriesIndexMap[u]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(o,u){this.updateInProgress[o].push(u)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(o){if(!0!==this.ongoingModification){var u=this;if(null!=this.updateInProgress){var d=u.updateInProgress;u.updateInProgress=null,this.sendNotification(Callbacks.deleted,d[Callbacks.deleted],function(){u.sendNotification(Callbacks.added,d[Callbacks.added],function(){u.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){u.dispatchQueries(function(){o(!0)})})})})}else o(!0)}else o(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(o,u,d){for(var b={},h=0;h<u.length;h++){var k=u[h];for(var v in this.indexMap){var f=this.indexMap[v],w=this.componentOrders[v];this._searchCallbacksInIndex(f,w,o,k,b),0!=this.pendingQueries.length&&(f=this.queriesIndexMap[v],this._searchQueriesInIndex(f,w,k))}}this.dispatchNotifications(b),null!=d&&d(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(o,u,d){for(var b=this.emptyNotificationsMap[o]||[],h=0;h<b.length;h++)b[h](o,u);d()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(o){for(var u in o){var d=this.callbacksMap[u],b=o[u][Callbacks.deleted];if(null!=b)try{d(Callbacks.deleted,b)}catch(k){}for(var h in o[u])if(h!=Callbacks.deleted)try{d(h,o[u][h])}catch(k){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(o,u,d,b,h){for(var k=b[1],v=(b=b[0],0);v<u.length+1;v++){for(var f=o._||[],w=[],T=0;T<f.length;T++){var E=f[T];null!=this.callbacksMap[E]&&(h[E]=h[E]||{},h[E][d]=h[E][d]||[],h[E][d].push(b),w.push(E))}o._=w;var P=u[v];if(null==o[""+k[P]])break;o=o[""+k[P]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(o,u){var d=this.emptyNotificationsMap[o]||[];d.push(u),this.emptyNotificationsMap[o]=d},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(o,u){var d=this.emptyNotificationsMap[o];null!=d&&(d=q.reject(d,function(b){return b===u})),this.emptyNotificationsMap[o]=d},Callbacks.CallbacksBackend.prototype.subscribe=function(o,u,d,b,h,k){var v=this._tokenizeComponents(o,u,d,b),f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var w=this;this.engine.normalizeQuad(v,f,!0,function(T){for(var E=new F(T),P=w._indexForPattern(E),M=w.componentOrders[P],j=w.indexMap[P],O=0;O<M.length;O++){var L=T[M[O]];if("_"===L){null==j._&&(j._=[]),w.callbackCounter++,j._.push(w.callbackCounter),w.callbacksMap[w.callbackCounter]=h,w.callbacksInverseMap[h]=w.callbackCounter;break}O===M.length-1?(j[L]=j[L]||{_:[]},w.callbackCounter++,j[L]._.push(w.callbackCounter),w.callbacksMap[w.callbackCounter]=h,w.callbacksInverseMap[h]=w.callbackCounter):(j[L]=j[L]||{},j=j[L])}null!=k&&k(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(o){var u=this.callbacksInverseMap[o];null!=u&&(delete this.callbacksInverseMap[o],delete this.callbacksMap[u])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(o,u,d,b){var h={};return null==o?h.subject=Callbacks.ANYTHING:0==o.indexOf("_:")?h.subject={token:"blank",value:o}:h.subject={token:"uri",value:o},h.predicate=null==u?Callbacks.ANYTHING:{token:"uri",value:u},h.object=null==d?Callbacks.ANYTHING:{token:"uri",value:d},h.graph=null==b?Callbacks.ANYTHING:{token:"uri",value:b},h},Callbacks.CallbacksBackend.prototype._indexForPattern=function(o){for(var u=o.indexKey,d=this.indices,b=0;b<d.length;b++)for(var h=d[b],k=this.componentOrders[h],v=0;v<k.length&&!1!==q.include(u,k[v]);v++)if(v==u.length-1)return h;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var o,u,d,b;4===arguments.length?(o=arguments[0],u=arguments[1],d=arguments[2],b=arguments[3]):(o=arguments[0],u=this.engine.lexicon.defaultGraphUri,d=arguments[1],b=arguments[2]);var h="CONSTRUCT { <"+o+"> ?p ?o } WHERE { GRAPH <"+u+"> { <"+o+"> ?p ?o } }",k=this,v={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,v);var f=[];this.engine.execute(h,function(w,T){if(w)b&&b(!1);else{var E=T,P=!1,M=function(j,O){if("eventsFlushed"===j&&P){P=!1;try{d(E)}catch(fe){}}else if("eventsFlushed"!==j){P=!0;for(var L=0;L<O.length;L++){var G=O[L],W=y.buildRDFResource(G.subject,f,k.engine,v),V=y.buildRDFResource(G.predicate,f,k.engine,v),$=y.buildRDFResource(G.object,f,k.engine,v);null!=W&&null!=V&&null!=$&&(G=new y.Triple(W,V,$),j===Callbacks.added?E.add(G):j===Callbacks.deleted&&E.remove(G))}}};k.observersMap[d]=M,k.subscribeEmpty(Callbacks.eventsFlushed,M),k.subscribe(o,null,null,null,M,function(){try{d(E)}catch(j){}b&&b(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(o){var u=this.observersMap[o];return!!u&&(this.unsubscribe(u),this.unsubscribeEmpty(Callbacks.eventsFlushed,u),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(o,u,d){var b=this.aqt.parseQueryString(o),h=this.aqt.parseSelect(b.units[0]),k=this.aqt.collectBasicTriples(h),v=this,f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var w=this.queryCounter;this.queryCounter++,this.queriesMap[w]=o,this.queriesInverseMap[o]=w,this.queriesList.push(w),this.queriesCallbacksMap[w]=u,l.eachSeries(k,function(T,E){null==T.graph&&(T.graph=v.engine.lexicon.defaultGraphUriTerm),v.engine.normalizeQuad(T,f,!0,function(P){for(var M=new F(P),j=v._indexForPattern(M),O=v.componentOrders[j],L=v.queriesIndexMap[j],G=0;G<O.length;G++){var W=P[O[G]];if("string"==typeof W){null==L._&&(L._=[]),L._.push(w);break}G===O.length-1?(L[W]=L[W]||{_:[]},L[W]._.push(w)):(L[W]=L[W]||{},L=L[W])}E()})},function(){v.engine.execute(o,function(T,E){T?console.log("ERROR in query callback "+E):u(E)}),null!=d&&d()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(o){var u=this.queriesInverseMap[o];null!=u&&(delete this.queriesInverseMap[o],delete this.queriesMap[u],this.queriesList=q.reject(this.queriesList,function(d){return d===u}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(o,u,d){for(var b=d[1],h=(d=d[0],0);h<u.length+1;h++){for(var k=o._||[],v=[],f=0;f<k.length;f++){var w=k[f];q.include(this.pendingQueries,w)&&(q.remove(this.pendingQueries,function(E){return E===w}),this.matchedQueries.push(w)),null!=this.queriesMap[w]&&v.push(w)}o._=v;var T=u[h];if(null==o[""+b[T]])break;o=o[""+b[T]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(o){var u,d,b=this,h={};l.eachSeries(this.matchedQueries,function(k,v){null==h[k]?(h[k]=!0,u=b.queriesMap[k],d=b.queriesCallbacksMap[k],b.engine.execute(u,function(f,w){if(!f)try{d(w)}catch(T){}v()})):v()},function(){o()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,ie.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(J,ie,ue){var q=J("jsonld");ue.JSONLDParser={};var l=ue.JSONLDParser;l.parser={async:!0,parse:function(F,y,e,o){try{"string"==typeof F&&(F=JSON.parse(F)),async function(u,d,b){var h=null;var v=function(j){return"BlankNode"===j.termType?{blank:j.value}:"NamedNode"===j.termType?{token:"uri",value:j.value}:"Literal"===j.termType?null!=j.language?{literal:'"'+j.value+'"@'+j.language}:null!==j.datatype?{literal:'"'+j.value+'"^^<'+j.datatype.value+">"}:{literal:'"'+j.value+'"'}:void 0};h=[];for(var f,w,T,E=await q.toRDF(u,{}),P=0;P<E.length;P++){var M=E[P];f=M.subject,w=M.predicate,T=M.object,h.push({subject:v(f),predicate:v(w),object:v(T),graph:d})}b(null,h)}(F,y,o)}catch(u){o(u)}}},ie.exports={JSONLDParser:l}},{jsonld:46}],126:[function(J,ie,ue){var q=J("./utils"),l=J("./btree").Tree;Lexicon=function(F){var y=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new l(2,function(o){y.uris=o,e()})},function(e){new l(2,function(o){y.literals=o,e()})},function(e){new l(2,function(o){y.knownGraphs=o,e()})},function(e){new l(2,function(o){y.oidUris=o,e()})},function(e){new l(2,function(o){y.oidLiterals=o,e()})},function(e){new l(2,function(o){y.oidBlanks=o,e()})})(function(){null!=F&&F(y)})},Lexicon.prototype.registerGraph=function(F,y,e){F!=this.defaultGraphOid?this.knownGraphs.insert(F,y,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(F,y){var e=[];this.knownGraphs.walk(function(o){!0===F?e.push(o.data):e.push(o.key)},function(){y(e)})},Lexicon.prototype.registerUri=function(F,y){var e=this;F===this.defaultGraphUri?y(this.defaultGraphOid):this.uris.search(F,function(o){if(null==o){var u=e.oidCounter,d="u"+u;e.oidCounter++,q.seq(function(b){e.uris.insert(F,[u,0],function(){b()})},function(b){e.oidUris.insert(d,F,function(){b()})})(function(){y(u)})}else u=o[0],o[1]=o[1]+1,y(u)})},Lexicon.prototype.resolveUri=function(F,y){F===this.defaultGraphUri?y(this.defaultGraphOid):this.uris.search(F,function(e){y(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(F,y){F===this.defaultGraphUri?y(0):this.uris.search(F,function(e){y(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(F){var y=this.oidCounter;this.oidCounter++;var e=""+y;this.oidBlanks.insert(e,e,function(){F(y)})},Lexicon.prototype.resolveBlank=function(F,y){var e=this;this.oidBlanks.search(F,function(o){if(null!=o)y(o);else{var u=e.oidCounter;this.oidCounter++,y(""+u)}})},Lexicon.prototype.resolveBlankCost=function(F,y){y(0)},Lexicon.prototype.registerLiteral=function(F,y){var e=this;this.literals.search(F,function(o){if(null==o){var u="l"+(d=e.oidCounter);e.oidCounter++,q.seq(function(b){e.literals.insert(F,[d,0],function(){b()})},function(b){e.oidLiterals.insert(u,F,function(){b()})})(function(){y(d)})}else{var d=o[0];o[1]=o[1]+1,y(d)}})},Lexicon.prototype.resolveLiteral=function(F,y){this.literals.search(F,function(e){y(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(F,y){this.literals.search(F,function(e){y(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(F){var y;return-1!=(y=F.lastIndexOf("@"))&&'"'===F[y-1]&&null!=F.substring(y,F.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:F.substring(1,y-1),lang:F.substring(y+1,F.length)}:-1!=(y=F.lastIndexOf("^^"))&&'"'===F[y-1]&&"<"===F[y+2]&&">"===F[F.length-1]?{token:"literal",value:F.substring(1,y-1),type:F.substring(y+3,F.length-1)}:{token:"literal",value:F.substring(1,F.length-1)}},Lexicon.prototype.parseUri=function(F){return{token:"uri",value:F}},Lexicon.prototype.retrieve=function(F,y){var e=this;F===this.defaultGraphOid?y({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):q.seq(function(o,u){e.oidUris.search("u"+F,function(d){u(null,null!=d?e.parseUri(d):null)})},function(o,u){null==o?e.oidLiterals.search("l"+F,function(d){u(null,null!=d?e.parseLiteral(d):null)}):u(null,o)},function(o,u){null==o?e.oidBlanks.search(""+F,function(d){u(null,null!=d?{token:"blank",value:"_:"+F}:null)}):u(null,o)})(null,function(o,u){y(u)})},Lexicon.prototype.clear=function(F){var y=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new l(2,function(o){y.uris=o,e()})},function(e){new l(2,function(o){y.literals=o,e()})},function(e){new l(2,function(o){y.knownGraphs=o,e()})},function(e){new l(2,function(o){y.oidUris=o,e()})},function(e){new l(2,function(o){y.oidLiterals=o,e()})},function(e){new l(2,function(o){y.oidBlanks=o,e()})})(function(){null!=F&&F()})},Lexicon.prototype.unregister=function(F,y,e){var o=this;q.seq(function(u){o._unregisterTerm(F.subject.token,y.subject,u)},function(u){o._unregisterTerm(F.predicate.token,y.predicate,u)},function(u){o._unregisterTerm(F.object.token,y.object,u)},function(u){null!=F.graph?o._unregisterTerm(F.graph.token,y.graph,u):u()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(F,y,e){var o=this;if("uri"===F)if(y!=this.defaultGraphOid){var u="u"+y;o.oidUris.search(u,function(d){o.uris.search(d,function(b){var h=b[1];""+b[0]==""+y?0===h?q.seq(function(k){o.oidUris.delete(u,function(){k()})},function(k){o.uris.delete(d,function(){k()})},function(k){o.knownGraphs.delete(y,function(){k()})})(function(){e()}):o.uris.insert(d,[y,h-1],function(){e()}):e()})})}else e();else"literal"===F?(this.oidCounter++,u="l"+y,o.oidLiterals.search(u,function(d){o.literals.search(d,function(b){var h=b[1];""+b[0]==""+y?0===h?q.seq(function(k){o.oidLiterals.delete(u,function(){k()})},function(k){o.literals.delete(d,function(){k()})})(function(){e()}):o.literals.insert(d,[y,h-1],function(){e()}):e()})})):"blank"===F?o.oidBlanks.delete(""+y,function(){e()}):e()},ie.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(J,ie,ue){if(!J("./utils").isWorker()){var q=J("http"),l=J("https"),F=J("url");NetworkTransport={load:function(y,e,o,u){var d=null==u?3:u,b=F.parse(y,!0,!0),h={host:b.host,hostname:b.hostname,method:"GET",path:b.path,headers:{host:b.hostname,Accept:e}},k=null;"http:"===b.protocol?(h.port=b.port||80,k=q):"https:"===b.protocol&&(h.port=b.port||443,k=l);var v=k.request(h,function(f){var w=f.headers,T="";if("2"==(""+f.statusCode)[0])f.on("end",function(){o(null,{headers:w,data:T})}),f.on("data",function(P){T+=P});else if("3"==(""+f.statusCode)[0])if(0==d)o(new Error("Too many redirections"));else{var E=w.Location||w.location;null!=E?NetworkTransport.load(E,e,o,d-1):o(new Error("Redirection without location header"))}else o(new Error("HTTP error: "+f.statusCode))});v.on("error",o),v.end()}},ie.exports={NetworkTransport}}},{"./utils":140,http:94,https:24,url:115}],128:[function(J,ie,ue){ie.exports=function(){"use strict";function q(l,F,y,e){this.message=l,this.expected=F,this.found=y,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,q)}return function(l,F){function y(){this.constructor=l}y.prototype=F.prototype,l.prototype=new y}(q,Error),q.buildMessage=function(l,F){var d,y={literal:function(d){return'"'+o(d.text)+'"'},class:function(d){var b,h="";for(b=0;b<d.parts.length;b++)h+=d.parts[b]instanceof Array?u(d.parts[b][0])+"-"+u(d.parts[b][1]):u(d.parts[b]);return"["+(d.inverted?"^":"")+h+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};function e(d){return d.charCodeAt(0).toString(16).toUpperCase()}function o(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+e(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+e(b)})}function u(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+e(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+e(b)})}return"Expected "+function(d){var b,h,k,v=new Array(d.length);for(b=0;b<d.length;b++)v[b]=(k=d[b],y[k.type](k));if(v.sort(),v.length>0){for(b=1,h=1;b<v.length;b++)v[b-1]!==v[b]&&(v[h]=v[b],h++);v.length=h}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}(l)+" but "+(((d=F)?'"'+o(d)+'"':"end of input")+" found.")},{SyntaxError:q,parse:function(l,F){F=void 0!==F?F:{};var y,e={},o={DOCUMENT:jh},u=jh,d=ze("[1] QueryUnit"),b=ze("[2] Query"),k=ze("[3] Prologue"),f=ze("[4] BaseDecl"),w="BASE",T=Ge("BASE",!1),E="base",P=Ge("base",!1),j=ze("[5] PrefixDecl"),O="PREFIX",L=Ge("PREFIX",!1),G="prefix",W=Ge("prefix",!1),$=ze("[6] SelectQuery"),ce=ze("[7] SubSelect"),te=ze("[8] SelectClause"),ne=Ge("SELECT",!1),Ce=Ge("select",!1),me="DISTINCT",de=Ge("DISTINCT",!1),ye="distinct",Ee=Ge("distinct",!1),Be="REDUCED",Ie=Ge("REDUCED",!1),qe="reduced",U=Ge("reduced",!1),H="(",ee=Ge("(",!1),pe="AS",Ne=Ge("AS",!1),ke="as",Pe=Ge("as",!1),Je=")",Ke=Ge(")",!1),at="*",pt=Ge("*",!1),zt=ze("[9] ConstructQuery"),Te="CONSTRUCT",De=Ge("CONSTRUCT",!1),Re="construct",K=Ge("construct",!1),he="WHERE",be=Ge("WHERE",!1),Le="where",Se=Ge("where",!1),_e="{",je=Ge("{",!1),He="}",Ze=Ge("}",!1),Ve=ze("[10] DescribeQuery"),et="DESCRIBE",kt=Ge("DESCRIBE",!1),vt=ze("[11] AskQuery"),bt=Ge("ASK",!1),st=Ge("ask",!1),Ct=ze("[12] DatasetClause"),jn=Ge("FROM",!1),Ei=Ge("from",!1),ys=ze("[13] DefaultGraphClause"),ms=ze("[14] NamedGraphClause"),Hr="NAMED",ri=Ge("NAMED",!1),Rr="named",ni=Ge("named",!1),Wr=ze("[15] SourceSelector"),vo=ze("[16] WhereClause"),en=ze("[17] SolutionModifier"),bs=ze("[18] GroupClause"),ii=Ge("GROUP",!1),xs=Ge("group",!1),go=Ge("BY",!1),Xt=Ge("by",!1),Mn=ze("[19] GroupCondition"),Li=ze("[20] HavingClause"),ot=Ge("HAVING",!1),St=ze("[21] HavingCondition"),ks=ze("[22] OrderClause"),bo=Ge("ORDER",!1),Ra=Ge("order",!1),Lu=ze("[23] OrderCondition"),xo=Ge("ASC",!1),ja=Ge("asc",!1),Oi=Ge("DESC",!1),Da=Ge("desc",!1),Pa=ze("[24] LimitOffsetClauses"),Qa=ze("[25] LimitClause"),Iu=Ge("LIMIT",!1),tn=Ge("limit",!1),Ru=ze("[26] OffsetClause"),ji=Ge("OFFSET",!1),ju=Ge("offset",!1),Mu=ze("[27] BindingsClause"),ko="BINDINGS",Ha=Ge("BINDINGS",!1),Pu=ze("[28] BindingValue"),Di="UNDEF",Fs=Ge("UNDEF",!1),_o=ze("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Pn="VALUES",Co=Ge("VALUES",!1),Mi="values",Es=Ge("values",!1),Bu=ze("[29] UpdateUnit"),Wa=ze("[30] Update"),nr=";",rn=Ge(";",!1),Ts=ze("[31] Update1"),za=ze("[32] Load"),Ns=Ge("LOAD",!1),Ao=Ge("load",!1),oi=Ge("INTO",!1),Uu=Ge("into",!1),Hu=ze("[33] Clear"),Xa=Ge("CLEAR",!1),Wu=Ge("clear",!1),si="SILENT",Is=Ge("SILENT",!1),Bn="silent",Os=Ge("silent",!1),Eo=ze("[34] Drop"),zu=Ge("DROP",!1),qu=Ge("drop",!1),ir=ze("[35] Create"),Za=Ge("CREATE",!1),Xu=Ge("create",!1),Ju=ze("[36] InsertData"),li="INSERT",Rs=Ge("INSERT",!1),To="insert",el=Ge("insert",!1),Bi="DATA",js=Ge("DATA",!1),No="data",ui=Ge("data",!1),Lo=ze("[37] DeleteData"),xn="DELETE",Io=Ge("DELETE",!1),mr="delete",sn=Ge("delete",!1),Vu=ze("[38] DeleteWhere"),Ku=ze("[39] Modify"),Ps=Ge("WITH",!1),Jr=Ge("with",!1),nl=ze("[40] DeleteClause"),Yu=ze("[41] InsertClause"),Zu=ze("[42] UsingClause"),ol=Ge("USING",!1),sl=Ge("using",!1),Qs=ze("[43] GraphRef"),an="GRAPH",Oo=Ge("GRAPH",!1),ln="graph",Er=Ge("graph",!1),Us=ze("[44] GraphRefAll"),Ro="DEFAULT",ul=Ge("DEFAULT",!1),Gs="default",Hs=Ge("default",!1),Gn=Ge("ALL",!1),ci=Ge("all",!1),zs=ze("[45] QuadPattern"),qs=function(s){return s.quadsContext},Xs=ze("[46] QuadData"),Wn=ze("[47] Quads"),Jt=".",Bt=Ge(".",!1),kn=ze("[48] QuadsNotTriples"),tf=ze("[49] TriplesTemplate"),Qi=ze("[50] GroupGraphPattern"),Js=ze("[51] GroupGraphPatternSub"),rf=ze("[54] TriplesBlock"),hl=ze("[53] GraphPatternNotTriples"),Ks=ze("[54] OptionalGraphPattern"),Po="OPTIONAL",hi=Ge("OPTIONAL",!1),Ui="optional",pl=Ge("optional",!1),nf=ze("[55] GraphGraphPattern"),sf=ze("[56] ServiceGraphPattern"),Qo="SERVICE",Ys=Ge("SERVICE",!1),Gi=ze("[57] MinusGraphPattern"),Uo=Ge("MINUS",!1),Hi=Ge("minus",!1),zn=ze("[58] GroupOrUnionGraphPattern"),_n="UNION",Cn=Ge("UNION",!1),Sn="union",qn=Ge("union",!1),yl=ze("[59] Filter"),af=Ge("FILTER",!1),Xn=Ge("filter",!1),uf=ze("[60] Bind"),ff=Ge("BIND",!1),cf=Ge("bind",!1),or=ze("[60] Constraint"),vr=ze("[61] InlineData"),Wi=ze("[62] DataBlock"),hf=ze("[63] InlineDataOneVar"),pf=ze("[64] InlineDataFull"),vf=ze("[65] DataBlockValue"),ea=ze("[61] FunctionCall"),ta=ze("[62] ArgList"),Zt=",",$t=Ge(",",!1),_l=ze("[63] ExpressionList"),Cl=ze("[64] ConstructTemplate"),gf=ze("[65] ConstructTriples"),un=ze("[66] TriplesSameSubject"),Al=ze("[83] PropertyListPathNotEmpty"),Dt=ze("[67] PropertyListNotEmpty"),Fn=ze("[68] PropertyList"),En=ze("[86] ObjectListPath"),na=ze("[69] ObjectList"),mf=ze("[87] ObjectPath"),ia=ze("[70] Object"),qi=ze("[71] Verb"),di=Ge("a",!1),Tl=ze("[72] TriplesSameSubjectPath"),Wo=ze("[73] PropertyListNotEmptyPath"),Ll=ze("[74] PropertyListPath"),xf=ze("[75]"),wf=ze("[76] VerbSimple"),kf=ze("[77] Path"),zo=ze("[78] PathAlternative"),qo=Ge("|",!1),Ol=ze("[79] PathSequence"),cn=Ge("/",!1),Rl=ze("[88] PathElt"),jl=ze("[81] PathEltOrInverse"),aa=Ge("^",!1),Jo=ze("[82] PathMod"),Ko=Ge("?",!1),hn="+",Nr=Ge("+",!1),Yo=ze("[83] PathPrimary"),$o=Ge("!",!1),Ml=ze("[85] PathOneInPropertySet"),vi=ze("[86] Integer"),Pl=ze("[100] TriplesNodePath"),Bl=ze("[87] TriplesNode"),Cf=ze("[101] BlankNodePropertyListPath"),ts=Ge("[",!1),ns=Ge("]",!1),Yi=ze("[88] BlankNodePropertyList"),$i=ze("[103] CollectionPath"),Sf=ze("[89] Collection"),Ql=ze("[105] GraphNodePath"),pn=function(s){return s[1]},gi=ze("[90] GraphNode"),eo=ze("[91] VarOrTerm"),Af=ze("[92] VarOrIRIref"),Ul=ze("[93] Var"),Ef=ze("[94] GraphTerm"),Tf=ze("[95] Expression"),br=ze("[96] ConditionalOrExpression"),Gl=Ge("||",!1),Lf=ze("[97] ConditionalAndExpression"),ua=Ge("&&",!1),If=ze("[98] ValueLogical"),Of=ze("[99] RelationalExpression"),Mr=Ge("=",!1),no=Ge("!=",!1),Pr=Ge("<",!1),ca=Ge(">",!1),ha=Ge("<=",!1),pa=Ge(">=",!1),vn=Ge("I",!1),mi=Ge("i",!1),bi=Ge("N",!1),Kn=Ge("n",!1),da=Ge("O",!1),zl=Ge("o",!1),xi=Ge("T",!1),ga=Ge("t",!1),ya=ze("[100] NumericExpression"),Xl=ze("[101] AdditiveExpression"),Kr="-",Br=Ge("-",!1),jf=ze("[102] MultiplicativeExpression"),so=ze("[103] UnaryExpression"),Mf=ze("[104] PrimaryExpression"),Uf=ze("[105] BrackettedExpression"),Yl=ze("[106] BuiltInCall"),Zl=Ge("STR",!1),eu=Ge("str",!1),ss=Ge("LANG",!1),Hf=Ge("lang",!1),Ut="LANGMATCHES",zf=Ge("LANGMATCHES",!1),as="langmatches",lo=Ge("langmatches",!1),uo="DATATYPE",xa=Ge("DATATYPE",!1),wa="datatype",ru=Ge("datatype",!1),iu=Ge("BOUND",!1),_a=Ge("bound",!1),au=Ge("IRI",!1),ki=Ge("iri",!1),Xf=Ge("URI",!1),Jf=Ge("uri",!1),ls=Ge("BNODE",!1),t="bnode",n=Ge("bnode",!1),a="COALESCE",m=Ge("COALESCE",!1),D="coalesce",X=Ge("coalesce",!1),ae=Ge("IF",!1),Fe=Ge("if",!1),Qe="ISLITERAL",Ye=Ge("ISLITERAL",!1),tt="isliteral",lt=Ge("isliteral",!1),ct="isLITERAL",dt=Ge("isLITERAL",!1),gt="ISBLANK",_t=Ge("ISBLANK",!1),wt="isblank",Nt=Ge("isblank",!1),Qt="isBLANK",ar=Ge("isBLANK",!1),xr="SAMETERM",wr=Ge("SAMETERM",!1),Vt="sameterm",kr=Ge("sameterm",!1),tr=Ge("ISURI",!1),_r=Ge("isuri",!1),In=Ge("isURI",!1),Yr=Ge("ISIRI",!1),Ca=Ge("isiri",!1),Zn=Ge("isIRI",!1),pr="custom:",_i=Ge("custom:",!1),us="CUSTOM:",wp=Ge("CUSTOM:",!1),Fc=/^[a-zA-Z0-9_]/,Ec=Rt([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),_p=ze("[107] RegexExpression"),Cp=Ge("REGEX",!1),Sp=Ge("regex",!1),Fp=ze("[108] ExistsFunc"),fu="EXISTS",Lc=Ge("EXISTS",!1),cu="exists",Ic=Ge("exists",!1),Tp=ze("[109] NotExistsFunc"),Np=Ge("NOT",!1),Lp=Ge("not",!1),Op=ze("[110] Aggregate"),Rp=Ge("COUNT",!1),jp=Ge("count",!1),Mc="GROUP_CONCAT",Mp=Ge("GROUP_CONCAT",!1),Pc="group_concat",Pp=Ge("group_concat",!1),Bc="SEPARATOR",Bp=Ge("SEPARATOR",!1),Up=Ge("SUM",!1),Gp=Ge("sum",!1),Wp=Ge("MIN",!1),zp=Ge("min",!1),Xp=Ge("MAX",!1),Jp=Ge("max",!1),Kp=Ge("AVG",!1),Yp=Ge("avg",!1),$p=ze("[117] IRIrefOrFunction"),td=ze("[112] RDFLiteral"),rd=Ge("^^",!1),id=ze("[113] NumericLiteral"),od=ze("[114] NumericLiteralUnsigned"),sd=ze("[115] NumericLiteralPositive"),ad=ze("[116] NumericLiteralNegative"),ld=ze("[117] BooleanLiteral"),ud=Ge("TRUE",!1),fd=Ge("true",!1),hd=Ge("FALSE",!1),pd=Ge("false",!1),vd=ze("[118] String"),hu=function(s){return{token:"string",value:s}},gd=ze("[119] IRIref"),md=ze("[120] PrefixedName"),wd=ze("[121] BlankNode"),Cd=ze("[122] IRI_REF"),eh=/^[^<>"{}|\^`\\]/,th=Rt(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Ad=ze("[123] PNAME_NS"),Aa=Ge(":",!1),Fd=ze("[124] PNAME_LN"),Td=ze("[125] BLANK_NODE_LABEL"),Nd=Ge("_:",!1),Id=ze("[126] VAR1"),Od=ze("[127] VAR2"),oh=Ge("$",!1),Rd=ze("[128] LANGTAG"),ah=Ge("@",!1),lh=/^[a-zA-Z]/,uh=Rt([["a","z"],["A","Z"]],!1,!1),pu=/^[a-zA-Z0-9]/,du=Rt([["a","z"],["A","Z"],["0","9"]],!1,!1),Dd=ze("[129] INTEGER"),Kt=/^[0-9]/,Yt=Rt([["0","9"]],!1,!1),Pd=ze("[130] DECIMAL"),Ud=ze("[131] DOUBLE"),zd=ze("[132] INTEGER_POSITIVE"),Xd=ze("[133] DECIMAL_POSITIVE"),fh=function(s){return s.value="+"+s.value,s},Jd=ze("[134] DOUBLE_POSITIVE"),Vd=ze("[135] INTEGER_NEGATIVE"),Kf=function(s){return s.value="-"+s.value,s},Kd=ze("[136] DECIMAL_NEGATIVE"),Yd=ze("[137] DOUBLE_NEGATIVE"),Zd=ze("[138] EXPONENT"),$d=/^[eE]/,ev=Rt(["e","E"],!1,!1),tv=/^[+\-]/,rv=Rt(["+","-"],!1,!1),iv=ze("[139] STRING_LITERAL1"),Zf=Ge("'",!1),ch=/^[^'\\\n\r]/,hh=Rt(["'","\\","\n","\r"],!0,!1),vu=function(s){return Si(s)},ov=ze("[140] STRING_LITERAL2"),dh=Ge('"',!1),vh=/^[^"\\\n\r]/,gh=Rt(['"',"\\","\n","\r"],!0,!1),sv=ze("[141] STRING_LITERAL_LONG1"),gu="'''",yh=Ge("'''",!1),mh=/^[^'\\]/,bh=Rt(["'","\\"],!0,!1),av=ze("[142] STRING_LITERAL_LONG2"),yu='"""',xh=Ge('"""',!1),wh=/^[^"\\]/,kh=Rt(['"',"\\"],!0,!1),lv=ze("[143] ECHAR"),Ch=Ge("\\",!1),uv=/^[tbnrf"']/,fv=Rt(["t","b","n","r","f",'"',"'"],!1,!1),cv=ze("[144] NIL"),pv=ze("[145] WS"),dv=/^[ ]/,vv=Rt([" "],!1,!1),gv=/^[\t]/,yv=Rt(["\t"],!1,!1),mv=/^[\r]/,bv=Rt(["\r"],!1,!1),xv=/^[\n]/,wv=Rt(["\n"],!1,!1),kv=ze(" COMMENT"),Ah=Ge("#",!1),Fh=/^[^\n\r]/,Eh=Rt(["\n","\r"],!0,!1),_v=ze("[146] ANON"),Cv=ze("[147] PN_CHARS_BASE"),Sv=/^[A-Z]/,Av=Rt([["A","Z"]],!1,!1),Fv=/^[a-z]/,Ev=Rt([["a","z"]],!1,!1),Tv=/^[\xC0-\xD6]/,Nv=Rt([["\xc0","\xd6"]],!1,!1),Lv=/^[\xD8-\xF6]/,Iv=Rt([["\xd8","\xf6"]],!1,!1),Ov=/^[\xF8-\u02FF]/,Rv=Rt([["\xf8","\u02ff"]],!1,!1),jv=/^[\u0370-\u037D]/,Dv=Rt([["\u0370","\u037d"]],!1,!1),Mv=/^[\u037F-\u1FFF]/,Pv=Rt([["\u037f","\u1fff"]],!1,!1),Bv=/^[\u200C-\u200D]/,Qv=Rt([["\u200c","\u200d"]],!1,!1),Uv=/^[\u2070-\u218F]/,Gv=Rt([["\u2070","\u218f"]],!1,!1),Hv=/^[\u2C00-\u2FEF]/,Wv=Rt([["\u2c00","\u2fef"]],!1,!1),zv=/^[\u3001-\uD7FF]/,qv=Rt([["\u3001","\ud7ff"]],!1,!1),Xv=/^[\uF900-\uFDCF]/,Jv=Rt([["\uf900","\ufdcf"]],!1,!1),Vv=/^[\uFDF0-\uFFFD]/,Kv=Rt([["\ufdf0","\ufffd"]],!1,!1),Yv=/^[\u1000-\uEFFF]/,Zv=Rt([["\u1000","\uefff"]],!1,!1),$v=ze("[148] PN_CHARS_U"),Nh=Ge("_",!1),eg=ze("[149] VARNAME"),$f=/^[\xB7]/,ec=Rt(["\xb7"],!1,!1),tc=/^[\u0300-\u036F]/,rc=Rt([["\u0300","\u036f"]],!1,!1),nc=/^[\u203F-\u2040]/,ic=Rt([["\u203f","\u2040"]],!1,!1),rg=ze("[150] PN_CHARS"),ng=ze("[151] PN_PREFIX"),og=ze("[152] PN_LOCAL"),ag=ze("[170] PLX"),lg=ze("[171] PERCENT"),Ih=Ge("%",!1),fg=ze("[172] HEX"),cg=/^[A-F]/,hg=Rt([["A","F"]],!1,!1),pg=/^[a-f]/,dg=Rt([["a","f"]],!1,!1),vg=ze("[173] PN_LOCAL_ESC"),yg=Ge("~",!1),bg=Ge("&",!1),r=0,mu=[{line:1,column:1}],On=0,oc=[],A=0;if("startRule"in F){if(!(F.startRule in o))throw new Error("Can't start parsing from rule \""+F.startRule+'".');u=o[F.startRule]}function Ge(s,x){return{type:"literal",text:s,ignoreCase:x}}function Rt(s,x,C){return{type:"class",parts:s,inverted:x,ignoreCase:C}}function ze(s){return{type:"other",description:s}}function Oh(s){var x,C=mu[s];if(C)return C;for(x=s-1;!mu[x];)x--;for(C={line:(C=mu[x]).line,column:C.column};x<s;)10===l.charCodeAt(x)?(C.line++,C.column=1):C.column++,x++;return mu[s]=C,C}function Rh(s,x){var C=Oh(s),_=Oh(x);return{start:{offset:s,line:C.line,column:C.column},end:{offset:x,line:_.line,column:_.column}}}function z(s){r<On||(r>On&&(On=r,oc=[]),oc.push(s))}function jh(){return A++,A++,C=r,(_=Dh())!==e?((N=function(){var I,B,Y,le,ge,Oe,We,Ae,Xe,nt;if(A++,I=r,(B=Ph())!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){for(le=[],ge=Rn();ge!==e;)le.push(ge),ge=Rn();if(le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=Fa())!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if((Ae=Ea())!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();Xe!==e&&(nt=function(){var Me,$e,it,ft,Lt,ut,Ot,jt,Ft;if(A++,Me=r,l.substr(r,8)===ko?($e=ko,r+=8):($e=e,0===A&&z(Ha)),$e!==e){for(it=[],ft=gr();ft!==e;)it.push(ft),ft=gr();if(it!==e)if(123===l.charCodeAt(r)?(ft=_e,r++):(ft=e,0===A&&z(je)),ft!==e){if(Lt=[],ut=r,40===l.charCodeAt(r)?(Ot=H,r++):(Ot=e,0===A&&z(ee)),Ot!==e){if(jt=[],(Ft=bu())!==e)for(;Ft!==e;)jt.push(Ft),Ft=bu();else jt=e;jt!==e?(41===l.charCodeAt(r)?(Ft=Je,r++):(Ft=e,0===A&&z(Ke)),Ft!==e?ut=Ot=[Ot,jt,Ft]:(r=ut,ut=e)):(r=ut,ut=e)}else r=ut,ut=e;for(ut===e&&(ut=ti());ut!==e;){if(Lt.push(ut),ut=r,40===l.charCodeAt(r)?(Ot=H,r++):(Ot=e,0===A&&z(ee)),Ot!==e){if(jt=[],(Ft=bu())!==e)for(;Ft!==e;)jt.push(Ft),Ft=bu();else jt=e;jt!==e?(41===l.charCodeAt(r)?(Ft=Je,r++):(Ft=e,0===A&&z(Ke)),Ft!==e?ut=Ot=[Ot,jt,Ft]:(r=ut,ut=e)):(r=ut,ut=e)}else r=ut,ut=e;ut===e&&(ut=ti())}Lt!==e?(125===l.charCodeAt(r)?(ut=He,r++):(ut=e,0===A&&z(Ze)),ut!==e?Me=$e=[$e,it,ft,Lt,ut]:(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return Me===e&&(Me=null),A--,Me===e&&($e=e,0===A&&z(Mu)),Me}())!==e?(B=function(s,x,C,_){for(var N={named:[],implicit:[]},R=0;R<x.length;R++){var I=x[R];"default"===I.kind?N.implicit.push(I.graph):N.named.push(I.graph)}0===N.named.length&&0===N.implicit.length&&N.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var B={kind:"select",token:"executableunit"};return B.dataset=N,B.projection=s.vars,B.modifier=s.modifier,B.pattern=C,null!=_&&null!=_.limit&&(B.limit=_.limit),null!=_&&null!=_.offset&&(B.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(B.order=_.order),null!=_&&null!=_.group&&(B.group=_.group),B}(B,le,Oe,Ae),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e}else r=I,I=e}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z($)),I}())===e&&(N=function(){var I,B,Y,le,ge,Oe,We,Ae,Xe,nt,Me,$e,it,ft,Lt;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(l.substr(r,9)===Te?(Y=Te,r+=9):(Y=e,0===A&&z(De)),Y===e&&(l.substr(r,9)===Re?(Y=Re,r+=9):(Y=e,0===A&&z(K))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if((ge=function(){var ut,Ot,jt,Ft,Cr,lr;if(A++,ut=r,123===l.charCodeAt(r)?(Ot=_e,r++):(Ot=e,0===A&&z(je)),Ot!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();if(jt!==e)if((Ft=function dr(){var Sr,Ar,ur,Oa,Ai,Tu,Fi;if(A++,Sr=r,(Ar=rp())!==e){for(ur=r,Oa=[],Ai=Q();Ai!==e;)Oa.push(Ai),Ai=Q();if(Oa!==e)if(46===l.charCodeAt(r)?(Ai=Jt,r++):(Ai=e,0===A&&z(Bt)),Ai!==e){for(Tu=[],Fi=Q();Fi!==e;)Tu.push(Fi),Fi=Q();Tu!==e?((Fi=dr())===e&&(Fi=null),Fi!==e?ur=Oa=[Oa,Ai,Tu,Fi]:(r=ur,ur=e)):(r=ur,ur=e)}else r=ur,ur=e;else r=ur,ur=e;ur===e&&(ur=null),ur!==e?(Ar=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x.length&&null!=x[3]&&null!=x[3].triplesContext&&(C=C.concat(x[3].triplesContext)),{token:"triplestemplate",triplesContext:C}}(Ar,ur),Sr=Ar):(r=Sr,Sr=e)}else r=Sr,Sr=e;return A--,Sr===e&&(Ar=e,0===A&&z(gf)),Sr}())===e&&(Ft=null),Ft!==e){for(Cr=[],lr=Q();lr!==e;)Cr.push(lr),lr=Q();Cr!==e?(125===l.charCodeAt(r)?(lr=He,r++):(lr=e,0===A&&z(Ze)),lr!==e?ut=Ot=Ft:(r=ut,ut=e)):(r=ut,ut=e)}else r=ut,ut=e;else r=ut,ut=e}else r=ut,ut=e;return A--,ut===e&&(Ot=e,0===A&&z(Cl)),ut}())!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();if(Oe!==e){for(We=[],Ae=Rn();Ae!==e;)We.push(Ae),Ae=Rn();if(We!==e){for(Ae=[],Xe=Q();Xe!==e;)Ae.push(Xe),Xe=Q();if(Ae!==e)if((Xe=Fa())!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();nt!==e&&(Me=Ea())!==e?(B=function(s,x,C,_){for(var N={named:[],implicit:[]},R=0;R<x.length;R++){var I=x[R];"default"===I.kind?N.implicit.push(I.graph):N.named.push(I.graph)}0===N.named.length&&0===N.implicit.length&&N.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var B={kind:"construct",token:"executableunit"};return B.dataset=N,B.template=s,B.pattern=C,null!=_&&null!=_.limit&&(B.limit=_.limit),null!=_&&null!=_.offset&&(B.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(B.order=_.order),B}(ge,We,Xe,Me),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}else r=I,I=e}else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(l.substr(r,9)===Te?(Y=Te,r+=9):(Y=e,0===A&&z(De)),Y===e&&(l.substr(r,9)===Re?(Y=Re,r+=9):(Y=e,0===A&&z(K))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){for(ge=[],Oe=Rn();Oe!==e;)ge.push(Oe),Oe=Rn();if(ge!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();if(Oe!==e)if(l.substr(r,5)===he?(We=he,r+=5):(We=e,0===A&&z(be)),We===e&&(l.substr(r,5)===Le?(We=Le,r+=5):(We=e,0===A&&z(Se))),We!==e){for(Ae=[],Xe=Q();Xe!==e;)Ae.push(Xe),Xe=Q();if(Ae!==e)if(123===l.charCodeAt(r)?(Xe=_e,r++):(Xe=e,0===A&&z(je)),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if((Me=fs())===e&&(Me=null),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();if($e!==e)if(125===l.charCodeAt(r)?(it=He,r++):(it=e,0===A&&z(Ze)),it!==e){for(ft=[],Lt=Q();Lt!==e;)ft.push(Lt),Lt=Q();ft!==e&&(Lt=Ea())!==e?(B=function(s,x,C){for(var _={named:[],implicit:[]},N=0;N<s.length;N++){var R=s[N];"default"===R.kind?_.implicit.push(R.graph):_.named.push(R.graph)}0===_.named.length&&0===_.implicit.length&&_.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var I={kind:"construct",token:"executableunit"};return I.dataset=_,I.template=x,I.pattern={token:"basicgraphpattern",triplesContext:x.triplesContext},null!=C&&null!=C.limit&&(I.limit=C.limit),null!=C&&null!=C.offset&&(I.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(I.order=C.order),I}(ge,Me,Lt),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e}else r=I,I=e}else r=I,I=e;else r=I,I=e}return A--,I===e&&(B=e,0===A&&z(zt)),I}())===e&&(N=function(){var I,B,Y,le,ge,Oe;if(A++,I=r,l.substr(r,8)===et?(B=et,r+=8):(B=e,0===A&&z(kt)),B!==e){if(Y=[],(le=ds())!==e)for(;le!==e;)Y.push(le),le=ds();else Y=e;if(Y===e&&(42===l.charCodeAt(r)?(Y=at,r++):(Y=e,0===A&&z(pt))),Y!==e){for(le=[],ge=Rn();ge!==e;)le.push(ge),ge=Rn();le!==e?((ge=Fa())===e&&(ge=null),ge!==e&&(Oe=Ea())!==e?I=B=[B,Y,le,ge,Oe]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(Ve)),I}())===e&&(N=function(){var I,B,Y,le,ge,Oe,We;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if("ASK"===l.substr(r,3)?(Y="ASK",r+=3):(Y=e,0===A&&z(bt)),Y===e&&("ask"===l.substr(r,3)?(Y="ask",r+=3):(Y=e,0===A&&z(st))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){for(ge=[],Oe=Rn();Oe!==e;)ge.push(Oe),Oe=Rn();if(ge!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();Oe!==e&&(We=Fa())!==e?(B=function(s,x){for(var C={named:[],implicit:[]},_=0;_<s.length;_++){var N=s[_];"implicit"===N.kind?C.implicit.push(N.graph):C.named.push(N.graph)}0===C.named.length&&0===C.implicit.length&&C.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var R={kind:"ask",token:"executableunit"};return R.dataset=C,R.pattern=x,R}(ge,We),I=B):(r=I,I=e)}else r=I,I=e}else r=I,I=e}else r=I,I=e;else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(vt)),I}()),N!==e&&(A++,B=r,l.substr(r,6)===Pn?(Y=Pn,r+=6):(Y=e,0===A&&z(Co)),Y===e&&(l.substr(r,6)===Mi?(Y=Mi,r+=6):(Y=e,0===A&&z(Es))),Y!==e&&(le=$h())!==e?B=Y=[Y,le]:(r=B,B=e),B===e&&(B=null),B!==e&&(B=function(s){return null!=s?s[1]:null}(B)),A--,(I=B)===e&&(B=e,0===A&&z(_o)),(R=I)!==e)?(_=function(s,x,C){return{token:"query",kind:"query",prologue:s,units:[x],inlineData:C}}(_,N,R),C=_):(r=C,C=e)):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(b)),A--,(x=C)===e&&0===A&&z(d),(s=x)===e&&(s=function(){var x;return A++,x=function C(){var _,N,R,I,B,Y,le,ge,Oe,We;if(A++,_=r,(N=Dh())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(A++,(We=function(){var Ae,Xe,nt,Me,$e,it,ft,Lt,ut;if(A++,Ae=r,"LOAD"===l.substr(r,4)?(Xe="LOAD",r+=4):(Xe=e,0===A&&z(Ns)),Xe===e&&("load"===l.substr(r,4)?(Xe="load",r+=4):(Xe=e,0===A&&z(Ao))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if((Me=yr())!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();if($e!==e){if(it=r,"INTO"===l.substr(r,4)?(ft="INTO",r+=4):(ft=e,0===A&&z(oi)),ft===e&&("into"===l.substr(r,4)?(ft="into",r+=4):(ft=e,0===A&&z(Uu))),ft!==e){for(Lt=[],ut=Q();ut!==e;)Lt.push(ut),ut=Q();Lt!==e&&(ut=sc())!==e?it=ft=[ft,Lt,ut]:(r=it,it=e)}else r=it,it=e;it===e&&(it=null),it!==e?(Xe=function(s,x){var C={kind:"load",token:"executableunit"};return C.sourceGraph=s,null!=x&&(C.destinyGraph=x[2]),C}(Me,it),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(za)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e,it;if(A++,Ae=r,"CLEAR"===l.substr(r,5)?(Xe="CLEAR",r+=5):(Xe=e,0===A&&z(Xa)),Xe===e&&("clear"===l.substr(r,5)?(Xe="clear",r+=5):(Xe=e,0===A&&z(Wu))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if(l.substr(r,6)===si?(Me=si,r+=6):(Me=e,0===A&&z(Is)),Me===e&&(l.substr(r,6)===Bn?(Me=Bn,r+=6):(Me=e,0===A&&z(Os))),Me===e&&(Me=null),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();$e!==e&&(it=Xh())!==e?(Xe=function(s){var x={kind:"clear",token:"executableunit"};return x.destinyGraph=s,x}(it),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(Hu)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e,it;if(A++,Ae=r,"DROP"===l.substr(r,4)?(Xe="DROP",r+=4):(Xe=e,0===A&&z(zu)),Xe===e&&("drop"===l.substr(r,4)?(Xe="drop",r+=4):(Xe=e,0===A&&z(qu))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if(l.substr(r,6)===si?(Me=si,r+=6):(Me=e,0===A&&z(Is)),Me===e&&(l.substr(r,6)===Bn?(Me=Bn,r+=6):(Me=e,0===A&&z(Os))),Me===e&&(Me=null),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();$e!==e&&(it=Xh())!==e?(Xe=function(s){var x={kind:"drop",token:"executableunit"};return x.destinyGraph=s,x}(it),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(Eo)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e,it;if(A++,Ae=r,"CREATE"===l.substr(r,6)?(Xe="CREATE",r+=6):(Xe=e,0===A&&z(Za)),Xe===e&&("create"===l.substr(r,6)?(Xe="create",r+=6):(Xe=e,0===A&&z(Xu))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if(l.substr(r,6)===si?(Me=si,r+=6):(Me=e,0===A&&z(Is)),Me===e&&(l.substr(r,6)===Bn?(Me=Bn,r+=6):(Me=e,0===A&&z(Os))),Me===e&&(Me=null),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();$e!==e&&(it=sc())!==e?(Xe=function(s){var x={kind:"create",token:"executableunit"};return x.destinyGraph=s,x}(it),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(ir)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e,it;if(A++,Ae=r,l.substr(r,6)===li?(Xe=li,r+=6):(Xe=e,0===A&&z(Rs)),Xe===e&&(l.substr(r,6)===To?(Xe=To,r+=6):(Xe=e,0===A&&z(el))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if(l.substr(r,4)===Bi?(Me=Bi,r+=4):(Me=e,0===A&&z(js)),Me===e&&(l.substr(r,4)===No?(Me=No,r+=4):(Me=e,0===A&&z(ui))),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();$e!==e&&(it=Vh())!==e?(Xe=function(s){var x={kind:"insertdata",token:"executableunit"};return x.quads=s,x}(it),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(Ju)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e;if(A++,Ae=r,l.substr(r,6)===xn?(Xe=xn,r+=6):(Xe=e,0===A&&z(Io)),Xe===e&&(l.substr(r,6)===mr?(Xe=mr,r+=6):(Xe=e,0===A&&z(sn))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();nt!==e?(l.substr(r,4)===Bi?(Me=Bi,r+=4):(Me=e,0===A&&z(js)),Me===e&&(l.substr(r,4)===No?(Me=No,r+=4):(Me=e,0===A&&z(ui))),Me!==e&&($e=Vh())!==e?(Xe=function(s){var x={kind:"deletedata",token:"executableunit"};return x.quads=s,x}($e),Ae=Xe):(r=Ae,Ae=e)):(r=Ae,Ae=e)}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(Lo)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e,it;if(A++,Ae=r,l.substr(r,6)===xn?(Xe=xn,r+=6):(Xe=e,0===A&&z(Io)),Xe===e&&(l.substr(r,6)===mr?(Xe=mr,r+=6):(Xe=e,0===A&&z(sn))),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e)if(l.substr(r,5)===he?(Me=he,r+=5):(Me=e,0===A&&z(be)),Me===e&&(l.substr(r,5)===Le?(Me=Le,r+=5):(Me=e,0===A&&z(Se))),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();$e!==e&&(it=$r())!==e?(Xe=function(s){var x={kind:"modify"};x.pattern=s,x.with=null,x.using=null;var C=[],_=s.patterns[0];_=null==_.triplesContext&&null!=_.patterns?_.patterns[0].triplesContext:_.triplesContext;for(var N=0;N<_.length;N++){var R={},I=_[N];R.subject=I.subject,R.predicate=I.predicate,R.object=I.object,R.graph=I.graph,C.push(R)}return x.delete=C,x}(it),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(Vu)),Ae}())===e&&(We=function(){var Ae,Xe,nt,Me,$e,it,ft,Lt,ut,Ot,jt,Ft,Cr,lr,dr;if(A++,Ae=r,Xe=r,"WITH"===l.substr(r,4)?(nt="WITH",r+=4):(nt=e,0===A&&z(Ps)),nt===e&&("with"===l.substr(r,4)?(nt="with",r+=4):(nt=e,0===A&&z(Jr))),nt!==e){for(Me=[],$e=Q();$e!==e;)Me.push($e),$e=Q();Me!==e&&($e=yr())!==e?Xe=nt=[nt,Me,$e]:(r=Xe,Xe=e)}else r=Xe,Xe=e;if(Xe===e&&(Xe=null),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();if(nt!==e){if(Me=r,A++,Cr=r,l.substr(r,6)===xn?(lr=xn,r+=6):(lr=e,0===A&&z(Io)),lr===e&&(l.substr(r,6)===mr?(lr=mr,r+=6):(lr=e,0===A&&z(sn))),lr!==e&&(dr=Jh())!==e?Cr=lr=dr:(r=Cr,Cr=e),A--,Cr===e&&(lr=e,0===A&&z(nl)),($e=Cr)!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();it!==e?((ft=zh())===e&&(ft=null),ft!==e?Me=$e=[$e,it,ft]:(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e;if(Me===e&&(Me=zh()),Me!==e){for($e=[],it=Q();it!==e;)$e.push(it),it=Q();if($e!==e){for(it=[],ft=qh();ft!==e;)it.push(ft),ft=qh();if(it!==e){for(ft=[],Lt=Q();Lt!==e;)ft.push(Lt),Lt=Q();if(ft!==e)if(l.substr(r,5)===he?(Lt=he,r+=5):(Lt=e,0===A&&z(be)),Lt===e&&(l.substr(r,5)===Le?(Lt=Le,r+=5):(Lt=e,0===A&&z(Se))),Lt!==e){for(ut=[],Ot=Q();Ot!==e;)ut.push(Ot),Ot=Q();if(ut!==e)if((Ot=$r())!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();jt!==e?(Xe=function(s,x,C,_){var N={kind:"modify"};return N.with=""!=s&&null!=s?s[2]:null,3!==x.length||""!==x[2]&&null!=x[2]?3===x.length&&null!=x[0].length&&null!=x[1].length&&null!=x[2].length?(N.delete=x[0],N.insert=x[2]):(N.insert=x,N.delete=null):(N.delete=x[0],N.insert=null),""!=C&&(N.using=C),N.pattern=_,N}(Xe,Me,it,Ot),Ae=Xe):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Xe=e,0===A&&z(Ku)),Ae}()),A--,We===e&&0===A&&z(Ts),(I=We)!==e){for(B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(59===l.charCodeAt(r)?(le=nr,r++):(le=e,0===A&&z(rn)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?((Oe=C())===e&&(Oe=null),Oe!==e?B=Y=[Y,le,ge,Oe]:(r=B,B=e)):(r=B,B=e)}else r=B,B=e;else r=B,B=e;B===e&&(B=null),B!==e?(N=function(s,x,C){var _={token:"query",kind:"update"};_.prologue=s;var N=[x];return null!=C&&null!=C.length&&null!=C[3]&&null!=C[3].units&&(N=N.concat(C[3].units)),_.units=N,_}(N,I,B),_=N):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;return A--,_===e&&(N=e,0===A&&z(Wa)),_}(),A--,x===e&&0===A&&z(Bu),x}()),s;var s,x,C,_,N,R,I,B,Y,le}function Dh(){var s,x,C,_,N;if(A++,s=r,(x=function(){var R,I,B,Y,le;for(A++,R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,4)===w?(B=w,r+=4):(B=e,0===A&&z(T)),B===e&&(l.substr(r,4)===E?(B=E,r+=4):(B=e,0===A&&z(P))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=Fu())!==e?(I=function(s){_g(s);var x={token:"base"};return x.value=s,x}(le),R=I):(r=R,R=e)}else r=R,R=e;else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(f)),R}())===e&&(x=null),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){for(_=[],N=Mh();N!==e;)_.push(N),N=Mh();_!==e?s=x=function(s,x){return{token:"prologue",base:s,prefixes:x}}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(k)),s}function Mh(){var s,x,C,_,N,R,I;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(l.substr(r,6)===O?(C=O,r+=6):(C=e,0===A&&z(L)),C===e&&(l.substr(r,6)===G?(C=G,r+=6):(C=e,0===A&&z(W))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=wc())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();R!==e&&(I=Fu())!==e?s=x=function(s,x){kg(s,x);var C={token:"prefix"};return C.prefix=s,C.local=x,C}(N,I):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(j)),s}function Ph(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,We,Ae,Xe,nt,Me,$e,it,ft;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if("SELECT"===l.substr(r,6)?(C="SELECT",r+=6):(C=e,0===A&&z(ne)),C===e&&("select"===l.substr(r,6)?(C="select",r+=6):(C=e,0===A&&z(Ce))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(l.substr(r,8)===me?(N=me,r+=8):(N=e,0===A&&z(de)),N===e&&(l.substr(r,8)===ye?(N=ye,r+=8):(N=e,0===A&&z(Ee))),N===e&&(l.substr(r,7)===Be?(N=Be,r+=7):(N=e,0===A&&z(Ie)),N===e&&(l.substr(r,7)===qe?(N=qe,r+=7):(N=e,0===A&&z(U)))),N===e&&(N=null),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){for(I=[],B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=gr())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?B=Y=[Y,le,ge]:(r=B,B=e)}else r=B,B=e;else r=B,B=e;if(B===e){for(B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(40===l.charCodeAt(r)?(le=H,r++):(le=e,0===A&&z(ee)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=It())!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if(l.substr(r,2)===pe?(Ae=pe,r+=2):(Ae=e,0===A&&z(Ne)),Ae===e&&(l.substr(r,2)===ke?(Ae=ke,r+=2):(Ae=e,0===A&&z(Pe))),Ae!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();if(Xe!==e)if((nt=gr())!==e){for(Me=[],$e=Q();$e!==e;)Me.push($e),$e=Q();if(Me!==e)if(41===l.charCodeAt(r)?($e=Je,r++):($e=e,0===A&&z(Ke)),$e!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();it!==e?B=Y=[Y,le,ge,Oe,We,Ae,Xe,nt,Me,$e,it]:(r=B,B=e)}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}if(B!==e)for(;B!==e;){for(I.push(B),B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=gr())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?B=Y=[Y,le,ge]:(r=B,B=e)}else r=B,B=e;else r=B,B=e;if(B===e){for(B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(40===l.charCodeAt(r)?(le=H,r++):(le=e,0===A&&z(ee)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=It())!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if(l.substr(r,2)===pe?(Ae=pe,r+=2):(Ae=e,0===A&&z(Ne)),Ae===e&&(l.substr(r,2)===ke?(Ae=ke,r+=2):(Ae=e,0===A&&z(Pe))),Ae!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();if(Xe!==e)if((nt=gr())!==e){for(Me=[],$e=Q();$e!==e;)Me.push($e),$e=Q();if(Me!==e)if(41===l.charCodeAt(r)?($e=Je,r++):($e=e,0===A&&z(Ke)),$e!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();it!==e?B=Y=[Y,le,ge,Oe,We,Ae,Xe,nt,Me,$e,it]:(r=B,B=e)}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}}else I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(42===l.charCodeAt(r)?(Y=at,r++):(Y=e,0===A&&z(pt)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?I=B=[B,Y,le]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}I!==e?s=x=function(s,x){var C=[];if(3===x.length&&"*"===x[1])return{vars:[{token:"variable",kind:"*"}],modifier:vp(s)};for(var _=0;_<x.length;_++){var N=x[_];3===N.length?C.push({token:"variable",kind:"var",value:N[1]}):C.push({token:"variable",kind:"aliased",expression:N[3],alias:N[7]})}return{vars:C,modifier:vp(s)}}(N,I):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(te)),s}function Rn(){var s,x,C,_,N,R;if(A++,s=r,"FROM"===l.substr(r,4)?(x="FROM",r+=4):(x=e,0===A&&z(jn)),x===e&&("from"===l.substr(r,4)?(x="from",r+=4):(x=e,0===A&&z(Ei))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=function(){var I,B,Y;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();return B!==e&&(Y=Bh())!==e?(B=function(s){return{graph:s,kind:"default",token:"graphClause"}}(Y),I=B):(r=I,I=e),A--,I===e&&(B=e,0===A&&z(ys)),I}())===e&&(_=function(){var I,B,Y,le;if(A++,I=r,l.substr(r,5)===Hr?(B=Hr,r+=5):(B=e,0===A&&z(ri)),B===e&&(l.substr(r,5)===Rr?(B=Rr,r+=5):(B=e,0===A&&z(ni))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=Bh())!==e?(B=function(s){return{graph:s,kind:"named",token:"graphCluase"}}(le),I=B):(r=I,I=e)}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(ms)),I}()),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=_:(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ct)),s}function Bh(){var s;return A++,s=yr(),A--,s===e&&0===A&&z(Wr),s}function Fa(){var s,x,C,_,N,R;if(A++,s=r,l.substr(r,5)===he?(x=he,r+=5):(x=e,0===A&&z(be)),x===e&&(l.substr(r,5)===Le?(x=Le,r+=5):(x=e,0===A&&z(Se))),x===e&&(x=null),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=$r())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=_:(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(vo)),s}function Ea(){var s,x,C,_,N,R,I,B,Y;return A++,s=r,(x=function(){var R,I,B,Y,le,ge,Oe;if(A++,R=r,"GROUP"===l.substr(r,5)?(I="GROUP",r+=5):(I=e,0===A&&z(ii)),I===e&&("group"===l.substr(r,5)?(I="group",r+=5):(I=e,0===A&&z(xs))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if("BY"===l.substr(r,2)?(Y="BY",r+=2):(Y=e,0===A&&z(go)),Y===e&&("by"===l.substr(r,2)?(Y="by",r+=2):(Y=e,0===A&&z(Xt))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){if(ge=[],(Oe=Qh())!==e)for(;Oe!==e;)ge.push(Oe),Oe=Qh();else ge=e;ge!==e?R=I=ge:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(bs)),R}())===e&&(x=null),x!==e?((C=function(){var R,I,B,Y;if(A++,R=r,"HAVING"===l.substr(r,6)?(I="HAVING",r+=6):(I=e,0===A&&z(ot)),I!==e){if(B=[],(Y=Uh())!==e)for(;Y!==e;)B.push(Y),Y=Uh();else B=e;B!==e?R=I=[I,B]:(r=R,R=e)}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(Li)),R}())===e&&(C=null),C!==e?((_=function(){var R,I,B,Y,le,ge,Oe,We;if(A++,R=r,"ORDER"===l.substr(r,5)?(I="ORDER",r+=5):(I=e,0===A&&z(bo)),I===e&&("order"===l.substr(r,5)?(I="order",r+=5):(I=e,0===A&&z(Ra))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if("BY"===l.substr(r,2)?(Y="BY",r+=2):(Y=e,0===A&&z(go)),Y===e&&("by"===l.substr(r,2)?(Y="by",r+=2):(Y=e,0===A&&z(Xt))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){if(ge=[],(Oe=Gh())!==e)for(;Oe!==e;)ge.push(Oe),Oe=Gh();else ge=e;if(ge!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();Oe!==e?R=I=ge:(r=R,R=e)}else r=R,R=e}else r=R,R=e}else r=R,R=e;else r=R,R=e}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(ks)),R}())===e&&(_=null),_!==e?(A++,I=r,(B=Hh())!==e?((Y=Wh())===e&&(Y=null),Y!==e?I=B=[B,Y]:(r=I,I=e)):(r=I,I=e),I===e&&(I=r,(B=Wh())!==e?((Y=Hh())===e&&(Y=null),Y!==e?I=B=[B,Y]:(r=I,I=e)):(r=I,I=e)),I!==e&&(I=function(s){for(var x={},C=0;C<s.length;C++){var _=s[C];null!=_&&null!=_.limit?x.limit=_.limit:null!=_&&null!=_.offset&&(x.offset=_.offset)}return x}(I)),A--,(R=I)===e&&(I=e,0===A&&z(Pa)),(N=R)===e&&(N=null),N!==e?s=x=function(s,x,C){var _={};return null!=C&&(null!=C.limit&&(_.limit=C.limit),null!=C.offset&&(_.offset=C.offset)),null!=s&&(_.group=s),_.order=x,_}(x,_,N):(r=s,s=e)):(r=s,s=e)):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(en)),s}function Qh(){var s,x,C,_,N,R,I,B,Y,le,ge;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=xc())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=ep())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(40===l.charCodeAt(r)?(C=H,r++):(C=e,0===A&&z(ee)),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=It())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){if(I=r,l.substr(r,2)===pe?(B=pe,r+=2):(B=e,0===A&&z(Ne)),B===e&&(l.substr(r,2)===ke?(B=ke,r+=2):(B=e,0===A&&z(Pe))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=gr())!==e?I=B=[B,Y,le]:(r=I,I=e)}else r=I,I=e;if(I===e&&(I=null),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(41===l.charCodeAt(r)?(Y=Je,r++):(Y=e,0===A&&z(Ke)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?s=x=function(s,x){return 0!=x.length?{token:"aliased_expression",expression:s,alias:x[2]}:s}(N,I):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=gr())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e}}}return A--,s===e&&(x=e,0===A&&z(Mn)),s}function Uh(){var s;return A++,s=ac(),A--,s===e&&0===A&&z(St),s}function Gh(){var s,x,C,_,N,R;if(A++,s=r,"ASC"===l.substr(r,3)?(x="ASC",r+=3):(x=e,0===A&&z(xo)),x===e&&("asc"===l.substr(r,3)?(x="asc",r+=3):(x=e,0===A&&z(ja)),x===e&&("DESC"===l.substr(r,4)?(x="DESC",r+=4):(x=e,0===A&&z(Oi)),x===e&&("desc"===l.substr(r,4)?(x="desc",r+=4):(x=e,0===A&&z(Da))))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=bc())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=function(s,x){return{direction:s.toUpperCase(),expression:x}}(x,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e)if(s=r,(x=ac())===e&&(x=gr()),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e?s=x=function(s){return"var"===s.token&&(s={token:"expression",expressionType:"atomic",primaryexpression:"var",value:s}),{direction:"ASC",expression:s}}(x):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Lu)),s}function Hh(){var s,x,C,_,N,R;if(A++,s=r,"LIMIT"===l.substr(r,5)?(x="LIMIT",r+=5):(x=e,0===A&&z(Iu)),x===e&&("limit"===l.substr(r,5)?(x="limit",r+=5):(x=e,0===A&&z(tn))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=vs())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=function(s){return{limit:parseInt(s.value)}}(_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Qa)),s}function Wh(){var s,x,C,_,N,R;if(A++,s=r,"OFFSET"===l.substr(r,6)?(x="OFFSET",r+=6):(x=e,0===A&&z(ji)),x===e&&("offset"===l.substr(r,6)?(x="offset",r+=6):(x=e,0===A&&z(ju))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=vs())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=function(s){return{offset:parseInt(s.value)}}(_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ru)),s}function bu(){var s;return A++,(s=yr())===e&&(s=Cu())===e&&(s=Su())===e&&(s=Au())===e&&(l.substr(r,5)===Di?(s=Di,r+=5):(s=e,0===A&&z(Fs))),A--,s===e&&0===A&&z(Pu),s}function zh(){var s,x,C;return A++,s=r,l.substr(r,6)===li?(x=li,r+=6):(x=e,0===A&&z(Rs)),x===e&&(l.substr(r,6)===To?(x=To,r+=6):(x=e,0===A&&z(el))),x!==e&&(C=Jh())!==e?s=x=C:(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Yu)),s}function qh(){var s,x,C,_,N,R,I,B;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if("USING"===l.substr(r,5)?(C="USING",r+=5):(C=e,0===A&&z(ol)),C===e&&("using"===l.substr(r,5)?(C="using",r+=5):(C=e,0===A&&z(sl))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e){if((N=yr())===e)if(N=r,l.substr(r,5)===Hr?(R=Hr,r+=5):(R=e,0===A&&z(ri)),R===e&&(l.substr(r,5)===Rr?(R=Rr,r+=5):(R=e,0===A&&z(ni))),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=yr())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;N!==e?s=x=function(s){return null!=s.length?{kind:"named",uri:s[2]}:{kind:"default",uri:s}}(N):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Zu)),s}function sc(){var s,x,C,_;if(A++,s=r,l.substr(r,5)===an?(x=an,r+=5):(x=e,0===A&&z(Oo)),x===e&&(l.substr(r,5)===ln?(x=ln,r+=5):(x=e,0===A&&z(Er))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=yr())!==e?s=x=_:(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Qs)),s}function Xh(){var s,x;return A++,s=r,(s=x=sc())===e&&(s=r,l.substr(r,7)===Ro?(x=Ro,r+=7):(x=e,0===A&&z(ul)),x===e&&(l.substr(r,7)===Gs?(x=Gs,r+=7):(x=e,0===A&&z(Hs))),x!==e&&(x="default"),(s=x)===e&&(s=r,l.substr(r,5)===Hr?(x=Hr,r+=5):(x=e,0===A&&z(ri)),x===e&&(l.substr(r,5)===Rr?(x=Rr,r+=5):(x=e,0===A&&z(ni))),x!==e&&(x="named"),(s=x)===e&&(s=r,"ALL"===l.substr(r,3)?(x="ALL",r+=3):(x=e,0===A&&z(Gn)),x===e&&("all"===l.substr(r,3)?(x="all",r+=3):(x=e,0===A&&z(ci))),x!==e&&(x="all"),s=x))),A--,s===e&&(x=e,0===A&&z(Us)),s}function Jh(){var s,x,C,_,N,R,I,B,Y;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(123===l.charCodeAt(r)?(C=_e,r++):(C=e,0===A&&z(je)),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=Kh())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(125===l.charCodeAt(r)?(I=He,r++):(I=e,0===A&&z(Ze)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?s=x=qs(N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(zs)),s}function Vh(){var s,x,C,_,N,R,I,B,Y;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(123===l.charCodeAt(r)?(C=_e,r++):(C=e,0===A&&z(je)),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=Kh())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(125===l.charCodeAt(r)?(I=He,r++):(I=e,0===A&&z(Ze)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?s=x=qs(N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Xs)),s}function Kh(){var s,x,C,_,N,R,I;if(A++,s=r,(x=fs())===e&&(x=null),x!==e){for(C=[],_=r,(N=Yh())!==e?(46===l.charCodeAt(r)?(R=Jt,r++):(R=e,0===A&&z(Bt)),R===e&&(R=null),R!==e?((I=fs())===e&&(I=null),I!==e?_=N=[N,R,I]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e);_!==e;)C.push(_),_=r,(N=Yh())!==e?(46===l.charCodeAt(r)?(R=Jt,r++):(R=e,0===A&&z(Bt)),R===e&&(R=null),R!==e?((I=fs())===e&&(I=null),I!==e?_=N=[N,R,I]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e);C!==e?s=x=function(s,x){var C=[];if(null!=s&&null!=s.triplesContext)for(var _=0;_<s.triplesContext.length;_++)(N=s.triplesContext[_]).graph=null,C.push(N);if(x&&x.length>0&&x[0].length>0&&(C=C.concat(x[0][0].quadsContext),null!=x[0][2]&&null!=x[0][2].triplesContext))for(_=0;_<x[0][2].triplesContext.length;_++){var N;(N=x[0][2].triplesContext[_]).graph=null,C.push(N)}return{token:"quads",quadsContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Wn)),s}function Yh(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,We;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(l.substr(r,5)===an?(C=an,r+=5):(C=e,0===A&&z(Oo)),C===e&&(l.substr(r,5)===ln?(C=ln,r+=5):(C=e,0===A&&z(Er))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=ds())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(123===l.charCodeAt(r)?(I=_e,r++):(I=e,0===A&&z(je)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if((Y=fs())===e&&(Y=null),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(125===l.charCodeAt(r)?(ge=He,r++):(ge=e,0===A&&z(Ze)),ge!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();Oe!==e?s=x=function(s,x){var C=[];if(null!=x)for(var _=0;_<x.triplesContext.length;_++){var N=x.triplesContext[_];N.graph=s,C.push(N)}return{token:"quadsnottriples",quadsContext:C}}(N,Y):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(kn)),s}function fs(){var s,x,C,_,N,R,I;if(A++,s=r,(x=rp())!==e){for(C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(46===l.charCodeAt(r)?(N=Jt,r++):(N=e,0===A&&z(Bt)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();R!==e?((I=fs())===e&&(I=null),I!==e?C=_=[_,N,R,I]:(r=C,C=e)):(r=C,C=e)}else r=C,C=e;else r=C,C=e;C===e&&(C=null),C!==e?s=x=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x.length&&null!=x[3]&&null!=x[3].triplesContext&&(C=C.concat(x[3].triplesContext)),{token:"triplestemplate",triplesContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(tf)),s}function $r(){var s,x,C,_,N,R,I,B,Y,le;if(A++,s=r,123===l.charCodeAt(r)?(x=_e,r++):(x=e,0===A&&z(je)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(A++,I=r,(B=Ph())!==e&&(Y=Fa())!==e&&(le=Ea())!==e?I=B=function(s,x,C){var _={kind:"select",token:"subselect"};return _.projection=s.vars,_.modifier=s.modifier,_.pattern=x,null!=C&&null!=C.limit&&(_.limit=C.limit),null!=C&&null!=C.offset&&(_.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(_.order=C.order),null!=C&&null!=C.group&&(_.group=C.group),_}(B,Y,le):(r=I,I=e),A--,I===e&&(B=e,0===A&&z(ce)),(_=I)!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?(125===l.charCodeAt(r)?(R=He,r++):(R=e,0===A&&z(Ze)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e)if(s=r,123===l.charCodeAt(r)?(x=_e,r++):(x=e,0===A&&z(je)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=function(){var I,B,Y,le,ge,Oe,We,Ae,Xe,nt;if(A++,I=r,(B=xu())===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){if(le=[],ge=r,(Oe=Zh())!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if(46===l.charCodeAt(r)?(Ae=Jt,r++):(Ae=e,0===A&&z(Bt)),Ae===e&&(Ae=null),Ae!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();Xe!==e?((nt=xu())===e&&(nt=null),nt!==e?ge=Oe=[Oe,We,Ae,Xe,nt]:(r=ge,ge=e)):(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;for(;ge!==e;)if(le.push(ge),ge=r,(Oe=Zh())!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if(46===l.charCodeAt(r)?(Ae=Jt,r++):(Ae=e,0===A&&z(Bt)),Ae===e&&(Ae=null),Ae!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();Xe!==e?((nt=xu())===e&&(nt=null),nt!==e?ge=Oe=[Oe,We,Ae,Xe,nt]:(r=ge,ge=e)):(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;le!==e?(B=function(s,x){var C=[];null!=s&&s!=[]&&C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)null!=x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);var R=[],I=[],B=[],Y=[];for(_=0;_<C.length;_++)if("triplespattern"!==C[_].token&&"filter"!==C[_].token&&"bind"!==C[_].token){if(0!=I.length||0!=B.length){var le=[];for(N=0;N<I.length;N++)le=le.concat(I[N].triplesContext);le.length>0&&R.push({token:"basicgraphpattern",triplesContext:le}),I=[]}R.push(C[_])}else"triplespattern"===C[_].token?I.push(C[_]):"bind"===C[_].token?Y.push(C[_]):B.push(C[_]);if(0!=I.length||0!=B.length){for(le=[],N=0;N<I.length;N++)le=le.concat(I[N].triplesContext);le.length>0&&R.push({token:"basicgraphpattern",triplesContext:le})}return{token:"groupgraphpattern",patterns:R,filters:B,binds:Y}}(B,le),I=B):(r=I,I=e)}else r=I,I=e}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(Js)),I}())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?(125===l.charCodeAt(r)?(R=He,r++):(R=e,0===A&&z(Ze)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Qi)),s}function xu(){var s,x,C,_,N,R;if(A++,s=r,(x=function(){var I,B,Y,le,ge,Oe;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if((Y=ku())!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=ip())!==e?(B=function(s,x){var C=x.triplesContext,_=s;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N],I=null;null!=R[1].length&&(R[1]=R[1][0]),_.token&&"triplesnodecollection"===_.token?("path"===(I={subject:_.chainSubject[0],predicate:R[0],object:R[1]}).predicate.token&&"element"===I.predicate.kind&&(I.predicate=I.predicate.value),C.push(I),C=C.concat(_.triplesContext)):("path"===(I={subject:_,predicate:R[0],object:R[1]}).predicate.token&&"element"===I.predicate.kind&&(I.predicate=I.predicate.value),C.push(I))}var B={token:"triplessamesubject"};return B.triplesContext=C,B.chainSubject=_,B}(Y,ge),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if((Y=ap())!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(A++,(Oe=function(){var We,Ae,Xe,nt,Me,$e,it,ft,Lt,ut,Ot,jt,Ft;if(A++,We=r,(Ae=hs())===e&&(Ae=ps()),Ae!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();if(Xe!==e)if((nt=np())!==e){for(Me=[],$e=r,it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();if(it!==e)if(59===l.charCodeAt(r)?(ft=nr,r++):(ft=e,0===A&&z(rn)),ft!==e){for(Lt=[],ut=Q();ut!==e;)Lt.push(ut),ut=Q();if(Lt!==e){if(ut=r,(Ot=hs())===e&&(Ot=ps()),Ot!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();jt!==e&&(Ft=co())!==e?ut=Ot=[Ot,jt,Ft]:(r=ut,ut=e)}else r=ut,ut=e;ut===e&&(ut=null),ut!==e?$e=it=[it,ft,Lt,ut]:(r=$e,$e=e)}else r=$e,$e=e}else r=$e,$e=e;else r=$e,$e=e;for(;$e!==e;){for(Me.push($e),$e=r,it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();if(it!==e)if(59===l.charCodeAt(r)?(ft=nr,r++):(ft=e,0===A&&z(rn)),ft!==e){for(Lt=[],ut=Q();ut!==e;)Lt.push(ut),ut=Q();if(Lt!==e){if(ut=r,(Ot=hs())===e&&(Ot=ps()),Ot!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();jt!==e&&(Ft=co())!==e?ut=Ot=[Ot,jt,Ft]:(r=ut,ut=e)}else r=ut,ut=e;ut===e&&(ut=null),ut!==e?$e=it=[it,ft,Lt,ut]:(r=$e,$e=e)}else r=$e,$e=e}else r=$e,$e=e;else r=$e,$e=e}Me!==e?(Ae=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],I=0;I<x.length;I++)null!=x[I].triplesContext?(N=N.concat(x[I].triplesContext),"triplesnodecollection"===x[I].token&&null!=x[I].chainSubject.length?R.push([s,x[I].chainSubject[0]]):R.push([s,x[I].chainSubject])):R.push([s,x[I]]);for(I=0;I<C.length;I++)for(var B=C[I][3],Y=B[0],le=B[2]||[],ge=0;ge<le.length;ge++)null!=le[ge].triplesContext?(N=N.concat(le[ge].triplesContext),R.push([Y,le[ge].chainSubject])):R.push([Y,le[ge]]);return _.pairs=R,_.triplesContext=N,_}(Ae,nt,Me),We=Ae):(r=We,We=e)}else r=We,We=e;else r=We,We=e}else r=We,We=e;return A--,We===e&&(Ae=e,0===A&&z(Al)),We}())===e&&(Oe=null),A--,Oe===e&&0===A&&z(Ll),(ge=Oe)!==e)?(B=function(s,x){var C=s.triplesContext,_=s.chainSubject;if(null!=x&&null!=x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N];if(null!=R[1].length&&(R[1]=R[1][0]),"triplesnodecollection"===s.token)for(var I=0;I<_.length;I++){var B=_[I];if(null!=B.triplesContext){var Y={subject:B.chainSubject,predicate:R[0],object:R[1]};C.concat(B.triplesContext)}else Y={subject:_[I],predicate:R[0],object:R[1]},C.push(Y)}else Y={subject:_,predicate:R[0],object:R[1]},C.push(Y)}var le={token:"triplessamesubject"};return le.triplesContext=C,le.chainSubject=_,le}(Y,ge),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}return A--,I===e&&(B=e,0===A&&z(Tl)),I}())!==e){for(C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?(46===l.charCodeAt(r)?(N=Jt,r++):(N=e,0===A&&z(Bt)),N!==e?((R=xu())===e&&(R=null),R!==e?C=_=[_,N,R]:(r=C,C=e)):(r=C,C=e)):(r=C,C=e),C===e&&(C=null),C!==e?s=x=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x&&null!=x.length&&null!=x[2]&&null!=x[2].triplesContext&&(C=C.concat(x[2].triplesContext)),{token:"triplespattern",triplesContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(rf)),s}function Zh(){var s,x,C,_,N;return A++,(s=function(){var x,C,_,N,R,I,B,Y;if(A++,x=r,(C=$r())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(l.substr(r,5)===_n?(I=_n,r+=5):(I=e,0===A&&z(Cn)),I===e&&(l.substr(r,5)===Sn?(I=Sn,r+=5):(I=e,0===A&&z(qn))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=$r())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(l.substr(r,5)===_n?(I=_n,r+=5):(I=e,0===A&&z(Cn)),I===e&&(l.substr(r,5)===Sn?(I=Sn,r+=5):(I=e,0===A&&z(qn))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=$r())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e}_!==e?(C=function(s,x){if(0===x.length)return s;for(var C={token:"graphunionpattern",value:[s]},_=0;_<x.length;_++)_==x.length-1?C.value.push(x[_][3]):(C.value.push(x[_][3]),C={token:"graphunionpattern",value:[C]});return C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(zn)),x}())===e&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(l.substr(r,8)===Po?(_=Po,r+=8):(_=e,0===A&&z(hi)),_===e&&(l.substr(r,8)===Ui?(_=Ui,r+=8):(_=e,0===A&&z(pl))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e&&(R=$r())!==e?(C=function(s){return{token:"optionalgraphpattern",value:s}}(R),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Ks)),x}())===e&&(s=function(){var x,C,_,N;if(A++,x=r,"MINUS"===l.substr(r,5)?(C="MINUS",r+=5):(C=e,0===A&&z(Uo)),C===e&&("minus"===l.substr(r,5)?(C="minus",r+=5):(C=e,0===A&&z(Hi))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e&&(N=$r())!==e?(C=function(s){return{token:"minusgraphpattern",status:"todo",value:s}}(N),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Gi)),x}())===e&&(s=function(){var x,C,_,N,R,I,B;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(l.substr(r,5)===an?(_=an,r+=5):(_=e,0===A&&z(Oo)),_===e&&(l.substr(r,5)===ln?(_=ln,r+=5):(_=e,0===A&&z(Er))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=ds())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=$r())!==e?(C=function(s,x){for(var C=0;C<x.patterns.length;C++)for(var _=x.patterns[C],N=0;N<_.triplesContext.length;N++)_.triplesContext[N].graph=s;return x.token="groupgraphpattern",x}(R,B),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(nf)),x}())===e&&(A++,x=r,l.substr(r,7)===Qo?(C=Qo,r+=7):(C=e,0===A&&z(Ys)),C!==e&&(_=ds())!==e&&(N=$r())!==e?(C=function(s,x){return{token:"servicegraphpattern",status:"todo",value:[s,x]}}(_,N),x=C):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(sf)),(s=x)===e)&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if("FILTER"===l.substr(r,6)?(_="FILTER",r+=6):(_=e,0===A&&z(af)),_===e&&("filter"===l.substr(r,6)?(_="filter",r+=6):(_=e,0===A&&z(Xn))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e&&(R=ac())!==e?(C=function(s){return{token:"filter",value:s}}(R),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(yl)),x}())===e&&(s=function(){var x,C,_,N,R,I,B,Y,le,ge,Oe,We,Ae;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if("BIND"===l.substr(r,4)?(_="BIND",r+=4):(_=e,0===A&&z(ff)),_===e&&("bind"===l.substr(r,4)?(_="bind",r+=4):(_=e,0===A&&z(cf))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if((B=It())!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(l.substr(r,2)===ke?(le=ke,r+=2):(le=e,0===A&&z(Pe)),le===e&&(l.substr(r,2)===pe?(le=pe,r+=2):(le=e,0===A&&z(Ne))),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=gr())!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(41===l.charCodeAt(r)?(Ae=Je,r++):(Ae=e,0===A&&z(Ke)),Ae!==e?(C=function(s,x){return{token:"bind",expression:s,as:x}}(B,Oe),x=C):(r=x,x=e)):(r=x,x=e)}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(uf)),x}())===e&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(l.substr(r,6)===Pn?(_=Pn,r+=6):(_=e,0===A&&z(Co)),_===e&&(l.substr(r,6)===Mi?(_=Mi,r+=6):(_=e,0===A&&z(Es))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e&&(R=$h())!==e?x=C=R:(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(vr)),x}()),A--,s===e&&0===A&&z(hl),s}function ac(){var s;return A++,(s=bc())===e&&(s=xc())===e&&(s=ep()),A--,s===e&&0===A&&z(or),s}function $h(){var s;return A++,(s=function(){var x,C,_,N,R,I,B,Y;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=gr())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(123===l.charCodeAt(r)?(R=_e,r++):(R=e,0===A&&z(je)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e){for(B=[],Y=cs();Y!==e;)B.push(Y),Y=cs();B!==e?(125===l.charCodeAt(r)?(Y=He,r++):(Y=e,0===A&&z(Ze)),Y!==e?(C=function(s,x){return{token:"inlineData",values:[{var:s,value:x}]}}(_,B),x=C):(r=x,x=e)):(r=x,x=e)}else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(hf)),x}())===e&&(s=function(){var x,C,_,N,R,I,B,Y,le,ge,Oe,We,Ae,Xe,nt,Me;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if((_=ti())===e)if(_=r,40===l.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){for(I=[],B=gr();B!==e;)I.push(B),B=gr();if(I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?(41===l.charCodeAt(r)?(Y=Je,r++):(Y=e,0===A&&z(Ke)),Y!==e?_=N=[N,R,I,B,Y]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e}else r=_,_=e}else r=_,_=e;if(_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(123===l.charCodeAt(r)?(R=_e,r++):(R=e,0===A&&z(je)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e){for(B=[],Y=r,le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(40===l.charCodeAt(r)?(ge=H,r++):(ge=e,0===A&&z(ee)),ge!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();if(Oe!==e){for(We=[],Ae=cs();Ae!==e;)We.push(Ae),Ae=cs();if(We!==e){for(Ae=[],Xe=Q();Xe!==e;)Ae.push(Xe),Xe=Q();if(Ae!==e)if(41===l.charCodeAt(r)?(Xe=Je,r++):(Xe=e,0===A&&z(Ke)),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();nt!==e?Y=le=[le,ge,Oe,We,Ae,Xe,nt]:(r=Y,Y=e)}else r=Y,Y=e;else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e;else r=Y,Y=e;for(Y===e&&(Y=ti());Y!==e;){for(B.push(Y),Y=r,le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(40===l.charCodeAt(r)?(ge=H,r++):(ge=e,0===A&&z(ee)),ge!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();if(Oe!==e){for(We=[],Ae=cs();Ae!==e;)We.push(Ae),Ae=cs();if(We!==e){for(Ae=[],Xe=Q();Xe!==e;)Ae.push(Xe),Xe=Q();if(Ae!==e)if(41===l.charCodeAt(r)?(Xe=Je,r++):(Xe=e,0===A&&z(Ke)),Xe!==e){for(nt=[],Me=Q();Me!==e;)nt.push(Me),Me=Q();nt!==e?Y=le=[le,ge,Oe,We,Ae,Xe,nt]:(r=Y,Y=e)}else r=Y,Y=e;else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e;else r=Y,Y=e;Y===e&&(Y=ti())}if(B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(125===l.charCodeAt(r)?(le=He,r++):(le=e,0===A&&z(Ze)),le!==e?x=C={token:"inlineData",values:[],todo:!0}:(r=x,x=e)):(r=x,x=e)}else r=x,x=e}else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(pf)),x}()),A--,s===e&&0===A&&z(Wi),s}function cs(){var s,x,C,_,N;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=Fu())===e&&(C=Cu())===e&&(C=Su())===e&&(C=Au())===e&&(l.substr(r,5)===Di?(C=Di,r+=5):(C=e,0===A&&z(Fs))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(vf)),s}function ep(){var s,x,C,_;if(A++,s=r,(x=yr())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=tp())!==e?s=x=function(s,x){var C={token:"expression",expressionType:"irireforfunction"};return C.iriref=s,C.args=x.value,C}(x,_):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ea)),s}function tp(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe;if(A++,s=r,(x=ti())!==e&&(x={token:"args",value:[]}),(s=x)===e)if(s=r,40===l.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(l.substr(r,8)===me?(_=me,r+=8):(_=e,0===A&&z(de)),_===e&&(l.substr(r,8)===ye?(_=ye,r+=8):(_=e,0===A&&z(Ee))),_===e&&(_=null),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e){if(B=[],Y=r,44===l.charCodeAt(r)?(le=Zt,r++):(le=e,0===A&&z($t)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e&&(Oe=It())!==e?Y=le=[le,ge,Oe]:(r=Y,Y=e)}else r=Y,Y=e;for(;Y!==e;)if(B.push(Y),Y=r,44===l.charCodeAt(r)?(le=Zt,r++):(le=e,0===A&&z($t)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e&&(Oe=It())!==e?Y=le=[le,ge,Oe]:(r=Y,Y=e)}else r=Y,Y=e;B!==e?(41===l.charCodeAt(r)?(Y=Je,r++):(Y=e,0===A&&z(Ke)),Y!==e?s=x=function(s,x,C){for(var _=[],N=0;N<C.length;N++)_.push(C[N][2]);var R={token:"args"};return R.value=[x].concat(_),null!=s&&"DISTINCT"===s.toUpperCase()?R.distinct=!0:R.distinct=!1,R}(_,R,B):(r=s,s=e)):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ta)),s}function Ta(){var s,x,C,_,N,R,I,B,Y,le;if(A++,s=r,(x=ti())!==e&&(x={token:"args",value:[]}),(s=x)===e)if(s=r,40===l.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=yr())===e&&(_=It()),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e){if(R=[],I=r,44===l.charCodeAt(r)?(B=Zt,r++):(B=e,0===A&&z($t)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?((le=yr())===e&&(le=It()),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e;for(;I!==e;)if(R.push(I),I=r,44===l.charCodeAt(r)?(B=Zt,r++):(B=e,0===A&&z($t)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?((le=yr())===e&&(le=It()),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e;R!==e?(41===l.charCodeAt(r)?(I=Je,r++):(I=e,0===A&&z(Ke)),I!==e?s=x=function(s,x){for(var C=[],_=0;_<x.length;_++)C.push(x[_][2]);var N={token:"args"};return N.value=[s].concat(C),N}(_,R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(_l)),s}function rp(){var s,x,C,_,N,R;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=ku())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e&&(N=lc())!==e?s=x=function(s,x){var C=x.triplesContext,_=s;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N],I=null;null!=R[1].length&&(R[1]=R[1][0]),_.token&&"triplesnodecollection"===_.token?(I={subject:_.chainSubject[0],predicate:R[0],object:R[1]},C.push(I),C=C.concat(_.triplesContext)):(I={subject:_,predicate:R[0],object:R[1]},C.push(I))}var B={token:"triplessamesubject"};return B.triplesContext=C,B.chainSubject=_,B}(C,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=lp())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e&&(A++,(R=lc())===e&&(R=null),A--,R===e&&0===A&&z(Fn),(N=R)!==e)?s=x=function(s,x){var C=s.triplesContext,_=s.chainSubject;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N];if(null!=R[1].length&&(R[1]=R[1][0]),"triplesnodecollection"===s.token)for(var I=0;I<_.length;I++){var B=_[I];if(null!=B.triplesContext){var Y={subject:B.chainSubject,predicate:R[0],object:R[1]};C.concat(B.triplesContext)}else Y={subject:_[I],predicate:R[0],object:R[1]},C.push(Y)}else Y={subject:_,predicate:R[0],object:R[1]},C.push(Y)}var le={token:"triplessamesubject"};return le.triplesContext=C,le.chainSubject=_,le}(C,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}return A--,s===e&&(x=e,0===A&&z(un)),s}function lc(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,We;if(A++,s=r,(x=cc())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=co())!==e){for(N=[],R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===l.charCodeAt(r)?(B=nr,r++):(B=e,0===A&&z(rn)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){if(le=r,(ge=cc())!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();Oe!==e&&(We=co())!==e?le=ge=[ge,Oe,We]:(r=le,le=e)}else r=le,le=e;le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e;for(;R!==e;){for(N.push(R),R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===l.charCodeAt(r)?(B=nr,r++):(B=e,0===A&&z(rn)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){if(le=r,(ge=cc())!==e){for(Oe=[],We=Q();We!==e;)Oe.push(We),We=Q();Oe!==e&&(We=co())!==e?le=ge=[ge,Oe,We]:(r=le,le=e)}else r=le,le=e;le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e}N!==e?s=x=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],I=0;I<x.length;I++)null!=x[I].triplesContext?(N=N.concat(x[I].triplesContext),"triplesnodecollection"===x[I].token&&null!=x[I].chainSubject.length?R.push([s,x[I].chainSubject[0]]):R.push([s,x[I].chainSubject])):R.push([s,x[I]]);for(I=0;I<C.length;I++)for(var B=C[I][3],Y=B[0],le=B[2]||[],ge=0;ge<le.length;ge++)null!=le[ge].triplesContext?(N=N.concat(le[ge].triplesContext),R.push([Y,le[ge].chainSubject])):R.push([Y,le[ge]]);return _.pairs=R,_.triplesContext=N,_}(x,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Dt)),s}function np(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=uc())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if(_=[],N=r,44===l.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=uc())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;for(;N!==e;)if(_.push(N),N=r,44===l.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=uc())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;_!==e?s=x=function(s,x){var C=[];C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)"object"==typeof x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);return C}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(En)),s}function co(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=fc())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if(_=[],N=r,44===l.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=fc())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;for(;N!==e;)if(_.push(N),N=r,44===l.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=fc())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;_!==e?s=x=function(s,x){var C=[];C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)"object"==typeof x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);return C}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(na)),s}function uc(){var s;return A++,s=vc(),A--,s===e&&0===A&&z(mf),s}function fc(){var s;return A++,s=gc(),A--,s===e&&0===A&&z(ia),s}function cc(){var s,x;return A++,(s=ds())===e&&(s=r,97===l.charCodeAt(r)?(x="a",r++):(x=e,0===A&&z(di)),x!==e&&(x={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),s=x),A--,s===e&&(x=e,0===A&&z(qi)),s}function ip(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe;if(A++,s=r,(x=hs())===e&&(x=ps()),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=np())!==e){for(N=[],R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===l.charCodeAt(r)?(B=nr,r++):(B=e,0===A&&z(rn)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(le=r,(ge=hs())===e&&(ge=ps()),ge!==e&&(Oe=co())!==e?le=ge=[ge,Oe]:(r=le,le=e),le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)):(r=R,R=e)}else r=R,R=e;else r=R,R=e;for(;R!==e;){for(N.push(R),R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===l.charCodeAt(r)?(B=nr,r++):(B=e,0===A&&z(rn)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(le=r,(ge=hs())===e&&(ge=ps()),ge!==e&&(Oe=co())!==e?le=ge=[ge,Oe]:(r=le,le=e),le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)):(r=R,R=e)}else r=R,R=e;else r=R,R=e}N!==e?s=x=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],I=0;I<x.length;I++)null!=x[I].triplesContext?(N=N.concat(x[I].triplesContext),"triplesnodecollection"===x[I].token&&null!=x[I].chainSubject.length?R.push([s,x[I].chainSubject[0]]):R.push([s,x[I].chainSubject])):R.push([s,x[I]]);for(I=0;I<C.length;I++)for(var B=C[I][3],Y=B[0],le=B[1]||[],ge=0;ge<le.length;ge++)null!=le[ge].triplesContext?(N=N.concat(le[ge].triplesContext),R.push([Y,le[ge].chainSubject])):R.push([Y,le[ge]]);return _.pairs=R,_.triplesContext=N,_}(x,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Wo)),s}function hs(){var s,x;return A++,r,(x=op())!==e&&(x=function(s){return{token:"path",kind:"element"}.value=s,s}(x)),A--,(s=x)===e&&(x=e,0===A&&z(xf)),s}function ps(){var s;return A++,s=gr(),A--,s===e&&0===A&&z(wf),s}function op(){var s;return A++,s=function(){var x,C,_,N,R,I;if(A++,x=r,(C=hc())!==e){for(_=[],N=r,124===l.charCodeAt(r)?(R="|",r++):(R=e,0===A&&z(qo)),R!==e&&(I=hc())!==e?N=R=[R,I]:(r=N,N=e);N!==e;)_.push(N),N=r,124===l.charCodeAt(r)?(R="|",r++):(R=e,0===A&&z(qo)),R!==e&&(I=hc())!==e?N=R=[R,I]:(r=N,N=e);_!==e?(C=function(s,x){if(null==x||0===x.length)return s;for(var C=[],_=0;_<x.length;_++)C.push(x[1]);var N={token:"path",kind:"alternative"};return N.value=C,N}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(zo)),x}(),A--,s===e&&0===A&&z(kf),s}function hc(){var s,x,C,_,N,R;if(A++,s=r,(x=pc())!==e){for(C=[],_=r,47===l.charCodeAt(r)?(N="/",r++):(N=e,0===A&&z(cn)),N!==e&&(R=pc())!==e?_=N=[N,R]:(r=_,_=e);_!==e;)C.push(_),_=r,47===l.charCodeAt(r)?(N="/",r++):(N=e,0===A&&z(cn)),N!==e&&(R=pc())!==e?_=N=[N,R]:(r=_,_=e);C!==e?s=x=function(s,x){if(null==x||0===x.length)return s;for(var C=[s],_=0;_<x.length;_++)C.push(x[_][1]);var N={token:"path",kind:"sequence"};return N.value=C,N}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ol)),s}function sp(){var s,x,C,_,N,R,I;return A++,s=r,A++,(_=yr())===e&&(_=r,97===l.charCodeAt(r)?(N="a",r++):(N=e,0===A&&z(di)),N!==e&&(N={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(_=N)===e&&(_=r,33===l.charCodeAt(r)?(N="!",r++):(N=e,0===A&&z($o)),N!==e&&(R=function(){var B,Y,le,ge,Oe,We,Ae,Xe;if((B=wu())===e)if(B=r,40===l.charCodeAt(r)?(Y=H,r++):(Y=e,0===A&&z(ee)),Y!==e){if(le=r,(ge=wu())!==e){for(Oe=[],We=r,124===l.charCodeAt(r)?(Ae="|",r++):(Ae=e,0===A&&z(qo)),Ae!==e&&(Xe=wu())!==e?We=Ae=[Ae,Xe]:(r=We,We=e);We!==e;)Oe.push(We),We=r,124===l.charCodeAt(r)?(Ae="|",r++):(Ae=e,0===A&&z(qo)),Ae!==e&&(Xe=wu())!==e?We=Ae=[Ae,Xe]:(r=We,We=e);Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)}else r=le,le=e;le===e&&(le=null),le!==e?(41===l.charCodeAt(r)?(ge=Je,r++):(ge=e,0===A&&z(Ke)),ge!==e?B=Y=[Y,le,ge]:(r=B,B=e)):(r=B,B=e)}else r=B,B=e;return B}())!==e?_=N=[N,R]:(r=_,_=e),_===e&&(_=r,40===l.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e&&(R=op())!==e?(41===l.charCodeAt(r)?(I=Je,r++):(I=e,0===A&&z(Ke)),I!==e?_=N=R:(r=_,_=e)):(r=_,_=e)))),A--,_===e&&(N=e,0===A&&z(Yo)),(x=_)!==e?((C=function(){var _,N,R,I,B,Y,le,ge,Oe;return A++,42===l.charCodeAt(r)?(_=at,r++):(_=e,0===A&&z(pt)),_===e&&(63===l.charCodeAt(r)?(_="?",r++):(_=e,0===A&&z(Ko)),_===e&&(43===l.charCodeAt(r)?(_=hn,r++):(_=e,0===A&&z(Nr)),_===e&&(_=r,123===l.charCodeAt(r)?(N=_e,r++):(N=e,0===A&&z(je)),N!==e?(R=r,(I=dc())!==e?(B=r,44===l.charCodeAt(r)?(Y=Zt,r++):(Y=e,0===A&&z($t)),Y!==e?(125===l.charCodeAt(r)?(le=He,r++):(le=e,0===A&&z(Ze)),le===e&&(le=r,(ge=dc())!==e?(125===l.charCodeAt(r)?(Oe=He,r++):(Oe=e,0===A&&z(Ze)),Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)):(r=le,le=e)),le!==e?B=Y=[Y,le]:(r=B,B=e)):(r=B,B=e),B===e&&(125===l.charCodeAt(r)?(B=He,r++):(B=e,0===A&&z(Ze))),B!==e?R=I=[I,B]:(r=R,R=e)):(r=R,R=e),R===e&&(R=r,44===l.charCodeAt(r)?(I=Zt,r++):(I=e,0===A&&z($t)),I!==e&&(B=dc())!==e?(125===l.charCodeAt(r)?(Y=He,r++):(Y=e,0===A&&z(Ze)),Y!==e?R=I=[I,B,Y]:(r=R,R=e)):(r=R,R=e)),R!==e?_=N=[N,R]:(r=_,_=e)):(r=_,_=e)))),A--,_===e&&(N=e,0===A&&z(Jo)),_}())===e&&(C=null),C!==e?s=x=function(s,x){if(s.token&&"path"!=s.token&&""==x)return s;if(s.token&&s.token!=C&&""!=x){var C={token:"path",kind:"element"};return C.value=s,C.modifier=x,C}return s.modifier=x,s}(x,C):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Rl)),s}function pc(){var s,x,C;return A++,(s=sp())===e&&(s=r,94===l.charCodeAt(r)?(x="^",r++):(x=e,0===A&&z(aa)),x!==e&&(C=sp())!==e?s=x=function(s){var x={token:"path",kind:"inversePath"};return x.value=s,x}(C):(r=s,s=e)),A--,s===e&&(x=e,0===A&&z(jl)),s}function wu(){var s,x,C;return A++,(s=yr())===e&&(97===l.charCodeAt(r)?(s="a",r++):(s=e,0===A&&z(di)),s===e&&(s=r,94===l.charCodeAt(r)?(x="^",r++):(x=e,0===A&&z(aa)),x!==e?((C=yr())===e&&(97===l.charCodeAt(r)?(C="a",r++):(C=e,0===A&&z(di))),C!==e?s=x=[x,C]:(r=s,s=e)):(r=s,s=e))),A--,s===e&&(x=e,0===A&&z(Ml)),s}function dc(){var s;return A++,s=vs(),A--,s===e&&0===A&&z(vi),s}function ap(){var s,x;return A++,s=r,(x=function(){var C,_,N,R,I,B,Y,le,ge;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(40===l.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){if(I=[],(B=vc())!==e)for(;B!==e;)I.push(B),B=vc();else I=e;if(I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(41===l.charCodeAt(r)?(Y=Je,r++):(Y=e,0===A&&z(Ke)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?C=_=I:(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e}else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z($i)),C}())!==e&&(x=function(s){for(var x=[],C=[],_=null,N=0;N<s.length;N++){Gr++;var R=null;null==s[N].chainSubject&&null==s[N].triplesContext?R=s[N]:(R=s[N].chainSubject,x=x.concat(s[N].triplesContext)),_={subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:R},0==N&&C.push(_.subject),x.push(_),_=N===s.length-1?{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Gr+1)}},x.push(_)}return{token:"triplesnodecollection",triplesContext:x,chainSubject:C}}(x)),(s=x)===e&&(s=function(){var C,_,N,R,I,B,Y,le;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(91===l.charCodeAt(r)?(N="[",r++):(N=e,0===A&&z(ts)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if((I=ip())!==e)if(93===l.charCodeAt(r)?(B="]",r++):(B=e,0===A&&z(ns)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(_=function(s){for(var x={token:"blank",value:"_:"+ ++Gr},C=[],_=0;_<s.pairs.length;_++){var N=s.pairs[_],R={};R.subject=x,R.predicate=N[0],null!=N[1].length&&(N[1]=N[1][0]),R.object=N[1],C.push(R)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:s.triplesContext.concat(C),chainSubject:x}}(I),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Cf)),C}()),A--,s===e&&(x=e,0===A&&z(Pl)),s}function lp(){var s,x;return A++,s=r,(x=function(){var C,_,N,R,I,B,Y,le,ge;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(40===l.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){if(I=[],(B=gc())!==e)for(;B!==e;)I.push(B),B=gc();else I=e;if(I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(41===l.charCodeAt(r)?(Y=Je,r++):(Y=e,0===A&&z(Ke)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?C=_=I:(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e}else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Sf)),C}())!==e&&(x=function(s){for(var x=[],C=[],_=null,N=0;N<s.length;N++){Gr++;var R=null;null==s[N].chainSubject&&null==s[N].triplesContext?R=s[N]:(R=s[N].chainSubject,x=x.concat(R.triplesContext)),_={subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:R},0==N&&C.push(_.subject),x.push(_),_=N===s.length-1?{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Gr+1)}},x.push(_)}return{token:"triplesnodecollection",triplesContext:x,chainSubject:C}}(x)),(s=x)===e&&(s=function(){var C,_,N,R,I,B,Y,le,ge;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(91===l.charCodeAt(r)?(N="[",r++):(N=e,0===A&&z(ts)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if((I=lc())!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(93===l.charCodeAt(r)?(Y="]",r++):(Y=e,0===A&&z(ns)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?(_=function(s){for(var x={token:"blank",value:"_:"+ ++Gr},C=[],_=0;_<s.pairs.length;_++){var N=s.pairs[_],R={};R.subject=x,R.predicate=N[0],null!=N[1].length&&(N[1]=N[1][0]),R.object=N[1],C.push(R)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:s.triplesContext.concat(C),chainSubject:x}}(I),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Yi)),C}()),A--,s===e&&(x=e,0===A&&z(Bl)),s}function vc(){var s,x,C,_,N,R;for(A++,r,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=ku())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e;if(x===e){for(x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=ap())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e}return x!==e&&(x=pn(x)),A--,(s=x)===e&&(x=e,0===A&&z(Ql)),s}function gc(){var s,x,C,_,N,R;for(A++,r,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=ku())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e;if(x===e){for(x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=lp())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e}return x!==e&&(x=pn(x)),A--,(s=x)===e&&(x=e,0===A&&z(gi)),s}function ku(){var s,x,C,_,N,R,I;return A++,(s=gr())===e&&(A++,(x=yr())===e&&(x=Cu())===e&&(x=Su())===e&&(x=Au())===e&&(A++,C=r,A++,N=r,"_:"===l.substr(r,2)?(R="_:",r+=2):(R=e,0===A&&z(Nd)),R!==e&&(I=hp())!==e?N=R=I:(r=N,N=e),A--,N===e&&(R=e,0===A&&z(Td)),(_=N)!==e&&(_=function(s){return{token:"blank",value:s}}(_)),(C=_)===e&&(C=r,(_=function(){var N,R,I,B;if(A++,N=r,91===l.charCodeAt(r)?(R="[",r++):(R=e,0===A&&z(ts)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(93===l.charCodeAt(r)?(B="]",r++):(B=e,0===A&&z(ns)),B!==e?N=R=[R,I,B]:(r=N,N=e)):(r=N,N=e)}else r=N,N=e;return A--,N===e&&(R=e,0===A&&z(_v)),N}())!==e&&(_={token:"blank",value:"_:"+ ++Gr}),C=_),A--,C===e&&(_=e,0===A&&z(wd)),(x=C)===e)&&(x=ti()),A--,x===e&&0===A&&z(Ef),s=x),A--,s===e&&0===A&&z(eo),s}function ds(){var s;return A++,(s=gr())===e&&(s=yr()),A--,s===e&&0===A&&z(Af),s}function gr(){var s,x,C,_,N,R,I,B;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(A++,R=r,63===l.charCodeAt(r)?(I="?",r++):(I=e,0===A&&z(Ko)),I!==e&&(B=cp())!==e?R=I=B:(r=R,R=e),A--,R===e&&(I=e,0===A&&z(Id)),(C=R)===e&&(C=function(){var R,I,B;return A++,R=r,36===l.charCodeAt(r)?(I="$",r++):(I=e,0===A&&z(oh)),I!==e&&(B=cp())!==e?R=I=B:(r=R,R=e),A--,R===e&&(I=e,0===A&&z(Od)),R}()),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=function(s){var x={token:"var"};return x.value=s,x}(C):(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ul)),s}function It(){var s;return A++,s=function(){var x,C,_,N,R,I,B,Y;if(A++,x=r,(C=yc())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("||"===l.substr(r,2)?(I="||",r+=2):(I=e,0===A&&z(Gl)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=yc())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("||"===l.substr(r,2)?(I="||",r+=2):(I=e,0===A&&z(Gl)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=yc())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e}_!==e?(C=function(s,x){if(0===x.length)return s;for(var C={token:"expression",expressionType:"conditionalor"},_=[s],N=0;N<x.length;N++)_.push(x[N][3]);return C.operands=_,C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(br)),x}(),A--,s===e&&0===A&&z(Tf),s}function yc(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=mc())!==e){for(C=[],_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if("&&"===l.substr(r,2)?(R="&&",r+=2):(R=e,0===A&&z(ua)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=mc())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;for(;_!==e;){for(C.push(_),_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if("&&"===l.substr(r,2)?(R="&&",r+=2):(R=e,0===A&&z(ua)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=mc())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}C!==e?s=x=function(s,x){if(0===x.length)return s;for(var C={token:"expression",expressionType:"conditionaland"},_=[s],N=0;N<x.length;N++)_.push(x[N][3]);return C.operands=_,C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Lf)),s}function mc(){var s;return A++,s=function(){var x,C,_,N,R,I,B,Y,le,ge,Oe,We,Ae;if(A++,x=r,(C=Ur())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(61===l.charCodeAt(r)?(I="=",r++):(I=e,0===A&&z(Mr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("!="===l.substr(r,2)?(I="!=",r+=2):(I=e,0===A&&z(no)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(60===l.charCodeAt(r)?(I="<",r++):(I=e,0===A&&z(Pr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(62===l.charCodeAt(r)?(I=">",r++):(I=e,0===A&&z(ca)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("<="===l.substr(r,2)?(I="<=",r+=2):(I=e,0===A&&z(ha)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(">="===l.substr(r,2)?(I=">=",r+=2):(I=e,0===A&&z(pa)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(73===l.charCodeAt(r)?(I="I",r++):(I=e,0===A&&z(vn)),I===e&&(105===l.charCodeAt(r)?(I="i",r++):(I=e,0===A&&z(mi))),I!==e)if(78===l.charCodeAt(r)?(B="N",r++):(B=e,0===A&&z(bi)),B===e&&(110===l.charCodeAt(r)?(B="n",r++):(B=e,0===A&&z(Kn))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=Ta())!==e?N=R=[R,I,B,Y,le]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(78===l.charCodeAt(r)?(I="N",r++):(I=e,0===A&&z(bi)),I===e&&(110===l.charCodeAt(r)?(I="n",r++):(I=e,0===A&&z(Kn))),I!==e)if(79===l.charCodeAt(r)?(B="O",r++):(B=e,0===A&&z(da)),B===e&&(111===l.charCodeAt(r)?(B="o",r++):(B=e,0===A&&z(zl))),B!==e)if(84===l.charCodeAt(r)?(Y="T",r++):(Y=e,0===A&&z(xi)),Y===e&&(116===l.charCodeAt(r)?(Y="t",r++):(Y=e,0===A&&z(ga))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(73===l.charCodeAt(r)?(ge="I",r++):(ge=e,0===A&&z(vn)),ge===e&&(105===l.charCodeAt(r)?(ge="i",r++):(ge=e,0===A&&z(mi))),ge!==e)if(78===l.charCodeAt(r)?(Oe="N",r++):(Oe=e,0===A&&z(bi)),Oe===e&&(110===l.charCodeAt(r)?(Oe="n",r++):(Oe=e,0===A&&z(Kn))),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e&&(Ae=Ta())!==e?N=R=[R,I,B,Y,le,ge,Oe,We,Ae]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e}else r=N,N=e;else r=N,N=e;else r=N,N=e;else r=N,N=e}}}}}}}for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(61===l.charCodeAt(r)?(I="=",r++):(I=e,0===A&&z(Mr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("!="===l.substr(r,2)?(I="!=",r+=2):(I=e,0===A&&z(no)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(60===l.charCodeAt(r)?(I="<",r++):(I=e,0===A&&z(Pr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(62===l.charCodeAt(r)?(I=">",r++):(I=e,0===A&&z(ca)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("<="===l.substr(r,2)?(I="<=",r+=2):(I=e,0===A&&z(ha)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(">="===l.substr(r,2)?(I=">=",r+=2):(I=e,0===A&&z(pa)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(73===l.charCodeAt(r)?(I="I",r++):(I=e,0===A&&z(vn)),I===e&&(105===l.charCodeAt(r)?(I="i",r++):(I=e,0===A&&z(mi))),I!==e)if(78===l.charCodeAt(r)?(B="N",r++):(B=e,0===A&&z(bi)),B===e&&(110===l.charCodeAt(r)?(B="n",r++):(B=e,0===A&&z(Kn))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=Ta())!==e?N=R=[R,I,B,Y,le]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(78===l.charCodeAt(r)?(I="N",r++):(I=e,0===A&&z(bi)),I===e&&(110===l.charCodeAt(r)?(I="n",r++):(I=e,0===A&&z(Kn))),I!==e)if(79===l.charCodeAt(r)?(B="O",r++):(B=e,0===A&&z(da)),B===e&&(111===l.charCodeAt(r)?(B="o",r++):(B=e,0===A&&z(zl))),B!==e)if(84===l.charCodeAt(r)?(Y="T",r++):(Y=e,0===A&&z(xi)),Y===e&&(116===l.charCodeAt(r)?(Y="t",r++):(Y=e,0===A&&z(ga))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(73===l.charCodeAt(r)?(ge="I",r++):(ge=e,0===A&&z(vn)),ge===e&&(105===l.charCodeAt(r)?(ge="i",r++):(ge=e,0===A&&z(mi))),ge!==e)if(78===l.charCodeAt(r)?(Oe="N",r++):(Oe=e,0===A&&z(bi)),Oe===e&&(110===l.charCodeAt(r)?(Oe="n",r++):(Oe=e,0===A&&z(Kn))),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e&&(Ae=Ta())!==e?N=R=[R,I,B,Y,le,ge,Oe,We,Ae]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e}else r=N,N=e;else r=N,N=e;else r=N,N=e;else r=N,N=e}}}}}}}}_!==e?(C=function(s,x){if(0===x.length)return s;if("i"===x[0][1]||"I"===x[0][1]||"n"===x[0][1]||"N"===x[0][1]){var C={};if("i"===x[0][1]||"I"===x[0][1]){var _="=";C.expressionType="conditionalor"}else _="!=",C.expressionType="conditionaland";for(var N=s,R=[],I=0;I<x[0].length;I++)if("args"===x[0][I].token){R=x[0][I].value;break}C.token="expression",C.operands=[];for(var B=0;B<R.length;B++){var Y={token:"expression",expressionType:"relationalexpression"};Y.operator=_,Y.op1=N,Y.op2=R[B],C.operands.push(Y)}return C}return(C={expressionType:"relationalexpression"}).operator=x[0][1],C.op1=s,C.op2=x[0][3],C.token="expression",C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Of)),x}(),A--,s===e&&0===A&&z(If),s}function Ur(){var s;return A++,s=function(){var x,C,_,N,R,I,B,Y,le,ge;if(A++,x=r,(C=Na())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(43===l.charCodeAt(r)?(I=hn,r++):(I=e,0===A&&z(Nr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Na())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(45===l.charCodeAt(r)?(I=Kr,r++):(I=e,0===A&&z(Br)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Na())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e)if(N=r,(R=La())===e&&(R=La()),R!==e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(42===l.charCodeAt(r)?(Y=at,r++):(Y=e,0===A&&z(pt)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=ei())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(47===l.charCodeAt(r)?(Y="/",r++):(Y=e,0===A&&z(cn)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=ei())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}I===e&&(I=null),I!==e?N=R=[R,I]:(r=N,N=e)}else r=N,N=e}for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(43===l.charCodeAt(r)?(I=hn,r++):(I=e,0===A&&z(Nr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Na())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(45===l.charCodeAt(r)?(I=Kr,r++):(I=e,0===A&&z(Br)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Na())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e)if(N=r,(R=La())===e&&(R=La()),R!==e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(42===l.charCodeAt(r)?(Y=at,r++):(Y=e,0===A&&z(pt)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=ei())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(47===l.charCodeAt(r)?(Y="/",r++):(Y=e,0===A&&z(cn)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=ei())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}I===e&&(I=null),I!==e?N=R=[R,I]:(r=N,N=e)}else r=N,N=e}}_!==e?(C=function(s,x){if(0===x.length)return s;var C={token:"expression",expressionType:"additiveexpression"};C.summand=s,C.summands=[];for(var _=0;_<x.length;_++){var N=x[_],R={};if(4==N.length&&"string"==typeof N[1])R.operator=N[1],R.expression=N[3];else{var I={},B=R[0],Y=(R[1][1],R[1][3]);B.value<0?(R.operator="-",B.value=-B.value):R.operator="+",I.token="expression",I.expressionType="multiplicativeexpression",I.operator=B,I.factors=[{operator:null,expression:Y}],R.expression=I}C.summands.push(R)}return C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Xl)),x}(),A--,s===e&&0===A&&z(ya),s}function Na(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=ei())!==e){for(C=[],_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(42===l.charCodeAt(r)?(R=at,r++):(R=e,0===A&&z(pt)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=ei())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;if(_===e){for(_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(47===l.charCodeAt(r)?(R="/",r++):(R=e,0===A&&z(cn)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=ei())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}for(;_!==e;){for(C.push(_),_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(42===l.charCodeAt(r)?(R=at,r++):(R=e,0===A&&z(pt)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=ei())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;if(_===e){for(_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(47===l.charCodeAt(r)?(R="/",r++):(R=e,0===A&&z(cn)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=ei())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}}C!==e?s=x=function(s,x){if(0===x.length)return s;var C={token:"expression",expressionType:"multiplicativeexpression"};C.factor=s,C.factors=[];for(var _=0;_<x.length;_++){var N=x[_],R={};R.operator=N[1],R.expression=N[3],C.factors.push(R)}return C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(jf)),s}function ei(){var s,x,C,_;if(A++,s=r,33===l.charCodeAt(r)?(x="!",r++):(x=e,0===A&&z($o)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=_u())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,43===l.charCodeAt(r)?(x=hn,r++):(x=e,0===A&&z(Nr)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=_u())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,45===l.charCodeAt(r)?(x=Kr,r++):(x=e,0===A&&z(Br)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=_u())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;s===e&&(s=_u())}}return A--,s===e&&(x=e,0===A&&z(so)),s}function _u(){var s,x;return A++,(s=bc())===e&&(s=xc())===e&&(s=function(){var C,_,N,R;if(A++,C=r,(_=yr())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?((R=tp())===e&&(R=null),R!==e?(_=function(s,x){var C={token:"expression",expressionType:"irireforfunction"};return C.iriref=s,C.args=null!=x?x.value:x,C}(_,R),C=_):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z($p)),C}())===e&&(s=r,(x=Cu())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=r,(x=Su())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=r,(x=Au())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=function(){var C,_,N,R,I,B,Y,le,ge,Oe,We,Ae,Xe,nt,Me,$e,it,ft;if(A++,C=r,"COUNT"===l.substr(r,5)?(_="COUNT",r+=5):(_=e,0===A&&z(Rp)),_===e&&("count"===l.substr(r,5)?(_="count",r+=5):(_=e,0===A&&z(jp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,8)===me?(B=me,r+=8):(B=e,0===A&&z(de)),B===e&&(l.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Ee))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(42===l.charCodeAt(r)?(le=at,r++):(le=e,0===A&&z(pt)),le===e&&(le=It()),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"count"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,l.substr(r,12)===Mc?(_=Mc,r+=12):(_=e,0===A&&z(Mp)),_===e&&(l.substr(r,12)===Pc?(_=Pc,r+=12):(_=e,0===A&&z(Pp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,8)===me?(B=me,r+=8):(B=e,0===A&&z(de)),B===e&&(l.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Ee))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){if(ge=r,59===l.charCodeAt(r)?(Oe=nr,r++):(Oe=e,0===A&&z(rn)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if(l.substr(r,9)===Bc?(Ae=Bc,r+=9):(Ae=e,0===A&&z(Bp)),Ae!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();if(Xe!==e)if(61===l.charCodeAt(r)?(nt="=",r++):(nt=e,0===A&&z(Mr)),nt!==e){for(Me=[],$e=Q();$e!==e;)Me.push($e),$e=Q();if(Me!==e)if(($e=up())!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();it!==e?ge=Oe=[Oe,We,Ae,Xe,nt,Me,$e,it]:(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;if(ge===e&&(ge=null),ge!==e)if(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(_=function(s,x,C){var _={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return _.distinct=""!=s&&null!=s?"DISTINCT":s,_.expression=x,_.separator=C,_}(B,le,ge),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"SUM"===l.substr(r,3)?(_="SUM",r+=3):(_=e,0===A&&z(Up)),_===e&&("sum"===l.substr(r,3)?(_="sum",r+=3):(_=e,0===A&&z(Gp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,8)===me?(B=me,r+=8):(B=e,0===A&&z(de)),B===e&&(l.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Ee))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"MIN"===l.substr(r,3)?(_="MIN",r+=3):(_=e,0===A&&z(Wp)),_===e&&("min"===l.substr(r,3)?(_="min",r+=3):(_=e,0===A&&z(zp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,8)===me?(B=me,r+=8):(B=e,0===A&&z(de)),B===e&&(l.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Ee))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"min"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"MAX"===l.substr(r,3)?(_="MAX",r+=3):(_=e,0===A&&z(Xp)),_===e&&("max"===l.substr(r,3)?(_="max",r+=3):(_=e,0===A&&z(Jp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,8)===me?(B=me,r+=8):(B=e,0===A&&z(de)),B===e&&(l.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Ee))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"max"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e)if(C=r,"AVG"===l.substr(r,3)?(_="AVG",r+=3):(_=e,0===A&&z(Kp)),_===e&&("avg"===l.substr(r,3)?(_="avg",r+=3):(_=e,0===A&&z(Yp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===l.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(l.substr(r,8)===me?(B=me,r+=8):(B=e,0===A&&z(de)),B===e&&(l.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Ee))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();We!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e}}}}return A--,C===e&&(_=e,0===A&&z(Op)),C}())===e&&(s=r,(x=gr())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"var"};return x.value=s,x}(x)),s=x)))),A--,s===e&&(x=e,0===A&&z(Mf)),s}function bc(){var s,x,C,_,N,R;if(A++,s=r,40===l.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=It())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?(41===l.charCodeAt(r)?(R=Je,r++):(R=e,0===A&&z(Ke)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Uf)),s}function xc(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,We,Ae,Xe,nt;if(A++,s=r,"STR"===l.substr(r,3)?(x="STR",r+=3):(x=e,0===A&&z(Zl)),x===e&&("str"===l.substr(r,3)?(x="str",r+=3):(x=e,0===A&&z(eu))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"str"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"LANG"===l.substr(r,4)?(x="LANG",r+=4):(x=e,0===A&&z(ss)),x===e&&("lang"===l.substr(r,4)?(x="lang",r+=4):(x=e,0===A&&z(Hf))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"lang"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,11)===Ut?(x=Ut,r+=11):(x=e,0===A&&z(zf)),x===e&&(l.substr(r,11)===as?(x=as,r+=11):(x=e,0===A&&z(lo))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(44===l.charCodeAt(r)?(B=Zt,r++):(B=e,0===A&&z($t)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e?s=x=function(s,x){var C={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return C.args=[s,x],C}(R,le):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,8)===uo?(x=uo,r+=8):(x=e,0===A&&z(xa)),x===e&&(l.substr(r,8)===wa?(x=wa,r+=8):(x=e,0===A&&z(ru))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"BOUND"===l.substr(r,5)?(x="BOUND",r+=5):(x=e,0===A&&z(iu)),x===e&&("bound"===l.substr(r,5)?(x="bound",r+=5):(x=e,0===A&&z(_a))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=gr())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"bound"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"IRI"===l.substr(r,3)?(x="IRI",r+=3):(x=e,0===A&&z(au)),x===e&&("iri"===l.substr(r,3)?(x="iri",r+=3):(x=e,0===A&&z(ki))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"iri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"URI"===l.substr(r,3)?(x="URI",r+=3):(x=e,0===A&&z(Xf)),x===e&&("uri"===l.substr(r,3)?(x="uri",r+=3):(x=e,0===A&&z(Jf))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"uri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"BNODE"===l.substr(r,5)?(x="BNODE",r+=5):(x=e,0===A&&z(ls)),x===e&&(l.substr(r,5)===t?(x=t,r+=5):(x=e,0===A&&z(n))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if(_=r,40===l.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if((I=It())!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?(41===l.charCodeAt(r)?(Y=Je,r++):(Y=e,0===A&&z(Ke)),Y!==e?_=N=[N,R,I,B,Y]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;_===e&&(_=ti()),_!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===s.length?x.args=[s[2]]:x.args=null,x}(_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,8)===a?(x=a,r+=8):(x=e,0===A&&z(m)),x===e&&(l.substr(r,8)===D?(x=D,r+=8):(x=e,0===A&&z(X))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=Ta())!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return x.args=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,"IF"===l.substr(r,2)?(x="IF",r+=2):(x=e,0===A&&z(ae)),x===e&&("if"===l.substr(r,2)?(x="if",r+=2):(x=e,0===A&&z(Fe))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(44===l.charCodeAt(r)?(B=Zt,r++):(B=e,0===A&&z($t)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(44===l.charCodeAt(r)?(Oe=Zt,r++):(Oe=e,0===A&&z($t)),Oe!==e){for(We=[],Ae=Q();Ae!==e;)We.push(Ae),Ae=Q();if(We!==e)if((Ae=It())!==e){for(Xe=[],nt=Q();nt!==e;)Xe.push(nt),nt=Q();Xe!==e?(41===l.charCodeAt(r)?(nt=Je,r++):(nt=e,0===A&&z(Ke)),nt!==e?s=x=function(s,x,C){var _={token:"expression",expressionType:"builtincall",builtincall:"if"};return _.args=[s,x,C],_}(R,le,Ae):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,9)===Qe?(x=Qe,r+=9):(x=e,0===A&&z(Ye)),x===e&&(l.substr(r,9)===tt?(x=tt,r+=9):(x=e,0===A&&z(lt)),x===e&&(l.substr(r,9)===ct?(x=ct,r+=9):(x=e,0===A&&z(dt)))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,7)===gt?(x=gt,r+=7):(x=e,0===A&&z(_t)),x===e&&(l.substr(r,7)===wt?(x=wt,r+=7):(x=e,0===A&&z(Nt)),x===e&&(l.substr(r,7)===Qt?(x=Qt,r+=7):(x=e,0===A&&z(ar)))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,8)===xr?(x=xr,r+=8):(x=e,0===A&&z(wr)),x===e&&(l.substr(r,8)===Vt?(x=Vt,r+=8):(x=e,0===A&&z(kr))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(44===l.charCodeAt(r)?(B=Zt,r++):(B=e,0===A&&z($t)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=It())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?(41===l.charCodeAt(r)?(Oe=Je,r++):(Oe=e,0===A&&z(Ke)),Oe!==e?s=x=function(s,x){var C={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return C.args=[s,x],C}(R,le):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"ISURI"===l.substr(r,5)?(x="ISURI",r+=5):(x=e,0===A&&z(tr)),x===e&&("isuri"===l.substr(r,5)?(x="isuri",r+=5):(x=e,0===A&&z(_r)),x===e&&("isURI"===l.substr(r,5)?(x="isURI",r+=5):(x=e,0===A&&z(In)),x===e&&("ISIRI"===l.substr(r,5)?(x="ISIRI",r+=5):(x=e,0===A&&z(Yr)),x===e&&("isiri"===l.substr(r,5)?(x="isiri",r+=5):(x=e,0===A&&z(Ca)),x===e&&("isIRI"===l.substr(r,5)?(x="isIRI",r+=5):(x=e,0===A&&z(Zn))))))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=It())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===l.charCodeAt(r)?(B=Je,r++):(B=e,0===A&&z(Ke)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,l.substr(r,7)===pr?(x=pr,r+=7):(x=e,0===A&&z(_i)),x===e&&(l.substr(r,7)===us?(x=us,r+=7):(x=e,0===A&&z(wp))),x!==e){if(C=[],Fc.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Ec)),_!==e)for(;_!==e;)C.push(_),Fc.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Ec));else C=e;if(C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(40===l.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();for(B!==e&&(Y=It())!==e?(44===l.charCodeAt(r)?(le=Zt,r++):(le=e,0===A&&z($t)),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e);I!==e;){for(R.push(I),I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=It())!==e?(44===l.charCodeAt(r)?(le=Zt,r++):(le=e,0===A&&z($t)),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e)}if(R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if((B=It())!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(41===l.charCodeAt(r)?(le=Je,r++):(le=e,0===A&&z(Ke)),le!==e?s=x=function(s,x,C){var _={token:"expression",expressionType:"custom"};_.name=s.join("");for(var N=[],R=0;R<x.length;R++)N.push(x[R][1]);return N.push(C),_.args=N,_}(C,R,B):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e;s===e&&(s=function(){var Me,$e,it,ft,Lt,ut,Ot,jt,Ft,Cr,lr,dr,Sr,Ar,ur;if(A++,Me=r,"REGEX"===l.substr(r,5)?($e="REGEX",r+=5):($e=e,0===A&&z(Cp)),$e===e&&("regex"===l.substr(r,5)?($e="regex",r+=5):($e=e,0===A&&z(Sp))),$e!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();if(it!==e)if(40===l.charCodeAt(r)?(ft=H,r++):(ft=e,0===A&&z(ee)),ft!==e){for(Lt=[],ut=Q();ut!==e;)Lt.push(ut),ut=Q();if(Lt!==e)if((ut=It())!==e){for(Ot=[],jt=Q();jt!==e;)Ot.push(jt),jt=Q();if(Ot!==e)if(44===l.charCodeAt(r)?(jt=Zt,r++):(jt=e,0===A&&z($t)),jt!==e){for(Ft=[],Cr=Q();Cr!==e;)Ft.push(Cr),Cr=Q();if(Ft!==e)if((Cr=It())!==e){for(lr=[],dr=Q();dr!==e;)lr.push(dr),dr=Q();if(lr!==e){if(dr=r,44===l.charCodeAt(r)?(Sr=Zt,r++):(Sr=e,0===A&&z($t)),Sr!==e){for(Ar=[],ur=Q();ur!==e;)Ar.push(ur),ur=Q();Ar!==e&&(ur=It())!==e?dr=Sr=[Sr,Ar,ur]:(r=dr,dr=e)}else r=dr,dr=e;if(dr===e&&(dr=null),dr!==e){for(Sr=[],Ar=Q();Ar!==e;)Sr.push(Ar),Ar=Q();Sr!==e?(41===l.charCodeAt(r)?(Ar=Je,r++):(Ar=e,0===A&&z(Ke)),Ar!==e?($e=function(s,x,C){var _={token:"expression",expressionType:"regex"};return _.text=s,_.pattern=x,null!=C&&(_.flags=C[2]),_}(ut,Cr,dr),Me=$e):(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e}else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return A--,Me===e&&($e=e,0===A&&z(_p)),Me}())===e&&(s=function(){var Me,$e,it,ft;if(A++,Me=r,l.substr(r,6)===fu?($e=fu,r+=6):($e=e,0===A&&z(Lc)),$e===e&&(l.substr(r,6)===cu?($e=cu,r+=6):($e=e,0===A&&z(Ic))),$e!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();it!==e&&(ft=$r())!==e?($e=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"exists"};return x.args=[s],x}(ft),Me=$e):(r=Me,Me=e)}else r=Me,Me=e;return A--,Me===e&&($e=e,0===A&&z(Fp)),Me}())===e&&(s=function(){var Me,$e,it,ft,Lt,ut;if(A++,Me=r,"NOT"===l.substr(r,3)?($e="NOT",r+=3):($e=e,0===A&&z(Np)),$e===e&&("not"===l.substr(r,3)?($e="not",r+=3):($e=e,0===A&&z(Lp))),$e!==e){for(it=[],ft=Q();ft!==e;)it.push(ft),ft=Q();if(it!==e)if(l.substr(r,6)===fu?(ft=fu,r+=6):(ft=e,0===A&&z(Lc)),ft===e&&(l.substr(r,6)===cu?(ft=cu,r+=6):(ft=e,0===A&&z(Ic))),ft!==e){for(Lt=[],ut=Q();ut!==e;)Lt.push(ut),ut=Q();Lt!==e&&(ut=$r())!==e?($e=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return x.args=[s],x}(ut),Me=$e):(r=Me,Me=e)}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return A--,Me===e&&($e=e,0===A&&z(Tp)),Me}())}}}}}}}}}}}}}}return A--,s===e&&(x=e,0===A&&z(Yl)),s}function Cu(){var s,x,C,_,N;return A++,s=r,(x=up())!==e?((C=function(){var R,I,B,Y,le,ge,Oe,We;if(A++,R=r,64===l.charCodeAt(r)?(I="@",r++):(I=e,0===A&&z(ah)),I!==e){if(B=[],lh.test(l.charAt(r))?(Y=l.charAt(r),r++):(Y=e,0===A&&z(uh)),Y!==e)for(;Y!==e;)B.push(Y),lh.test(l.charAt(r))?(Y=l.charAt(r),r++):(Y=e,0===A&&z(uh));else B=e;if(B!==e){if(Y=[],le=r,45===l.charCodeAt(r)?(ge=Kr,r++):(ge=e,0===A&&z(Br)),ge!==e){if(Oe=[],pu.test(l.charAt(r))?(We=l.charAt(r),r++):(We=e,0===A&&z(du)),We!==e)for(;We!==e;)Oe.push(We),pu.test(l.charAt(r))?(We=l.charAt(r),r++):(We=e,0===A&&z(du));else Oe=e;Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)}else r=le,le=e;for(;le!==e;)if(Y.push(le),le=r,45===l.charCodeAt(r)?(ge=Kr,r++):(ge=e,0===A&&z(Br)),ge!==e){if(Oe=[],pu.test(l.charAt(r))?(We=l.charAt(r),r++):(We=e,0===A&&z(du)),We!==e)for(;We!==e;)Oe.push(We),pu.test(l.charAt(r))?(We=l.charAt(r),r++):(We=e,0===A&&z(du));else Oe=e;Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)}else r=le,le=e;Y!==e?(I=function(s,x){return 0===x.length?("@"+s.join("")).toLowerCase():("@"+s.join("")+"-"+x[0][1].join("")).toLowerCase()}(B,Y),R=I):(r=R,R=e)}else r=R,R=e}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(Rd)),R}())===e&&(C=r,"^^"===l.substr(r,2)?(_="^^",r+=2):(_=e,0===A&&z(rd)),_!==e&&(N=yr())!==e?C=_=[_,N]:(r=C,C=e)),C===e&&(C=null),C!==e?s=x=function(s,x){return"string"==typeof x&&x.length>0?{token:"literal",value:s.value,lang:x.slice(1),type:null}:null!=x&&"object"==typeof x?(x.shift(),{token:"literal",value:s.value,lang:null,type:x[0]}):{token:"literal",value:s.value,lang:null,type:null}}(x,C):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(td)),s}function Su(){var s,x;return A++,A++,(x=_c())===e&&(x=kc())===e&&(x=vs()),A--,x===e&&0===A&&z(od),(s=x)===e&&(s=function(){var x,C,_,N;return A++,A++,C=r,43===l.charCodeAt(r)?(_=hn,r++):(_=e,0===A&&z(Nr)),_!==e&&(N=_c())!==e?C=_=fh(N):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(Jd)),(x=C)===e&&(x=function(){var C,_,N;return A++,C=r,43===l.charCodeAt(r)?(_=hn,r++):(_=e,0===A&&z(Nr)),_!==e&&(N=kc())!==e?C=_=fh(N):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(Xd)),C}())===e&&(x=function(){var C,_,N;return A++,C=r,43===l.charCodeAt(r)?(_=hn,r++):(_=e,0===A&&z(Nr)),_!==e&&(N=vs())!==e?(_=function(s){return s.value="+"+s.value,s}(N),C=_):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(zd)),C}()),A--,x===e&&0===A&&z(sd),x}())===e&&(s=La()),A--,s===e&&0===A&&z(id),s}function La(){var s,x,C,_;return A++,A++,x=r,45===l.charCodeAt(r)?(C=Kr,r++):(C=e,0===A&&z(Br)),C!==e&&(_=_c())!==e?x=C=Kf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Yd)),(s=x)===e&&(s=function(){var x,C,_;return A++,x=r,45===l.charCodeAt(r)?(C=Kr,r++):(C=e,0===A&&z(Br)),C!==e&&(_=kc())!==e?x=C=Kf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Kd)),x}())===e&&(s=function(){var x,C,_;return A++,x=r,45===l.charCodeAt(r)?(C=Kr,r++):(C=e,0===A&&z(Br)),C!==e&&(_=vs())!==e?x=C=Kf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Vd)),x}()),A--,s===e&&0===A&&z(ad),s}function Au(){var s,x;return A++,s=r,"TRUE"===l.substr(r,4)?(x="TRUE",r+=4):(x=e,0===A&&z(ud)),x===e&&("true"===l.substr(r,4)?(x="true",r+=4):(x=e,0===A&&z(fd))),x!==e&&(x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(s=x)===e&&(s=r,"FALSE"===l.substr(r,5)?(x="FALSE",r+=5):(x=e,0===A&&z(hd)),x===e&&("false"===l.substr(r,5)?(x="false",r+=5):(x=e,0===A&&z(pd))),x!==e&&(x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),s=x),A--,s===e&&(x=e,0===A&&z(ld)),s}function up(){var s,x;return A++,s=r,(x=function(){var C,_,N,R;if(A++,C=r,l.substr(r,3)===gu?(_=gu,r+=3):(_=e,0===A&&z(yh)),_!==e){for(N=[],mh.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(bh)),R===e&&(R=Ci());R!==e;)N.push(R),mh.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(bh)),R===e&&(R=Ci());N!==e?(l.substr(r,3)===gu?(R=gu,r+=3):(R=e,0===A&&z(yh)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(sv)),C}())!==e&&(x=hu(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,l.substr(r,3)===yu?(_=yu,r+=3):(_=e,0===A&&z(xh)),_!==e){for(N=[],wh.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(kh)),R===e&&(R=Ci());R!==e;)N.push(R),wh.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(kh)),R===e&&(R=Ci());N!==e?(l.substr(r,3)===yu?(R=yu,r+=3):(R=e,0===A&&z(xh)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(av)),C}())!==e&&(x=hu(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,39===l.charCodeAt(r)?(_="'",r++):(_=e,0===A&&z(Zf)),_!==e){for(N=[],ch.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(hh)),R===e&&(R=Ci());R!==e;)N.push(R),ch.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(hh)),R===e&&(R=Ci());N!==e?(39===l.charCodeAt(r)?(R="'",r++):(R=e,0===A&&z(Zf)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(iv)),C}())!==e&&(x=hu(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,34===l.charCodeAt(r)?(_='"',r++):(_=e,0===A&&z(dh)),_!==e){for(N=[],vh.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(gh)),R===e&&(R=Ci());R!==e;)N.push(R),vh.test(l.charAt(r))?(R=l.charAt(r),r++):(R=e,0===A&&z(gh)),R===e&&(R=Ci());N!==e?(34===l.charCodeAt(r)?(R='"',r++):(R=e,0===A&&z(dh)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(ov)),C}())!==e&&(x=hu(x)),s=x))),A--,s===e&&(x=e,0===A&&z(vd)),s}function yr(){var s,x,C,_,N,R,I;return A++,s=r,(x=Fu())!==e&&(x=function(s){return{token:"uri",prefix:null,suffix:null,value:s}}(x)),(s=x)===e&&(s=r,A++,C=r,A++,N=r,(R=wc())!==e&&(I=hp())!==e?(R=function(s,x){return[s,x]}(R,I),N=R):(r=N,N=e),A--,N===e&&(R=e,0===A&&z(Fd)),(_=N)!==e&&(_=function(s){return{token:"uri",prefix:s[0],suffix:s[1],value:null}}(_)),(C=_)===e&&(C=r,(_=wc())!==e&&(_=function(s){return{token:"uri",prefix:s,suffix:"",value:null}}(_)),C=_),A--,C===e&&(_=e,0===A&&z(md)),s=x=C),A--,s===e&&(x=e,0===A&&z(gd)),s}function Fu(){var s,x,C,_;if(A++,s=r,60===l.charCodeAt(r)?(x="<",r++):(x=e,0===A&&z(Pr)),x!==e){for(C=[],eh.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(th));_!==e;)C.push(_),eh.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(th));C!==e?(62===l.charCodeAt(r)?(_=">",r++):(_=e,0===A&&z(ca)),_!==e?s=x=function(s){return s.join("")}(C):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Cd)),s}function wc(){var s,x,C;return A++,s=r,(x=function(){var _,N,R,I;if(A++,_=r,(N=fp())!==e){for(R=[],(I=Eu())===e&&(46===l.charCodeAt(r)?(I=Jt,r++):(I=e,0===A&&z(Bt)));I!==e;)R.push(I),(I=Eu())===e&&(46===l.charCodeAt(r)?(I=Jt,r++):(I=e,0===A&&z(Bt)));R!==e?(N=function(s,x){if("."==x[x.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return s+x.join("")}(N,R),_=N):(r=_,_=e)}else r=_,_=e;return A--,_===e&&(N=e,0===A&&z(ng)),_}())===e&&(x=null),x!==e?(58===l.charCodeAt(r)?(C=":",r++):(C=e,0===A&&z(Aa)),C!==e?s=x:(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Ad)),s}function vs(){var s,x,C;if(A++,r,x=[],Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;return x!==e&&(x=function(s){var x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return x.value=Si(s),x}(x)),A--,(s=x)===e&&(x=e,0===A&&z(Dd)),s}function kc(){var s,x,C,_,N;if(A++,s=r,x=[],Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;if(x!==e)if(46===l.charCodeAt(r)?(C=Jt,r++):(C=e,0===A&&z(Bt)),C!==e){for(_=[],Kt.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Yt));N!==e;)_.push(N),Kt.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Yt));_!==e?s=x=function(s,x,C){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return _.value=Si([s,x,C]),_}(x,C,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e)if(s=r,46===l.charCodeAt(r)?(x=Jt,r++):(x=e,0===A&&z(Bt)),x!==e){if(C=[],Kt.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Yt)),_!==e)for(;_!==e;)C.push(_),Kt.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Yt));else C=e;C!==e?s=x=function(s,x){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return C.value=Si([s,x]),C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Pd)),s}function _c(){var s,x,C,_,N;if(A++,s=r,x=[],Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;if(x!==e)if(46===l.charCodeAt(r)?(C=Jt,r++):(C=e,0===A&&z(Bt)),C!==e){for(_=[],Kt.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Yt));N!==e;)_.push(N),Kt.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Yt));_!==e&&(N=Cc())!==e?s=x=function(s,x,C,_){var N={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return N.value=Si([s,x,C,_]),N}(x,C,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){if(s=r,46===l.charCodeAt(r)?(x=Jt,r++):(x=e,0===A&&z(Bt)),x!==e){if(C=[],Kt.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Yt)),_!==e)for(;_!==e;)C.push(_),Kt.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Yt));else C=e;C!==e&&(_=Cc())!==e?s=x=function(s,x,C){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return _.value=Si([s,x,C]),_}(x,C,_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,x=[],Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;x!==e&&(C=Cc())!==e?s=x=function(s,x){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return C.value=Si([s,x]),C}(x,C):(r=s,s=e)}}return A--,s===e&&(x=e,0===A&&z(Ud)),s}function Cc(){var s,x,C,_,N;if(A++,s=r,$d.test(l.charAt(r))?(x=l.charAt(r),r++):(x=e,0===A&&z(ev)),x!==e)if(tv.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(rv)),C===e&&(C=null),C!==e){if(_=[],Kt.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Yt)),N!==e)for(;N!==e;)_.push(N),Kt.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Yt));else _=e;_!==e?s=x=function(s,x,C){return Si([s,x,C])}(x,C,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Zd)),s}function Ci(){var s,x,C;return A++,s=r,92===l.charCodeAt(r)?(x="\\",r++):(x=e,0===A&&z(Ch)),x!==e?(uv.test(l.charAt(r))?(C=l.charAt(r),r++):(C=e,0===A&&z(fv)),C!==e?s=x=[x,C]:(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(lv)),s}function ti(){var s,x,C,_;if(A++,s=r,40===l.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e?(41===l.charCodeAt(r)?(_=Je,r++):(_=e,0===A&&z(Ke)),_!==e?s=x={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(cv)),s}function Q(){var s;return A++,dv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(vv)),s===e&&(gv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(yv)),s===e&&(mv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(bv)),s===e&&(xv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(wv)),s===e&&(s=function(){var x,C,_,N;if(A++,x=r,35===l.charCodeAt(r)?(C="#",r++):(C=e,0===A&&z(Ah)),C!==e){for(_=[],Fh.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Eh));N!==e;)_.push(N),Fh.test(l.charAt(r))?(N=l.charAt(r),r++):(N=e,0===A&&z(Eh));_!==e?x=C=[C,_]:(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(kv)),x}())))),A--,s===e&&0===A&&z(pv),s}function fp(){var s;return A++,Sv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Av)),s===e&&(Fv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Ev)),s===e&&(Tv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Nv)),s===e&&(Lv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Iv)),s===e&&(Ov.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Rv)),s===e&&(jv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Dv)),s===e&&(Mv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Pv)),s===e&&(Bv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Qv)),s===e&&(Uv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Gv)),s===e&&(Hv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Wv)),s===e&&(zv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(qv)),s===e&&(Xv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Jv)),s===e&&(Vv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Kv)),s===e&&(Yv.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Zv))))))))))))))),A--,s===e&&0===A&&z(Cv),s}function Ia(){var s;return A++,(s=fp())===e&&(95===l.charCodeAt(r)?(s="_",r++):(s=e,0===A&&z(Nh))),A--,s===e&&0===A&&z($v),s}function cp(){var s,x,C,_;if(A++,s=r,(x=Ia())===e&&(Kt.test(l.charAt(r))?(x=l.charAt(r),r++):(x=e,0===A&&z(Yt))),x!==e){for(C=[],(_=Ia())===e&&(Kt.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Yt)),_===e&&($f.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(ec)),_===e&&(tc.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(rc)),_===e&&(nc.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(ic))))));_!==e;)C.push(_),(_=Ia())===e&&(Kt.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(Yt)),_===e&&($f.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(ec)),_===e&&(tc.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(rc)),_===e&&(nc.test(l.charAt(r))?(_=l.charAt(r),r++):(_=e,0===A&&z(ic))))));C!==e?s=x=function(s,x){return s+x.join("")}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(eg)),s}function Eu(){var s;return A++,(s=Ia())===e&&(45===l.charCodeAt(r)?(s=Kr,r++):(s=e,0===A&&z(Br)),s===e&&(Kt.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Yt)),s===e&&($f.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(ec)),s===e&&(tc.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(rc)),s===e&&(nc.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(ic))))))),A--,s===e&&0===A&&z(rg),s}function hp(){var s,x,C,_;if(A++,s=r,(x=Ia())===e&&(Kt.test(l.charAt(r))?(x=l.charAt(r),r++):(x=e,0===A&&z(Yt)),x===e&&(58===l.charCodeAt(r)?(x=":",r++):(x=e,0===A&&z(Aa)),x===e&&(x=Sc()))),x!==e){for(C=[],(_=Eu())===e&&(46===l.charCodeAt(r)?(_=Jt,r++):(_=e,0===A&&z(Bt)),_===e&&(58===l.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(Aa)),_===e&&(_=Sc())));_!==e;)C.push(_),(_=Eu())===e&&(46===l.charCodeAt(r)?(_=Jt,r++):(_=e,0===A&&z(Bt)),_===e&&(58===l.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(Aa)),_===e&&(_=Sc())));C!==e?s=x=function(s,x){return s+(x||[]).join("")}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(og)),s}function Sc(){var s,x,C,_,N,R;return A++,A++,C=r,37===l.charCodeAt(r)?(_="%",r++):(_=e,0===A&&z(Ih)),_!==e&&(N=pp())!==e&&(R=pp())!==e?C=_=[_,N,R]:(r=C,C=e),C!==e&&(C=function(s){return s.join("")}(C)),A--,(x=C)===e&&(C=e,0===A&&z(lg)),(s=x)===e&&(s=function(){var x,C,_;return A++,x=r,92===l.charCodeAt(r)?(C="\\",r++):(C=e,0===A&&z(Ch)),C!==e?(95===l.charCodeAt(r)?(_="_",r++):(_=e,0===A&&z(Nh)),_===e&&(126===l.charCodeAt(r)?(_="~",r++):(_=e,0===A&&z(yg)),_===e&&(46===l.charCodeAt(r)?(_=Jt,r++):(_=e,0===A&&z(Bt)),_===e&&(45===l.charCodeAt(r)?(_=Kr,r++):(_=e,0===A&&z(Br)),_===e&&(33===l.charCodeAt(r)?(_="!",r++):(_=e,0===A&&z($o)),_===e&&(36===l.charCodeAt(r)?(_="$",r++):(_=e,0===A&&z(oh)),_===e&&(38===l.charCodeAt(r)?(_="&",r++):(_=e,0===A&&z(bg)),_===e&&(39===l.charCodeAt(r)?(_="'",r++):(_=e,0===A&&z(Zf)),_===e&&(40===l.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_===e&&(41===l.charCodeAt(r)?(_=Je,r++):(_=e,0===A&&z(Ke)),_===e&&(42===l.charCodeAt(r)?(_=at,r++):(_=e,0===A&&z(pt)),_===e&&(43===l.charCodeAt(r)?(_=hn,r++):(_=e,0===A&&z(Nr)),_===e&&(44===l.charCodeAt(r)?(_=Zt,r++):(_=e,0===A&&z($t)),_===e&&(59===l.charCodeAt(r)?(_=nr,r++):(_=e,0===A&&z(rn)),_===e&&(58===l.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(Aa)),_===e&&(61===l.charCodeAt(r)?(_="=",r++):(_=e,0===A&&z(Mr)),_===e&&(47===l.charCodeAt(r)?(_="/",r++):(_=e,0===A&&z(cn)),_===e&&(63===l.charCodeAt(r)?(_="?",r++):(_=e,0===A&&z(Ko)),_===e&&(35===l.charCodeAt(r)?(_="#",r++):(_=e,0===A&&z(Ah)),_===e&&(64===l.charCodeAt(r)?(_="@",r++):(_=e,0===A&&z(ah)),_===e&&(37===l.charCodeAt(r)?(_="%",r++):(_=e,0===A&&z(Ih)))))))))))))))))))))),_!==e?(C=function(s){return"\\"+s}(_),x=C):(r=x,x=e)):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(vg)),x}()),A--,s===e&&0===A&&z(ag),s}function pp(){var s;return A++,Kt.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(Yt)),s===e&&(cg.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(hg)),s===e&&(pg.test(l.charAt(r))?(s=l.charAt(r),r++):(s=e,0===A&&z(dg)))),A--,s===e&&0===A&&z(fg),s}var Si=function(s){for(var x="",C=0;C<s.length;C++)"string"==typeof s[C]?x+=s[C]:x+=s[C].join("");return x},Gr=0,dp={},kg=function(s,x){dp[s]=x},_g=function(s){dp.null=s},vp=function(s){var x="";if(null==s)return null;for(var C=0;C<s.length;C++)x+=s[C];return x.toUpperCase()};if((y=u())!==e&&r===l.length)return y;throw y!==e&&r<l.length&&z({type:"end"}),function wg(s,x,C){return new q(q.buildMessage(s,x),s,x,C)}(oc,On<l.length?l.charAt(On):null,On<l.length?Rh(On,On+1):Rh(On,On))}}}()},{}],129:[function(J,ie,ue){J("./btree").Tree;var q=J("./utils"),l=q,F=J("./lexicon").Lexicon;PersistentLexicon=function(y,e){var o=this;q.registerIndexedDB(o),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,o.dbName=e||"rdfstorejs";var u=o.indexedDB.open(this.dbName+"_lexicon",1);u.onerror=function(d){y(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},u.onsuccess=function(d){o.db=d.target.result,y(o)},u.onupgradeneeded=function(d){o.db=d.target.result,o.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),o.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(y,e,o){if(y!=this.defaultGraphOid){var u=this.db.transaction(["knownGraphs"],"readwrite");u.onerror=function(b){o(null,new Error(b.target.statusCode))};var d=u.objectStore("knownGraphs");d.get(e).onsuccess=function(b){b.target.result?o(!0):d.add({oid:y,uriToken:e}).onsuccess=function(h){o(!0)}}}else o()},PersistentLexicon.prototype.registeredGraphs=function(y,e){var o=[],u=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();u.onsuccess=function(d){var b=d.target.result;b?(!0===y?o.push(b.value.uriToken):o.push(b.value.oid),b.continue()):e(o)},u.onerror=function(d){e(null,new Error("Error retrieving data from the cursor: "+d.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(y,e){if(y===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"],"readwrite").objectStore("components"),u=o.index("value").get("_u:"+y);u.onsuccess=function(d){var b=d.target.result;if(b){b.counter++;var h=b.id,k=o.put(b);k.onsuccess=function(f){e(h)},k.onerror=function(f){e(null,new Error("Error updating the URI data"+f.target.errorCode))}}else{var v=o.add({value:"_u:"+y,counter:0,uri:!0});v.onsuccess=function(f){e(f.target.result)},v.onerror=function(f){e(null,new Error("Error inserting the URI data"+f.target.errorCode))}}},u.onerror=function(d){e(null,new Error("Error retrieving the URI data"+d.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(y,e){if(y===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.id):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving uri data "+u.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(y,e){if(y===this.defaultGraphUri)e(0);else{var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.cost):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving uri data "+u.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(y){var e=guid(),o=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});o.onsuccess=function(u){y(u.target.result)},o.onerror=function(u){y(null,new Error("Error inserting the URI data"+u.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(y,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(y,e){var o=this.db.transaction(["components"],"readwrite").objectStore("components"),u=o.index("value").get("_l:"+y);u.onsuccess=function(d){var b=d.target.result;if(b){b.counter++;var h=b.id,k=o.put(b);k.onsuccess=function(f){e(h)},k.onerror=function(f){e(null,new Error("Error updating the literal data"+f.target.errorCode))}}else{var v=o.add({value:"_l:"+y,counter:0,literal:!0});v.onsuccess=function(f){e(f.target.result)},v.onerror=function(f){e(null,new Error("Error inserting the literal data"+f.target.errorCode))}}},u.onerror=function(d){e(null,new Error("Error retrieving the literal data"+d.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(y,e){var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.id):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving literal data "+u.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(y,e){var o=that.db.transaction(["components"]).objectStore("components").index("components").get(y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.cost):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving literal data "+u.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(y){return F.prototype.parseLiteral(y)},PersistentLexicon.prototype.parseUri=function(y){return F.prototype.parseUri(y)},PersistentLexicon.prototype.retrieve=function(y,e){var o,u=this;y===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((o=u.db.transaction(["components"]).objectStore("components").get(y)).onsuccess=function(d){if(null!=d.target.result)if(null!=d.target.result.label){var b="_:"+d.target.result.id;e({token:"blank",value:b})}else null!=d.target.result.uri?e(u.parseUri(d.target.result.value.slice(3,d.target.result.value.length))):null!=d.target.result.literal?e(u.parseLiteral(d.target.result.value.slice(3,d.target.result.value.length))):(console.log(d.target.result),e(null,new Error("Unknown type of component "+d.target.result)));else e(null,null)},o.onerror=function(d){e(null,new Error("Error searching in blanks data "+d.target.errorCode))})},PersistentLexicon.prototype.clear=function(y){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,o=function(){null!=y&&y()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=o,e.onerror=o},PersistentLexicon.prototype.unregister=function(y,e,o){var u=this;l.seq(function(d){u._unregisterTerm(y.subject.token,e.subject,d)},function(d){u._unregisterTerm(y.predicate.token,e.predicate,d)},function(d){u._unregisterTerm(y.object.token,e.object,d)},function(d){null!=y.graph?u._unregisterTerm(y.graph.token,e.graph,d):d()})(function(){o(!0)})},PersistentLexicon.prototype._unregisterTerm=function(y,e,o){var u=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===y?e!=this.defaultGraphOid?u.objectStore("components").delete(e).onsuccess=void(u.objectStore("knownGraphs").delete(e).onsuccess=function(){o()}):o():u.objectStore("components").delete(e).onsuccess=function(){o()}},ie.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(J,ie,ue){var q=J("./utils");PersistentQuadBackend=function(l,F){var y=this;if(0!==arguments){for(var e in q.registerIndexedDB(y),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var o=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[o]=e}y.dbName=l.name||"rdfstorejs";var u=y.indexedDB.open(this.dbName+"_db",1);u.onerror=function(d){F(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},u.onsuccess=function(d){y.db=d.target.result,F(y)},u.onupgradeneeded=function(d){var b=d.target.result.createObjectStore(y.dbName,{keyPath:"SPOG"});q.each(y.indices,function(h){"SPOG"!==h&&b.createIndex(h,h,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(l,F){var y=this;q.each(this.indices,function(o){l[o]=y._genMinIndexKey(l,o)});var e=y.db.transaction([y.dbName],"readwrite");e.oncomplete=function(o){},e.onerror=function(o){F(null,new Error(o.target.statusCode))},e.objectStore(y.dbName).add(l).onsuccess=function(o){F(!0)}},PersistentQuadBackend.prototype.range=function(l,F){var y=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._indexForPattern(l),o=this._genMinIndexKey(l,e),u=this._genMaxIndexKey(l,e),d=this.IDBKeyRange.bound(o,u,!1,!1),b=[];("SPOG"===e?y:y.index(e)).openCursor(d).onsuccess=function(h){var k=h.target.result;k?(b.push(k.value),k.continue()):F(b)}},PersistentQuadBackend.prototype.search=function(l,F){var y=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._genMinIndexKey(l,"SPOG"),o=y.get(e);o.onerror=function(u){F(null,new Error(u.target.statusCode))},o.onsuccess=function(u){F(null!=u.target.result)}},PersistentQuadBackend.prototype.delete=function(l,F){var y=this._genMinIndexKey(l,"SPOG"),e=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(y);e.onsuccess=function(){F(!0)},e.onerror=function(o){F(null,new Error(o.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(l,F){var y=this.componentOrders[F];return q.map(y,function(e){return"string"==typeof l[e]||null==l[e]?"0":l[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(l,F){for(var y=this.componentOrders[F],e=[],o=0;o<y.length;o++){var u=l[y[o]];e[o]="string"==typeof u?"z":u}return q.map(e,function(d){return""+d}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(l){var F=l.indexKey.sort().join("."),y=this.componentOrdersMap[F];if(null==y)throw new Error("Error, cannot find index for indexKey "+F);return y},PersistentQuadBackend.prototype.clear=function(l){var F;(F=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){l()},F.onerror=function(){l()}},ie.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(J,ie,ue){var q=J("./quad_index").QuadIndex,l=J("./utils");QuadBackend=function(F,y){this.indexMap={},this.treeOrder=F.treeOrder,this.indices=F.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;l.eachSeries(this.indices,function(o,u){new q({order:e.treeOrder,componentOrder:e.componentOrders[o]},function(d){e.indexMap[o]=d,u()})},function(){y(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(F){for(var y=F.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var o=QuadBackend.allIndices[e],u=QuadBackend.componentOrders[o],d=0;d<u.length&&!1!==l.include(y,u[d]);d++)if(d==y.length-1)return o;return"SPOG"},QuadBackend.prototype.index=function(F,y){var e=this;l.eachSeries(this.indices,function(o,u){e.indexMap[o].insert(F,function(){u()})},function(){y(!0)})},QuadBackend.prototype.range=function(F,y){var e=this._indexForPattern(F),o=this.indexMap[e];null!=o&&o.range(F,function(u){y(u)})},QuadBackend.prototype.search=function(F,y){var e=this.indexMap.SPOG;null!=e&&e.search(F,function(o){y(null!=o)})},QuadBackend.prototype.delete=function(F,y){var e=this;l.eachSeries(this.indices,function(o,u){e.indexMap[o].delete(F,function(){u()})},function(){y(!0)})},QuadBackend.prototype.clear=function(F){var y=this;l.eachSeries(this.indices,function(e,o){new q({order:y.treeOrder,componentOrder:y.componentOrders[e]},function(u){y.indexMap[e]=u,o()})},function(){F(!0)})},ie.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(J,ie,ue){var q=J("./btree").Tree,l=J("./utils"),F=J("./utils");NodeKey=function(y,e){this.subject=y.subject,this.predicate=y.predicate,this.object=y.object,this.graph=y.graph,this.order=e},NodeKey.prototype.comparator=function(y){for(var e=0;e<this.order.length;e++){var o=this.order[e];if(null==y[o])return 0;if(this[o]<y[o])return-1;if(this[o]>y[o])return 1}return 0},Pattern=function(y){this.subject=y.subject,this.predicate=y.predicate,this.object=y.object,this.graph=y.graph,this.indexKey=[],this.keyComponents={};var e=[],o=[],u=this;l.forEach(["subject","predicate","object","graph"],function(d){"string"==typeof u[d]?(o.push(d),u.keyComponents[d]=null):(e.push(d),u.keyComponents[d]=u[d],u.indexKey.push(d))}),this.order=e.concat(o),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(y,e){0!=arguments&&(this.componentOrder=y.componentOrder,q.call(this,y.order,function(o){o.comparator=function(u,d){for(var b=0;b<o.componentOrder.length;b++){var h=o.componentOrder[b],k=u[h],v=d[h];if(k<v)return-1;if(k>v)return 1}return 0},o.rangeComparator=function(u,d){for(var b=0;b<o.componentOrder.length;b++){var h=o.componentOrder[b];if(null==d[h]||null==u[h])return 0;if(u[h]<d[h])return-1;if(u[h]>d[h])return 1}return 0},e(o)}))},QuadIndex.prototype=l.create(q.prototype,{constructor:q}),QuadIndex.prototype.insert=function(y,e){q.prototype.insert.call(this,y,null,function(o){e(o)})},QuadIndex.prototype.search=function(y,e){q.prototype.search.call(this,y,function(o){e(o)},!0)},QuadIndex.prototype.range=function(y,e){this._rangeTraverse(this,this.root,y,e)},QuadIndex.prototype._rangeTraverse=function(y,e,o,u){var d=o.key,b=[],h=[e];F.whilst(function(){return h.length>0},function(k){for(var v=h.shift(),f=0;f<v.numberActives&&-1===y.rangeComparator(v.keys[f].key,d);)f++;if(!0===v.isLeaf){for(var w=f;w<v.numberActives&&0===y.rangeComparator(v.keys[w].key,d);)b.push(v.keys[w].key),w++;k()}else y._diskRead(v.children[f],function(T){h.push(T);var E=f;F.whilst(function(){return E<v.numberActives&&0===y.rangeComparator(v.keys[E].key,d)},function(P){b.push(v.keys[E].key),E++,y._diskRead(v.children[E],function(M){h.push(M),P()})},function(){k()})})},function(){u(b)})},ie.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(J,ie,ue){var q=J("./abstract_query_tree").AbstractQueryTree,l=J("./abstract_query_tree").NonSupportedSparqlFeatureError,F=J("./utils"),y=J("./quad_index"),e=J("./query_plan").QueryPlan,o=J("./query_filters").QueryFilters,u=J("./rdf_model"),d=J("./rdf_loader").RDFLoader,b=J("./graph_callbacks").CallbacksBackend,h=J("./utils"),k=J("./utils");function v(f,w,T){this.name="BindExpressionError",this.bind=w,this.error=T,this.message=f}v.prototype=new Error,v.constructor=v,QueryEngine=function(f){0!=arguments.length&&(this.backend=f.backend,this.lexicon=f.lexicon,this.eventsOnBatchLoad=f.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new q,this.rdfLoader=new d(f.communication),this.callbacksBackend=new b(this),this.customFns=f.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(f){this.customFns=f},QueryEngine.prototype.registerNsInEnvironment=function(f,w){var T=[];null!=f&&null!=f.prefixes&&(T=f.prefixes);var E={};for(var P in this.defaultPrefixes)E[P]=this.defaultPrefixes[P];for(var M=0;M<T.length;M++){var j=T[M];"prefix"===j.token&&(E[j.prefix]=j.local)}w.namespaces=E,null!=f&&f.base&&"object"==typeof f.base?w.base=f.base.value:w.base=null},QueryEngine.prototype.applyModifier=function(f,w){if("DISTINCT"==f){for(var T={},E=[],P=0;P<w.length;P++){var M=w[P],j="";for(var O in M){var L=M[O];null==L?j=j+O+"null":"literal"==L.token?(null!=L.value&&(j+=L.value),null!=L.lang&&(j+=L.lang),null!=L.type&&(j+=L.type)):j=L.value?j+O+L.value:j+O+L}null==T[j]&&(E.push(M),T[j]=!0)}return E}return w},QueryEngine.prototype.applyLimitOffset=function(f,w,T){return null==w&&null==f?T:(null==f&&(f=0),w=null==w?T.length:f+w,T.slice(f,w))},QueryEngine.prototype.applySingleOrderBy=function(f,w,T,E,P){var M=[],j=this;h.eachSeries(f,function(O,L){o.collect(O.expression,[w],T,E,j,function(G){M.push(G[0].value),L()})},function(){P({binding:w,value:M})})},QueryEngine.prototype.applyOrderBy=function(f,w,T,E,P){var M=this,j=[];null!=f&&f.length>0?h.eachSeries(w,function(O,L){M.applySingleOrderBy(f,O,T,E,function(G){j.push(G),L()})},function(){j.sort(function(G,W){return M.compareFilteredBindings(G,W,f,E)});for(var O=[],L=0;L<j.length;L++)O.push(j[L].binding);P(O)}):P(w)},QueryEngine.prototype.compareFilteredBindings=function(f,w,T,E){for(var P=0;;){if(P==f.value.length)return 0;var M,j=T[P].direction;if(null!=f.value[P]||null!=w.value[P]){if(null==f.value[P])M={value:!1};else if(null==w.value[P])M={value:!0};else{if("blank"===f.value[P].token&&"blank"===w.value[P].token){P++;continue}if("blank"===f.value[P].token)M={value:!1};else if("blank"===w.value[P].token)M={value:!0};else if("uri"===f.value[P].token&&"uri"===w.value[P].token){if(1==o.runEqualityFunction(f.value[P],w.value[P],[],this,E).value){P++;continue}M=o.runTotalGtFunction(f.value[P],w.value[P],[])}else if("uri"===f.value[P].token)M={value:!1};else if("uri"===w.value[P].token)M={value:!0};else if("literal"===f.value[P].token&&"literal"===w.value[P].token&&null==f.value[P].type&&null==w.value[P].type){if(1==o.runEqualityFunction(f.value[P],w.value[P],[],this,E).value){P++;continue}M=o.runTotalGtFunction(f.value[P],w.value[P],[])}else if("literal"===f.value[P].token&&null==f.value[P].type)M={value:!1};else if("literal"===w.value[P].token&&null==w.value[P].type)M={value:!0};else{if(1==o.runEqualityFunction(f.value[P],w.value[P],[],this,E).value){P++;continue}M=o.runTotalGtFunction(f.value[P],w.value[P],[])}}return 1==M.value?"ASC"===j?1:-1:"ASC"===j?-1:1}P++}},QueryEngine.prototype.removeDefaultGraphBindings=function(f,w){for(var T=[],E={},P=0;P<w.named.length;P++)E[w.named[P].oid]=!0;for(P=0;P<w.implicit.length;P++)null==E[w.implicit[P].oid]&&T.push(w.implicit[P].oid);var M=[];for(P=0;P<f.length;P++){var j=f[P],O=!1;for(var L in j){for(var G=0;G<E.length;G++)if(j[L]===E[G]){O=!0;break}if(O)break}O||M.push(j)}return M},QueryEngine.prototype.aggregateBindings=function(f,w,T,E,P){this.copyDenormalizedBindings(w,E.outCache,function(M){for(var j={},O=0;O<f.length;O++){var L=o.runAggregator(f[O],M,this,T,E);f[O].alias?j[f[O].alias.value]=L:j[f[O].value.value]=L}P(j)})},QueryEngine.prototype.projectBindings=function(f,w,T){if("*"===f[0].kind)return w;for(var E=[],P=0;P<w.length;P++){for(var M=w[P],j={},O=!0,L=0;L<f.length;L++)if("variable"==f[L].token&&"aliased"!=f[L].kind)j[f[L].value.value]=M[f[L].value.value];else if("variable"==f[L].token&&"aliased"==f[L].kind){var G=o.runFilter(f[L].expression,M,this,T,{blanks:{},outCache:{}});if(o.isEbvError(G)){O=!1;break}j[f[L].alias.value]=G}!0===O&&E.push(j)}return E},QueryEngine.prototype.resolveNsInEnvironment=function(f,w){return w.namespaces[f]},QueryEngine.prototype.normalizeTerm=function(f,w,T,E){if("uri"===f.token){var P=F.lexicalFormBaseUri(f,w);null==P?E(null):T?this.lexicon.registerUri(P,E):this.lexicon.resolveUri(P,E)}else if("literal"===f.token){var M=F.lexicalFormLiteral(f,w);T?this.lexicon.registerLiteral(M,E):this.lexicon.resolveLiteral(M,E)}else if("blank"===f.token){var j=f.value,O=w.blanks[j];null!=O?E(O):T?this.lexicon.registerBlank(function(L){w.blanks[j]=L,E(L)}):this.lexicon.resolveBlank(function(L){w.blanks[j]=L,E(L)})}else"var"===f.token?E(f.value):E(null)},QueryEngine.prototype.normalizeDatasets=function(f,w,T){var E=this;h.eachSeries(f,function(P,M){P.value===E.lexicon.defaultGraphUri?(P.oid=E.lexicon.defaultGraphOid,M()):E.normalizeTerm(P,w,!1,function(j){null!=j&&(P.oid=j),M()})},function(){T(!0)})},QueryEngine.prototype.normalizeQuad=function(f,w,T,E){var P=null,M=null,j=null,O=null,L=this,G=!1;h.seq(function(W){if(null==f.graph||f.graph.value===L.lexicon.defaultGraphUri)O=0,W();else{var V=F.lexicalFormBaseUri(f.graph,w);L.normalizeTerm(f.graph,w,T,function($){null!=$?(O=$,!0===T&&"var"!=f.graph.token?L.lexicon.registerGraph($,V,function(){W()}):W()):(G=!0,W())})}},function(W){!1===G?L.normalizeTerm(f.subject,w,T,function(V){null!=V?(P=V,W()):(G=!0,W())}):W()},function(W){!1===G?L.normalizeTerm(f.predicate,w,T,function(V){null!=V?(M=V,W()):(G=!0,W())}):W()},function(W){!1===G?L.normalizeTerm(f.object,w,T,function(V){null!=V?(j=V,W()):(G=!0,W())}):W()})(function(){E(!0===G?null:{subject:P,predicate:M,object:j,graph:O})})},QueryEngine.prototype.denormalizeBindingsList=function(f,w,T){var E=this,P=[];h.eachSeries(f,function(M,j){E.denormalizeBindings(M,w,function(O){P.push(O),j()})},function(){T(P)})},QueryEngine.prototype.copyDenormalizedBindings=function(f,w,T){var E=this,P=[];h.eachSeries(f,function(M,j){var O={},L=k.keys(M);h.eachSeries(L,function(G,W){var V=M[G];if(null==V)O[G]=null,W();else if("object"==typeof V)O[G]=V,W();else{var $=w[V];null!=$?(O[G]=$,W()):E.lexicon.retrieve(V,function(fe){w[V]=fe,O[G]=fe,W()})}},function(){P.push(O),j()})},function(){T(P)})},QueryEngine.prototype.denormalizeBindings=function(f,w,T){var E=k.keys(f),P=w.outCache,M=this;h.eachSeries(E,function(j,O){var L=f[j];null==L?(f[j]=null,O()):"object"==typeof L?O():null!=P[L]?(f[j]=P[L],O()):M.lexicon.retrieve(L,function(G){f[j]=G,"blank"===G.token&&(w.blanks[G.value]=L),O()})},function(){T(f)})},QueryEngine.prototype.execute=function(f,w,T,E){f=F.normalizeUnicodeLiterals(f);var P=this.abstractQueryTree.parseQueryString(f);if(null==P)w(!1,"Error parsing query string");else if("query"===P.token&&"update"==P.kind){this.callbacksBackend.startGraphModification();var M=this;this.executeUpdate(P,function(j,O){M.lexicon.updateAfterWrite&&M.lexicon.updateAfterWrite(),j?(M.callbacksBackend.cancelGraphModification(),w(j,O)):M.callbacksBackend.endGraphModification(function(){w(j,O)})})}else"query"===P.token&&"query"==P.kind&&this.executeQuery(P,w,T,E)},QueryEngine.prototype.executeQuery=function(f,w,T,E){var P=f.prologue,M=f.units,j=this,O={blanks:{},outCache:{}};this.registerNsInEnvironment(P,O);var L=j.abstractQueryTree.parseExecutableUnit(M[0]);"select"===L.kind?this.executeSelect(L,O,T,E,function(G,W){null==G?"object"==typeof W&&!0===W.denorm?w(null,W.bindings):j.denormalizeBindingsList(W,O,function(V){w(null,V)}):w(G)}):"ask"===L.kind?(L.projection=[{token:"variable",kind:"*"}],this.executeSelect(L,O,T,E,function(G,W){null==G?W.length>0?w(null,!0):w(null,!1):w(G)})):"construct"===L.kind&&(L.projection=[{token:"variable",kind:"*"}],j=this,this.executeSelect(L,O,T,E,function(G,W){null==G?j.denormalizeBindingsList(W,O,function(V){if(null!=V){var $=new u.Graph;null==L.template&&(L.template={triplesContext:L.pattern});for(var fe=1,ce=[],xe=0;xe<V.length;xe++){for(var te=V[xe],se=0;se<ce.length;se++)delete ce[se].valuetmp;for(se=0;se<L.template.triplesContext.length;se++){for(var ne=["subject","predicate","object"],ve=L.template.triplesContext[se],Ce=0;Ce<ne.length;Ce++){var me=ne[Ce];if("blank"===ve[me].token&&(!ve[me].valuetmp||null==ve[me].valuetmp)){var de="_:b"+fe;fe++,ve[me].valuetmp=de,ce.push(ve[me])}}var ye=u.buildRDFResource(ve.subject,te,j,O),Ee=(Ce=u.buildRDFResource(ve.predicate,te,j,O),u.buildRDFResource(ve.object,te,j,O));if(null!=ye&&null!=Ce&&null!=Ee){var Be=new u.Triple(ye,Ce,Ee);$.add(Be)}}}w(null,$)}else w(new Error("Error denormalizing bindings."))}):w(G)}))},QueryEngine.prototype.executeSelect=function(f,w,T,E,P){if("select"===f.kind||"ask"===f.kind||"construct"===f.kind||"modify"===f.kind){var M=f.projection,j=f.dataset,O=f.modifier,L=f.limit,G=f.offset,W=f.order,V=this;null==T&&null==E||(j.implicit=T||[],j.named=E||[]),null!=j.implicit&&0===j.implicit.length&&null!=j.named&&0===j.named.length&&j.implicit.push(this.lexicon.defaultGraphUriTerm),V.normalizeDatasets(j.implicit.concat(j.named),w,function(){try{V.executeSelectUnit(M,j,f.pattern,w,function($){if(null!=$){if(null!=f.group&&""===f.group){for(var fe=!1,ce=0;ce<f.projection.length;ce++)if(null!=f.projection[ce].expression&&"aggregate"===f.projection[ce].expression.expressionType){fe=!0;break}!0===fe&&(f.group="singleGroup")}f.group&&""!=f.group?V.checkGroupSemantics(f.group,M)?V.groupSolution($,f.group,j,w,function(xe){var te=[];h.eachSeries(xe,function(se,ne){V.aggregateBindings(M,se,j,w,function(ve){te.push(ve),ne()})},function(){P(null,{bindings:te,denorm:!0})})}):P(new Error("Incompatible Group and Projection variables")):V.applyOrderBy(W,$,j,w,function(xe){var te=V.projectBindings(M,xe,j),se=V.applyModifier(O,te),ne=V.applyLimitOffset(G,L,se),ve=V.removeDefaultGraphBindings(ne,j);P(null,ve)})}else P(new Error("Error executing SELECT query."))})}catch($){P($)}})}else P(new Error("Cannot execute "+f.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(f,w,T,E,P){var M=[],j=[],O=!1,L=this;"singleGroup"===w?P([f]):h.eachSeries(f,function(G,W){var V=!0;h.eachSeries(w,function($,fe){var ce=null;if("var"===$.token)ce=$.value,0==O&&M.push(ce),fe();else if("aliased_expression"===$.token){if(ce=$.alias.value,0==O&&M.push(ce),"var"===$.expression.primaryexpression)G[$.alias.value]=G[$.expression.value.value];else{var xe=L.copyDenormalizedBindings([G],E.outCache),te=o.runFilter($.expression,xe[0],L,T,E);o.isEbvError(te)?V=!1:(null!=te.value&&(te.value=""+te.value),G[$.alias.value]=te)}fe()}else L.copyDenormalizedBindings([G],E.outCache,function(se){var ne=o.runFilter($,se[0],L,E);o.isEbvError(ne)?V=!1:(G["groupCondition"+env._i]=ne,ce="groupCondition"+env._i,0==O&&M.push(ce)),fe()})},function(){0==O&&(O=!0),!0===V&&j.push(G),W()})},function(){for(var G={},W={},V=0;V<j.length;V++){for(var $=j[V],fe="",ce=0;ce<M.length;ce++){var xe=$[M[ce]];fe+="object"==typeof xe?xe.value:xe}null==G[fe]?(W[fe]=0,G[fe]=[$]):G[fe].push($)}var te=[];for(var se in G)te.push(G[se]);P(te)})},QueryEngine.prototype.executeSelectUnit=function(f,w,T,E,P){if("BGP"===T.kind)this.executeAndBGP(f,w,T,E,P);else if("UNION"===T.kind)this.executeUNION(f,w,T.value,E,P);else if("JOIN"===T.kind)this.executeJOIN(f,w,T,E,P);else if("LEFT_JOIN"===T.kind)this.executeLEFT_JOIN(f,w,T,E,P);else if("FILTER"===T.kind){var M=this;this.executeSelectUnit(f,w,T.value,E,function(j){null!=j?o.checkFilters(T,j,!1,w,E,M,P):P([])})}else{if("EMPTY_PATTERN"!==T.kind)throw new l(T.kind);P([])}},QueryEngine.prototype.executeUNION=function(f,w,T,E,P){var M,j,O=T[0],L=T[1],G=null;if(2!=T.length)throw"SPARQL algebra UNION with more than two components";var W=this;h.seq(function(V){try{W.executeSelectUnit(f,w,O,E,function($){M=$,V()})}catch($){G=$,V()}},function(V){if(null==G)try{W.executeSelectUnit(f,w,L,E,function($){j=$,V()})}catch($){G=$,V()}else V()})(function(){if(null!=G)P(G);else{var V=e.unionBindings(M,j);W.runBinds(T.binds,V,w,E,function($,fe){if(null!=$)throw new v("Error processing bind expressions",T.binds,$);o.checkFilters(T,fe,!1,w,E,W,P)})}})},QueryEngine.prototype.executeAndBGP=function(f,w,T,E,P){var M=this;e.executeAndBGPsDPSize(T.value,w,this,E,function(j){null!=j?M.runBinds(T.binds,j,w,E,function(O,L){if(null!=O)throw new v("Error processing bind expressions",T.binds,O);o.checkFilters(T,L,!1,w,E,M,P)}):P(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(f,w,T,E,P){var M=T.lvalue,j=T.rvalue;if("EMPTY_PATTERN"===M.kind)this.executeSelectUnit(f,w,j,E,P);else{var O,L,G=null,W=null,V=null,$=this;h.seq(function(fe){try{$.executeSelectUnit(f,w,M,E,function(ce){G=ce,fe()})}catch(ce){V=ce,fe()}},function(fe){if(null!=V)fe();else try{$.executeSelectUnit(f,w,j,E,function(ce){W=ce,fe()})}catch(ce){V=ce,fe()}})(function(){if(null!=V)P(V);else{var fe=e.leftOuterJoinBindings(G,W);$.runBinds(T.binds,fe,w,E,function(ce,xe){if(null!=ce)throw new v("Error processing bind expressions",T.binds,ce);o.checkFilters(T,fe,!0,w,E,$,function(te){if(G.length>1&&W.length>1){var se=[],ne={};for(var ve in G[0])ne[ve]=!0;for(ve in W[0])1!=ne[ve]&&se.push(ve);O=[],L={};for(var Ce=0;Ce<te.length;Ce++)if(!0===te[Ce].__nullify__){for(var me=0;me<se.length;me++)te[Ce].bindings[se[me]]=null;var de=[],ye=[];for(var ve in te[Ce].bindings)null!=te[Ce].bindings[ve]&&(de.push(ve+te[Ce].bindings[ve]),de.sort(),ye.push(de.join("")));if(null==L[de.join("")]){for(me=0;me<ye.length;me++)L[ye[me]]=!0;O.push(te[Ce].bindings)}}else for(var ve in O.push(te[Ce]),de=[],ye=[],te[Ce])de.push(ve+te[Ce][ve]),de.sort(),L[de.join("")]=!0;P(O)}else P(te)})})}})}},QueryEngine.prototype.executeJOIN=function(f,w,T,E,P){var M=T.lvalue,j=T.rvalue,O=null,L=null,G=null,W=this;h.seq(function(V){try{W.executeSelectUnit(f,w,M,E,function($){O=$,V()})}catch($){G=$,V()}},function(V){if(null!=G)V();else try{W.executeSelectUnit(f,w,j,E,function($){L=$,V()})}catch($){G=$,V()}})(function(){var V=null;if(null!=G)P(G);else if(0===O.length||0===L.length)P([]);else{var $={},fe=[];for(var ce in O[0])$[ce]=!1;for(var ce in L[0])!1===$[ce]&&fe.push(ce);V=0==fe.length||W.abstractQueryTree.treeWithUnion(M)||W.abstractQueryTree.treeWithUnion(j)?e.joinBindings(O,L):e.joinBindings2(fe,O,L),W.runBinds(T.binds,V,w,E,function(xe,te){if(null!=xe)throw new v("Error processing bind expressions",T.binds,xe);o.checkFilters(T,te,!1,w,E,W,P)})}})},QueryEngine.prototype.rangeQuery=function(f,w,T){var E=this;E.normalizeQuad(f,w,!1,function(P){null!=P?E.backend.range(new y.Pattern(P),function(M){null==M||0==M.length?T([]):T(M)}):T(null)})},QueryEngine.prototype.executeUpdate=function(f,w){var T=f.prologue,E=f.units,P=this,M={blanks:{},outCache:{}};this.registerNsInEnvironment(T,M);for(var j=0;j<E.length;j++){var O=P.abstractQueryTree.parseExecutableUnit(E[j]);if("insertdata"===O.kind){var L=null;h.eachSeries(O.quads,function(W,V){null===L?P._executeQuadInsert(W,M,function($){null!=$&&(L=$),V()}):V()},function(){null===L?w(null,!0):w(L)})}else if("deletedata"===O.kind)L=null,h.eachSeries(O.quads,function(W,V){null===L?P._executeQuadDelete(W,M,function($){null!=$&&(L=$),V()}):V()},function(){null===L?w(null,!0):w(L)});else if("modify"===O.kind)this._executeModifyQuery(O,M,w);else if("create"===O.kind)w(!0);else if("load"===O.kind){var G={uri:F.lexicalFormBaseUri(O.sourceGraph,M)};null!=O.destinyGraph&&(G={uri:F.lexicalFormBaseUri(O.destinyGraph,M)}),P=this,this.rdfLoader.load(O.sourceGraph.value,G,function(W,V){W?w(new Error("error batch loading quads")):P.batchLoad(V,function($){null!==$?w(null,$):w(new Error("Error batch loading quads"))})})}else if("drop"===O.kind)this._executeClearGraph(O.destinyGraph,M,w);else{if("clear"!==O.kind)throw new Error("not supported execution unit");this._executeClearGraph(O.destinyGraph,M,w)}}},QueryEngine.prototype.batchLoad=function(f,w){var T=0,E={},P=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),h.eachSeries(f,function(M,j){var O={};h.eachSeries(["subject","predicate","object","graph"],function(L,G){!function(W,V,$,fe){var ce;if(W[V].uri||"uri"===W[V].token){var xe=W[V].uri||W[V].value;P.lexicon.registerUri(xe,function(te){var se=function(){null!=W[V].uri&&(W[V]={token:"uri",value:W[V].uri},delete W[V].uri),$[V]=te,fe()};"graph"===V?P.lexicon.registerGraph(te,xe,function(){se()}):se()})}else W[V].literal||"literal"===W[V].token?P.lexicon.registerLiteral(W[V].literal||W[V].value,function(te){null!=W[V].literal&&(W[V]=P.lexicon.parseLiteral(W[V].literal),delete W[V].literal),$[V]=te,fe()}):null==(ce=E[W[V].blank||W[V].value])?P.lexicon.registerBlank(function(te){E[W[V].blank||W[V].value]=te,null==W[V].token&&(W[V].token="blank",W[V].value=W[V].blank,delete W[V].blank),$[V]=te,fe()}):(null==W[V].token&&(W[V].token="blank",W[V].value=W[V].blank,delete W[V].blank),$[V]=ce,fe())}(M,L,O,G)},function(){var L=M;M=O;var G=new y.NodeKey(M);P.backend.search(G,function(W){W?j():P.backend.index(G,function(V){V&&(P.eventsOnBatchLoad&&P.callbacksBackend.nextGraphModification(b.added,[L,M]),T+=1),j()})})})},function(){null!=P.lexicon.updateAfterWrite&&P.lexicon.updateAfterWrite();var M=function(){w(T)};P.eventsOnBatchLoad?P.callbacksBackend.endGraphModification(M()):M()})},QueryEngine.prototype._executeModifyQuery=function(f,w,T){var E=this,P=!0,M=new Error("Error executing modify query"),j=null,O=["subject","predicate","object","graph"];f.insert=null==f.insert?[]:f.insert,f.delete=null==f.delete?[]:f.delete,h.seq(function(L){var G=[],W=[];if(null!=f.with&&G.push(f.with),null!=f.using){W=[];for(var V=0;V<f.using.length;V++){var $=f.using[V];"named"===$.kind?W.push($.uri):G.push($.uri)}}f.dataset={},f.projection=[{token:"variable",kind:"*"}],E.executeSelect(f,w,G,W,function(fe,ce){if(fe)return M=fe,P=!1,L();E.denormalizeBindingsList(ce,w,function(xe){null!=xe?j=xe:(M=new Error("Error denormalizing bindings list"),P=!1),L()})})},function(L){var G=f.with;if(P){for(var W=[],V=0;V<f.delete.length;V++)for(var $=f.delete[V],fe=0;fe<j.length;fe++){for(var ce={},xe=j[fe],te=0;te<O.length;te++){var se=O[te];"graph"==se&&null==$[se]?ce.graph=G:"var"===$[se].token?ce[se]=xe[$[se].value]:ce[se]=$[se]}W.push(ce)}h.eachSeries(W,function(ne,ve){E._executeQuadDelete(ne,w,function(){ve()})},function(){L()})}else L()},function(L){var G=f.with;if(P){for(var W=[],V=0;V<f.insert.length;V++)for(var $=f.insert[V],fe=0;fe<j.length;fe++){for(var ce={},xe=j[fe],te=0;te<O.length;te++){var se=O[te];"graph"==se&&null==$[se]?ce.graph=G:"var"===$[se].token?ce[se]=xe[$[se].value]:ce[se]=$[se]}W.push(ce)}h.eachSeries(W,function(ne,ve){E._executeQuadInsert(ne,w,function(){ve()})},function(){L()})}else L()})(function(){T(P?null:M)})},QueryEngine.prototype._executeQuadInsert=function(f,w,T){var E,P=this,M=!1,j=null;h.seq(function(O){P.normalizeQuad(f,w,!0,function(L){null!=L?E=L:(M=!0,j="Error normalizing quad."),O()})},function(O){if(!1===M){var L=new y.NodeKey(E);P.backend.search(L,function(G){!0===G?O():P.backend.index(L,function(){P.callbacksBackend.nextGraphModification(b.added,[f,E]),O()})})}else O()})(function(){M?T(new Error(j)):T(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(f,w,T){var E,P,M,j=this,O=!1;h.seq(function(L){j.normalizeQuad(f,w,!0,function(G){null!=G?E=G:(O=!0,P="Error normalizing quad."),L()})},function(L){!1===O?(M=new y.NodeKey(E),j.backend.delete(M,function(){L()})):L()},function(L){!1===O?j.lexicon.unregister(f,M,function(){j.callbacksBackend.nextGraphModification(b.deleted,[f,E]),L()}):L()})(function(){O?T(new Error(P)):T(null,!0)})},QueryEngine.prototype._executeClearGraph=function(f,w,T){var E=this;if("default"===f)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",T);else if("named"===f)E.lexicon.registeredGraphs(!0,function(M){if(null!=M){var j=!1;h.eachSeries(M,function(O,L){j?L():E.execute("DELETE { GRAPH <"+O+"> { ?s ?p ?o } } WHERE { GRAPH <"+O+"> { ?s ?p ?o } }",function(G,W){G?(j=G,L()):E.lexicon.resolveUri(O,function(V){-1!=V?E.lexicon.knownGraphs.delete(V,function(){L()}):(j="Cannot find graph "+O+" to clear it",L())})})},function(){T(!j)})}else T(!1,"Error deleting named graphs")});else if("all"===f)E=this,this.execute("CLEAR DEFAULT",function(M,j){M?T(!1,j):E.execute("CLEAR NAMED",T)});else if("uri"==f.token){var P=F.lexicalFormBaseUri(f,w);null!=P?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+P+"> { ?s ?p ?o } } WHERE { GRAPH <"+P+"> { ?s ?p ?o } }",function(M){E.callbacksBackend.ongoingModification=!1,T(M)})):T(!1,"wrong graph URI")}else T(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(f,w){if("singleGroup"===f)return!0;for(var T={},E=0;E<f.length;E++){var P=f[E];"var"===P.token?T[P.value]=!0:"aliased_expression"===P.token&&(T[P.alias.value]=!0)}for(E=0;E<w.length;E++){var M=w[E];if("var"===M.kind){if(null==T[M.value.value])return!1}else if("aliased"===M.kind&&M.expression&&"var"===M.expression.primaryexpression&&null==T[M.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(f,w,T,E,P){var M=this,j=w;null!=f&&f.length>0?M.copyDenormalizedBindings(w,E.outCache,function(O){for(var L=0;L<w.length;L++)for(var G=0;G<f.length;G++){var W=f[G],V=O[L],$=o.runFilter(W.expression,V,M,T,E);o.isEbvError($)?P($):j[L][W.as.value]=$}P(null,w)}):P(null,w)},QueryEngine.prototype.computeCosts=function(f,w,T){for(var E=0;E<f.length;E++)f[E]._cost=this.quadCost(f[E],w);T(f)},QueryEngine.prototype.quadCost=function(f,w){return 1},QueryEngine.prototype.registerDefaultNamespace=function(f,w){this.defaultPrefixes[f]=w},ie.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(J,ie,ue){var q=J("./utils"),l=q,F=J("./utils");QueryFilters={};var y="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,o,u,d,b,h,k){var v=[];e.filter&&"function"!=typeof e.filter&&(v=e.filter);var f=[];if(null==v||0===v.length||null!=e.length)return k(o);QueryFilters.preprocessExistentialFilters(v,o,h,d,b,function(w){F.eachSeries(w,function(T,E){QueryFilters.run(T.value,o,u,d,b,h,function(P){for(var M=[],j=0;j<P.length;j++){var O=P[j];null!=O.__nullify__?f.push(O):M.push(O)}o=M,E()})},function(){k(o.concat(f))})})},QueryFilters.preprocessExistentialFilters=function(e,o,u,d,b,h){var k=[];F.eachSeries(e,function(v,f){if("builtincall"!==v.value.expressionType||"exists"!==v.value.builtincall&&"notexists"!==v.value.builtincall)if("conditionalor"===v.value.expressionType||"conditionaland"===v.value.expressionType){var w=l.map(v.value.operands,function(M){return{value:M}});QueryFilters.preprocessExistentialFilters(w,o,u,d,b,function(M){v.value.operands=M.map(function(j){return j.value}),k.push(v),f()})}else"multiplicativeexpression"===v.value.expressionType?(w=l.map(v.value.factors,function(M){return{value:M}}),QueryFilters.preprocessExistentialFilters(w,o,u,d,b,function(M){v.value.factors=M.map(function(j){return j.value}),k.push(v),f()})):"additiveexpression"===v.value.expressionType?(w=l.map(v.value.summands,function(M){return{value:M}}),QueryFilters.preprocessExistentialFilters(w,o,u,d,b,function(M){v.value.summands=M.map(function(j){return j.value}),k.push(v),f()})):"relationalexpression"===v.value.expressionType?(w=[{value:v.value.op1},{value:v.value.op2}],QueryFilters.preprocessExistentialFilters(w,o,u,d,b,function(M){v.value.op1=M[0].value,v.value.op2=M[1].value,k.push(v),f()})):"irireforfunction"!==v.value.expressionType&&"custom"!==v.value.expressionType||null==v.value.args?(k.push(v),f()):(w=l.map(v.value.args,function(M){return{value:M}}),QueryFilters.preprocessExistentialFilters(w,o,u,d,b,function(M){v.value.args=M.map(function(j){return j.value}),k.push(v),f()}));else{var T=v.value.builtincall,E=v.value.args,P={};u.copyDenormalizedBindings(o,b.outCache,function(M){F.eachSeries(M,function(j,O){var L=l.clone(E[0],!0),G=u.abstractQueryTree.parseSelect({pattern:L},j);G=u.abstractQueryTree.bind(G.pattern,j),u.executeSelectUnit([{kind:"*"}],d,G,b,function(W){var V;V="exists"===T?QueryFilters.ebvBoolean(0!==W.length):QueryFilters.ebvBoolean(0===W.length);var $=[];for(var fe in j)$.push(JSON.stringify(j[fe]));$=$.sort().join(""),P[$]=V,O()})},function(){v.value.origArgs=v.value.args,v.value.args=P,k.push(v),f()})})}},function(){h(k)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var o=e.expressionType;if("relationalexpression"==o){var u=e.op1,d=e.op2;return QueryFilters.boundVars(u)+QueryFilters.boundVars(d)}if("conditionalor"==o||"conditionaland"==o){for(var b=[],h=0;h<e.operands;h++)b=b.concat(QueryFilters.boundVars(e.operands[h]));return b}if("builtincall"==o){if(null==e.args)return[];var k=[];for(h=0;h<e.args.length;h++)k=k.concat(QueryFilters.boundVars(e.args[h]));return k}if("multiplicativeexpression"==o){k=QueryFilters.boundVars(e.factor);for(h=0;h<e.factors.length;h++)k=k.concat(QueryFilters.boundVars(e.factors[h].expression));return k}if("additiveexpression"==o){for(k=QueryFilters.boundVars(e.summand),h=0;h<e.summands.length;h++)k=k.concat(QueryFilters.boundVars(e.summands[h].expression));return k}return"regex"==o?(k=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==o?QueryFilters.boundVars(e.expression):"atomic"==o?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,o,u,d,b,h,k){h.copyDenormalizedBindings(o,b.outCache,function(v){for(var f=[],w=0;w<o.length;w++){var T=v[w],E=QueryFilters.runFilter(e,T,h,d,b);if(E=QueryFilters.ebv(E),QueryFilters.isEbvError(E)){if(u){var P={__nullify__:!0,bindings:o[w]};f.push(P)}}else!0===E?f.push(o[w]):u&&(P={__nullify__:!0,bindings:o[w]},f.push(P))}k(f)})},QueryFilters.collect=function(e,o,u,d,b,h){b.copyDenormalizedBindings(o,d.outCache,function(k){for(var v=[],f=0;f<k.length;f++){var w=k[f],T=QueryFilters.runFilter(e,w,b,u,d);v.push({binding:o[f],value:T})}return h(v)})},QueryFilters.runDistinct=function(e,o){},QueryFilters.runAggregator=function(e,o,u,d,b){if(null==o||0===o.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return o[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return o[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var h=null,k=0;k<o.length;k++){var v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,b);QueryFilters.isEbvError(f)||(null===h||!0===QueryFilters.runLtFunction(h,f).value)&&(h=f)}return null===h?QueryFilters.ebvError():h}if("min"===e.expression.aggregateType){var w=null;for(k=0;k<o.length;k++)v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,b),QueryFilters.isEbvError(f)||(null===w||!0===QueryFilters.runGtFunction(w,f).value)&&(w=f);return null===w?QueryFilters.ebvError():w}if("count"===e.expression.aggregateType){var T={},E=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(k=0;k<o.length;k++)v=o[k],null==T[j=q.hashTerm(v)]&&(T[j]=!0,E++);else E=o.length;else for(k=0;k<o.length;k++)v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,b),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[j=q.hashTerm(f)]&&(T[j]=!0,E++):E++);return{token:"literal",type:y+"integer",value:""+E}}if("avg"===e.expression.aggregateType){T={};var P={token:"literal",type:y+"integer",value:"0"};for(E=0,k=0;k<o.length;k++)v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,b),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[j=q.hashTerm(f)]&&(T[j]=!0,QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f),E++)):QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f),E++));var M=QueryFilters.runDivFunction(P,{token:"literal",type:y+"integer",value:""+E});return M.value=""+M.value,M}if("sum"===e.expression.aggregateType){for(T={},P={token:"literal",type:y+"integer",value:"0"},k=0;k<o.length;k++){var j;v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,b),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[j=q.hashTerm(f)]&&(T[j]=!0,QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f))):QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f)))}return P.value=""+P.value,P}return QueryFilters.runFilter(aggregate.expression,o[0],d,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,o,u,d,b){if(null!=e.expressionType){var h=e.expressionType;if("relationalexpression"==h){var k=QueryFilters.runFilter(e.op1,o,u,d,b),v=QueryFilters.runFilter(e.op2,o,u,d,b);return QueryFilters.runRelationalFilter(e,k,v,o,u,d,b)}if("conditionalor"==h)return QueryFilters.runOrFunction(e,o,u,d,b);if("conditionaland"==h)return QueryFilters.runAndFunction(e,o,u,d,b);if("additiveexpression"==h)return QueryFilters.runAddition(e.summand,e.summands,o,u,d,b);if("builtincall"==h)return QueryFilters.runBuiltInCall(e.builtincall,e.args,o,u,d,b);if("multiplicativeexpression"==h)return QueryFilters.runMultiplication(e.factor,e.factors,o,u,d,b);if("unaryexpression"==h)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,o,u,d,b);if("irireforfunction"==h)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,o,u,d,b);if("regex"==h)return QueryFilters.runRegex(e.text,e.pattern,e.flags,o,u,d,b);if("custom"==h)return QueryFilters.runBuiltInCall(e.name,e.args,o,u,d,b);if("atomic"==h)return"var"==e.primaryexpression?o[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,b)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,o,u,d){return"literal"===e.token&&"literal"===o.token?e.lang==o.lang&&e.type==o.type&&e.value==o.value||(null!=e.type&&null!=o.type||QueryFilters.isSimpleLiteral(e)&&null!=o.type||!(!QueryFilters.isSimpleLiteral(o)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===o.token?q.lexicalFormBaseUri(e,d)==q.lexicalFormBaseUri(o,d):"blank"===e.token&&"blank"===o.token&&e.value==o.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==y+"integer"||e.type==y+"decimal"||e.type==y+"double"||e.type==y+"nonPositiveInteger"||e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==y+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==y+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==y+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==y+"integer"||e.type==y+"decimal"||e.type==y+"float"||e.type==y+"double"||e.type==y+"nonPositiveInteger"||e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,o){return!(!o||"literal"!=o.token)&&o.type==y+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==y+"integer"||e.type==y+"decimal"||e.type==y+"double"||e.type==y+"nonPositiveInteger"||e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger"){var o=parseFloat(e.value);return!isNaN(o)&&0!=parseFloat(e.value)}return e.type===y+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===y+"string"?""!=e.value:e.type===y+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:y+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:y+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,o,u,d,b,h,k){var v=e.operator;if("="===v)return QueryFilters.runEqualityFunction(o,u,d,b,h,k);if("!="===v){var f=QueryFilters.runEqualityFunction(o,u,d,b,h,k);return QueryFilters.isEbvError(f)||(f.value=!f.value),f}if("<"===v)return QueryFilters.runLtFunction(o,u,d);if(">"===v)return QueryFilters.runGtFunction(o,u,d);if("<="===v)return QueryFilters.runLtEqFunction(o,u,d);if(">="===v)return QueryFilters.runGtEqFunction(o,u,d);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==y+"integer")return parseInt(e.value);if(e.type==y+"decimal"||e.type==y+"float"||e.type==y+"double"||e.type==y+"nonPositiveInteger")return parseFloat(e.value);if(e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger")return parseInt(e.value);if(e.type!=y+"date"&&e.type!=y+"dateTime")return e.type==y+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==y+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return q.parseISO8601(e.value)}catch(o){return null}},QueryFilters.runOrFunction=function(e,o,u,d,b){for(var h=null,k=0;k<e.operands.length;k++){var v=QueryFilters.runFilter(e.operands[k],o,u,d,b);0==QueryFilters.isEbvError(v)&&(v=QueryFilters.ebv(v)),null==h?h=v:QueryFilters.isEbvError(v)?h=QueryFilters.isEbvError(h)?QueryFilters.ebvError():!0===h||QueryFilters.ebvError():!0===v?h=!0:QueryFilters.isEbvError(h)&&(h=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(h)},QueryFilters.runAndFunction=function(e,o,u,d,b){for(var h=null,k=0;k<e.operands.length;k++){var v=QueryFilters.runFilter(e.operands[k],o,u,d,b);0==QueryFilters.isEbvError(v)&&(v=QueryFilters.ebv(v)),null==h?h=v:QueryFilters.isEbvError(v)?h=(QueryFilters.isEbvError(h)||!0===h)&&QueryFilters.ebvError():!0===v?QueryFilters.isEbvError(h)&&(h=QueryFilters.ebvError()):h=!1}return QueryFilters.ebvBoolean(h)},QueryFilters.runEqualityFunction=function(e,o,u,d,b,h){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)){var k=QueryFilters.effectiveTypeValue(e),v=QueryFilters.effectiveTypeValue(o);return isNaN(k)||isNaN(v)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,d,h)):QueryFilters.ebvBoolean(k==v)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",o))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var f=q.compareDateComponents(e.value,o.value);return null!=f?0==f?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(o)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,d,h)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?1==d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,o){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",o)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",o)?QueryFilters.runGtFunction(e,o,[]):e.token&&"uri"===e.token&&o.token&&"uri"===o.token?QueryFilters.ebvBoolean(e.value>o.value):e.token&&"literal"===e.token&&o.token&&"literal"===o.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+o.value+o.type+o.lang):e.token&&"blank"===e.token&&o.token&&"blank"===o.token||e.value&&o.value?QueryFilters.ebvBoolean(e.value>o.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?-1==d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?-1!=d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?1!=d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,o,u,d,b,h){var k=QueryFilters.runFilter(e,u,d,b,h);if(QueryFilters.isEbvError(k))return QueryFilters.ebvError();var v=k;if(QueryFilters.isNumeric(k)){for(var f=0;f<o.length;f++){var w=QueryFilters.runFilter(o[f].expression,u,d,b,h);if(!QueryFilters.isNumeric(w))return QueryFilters.ebvFalse();"+"===o[f].operator?v=QueryFilters.runSumFunction(v,w):"-"===o[f].operator&&(v=QueryFilters.runSubFunction(v,w))}return v}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runSubFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runMultiplication=function(e,o,u,d,b,h){var k=QueryFilters.runFilter(e,u,d,b,h);if(QueryFilters.isEbvError(k))return k;var v=k;if(QueryFilters.isNumeric(k)){for(var f=0;f<o.length;f++){var w=QueryFilters.runFilter(o[f].expression,u,d,b,h);if(QueryFilters.isEbvError(w))return k;if(!QueryFilters.isNumeric(w))return QueryFilters.ebvFalse();"*"===o[f].operator?v=QueryFilters.runMulFunction(v,w):"/"===o[f].operator&&(v=QueryFilters.runDivFunction(v,w))}return v}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runDivFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runBuiltInCall=function(e,o,u,d,b,h){if("notexists"===e||"exists"===e){var k=[];for(var v in u)k.push(JSON.stringify(u[v]));return o[k=k.sort().join("")]}for(var f=[],w=0;w<o.length;w++)if("var"===o[w].token)f.push(o[w]);else{var T=QueryFilters.runFilter(o[w],u,d,b,h);if(QueryFilters.isEbvError(T))return T;f.push(T)}if("str"===e)return"literal"===f[0].token?{token:"literal",type:null,value:""+f[0].value}:"uri"===f[0].token?{token:"literal",type:null,value:f[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===f[0].token?null!=f[0].lang?{token:"literal",value:""+f[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===f[0].token){var E=f[0];return null!=E.type?"string"==typeof E.type?{token:"uri",value:E.type,prefix:null,suffix:null}:E.type:null==E.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var P=f[0],M=f[1],j=QueryFilters.RDFTermEquality(P,M,d,h);return QueryFilters.isEbvError(j)&&(j=!1),QueryFilters.ebvBoolean(j)}if("langmatches"===e){var O=f[0],L=f[1];return"literal"===O.token&&"literal"===L.token?"*"===L.value&&""!=O.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===O.value.toLowerCase().indexOf(L.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var G=f[0].value;return null==G?QueryFilters.ebvError():null!=u[G]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=d.customFns[e])return d.customFns[e](QueryFilters,f);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,o,u,d,b,h){var k=QueryFilters.runFilter(o,u,d,b,h);if(QueryFilters.isEbvError(k))return k;if("!"===e){var v=QueryFilters.ebv(k);return QueryFilters.isEbvError(v)?QueryFilters.ebvFalse():(v=!v,QueryFilters.ebvBoolean(v))}if("+"===e)return QueryFilters.isNumeric(k)?k:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(k)){var f={};for(var w in k)f[w]=k[w];return f.value=-f.value,f}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,o,u,d,b,h,k){if(null==e||(e=QueryFilters.runFilter(e,d,b,h,k),null==o)||(o=QueryFilters.runFilter(o,d,b,h,k),null!=u&&(u=QueryFilters.runFilter(u,d,b,h,k)),null==o||"literal"!==o.token||null!=u&&"literal"!==u.token))return QueryFilters.ebvError();if(o=o.value,u=null==u?null:u.value,null!=e&&"var"==e.token){if(null==d[e.value])return QueryFilters.ebvError();e=d[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==u?new RegExp(o):new RegExp(o,u.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,o,u){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,u)),e},QueryFilters.runIriRefOrFunction=function(e,o,u,d,b,h){if(null==o)return e;for(var k=[],v=0;v<o.length;v++)k.push(QueryFilters.runFilter(o[v],u,d,b,h));var f=q.lexicalFormBaseUri(e,h);if(f==y+"integer"||f==y+"decimal"||f==y+"double"||f==y+"nonPositiveInteger"||f==y+"negativeInteger"||f==y+"long"||f==y+"int"||f==y+"short"||f==y+"byte"||f==y+"nonNegativeInteger"||f==y+"unsignedLong"||f==y+"unsignedInt"||f==y+"unsignedShort"||f==y+"unsignedByte"||f==y+"positiveInteger"){if("literal"!==(w=k[0]).token)return QueryFilters.ebvError();if((w=QueryFilters.normalizeLiteralDatatype(w,d,h)).type==y+"integer"||w.type==y+"decimal"||w.type==y+"double"||w.type==y+"nonPositiveInteger"||w.type==y+"negativeInteger"||w.type==y+"long"||w.type==y+"int"||w.type==y+"short"||w.type==y+"byte"||w.type==y+"nonNegativeInteger"||w.type==y+"unsignedLong"||w.type==y+"unsignedInt"||w.type==y+"unsignedShort"||w.type==y+"unsignedByte"||w.type==y+"positiveInteger")return w.type=f,w;if("http://www.w3.org/2001/XMLSchema#boolean"==w.type)return 1==QueryFilters.ebv(w)?(w.type=f,w.value=1):(w.type=f,w.value=0),w;if("http://www.w3.org/2001/XMLSchema#float"==w.type||"http://www.w3.org/2001/XMLSchema#double"==w.type)return w.type=f,w.value=parseInt(w.value),w;if("http://www.w3.org/2001/XMLSchema#string"!=w.type&&null!=w.type||w.value.split(".").length>2||w.value.split("-").length>2||w.value.split("/").length>2||w.value.split("+").length>2||f==y+"decimal"&&(-1!=w.value.indexOf("e")||-1!=w.value.indexOf("E"))||!(f!=y+"int"&&f!=y+"integer"||-1==w.value.indexOf("e")&&-1==w.value.indexOf("E")&&-1==w.value.indexOf(".")))return QueryFilters.ebvError();try{return w.value=parseInt(parseFloat(w.value)),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}}else{if(f==y+"boolean")return"literal"===(w=k[0]).token&&null==w.type?"true"===w.value||"1"===w.value?QueryFilters.ebvTrue():"false"===w.value||"0"===w.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===w.token?QueryFilters.isEbvError(w)?w:QueryFilters.ebvBoolean(w):QueryFilters.ebvError();if(f==y+"string")return"literal"===(w=k[0]).token?(w=QueryFilters.normalizeLiteralDatatype(w,d,h)).type==y+"integer"||w.type==y+"decimal"||w.type==y+"double"||w.type==y+"nonPositiveInteger"||w.type==y+"negativeInteger"||w.type==y+"long"||w.type==y+"int"||w.type==y+"short"||w.type==y+"byte"||w.type==y+"nonNegativeInteger"||w.type==y+"unsignedLong"||w.type==y+"unsignedInt"||w.type==y+"unsignedShort"||w.type==y+"unsignedByte"||w.type==y+"positiveInteger"||w.type==y+"float"?(w.type=f,w.value=""+w.value,w):w.type==y+"string"?w:w.type==y+"boolean"?(QueryFilters.ebv(w)?(w.type=f,w.value="true"):(w.type=f,w.value="false"),w):w.type==y+"dateTime"||w.type==y+"date"?(w.type=f,"string"!=typeof w.value&&(w.value=q.iso8601(w.value)),w):null==w.type?(w.value=""+w.value,w.type=f,w):QueryFilters.ebvError():"uri"===w.token?{token:"literal",value:q.lexicalFormBaseUri(w,h),type:f,lang:null}:QueryFilters.ebvError();if(f==y+"dateTime"||f==y+"date"){if((w=k[0]).type==y+"dateTime"||w.type==y+"date")return w;if(w.type!=y+"string"&&null!=w.type)return QueryFilters.ebvError();try{return w.value=q.iso8601(q.parseISO8601(w.value)),w.type=f,w}catch(T){return QueryFilters.ebvError()}}else{if(f!=y+"float")return null!=d.customFns[f]?d.customFns[f](QueryFilters,k):QueryFilters.ebvError();var w;if("literal"!==(w=k[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(w=QueryFilters.normalizeLiteralDatatype(w,d,h)).type||"http://www.w3.org/2001/XMLSchema#int"==w.type)return w.type=f,w.value=parseFloat(w.value),w;if("http://www.w3.org/2001/XMLSchema#boolean"==w.type)return 1==QueryFilters.ebv(w)?(w.type=f,w.value=1):(w.type=f,w.value=0),w;if("http://www.w3.org/2001/XMLSchema#float"==w.type||"http://www.w3.org/2001/XMLSchema#double"==w.type)return w.type=f,w.value=parseFloat(w.value),w;if("http://www.w3.org/2001/XMLSchema#string"==w.type)try{return w.value=parseFloat(w.value),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}else{if(null!=w.type||w.value.split(".").length>2||w.value.split("-").length>2||w.value.split("/").length>2||w.value.split("+").length>2)return QueryFilters.ebvError();try{return w.value=parseFloat(w.value),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}}}}},ie.exports={QueryFilters}},{"./utils":140}],135:[function(J,ie,ue){var q=J("./utils"),l=J("./utils"),F={variablesInBGP:function(y){var e=y.variables;if(e)return e;var o=y.value||y;for(var u in e=[],o)o[u]&&"var"===o[u].token?e.push(o[u].value):o[u]&&"blank"===o[u].token&&e.push("blank:"+o[u].value);return y.variables=e,e},connected:function(y,e){for(var o="/"+y.vars.join("/")+"/",u=0;u<e.vars.length;u++)if(-1!=o.indexOf("/"+e.vars[u]+"/"))return!0;return!1},variablesIntersectionBGP:function(y,e){return function(o,u){for(var d={},b=0;b<o.lenght;b++)d[o[b]]=1;for(b=0;b<u.length;b++){var h=d[u[b]]||0;h++,d[u[b]]=h}var k=[];for(var v in d)2==d[v]&&k.push(d[v]);return k}(F.variablesInBGP(y),F.variablesInBGP(e))},executeAndBGPsGroups:function(y){for(var e={},o={},u=0,d=function(P,M){for(var j=0;j<P.length;j++){var O="/"+P[j]+"/";if(-1!=M.indexOf(O))return!0}return!1},b=function(P,M,j,O){var L=[],G="",W="";for(var V in M)G+=V,L=L.concat(e[V]),W+=o[V];W=W+w.join("/")+"/",L.push(P),j[G]=L,O[G]=W},h=0;h<y.length;h++){var k=y[h],v={},f={},w=F.variablesInBGP(k),T={};for(var E in o)d(w,o[E])?T[E]=!0:(v[E]=e[E],f[E]=o[E]);0===q.size(T)?(v["g"+u]=[k],f["g"+u]="/"+w.join("/")+"/",u++):b(k,T,v,f),e=v,o=f}return q.values(e)},intersectionSize:function(y,e){for(var o=e.i.split("_"),u=0;u<o.length;u++)if(""!=o[u]&&-1!=y.i.indexOf("_"+o[u]+"_"))return 1;return 0},createJoinTree:function(y,e){for(var o="/"+y.vars.join("/")+"/",u=y.vars.concat([]),d=[],b=0;b<e.vars.length;b++)-1!=o.indexOf("/"+e.vars[b]+"/")?0==e.vars[b].indexOf("_:")?d.push("blank:"+e.vars[b]):d.push(e.vars[b]):u.push(e.vars[b]);var h=e.i.split("_"),k=y.i.split("_"),v={};for(b=0;b<h.length;b++)""!=h[b]&&(v[h[b]]=!0);for(b=0;b<k.length;b++)""!=k[b]&&(v[k[b]]=!0);var f=q.keys(v);return{left:y,right:e,cost:y.cost+e.cost,i:"_"+f.sort().join("_")+"_",vars:u,join:d}},executeBushyTree:function(y,e,o,u,d){null==y.left?F.executeEmptyJoinBGP(y.right,e,o,u,d):null==y.right?F.executeEmptyJoinBGP(y.left,e,o,u,d):F.executeBushyTree(y.left,e,o,u,function(b){null!=b?F.executeBushyTree(y.right,e,o,u,function(h){d(null!=h?F.joinBindings2(y.join,b,h):null)}):d(null)})},executeAndBGPsDPSize:function(y,e,o,u,d){var b=F.executeAndBGPsGroups(y),h=[];l.eachSeries(b,function(k,v){o.computeCosts(k,u,function(f){var w={},T={},E={},P=1,M=null,j={};E[1]=[];for(var O=0;O<f.length;O++){var L=[];for(var G in delete f[O].variables,f[O])"_cost"!=G&&("var"===f[O][G].token||"blank"===f[O][G].token)&&L.push(f[O][G].value);T["_"+O+"_"]={left:f[O],right:null,cost:f[O]._cost,i:"_"+O+"_",vars:L};var W={left:f[O],right:null,cost:f[O]._cost,i:"_"+O+"_",vars:L};w["_"+O+"_"]=W,delete f[O]._cost,j["_"+O+"_"]=!0,E[1].push("_"+O+"_"),(null==M||M.cost>W.cost)&&(M=W)}for(var V=2;V<=f.length;V++)for(var $=1;$<V;$++){var fe=V-$,ce=E[""+$]||[],xe=E[""+fe]||[];for(O=0;O<ce.length;O++)for(var te=0;te<xe.length;te++)if(ce[O]!==xe[te]){var se=T[ce[O]],ne=T[xe[te]];if(0==F.intersectionSize(se,ne)&&F.connected(se,ne)){P=V;var ve=w[se.i],Ce=w[ne.i],me=F.createJoinTree(ve,Ce);if(!j[me.i]){j[me.i]=!0;var de=me.cost+1;null!=w[me.i]&&(de=w[me.i].cost);var ye=E[V]||[];ye.push(me.i),T[me.i]=me,E[V]=ye,de>me.cost&&(P===V&&(M=me),w[me.i]=me)}}}}h.push(M),v()})},function(){var k=null;l.eachSeries(h,function(v,f){F.executeBushyTree(v,e,o,u,function(w){w?null==k?(k=w,f()):(k=F.crossProductBindings(k,w),f()):f("Error executing bushy tree")})},function(v){v?d(null,v):d(k)})})},executeEmptyJoinBGP:function(y,e,o,u,d){return F.executeBGPDatasets(y,e,o,u,d)},executeBGPDatasets:function(y,e,o,u,d){var b={};if(null==y.graph){var h=[];l.eachSeries(e.implicit,function(v,f){null==b[v.oid]?(b[v.oid]=!0,y.graph=v,o.rangeQuery(y,u,function(w){w=F.buildBindingsFromRange(w,y),h.push(w),f()})):f()},function(){var v=F.unionManyBindings(h);d(v)})}else if("var"===y.graph.token){var k=y.graph.value;h=[],l.eachSeries(e.named,function(v,f){null==b[v.oid]?(b[v.oid]=!0,y.graph=v,null!=h?o.rangeQuery(y,u,function(w){if(null!=w){w=F.buildBindingsFromRange(w,y);for(var T=0;T<w.length;T++)w[T][k]=v.oid;h.push(w)}else h=null;f()}):f()):f()},function(){if(null==h)d(null);else{var v=F.unionManyBindings(h);d(v)}})}else o.rangeQuery(y,u,function(v){null!=v?(v=F.buildBindingsFromRange(v,y),d(v)):d(null)})},buildBindingsFromRange:function(y,e){F.variablesInBGP(e);var o=e.value||e,u={};for(f in o)o[f]&&"var"===o[f].token?u[f]=o[f].value:o[f]&&"blank"===o[f].token&&(u[f]="blank:"+o[f].value);var d=[];if(null!=y)for(var b=0;b<y.length;b++){var h={},k=y[b],v=!1;for(var f in u){var w=k[f];if(null!=h[u[f]]&&h[u[f]]!==w){v=!0;break}h[u[f]]=w}v||d.push(h)}return d},areCompatibleBindings:function(y,e){for(var o in y)if(null!=e[o]&&e[o]!=y[o])return!1;return!0},mergeBindings:function(y,e){var o={};for(var u in y)o[u]=y[u];for(var u in e)o[u]=e[u];return o},joinBindings2:function(y,e,o){for(var u,d,b,h,k={},v=[],f=0;f<e.length;f++){u=e[f],h=k;for(var w=0;w<y.length;w++)d=u[y[w]],w==y.length-1?((b=h[d]||[]).push(u),h[d]=b):(b=h[d]||{},h[d]=b,h=b)}for(f=0;f<o.length;f++)for(u=o[f],h=k,w=0;w<y.length;w++)if(null!=h[d=u[y[w]]])if(w==y.length-1)for(var T=0;T<h[d].length;T++)v.push(F.mergeBindings(h[d][T],u));else h=h[d];return v},joinBindings:function(y,e){for(var o=[],u=0;u<y.length;u++)for(var d=y[u],b=0;b<e.length;b++){var h=e[b];F.areCompatibleBindings(d,h)&&o.push(F.mergeBindings(d,h))}return o},augmentMissingBindings:function(y,e){for(var o in e)null==y[o]&&(y[o]=null);return y},leftOuterJoinBindings:function(y,e){for(var o=[],u=0;u<y.length;u++){for(var d=y[u],b=!1,h=0;h<e.length;h++){var k=e[h];F.areCompatibleBindings(d,k)&&(b=!0,o.push(F.mergeBindings(d,k)))}!1===b&&(F.augmentMissingBindings(d,k),o.push(d))}return o},crossProductBindings:function(y,e){for(var o=[],u=0;u<y.length;u++)for(var d=y[u],b=0;b<e.length;b++){var h=e[b];o.push(F.mergeBindings(d,h))}return o},unionBindings:function(y,e){return y.concat(e)},unionManyBindings:function(y){for(var e=[],o=0;o<y.length;o++){var u=y[o];e=F.unionBindings(e,u)}return e}};ie.exports={QueryPlan:F}},{"./utils":140}],136:[function(J,ie,ue){var q=J("./network_transport").NetworkTransport,l=J("./rvn3_parser").RVN3Parser,F=J("./jsonld_parser").JSONLDParser,y=J("./utils"),e=function(o){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":l.parser,"text/n3":l.parser,"application/ld+json":F.parser,"application/json":F.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=o)for(var u in o.parsers)this.parsers[u]=o.parsers[u];if(o&&null!=o.precedences)for(var u in this.precedences=o.precedences,o.parsers)y.include(this.precedences,u)||this.precedences.push(u);this.acceptHeaderValue="";for(var d=0;d<this.precedences.length;d++)this.acceptHeaderValue=0!=d?this.acceptHeaderValue+","+this.precedences[d]:this.acceptHeaderValue+this.precedences[d]};e.prototype.registerParser=function(o,u){this.parsers[o]=u,this.precedences.push(o)},e.prototype.unregisterParser=function(o){delete this.parsers[o];for(var u=[],d=0;d<this.precedences.length;d++)this.precedences[d]!=o&&u.push(this.precedences[d]);this.precedences=u},e.prototype.setAcceptHeaderPrecedence=function(o){this.precedences=o},e.prototype.load=function(o,u,d){var b=this;q.load(o,this.acceptHeaderValue,function(h,k){if(h)d(h);else{var v=k.headers["Content-Type"]||k.headers["content-type"],f=k.data;if(null!=v){for(var w in v=v.split(";")[0],b.parsers)if(-1!=w.indexOf("/")){var T=w.split("/");if("*"===T[1]){if(-1!=v.indexOf(T[0]))return b.tryToParse(b.parsers[w],u,f,{documentURI:o},d)}else{if(-1!=v.indexOf(w))return b.tryToParse(b.parsers[w],u,f,{documentURI:o},d);if(-1!=v.indexOf(T[1]))return b.tryToParse(b.parsers[w],u,f,{documentURI:o},d)}}else if(-1!=v.indexOf(w))return b.tryToParse(b.parsers[w],u,f,{documentURI:o},d);d(new Error("Unknown media type : "+v))}else d(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(o,u,d,b){try{var h=this;J("fs").readFile(d.split("file:/")[1],function(k,v){k?b(k):(v=v.toString("utf8"),h.tryToParse(o,u,v,{documentURI:d},b))})}catch(k){b(k)}},e.prototype.tryToParse=function(o,u,d,b,h){try{"string"==typeof d&&(d=y.normalizeUnicodeLiterals(d)),o.parse(d,u,b,h)}catch(k){console.log(k.message),console.log(k.stack),h(k)}},ie.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:3}],137:[function(J,ie,ue){var q=J("./utils"),l=J("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var F={};for(var y in this)q.include(this.interfaceProperties,y)||"function"==typeof this[y]||"defaultNs"===y||"interfaceProperties"===y||(F[y]=this[y]);return F},RDFModel.UrisMap.prototype.get=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[F]},RDFModel.UrisMap.prototype.remove=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[F],null},RDFModel.UrisMap.prototype.set=function(F,y){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";this[F]=y},RDFModel.UrisMap.prototype.setDefault=function(F){this.defaultNs=F},RDFModel.UrisMap.prototype.addAll=function(F,y){for(var e in F)q.include(this.interfaceProperties,e)||(null!=this[e]?!0===y&&(this[e]=F[e]):this[e]=F[e]);return this},RDFModel.UrisMap.prototype.resolve=function(F){var y=F.split(":"),e=y[0],o=y[1];return""===e?null==this.defaultNs?null:this.defaultNs+o:null!=this[e]?this[e]+o:null},RDFModel.UrisMap.prototype.shrink=function(F){for(var y in this){var e=this[y];if(0===F.indexOf(e)&&""!==e&&"defaultNs"!=y)return y+":"+F.split(e)[1]}return F},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(F,y){this.prefixes.addAll(F.prefixes,y),this.terms.addAll(F.terms,y)},RDFModel.Profile.prototype.resolve=function(F){return-1!=F.indexOf(":")?this.prefixes.resolve(F):null!=this.terms[F]?this.terms.resolve(F):null},RDFModel.Profile.prototype.setDefaultPrefix=function(F){this.prefixes.setDefault(F)},RDFModel.Profile.prototype.setDefaultVocabulary=function(F){this.terms.setDefault(F)},RDFModel.Profile.prototype.setPrefix=function(F,y){this.prefixes.set(F,y)},RDFModel.Profile.prototype.setTerm=function(F,y){this.terms.set(F,y)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var F=this;for(var y in this.filters={s:function(e){return function(o){return o.subject.equals(e)}},p:function(e){return function(o){return o.predicate.equals(e)}},o:function(e){return function(o){return o.object.equals(e)}},sp:function(e,o){return function(u){return u.subject.equals(e)&&u.predicate.equals(o)}},so:function(e,o){return function(u){return u.subject.equals(e)&&u.object.equals(o)}},po:function(e,o){return function(u){return u.predicate.equals(e)&&u.object.equals(o)}},spo:function(e,o,u){return function(d){return d.subject.equals(e)&&d.predicate.equals(o)&&d.object.equals(u)}},describes:function(e){return function(o){return o.subject.equals(e)||o.object.equals(e)}},type:function(e){var o=F.resolve("rdf:type");return function(u){return u.predicate.equals(o)&&u.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(y,RDFModel.defaultContext[y])},RDFModel.RDFEnvironment.prototype=q.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var F=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,F},RDFModel.RDFEnvironment.prototype.createNamedNode=function(F){var y=this.resolve(F);return null!=y?new RDFModel.NamedNode(y):new RDFModel.NamedNode(F)},RDFModel.RDFEnvironment.prototype.createLiteral=function(F,y,e){return null!=e?new RDFModel.Literal(F,y,e.toString()):new RDFModel.Literal(F,y,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(F,y,e){return new RDFModel.Triple(F,y,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(F){var y=new RDFModel.Graph;if(null!=F)for(var e=0;e<F.length;e++)y.add(F[e]);return y},RDFModel.RDFEnvironment.prototype.createAction=function(F,y){return function(e){return F(e)?y(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(F){if(!0===F)return new RDFModel.RDFEnvironment.Profile;var y=new RDFModel.RDFEnvironment.Profile;return y.importProfile(this),y},RDFModel.RDFEnvironment.prototype.createTermMap=function(F){if(!0===F)return new RDFModel.UrisMap;var y=this.terms.values(),e=new RDFModel.UrisMap;for(var o in y)e[o]=y[o];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(F){if(!0===F)return new RDFModel.UrisMap;var y=this.prefixes.values(),e=new RDFModel.UrisMap;for(var o in y)e[o]=y[o];return e},RDFModel.RDFNode=function(F){this.interfaceName=F,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(F){if(null==F.interfaceName)return this.valueOf()==F;for(var y in this.attributes){var e=this.attributes[y];if(this[e]!=F[e])return!1}return!0},RDFModel.BlankNode=function(F){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+F,this.bnodeId=F},RDFModel.BlankNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(F,y,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=F,null!=y?this.language=y:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var F='"'+this.nominalValue+'"';return null!=this.language?F=F+"@"+this.language:(null!=this.datatype||this.type)&&(F=F+"^^<"+(this.datatype||this.type)+">"),F},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return l.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(F){RDFModel.RDFNode.call(this,"NamedNode"),null!=F.value?this.nominalValue=F.value:this.nominalValue=F},RDFModel.NamedNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(F,y,e){this.subject=F,this.predicate=y,this.object=e},RDFModel.Triple.prototype.equals=function(F){return this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(F){for(var y=0;y<this.actions.length;y++)F=this.actions[y](F);var e=F.subject.toString()+F.predicate.toString()+F.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(F)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(F,y){if(this.actions.push(F),1==y)for(var e=0;e<this.triples.length;e++)this.triples[e]=F(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(F){for(var y=F.toArray(),e=0;e<y.length;e++)this.add(y[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(F){for(var y=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(F)){var o=F.subject.toString()+F.predicate.toString()+F.object.toString();delete this.duplicates[o],y=e;break}return null!=y&&this.triples.splice(y,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(F){for(var y=0;y<this.triples.length;y++)if(!0===F(this.triples[y],this))return!0;return!1},RDFModel.Graph.prototype.every=function(F){for(var y=0;y<this.triples.length;y++)if(!1===F(this.triples[y],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(F){for(var y=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===F(this.triples[e],this)&&y.add(this.triples[e]);return y},RDFModel.Graph.prototype.forEach=function(F){for(var y=0;y<this.triples.length;y++)F(this.triples[y],this)},RDFModel.Graph.prototype.merge=function(F){for(var y=new RDFModel.Graph,e=0;e<this.triples.length;e++)y.add(this.triples[e]);return y},RDFModel.Graph.prototype.match=function(F,y,e,o){for(var u=new RDFModel.Graph,d=0,b=0;b<this.triples.length;b++){var h=this.triples[b];if((null==F||h.subject.equals(F))&&(null==y||h.predicate.equals(y))&&(null==e||h.object.equals(e))){if(!(null==o||d<o))return u;d++,u.add(h)}}return u},RDFModel.Graph.prototype.removeMatches=function(F,y,e){for(var o=[],u=0;u<this.triples.length;u++){var d=this.triples[u];(null==F||d.subject.equals(F))&&(null==y||d.predicate.equals(y))&&(null==e||d.object.equals(e))&&o.push(d)}for(u=0;u<o.length;u++)this.remove(o[u]);return this},RDFModel.Graph.prototype.toNT=function(){var F="";return this.forEach(function(y){F+=y.toString()}),F},RDFModel.buildRDFResource=function(F,y,e,o){if("blank"===F.token)return RDFModel.buildBlankNode(F,y,e,o);if("literal"===F.token)return RDFModel.buildLiteral(F,y,e,o);if("uri"===F.token)return RDFModel.buildNamedNode(F,y,e,o);if("var"===F.token){var u=y[F.value];return null!=u?RDFModel.buildRDFResource(u,y,e,o):null}return null},RDFModel.buildBlankNode=function(F,y,e,o){return null!=F.valuetmp&&(F.value=F.valuetmp),0===F.value.indexOf("_:")&&(F.value=F.value.split("_:")[1]),new RDFModel.BlankNode(F.value)},RDFModel.buildLiteral=function(F,y,e,o){return new RDFModel.Literal(F.value,F.lang,F.type)},RDFModel.buildNamedNode=function(F,y,e,o){if(null!=F.value)return new RDFModel.NamedNode(F);if(null!=F.prefix){var u=e.resolveNsInEnvironment(F.prefix,o);return F.value=u+F.suffix,new RDFModel.NamedNode(F)}return new RDFModel.NamedNode(F)},RDFModel.rdf=new RDFModel.RDFEnvironment,ie.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(J,ie,ue){var q=J("n3").Parser,l={};function F(y){switch(y[0]){case'"':if(y.indexOf("^^")>0){var e=y.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:y};case"_":return{blank:y.replace("b","")};default:return{token:"uri",value:y,prefix:null,suffix:null}}}l.parser={async:!0,parse:function(y,e,o,u){u||(u=o,o=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),o&&o.baseURI&&(o.documentIRI=o.baseURI);var d=[];new q(o).parse(y,function(b,h){b?u(b):h?d.push({subject:F(h.subject),predicate:F(h.predicate),object:F(h.object),graph:e}):u(!1,d)})},resetBlankNodeIds:function(){q._resetBlankNodeIds()}},ie.exports={RVN3Parser:l}},{n3:54}],139:[function(J,ie,ue){var q=J("./query_engine").QueryEngine,l=J("./quad_backend").QuadBackend,F=J("./persistent_quad_backend").PersistentQuadBackend,y=J("./lexicon").Lexicon,e=J("./persistent_lexicon").PersistentLexicon,o=J("./rdf_model"),u=J("./utils");Store=function(d,b){var h=null,k=null;if(0==arguments.length)k={};else if(1==arguments.length)k={},h=d;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";k=d,h=b}null==k.treeOrder&&(k.treeOrder=15);var v=y,f=l;!0===k.persistent&&(v=e,f=F),this.functionMap={};var w=this;this.customFns={},new v(function(T){var E=function(){new f(k,function(P){var M=function(){k.backend=P,k.lexicon=T,w.engine=new q(k),h(null,w)};k.overwrite?P.clear(M):M()})};!0===k.overwrite?T.clear(E):E()},k.name)},Store.prototype.rdf=o.rdf,Store.prototype.rdf.api=o,Store.prototype.registerCustomFunction=function(d,b){this.customFns[d]=b,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var d;if(1===arguments.length){d=arguments[0];var b=function(){}}else 2===arguments.length&&(d=arguments[0],b=arguments[1]);this.engine.execute(d,b)}},Store.prototype.executeWithEnvironment=function(){var d,b,h;if(3===arguments.length){d=arguments[0];var k=function(){};b=arguments[1],h=arguments[2]}else 4===arguments.length&&(d=arguments[0],k=arguments[3],b=arguments[1],h=arguments[2]);b=u.map(b,function(v){return{token:"uri",value:v}}),h=u.map(h,function(v){return{token:"uri",value:v}}),this.engine.execute(d,k,b,h)},Store.prototype.graph=function(){var d=null,b=null;if(1===arguments.length)b=arguments[0]||function(){},d=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";b=arguments[1]||function(){},d=arguments[0]}null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",b)},Store.prototype.node=function(){var d=null,b=null,h=null;if(2===arguments.length)h=arguments[0],b=arguments[1]||function(){},d=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";h=arguments[0],d=arguments[1],b=arguments[2]||function(){}}null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),null!=this.rdf.resolve(h)&&(h=this.rdf.resolve(h)),this.engine.execute("CONSTRUCT { <"+h+"> ?p ?o } WHERE { GRAPH <"+d+"> { <"+h+"> ?p ?o } }",b)},Store.prototype.startObservingNode=function(){var d,b,h;2===arguments.length?(d=arguments[0],h=arguments[1],this.engine.callbacksBackend.observeNode(d,h,function(){})):3===arguments.length&&(d=arguments[0],b=arguments[1],h=arguments[2],this.engine.callbacksBackend.observeNode(d,b,h,function(){}))},Store.prototype.stopObservingNode=function(d){this.engine.callbacksBackend.stopObservingNode(d)},Store.prototype.startObservingQuery=function(){var d=arguments[0],b=arguments[1],h=arguments[2];null!=h?this.engine.callbacksBackend.observeQuery(d,b,h):this.engine.callbacksBackend.observeQuery(d,b,function(){})},Store.prototype.stopObservingQuery=function(d){this.engine.callbacksBackend.stopObservingQuery(d)},Store.prototype.subscribe=function(d,b,h,k,v){var f=this,w=function(T,E){var P=[],M={blanks:{},outCache:{}},j=[];u.each(E,function(O){var L=o.buildRDFResource(O.subject,j,f.engine,M),G=o.buildRDFResource(O.predicate,j,f.engine,M),W=o.buildRDFResource(O.object,j,f.engine,M);null!=L&&null!=G&&null!=W&&(O=new o.Triple(L,G,W),P.push(O))}),v(T,P)};this.functionMap[v]=w,this.engine.callbacksBackend.subscribe(d,b,h,k,w,function(){})},Store.prototype.unsubscribe=function(d){var b=this.functionMap[d];this.engine.callbacksBackend.unsubscribe(b),delete this.functionMap[d]},Store.prototype.setPrefix=function(d,b){this.rdf.setPrefix(d,b)},Store.prototype.setDefaultPrefix=function(d){this.rdf.setDefaultPrefix(d)},Store.prototype.insert=function(){var d,b,h;if(1===arguments.length)b=arguments[0],h=function(){};else if(2===arguments.length)b=arguments[0],h=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";b=arguments[0],d=this.rdf.createNamedNode(arguments[1]),h=arguments[2]||function(){}}var k="",v=this;b.forEach(function(f){k=k+v._nodeToQuery(f.subject)+v._nodeToQuery(f.predicate)+v._nodeToQuery(f.object)+"."}),k=null!=d?"INSERT DATA { GRAPH "+this._nodeToQuery(d)+" { "+k+" } }":"INSERT DATA { "+k+" }",this.engine.execute(k,h)},Store.prototype._nodeToQuery=function(d){if("NamedNode"===d.interfaceName){var b=this.rdf.resolve(d.valueOf());return null!=b?"<"+b+">":"<"+d.valueOf()+">"}return d.toString()},Store.prototype.delete=function(){var d,b,h;if(1===arguments.length)b=arguments[0],h=function(){};else if(2===arguments.length)b=arguments[0],h=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";b=arguments[0],d=this.rdf.createNamedNode(arguments[1]),h=arguments[2]||function(){}}var k="",v=this;b.forEach(function(f){k=k+v._nodeToQuery(f.subject)+v._nodeToQuery(f.predicate)+v._nodeToQuery(f.object)+"."}),k=null!=d?"DELETE DATA { GRAPH "+this._nodeToQuery(d)+" { "+k+" } }":"DELETE DATA { "+k+" }",this.engine.execute(k,h)},Store.prototype.clear=function(){var d;if(0===arguments.length){d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var b=function(){}}else if(1===arguments.length)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";d=this.rdf.createNamedNode(arguments[0]),b=arguments[1]||function(){}}var h="CLEAR GRAPH "+this._nodeToQuery(d);this.engine.execute(h,b)},Store.prototype.setBatchLoadEvents=function(d){this.engine.eventsOnBatchLoad=d},Store.prototype.registerDefaultNamespace=function(d,b){this.rdf.prefixes.set(d,b),this.engine.registerDefaultNamespace(d,b)},Store.prototype.registerDefaultProfileNamespaces=function(){var d=this.rdf.prefixes.values();for(var b in d)this.registerDefaultNamespace(b,d[b])},Store.prototype.load=function(){var d,b,h,k,v={};if(3===arguments.length)h=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0],b=arguments[1],k=arguments[2]||function(){};else if(4===arguments.length)d=arguments[0],b=arguments[1],"string"==typeof(v=arguments[2])?(h=this.rdf.createNamedNode(v),v={}):(h=this.rdf.createNamedNode(v.graph||this.engine.lexicon.defaultGraphUri),delete v.graph),k=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===d){var f="LOAD <"+(b=this.rdf.createNamedNode(b)).valueOf()+"> INTO GRAPH <"+h.valueOf()+">";this.engine.execute(f,k)}else{var w=this,T=this.engine.rdfLoader.parsers[d];if(!T)return k(new Error("Cannot find parser for the provided media type:"+d));var E=[T,{token:"uri",value:h.valueOf()},b,v,function(P,M){P?k(P,M):w.engine.batchLoad(M,function(j){null!=j?k(null,j):k(new Error("Error batch-loading triples."))})}];b&&"string"==typeof b&&0===b.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,E):this.engine.rdfLoader.tryToParse.apply(null,E)}},Store.prototype.registerParser=function(d,b){this.engine.rdfLoader.registerParser(d,b)},Store.prototype.registeredGraphs=function(d){this.engine.lexicon.registeredGraphs(!0,function(b){var h=u.map(b,function(k){return new o.NamedNode(k)});d(null,h)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(d){NetworkTransport=d},Store.prototype.close=function(d){null==d&&(d=function(){}),this.engine.close?this.engine.close(d):d()},Store.VERSION="0.9.18-alpha.5",Store.yieldFrequency=function(d){u.yieldFrequency(d)},ie.exports.Store=Store,ie.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},ie.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(J){setTimeout(J,0)},spin=0,yieldFrequency=100,nextTick=function(J){++spin<yieldFrequency?J():(spin=0,slowNextTick(J))},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var ie="l"+J.value;return ie+=J.type||"",ie+=J.lang||""}}catch(q){if("object"==typeof J){var ue="";for(p in J)ue=ue+p+J[p];return ue}return J}},lexicalFormBaseUri=function(J,ie){var ue=null;if(ie=ie||{},null==J.value){var q=J.prefix,l=J.suffix,F=ie.namespaces[q];ue=null!=F?F+l:q+":"+l}else ue=J.value;return null===ue?null:(-1==ue.indexOf(":")&&(ue=(ie.base||"")+ue),ue)};parseISO8601=function(J){return Date.parse(J)},Date.prototype.toISOString||function(){function J(ie){return ie<10?"0"+ie:ie}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+J(this.getUTCMonth()+1)+"-"+J(this.getUTCDate())+"T"+J(this.getUTCHours())+":"+J(this.getUTCMinutes())+":"+J(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(J){return J.toISOString()},compareDateComponents=function(J,ie){var ue=parseISO8601(J),q=parseISO8601(ie);return ue==q?0:ue<q?-1:1},lexicalFormLiteral=function(J,ie){var ue=J.value,q=J.lang,l=J.type,F=null;if(null!=ue&&null!=l&&"string"!=typeof l){var y=l.value;if(null==y){var e=l.prefix,o=l.suffix,u=ie.namespaces[e];J.type=u+o,y=u+o}F=-1!=y.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+y+">":'"'+J.value+'"^^<'+y+">"}else F=null==q&&null==l?'"'+ue+'"':null==l?'"'+ue+'"@'+q:-1!=l.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+l+">":'"'+J.value+'"^^<'+l+">";return F},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(J){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var ie=_dereq_("sqlite3"),ue=_dereq_("indexeddb-js"),q=new ie.Database(":memory:"),l=ue.makeScope("sqlite3",q);J.indexedDB=l.indexedDB,J.IDBKeyRange=l.IDBKeyRange}else{var F;(F="undefined"==typeof window?self:window).indexedDB=F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,F.IDBKeyRange=F.IDBKeyRange||F.webkitIDBKeyRange||F.msIDBKeyRange,F.indexedDB?(J.indexedDB=F.indexedDB,J.IDBKeyRange=F.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function J(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return J()+J()+"-"+J()+"-"+J()+"-"+J()+"-"+J()+J()+J()},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var ie="l"+J.value;return ie+=J.type||"",ie+=J.lang||""}}catch(q){if("object"==typeof J){var ue="";for(p in J)ue=ue+p+J[p];return ue}return J}};var reject=function(J,ie){for(var ue=[],q=0;q<J.length;q++)ie(J[q])&&ue.push(J[q]);return ue},include=function(J,ie){for(var ue=0;ue<J.length;ue++)if(J[ue]===ie)return!0;return!1},each=function(J,ie){if(J.forEach)J.forEach(ie);else for(var ue=0;ue<J.length;ue++)ie(J[ue])},map=function(J,ie){if(J.map)return J.map(ie);for(var ue=[],q=0;q<J.length;q++)ue[q]=ie(J[q]);return ue},keys=function(J){var ie=[];for(var ue in J)ie.push(ue);return ie},values=function(J){var ie=[];for(var ue in J)ie.push(J[ue]);return ie},size=function(J){if(J.length)return J.length;var ie=0;for(var ue in J)ie++;return ie};clone=function(J){return JSON.parse(JSON.stringify(J))};var isObject=function(J){var ie=typeof J;return"function"==ie||J&&"object"==ie||!1},create=function(){function J(){}return function(ie){if(isObject(ie)){J.prototype=ie;var ue=new J;J.prototype=null}return ue||void 0}}(),whilst=function(J,ie,ue){J()?ie(function(q){if(q)return ue(q);whilst(J,ie,ue)}):ue()},eachSeries=function(J,ie,ue){if(ue=ue||function(){},!J.length)return ue();var q=0,l=function(){ie(J[q],function(F){F?(ue(F),ue=function(){}):(q+=1)>=J.length?ue():nextTick(l)})};l()},eachParallel=function(J,ie,ue){if(ue=ue||function(){},!J.length)return ue();for(var q=!1,l=0,F=function(e){if(e)throw q=!0,new Error(e);q||++l===J.length&&ue()},y=0;y<J.length;y++)!function(e,o,u,d){nextTick(function(){try{d(e[o],function(){u()})}catch(b){u(b)}})}(J,y,F,ie)},reduce=function(J,ie,ue,q){eachSeries(J,function(l,F){ue(ie,l,function(y,e){ie=e,F(y)})},function(l){q(l,ie)})},seq=function(){var J=arguments;return function(){var ie=this,ue=Array.prototype.slice.call(arguments),q=ue.pop();reduce(J,ue,function(l,F,y){F.apply(ie,l.concat([function(){var e=arguments[0],o=Array.prototype.slice.call(arguments,1);y(e,o)}]))},function(l,F){q.apply(ie,[l].concat(F))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(J){yieldFrequency=J}}}).call(this)}).call(this,require("_process"))},{_process:62}]},{},[139])(139)}),function(J,ie){"object"==typeof exports&&"undefined"!=typeof module?module.exports=ie():"function"==typeof define&&define.amd?define(ie):(J=J||self).CodeMirror=ie()}(this,function(){"use strict";var J=navigator.userAgent,ie=navigator.platform,ue=/gecko\/\d/i.test(J),q=/MSIE \d/.test(J),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(J),F=/Edge\/(\d+)/.exec(J),y=q||l||F,e=y&&(q?document.documentMode||6:+(F||l)[1]),o=!F&&/WebKit\//.test(J),u=o&&/Qt\/\d+\.\d+/.test(J),d=!F&&/Chrome\/(\d+)/.exec(J),b=d&&+d[1],h=/Opera\//.test(J),k=/Apple Computer/.test(navigator.vendor),v=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(J),f=/PhantomJS/.test(J),w=k&&(/Mobile\/\w+/.test(J)||navigator.maxTouchPoints>2),T=/Android/.test(J),E=w||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(J),P=w||/Mac/.test(ie),M=/\bCrOS\b/.test(J),j=/win/i.test(ie),O=h&&J.match(/Version\/(\d*\.\d*)/);O&&(O=Number(O[1])),O&&O>=15&&(h=!1,o=!0);var L=P&&(u||h&&(null==O||O<12.11)),G=ue||y&&e>=9;function W(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var te,V=function(t,n){var c=t.className,a=W(n).exec(c);if(a){var m=c.slice(a.index+a[0].length);t.className=c.slice(0,a.index)+(m?a[1]+m:"")}};function $(t){for(var n=t.childNodes.length;n>0;--n)t.removeChild(t.firstChild);return t}function fe(t,n){return $(t).appendChild(n)}function ce(t,n,c,a){var m=document.createElement(t);if(c&&(m.className=c),a&&(m.style.cssText=a),"string"==typeof n)m.appendChild(document.createTextNode(n));else if(n)for(var D=0;D<n.length;++D)m.appendChild(n[D]);return m}function xe(t,n,c,a){var m=ce(t,n,c,a);return m.setAttribute("role","presentation"),m}function se(t,n){if(3==n.nodeType&&(n=n.parentNode),t.contains)return t.contains(n);do{if(11==n.nodeType&&(n=n.host),n==t)return!0}while(n=n.parentNode)}function ne(t){var n;try{n=t.activeElement}catch(c){n=t.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function ve(t,n){var c=t.className;W(n).test(c)||(t.className+=(c?" ":"")+n)}function Ce(t,n){for(var c=t.split(" "),a=0;a<c.length;a++)c[a]&&!W(c[a]).test(n)&&(n+=" "+c[a]);return n}te=document.createRange?function(t,n,c,a){var m=document.createRange();return m.setEnd(a||t,c),m.setStart(t,n),m}:function(t,n,c){var a=document.body.createTextRange();try{a.moveToElementText(t.parentNode)}catch(m){return a}return a.collapse(!0),a.moveEnd("character",c),a.moveStart("character",n),a};var me=function(t){t.select()};function de(t){return t.display.wrapper.ownerDocument}function ye(t){return de(t).defaultView}function Ee(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n)}}function Be(t,n,c){for(var a in n||(n={}),t)t.hasOwnProperty(a)&&(!1!==c||!n.hasOwnProperty(a))&&(n[a]=t[a]);return n}function Ie(t,n,c,a,m){null==n&&(-1==(n=t.search(/[^\s\u00a0]/))&&(n=t.length));for(var D=a||0,X=m||0;;){var Z=t.indexOf("\t",D);if(Z<0||Z>=n)return X+(n-D);X+=Z-D,X+=c-X%c,D=Z+1}}w?me=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:y&&(me=function(t){try{t.select()}catch(n){}});var qe=function(){this.id=null,this.f=null,this.time=0,this.handler=Ee(this.onTimeout,this)};function U(t,n){for(var c=0;c<t.length;++c)if(t[c]==n)return c;return-1}qe.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},qe.prototype.set=function(t,n){this.f=n;var c=+new Date+t;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=c)};var ee={toString:function(){return"CodeMirror.Pass"}},pe={scroll:!1},Ne={origin:"*mouse"},ke={origin:"+move"};function Pe(t,n,c){for(var a=0,m=0;;){var D=t.indexOf("\t",a);-1==D&&(D=t.length);var X=D-a;if(D==t.length||m+X>=n)return a+Math.min(X,n-m);if(m+=D-a,a=D+1,(m+=c-m%c)>=n)return a}}var Je=[""];function Ke(t){for(;Je.length<=t;)Je.push(at(Je)+" ");return Je[t]}function at(t){return t[t.length-1]}function pt(t,n){for(var c=[],a=0;a<t.length;a++)c[a]=n(t[a],a);return c}function zt(){}function Te(t,n){var c;return Object.create?c=Object.create(t):(zt.prototype=t,c=new zt),n&&Be(n,c),c}var De=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Re(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||De.test(t))}function K(t,n){return n?!!(n.source.indexOf("\\w")>-1&&Re(t))||n.test(t):Re(t)}function oe(t){for(var n in t)if(t.hasOwnProperty(n)&&t[n])return!1;return!0}var he=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function be(t){return t.charCodeAt(0)>=768&&he.test(t)}function Le(t,n,c){for(;(c<0?n>0:n<t.length)&&be(t.charAt(n));)n+=c;return n}function Se(t,n,c){for(var a=n>c?-1:1;;){if(n==c)return n;var m=(n+c)/2,D=a<0?Math.ceil(m):Math.floor(m);if(D==n)return t(D)?n:c;t(D)?c=D:n=D+a}}var je=null;function He(t,n,c){var a;je=null;for(var m=0;m<t.length;++m){var D=t[m];if(D.from<n&&D.to>n)return m;D.to==n&&(D.from!=D.to&&"before"==c?a=m:je=m),D.from==n&&(D.from!=D.to&&"before"!=c?a=m:je=m)}return null!=a?a:je}var Ze=function(){function c(ae){return ae<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ae):1424<=ae&&ae<=1524?"R":1536<=ae&&ae<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ae-1536):1774<=ae&&ae<=2220?"r":8192<=ae&&ae<=8203?"w":8204==ae?"b":"L"}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,m=/[stwN]/,D=/[LRr]/,X=/[Lb1n]/,Z=/[1n]/;function re(ae,we,Fe){this.level=ae,this.from=we,this.to=Fe}return function(ae,we){var Fe="ltr"==we?"L":"R";if(0==ae.length||"ltr"==we&&!a.test(ae))return!1;for(var Ue=ae.length,Qe=[],Ye=0;Ye<Ue;++Ye)Qe.push(c(ae.charCodeAt(Ye)));for(var tt=0,lt=Fe;tt<Ue;++tt){var ct=Qe[tt];"m"==ct?Qe[tt]=lt:lt=ct}for(var dt=0,ht=Fe;dt<Ue;++dt){var gt=Qe[dt];"1"==gt&&"r"==ht?Qe[dt]="n":D.test(gt)&&(ht=gt,"r"==gt&&(Qe[dt]="R"))}for(var _t=1,wt=Qe[0];_t<Ue-1;++_t){var Nt=Qe[_t];"+"==Nt&&"1"==wt&&"1"==Qe[_t+1]?Qe[_t]="1":","==Nt&&wt==Qe[_t+1]&&("1"==wt||"n"==wt)&&(Qe[_t]=wt),wt=Nt}for(var Qt=0;Qt<Ue;++Qt){var ar=Qe[Qt];if(","==ar)Qe[Qt]="N";else if("%"==ar){var Gt=void 0;for(Gt=Qt+1;Gt<Ue&&"%"==Qe[Gt];++Gt);for(var xr=Qt&&"!"==Qe[Qt-1]||Gt<Ue&&"1"==Qe[Gt]?"1":"N",wr=Qt;wr<Gt;++wr)Qe[wr]=xr;Qt=Gt-1}}for(var Vt=0,kr=Fe;Vt<Ue;++Vt){var fr=Qe[Vt];"L"==kr&&"1"==fr?Qe[Vt]="L":D.test(fr)&&(kr=fr)}for(var er=0;er<Ue;++er)if(m.test(Qe[er])){var tr=void 0;for(tr=er+1;tr<Ue&&m.test(Qe[tr]);++tr);for(var Ht="L"==(er?Qe[er-1]:Fe),Yn=Ht==("L"==(tr<Ue?Qe[tr]:Fe))?Ht?"L":"R":Fe,In=er;In<tr;++In)Qe[In]=Yn;er=tr-1}for(var Yr,cr=[],rr=0;rr<Ue;)if(X.test(Qe[rr])){var Ca=rr;for(++rr;rr<Ue&&X.test(Qe[rr]);++rr);cr.push(new re(0,Ca,rr))}else{var Zr=rr,Zn=cr.length,$n="rtl"==we?1:0;for(++rr;rr<Ue&&"L"!=Qe[rr];++rr);for(var pr=Zr;pr<rr;)if(Z.test(Qe[pr])){Zr<pr&&(cr.splice(Zn,0,new re(1,Zr,pr)),Zn+=$n);var _i=pr;for(++pr;pr<rr&&Z.test(Qe[pr]);++pr);cr.splice(Zn,0,new re(2,_i,pr)),Zn+=$n,Zr=pr}else++pr;Zr<rr&&cr.splice(Zn,0,new re(1,Zr,rr))}return"ltr"==we&&(1==cr[0].level&&(Yr=ae.match(/^\s+/))&&(cr[0].from=Yr[0].length,cr.unshift(new re(0,0,Yr[0].length))),1==at(cr).level&&(Yr=ae.match(/\s+$/))&&(at(cr).to-=Yr[0].length,cr.push(new re(0,Ue-Yr[0].length,Ue)))),"rtl"==we?cr.reverse():cr}}();function rt(t,n){var c=t.order;return null==c&&(c=t.order=Ze(t.text,n)),c}var Ve=[],et=function(t,n,c){if(t.addEventListener)t.addEventListener(n,c,!1);else if(t.attachEvent)t.attachEvent("on"+n,c);else{var a=t._handlers||(t._handlers={});a[n]=(a[n]||Ve).concat(c)}};function kt(t,n){return t._handlers&&t._handlers[n]||Ve}function vt(t,n,c){if(t.removeEventListener)t.removeEventListener(n,c,!1);else if(t.detachEvent)t.detachEvent("on"+n,c);else{var a=t._handlers,m=a&&a[n];if(m){var D=U(m,c);D>-1&&(a[n]=m.slice(0,D).concat(m.slice(D+1)))}}}function mt(t,n){var c=kt(t,n);if(c.length)for(var a=Array.prototype.slice.call(arguments,2),m=0;m<c.length;++m)c[m].apply(null,a)}function bt(t,n,c){return"string"==typeof n&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),mt(t,c||n.type,t,n),jn(n)||n.codemirrorIgnore}function yt(t){var n=t._handlers&&t._handlers.cursorActivity;if(n)for(var c=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),a=0;a<n.length;++a)-1==U(c,n[a])&&c.push(n[a])}function st(t,n){return kt(t,n).length>0}function Tt(t){t.prototype.on=function(n,c){et(this,n,c)},t.prototype.off=function(n,c){vt(this,n,c)}}function Ct(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Et(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function jn(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function yn(t){Ct(t),Et(t)}function Ei(t){return t.target||t.srcElement}function ho(t){var n=t.which;return null==n&&(1&t.button?n=1:2&t.button?n=3:4&t.button&&(n=2)),P&&t.ctrlKey&&1==n&&(n=3),n}var Ti,Hr,ys=function(){if(y&&e<9)return!1;var t=ce("div");return"draggable"in t||"dragDrop"in t}();function ms(t){if(null==Ti){var n=ce("span","\u200b");fe(t,ce("span",[n,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ti=n.offsetWidth<=1&&n.offsetHeight>2&&!(y&&e<8))}var c=Ti?ce("span","\u200b"):ce("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}function ri(t){if(null!=Hr)return Hr;var n=fe(t,document.createTextNode("A\u062eA")),c=te(n,0,1).getBoundingClientRect(),a=te(n,1,2).getBoundingClientRect();return $(t),!(!c||c.left==c.right)&&(Hr=a.right-c.right<3)}var t,Rr=3!="\n\nb".split(/\n/).length?function(t){for(var n=0,c=[],a=t.length;n<=a;){var m=t.indexOf("\n",n);-1==m&&(m=t.length);var D=t.slice(n,"\r"==t.charAt(m-1)?m-1:m),X=D.indexOf("\r");-1!=X?(c.push(D.slice(0,X)),n+=X+1):(c.push(D),n=m+1)}return c}:function(t){return t.split(/\r\n?|\n/)},ni=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(n){return!1}}:function(t){var n;try{n=t.ownerDocument.selection.createRange()}catch(c){}return!(!n||n.parentElement()!=t)&&0!=n.compareEndPoints("StartToEnd",n)},po="oncopy"in(t=ce("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),Wr=null;var Dn={},en={};function zr(t,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Dn[t]=n}function mn(t){if("string"==typeof t&&en.hasOwnProperty(t))t=en[t];else if(t&&"string"==typeof t.name&&en.hasOwnProperty(t.name)){var n=en[t.name];"string"==typeof n&&(n={name:n}),(t=Te(n,t)).name=n.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return mn("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return mn("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function ii(t,n){n=mn(n);var c=Dn[n.name];if(!c)return ii(t,"text/plain");var a=c(t,n);if(Lr.hasOwnProperty(n.name)){var m=Lr[n.name];for(var D in m)!m.hasOwnProperty(D)||(a.hasOwnProperty(D)&&(a["_"+D]=a[D]),a[D]=m[D])}if(a.name=n.name,n.helperType&&(a.helperType=n.helperType),n.modeProps)for(var X in n.modeProps)a[X]=n.modeProps[X];return a}var Lr={};function xs(t,n){Be(n,Lr.hasOwnProperty(t)?Lr[t]:Lr[t]={})}function Ir(t,n){if(!0===n)return n;if(t.copyState)return t.copyState(n);var c={};for(var a in n){var m=n[a];m instanceof Array&&(m=m.concat([])),c[a]=m}return c}function go(t,n){for(var c;t.innerMode&&((c=t.innerMode(n))&&c.mode!=t);)n=c.state,t=c.mode;return c||{mode:t,state:n}}function Ni(t,n,c){return!t.startState||t.startState(n,c)}var Xt=function(t,n,c){this.pos=this.start=0,this.string=t,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};function xt(t,n){if((n-=t.first)<0||n>=t.size)throw new Error("There is no line "+(n+t.first)+" in the document.");for(var c=t;!c.lines;)for(var a=0;;++a){var m=c.children[a],D=m.chunkSize();if(n<D){c=m;break}n-=D}return c.lines[n]}function Mn(t,n,c){var a=[],m=n.line;return t.iter(n.line,c.line+1,function(D){var X=D.text;m==c.line&&(X=X.slice(0,c.ch)),m==n.line&&(X=X.slice(n.ch)),a.push(X),++m}),a}function ws(t,n,c){var a=[];return t.iter(n,c,function(m){a.push(m.text)}),a}function qr(t,n){var c=n-t.height;if(c)for(var a=t;a;a=a.parent)a.height+=c}function Pt(t){if(null==t.parent)return null;for(var n=t.parent,c=U(n.lines,t),a=n.parent;a;n=a,a=a.parent)for(var m=0;a.children[m]!=n;++m)c+=a.children[m].chunkSize();return c+n.first}function bn(t,n){var c=t.first;e:do{for(var a=0;a<t.children.length;++a){var m=t.children[a],D=m.height;if(n<D){t=m;continue e}n-=D,c+=m.chunkSize()}return c}while(!t.lines);for(var X=0;X<t.lines.length;++X){var re=t.lines[X].height;if(n<re)break;n-=re}return c+X}function Li(t,n){return n>=t.first&&n<t.first+t.size}function yo(t,n){return String(t.lineNumberFormatter(n+t.firstLineNumber))}function ot(t,n,c){if(void 0===c&&(c=null),!(this instanceof ot))return new ot(t,n,c);this.line=t,this.ch=n,this.sticky=c}function St(t,n){return t.line-n.line||t.ch-n.ch}function ks(t,n){return t.sticky==n.sticky&&0==St(t,n)}function mo(t){return ot(t.line,t.ch)}function bo(t,n){return St(t,n)<0?n:t}function Ii(t,n){return St(t,n)<0?t:n}function Ra(t,n){return Math.max(t.first,Math.min(n,t.first+t.size-1))}function At(t,n){if(n.line<t.first)return ot(t.first,0);var c=t.first+t.size-1;return n.line>c?ot(c,xt(t,c).text.length):function Lu(t,n){var c=t.ch;return null==c||c>n?ot(t.line,n):c<0?ot(t.line,0):t}(n,xt(t,n.line).text.length)}function _s(t,n){for(var c=[],a=0;a<n.length;a++)c[a]=At(t,n[a]);return c}Xt.prototype.eol=function(){return this.pos>=this.string.length},Xt.prototype.sol=function(){return this.pos==this.lineStart},Xt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xt.prototype.eat=function(t){var n=this.string.charAt(this.pos);if("string"==typeof t?n==t:n&&(t.test?t.test(n):t(n)))return++this.pos,n},Xt.prototype.eatWhile=function(t){for(var n=this.pos;this.eat(t););return this.pos>n},Xt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Xt.prototype.skipToEnd=function(){this.pos=this.string.length},Xt.prototype.skipTo=function(t){var n=this.string.indexOf(t,this.pos);if(n>-1)return this.pos=n,!0},Xt.prototype.backUp=function(t){this.pos-=t},Xt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ie(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.indentation=function(){return Ie(this.string,null,this.tabSize)-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.match=function(t,n,c){if("string"!=typeof t){var D=this.string.slice(this.pos).match(t);return D&&D.index>0?null:(D&&!1!==n&&(this.pos+=D[0].length),D)}var a=function(X){return c?X.toLowerCase():X};if(a(this.string.substr(this.pos,t.length))==a(t))return!1!==n&&(this.pos+=t.length),!0},Xt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xt.prototype.hideFirstChars=function(t,n){this.lineStart+=t;try{return n()}finally{this.lineStart-=t}},Xt.prototype.lookAhead=function(t){var n=this.lineOracle;return n&&n.lookAhead(t)},Xt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var xo=function(t,n){this.state=t,this.lookAhead=n},jr=function(t,n,c,a){this.state=n,this.doc=t,this.line=c,this.maxLookAhead=a||0,this.baseTokens=null,this.baseTokenPos=1};function ja(t,n,c,a){var m=[t.state.modeGen],D={};Qa(t,n.text,t.doc.mode,c,function(ae,we){return m.push(ae,we)},D,a);for(var X=c.state,Z=function(ae){c.baseTokens=m;var we=t.state.overlays[ae],Fe=1,Ue=0;c.state=!0,Qa(t,n.text,we.mode,c,function(Qe,Ye){for(var tt=Fe;Ue<Qe;){var lt=m[Fe];lt>Qe&&m.splice(Fe,1,Qe,m[Fe+1],lt),Fe+=2,Ue=Math.min(Qe,lt)}if(Ye)if(we.opaque)m.splice(tt,Fe-tt,Qe,"overlay "+Ye),Fe=tt+2;else for(;tt<Fe;tt+=2){var ct=m[tt+1];m[tt+1]=(ct?ct+" ":"")+"overlay "+Ye}},D),c.state=X,c.baseTokens=null,c.baseTokenPos=1},re=0;re<t.state.overlays.length;++re)Z(re);return{styles:m,classes:D.bgClass||D.textClass?D:null}}function Cs(t,n,c){if(!n.styles||n.styles[0]!=t.state.modeGen){var a=Oi(t,Pt(n)),m=n.text.length>t.options.maxHighlightLength&&Ir(t.doc.mode,a.state),D=ja(t,n,a);m&&(a.state=m),n.stateAfter=a.save(!m),n.styles=D.styles,D.classes?n.styleClasses=D.classes:n.styleClasses&&(n.styleClasses=null),c===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return n.styles}function Oi(t,n,c){var a=t.doc,m=t.display;if(!a.mode.startState)return new jr(a,!0,n);var D=function Ua(t,n,c){for(var a,m,D=t.doc,X=c?-1:n-(t.doc.mode.innerMode?1e3:100),Z=n;Z>X;--Z){if(Z<=D.first)return D.first;var re=xt(D,Z-1),ae=re.stateAfter;if(ae&&(!c||Z+(ae instanceof xo?ae.lookAhead:0)<=D.modeFrontier))return Z;var we=Ie(re.text,null,t.options.tabSize);(null==m||a>we)&&(m=Z-1,a=we)}return m}(t,n,c),X=D>a.first&&xt(a,D-1).stateAfter,Z=X?jr.fromSaved(a,X,D):new jr(a,Ni(a.mode),D);return a.iter(D,n,function(re){wo(t,re.text,Z);var ae=Z.line;re.stateAfter=ae==n-1||ae%5==0||ae>=m.viewFrom&&ae<m.viewTo?Z.save():null,Z.nextLine()}),c&&(a.modeFrontier=Z.line),Z}function wo(t,n,c,a){var m=t.doc.mode,D=new Xt(n,t.options.tabSize,c);for(D.start=D.pos=a||0,""==n&&Da(m,c.state);!D.eol();)Ss(m,D,c.state),D.start=D.pos}function Da(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var c=go(t,n);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function Ss(t,n,c,a){for(var m=0;m<10;m++){a&&(a[0]=go(t,c).mode);var D=t.token(n,c);if(n.pos>n.start)return D}throw new Error("Mode "+t.name+" failed to advance stream.")}jr.prototype.lookAhead=function(t){var n=this.doc.getLine(this.line+t);return null!=n&&t>this.maxLookAhead&&(this.maxLookAhead=t),n},jr.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},jr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},jr.fromSaved=function(t,n,c){return n instanceof xo?new jr(t,Ir(t.mode,n.state),c,n.lookAhead):new jr(t,Ir(t.mode,n),c)},jr.prototype.save=function(t){var n=!1!==t?Ir(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new xo(n,this.maxLookAhead):n};var Ma=function(t,n,c){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=n||null,this.state=c};function Pa(t,n,c,a){var X,we,m=t.doc,D=m.mode,Z=xt(m,(n=At(m,n)).line),re=Oi(t,n.line,c),ae=new Xt(Z.text,t.options.tabSize,re);for(a&&(we=[]);(a||ae.pos<n.ch)&&!ae.eol();)ae.start=ae.pos,X=Ss(D,ae,re.state),a&&we.push(new Ma(ae,X,Ir(m.mode,re.state)));return a?we:new Ma(ae,X,re.state)}function Ba(t,n){if(t)for(;;){var c=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;t=t.slice(0,c.index)+t.slice(c.index+c[0].length);var a=c[1]?"bgClass":"textClass";null==n[a]?n[a]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(n[a])||(n[a]+=" "+c[2])}return t}function Qa(t,n,c,a,m,D,X){var Z=c.flattenSpans;null==Z&&(Z=t.options.flattenSpans);var Fe,re=0,ae=null,we=new Xt(n,t.options.tabSize,a),Ue=t.options.addModeClass&&[null];for(""==n&&Ba(Da(c,a.state),D);!we.eol();){if(we.pos>t.options.maxHighlightLength?(Z=!1,X&&wo(t,n,a,we.pos),we.pos=n.length,Fe=null):Fe=Ba(Ss(c,we,a.state,Ue),D),Ue){var Qe=Ue[0].name;Qe&&(Fe="m-"+(Fe?Qe+" "+Fe:Qe))}if(!Z||ae!=Fe){for(;re<we.start;)m(re=Math.min(we.start,re+5e3),ae);ae=Fe}we.start=we.pos}for(;re<we.pos;){var Ye=Math.min(we.pos,re+5e3);m(Ye,ae),re=Ye}}var As=!1,tn=!1;function Ri(t,n,c){this.marker=t,this.from=n,this.to=c}function ji(t,n){if(t)for(var c=0;c<t.length;++c){var a=t[c];if(a.marker==n)return a}}function Ga(t,n){for(var c,a=0;a<t.length;++a)t[a]!=n&&(c||(c=[])).push(t[a]);return c}function ko(t,n){if(n.full)return null;var c=Li(t,n.from.line)&&xt(t,n.from.line).markedSpans,a=Li(t,n.to.line)&&xt(t,n.to.line).markedSpans;if(!c&&!a)return null;var m=n.from.ch,D=n.to.ch,X=0==St(n.from,n.to),Z=function Du(t,n,c){var a;if(t)for(var m=0;m<t.length;++m){var D=t[m],X=D.marker;if(null==D.from||(X.inclusiveLeft?D.from<=n:D.from<n)||D.from==n&&"bookmark"==X.type&&(!c||!D.marker.insertLeft)){var re=null==D.to||(X.inclusiveRight?D.to>=n:D.to>n);(a||(a=[])).push(new Ri(X,D.from,re?null:D.to))}}return a}(c,m,X),re=function Mu(t,n,c){var a;if(t)for(var m=0;m<t.length;++m){var D=t[m],X=D.marker;if(null==D.to||(X.inclusiveRight?D.to>=n:D.to>n)||D.from==n&&"bookmark"==X.type&&(!c||D.marker.insertLeft)){var re=null==D.from||(X.inclusiveLeft?D.from<=n:D.from<n);(a||(a=[])).push(new Ri(X,re?null:D.from-n,null==D.to?null:D.to-n))}}return a}(a,D,X),ae=1==n.text.length,we=at(n.text).length+(ae?m:0);if(Z)for(var Fe=0;Fe<Z.length;++Fe){var Ue=Z[Fe];if(null==Ue.to){var Qe=ji(re,Ue.marker);Qe?ae&&(Ue.to=null==Qe.to?null:Qe.to+we):Ue.to=m}}if(re)for(var Ye=0;Ye<re.length;++Ye){var tt=re[Ye];if(null!=tt.to&&(tt.to+=we),null==tt.from)ji(Z,tt.marker)||(tt.from=we,ae&&(Z||(Z=[])).push(tt));else tt.from+=we,ae&&(Z||(Z=[])).push(tt)}Z&&(Z=Ha(Z)),re&&re!=Z&&(re=Ha(re));var ct=[Z];if(!ae){var ht,dt=n.text.length-2;if(dt>0&&Z)for(var gt=0;gt<Z.length;++gt)null==Z[gt].to&&(ht||(ht=[])).push(new Ri(Z[gt].marker,null,null));for(var _t=0;_t<dt;++_t)ct.push(ht);ct.push(re)}return ct}function Ha(t){for(var n=0;n<t.length;++n){var c=t[n];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&t.splice(n--,1)}return t.length?t:null}function Di(t){var n=t.markedSpans;if(n){for(var c=0;c<n.length;++c)n[c].marker.detachLine(t);t.markedSpans=null}}function Fs(t,n){if(n){for(var c=0;c<n.length;++c)n[c].marker.attachLine(t);t.markedSpans=n}}function _o(t){return t.inclusiveLeft?-1:0}function Pn(t){return t.inclusiveRight?1:0}function Co(t,n){var c=t.lines.length-n.lines.length;if(0!=c)return c;var a=t.find(),m=n.find(),D=St(a.from,m.from)||_o(t)-_o(n);return D?-D:St(a.to,m.to)||Pn(t)-Pn(n)||n.id-t.id}function Mi(t,n){var a,c=tn&&t.markedSpans;if(c)for(var m=void 0,D=0;D<c.length;++D)(m=c[D]).marker.collapsed&&null==(n?m.from:m.to)&&(!a||Co(a,m.marker)<0)&&(a=m.marker);return a}function Es(t){return Mi(t,!0)}function So(t){return Mi(t,!1)}function Bu(t,n){var a,c=tn&&t.markedSpans;if(c)for(var m=0;m<c.length;++m){var D=c[m];D.marker.collapsed&&(null==D.from||D.from<n)&&(null==D.to||D.to>n)&&(!a||Co(a,D.marker)<0)&&(a=D.marker)}return a}function Wa(t,n,c,a,m){var D=xt(t,n),X=tn&&D.markedSpans;if(X)for(var Z=0;Z<X.length;++Z){var re=X[Z];if(re.marker.collapsed){var ae=re.marker.find(0),we=St(ae.from,c)||_o(re.marker)-_o(m),Fe=St(ae.to,a)||Pn(re.marker)-Pn(m);if(!(we>=0&&Fe<=0||we<=0&&Fe>=0)&&(we<=0&&(re.marker.inclusiveRight&&m.inclusiveLeft?St(ae.to,c)>=0:St(ae.to,c)>0)||we>=0&&(re.marker.inclusiveRight&&m.inclusiveLeft?St(ae.from,a)<=0:St(ae.from,a)<0)))return!0}}}function nr(t){for(var n;n=Es(t);)t=n.find(-1,!0).line;return t}function Ts(t,n){var c=xt(t,n),a=nr(c);return c==a?n:Pt(a)}function za(t,n){if(n>t.lastLine())return n;var a,c=xt(t,n);if(!nn(t,c))return n;for(;a=So(c);)c=a.find(1,!0).line;return Pt(c)+1}function nn(t,n){var c=tn&&n.markedSpans;if(c)for(var a=void 0,m=0;m<c.length;++m)if((a=c[m]).marker.collapsed){if(null==a.from)return!0;if(!a.marker.widgetNode&&0==a.from&&a.marker.inclusiveLeft&&Ns(t,n,a))return!0}}function Ns(t,n,c){if(null==c.to){var a=c.marker.find(1,!0);return Ns(t,a.line,ji(a.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==n.text.length)return!0;for(var m=void 0,D=0;D<n.markedSpans.length;++D)if((m=n.markedSpans[D]).marker.collapsed&&!m.marker.widgetNode&&m.from==c.to&&(null==m.to||m.to!=c.from)&&(m.marker.inclusiveLeft||c.marker.inclusiveRight)&&Ns(t,n,m))return!0}function Xr(t){for(var n=0,c=(t=nr(t)).parent,a=0;a<c.lines.length;++a){var m=c.lines[a];if(m==t)break;n+=m.height}for(var D=c.parent;D;D=(c=D).parent)for(var X=0;X<D.children.length;++X){var Z=D.children[X];if(Z==c)break;n+=Z.height}return n}function Ao(t){if(0==t.height)return 0;for(var c,n=t.text.length,a=t;c=Es(a);){var m=c.find(0,!0);a=m.from.line,n+=m.from.ch-m.to.ch}for(a=t;c=So(a);){var D=c.find(0,!0);n-=a.text.length-D.from.ch,n+=(a=D.to.line).text.length-D.to.ch}return n}function Fo(t){var n=t.display,c=t.doc;n.maxLine=xt(c,c.first),n.maxLineLength=Ao(n.maxLine),n.maxLineChanged=!0,c.iter(function(a){var m=Ao(a);m>n.maxLineLength&&(n.maxLineLength=m,n.maxLine=a)})}var oi=function(t,n,c){this.text=t,Fs(this,n),this.height=c?c(this):1};function Uu(t){t.parent=null,Di(t)}oi.prototype.lineNo=function(){return Pt(this)},Tt(oi);var Gu={},Hu={};function Ls(t,n){if(!t||/^\s*$/.test(t))return null;var c=n.addModeClass?Hu:Gu;return c[t]||(c[t]=t.replace(/\S+/g,"cm-$&"))}function Xa(t,n){var c=xe("span",null,null,o?"padding-right: .1px":null),a={pre:xe("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};n.measure={};for(var m=0;m<=(n.rest?n.rest.length:0);m++){var D=m?n.rest[m-1]:n.line,X=void 0;a.pos=0,a.addToken=Wu,ri(t.display.measure)&&(X=rt(D,t.doc.direction))&&(a.addToken=Is(a.addToken,X)),a.map=[],Os(D,a,Cs(t,D,n!=t.display.externalMeasured&&Pt(D))),D.styleClasses&&(D.styleClasses.bgClass&&(a.bgClass=Ce(D.styleClasses.bgClass,a.bgClass||"")),D.styleClasses.textClass&&(a.textClass=Ce(D.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(ms(t.display.measure))),0==m?(n.measure.map=a.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(a.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(o){var re=a.content.lastChild;(/\bcm-tab\b/.test(re.className)||re.querySelector&&re.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return mt(t,"renderLine",t,n.line,a.pre),a.pre.className&&(a.textClass=Ce(a.pre.className,a.textClass||"")),a}function Ja(t){var n=ce("span","\u2022","cm-invalidchar");return n.title="\\u"+t.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function Wu(t,n,c,a,m,D,X){if(n){var we,Z=t.splitSpaces?function si(t,n){if(t.length>1&&!/  /.test(t))return t;for(var c=n,a="",m=0;m<t.length;m++){var D=t.charAt(m);" "==D&&c&&(m==t.length-1||32==t.charCodeAt(m+1))&&(D="\xa0"),a+=D,c=" "==D}return a}(n,t.trailingSpace):n,re=t.cm.state.specialChars,ae=!1;if(re.test(n)){we=document.createDocumentFragment();for(var Fe=0;;){re.lastIndex=Fe;var Ue=re.exec(n),Qe=Ue?Ue.index-Fe:n.length-Fe;if(Qe){var Ye=document.createTextNode(Z.slice(Fe,Fe+Qe));y&&e<9?we.appendChild(ce("span",[Ye])):we.appendChild(Ye),t.map.push(t.pos,t.pos+Qe,Ye),t.col+=Qe,t.pos+=Qe}if(!Ue)break;Fe+=Qe+1;var tt=void 0;if("\t"==Ue[0]){var lt=t.cm.options.tabSize,ct=lt-t.col%lt;(tt=we.appendChild(ce("span",Ke(ct),"cm-tab"))).setAttribute("role","presentation"),tt.setAttribute("cm-text","\t"),t.col+=ct}else"\r"==Ue[0]||"\n"==Ue[0]?((tt=we.appendChild(ce("span","\r"==Ue[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Ue[0]),t.col+=1):((tt=t.cm.options.specialCharPlaceholder(Ue[0])).setAttribute("cm-text",Ue[0]),y&&e<9?we.appendChild(ce("span",[tt])):we.appendChild(tt),t.col+=1);t.map.push(t.pos,t.pos+1,tt),t.pos++}}else t.col+=n.length,we=document.createTextNode(Z),t.map.push(t.pos,t.pos+n.length,we),y&&e<9&&(ae=!0),t.pos+=n.length;if(t.trailingSpace=32==Z.charCodeAt(n.length-1),c||a||m||ae||D||X){var dt=c||"";a&&(dt+=a),m&&(dt+=m);var ht=ce("span",[we],dt,D);if(X)for(var gt in X)X.hasOwnProperty(gt)&&"style"!=gt&&"class"!=gt&&ht.setAttribute(gt,X[gt]);return t.content.appendChild(ht)}t.content.appendChild(we)}}function Is(t,n){return function(c,a,m,D,X,Z,re){m=m?m+" cm-force-border":"cm-force-border";for(var ae=c.pos,we=ae+a.length;;){for(var Fe=void 0,Ue=0;Ue<n.length&&!((Fe=n[Ue]).to>ae&&Fe.from<=ae);Ue++);if(Fe.to>=we)return t(c,a,m,D,X,Z,re);t(c,a.slice(0,Fe.to-ae),m,D,null,Z,re),D=null,a=a.slice(Fe.to-ae),ae=Fe.to}}}function Bn(t,n,c,a){var m=!a&&c.widgetNode;m&&t.map.push(t.pos,t.pos+n,m),!a&&t.cm.display.input.needsContentAttribute&&(m||(m=t.content.appendChild(document.createElement("span"))),m.setAttribute("cm-marker",c.id)),m&&(t.cm.display.input.setUneditable(m),t.content.appendChild(m)),t.pos+=n,t.trailingSpace=!1}function Os(t,n,c){var a=t.markedSpans,m=t.text,D=0;if(a)for(var Fe,Ue,Ye,tt,lt,ct,dt,Z=m.length,re=0,ae=1,we="",Qe=0;;){if(Qe==re){Ye=tt=lt=Ue="",dt=null,ct=null,Qe=1/0;for(var ht=[],gt=void 0,_t=0;_t<a.length;++_t){var wt=a[_t],Nt=wt.marker;if("bookmark"==Nt.type&&wt.from==re&&Nt.widgetNode)ht.push(Nt);else if(wt.from<=re&&(null==wt.to||wt.to>re||Nt.collapsed&&wt.to==re&&wt.from==re)){if(null!=wt.to&&wt.to!=re&&Qe>wt.to&&(Qe=wt.to,tt=""),Nt.className&&(Ye+=" "+Nt.className),Nt.css&&(Ue=(Ue?Ue+";":"")+Nt.css),Nt.startStyle&&wt.from==re&&(lt+=" "+Nt.startStyle),Nt.endStyle&&wt.to==Qe&&(gt||(gt=[])).push(Nt.endStyle,wt.to),Nt.title&&((dt||(dt={})).title=Nt.title),Nt.attributes)for(var Qt in Nt.attributes)(dt||(dt={}))[Qt]=Nt.attributes[Qt];Nt.collapsed&&(!ct||Co(ct.marker,Nt)<0)&&(ct=wt)}else wt.from>re&&Qe>wt.from&&(Qe=wt.from)}if(gt)for(var ar=0;ar<gt.length;ar+=2)gt[ar+1]==Qe&&(tt+=" "+gt[ar]);if(!ct||ct.from==re)for(var Gt=0;Gt<ht.length;++Gt)Bn(n,0,ht[Gt]);if(ct&&(ct.from||0)==re){if(Bn(n,(null==ct.to?Z+1:ct.to)-re,ct.marker,null==ct.from),null==ct.to)return;ct.to==re&&(ct=!1)}}if(re>=Z)break;for(var xr=Math.min(Z,Qe);;){if(we){var wr=re+we.length;if(!ct){var Vt=wr>xr?we.slice(0,xr-re):we;n.addToken(n,Vt,Fe?Fe+Ye:Ye,lt,re+Vt.length==Qe?tt:"",Ue,dt)}if(wr>=xr){we=we.slice(xr-re),re=xr;break}re=wr,lt=""}we=m.slice(D,D=c[ae++]),Fe=Ls(c[ae++],n.cm.options)}}else for(var X=1;X<c.length;X+=2)n.addToken(n,m.slice(D,D=c[X]),Ls(c[X+1],n.cm.options))}function Va(t,n,c){this.line=n,this.rest=function Qu(t){for(var n,c;n=So(t);)t=n.find(1,!0).line,(c||(c=[])).push(t);return c}(n),this.size=this.rest?Pt(at(this.rest))-c+1:1,this.node=this.text=null,this.hidden=nn(t,n)}function Eo(t,n,c){for(var m,a=[],D=n;D<c;D=m){var X=new Va(t.doc,xt(t.doc,D),D);m=D+X.size,a.push(X)}return a}var Qn=null;var Pi=null;function ir(t,n){var c=kt(t,n);if(c.length){var m,a=Array.prototype.slice.call(arguments,2);Qn?m=Qn.delayedCallbacks:Pi?m=Pi:(m=Pi=[],setTimeout(Ya,0));for(var D=function(Z){m.push(function(){return c[Z].apply(null,a)})},X=0;X<c.length;++X)D(X)}}function Ya(){var t=Pi;Pi=null;for(var n=0;n<t.length;++n)t[n]()}function Za(t,n,c,a){for(var m=0;m<n.changes.length;m++){var D=n.changes[m];"text"==D?Ju(t,n):"gutter"==D?Rs(t,n,c,a):"class"==D?li(t,n):"widget"==D&&To(t,n,a)}n.changes=null}function ai(t){return t.node==t.text&&(t.node=ce("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),y&&e<8&&(t.node.style.zIndex=2)),t.node}function $a(t,n){var c=t.display.externalMeasured;return c&&c.line==n.line?(t.display.externalMeasured=null,n.measure=c.measure,c.built):Xa(t,n)}function Ju(t,n){var c=n.text.className,a=$a(t,n);n.text==n.node&&(n.node=a.pre),n.text.parentNode.replaceChild(a.pre,n.text),n.text=a.pre,a.bgClass!=n.bgClass||a.textClass!=n.textClass?(n.bgClass=a.bgClass,n.textClass=a.textClass,li(t,n)):c&&(n.text.className=c)}function li(t,n){(function Xu(t,n){var c=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),n.background)c?n.background.className=c:(n.background.parentNode.removeChild(n.background),n.background=null);else if(c){var a=ai(n);n.background=a.insertBefore(ce("div",null,c),a.firstChild),t.display.input.setUneditable(n.background)}})(t,n),n.line.wrapClass?ai(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className="");var c=n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass;n.text.className=c||""}function Rs(t,n,c,a){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var m=ai(n);n.gutterBackground=ce("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(t.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px"),t.display.input.setUneditable(n.gutterBackground),m.insertBefore(n.gutterBackground,n.text)}var D=n.line.gutterMarkers;if(t.options.lineNumbers||D){var X=ai(n),Z=n.gutter=ce("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px");if(Z.setAttribute("aria-hidden","true"),t.display.input.setUneditable(Z),X.insertBefore(Z,n.text),n.line.gutterClass&&(Z.className+=" "+n.line.gutterClass),t.options.lineNumbers&&(!D||!D["CodeMirror-linenumbers"])&&(n.lineNumber=Z.appendChild(ce("div",yo(t.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),D)for(var re=0;re<t.display.gutterSpecs.length;++re){var ae=t.display.gutterSpecs[re].className,we=D.hasOwnProperty(ae)&&D[ae];we&&Z.appendChild(ce("div",[we],"CodeMirror-gutter-elt","left: "+a.gutterLeft[ae]+"px; width: "+a.gutterWidth[ae]+"px"))}}}function To(t,n,c){n.alignable&&(n.alignable=null);for(var a=W("CodeMirror-linewidget"),m=n.node.firstChild,D=void 0;m;m=D)D=m.nextSibling,a.test(m.className)&&n.node.removeChild(m);Bi(t,n,c)}function el(t,n,c,a){var m=$a(t,n);return n.text=n.node=m.pre,m.bgClass&&(n.bgClass=m.bgClass),m.textClass&&(n.textClass=m.textClass),li(t,n),Rs(t,n,c,a),Bi(t,n,a),n.node}function Bi(t,n,c){if(js(t,n.line,n,c,!0),n.rest)for(var a=0;a<n.rest.length;a++)js(t,n.rest[a],n,c,!1)}function js(t,n,c,a,m){if(n.widgets)for(var D=ai(c),X=0,Z=n.widgets;X<Z.length;++X){var re=Z[X],ae=ce("div",[re.node],"CodeMirror-linewidget"+(re.className?" "+re.className:""));re.handleMouseEvents||ae.setAttribute("cm-ignore-events","true"),No(re,ae,c,a),t.display.input.setUneditable(ae),m&&re.above?D.insertBefore(ae,c.gutter||c.text):D.appendChild(ae),ir(re,"redraw")}}function No(t,n,c,a){if(t.noHScroll){(c.alignable||(c.alignable=[])).push(n);var m=a.wrapperWidth;n.style.left=a.fixedPos+"px",t.coverGutter||(m-=a.gutterTotalWidth,n.style.paddingLeft=a.gutterTotalWidth+"px"),n.style.width=m+"px"}t.coverGutter&&(n.style.zIndex=5,n.style.position="relative",t.noHScroll||(n.style.marginLeft=-a.gutterTotalWidth+"px"))}function ui(t){if(null!=t.height)return t.height;var n=t.doc.cm;if(!n)return 0;if(!se(document.body,t.node)){var c="position: relative;";t.coverGutter&&(c+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),t.noHScroll&&(c+="width: "+n.display.wrapper.clientWidth+"px;"),fe(n.display.measure,ce("div",[t.node],null,c))}return t.height=t.node.parentNode.offsetHeight}function on(t,n){for(var c=Ei(n);c!=t.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==t.sizer&&c!=t.mover)return!0}function Lo(t){return t.lineSpace.offsetTop}function xn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Io(t){if(t.cachedPaddingH)return t.cachedPaddingH;var n=fe(t.measure,ce("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,a={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(a.left)&&!isNaN(a.right)&&(t.cachedPaddingH=a),a}function mr(t){return 50-t.display.nativeBarWidth}function sn(t){return t.display.scroller.clientWidth-mr(t)-t.display.barWidth}function Ds(t){return t.display.scroller.clientHeight-mr(t)-t.display.barHeight}function tl(t,n,c){if(t.line==n)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var a=0;a<t.rest.length;a++)if(t.rest[a]==n)return{map:t.measure.maps[a],cache:t.measure.caches[a]};for(var m=0;m<t.rest.length;m++)if(Pt(t.rest[m])>c)return{map:t.measure.maps[m],cache:t.measure.caches[m],before:!0}}}function Ms(t,n,c,a){return Jr(t,Un(t,n),c,a)}function Ps(t,n){if(n>=t.display.viewFrom&&n<t.display.viewTo)return t.display.view[Jt(t,n)];var c=t.display.externalMeasured;return c&&n>=c.lineN&&n<c.lineN+c.size?c:void 0}function Un(t,n){var c=Pt(n),a=Ps(t,c);a&&!a.text?a=null:a&&a.changes&&(Za(t,a,c,Ws(t)),t.curOp.forceUpdate=!0),a||(a=function Ku(t,n){var c=Pt(n=nr(n)),a=t.display.externalMeasured=new Va(t.doc,n,c);a.lineN=c;var m=a.built=Xa(t,a);return a.text=m.pre,fe(t.display.lineMeasure,m.pre),a}(t,n));var m=tl(a,n,c);return{line:n,view:a,rect:null,map:m.map,cache:m.cache,before:m.before,hasHeights:!1}}function Jr(t,n,c,a,m){n.before&&(c=-1);var X,D=c+(a||"");return n.cache.hasOwnProperty(D)?X=n.cache[D]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(function Vu(t,n,c){var a=t.options.lineWrapping,m=a&&sn(t);if(!n.measure.heights||a&&n.measure.width!=m){var D=n.measure.heights=[];if(a){n.measure.width=m;for(var X=n.text.firstChild.getClientRects(),Z=0;Z<X.length-1;Z++){var re=X[Z],ae=X[Z+1];Math.abs(re.bottom-ae.bottom)>2&&D.push((re.bottom+ae.top)/2-c.top)}}D.push(c.bottom-c.top)}}(t,n.view,n.rect),n.hasHeights=!0),X=function Yu(t,n,c,a){var ae,m=nl(n.map,c,a),D=m.node,X=m.start,Z=m.end,re=m.collapse;if(3==D.nodeType){for(var we=0;we<4;we++){for(;X&&be(n.line.text.charAt(m.coverStart+X));)--X;for(;m.coverStart+Z<m.coverEnd&&be(n.line.text.charAt(m.coverStart+Z));)++Z;if((ae=y&&e<9&&0==X&&Z==m.coverEnd-m.coverStart?D.parentNode.getBoundingClientRect():il(te(D,X,Z).getClientRects(),a)).left||ae.right||0==X)break;Z=X,X-=1,re="right"}y&&e<11&&(ae=function Zu(t,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function vo(t){if(null!=Wr)return Wr;var n=fe(t,ce("span","x")),c=n.getBoundingClientRect(),a=te(n,0,1).getBoundingClientRect();return Wr=Math.abs(c.left-a.left)>1}(t))return n;var c=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*c,right:n.right*c,top:n.top*a,bottom:n.bottom*a}}(t.display.measure,ae))}else{var Fe;X>0&&(re=a="right"),ae=t.options.lineWrapping&&(Fe=D.getClientRects()).length>1?Fe["right"==a?Fe.length-1:0]:D.getBoundingClientRect()}if(y&&e<9&&!X&&(!ae||!ae.left&&!ae.right)){var Ue=D.parentNode.getClientRects()[0];ae=Ue?{left:Ue.left,right:Ue.left+ci(t.display),top:Ue.top,bottom:Ue.bottom}:rl}for(var Qe=ae.top-n.rect.top,Ye=ae.bottom-n.rect.top,tt=(Qe+Ye)/2,lt=n.view.measure.heights,ct=0;ct<lt.length-1&&!(tt<lt[ct]);ct++);var dt=ct?lt[ct-1]:0,ht=lt[ct],gt={left:("right"==re?ae.right:ae.left)-n.rect.left,right:("left"==re?ae.left:ae.right)-n.rect.left,top:dt,bottom:ht};return!ae.left&&!ae.right&&(gt.bogus=!0),t.options.singleCursorHeightPerLine||(gt.rtop=Qe,gt.rbottom=Ye),gt}(t,n,c,a),X.bogus||(n.cache[D]=X)),{left:X.left,right:X.right,top:m?X.rtop:X.top,bottom:m?X.rbottom:X.bottom}}var Gn,rl={left:0,right:0,top:0,bottom:0};function nl(t,n,c){for(var a,m,D,X,Z,re,ae=0;ae<t.length;ae+=3)if(Z=t[ae],re=t[ae+1],n<Z?(m=0,D=1,X="left"):n<re?D=(m=n-Z)+1:(ae==t.length-3||n==re&&t[ae+3]>n)&&(m=(D=re-Z)-1,n>=re&&(X="right")),null!=m){if(a=t[ae+2],Z==re&&c==(a.insertLeft?"left":"right")&&(X=c),"left"==c&&0==m)for(;ae&&t[ae-2]==t[ae-3]&&t[ae-1].insertLeft;)a=t[2+(ae-=3)],X="left";if("right"==c&&m==re-Z)for(;ae<t.length-3&&t[ae+3]==t[ae+4]&&!t[ae+5].insertLeft;)a=t[(ae+=3)+2],X="right";break}return{node:a,start:m,end:D,collapse:X,coverStart:Z,coverEnd:re}}function il(t,n){var c=rl;if("left"==n)for(var a=0;a<t.length&&(c=t[a]).left==c.right;a++);else for(var m=t.length-1;m>=0&&(c=t[m]).left==c.right;m--);return c}function Bs(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var n=0;n<t.rest.length;n++)t.measure.caches[n]={}}function ol(t){t.display.externalMeasure=null,$(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)Bs(t.display.view[n])}function fi(t){ol(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function sl(t){return d&&T?-(t.body.getBoundingClientRect().left-parseInt(getComputedStyle(t.body).marginLeft)):t.defaultView.pageXOffset||(t.documentElement||t.body).scrollLeft}function al(t){return d&&T?-(t.body.getBoundingClientRect().top-parseInt(getComputedStyle(t.body).marginTop)):t.defaultView.pageYOffset||(t.documentElement||t.body).scrollTop}function Qs(t){var c=nr(t).widgets,a=0;if(c)for(var m=0;m<c.length;++m)c[m].above&&(a+=ui(c[m]));return a}function an(t,n,c,a,m){if(!m){var D=Qs(n);c.top+=D,c.bottom+=D}if("line"==a)return c;a||(a="local");var X=Xr(n);if("local"==a?X+=Lo(t.display):X-=t.display.viewOffset,"page"==a||"window"==a){var Z=t.display.lineSpace.getBoundingClientRect();X+=Z.top+("window"==a?0:al(de(t)));var re=Z.left+("window"==a?0:sl(de(t)));c.left+=re,c.right+=re}return c.top+=X,c.bottom+=X,c}function Oo(t,n,c){if("div"==c)return n;var a=n.left,m=n.top;if("page"==c)a-=sl(de(t)),m-=al(de(t));else if("local"==c||!c){var D=t.display.sizer.getBoundingClientRect();a+=D.left,m+=D.top}var X=t.display.lineSpace.getBoundingClientRect();return{left:a-X.left,top:m-X.top}}function ln(t,n,c,a,m){return a||(a=xt(t.doc,n.line)),an(t,a,Ms(t,a,n.ch,m),c)}function Er(t,n,c,a,m,D){function X(Ye,tt){var lt=Jr(t,m,Ye,tt?"right":"left",D);return tt?lt.left=lt.right:lt.right=lt.left,an(t,a,lt,c)}a=a||xt(t.doc,n.line),m||(m=Un(t,a));var Z=rt(a,t.doc.direction),re=n.ch,ae=n.sticky;if(re>=a.text.length?(re=a.text.length,ae="before"):re<=0&&(re=0,ae="after"),!Z)return X("before"==ae?re-1:re,"before"==ae);function we(Ye,tt,lt){return X(lt?Ye-1:Ye,1==Z[tt].level!=lt)}var Fe=He(Z,re,ae),Ue=je,Qe=we(re,Fe,"before"==ae);return null!=Ue&&(Qe.other=we(re,Ue,"before"!=ae)),Qe}function ll(t,n){var c=0;n=At(t.doc,n),t.options.lineWrapping||(c=ci(t.display)*n.ch);var a=xt(t.doc,n.line),m=Xr(a)+Lo(t.display);return{left:c,right:c,top:m,bottom:m+a.height}}function Us(t,n,c,a,m){var D=ot(t,n,c);return D.xRel=m,a&&(D.outside=a),D}function Ro(t,n,c){var a=t.doc;if((c+=t.display.viewOffset)<0)return Us(a.first,0,null,-1,-1);var m=bn(a,c),D=a.first+a.size-1;if(m>D)return Us(a.first+a.size-1,xt(a,D).text.length,null,1,1);n<0&&(n=0);for(var X=xt(a,m);;){var Z=$u(t,X,m,n,c),re=Bu(X,Z.ch+(Z.xRel>0||Z.outside>0?1:0));if(!re)return Z;var ae=re.find(1);if(ae.line==m)return ae;X=xt(a,m=ae.line)}}function ul(t,n,c,a){a-=Qs(n);var m=n.text.length,D=Se(function(X){return Jr(t,c,X-1).bottom<=a},m,0);return{begin:D,end:m=Se(function(X){return Jr(t,c,X).top>a},D,m)}}function Gs(t,n,c,a){return c||(c=Un(t,n)),ul(t,n,c,an(t,n,Jr(t,c,a),"line").top)}function Hs(t,n,c,a){return!(t.bottom<=c)&&(t.top>c||(a?t.left:t.right)>n)}function $u(t,n,c,a,m){m-=Xr(n);var D=Un(t,n),X=Qs(n),Z=0,re=n.text.length,ae=!0,we=rt(n,t.doc.direction);if(we){var Fe=(t.options.lineWrapping?fl:ef)(t,n,c,D,we,a,m);Z=(ae=1!=Fe.level)?Fe.from:Fe.to-1,re=ae?Fe.to:Fe.from-1}var tt,lt,Ue=null,Qe=null,Ye=Se(function(_t){var wt=Jr(t,D,_t);return wt.top+=X,wt.bottom+=X,!!Hs(wt,a,m,!1)&&(wt.top<=m&&wt.left<=a&&(Ue=_t,Qe=wt),!0)},Z,re),ct=!1;if(Qe){var dt=a-Qe.left<Qe.right-a,ht=dt==ae;Ye=Ue+(ht?0:1),lt=ht?"after":"before",tt=dt?Qe.left:Qe.right}else{!ae&&(Ye==re||Ye==Z)&&Ye++,lt=0==Ye?"after":Ye==n.text.length?"before":Jr(t,D,Ye-(ae?1:0)).bottom+X<=m==ae?"after":"before";var gt=Er(t,ot(c,Ye,lt),"line",n,D);tt=gt.left,ct=m<gt.top?-1:m>=gt.bottom?1:0}return Us(c,Ye=Le(n.text,Ye,1),lt,ct,a-tt)}function ef(t,n,c,a,m,D,X){var Z=Se(function(Fe){var Ue=m[Fe],Qe=1!=Ue.level;return Hs(Er(t,ot(c,Qe?Ue.to:Ue.from,Qe?"before":"after"),"line",n,a),D,X,!0)},0,m.length-1),re=m[Z];if(Z>0){var ae=1!=re.level,we=Er(t,ot(c,ae?re.from:re.to,ae?"after":"before"),"line",n,a);Hs(we,D,X,!0)&&we.top>X&&(re=m[Z-1])}return re}function fl(t,n,c,a,m,D,X){var Z=ul(t,n,a,X),re=Z.begin,ae=Z.end;/\s/.test(n.text.charAt(ae-1))&&ae--;for(var we=null,Fe=null,Ue=0;Ue<m.length;Ue++){var Qe=m[Ue];if(!(Qe.from>=ae||Qe.to<=re)){var tt=Jr(t,a,1!=Qe.level?Math.min(ae,Qe.to)-1:Math.max(re,Qe.from)).right,lt=tt<D?D-tt+1e9:tt-D;(!we||Fe>lt)&&(we=Qe,Fe=lt)}}return we||(we=m[m.length-1]),we.from<re&&(we={from:re,to:we.to,level:we.level}),we.to>ae&&(we={from:we.from,to:ae,level:we.level}),we}function Hn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Gn){Gn=ce("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)Gn.appendChild(document.createTextNode("x")),Gn.appendChild(ce("br"));Gn.appendChild(document.createTextNode("x"))}fe(t.measure,Gn);var c=Gn.offsetHeight/50;return c>3&&(t.cachedTextHeight=c),$(t.measure),c||1}function ci(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var n=ce("span","xxxxxxxxxx"),c=ce("pre",[n],"CodeMirror-line-like");fe(t.measure,c);var a=n.getBoundingClientRect(),m=(a.right-a.left)/10;return m>2&&(t.cachedCharWidth=m),m||10}function Ws(t){for(var n=t.display,c={},a={},m=n.gutters.clientLeft,D=n.gutters.firstChild,X=0;D;D=D.nextSibling,++X){var Z=t.display.gutterSpecs[X].className;c[Z]=D.offsetLeft+D.clientLeft+m,a[Z]=D.clientWidth}return{fixedPos:zs(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:c,gutterWidth:a,wrapperWidth:n.wrapper.clientWidth}}function zs(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function qs(t){var n=Hn(t.display),c=t.options.lineWrapping,a=c&&Math.max(5,t.display.scroller.clientWidth/ci(t.display)-3);return function(m){if(nn(t.doc,m))return 0;var D=0;if(m.widgets)for(var X=0;X<m.widgets.length;X++)m.widgets[X].height&&(D+=m.widgets[X].height);return c?D+(Math.ceil(m.text.length/a)||1)*n:D+n}}function Xs(t){var n=t.doc,c=qs(t);n.iter(function(a){var m=c(a);m!=a.height&&qr(a,m)})}function Wn(t,n,c,a){var m=t.display;if(!c&&"true"==Ei(n).getAttribute("cm-not-content"))return null;var D,X,Z=m.lineSpace.getBoundingClientRect();try{D=n.clientX-Z.left,X=n.clientY-Z.top}catch(Fe){return null}var ae,re=Ro(t,D,X);if(a&&re.xRel>0&&(ae=xt(t.doc,re.line).text).length==re.ch){var we=Ie(ae,ae.length,t.options.tabSize)-ae.length;re=ot(re.line,Math.max(0,Math.round((D-Io(t.display).left)/ci(t.display))-we))}return re}function Jt(t,n){if(n>=t.display.viewTo||(n-=t.display.viewFrom)<0)return null;for(var c=t.display.view,a=0;a<c.length;a++)if((n-=c[a].size)<0)return a}function Bt(t,n,c,a){null==n&&(n=t.doc.first),null==c&&(c=t.doc.first+t.doc.size),a||(a=0);var m=t.display;if(a&&c<m.viewTo&&(null==m.updateLineNumbers||m.updateLineNumbers>n)&&(m.updateLineNumbers=n),t.curOp.viewChanged=!0,n>=m.viewTo)tn&&Ts(t.doc,n)<m.viewTo&&kn(t);else if(c<=m.viewFrom)tn&&za(t.doc,c+a)>m.viewFrom?kn(t):(m.viewFrom+=a,m.viewTo+=a);else if(n<=m.viewFrom&&c>=m.viewTo)kn(t);else if(n<=m.viewFrom){var D=jo(t,c,c+a,1);D?(m.view=m.view.slice(D.index),m.viewFrom=D.lineN,m.viewTo+=a):kn(t)}else if(c>=m.viewTo){var X=jo(t,n,n,-1);X?(m.view=m.view.slice(0,X.index),m.viewTo=X.lineN):kn(t)}else{var Z=jo(t,n,n,-1),re=jo(t,c,c+a,1);Z&&re?(m.view=m.view.slice(0,Z.index).concat(Eo(t,Z.lineN,re.lineN)).concat(m.view.slice(re.index)),m.viewTo+=a):kn(t)}var ae=m.externalMeasured;ae&&(c<ae.lineN?ae.lineN+=a:n<ae.lineN+ae.size&&(m.externalMeasured=null))}function wn(t,n,c){t.curOp.viewChanged=!0;var a=t.display,m=t.display.externalMeasured;if(m&&n>=m.lineN&&n<m.lineN+m.size&&(a.externalMeasured=null),!(n<a.viewFrom||n>=a.viewTo)){var D=a.view[Jt(t,n)];if(null!=D.node){var X=D.changes||(D.changes=[]);-1==U(X,c)&&X.push(c)}}}function kn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function jo(t,n,c,a){var D,m=Jt(t,n),X=t.display.view;if(!tn||c==t.doc.first+t.doc.size)return{index:m,lineN:c};for(var Z=t.display.viewFrom,re=0;re<m;re++)Z+=X[re].size;if(Z!=n){if(a>0){if(m==X.length-1)return null;D=Z+X[m].size-n,m++}else D=Z-n;n+=D,c+=D}for(;Ts(t.doc,c)!=c;){if(m==(a<0?0:X.length-1))return null;c+=a*X[m-(a<0?1:0)].size,m+=a}return{index:m,lineN:c}}function cl(t){for(var n=t.display.view,c=0,a=0;a<n.length;a++){var m=n[a];!m.hidden&&(!m.node||m.changes)&&++c}return c}function Qi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Do(t,n){void 0===n&&(n=!0);var c=t.doc,a={},m=a.cursors=document.createDocumentFragment(),D=a.selection=document.createDocumentFragment(),X=t.options.$customCursor;X&&(n=!0);for(var Z=0;Z<c.sel.ranges.length;Z++)if(n||Z!=c.sel.primIndex){var re=c.sel.ranges[Z];if(!(re.from().line>=t.display.viewTo||re.to().line<t.display.viewFrom)){var ae=re.empty();if(X){var we=X(t,re);we&&Js(t,we,m)}else(ae||t.options.showCursorWhenSelecting)&&Js(t,re.head,m);ae||rf(t,re,D)}}return a}function Js(t,n,c){var a=Er(t,n,"div",null,null,!t.options.singleCursorHeightPerLine),m=c.appendChild(ce("div","\xa0","CodeMirror-cursor"));if(m.style.left=a.left+"px",m.style.top=a.top+"px",m.style.height=Math.max(0,a.bottom-a.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var D=ln(t,n,"div",null,null),X=D.right-D.left;m.style.width=(X>0?X:t.defaultCharWidth())+"px"}if(a.other){var Z=c.appendChild(ce("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Z.style.display="",Z.style.left=a.other.left+"px",Z.style.top=a.other.top+"px",Z.style.height=.85*(a.other.bottom-a.other.top)+"px"}}function Mo(t,n){return t.top-n.top||t.left-n.left}function rf(t,n,c){var a=t.display,m=t.doc,D=document.createDocumentFragment(),X=Io(t.display),Z=X.left,re=Math.max(a.sizerWidth,sn(t)-a.sizer.offsetLeft)-X.right,ae="ltr"==m.direction;function we(ht,gt,_t,wt){gt<0&&(gt=0),gt=Math.round(gt),wt=Math.round(wt),D.appendChild(ce("div",null,"CodeMirror-selected","position: absolute; left: "+ht+"px;\n                             top: "+gt+"px; width: "+(null==_t?re-ht:_t)+"px;\n                             height: "+(wt-gt)+"px"))}function Fe(ht,gt,_t){var Qt,ar,wt=xt(m,ht),Nt=wt.text.length;function Gt(Vt,kr){return ln(t,ot(ht,Vt),"div",wt,kr)}function xr(Vt,kr,fr){var er=Gs(t,wt,null,Vt),tr="ltr"==kr==("after"==fr)?"left":"right";return Gt("after"==fr?er.begin:er.end-(/\s/.test(wt.text.charAt(er.end-1))?2:1),tr)[tr]}var wr=rt(wt,m.direction);return function _e(t,n,c,a){if(!t)return a(n,c,"ltr",0);for(var m=!1,D=0;D<t.length;++D){var X=t[D];(X.from<c&&X.to>n||n==c&&X.to==n)&&(a(Math.max(X.from,n),Math.min(X.to,c),1==X.level?"rtl":"ltr",D),m=!0)}m||a(n,c,"ltr")}(wr,gt||0,null==_t?Nt:_t,function(Vt,kr,fr,er){var tr="ltr"==fr,Ht=Gt(Vt,tr?"left":"right"),_r=Gt(kr-1,tr?"right":"left"),Yn=null==gt&&0==Vt,In=null==_t&&kr==Nt,cr=0==er,Yr=!wr||er==wr.length-1;if(_r.top-Ht.top<=3){var Ca=(ae?In:Yn)&&Yr,Zr=(ae?Yn:In)&&cr?Z:(tr?Ht:_r).left,Zn=Ca?re:(tr?_r:Ht).right;we(Zr,Ht.top,Zn-Zr,Ht.bottom)}else{var $n,pr,_i,us;tr?($n=ae&&Yn&&cr?Z:Ht.left,pr=ae?re:xr(Vt,fr,"before"),_i=ae?Z:xr(kr,fr,"after"),us=ae&&In&&Yr?re:_r.right):($n=ae?xr(Vt,fr,"before"):Z,pr=!ae&&Yn&&cr?re:Ht.right,_i=!ae&&In&&Yr?Z:_r.left,us=ae?xr(kr,fr,"after"):re),we($n,Ht.top,pr-$n,Ht.bottom),Ht.bottom<_r.top&&we(Z,Ht.bottom,null,_r.top),we(_i,_r.top,us-_i,_r.bottom)}(!Qt||Mo(Ht,Qt)<0)&&(Qt=Ht),Mo(_r,Qt)<0&&(Qt=_r),(!ar||Mo(Ht,ar)<0)&&(ar=Ht),Mo(_r,ar)<0&&(ar=_r)}),{start:Qt,end:ar}}var Ue=n.from(),Qe=n.to();if(Ue.line==Qe.line)Fe(Ue.line,Ue.ch,Qe.ch);else{var Ye=xt(m,Ue.line),tt=xt(m,Qe.line),lt=nr(Ye)==nr(tt),ct=Fe(Ue.line,Ue.ch,lt?Ye.text.length+1:null).end,dt=Fe(Qe.line,lt?0:null,Qe.ch).start;lt&&(ct.top<dt.top-2?(we(ct.right,ct.top,null,ct.bottom),we(Z,dt.top,dt.left,dt.bottom)):we(ct.right,ct.top,dt.left-ct.right,ct.bottom)),ct.bottom<dt.top&&we(Z,ct.bottom,null,dt.top)}c.appendChild(D)}function Vs(t){if(t.state.focused){var n=t.display;clearInterval(n.blinker);var c=!0;n.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?n.blinker=setInterval(function(){t.hasFocus()||hi(t),n.cursorDiv.style.visibility=(c=!c)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function hl(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Po(t))}function Ks(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&hi(t))},100)}function Po(t,n){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(mt(t,"focus",t,n),t.state.focused=!0,ve(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),o&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Vs(t))}function hi(t,n){t.state.delayingBlurEvent||(t.state.focused&&(mt(t,"blur",t,n),t.state.focused=!1,V(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Ui(t){for(var n=t.display,c=n.lineDiv.offsetTop,a=Math.max(0,n.scroller.getBoundingClientRect().top),m=n.lineDiv.getBoundingClientRect().top,D=0,X=0;X<n.view.length;X++){var Z=n.view[X],re=t.options.lineWrapping,ae=void 0,we=0;if(!Z.hidden){if(m+=Z.line.height,y&&e<8){var Fe=Z.node.offsetTop+Z.node.offsetHeight;ae=Fe-c,c=Fe}else{var Ue=Z.node.getBoundingClientRect();ae=Ue.bottom-Ue.top,!re&&Z.text.firstChild&&(we=Z.text.firstChild.getBoundingClientRect().right-Ue.left-1)}var Qe=Z.line.height-ae;if((Qe>.005||Qe<-.005)&&(m<a&&(D-=Qe),qr(Z.line,ae),pl(Z.line),Z.rest))for(var Ye=0;Ye<Z.rest.length;Ye++)pl(Z.rest[Ye]);if(we>t.display.sizerWidth){var tt=Math.ceil(we/ci(t.display));tt>t.display.maxLineLength&&(t.display.maxLineLength=tt,t.display.maxLine=Z.line,t.display.maxLineChanged=!0)}}}Math.abs(D)>2&&(n.scroller.scrollTop+=D)}function pl(t){if(t.widgets)for(var n=0;n<t.widgets.length;++n){var c=t.widgets[n],a=c.node.parentNode;a&&(c.height=a.offsetHeight)}}function Bo(t,n,c){var a=c&&null!=c.top?Math.max(0,c.top):t.scroller.scrollTop;a=Math.floor(a-Lo(t));var m=c&&null!=c.bottom?c.bottom:a+t.wrapper.clientHeight,D=bn(n,a),X=bn(n,m);if(c&&c.ensure){var Z=c.ensure.from.line,re=c.ensure.to.line;Z<D?(D=Z,X=bn(n,Xr(xt(n,Z))+t.wrapper.clientHeight)):Math.min(re,n.lastLine())>=X&&(D=bn(n,Xr(xt(n,re))-t.wrapper.clientHeight),X=re)}return{from:D,to:Math.max(X,D+1)}}function Qo(t,n){var c=t.display,a=Hn(t.display);n.top<0&&(n.top=0);var m=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:c.scroller.scrollTop,D=Ds(t),X={};n.bottom-n.top>D&&(n.bottom=n.top+D);var Z=t.doc.height+xn(c),re=n.top<a,ae=n.bottom>Z-a;if(n.top<m)X.scrollTop=re?0:n.top;else if(n.bottom>m+D){var we=Math.min(n.top,(ae?Z:n.bottom)-D);we!=m&&(X.scrollTop=we)}var Fe=t.options.fixedGutter?0:c.gutters.offsetWidth,Ue=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:c.scroller.scrollLeft-Fe,Qe=sn(t)-c.gutters.offsetWidth,Ye=n.right-n.left>Qe;return Ye&&(n.right=n.left+Qe),n.left<10?X.scrollLeft=0:n.left<Ue?X.scrollLeft=Math.max(0,n.left+Fe-(Ye?0:10)):n.right>Qe+Ue-3&&(X.scrollLeft=n.right+(Ye?0:10)-Qe),X}function Ys(t,n){null!=n&&(Uo(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function pi(t){Uo(t);var n=t.getCursor();t.curOp.scrollToPos={from:n,to:n,margin:t.options.cursorScrollMargin}}function Gi(t,n,c){(null!=n||null!=c)&&Uo(t),null!=n&&(t.curOp.scrollLeft=n),null!=c&&(t.curOp.scrollTop=c)}function Uo(t){var n=t.curOp.scrollToPos;n&&(t.curOp.scrollToPos=null,Zs(t,ll(t,n.from),ll(t,n.to),n.margin))}function Zs(t,n,c,a){var m=Qo(t,{left:Math.min(n.left,c.left),top:Math.min(n.top,c.top)-a,right:Math.max(n.right,c.right),bottom:Math.max(n.bottom,c.bottom)+a});Gi(t,m.scrollLeft,m.scrollTop)}function Hi(t,n){Math.abs(t.doc.scrollTop-n)<2||(ue||ta(t,{top:n}),vl(t,n,!0),ue&&ta(t),Wi(t,100))}function vl(t,n,c){n=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,n)),(t.display.scroller.scrollTop!=n||c)&&(t.doc.scrollTop=n,t.display.scrollbars.setScrollTop(n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n))}function zn(t,n,c,a){n=Math.max(0,Math.min(n,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(!(c?n==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-n)<2)||a)&&(t.doc.scrollLeft=n,kl(t),t.display.scroller.scrollLeft!=n&&(t.display.scroller.scrollLeft=n),t.display.scrollbars.setScrollLeft(n))}function _n(t){var n=t.display,c=n.gutters.offsetWidth,a=Math.round(t.doc.height+xn(t.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:t.options.fixedGutter?c:0,docHeight:a,scrollHeight:a+mr(t)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:c}}var Cn=function(t,n,c){this.cm=c;var a=this.vert=ce("div",[ce("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),m=this.horiz=ce("div",[ce("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=m.tabIndex=-1,t(a),t(m),et(a,"scroll",function(){a.clientHeight&&n(a.scrollTop,"vertical")}),et(m,"scroll",function(){m.clientWidth&&n(m.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,y&&e<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Cn.prototype.update=function(t){var n=t.scrollWidth>t.clientWidth+1,c=t.scrollHeight>t.clientHeight+1,a=t.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=n?a+"px":"0";var m=t.viewHeight-(n?a:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+m)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(n){this.horiz.style.display="block",this.horiz.style.right=c?a+"px":"0",this.horiz.style.left=t.barLeft+"px";var D=t.viewWidth-t.barLeft-(c?a:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+D)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==a&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?a:0,bottom:n?a:0}},Cn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Cn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Cn.prototype.zeroWidthHack=function(){var t=P&&!v?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new qe,this.disableVert=new qe},Cn.prototype.enableZeroWidthBar=function(t,n,c){t.style.visibility="",n.set(1e3,function a(){var m=t.getBoundingClientRect();("vert"==c?document.elementFromPoint(m.right-1,(m.top+m.bottom)/2):document.elementFromPoint((m.right+m.left)/2,m.bottom-1))!=t?t.style.visibility="hidden":n.set(1e3,a)})},Cn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Sn=function(){};function qn(t,n){n||(n=_n(t));var c=t.display.barWidth,a=t.display.barHeight;gl(t,n);for(var m=0;m<4&&c!=t.display.barWidth||a!=t.display.barHeight;m++)c!=t.display.barWidth&&t.options.lineWrapping&&Ui(t),gl(t,_n(t)),c=t.display.barWidth,a=t.display.barHeight}function gl(t,n){var c=t.display,a=c.scrollbars.update(n);c.sizer.style.paddingRight=(c.barWidth=a.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=a.bottom)+"px",c.heightForcer.style.borderBottom=a.bottom+"px solid transparent",a.right&&a.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=a.bottom+"px",c.scrollbarFiller.style.width=a.right+"px"):c.scrollbarFiller.style.display="",a.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=a.bottom+"px",c.gutterFiller.style.width=n.gutterWidth+"px"):c.gutterFiller.style.display=""}Sn.prototype.update=function(){return{bottom:0,right:0}},Sn.prototype.setScrollLeft=function(){},Sn.prototype.setScrollTop=function(){},Sn.prototype.clear=function(){};var yl={native:Cn,null:Sn};function $s(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&V(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new yl[t.options.scrollbarStyle](function(n){t.display.wrapper.insertBefore(n,t.display.scrollbarFiller),et(n,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,c){"horizontal"==c?zn(t,n):Hi(t,n)},t),t.display.scrollbars.addClass&&ve(t.display.wrapper,t.display.scrollbars.addClass)}var af=0;function An(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++af,markArrays:null},function zu(t){Qn?Qn.ops.push(t):t.ownsGroup=Qn={ops:[t],delayedCallbacks:[]}}(t.curOp)}function Xn(t){var n=t.curOp;n&&function qu(t,n){var c=t.ownsGroup;if(c)try{!function Ka(t){var n=t.delayedCallbacks,c=0;do{for(;c<n.length;c++)n[c].call(null);for(var a=0;a<t.ops.length;a++){var m=t.ops[a];if(m.cursorActivityHandlers)for(;m.cursorActivityCalled<m.cursorActivityHandlers.length;)m.cursorActivityHandlers[m.cursorActivityCalled++].call(null,m.cm)}}while(c<n.length)}(c)}finally{Qn=null,n(c)}}(n,function(c){for(var a=0;a<c.ops.length;a++)c.ops[a].cm.curOp=null;!function lf(t){for(var n=t.ops,c=0;c<n.length;c++)uf(n[c]);for(var a=0;a<n.length;a++)ml(n[a]);for(var m=0;m<n.length;m++)ff(n[m]);for(var D=0;D<n.length;D++)bl(n[D]);for(var X=0;X<n.length;X++)cf(n[X])}(c)})}function uf(t){var n=t.cm,c=n.display;(function pf(t){var n=t.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=mr(t)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=mr(t)+"px",n.scrollbarsClipped=!0)})(n),t.updateMaxLine&&Fo(n),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<c.viewFrom||t.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&n.options.lineWrapping,t.update=t.mustUpdate&&new Go(n,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ml(t){t.updatedDisplay=t.mustUpdate&&ea(t.cm,t.update)}function ff(t){var n=t.cm,c=n.display;t.updatedDisplay&&Ui(n),t.barMeasure=_n(n),c.maxLineChanged&&!n.options.lineWrapping&&(t.adjustWidthTo=Ms(n,c.maxLine,c.maxLine.text.length).left+3,n.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+t.adjustWidthTo+mr(n)+n.display.barWidth),t.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+t.adjustWidthTo-sn(n))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=c.input.prepareSelection())}function bl(t){var n=t.cm;null!=t.adjustWidthTo&&(n.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<n.doc.scrollLeft&&zn(n,Math.min(n.display.scroller.scrollLeft,t.maxScrollLeft),!0),n.display.maxLineChanged=!1);var c=t.focus&&t.focus==ne(de(n));t.preparedSelection&&n.display.input.showSelection(t.preparedSelection,c),(t.updatedDisplay||t.startHeight!=n.doc.height)&&qn(n,t.barMeasure),t.updatedDisplay&&$t(n,t.barMeasure),t.selectionChanged&&Vs(n),n.state.focused&&t.updateInput&&n.display.input.reset(t.typing),c&&hl(t.cm)}function cf(t){var n=t.cm,c=n.display,a=n.doc;if(t.updatedDisplay&&xl(n,t.update),null!=c.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),null!=t.scrollTop&&vl(n,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&zn(n,t.scrollLeft,!0,!0),t.scrollToPos){var m=function of(t,n,c,a){var m;null==a&&(a=0),!t.options.lineWrapping&&n==c&&(c="before"==n.sticky?ot(n.line,n.ch+1,"before"):n,n=n.ch?ot(n.line,"before"==n.sticky?n.ch-1:n.ch,"after"):n);for(var D=0;D<5;D++){var X=!1,Z=Er(t,n),re=c&&c!=n?Er(t,c):Z,ae=Qo(t,m={left:Math.min(Z.left,re.left),top:Math.min(Z.top,re.top)-a,right:Math.max(Z.left,re.left),bottom:Math.max(Z.bottom,re.bottom)+a}),we=t.doc.scrollTop,Fe=t.doc.scrollLeft;if(null!=ae.scrollTop&&(Hi(t,ae.scrollTop),Math.abs(t.doc.scrollTop-we)>1&&(X=!0)),null!=ae.scrollLeft&&(zn(t,ae.scrollLeft),Math.abs(t.doc.scrollLeft-Fe)>1&&(X=!0)),!X)break}return m}(n,At(a,t.scrollToPos.from),At(a,t.scrollToPos.to),t.scrollToPos.margin);!function nf(t,n){if(!bt(t,"scrollCursorIntoView")){var c=t.display,a=c.sizer.getBoundingClientRect(),m=null,D=c.wrapper.ownerDocument;if(n.top+a.top<0?m=!0:n.bottom+a.top>(D.defaultView.innerHeight||D.documentElement.clientHeight)&&(m=!1),null!=m&&!f){var X=ce("div","\u200b",null,"position: absolute;\n                         top: "+(n.top-c.viewOffset-Lo(t.display))+"px;\n                         height: "+(n.bottom-n.top+mr(t)+c.barHeight)+"px;\n                         left: "+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");t.display.lineSpace.appendChild(X),X.scrollIntoView(m),t.display.lineSpace.removeChild(X)}}}(n,m)}var D=t.maybeHiddenMarkers,X=t.maybeUnhiddenMarkers;if(D)for(var Z=0;Z<D.length;++Z)D[Z].lines.length||mt(D[Z],"hide");if(X)for(var re=0;re<X.length;++re)X[re].lines.length&&mt(X[re],"unhide");c.wrapper.offsetHeight&&(a.scrollTop=n.display.scroller.scrollTop),t.changeObjs&&mt(n,"changes",n,t.changeObjs),t.update&&t.update.finish()}function Fr(t,n){if(t.curOp)return n();An(t);try{return n()}finally{Xn(t)}}function or(t,n){return function(){if(t.curOp)return n.apply(t,arguments);An(t);try{return n.apply(t,arguments)}finally{Xn(t)}}}function vr(t){return function(){if(this.curOp)return t.apply(this,arguments);An(this);try{return t.apply(this,arguments)}finally{Xn(this)}}}function sr(t){return function(){var n=this.cm;if(!n||n.curOp)return t.apply(this,arguments);An(n);try{return t.apply(this,arguments)}finally{Xn(n)}}}function Wi(t,n){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(n,Ee(hf,t))}function hf(t){var n=t.doc;if(!(n.highlightFrontier>=t.display.viewTo)){var c=+new Date+t.options.workTime,a=Oi(t,n.highlightFrontier),m=[];n.iter(a.line,Math.min(n.first+n.size,t.display.viewTo+500),function(D){if(a.line>=t.display.viewFrom){var X=D.styles,Z=D.text.length>t.options.maxHighlightLength?Ir(n.mode,a.state):null,re=ja(t,D,a,!0);Z&&(a.state=Z),D.styles=re.styles;var ae=D.styleClasses,we=re.classes;we?D.styleClasses=we:ae&&(D.styleClasses=null);for(var Fe=!X||X.length!=D.styles.length||ae!=we&&(!ae||!we||ae.bgClass!=we.bgClass||ae.textClass!=we.textClass),Ue=0;!Fe&&Ue<X.length;++Ue)Fe=X[Ue]!=D.styles[Ue];Fe&&m.push(a.line),D.stateAfter=a.save(),a.nextLine()}else D.text.length<=t.options.maxHighlightLength&&wo(t,D.text,a),D.stateAfter=a.line%5==0?a.save():null,a.nextLine();if(+new Date>c)return Wi(t,t.options.workDelay),!0}),n.highlightFrontier=a.line,n.modeFrontier=Math.max(n.modeFrontier,a.line),m.length&&Fr(t,function(){for(var D=0;D<m.length;D++)wn(t,m[D],"text")})}}var Go=function(t,n,c){var a=t.display;this.viewport=n,this.visible=Bo(a,t.doc,n),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=sn(t),this.force=c,this.dims=Ws(t),this.events=[]};function ea(t,n){var c=t.display,a=t.doc;if(n.editorIsHidden)return kn(t),!1;if(!n.force&&n.visible.from>=c.viewFrom&&n.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==cl(t))return!1;_l(t)&&(kn(t),n.dims=Ws(t));var m=a.first+a.size,D=Math.max(n.visible.from-t.options.viewportMargin,a.first),X=Math.min(m,n.visible.to+t.options.viewportMargin);c.viewFrom<D&&D-c.viewFrom<20&&(D=Math.max(a.first,c.viewFrom)),c.viewTo>X&&c.viewTo-X<20&&(X=Math.min(m,c.viewTo)),tn&&(D=Ts(t.doc,D),X=za(t.doc,X));var Z=D!=c.viewFrom||X!=c.viewTo||c.lastWrapHeight!=n.wrapperHeight||c.lastWrapWidth!=n.wrapperWidth;(function tf(t,n,c){var a=t.display;0==a.view.length||n>=a.viewTo||c<=a.viewFrom?(a.view=Eo(t,n,c),a.viewFrom=n):(a.viewFrom>n?a.view=Eo(t,n,a.viewFrom).concat(a.view):a.viewFrom<n&&(a.view=a.view.slice(Jt(t,n))),a.viewFrom=n,a.viewTo<c?a.view=a.view.concat(Eo(t,a.viewTo,c)):a.viewTo>c&&(a.view=a.view.slice(0,Jt(t,c)))),a.viewTo=c})(t,D,X),c.viewOffset=Xr(xt(t.doc,c.viewFrom)),t.display.mover.style.top=c.viewOffset+"px";var re=cl(t);if(!Z&&0==re&&!n.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;var ae=function df(t){if(t.hasFocus())return null;var n=ne(de(t));if(!n||!se(t.display.lineDiv,n))return null;var c={activeElt:n};if(window.getSelection){var a=ye(t).getSelection();a.anchorNode&&a.extend&&se(t.display.lineDiv,a.anchorNode)&&(c.anchorNode=a.anchorNode,c.anchorOffset=a.anchorOffset,c.focusNode=a.focusNode,c.focusOffset=a.focusOffset)}return c}(t);return re>4&&(c.lineDiv.style.display="none"),function wl(t,n,c){var a=t.display,m=t.options.lineNumbers,D=a.lineDiv,X=D.firstChild;function Z(Ye){var tt=Ye.nextSibling;return o&&P&&t.display.currentWheelTarget==Ye?Ye.style.display="none":Ye.parentNode.removeChild(Ye),tt}for(var re=a.view,ae=a.viewFrom,we=0;we<re.length;we++){var Fe=re[we];if(!Fe.hidden)if(Fe.node&&Fe.node.parentNode==D){for(;X!=Fe.node;)X=Z(X);var Qe=m&&null!=n&&n<=ae&&Fe.lineNumber;Fe.changes&&(U(Fe.changes,"gutter")>-1&&(Qe=!1),Za(t,Fe,ae,c)),Qe&&($(Fe.lineNumber),Fe.lineNumber.appendChild(document.createTextNode(yo(t.options,ae)))),X=Fe.node.nextSibling}else{var Ue=el(t,Fe,ae,c);D.insertBefore(Ue,X)}ae+=Fe.size}for(;X;)X=Z(X)}(t,c.updateLineNumbers,n.dims),re>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,function vf(t){if(t&&t.activeElt&&t.activeElt!=ne(t.activeElt.ownerDocument)&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&se(document.body,t.anchorNode)&&se(document.body,t.focusNode))){var n=t.activeElt.ownerDocument,c=n.defaultView.getSelection(),a=n.createRange();a.setEnd(t.anchorNode,t.anchorOffset),a.collapse(!1),c.removeAllRanges(),c.addRange(a),c.extend(t.focusNode,t.focusOffset)}}(ae),$(c.cursorDiv),$(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,Z&&(c.lastWrapHeight=n.wrapperHeight,c.lastWrapWidth=n.wrapperWidth,Wi(t,400)),c.updateLineNumbers=null,!0}function xl(t,n){for(var c=n.viewport,a=!0;;a=!1){if(a&&t.options.lineWrapping&&n.oldDisplayWidth!=sn(t))a&&(n.visible=Bo(t.display,t.doc,c));else if(c&&null!=c.top&&(c={top:Math.min(t.doc.height+xn(t.display)-Ds(t),c.top)}),n.visible=Bo(t.display,t.doc,c),n.visible.from>=t.display.viewFrom&&n.visible.to<=t.display.viewTo)break;if(!ea(t,n))break;Ui(t);var m=_n(t);Qi(t),qn(t,m),$t(t,m),n.force=!1}n.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(n.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ta(t,n){var c=new Go(t,n);if(ea(t,c)){Ui(t),xl(t,c);var a=_n(t);Qi(t),qn(t,a),$t(t,a),c.finish()}}function Zt(t){var n=t.gutters.offsetWidth;t.sizer.style.marginLeft=n+"px",ir(t,"gutterChanged",t)}function $t(t,n){t.display.sizer.style.minHeight=n.docHeight+"px",t.display.heightForcer.style.top=n.docHeight+"px",t.display.gutters.style.height=n.docHeight+t.display.barHeight+mr(t)+"px"}function kl(t){var n=t.display,c=n.view;if(n.alignWidgets||n.gutters.firstChild&&t.options.fixedGutter){for(var a=zs(n)-n.scroller.scrollLeft+t.doc.scrollLeft,m=n.gutters.offsetWidth,D=a+"px",X=0;X<c.length;X++)if(!c[X].hidden){t.options.fixedGutter&&(c[X].gutter&&(c[X].gutter.style.left=D),c[X].gutterBackground&&(c[X].gutterBackground.style.left=D));var Z=c[X].alignable;if(Z)for(var re=0;re<Z.length;re++)Z[re].style.left=D}t.options.fixedGutter&&(n.gutters.style.left=a+m+"px")}}function _l(t){if(!t.options.lineNumbers)return!1;var n=t.doc,c=yo(t.options,n.first+n.size-1),a=t.display;if(c.length!=a.lineNumChars){var m=a.measure.appendChild(ce("div",[ce("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),D=m.firstChild.offsetWidth,X=m.offsetWidth-D;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(D,a.lineGutter.offsetWidth-X)+1,a.lineNumWidth=a.lineNumInnerWidth+X,a.lineNumChars=a.lineNumInnerWidth?c.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",Zt(t.display),!0}return!1}function ra(t,n){for(var c=[],a=!1,m=0;m<t.length;m++){var D=t[m],X=null;if("string"!=typeof D&&(X=D.style,D=D.className),"CodeMirror-linenumbers"==D){if(!n)continue;a=!0}c.push({className:D,style:X})}return n&&!a&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function Cl(t){var n=t.gutters,c=t.gutterSpecs;$(n),t.lineGutter=null;for(var a=0;a<c.length;++a){var m=c[a],D=m.className,X=m.style,Z=n.appendChild(ce("div",null,"CodeMirror-gutter "+D));X&&(Z.style.cssText=X),"CodeMirror-linenumbers"==D&&(t.lineGutter=Z,Z.style.width=(t.lineNumWidth||1)+"px")}n.style.display=c.length?"":"none",Zt(t)}function zi(t){Cl(t.display),Bt(t),kl(t)}function gf(t,n,c,a){var m=this;this.input=c,m.scrollbarFiller=ce("div",null,"CodeMirror-scrollbar-filler"),m.scrollbarFiller.setAttribute("cm-not-content","true"),m.gutterFiller=ce("div",null,"CodeMirror-gutter-filler"),m.gutterFiller.setAttribute("cm-not-content","true"),m.lineDiv=xe("div",null,"CodeMirror-code"),m.selectionDiv=ce("div",null,null,"position: relative; z-index: 1"),m.cursorDiv=ce("div",null,"CodeMirror-cursors"),m.measure=ce("div",null,"CodeMirror-measure"),m.lineMeasure=ce("div",null,"CodeMirror-measure"),m.lineSpace=xe("div",[m.measure,m.lineMeasure,m.selectionDiv,m.cursorDiv,m.lineDiv],null,"position: relative; outline: none");var D=xe("div",[m.lineSpace],"CodeMirror-lines");m.mover=ce("div",[D],null,"position: relative"),m.sizer=ce("div",[m.mover],"CodeMirror-sizer"),m.sizerWidth=null,m.heightForcer=ce("div",null,null,"position: absolute; height: 50px; width: 1px;"),m.gutters=ce("div",null,"CodeMirror-gutters"),m.lineGutter=null,m.scroller=ce("div",[m.sizer,m.heightForcer,m.gutters],"CodeMirror-scroll"),m.scroller.setAttribute("tabIndex","-1"),m.wrapper=ce("div",[m.scrollbarFiller,m.gutterFiller,m.scroller],"CodeMirror"),m.wrapper.setAttribute("translate","no"),y&&e<8&&(m.gutters.style.zIndex=-1,m.scroller.style.paddingRight=0),!o&&!(ue&&E)&&(m.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(m.wrapper):t(m.wrapper)),m.viewFrom=m.viewTo=n.first,m.reportedViewFrom=m.reportedViewTo=n.first,m.view=[],m.renderedView=null,m.externalMeasured=null,m.viewOffset=0,m.lastWrapHeight=m.lastWrapWidth=0,m.updateLineNumbers=null,m.nativeBarWidth=m.barHeight=m.barWidth=0,m.scrollbarsClipped=!1,m.lineNumWidth=m.lineNumInnerWidth=m.lineNumChars=null,m.alignWidgets=!1,m.cachedCharWidth=m.cachedTextHeight=m.cachedPaddingH=null,m.maxLine=null,m.maxLineLength=0,m.maxLineChanged=!1,m.wheelDX=m.wheelDY=m.wheelStartX=m.wheelStartY=null,m.shift=!1,m.selForContextMenu=null,m.activeTouch=null,m.gutterSpecs=ra(a.gutters,a.lineNumbers),Cl(m),c.init(m)}Go.prototype.signal=function(t,n){st(t,n)&&this.events.push(arguments)},Go.prototype.finish=function(){for(var t=0;t<this.events.length;t++)mt.apply(null,this.events[t])};var Ho=0,un=null;function Sl(t){var n=t.wheelDeltaX,c=t.wheelDeltaY;return null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==c&&t.detail&&t.axis==t.VERTICAL_AXIS?c=t.detail:null==c&&(c=t.wheelDelta),{x:n,y:c}}function yf(t){var n=Sl(t);return n.x*=un,n.y*=un,n}function Al(t,n){d&&102==b&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout(function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""},100));var c=Sl(n),a=c.x,m=c.y,D=un;0===n.deltaMode&&(a=n.deltaX,m=n.deltaY,D=1);var X=t.display,Z=X.scroller,re=Z.scrollWidth>Z.clientWidth,ae=Z.scrollHeight>Z.clientHeight;if(a&&re||m&&ae){if(m&&P&&o)e:for(var we=n.target,Fe=X.view;we!=Z;we=we.parentNode)for(var Ue=0;Ue<Fe.length;Ue++)if(Fe[Ue].node==we){t.display.currentWheelTarget=we;break e}if(a&&!ue&&!h&&null!=D)return m&&ae&&Hi(t,Math.max(0,Z.scrollTop+m*D)),zn(t,Math.max(0,Z.scrollLeft+a*D)),(!m||m&&ae)&&Ct(n),void(X.wheelStartX=null);if(m&&null!=D){var Qe=m*D,Ye=t.doc.scrollTop,tt=Ye+X.wrapper.clientHeight;Qe<0?Ye=Math.max(0,Ye+Qe-50):tt=Math.min(t.doc.height,tt+Qe+50),ta(t,{top:Ye,bottom:tt})}Ho<20&&0!==n.deltaMode&&(null==X.wheelStartX?(X.wheelStartX=Z.scrollLeft,X.wheelStartY=Z.scrollTop,X.wheelDX=a,X.wheelDY=m,setTimeout(function(){if(null!=X.wheelStartX){var lt=Z.scrollLeft-X.wheelStartX,ct=Z.scrollTop-X.wheelStartY,dt=ct&&X.wheelDY&&ct/X.wheelDY||lt&&X.wheelDX&&lt/X.wheelDX;X.wheelStartX=X.wheelStartY=null,dt&&(un=(un*Ho+dt)/(Ho+1),++Ho)}},200)):(X.wheelDX+=a,X.wheelDY+=m))}}y?un=-.53:ue?un=15:d?un=-.7:k&&(un=-1/3);var Tr=function(t,n){this.ranges=t,this.primIndex=n};Tr.prototype.primary=function(){return this.ranges[this.primIndex]},Tr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var c=this.ranges[n],a=t.ranges[n];if(!ks(c.anchor,a.anchor)||!ks(c.head,a.head))return!1}return!0},Tr.prototype.deepCopy=function(){for(var t=[],n=0;n<this.ranges.length;n++)t[n]=new Dt(mo(this.ranges[n].anchor),mo(this.ranges[n].head));return new Tr(t,this.primIndex)},Tr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Tr.prototype.contains=function(t,n){n||(n=t);for(var c=0;c<this.ranges.length;c++){var a=this.ranges[c];if(St(n,a.from())>=0&&St(t,a.to())<=0)return c}return-1};var Dt=function(t,n){this.anchor=t,this.head=n};function Dr(t,n,c){var a=t&&t.options.selectionsMayTouch,m=n[c];n.sort(function(Ue,Qe){return St(Ue.from(),Qe.from())}),c=U(n,m);for(var D=1;D<n.length;D++){var X=n[D],Z=n[D-1],re=St(Z.to(),X.from());if(a&&!X.empty()?re>0:re>=0){var ae=Ii(Z.from(),X.from()),we=bo(Z.to(),X.to()),Fe=Z.empty()?X.from()==X.head:Z.from()==Z.head;D<=c&&--c,n.splice(--D,2,new Dt(Fe?we:ae,Fe?ae:we))}}return new Tr(n,c)}function Fn(t,n){return new Tr([new Dt(t,n||t)],0)}function En(t){return t.text?ot(t.from.line+t.text.length-1,at(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Fl(t,n){if(St(t,n.from)<0)return t;if(St(t,n.to)<=0)return En(n);var c=t.line+n.text.length-(n.to.line-n.from.line)-1,a=t.ch;return t.line==n.to.line&&(a+=En(n).ch-n.to.ch),ot(c,a)}function na(t,n){for(var c=[],a=0;a<t.sel.ranges.length;a++){var m=t.sel.ranges[a];c.push(new Dt(Fl(m.anchor,n),Fl(m.head,n)))}return Dr(t.cm,c,t.sel.primIndex)}function El(t,n,c){return t.line==n.line?ot(c.line,t.ch-n.ch+c.ch):ot(c.line+(t.line-n.line),t.ch)}function ia(t){t.doc.mode=ii(t.options,t.doc.modeOption),qi(t)}function qi(t){t.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Wi(t,100),t.state.modeGen++,t.curOp&&Bt(t)}function Xi(t,n){return 0==n.from.ch&&0==n.to.ch&&""==at(n.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function di(t,n,c,a){function m(dt){return c?c[dt]:null}function D(dt,ht,gt){(function qa(t,n,c,a){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Di(t),Fs(t,c);var m=a?a(t):1;m!=t.height&&qr(t,m)})(dt,ht,gt,a),ir(dt,"change",dt,n)}function X(dt,ht){for(var gt=[],_t=dt;_t<ht;++_t)gt.push(new oi(ae[_t],m(_t),a));return gt}var Z=n.from,re=n.to,ae=n.text,we=xt(t,Z.line),Fe=xt(t,re.line),Ue=at(ae),Qe=m(ae.length-1),Ye=re.line-Z.line;if(n.full)t.insert(0,X(0,ae.length)),t.remove(ae.length,t.size-ae.length);else if(Xi(t,n)){var tt=X(0,ae.length-1);D(Fe,Fe.text,Qe),Ye&&t.remove(Z.line,Ye),tt.length&&t.insert(Z.line,tt)}else if(we==Fe)if(1==ae.length)D(we,we.text.slice(0,Z.ch)+Ue+we.text.slice(re.ch),Qe);else{var lt=X(1,ae.length-1);lt.push(new oi(Ue+we.text.slice(re.ch),Qe,a)),D(we,we.text.slice(0,Z.ch)+ae[0],m(0)),t.insert(Z.line+1,lt)}else if(1==ae.length)D(we,we.text.slice(0,Z.ch)+ae[0]+Fe.text.slice(re.ch),m(0)),t.remove(Z.line+1,Ye);else{D(we,we.text.slice(0,Z.ch)+ae[0],m(0)),D(Fe,Ue+Fe.text.slice(re.ch),Qe);var ct=X(1,ae.length-1);Ye>1&&t.remove(Z.line+1,Ye-1),t.insert(Z.line+1,ct)}ir(t,"change",t,n)}function fn(t,n,c){!function a(m,D,X){if(m.linked)for(var Z=0;Z<m.linked.length;++Z){var re=m.linked[Z];if(re.doc!=D){var ae=X&&re.sharedHist;c&&!ae||(n(re.doc,ae),a(re.doc,m,ae))}}}(t,null,!0)}function Tl(t,n){if(n.cm)throw new Error("This document is already in use.");t.doc=n,n.cm=t,Xs(t),ia(t),Nl(t),t.options.direction=n.direction,t.options.lineWrapping||Fo(t),t.options.mode=n.modeOption,Bt(t)}function Nl(t){("rtl"==t.doc.direction?ve:V)(t.display.lineDiv,"CodeMirror-rtl")}function Wo(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function oa(t,n){var c={from:mo(n.from),to:En(n),text:Mn(t,n.from,n.to)};return Ji(t,c,n.from.line,n.to.line+1),fn(t,function(a){return Ji(a,c,n.from.line,n.to.line+1)},!0),c}function Ll(t){for(;t.length;){if(!at(t).ranges)break;t.pop()}}function Il(t,n,c,a){var m=t.history;m.undone.length=0;var X,Z,D=+new Date;if((m.lastOp==a||m.lastOrigin==n.origin&&n.origin&&("+"==n.origin.charAt(0)&&m.lastModTime>D-(t.cm?t.cm.options.historyEventDelay:500)||"*"==n.origin.charAt(0)))&&(X=function xf(t,n){return n?(Ll(t.done),at(t.done)):t.done.length&&!at(t.done).ranges?at(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),at(t.done)):void 0}(m,m.lastOp==a)))Z=at(X.changes),0==St(n.from,n.to)&&0==St(n.from,Z.to)?Z.to=En(n):X.changes.push(oa(t,n));else{var re=at(m.done);for((!re||!re.ranges)&&zo(t.sel,m.done),X={changes:[oa(t,n)],generation:m.generation},m.done.push(X);m.done.length>m.undoDepth;)m.done.shift(),m.done[0].ranges||m.done.shift()}m.done.push(c),m.generation=++m.maxGeneration,m.lastModTime=m.lastSelTime=D,m.lastOp=m.lastSelOp=a,m.lastOrigin=m.lastSelOrigin=n.origin,Z||mt(t,"historyAdded")}function kf(t,n,c,a){var m=t.history,D=a&&a.origin;c==m.lastSelOp||D&&m.lastSelOrigin==D&&(m.lastModTime==m.lastSelTime&&m.lastOrigin==D||function wf(t,n,c,a){var m=n.charAt(0);return"*"==m||"+"==m&&c.ranges.length==a.ranges.length&&c.somethingSelected()==a.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,D,at(m.done),n))?m.done[m.done.length-1]=n:zo(n,m.done),m.lastSelTime=+new Date,m.lastSelOrigin=D,m.lastSelOp=c,a&&!1!==a.clearRedo&&Ll(m.undone)}function zo(t,n){var c=at(n);c&&c.ranges&&c.equals(t)||n.push(t)}function Ji(t,n,c,a){var m=n["spans_"+t.id],D=0;t.iter(Math.max(t.first,c),Math.min(t.first+t.size,a),function(X){X.markedSpans&&((m||(m=n["spans_"+t.id]={}))[D]=X.markedSpans),++D})}function qo(t){if(!t)return null;for(var n,c=0;c<t.length;++c)t[c].marker.explicitlyCleared?n||(n=t.slice(0,c)):n&&n.push(t[c]);return n?n.length?n:null:t}function Ol(t,n){var c=function _f(t,n){var c=n["spans_"+t.id];if(!c)return null;for(var a=[],m=0;m<n.text.length;++m)a.push(qo(c[m]));return a}(t,n),a=ko(t,n);if(!c)return a;if(!a)return c;for(var m=0;m<c.length;++m){var D=c[m],X=a[m];if(D&&X)e:for(var Z=0;Z<X.length;++Z){for(var re=X[Z],ae=0;ae<D.length;++ae)if(D[ae].marker==re.marker)continue e;D.push(re)}else X&&(c[m]=X)}return c}function Or(t,n,c){for(var a=[],m=0;m<t.length;++m){var D=t[m];if(D.ranges)a.push(c?Tr.prototype.deepCopy.call(D):D);else{var X=D.changes,Z=[];a.push({changes:Z});for(var re=0;re<X.length;++re){var ae=X[re],we=void 0;if(Z.push({from:ae.from,to:ae.to,text:ae.text}),n)for(var Fe in ae)(we=Fe.match(/^spans_(\d+)$/))&&U(n,Number(we[1]))>-1&&(at(Z)[Fe]=ae[Fe],delete ae[Fe])}}}return a}function cn(t,n,c,a){if(a){var m=t.anchor;if(c){var D=St(n,m)<0;D!=St(c,m)<0?(m=n,n=c):D!=St(n,c)<0&&(n=c)}return new Dt(m,n)}return new Dt(c||n,n)}function Xo(t,n,c,a,m){null==m&&(m=t.cm&&(t.cm.display.shift||t.extend)),hr(t,new Tr([cn(t.sel.primary(),n,c,m)],0),a)}function Rl(t,n,c){for(var a=[],m=t.cm&&(t.cm.display.shift||t.extend),D=0;D<t.sel.ranges.length;D++)a[D]=cn(t.sel.ranges[D],n[D],null,m);hr(t,Dr(t.cm,a,t.sel.primIndex),c)}function sa(t,n,c,a){var m=t.sel.ranges.slice(0);m[n]=c,hr(t,Dr(t.cm,m,t.sel.primIndex),a)}function jl(t,n,c,a){hr(t,Fn(n,c),a)}function aa(t,n,c){var a=t.history.done,m=at(a);m&&m.ranges?(a[a.length-1]=n,Jo(t,n,c)):hr(t,n,c)}function hr(t,n,c){Jo(t,n,c),kf(t,t.sel,t.cm?t.cm.curOp.id:NaN,c)}function Jo(t,n,c){(st(t,"beforeSelectionChange")||t.cm&&st(t.cm,"beforeSelectionChange"))&&(n=function Dl(t,n,c){var a={ranges:n.ranges,update:function(m){this.ranges=[];for(var D=0;D<m.length;D++)this.ranges[D]=new Dt(At(t,m[D].anchor),At(t,m[D].head))},origin:c&&c.origin};return mt(t,"beforeSelectionChange",t,a),t.cm&&mt(t.cm,"beforeSelectionChange",t.cm,a),a.ranges!=n.ranges?Dr(t.cm,a.ranges,a.ranges.length-1):n}(t,n,c));var a=c&&c.bias||(St(n.primary().head,t.sel.primary().head)<0?-1:1);Vo(t,hn(t,n,a,!0)),(!c||!1!==c.scroll)&&t.cm&&"nocursor"!=t.cm.getOption("readOnly")&&pi(t.cm)}function Vo(t,n){n.equals(t.sel)||(t.sel=n,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,yt(t.cm)),ir(t,"cursorActivity",t))}function Ko(t){Vo(t,hn(t,t.sel,null,!1))}function hn(t,n,c,a){for(var m,D=0;D<n.ranges.length;D++){var X=n.ranges[D],Z=n.ranges.length==t.sel.ranges.length&&t.sel.ranges[D],re=Yo(t,X.anchor,Z&&Z.anchor,c,a),ae=X.head==X.anchor?re:Yo(t,X.head,Z&&Z.head,c,a);(m||re!=X.anchor||ae!=X.head)&&(m||(m=n.ranges.slice(0,D)),m[D]=new Dt(re,ae))}return m?Dr(t.cm,m,n.primIndex):n}function Nr(t,n,c,a,m){var D=xt(t,n.line);if(D.markedSpans)for(var X=0;X<D.markedSpans.length;++X){var Z=D.markedSpans[X],re=Z.marker,ae="selectLeft"in re?!re.selectLeft:re.inclusiveLeft,we="selectRight"in re?!re.selectRight:re.inclusiveRight;if((null==Z.from||(ae?Z.from<=n.ch:Z.from<n.ch))&&(null==Z.to||(we?Z.to>=n.ch:Z.to>n.ch))){if(m&&(mt(re,"beforeCursorEnter"),re.explicitlyCleared)){if(D.markedSpans){--X;continue}break}if(!re.atomic)continue;if(c){var Fe=re.find(a<0?1:-1),Ue=void 0;if((a<0?we:ae)&&(Fe=Zo(t,Fe,-a,Fe&&Fe.line==n.line?D:null)),Fe&&Fe.line==n.line&&(Ue=St(Fe,c))&&(a<0?Ue<0:Ue>0))return Nr(t,Fe,n,a,m)}var Qe=re.find(a<0?-1:1);return(a<0?ae:we)&&(Qe=Zo(t,Qe,a,Qe.line==n.line?D:null)),Qe?Nr(t,Qe,n,a,m):null}}return n}function Yo(t,n,c,a,m){var D=a||1;return Nr(t,n,c,D,m)||!m&&Nr(t,n,c,D,!0)||Nr(t,n,c,-D,m)||!m&&Nr(t,n,c,-D,!0)||(t.cantEdit=!0,ot(t.first,0))}function Zo(t,n,c,a){return c<0&&0==n.ch?n.line>t.first?At(t,ot(n.line-1)):null:c>0&&n.ch==(a||xt(t,n.line)).text.length?n.line<t.first+t.size-1?ot(n.line+1,0):null:new ot(n.line,n.ch+c)}function $o(t){t.setSelection(ot(t.firstLine(),0),ot(t.lastLine()),pe)}function Ml(t,n,c){var a={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return a.canceled=!0}};return c&&(a.update=function(m,D,X,Z){m&&(a.from=At(t,m)),D&&(a.to=At(t,D)),X&&(a.text=X),void 0!==Z&&(a.origin=Z)}),mt(t,"beforeChange",t,a),t.cm&&mt(t.cm,"beforeChange",t.cm,a),a.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function vi(t,n,c){if(t.cm){if(!t.cm.curOp)return or(t.cm,vi)(t,n,c);if(t.cm.state.suppressEdits)return}if(!(st(t,"beforeChange")||t.cm&&st(t.cm,"beforeChange"))||(n=Ml(t,n,!0))){var a=As&&!c&&function Pu(t,n,c){var a=null;if(t.iter(n.line,c.line+1,function(Qe){if(Qe.markedSpans)for(var Ye=0;Ye<Qe.markedSpans.length;++Ye){var tt=Qe.markedSpans[Ye].marker;tt.readOnly&&(!a||-1==U(a,tt))&&(a||(a=[])).push(tt)}}),!a)return null;for(var m=[{from:n,to:c}],D=0;D<a.length;++D)for(var X=a[D],Z=X.find(0),re=0;re<m.length;++re){var ae=m[re];if(!(St(ae.to,Z.from)<0||St(ae.from,Z.to)>0)){var we=[re,1],Fe=St(ae.from,Z.from),Ue=St(ae.to,Z.to);(Fe<0||!X.inclusiveLeft&&!Fe)&&we.push({from:ae.from,to:Z.from}),(Ue>0||!X.inclusiveRight&&!Ue)&&we.push({from:Z.to,to:ae.to}),m.splice.apply(m,we),re+=we.length-3}}return m}(t,n.from,n.to);if(a)for(var m=a.length-1;m>=0;--m)Pl(t,{from:a[m].from,to:a[m].to,text:m?[""]:n.text,origin:n.origin});else Pl(t,n)}}function Pl(t,n){if(1!=n.text.length||""!=n.text[0]||0!=St(n.from,n.to)){var c=na(t,n);Il(t,n,c,t.cm?t.cm.curOp.id:NaN),Vi(t,n,c,ko(t,n));var a=[];fn(t,function(m,D){!D&&-1==U(a,m.history)&&(ns(m.history,n),a.push(m.history)),Vi(m,n,null,ko(m,n))})}}function es(t,n,c){var a=t.cm&&t.cm.state.suppressEdits;if(!a||c){for(var D,m=t.history,X=t.sel,Z="undo"==n?m.done:m.undone,re="undo"==n?m.undone:m.done,ae=0;ae<Z.length&&(D=Z[ae],!(c?D.ranges&&!D.equals(t.sel):!D.ranges));ae++);if(ae!=Z.length){for(m.lastOrigin=m.lastSelOrigin=null;;){if(!(D=Z.pop()).ranges){if(a)return void Z.push(D);break}if(zo(D,re),c&&!D.equals(t.sel))return void hr(t,D,{clearRedo:!1});X=D}var we=[];zo(X,re),re.push({changes:we,generation:m.generation}),m.generation=D.generation||++m.maxGeneration;for(var Fe=st(t,"beforeChange")||t.cm&&st(t.cm,"beforeChange"),Ue=function(tt){var lt=D.changes[tt];if(lt.origin=n,Fe&&!Ml(t,lt,!1))return Z.length=0,{};we.push(oa(t,lt));var ct=tt?na(t,lt):at(Z);Vi(t,lt,ct,Ol(t,lt)),!tt&&t.cm&&t.cm.scrollIntoView({from:lt.from,to:En(lt)});var dt=[];fn(t,function(ht,gt){!gt&&-1==U(dt,ht.history)&&(ns(ht.history,lt),dt.push(ht.history)),Vi(ht,lt,null,Ol(ht,lt))})},Qe=D.changes.length-1;Qe>=0;--Qe){var Ye=Ue(Qe);if(Ye)return Ye.v}}}}function Bl(t,n){if(0!=n&&(t.first+=n,t.sel=new Tr(pt(t.sel.ranges,function(m){return new Dt(ot(m.anchor.line+n,m.anchor.ch),ot(m.head.line+n,m.head.ch))}),t.sel.primIndex),t.cm)){Bt(t.cm,t.first,t.first-n,n);for(var c=t.cm.display,a=c.viewFrom;a<c.viewTo;a++)wn(t.cm,a,"gutter")}}function Vi(t,n,c,a){if(t.cm&&!t.cm.curOp)return or(t.cm,Vi)(t,n,c,a);if(n.to.line<t.first)Bl(t,n.text.length-1-(n.to.line-n.from.line));else if(!(n.from.line>t.lastLine())){if(n.from.line<t.first){var m=n.text.length-1-(t.first-n.from.line);Bl(t,m),n={from:ot(t.first,0),to:ot(n.to.line+m,n.to.ch),text:[at(n.text)],origin:n.origin}}var D=t.lastLine();n.to.line>D&&(n={from:n.from,to:ot(D,xt(t,D).text.length),text:[n.text[0]],origin:n.origin}),n.removed=Mn(t,n.from,n.to),c||(c=na(t,n)),t.cm?function Cf(t,n,c){var a=t.doc,m=t.display,D=n.from,X=n.to,Z=!1,re=D.line;t.options.lineWrapping||(re=Pt(nr(xt(a,D.line))),a.iter(re,X.line+1,function(Qe){if(Qe==m.maxLine)return Z=!0,!0})),a.sel.contains(n.from,n.to)>-1&&yt(t),di(a,n,c,qs(t)),t.options.lineWrapping||(a.iter(re,D.line+n.text.length,function(Qe){var Ye=Ao(Qe);Ye>m.maxLineLength&&(m.maxLine=Qe,m.maxLineLength=Ye,m.maxLineChanged=!0,Z=!1)}),Z&&(t.curOp.updateMaxLine=!0)),function Iu(t,n){if(t.modeFrontier=Math.min(t.modeFrontier,n),!(t.highlightFrontier<n-10)){for(var c=t.first,a=n-1;a>c;a--){var m=xt(t,a).stateAfter;if(m&&(!(m instanceof xo)||a+m.lookAhead<n)){c=a+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,c)}}(a,D.line),Wi(t,400);var ae=n.text.length-(X.line-D.line)-1;n.full?Bt(t):D.line!=X.line||1!=n.text.length||Xi(t.doc,n)?Bt(t,D.line,X.line+1,ae):wn(t,D.line,"text");var we=st(t,"changes"),Fe=st(t,"change");if(Fe||we){var Ue={from:D,to:X,text:n.text,removed:n.removed,origin:n.origin};Fe&&ir(t,"change",t,Ue),we&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(Ue)}t.display.selForContextMenu=null}(t.cm,n,a):di(t,n,a),Jo(t,c,pe),t.cantEdit&&Yo(t,ot(t.firstLine(),0))&&(t.cantEdit=!1)}}function Tn(t,n,c,a,m){var D;a||(a=c),St(a,c)<0&&(c=(D=[a,c])[0],a=D[1]),"string"==typeof n&&(n=t.splitLines(n)),vi(t,{from:c,to:a,text:n,origin:m})}function ts(t,n,c,a){c<t.line?t.line+=a:n<t.line&&(t.line=n,t.ch=0)}function rs(t,n,c,a){for(var m=0;m<t.length;++m){var D=t[m],X=!0;if(D.ranges){D.copied||((D=t[m]=D.deepCopy()).copied=!0);for(var Z=0;Z<D.ranges.length;Z++)ts(D.ranges[Z].anchor,n,c,a),ts(D.ranges[Z].head,n,c,a)}else{for(var re=0;re<D.changes.length;++re){var ae=D.changes[re];if(c<ae.from.line)ae.from=ot(ae.from.line+a,ae.from.ch),ae.to=ot(ae.to.line+a,ae.to.ch);else if(n<=ae.to.line){X=!1;break}}X||(t.splice(0,m+1),m=0)}}}function ns(t,n){var c=n.from.line,a=n.to.line,m=n.text.length-(a-c)-1;rs(t.done,c,a,m),rs(t.undone,c,a,m)}function Ki(t,n,c,a){var m=n,D=n;return"number"==typeof n?D=xt(t,Ra(t,n)):m=Pt(n),null==m?null:(a(D,m)&&t.cm&&wn(t.cm,m,c),D)}function Yi(t){this.lines=t,this.parent=null;for(var n=0,c=0;c<t.length;++c)t[c].parent=this,n+=t[c].height;this.height=n}function Zi(t){this.children=t;for(var n=0,c=0,a=0;a<t.length;++a){var m=t[a];n+=m.chunkSize(),c+=m.height,m.parent=this}this.size=n,this.height=c,this.parent=null}Dt.prototype.from=function(){return Ii(this.anchor,this.head)},Dt.prototype.to=function(){return bo(this.anchor,this.head)},Dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Yi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,n){for(var c=t,a=t+n;c<a;++c){var m=this.lines[c];this.height-=m.height,Uu(m),ir(m,"delete")}this.lines.splice(t,n)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,n,c){this.height+=c,this.lines=this.lines.slice(0,t).concat(n).concat(this.lines.slice(t));for(var a=0;a<n.length;++a)n[a].parent=this},iterN:function(t,n,c){for(var a=t+n;t<a;++t)if(c(this.lines[t]))return!0}},Zi.prototype={chunkSize:function(){return this.size},removeInner:function(t,n){this.size-=n;for(var c=0;c<this.children.length;++c){var a=this.children[c],m=a.chunkSize();if(t<m){var D=Math.min(n,m-t),X=a.height;if(a.removeInner(t,D),this.height-=X-a.height,m==D&&(this.children.splice(c--,1),a.parent=null),0==(n-=D))break;t=0}else t-=m}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof Yi))){var Z=[];this.collapse(Z),this.children=[new Yi(Z)],this.children[0].parent=this}},collapse:function(t){for(var n=0;n<this.children.length;++n)this.children[n].collapse(t)},insertInner:function(t,n,c){this.size+=n.length,this.height+=c;for(var a=0;a<this.children.length;++a){var m=this.children[a],D=m.chunkSize();if(t<=D){if(m.insertInner(t,n,c),m.lines&&m.lines.length>50){for(var X=m.lines.length%25+25,Z=X;Z<m.lines.length;){var re=new Yi(m.lines.slice(Z,Z+=25));m.height-=re.height,this.children.splice(++a,0,re),re.parent=this}m.lines=m.lines.slice(0,X),this.maybeSpill()}break}t-=D}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var c=new Zi(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=c.size,t.height-=c.height;var m=U(t.parent.children,t);t.parent.children.splice(m+1,0,c)}else{var a=new Zi(t.children);a.parent=t,t.children=[a,c],t=a}c.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,n,c){for(var a=0;a<this.children.length;++a){var m=this.children[a],D=m.chunkSize();if(t<D){var X=Math.min(n,D-t);if(m.iterN(t,X,c))return!0;if(0==(n-=X))break;t=0}else t-=D}}};var $i=function(t,n,c){if(c)for(var a in c)c.hasOwnProperty(a)&&(this[a]=c[a]);this.doc=t,this.node=n};function la(t,n,c){Xr(n)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Ys(t,c)}$i.prototype.clear=function(){var t=this.doc.cm,n=this.line.widgets,c=this.line,a=Pt(c);if(null!=a&&n){for(var m=0;m<n.length;++m)n[m]==this&&n.splice(m--,1);n.length||(c.widgets=null);var D=ui(this);qr(c,Math.max(0,c.height-D)),t&&(Fr(t,function(){la(t,c,-D),wn(t,a,"widget")}),ir(t,"lineWidgetCleared",t,this,a))}},$i.prototype.changed=function(){var t=this,n=this.height,c=this.doc.cm,a=this.line;this.height=null;var m=ui(this)-n;!m||(nn(this.doc,a)||qr(a,a.height+m),c&&Fr(c,function(){c.curOp.forceUpdate=!0,la(c,a,m),ir(c,"lineWidgetChanged",c,t,Pt(a))}))},Tt($i);var Ql=0,pn=function(t,n){this.lines=[],this.type=n,this.doc=t,this.id=++Ql};function gi(t,n,c,a,m){if(a&&a.shared)return function Af(t,n,c,a,m){(a=Be(a)).shared=!1;var D=[gi(t,n,c,a,m)],X=D[0],Z=a.widgetNode;return fn(t,function(re){Z&&(a.widgetNode=Z.cloneNode(!0)),D.push(gi(re,At(re,n),At(re,c),a,m));for(var ae=0;ae<re.linked.length;++ae)if(re.linked[ae].isParent)return;X=at(D)}),new eo(D,X)}(t,n,c,a,m);if(t.cm&&!t.cm.curOp)return or(t.cm,gi)(t,n,c,a,m);var D=new pn(t,m),X=St(n,c);if(a&&Be(a,D,!1),X>0||0==X&&!1!==D.clearWhenEmpty)return D;if(D.replacedWith&&(D.collapsed=!0,D.widgetNode=xe("span",[D.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||D.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(D.widgetNode.insertLeft=!0)),D.collapsed){if(Wa(t,n.line,n,c,D)||n.line!=c.line&&Wa(t,c.line,n,c,D))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Ru(){tn=!0}()}D.addToHistory&&Il(t,{from:n,to:c,origin:"markText"},t.sel,NaN);var ae,Z=n.line,re=t.cm;if(t.iter(Z,c.line+1,function(Fe){re&&D.collapsed&&!re.options.lineWrapping&&nr(Fe)==re.display.maxLine&&(ae=!0),D.collapsed&&Z!=n.line&&qr(Fe,0),function ju(t,n,c){var a=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));a&&t.markedSpans&&a.has(t.markedSpans)?t.markedSpans.push(n):(t.markedSpans=t.markedSpans?t.markedSpans.concat([n]):[n],a&&a.add(t.markedSpans)),n.marker.attachLine(t)}(Fe,new Ri(D,Z==n.line?n.ch:null,Z==c.line?c.ch:null),t.cm&&t.cm.curOp),++Z}),D.collapsed&&t.iter(n.line,c.line+1,function(Fe){nn(t,Fe)&&qr(Fe,0)}),D.clearOnEnter&&et(D,"beforeCursorEnter",function(){return D.clear()}),D.readOnly&&(function Ou(){As=!0}(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),D.collapsed&&(D.id=++Ql,D.atomic=!0),re){if(ae&&(re.curOp.updateMaxLine=!0),D.collapsed)Bt(re,n.line,c.line+1);else if(D.className||D.startStyle||D.endStyle||D.css||D.attributes||D.title)for(var we=n.line;we<=c.line;we++)wn(re,we,"text");D.atomic&&Ko(re.doc),ir(re,"markerAdded",re,D)}return D}pn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&An(t),st(this,"clear")){var c=this.find();c&&ir(this,"clear",c.from,c.to)}for(var a=null,m=null,D=0;D<this.lines.length;++D){var X=this.lines[D],Z=ji(X.markedSpans,this);t&&!this.collapsed?wn(t,Pt(X),"text"):t&&(null!=Z.to&&(m=Pt(X)),null!=Z.from&&(a=Pt(X))),X.markedSpans=Ga(X.markedSpans,Z),null==Z.from&&this.collapsed&&!nn(this.doc,X)&&t&&qr(X,Hn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var re=0;re<this.lines.length;++re){var ae=nr(this.lines[re]),we=Ao(ae);we>t.display.maxLineLength&&(t.display.maxLine=ae,t.display.maxLineLength=we,t.display.maxLineChanged=!0)}null!=a&&t&&this.collapsed&&Bt(t,a,m+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Ko(t.doc)),t&&ir(t,"markerCleared",t,this,a,m),n&&Xn(t),this.parent&&this.parent.clear()}},pn.prototype.find=function(t,n){null==t&&"bookmark"==this.type&&(t=1);for(var c,a,m=0;m<this.lines.length;++m){var D=this.lines[m],X=ji(D.markedSpans,this);if(null!=X.from&&(c=ot(n?D:Pt(D),X.from),-1==t))return c;if(null!=X.to&&(a=ot(n?D:Pt(D),X.to),1==t))return a}return c&&{from:c,to:a}},pn.prototype.changed=function(){var t=this,n=this.find(-1,!0),c=this,a=this.doc.cm;!n||!a||Fr(a,function(){var m=n.line,D=Pt(n.line),X=Ps(a,D);if(X&&(Bs(X),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!nn(c.doc,m)&&null!=c.height){var Z=c.height;c.height=null;var re=ui(c)-Z;re&&qr(m,m.height+re)}ir(a,"markerChanged",a,t)})},pn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||-1==U(n.maybeHiddenMarkers,this))&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},pn.prototype.detachLine=function(t){if(this.lines.splice(U(this.lines,t),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},Tt(pn);var eo=function(t,n){this.markers=t,this.primary=n;for(var c=0;c<t.length;++c)t[c].parent=this};function Ul(t){return t.findMarks(ot(t.first,0),t.clipPos(ot(t.lastLine())),function(n){return n.parent})}function Ef(t){for(var n=function(a){var m=t[a],D=[m.primary.doc];fn(m.primary.doc,function(re){return D.push(re)});for(var X=0;X<m.markers.length;X++){var Z=m.markers[X];-1==U(D,Z.doc)&&(Z.parent=null,m.markers.splice(X--,1))}},c=0;c<t.length;c++)n(c)}eo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ir(this,"clear")}},eo.prototype.find=function(t,n){return this.primary.find(t,n)},Tt(eo);var Tf=0,br=function(t,n,c,a,m){if(!(this instanceof br))return new br(t,n,c,a,m);null==c&&(c=0),Zi.call(this,[new Yi([new oi("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var D=ot(c,0);this.sel=Fn(D),this.history=new Wo(null),this.id=++Tf,this.modeOption=n,this.lineSep=a,this.direction="rtl"==m?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),di(this,{from:D,to:D,text:t}),hr(this,Fn(D),pe)};br.prototype=Te(Zi.prototype,{constructor:br,iter:function(t,n,c){c?this.iterN(t-this.first,n-t,c):this.iterN(this.first,this.first+this.size,t)},insert:function(t,n){for(var c=0,a=0;a<n.length;++a)c+=n[a].height;this.insertInner(t-this.first,n,c)},remove:function(t,n){this.removeInner(t-this.first,n)},getValue:function(t){var n=ws(this,this.first,this.first+this.size);return!1===t?n:n.join(t||this.lineSeparator())},setValue:sr(function(t){var n=ot(this.first,0),c=this.first+this.size-1;vi(this,{from:n,to:ot(c,xt(this,c).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Gi(this.cm,0,0),hr(this,Fn(n),pe)}),replaceRange:function(t,n,c,a){Tn(this,t,n=At(this,n),c=c?At(this,c):n,a)},getRange:function(t,n,c){var a=Mn(this,At(this,t),At(this,n));return!1===c?a:""===c?a.join(""):a.join(c||this.lineSeparator())},getLine:function(t){var n=this.getLineHandle(t);return n&&n.text},getLineHandle:function(t){if(Li(this,t))return xt(this,t)},getLineNumber:function(t){return Pt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=xt(this,t)),nr(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return At(this,t)},getCursor:function(t){var n=this.sel.primary();return null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||!1===t?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:sr(function(t,n,c){jl(this,At(this,"number"==typeof t?ot(t,n||0):t),null,c)}),setSelection:sr(function(t,n,c){jl(this,At(this,t),At(this,n||t),c)}),extendSelection:sr(function(t,n,c){Xo(this,At(this,t),n&&At(this,n),c)}),extendSelections:sr(function(t,n){Rl(this,_s(this,t),n)}),extendSelectionsBy:sr(function(t,n){Rl(this,_s(this,pt(this.sel.ranges,t)),n)}),setSelections:sr(function(t,n,c){if(t.length){for(var a=[],m=0;m<t.length;m++)a[m]=new Dt(At(this,t[m].anchor),At(this,t[m].head||t[m].anchor));null==n&&(n=Math.min(t.length-1,this.sel.primIndex)),hr(this,Dr(this.cm,a,n),c)}}),addSelection:sr(function(t,n,c){var a=this.sel.ranges.slice(0);a.push(new Dt(At(this,t),At(this,n||t))),hr(this,Dr(this.cm,a,a.length-1),c)}),getSelection:function(t){for(var c,n=this.sel.ranges,a=0;a<n.length;a++){var m=Mn(this,n[a].from(),n[a].to());c=c?c.concat(m):m}return!1===t?c:c.join(t||this.lineSeparator())},getSelections:function(t){for(var n=[],c=this.sel.ranges,a=0;a<c.length;a++){var m=Mn(this,c[a].from(),c[a].to());!1!==t&&(m=m.join(t||this.lineSeparator())),n[a]=m}return n},replaceSelection:function(t,n,c){for(var a=[],m=0;m<this.sel.ranges.length;m++)a[m]=t;this.replaceSelections(a,n,c||"+input")},replaceSelections:sr(function(t,n,c){for(var a=[],m=this.sel,D=0;D<m.ranges.length;D++){var X=m.ranges[D];a[D]={from:X.from(),to:X.to(),text:this.splitLines(t[D]),origin:c}}for(var Z=n&&"end"!=n&&function mf(t,n,c){for(var a=[],m=ot(t.first,0),D=m,X=0;X<n.length;X++){var Z=n[X],re=El(Z.from,m,D),ae=El(En(Z),m,D);if(m=Z.to,D=ae,"around"==c){var we=t.sel.ranges[X],Fe=St(we.head,we.anchor)<0;a[X]=new Dt(Fe?ae:re,Fe?re:ae)}else a[X]=new Dt(re,re)}return new Tr(a,t.sel.primIndex)}(this,a,n),re=a.length-1;re>=0;re--)vi(this,a[re]);Z?aa(this,Z):this.cm&&pi(this.cm)}),undo:sr(function(){es(this,"undo")}),redo:sr(function(){es(this,"redo")}),undoSelection:sr(function(){es(this,"undo",!0)}),redoSelection:sr(function(){es(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,n=0,c=0,a=0;a<t.done.length;a++)t.done[a].ranges||++n;for(var m=0;m<t.undone.length;m++)t.undone[m].ranges||++c;return{undo:n,redo:c}},clearHistory:function(){var t=this;this.history=new Wo(this.history),fn(this,function(n){return n.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Or(this.history.done),undone:Or(this.history.undone)}},setHistory:function(t){var n=this.history=new Wo(this.history);n.done=Or(t.done.slice(0),null,!0),n.undone=Or(t.undone.slice(0),null,!0)},setGutterMarker:sr(function(t,n,c){return Ki(this,t,"gutter",function(a){var m=a.gutterMarkers||(a.gutterMarkers={});return m[n]=c,!c&&oe(m)&&(a.gutterMarkers=null),!0})}),clearGutter:sr(function(t){var n=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[t]&&Ki(n,c,"gutter",function(){return c.gutterMarkers[t]=null,oe(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(t){var n;if("number"==typeof t){if(!Li(this,t)||(n=t,!(t=xt(this,t))))return null}else if(null==(n=Pt(t)))return null;return{line:n,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:sr(function(t,n,c){return Ki(this,t,"gutter"==n?"gutter":"class",function(a){var m="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(a[m]){if(W(c).test(a[m]))return!1;a[m]+=" "+c}else a[m]=c;return!0})}),removeLineClass:sr(function(t,n,c){return Ki(this,t,"gutter"==n?"gutter":"class",function(a){var m="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",D=a[m];if(!D)return!1;if(null==c)a[m]=null;else{var X=D.match(W(c));if(!X)return!1;var Z=X.index+X[0].length;a[m]=D.slice(0,X.index)+(X.index&&Z!=D.length?" ":"")+D.slice(Z)||null}return!0})}),addLineWidget:sr(function(t,n,c){return function Sf(t,n,c,a){var m=new $i(t,c,a),D=t.cm;return D&&m.noHScroll&&(D.display.alignWidgets=!0),Ki(t,n,"widget",function(X){var Z=X.widgets||(X.widgets=[]);if(null==m.insertAt?Z.push(m):Z.splice(Math.min(Z.length,Math.max(0,m.insertAt)),0,m),m.line=X,D&&!nn(t,X)){var re=Xr(X)<t.scrollTop;qr(X,X.height+ui(m)),re&&Ys(D,m.height),D.curOp.forceUpdate=!0}return!0}),D&&ir(D,"lineWidgetAdded",D,m,"number"==typeof n?n:Pt(n)),m}(this,t,n,c)}),removeLineWidget:function(t){t.clear()},markText:function(t,n,c){return gi(this,At(this,t),At(this,n),c,c&&c.type||"range")},setBookmark:function(t,n){var c={replacedWith:n&&(null==n.nodeType?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return gi(this,t=At(this,t),t,c,"bookmark")},findMarksAt:function(t){var n=[],c=xt(this,(t=At(this,t)).line).markedSpans;if(c)for(var a=0;a<c.length;++a){var m=c[a];(null==m.from||m.from<=t.ch)&&(null==m.to||m.to>=t.ch)&&n.push(m.marker.parent||m.marker)}return n},findMarks:function(t,n,c){t=At(this,t),n=At(this,n);var a=[],m=t.line;return this.iter(t.line,n.line+1,function(D){var X=D.markedSpans;if(X)for(var Z=0;Z<X.length;Z++){var re=X[Z];!(null!=re.to&&m==t.line&&t.ch>=re.to||null==re.from&&m!=t.line||null!=re.from&&m==n.line&&re.from>=n.ch)&&(!c||c(re.marker))&&a.push(re.marker.parent||re.marker)}++m}),a},getAllMarks:function(){var t=[];return this.iter(function(n){var c=n.markedSpans;if(c)for(var a=0;a<c.length;++a)null!=c[a].from&&t.push(c[a].marker)}),t},posFromIndex:function(t){var n,c=this.first,a=this.lineSeparator().length;return this.iter(function(m){var D=m.text.length+a;if(D>t)return n=t,!0;t-=D,++c}),At(this,ot(c,n))},indexFromPos:function(t){var n=(t=At(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,t.line,function(a){n+=a.text.length+c}),n},copy:function(t){var n=new br(ws(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,t&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(t){t||(t={});var n=this.first,c=this.first+this.size;null!=t.from&&t.from>n&&(n=t.from),null!=t.to&&t.to<c&&(c=t.to);var a=new br(ws(this,n,c),t.mode||this.modeOption,n,this.lineSep,this.direction);return t.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:t.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function Ff(t,n){for(var c=0;c<n.length;c++){var a=n[c],m=a.find(),D=t.clipPos(m.from),X=t.clipPos(m.to);if(St(D,X)){var Z=gi(t,D,X,a.primary,a.primary.type);a.markers.push(Z),Z.parent=a}}}(a,Ul(this)),a},unlinkDoc:function(t){if(t instanceof Ut&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Ef(Ul(this));break}}if(t.history==this.history){var a=[t.id];fn(t,function(m){return a.push(m.id)},!0),t.history=new Wo(null),t.history.done=Or(this.history.done,a),t.history.undone=Or(this.history.undone,a)}},iterLinkedDocs:function(t){fn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Rr(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:sr(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(n){return n.order=null}),this.cm&&function bf(t){Fr(t,function(){Nl(t),Bt(t)})}(this.cm))})}),br.prototype.eachLine=br.prototype.iter;var to=0;function Gl(t){var n=this;if(ro(n),!bt(n,t)&&!on(n.display,t)){Ct(t),y&&(to=+new Date);var c=Wn(n,t,!0),a=t.dataTransfer.files;if(c&&!n.isReadOnly())if(a&&a.length&&window.FileReader&&window.File)for(var m=a.length,D=Array(m),X=0,Z=function(){++X==m&&or(n,function(){var Qe={from:c=At(n.doc,c),to:c,text:n.doc.splitLines(D.filter(function(Ye){return null!=Ye}).join(n.doc.lineSeparator())),origin:"paste"};vi(n.doc,Qe),aa(n.doc,Fn(At(n.doc,c),At(n.doc,En(Qe))))})()},re=function(Qe,Ye){if(n.options.allowDropFileTypes&&-1==U(n.options.allowDropFileTypes,Qe.type))Z();else{var tt=new FileReader;tt.onerror=function(){return Z()},tt.onload=function(){var lt=tt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(lt)||(D[Ye]=lt),Z()},tt.readAsText(Qe)}},ae=0;ae<a.length;ae++)re(a[ae],ae);else{if(n.state.draggingText&&n.doc.sel.contains(c)>-1)return n.state.draggingText(t),void setTimeout(function(){return n.display.input.focus()},20);try{var we=t.dataTransfer.getData("Text");if(we){var Fe;if(n.state.draggingText&&!n.state.draggingText.copy&&(Fe=n.listSelections()),Jo(n.doc,Fn(c,c)),Fe)for(var Ue=0;Ue<Fe.length;++Ue)Tn(n.doc,"",Fe[Ue].anchor,Fe[Ue].head,"drag");n.replaceSelection(we,"around","paste"),n.display.input.focus()}}catch(Qe){}}}}function ro(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function ua(t){if(document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),c=[],a=0;a<n.length;a++){var m=n[a].CodeMirror;m&&c.push(m)}c.length&&c[0].operation(function(){for(var D=0;D<c.length;D++)t(c[D])})}}var Hl=!1;function If(){Hl||(function Of(){var t;et(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,ua(is)},100))}),et(window,"blur",function(){return ua(hi)})}(),Hl=!0)}function is(t){var n=t.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,t.setSize()}for(var Mr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Nn=0;Nn<10;Nn++)Mr[Nn+48]=Mr[Nn+96]=String(Nn);for(var no=65;no<=90;no++)Mr[no]=String.fromCharCode(no);for(var Jn=1;Jn<=12;Jn++)Mr[Jn+111]=Mr[Jn+63235]="F"+Jn;var Pr={};function fa(t){var n=t.split(/-(?!$)/);t=n[n.length-1];for(var c,a,m,D,X=0;X<n.length-1;X++){var Z=n[X];if(/^(cmd|meta|m)$/i.test(Z))D=!0;else if(/^a(lt)?$/i.test(Z))c=!0;else if(/^(c|ctrl|control)$/i.test(Z))a=!0;else{if(!/^s(hift)?$/i.test(Z))throw new Error("Unrecognized modifier name: "+Z);m=!0}}return c&&(t="Alt-"+t),a&&(t="Ctrl-"+t),D&&(t="Cmd-"+t),m&&(t="Shift-"+t),t}function ca(t){var n={};for(var c in t)if(t.hasOwnProperty(c)){var a=t[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==a){delete t[c];continue}for(var m=pt(c.split(" "),fa),D=0;D<m.length;D++){var X=void 0,Z=void 0;D==m.length-1?(Z=m.join(" "),X=a):(Z=m.slice(0,D+1).join(" "),X="...");var re=n[Z];if(re){if(re!=X)throw new Error("Inconsistent bindings for "+Z)}else n[Z]=X}delete t[c]}for(var ae in n)t[ae]=n[ae];return t}function dn(t,n,c,a){var m=(n=Vn(n)).call?n.call(t,a):n[t];if(!1===m)return"nothing";if("..."===m)return"multi";if(null!=m&&c(m))return"handled";if(n.fallthrough){if("[object Array]"!=Object.prototype.toString.call(n.fallthrough))return dn(t,n.fallthrough,c,a);for(var D=0;D<n.fallthrough.length;D++){var X=dn(t,n.fallthrough[D],c,a);if(X)return X}}}function ha(t){var n="string"==typeof t?t:Mr[t.keyCode];return"Ctrl"==n||"Alt"==n||"Shift"==n||"Mod"==n}function io(t,n,c){var a=t;return n.altKey&&"Alt"!=a&&(t="Alt-"+t),(L?n.metaKey:n.ctrlKey)&&"Ctrl"!=a&&(t="Ctrl-"+t),(L?n.ctrlKey:n.metaKey)&&"Mod"!=a&&(t="Cmd-"+t),!c&&n.shiftKey&&"Shift"!=a&&(t="Shift-"+t),t}function pa(t,n){if(h&&34==t.keyCode&&t.char)return!1;var c=Mr[t.keyCode];return null!=c&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(c=t.code),io(c,t,n))}function Vn(t){return"string"==typeof t?Pr[t]:t}function vn(t,n){for(var c=t.doc.sel.ranges,a=[],m=0;m<c.length;m++){for(var D=n(c[m]);a.length&&St(D.from,at(a).to)<=0;){var X=a.pop();if(St(X.from,D.from)<0){D.from=X.from;break}}a.push(D)}Fr(t,function(){for(var Z=a.length-1;Z>=0;Z--)Tn(t.doc,"",a[Z].from,a[Z].to,"+delete");pi(t)})}function yi(t,n,c){var a=Le(t.text,n+c,c);return a<0||a>t.text.length?null:a}function mi(t,n,c){var a=yi(t,n.ch,c);return null==a?null:new ot(n.line,a,c<0?"after":"before")}function Ln(t,n,c,a,m){if(t){"rtl"==n.doc.direction&&(m=-m);var D=rt(c,n.doc.direction);if(D){var ae,X=m<0?at(D):D[0],re=m<0==(1==X.level)?"after":"before";if(X.level>0||"rtl"==n.doc.direction){var we=Un(n,c);ae=m<0?c.text.length-1:0;var Fe=Jr(n,we,ae).top;ae=Se(function(Ue){return Jr(n,we,Ue).top==Fe},m<0==(1==X.level)?X.from:X.to-1,ae),"before"==re&&(ae=yi(c,ae,1))}else ae=m<0?X.to:X.from;return new ot(a,ae,re)}}return new ot(a,m<0?c.text.length:0,m<0?"before":"after")}Pr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Pr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Pr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Pr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Pr.default=P?Pr.macDefault:Pr.pcDefault;var Vr={selectAll:$o,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),pe)},killLine:function(t){return vn(t,function(n){if(n.empty()){var c=xt(t.doc,n.head.line).text.length;return n.head.ch==c&&n.head.line<t.lastLine()?{from:n.head,to:ot(n.head.line+1,0)}:{from:n.head,to:ot(n.head.line,c)}}return{from:n.from(),to:n.to()}})},deleteLine:function(t){return vn(t,function(n){return{from:ot(n.from().line,0),to:At(t.doc,ot(n.to().line+1,0))}})},delLineLeft:function(t){return vn(t,function(n){return{from:ot(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(t){return vn(t,function(n){var c=t.charCoords(n.head,"div").top+5;return{from:t.coordsChar({left:0,top:c},"div"),to:n.from()}})},delWrappedLineRight:function(t){return vn(t,function(n){var c=t.charCoords(n.head,"div").top+5,a=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:c},"div");return{from:n.from(),to:a}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ot(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ot(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(n){return Kn(t,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(n){return da(t,n.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(n){return function Wl(t,n){var c=xt(t.doc,n),a=function rn(t){for(var n;n=So(t);)t=n.find(1,!0).line;return t}(c);return a!=c&&(n=Pt(a)),Ln(!0,t,c,n,-1)}(t,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(n){var c=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:c},"div")},ke)},goLineLeft:function(t){return t.extendSelectionsBy(function(n){var c=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:0,top:c},"div")},ke)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(n){var c=t.cursorCoords(n.head,"div").top+5,a=t.coordsChar({left:0,top:c},"div");return a.ch<t.getLine(a.line).search(/\S/)?da(t,n.head):a},ke)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var n=[],c=t.listSelections(),a=t.options.tabSize,m=0;m<c.length;m++){var D=c[m].from(),X=Ie(t.getLine(D.line),D.ch,a);n.push(Ke(a-X%a))}t.replaceSelections(n)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Fr(t,function(){for(var n=t.listSelections(),c=[],a=0;a<n.length;a++)if(n[a].empty()){var m=n[a].head,D=xt(t.doc,m.line).text;if(D)if(m.ch==D.length&&(m=new ot(m.line,m.ch-1)),m.ch>0)m=new ot(m.line,m.ch+1),t.replaceRange(D.charAt(m.ch-1)+D.charAt(m.ch-2),ot(m.line,m.ch-2),m,"+transpose");else if(m.line>t.doc.first){var X=xt(t.doc,m.line-1).text;X&&(m=new ot(m.line,1),t.replaceRange(D.charAt(0)+t.doc.lineSeparator()+X.charAt(X.length-1),ot(m.line-1,X.length-1),m,"+transpose"))}c.push(new Dt(m,m))}t.setSelections(c)})},newlineAndIndent:function(t){return Fr(t,function(){for(var n=t.listSelections(),c=n.length-1;c>=0;c--)t.replaceRange(t.doc.lineSeparator(),n[c].anchor,n[c].head,"+input");n=t.listSelections();for(var a=0;a<n.length;a++)t.indentLine(n[a].from().line,null,!0);pi(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Kn(t,n){var c=xt(t.doc,n),a=nr(c);return a!=c&&(n=Pt(a)),Ln(!0,t,a,n,1)}function da(t,n){var c=Kn(t,n.line),a=xt(t.doc,c.line),m=rt(a,t.doc.direction);if(!m||0==m[0].level){var D=Math.max(c.ch,a.text.search(/\S/)),X=n.line==c.line&&n.ch<=D&&n.ch;return ot(c.line,X?0:D,c.sticky)}return c}function oo(t,n,c){if("string"==typeof n&&!(n=Vr[n]))return!1;t.display.input.ensurePolled();var a=t.display.shift,m=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),c&&(t.display.shift=!1),m=n(t)!=ee}finally{t.display.shift=a,t.state.suppressEdits=!1}return m}var ql=new qe;function xi(t,n,c,a){var m=t.state.keySeq;if(m){if(ha(n))return"handled";if(/\'$/.test(n)?t.state.keySeq=null:ql.set(50,function(){t.state.keySeq==m&&(t.state.keySeq=null,t.display.input.reset())}),va(t,m+" "+n,c,a))return!0}return va(t,n,c,a)}function va(t,n,c,a){var m=function zl(t,n,c){for(var a=0;a<t.state.keyMaps.length;a++){var m=dn(n,t.state.keyMaps[a],c,t);if(m)return m}return t.options.extraKeys&&dn(n,t.options.extraKeys,c,t)||dn(n,t.options.keyMap,c,t)}(t,n,a);return"multi"==m&&(t.state.keySeq=n),"handled"==m&&ir(t,"keyHandled",t,n,c),("handled"==m||"multi"==m)&&(Ct(c),Vs(t)),!!m}function ga(t,n){var c=pa(n,!0);return!!c&&(n.shiftKey&&!t.state.keySeq?xi(t,"Shift-"+c,n,function(a){return oo(t,a,!0)})||xi(t,c,n,function(a){if("string"==typeof a?/^go[A-Z]/.test(a):a.motion)return oo(t,a)}):xi(t,c,n,function(a){return oo(t,a)}))}var ya=null;function Xl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||(n.curOp.focus=ne(de(n)),bt(n,t)))){y&&e<11&&27==t.keyCode&&(t.returnValue=!1);var c=t.keyCode;n.display.shift=16==c||t.shiftKey;var a=ga(n,t);h&&(ya=a?c:null,!a&&88==c&&!po&&(P?t.metaKey:t.ctrlKey)&&n.replaceSelection("",null,"cut")),ue&&!P&&!a&&46==c&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==c&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&function Kr(t){var n=t.display.lineDiv;function c(a){(18==a.keyCode||!a.altKey)&&(V(n,"CodeMirror-crosshair"),vt(document,"keyup",c),vt(document,"mouseover",c))}ve(n,"CodeMirror-crosshair"),et(document,"keyup",c),et(document,"mouseover",c)}(n)}}function Br(t){16==t.keyCode&&(this.doc.sel.shift=!1),bt(this,t)}function Jl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||on(n.display,t)||bt(n,t)||t.ctrlKey&&!t.altKey||P&&t.metaKey)){var c=t.keyCode,a=t.charCode;if(h&&c==ya)return ya=null,void Ct(t);if(!h||t.which&&!(t.which<10)||!ga(n,t)){var m=String.fromCharCode(null==a?c:a);"\b"!=m&&(function Rf(t,n,c){return xi(t,"'"+c+"'",n,function(a){return oo(t,a,!0)})}(n,t,m)||n.display.input.onKeyPress(t))}}}var so,ao,ma=function(t,n,c){this.time=t,this.pos=n,this.button=c};function Vl(t){var n=this,c=n.display;if(!(bt(n,t)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=t.shiftKey,on(c,t))return void(o||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100)));if(!os(n,t)){var a=Wn(n,t),m=ho(t),D=a?function Df(t,n){var c=+new Date;return ao&&ao.compare(c,t,n)?(so=ao=null,"triple"):so&&so.compare(c,t,n)?(ao=new ma(c,t,n),so=null,"double"):(so=new ma(c,t,n),ao=null,"single")}(a,m):"single";ye(n).focus(),1==m&&n.state.selectingText&&n.state.selectingText(t),(!a||!function Mf(t,n,c,a,m){var D="Click";return"double"==a?D="Double"+D:"triple"==a&&(D="Triple"+D),xi(t,io(D=(1==n?"Left":2==n?"Middle":"Right")+D,m),m,function(X){if("string"==typeof X&&(X=Vr[X]),!X)return!1;var Z=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),Z=X(t,c)!=ee}finally{t.state.suppressEdits=!1}return Z})}(n,m,a,D,t))&&(1==m?a?function Bf(t,n,c,a){y?setTimeout(Ee(hl,t),0):t.curOp.focus=ne(de(t));var X,m=function Pf(t,n,c){var a=t.getOption("configureMouse"),m=a?a(t,n,c):{};if(null==m.unit){var D=M?c.shiftKey&&c.metaKey:c.altKey;m.unit=D?"rectangle":"single"==n?"char":"double"==n?"word":"line"}return(null==m.extend||t.doc.extend)&&(m.extend=t.doc.extend||c.shiftKey),null==m.addNew&&(m.addNew=P?c.metaKey:c.ctrlKey),null==m.moveOnDrag&&(m.moveOnDrag=!(P?c.altKey:c.ctrlKey)),m}(t,c,a),D=t.doc.sel;t.options.dragDrop&&ys&&!t.isReadOnly()&&"single"==c&&(X=D.contains(n))>-1&&(St((X=D.ranges[X]).from(),n)<0||n.xRel>0)&&(St(X.to(),n)>0||n.xRel<0)?function Qf(t,n,c,a){var m=t.display,D=!1,X=or(t,function(ae){o&&(m.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Ks(t)),vt(m.wrapper.ownerDocument,"mouseup",X),vt(m.wrapper.ownerDocument,"mousemove",Z),vt(m.scroller,"dragstart",re),vt(m.scroller,"drop",X),D||(Ct(ae),a.addNew||Xo(t.doc,c,null,null,a.extend),o&&!k||y&&9==e?setTimeout(function(){m.wrapper.ownerDocument.body.focus({preventScroll:!0}),m.input.focus()},20):m.input.focus())}),Z=function(ae){D=D||Math.abs(n.clientX-ae.clientX)+Math.abs(n.clientY-ae.clientY)>=10},re=function(){return D=!0};o&&(m.scroller.draggable=!0),t.state.draggingText=X,X.copy=!a.moveOnDrag,et(m.wrapper.ownerDocument,"mouseup",X),et(m.wrapper.ownerDocument,"mousemove",Z),et(m.scroller,"dragstart",re),et(m.scroller,"drop",X),t.state.delayingBlurEvent=!0,setTimeout(function(){return m.input.focus()},20),m.scroller.dragDrop&&m.scroller.dragDrop()}(t,a,n,m):function Uf(t,n,c,a){y&&Ks(t);var m=t.display,D=t.doc;Ct(n);var X,Z,re=D.sel,ae=re.ranges;if(a.addNew&&!a.extend?X=(Z=D.sel.contains(c))>-1?ae[Z]:new Dt(c,c):(X=D.sel.primary(),Z=D.sel.primIndex),"rectangle"==a.unit)a.addNew||(X=new Dt(c,c)),c=Wn(t,n,!0,!0),Z=-1;else{var we=Kl(t,c,a.unit);X=a.extend?cn(X,we.anchor,we.head,a.extend):we}a.addNew?-1==Z?(Z=ae.length,hr(D,Dr(t,ae.concat([X]),Z),{scroll:!1,origin:"*mouse"})):ae.length>1&&ae[Z].empty()&&"char"==a.unit&&!a.extend?(hr(D,Dr(t,ae.slice(0,Z).concat(ae.slice(Z+1)),0),{scroll:!1,origin:"*mouse"}),re=D.sel):sa(D,Z,X,Ne):(Z=0,hr(D,new Tr([X],0),Ne),re=D.sel);var Fe=c;function Ue(ht){if(0!=St(Fe,ht))if(Fe=ht,"rectangle"==a.unit){for(var gt=[],_t=t.options.tabSize,wt=Ie(xt(D,c.line).text,c.ch,_t),Nt=Ie(xt(D,ht.line).text,ht.ch,_t),Qt=Math.min(wt,Nt),ar=Math.max(wt,Nt),Gt=Math.min(c.line,ht.line),xr=Math.min(t.lastLine(),Math.max(c.line,ht.line));Gt<=xr;Gt++){var wr=xt(D,Gt).text,Vt=Pe(wr,Qt,_t);Qt==ar?gt.push(new Dt(ot(Gt,Vt),ot(Gt,Vt))):wr.length>Vt&&gt.push(new Dt(ot(Gt,Vt),ot(Gt,Pe(wr,ar,_t))))}gt.length||gt.push(new Dt(c,c)),hr(D,Dr(t,re.ranges.slice(0,Z).concat(gt),Z),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ht)}else{var tr,kr=X,fr=Kl(t,ht,a.unit),er=kr.anchor;St(fr.anchor,er)>0?(tr=fr.head,er=Ii(kr.from(),fr.anchor)):(tr=fr.anchor,er=bo(kr.to(),fr.head));var Ht=re.ranges.slice(0);Ht[Z]=function Gf(t,n){var c=n.anchor,a=n.head,m=xt(t.doc,c.line);if(0==St(c,a)&&c.sticky==a.sticky)return n;var D=rt(m);if(!D)return n;var X=He(D,c.ch,c.sticky),Z=D[X];if(Z.from!=c.ch&&Z.to!=c.ch)return n;var ae,re=X+(Z.from==c.ch==(1!=Z.level)?0:1);if(0==re||re==D.length)return n;if(a.line!=c.line)ae=(a.line-c.line)*("ltr"==t.doc.direction?1:-1)>0;else{var we=He(D,a.ch,a.sticky),Fe=we-X||(a.ch-c.ch)*(1==Z.level?-1:1);ae=we==re-1||we==re?Fe<0:Fe>0}var Ue=D[re+(ae?-1:0)],Qe=ae==(1==Ue.level),Ye=Qe?Ue.from:Ue.to,tt=Qe?"after":"before";return c.ch==Ye&&c.sticky==tt?n:new Dt(new ot(c.line,Ye,tt),a)}(t,new Dt(At(D,er),tr)),hr(D,Dr(t,Ht,Z),Ne)}}var Qe=m.wrapper.getBoundingClientRect(),Ye=0;function tt(ht){var gt=++Ye,_t=Wn(t,ht,!0,"rectangle"==a.unit);if(_t)if(0!=St(_t,Fe)){t.curOp.focus=ne(de(t)),Ue(_t);var wt=Bo(m,D);(_t.line>=wt.to||_t.line<wt.from)&&setTimeout(or(t,function(){Ye==gt&&tt(ht)}),150)}else{var Nt=ht.clientY<Qe.top?-20:ht.clientY>Qe.bottom?20:0;Nt&&setTimeout(or(t,function(){Ye==gt&&(m.scroller.scrollTop+=Nt,tt(ht))}),50)}}function lt(ht){t.state.selectingText=!1,Ye=1/0,ht&&(Ct(ht),m.input.focus()),vt(m.wrapper.ownerDocument,"mousemove",ct),vt(m.wrapper.ownerDocument,"mouseup",dt),D.history.lastSelOrigin=null}var ct=or(t,function(ht){0!==ht.buttons&&ho(ht)?tt(ht):lt(ht)}),dt=or(t,lt);t.state.selectingText=dt,et(m.wrapper.ownerDocument,"mousemove",ct),et(m.wrapper.ownerDocument,"mouseup",dt)}(t,a,n,m)}(n,a,D,t):Ei(t)==c.scroller&&Ct(t):2==m?(a&&Xo(n.doc,a),setTimeout(function(){return c.input.focus()},20)):3==m&&(G?n.display.input.onContextMenu(t):Ks(n)))}}}function Kl(t,n,c){if("char"==c)return new Dt(n,n);if("word"==c)return t.findWordAt(n);if("line"==c)return new Dt(ot(n.line,0),At(t.doc,ot(n.line+1,0)));var a=c(t,n);return new Dt(a.from,a.to)}function Yl(t,n,c,a){var m,D;if(n.touches)m=n.touches[0].clientX,D=n.touches[0].clientY;else try{m=n.clientX,D=n.clientY}catch(Ue){return!1}if(m>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;a&&Ct(n);var X=t.display,Z=X.lineDiv.getBoundingClientRect();if(D>Z.bottom||!st(t,c))return jn(n);D-=Z.top-X.viewOffset;for(var re=0;re<t.display.gutterSpecs.length;++re){var ae=X.gutters.childNodes[re];if(ae&&ae.getBoundingClientRect().right>=m)return mt(t,c,t,bn(t.doc,D),t.display.gutterSpecs[re].className,n),jn(n)}}function os(t,n){return Yl(t,n,"gutterClick",!0)}function Zl(t,n){on(t.display,n)||function $l(t,n){return!!st(t,"gutterContextMenu")&&Yl(t,n,"gutterContextMenu",!1)}(t,n)||bt(t,n,"contextmenu")||G||t.display.input.onContextMenu(n)}function eu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),fi(t)}ma.prototype.compare=function(t,n,c){return this.time+400>t&&0==St(n,this.pos)&&c==this.button};var wi={toString:function(){return"CodeMirror.Init"}},ba={},ss={};function Hf(t,n,c){if(!n!=!(c&&c!=wi)){var m=t.display.dragFunctions,D=n?et:vt;D(t.display.scroller,"dragstart",m.start),D(t.display.scroller,"dragenter",m.enter),D(t.display.scroller,"dragover",m.over),D(t.display.scroller,"dragleave",m.leave),D(t.display.scroller,"drop",m.drop)}}function Wf(t){t.options.lineWrapping?(ve(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(V(t.display.wrapper,"CodeMirror-wrap"),Fo(t)),Xs(t),Bt(t),fi(t),setTimeout(function(){return qn(t)},100)}function Ut(t,n){var c=this;if(!(this instanceof Ut))return new Ut(t,n);this.options=n=n?Be(n):{},Be(ba,n,!1);var a=n.value;"string"==typeof a?a=new br(a,n.mode,null,n.lineSeparator,n.direction):n.mode&&(a.modeOption=n.mode),this.doc=a;var m=new Ut.inputStyles[n.inputStyle](this),D=this.display=new gf(t,a,m,n);for(var X in D.wrapper.CodeMirror=this,eu(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$s(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qe,keySeq:null,specialChars:null},n.autofocus&&!E&&D.input.focus(),y&&e<11&&setTimeout(function(){return c.display.input.reset(!0)},20),function zf(t){var n=t.display;et(n.scroller,"mousedown",or(t,Vl)),et(n.scroller,"dblclick",y&&e<11?or(t,function(re){if(!bt(t,re)){var ae=Wn(t,re);if(ae&&!os(t,re)&&!on(t.display,re)){Ct(re);var we=t.findWordAt(ae);Xo(t.doc,we.anchor,we.head)}}}):function(re){return bt(t,re)||Ct(re)}),et(n.scroller,"contextmenu",function(re){return Zl(t,re)}),et(n.input.getField(),"contextmenu",function(re){n.scroller.contains(re.target)||Zl(t,re)});var c,a={end:0};function m(){n.activeTouch&&(c=setTimeout(function(){return n.activeTouch=null},1e3),(a=n.activeTouch).end=+new Date)}function D(re){if(1!=re.touches.length)return!1;var ae=re.touches[0];return ae.radiusX<=1&&ae.radiusY<=1}function X(re,ae){if(null==ae.left)return!0;var we=ae.left-re.left,Fe=ae.top-re.top;return we*we+Fe*Fe>400}et(n.scroller,"touchstart",function(re){if(!bt(t,re)&&!D(re)&&!os(t,re)){n.input.ensurePolled(),clearTimeout(c);var ae=+new Date;n.activeTouch={start:ae,moved:!1,prev:ae-a.end<=300?a:null},1==re.touches.length&&(n.activeTouch.left=re.touches[0].pageX,n.activeTouch.top=re.touches[0].pageY)}}),et(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),et(n.scroller,"touchend",function(re){var ae=n.activeTouch;if(ae&&!on(n,re)&&null!=ae.left&&!ae.moved&&new Date-ae.start<300){var Fe,we=t.coordsChar(n.activeTouch,"page");Fe=!ae.prev||X(ae,ae.prev)?new Dt(we,we):!ae.prev.prev||X(ae,ae.prev.prev)?t.findWordAt(we):new Dt(ot(we.line,0),At(t.doc,ot(we.line+1,0))),t.setSelection(Fe.anchor,Fe.head),t.focus(),Ct(re)}m()}),et(n.scroller,"touchcancel",m),et(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Hi(t,n.scroller.scrollTop),zn(t,n.scroller.scrollLeft,!0),mt(t,"scroll",t))}),et(n.scroller,"mousewheel",function(re){return Al(t,re)}),et(n.scroller,"DOMMouseScroll",function(re){return Al(t,re)}),et(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(re){bt(t,re)||yn(re)},over:function(re){bt(t,re)||(function Lf(t,n){var c=Wn(t,n);if(c){var a=document.createDocumentFragment();Js(t,c,a),t.display.dragCursor||(t.display.dragCursor=ce("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),fe(t.display.dragCursor,a)}}(t,re),yn(re))},start:function(re){return function Nf(t,n){if(y&&(!t.state.draggingText||+new Date-to<100))yn(n);else if(!bt(t,n)&&!on(t.display,n)&&(n.dataTransfer.setData("Text",t.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!k)){var c=ce("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(c.width=c.height=1,t.display.wrapper.appendChild(c),c._top=c.offsetTop),n.dataTransfer.setDragImage(c,0,0),h&&c.parentNode.removeChild(c)}}(t,re)},drop:or(t,Gl),leave:function(re){bt(t,re)||ro(t)}};var Z=n.input.getField();et(Z,"keyup",function(re){return Br.call(t,re)}),et(Z,"keydown",or(t,Xl)),et(Z,"keypress",or(t,Jl)),et(Z,"focus",function(re){return Po(t,re)}),et(Z,"blur",function(re){return hi(t,re)})}(this),If(),An(this),this.curOp.forceUpdate=!0,Tl(this,a),n.autofocus&&!E||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Po(c)},20):hi(this),ss)ss.hasOwnProperty(X)&&ss[X](this,n[X],wi);_l(this),n.finishInit&&n.finishInit(this);for(var Z=0;Z<as.length;++Z)as[Z](this);Xn(this),o&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(D.lineDiv).textRendering&&(D.lineDiv.style.textRendering="auto")}Ut.defaults=ba,Ut.optionHandlers=ss;var as=[];function lo(t,n,c,a){var D,m=t.doc;null==c&&(c="add"),"smart"==c&&(m.mode.indent?D=Oi(t,n).state:c="prev");var X=t.options.tabSize,Z=xt(m,n),re=Ie(Z.text,null,X);Z.stateAfter&&(Z.stateAfter=null);var we,ae=Z.text.match(/^\s*/)[0];if(a||/\S/.test(Z.text)){if("smart"==c&&((we=m.mode.indent(D,Z.text.slice(ae.length),Z.text))==ee||we>150)){if(!a)return;c="prev"}}else we=0,c="not";"prev"==c?we=n>m.first?Ie(xt(m,n-1).text,null,X):0:"add"==c?we=re+t.options.indentUnit:"subtract"==c?we=re-t.options.indentUnit:"number"==typeof c&&(we=re+c),we=Math.max(0,we);var Fe="",Ue=0;if(t.options.indentWithTabs)for(var Qe=Math.floor(we/X);Qe;--Qe)Ue+=X,Fe+="\t";if(Ue<we&&(Fe+=Ke(we-Ue)),Fe!=ae)return Tn(m,Fe,ot(n,0),ot(n,ae.length),"+input"),Z.stateAfter=null,!0;for(var Ye=0;Ye<m.sel.ranges.length;Ye++){var tt=m.sel.ranges[Ye];if(tt.head.line==n&&tt.head.ch<ae.length){var lt=ot(n,ae.length);sa(m,Ye,new Dt(lt,lt));break}}}Ut.defineInitHook=function(t){return as.push(t)};var Qr=null;function uo(t){Qr=t}function xa(t,n,c,a,m){var D=t.doc;t.display.shift=!1,a||(a=D.sel);var X=+new Date-200,Z="paste"==m||t.state.pasteIncoming>X,re=Rr(n),ae=null;if(Z&&a.ranges.length>1)if(Qr&&Qr.text.join("\n")==n){if(a.ranges.length%Qr.text.length==0){ae=[];for(var we=0;we<Qr.text.length;we++)ae.push(D.splitLines(Qr.text[we]))}}else re.length==a.ranges.length&&t.options.pasteLinesPerSelection&&(ae=pt(re,function(ct){return[ct]}));for(var Fe=t.curOp.updateInput,Ue=a.ranges.length-1;Ue>=0;Ue--){var Qe=a.ranges[Ue],Ye=Qe.from(),tt=Qe.to();Qe.empty()&&(c&&c>0?Ye=ot(Ye.line,Ye.ch-c):t.state.overwrite&&!Z?tt=ot(tt.line,Math.min(xt(D,tt.line).text.length,tt.ch+at(re).length)):Z&&Qr&&Qr.lineWise&&Qr.text.join("\n")==re.join("\n")&&(Ye=tt=ot(Ye.line,0)));var lt={from:Ye,to:tt,text:ae?ae[Ue%ae.length]:re,origin:m||(Z?"paste":t.state.cutIncoming>X?"cut":"+input")};vi(t.doc,lt),ir(t,"inputRead",t,lt)}n&&!Z&&ru(t,n),pi(t),t.curOp.updateInput<2&&(t.curOp.updateInput=Fe),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function wa(t,n){var c=t.clipboardData&&t.clipboardData.getData("Text");if(c)return t.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&n.hasFocus()&&Fr(n,function(){return xa(n,c,0,null,"paste")}),!0}function ru(t,n){if(t.options.electricChars&&t.options.smartIndent)for(var c=t.doc.sel,a=c.ranges.length-1;a>=0;a--){var m=c.ranges[a];if(!(m.head.ch>100||a&&c.ranges[a-1].head.line==m.head.line)){var D=t.getModeAt(m.head),X=!1;if(D.electricChars){for(var Z=0;Z<D.electricChars.length;Z++)if(n.indexOf(D.electricChars.charAt(Z))>-1){X=lo(t,m.head.line,"smart");break}}else D.electricInput&&D.electricInput.test(xt(t.doc,m.head.line).text.slice(0,m.head.ch))&&(X=lo(t,m.head.line,"smart"));X&&ir(t,"electricInput",t,m.head.line)}}}function nu(t){for(var n=[],c=[],a=0;a<t.doc.sel.ranges.length;a++){var m=t.doc.sel.ranges[a].head.line,D={anchor:ot(m,0),head:ot(m+1,0)};c.push(D),n.push(t.getRange(D.anchor,D.head))}return{text:n,ranges:c}}function ka(t,n,c,a){t.setAttribute("autocorrect",c?"":"off"),t.setAttribute("autocapitalize",a?"":"off"),t.setAttribute("spellcheck",!!n)}function iu(){var t=ce("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=ce("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return o?t.style.width="1000px":t.setAttribute("wrap","off"),w&&(t.style.border="1px solid black"),ka(t),n}function _a(t,n,c,a,m){var D=n,X=c,Z=xt(t,n.line),re=m&&"rtl"==t.direction?-c:c;function we(dt){var ht;if("codepoint"==a){var gt=Z.text.charCodeAt(n.ch+(c>0?0:-1));if(isNaN(gt))ht=null;else{var _t=c>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;ht=new ot(n.line,Math.max(0,Math.min(Z.text.length,n.ch+c*(_t?2:1))),-c)}}else ht=m?function bi(t,n,c,a){var m=rt(n,t.doc.direction);if(!m)return mi(n,c,a);c.ch>=n.text.length?(c.ch=n.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var D=He(m,c.ch,c.sticky),X=m[D];if("ltr"==t.doc.direction&&X.level%2==0&&(a>0?X.to>c.ch:X.from<c.ch))return mi(n,c,a);var re,Z=function(ct,dt){return yi(n,ct instanceof ot?ct.ch:ct,dt)},ae=function(ct){return t.options.lineWrapping?(re=re||Un(t,n),Gs(t,n,re,ct)):{begin:0,end:n.text.length}},we=ae("before"==c.sticky?Z(c,-1):c.ch);if("rtl"==t.doc.direction||1==X.level){var Fe=1==X.level==a<0,Ue=Z(c,Fe?1:-1);if(null!=Ue&&(Fe?Ue<=X.to&&Ue<=we.end:Ue>=X.from&&Ue>=we.begin)){var Qe=Fe?"before":"after";return new ot(c.line,Ue,Qe)}}var Ye=function(ct,dt,ht){for(;ct>=0&&ct<m.length;ct+=dt){var _t=m[ct],wt=dt>0==(1!=_t.level),Nt=wt?ht.begin:Z(ht.end,-1);if(_t.from<=Nt&&Nt<_t.to||(Nt=wt?_t.from:Z(_t.to,-1),ht.begin<=Nt&&Nt<ht.end))return Qt=Nt,wt?new ot(c.line,Z(Qt,1),"before"):new ot(c.line,Qt,"after")}var Qt},tt=Ye(D+a,a,we);if(tt)return tt;var lt=a>0?we.end:Z(we.begin,-1);return null==lt||a>0&&lt==n.text.length||!(tt=Ye(a>0?0:m.length-1,a,ae(lt)))?null:tt}(t.cm,Z,n,c):mi(Z,n,c);if(null==ht){if(dt||!function ae(){var dt=n.line+re;return!(dt<t.first||dt>=t.first+t.size)&&(n=new ot(dt,n.ch,n.sticky),Z=xt(t,dt))}())return!1;n=Ln(m,t.cm,Z,n.line,re)}else n=ht;return!0}if("char"==a||"codepoint"==a)we();else if("column"==a)we(!0);else if("word"==a||"group"==a)for(var Fe=null,Ue="group"==a,Qe=t.cm&&t.cm.getHelper(n,"wordChars"),Ye=!0;!(c<0)||we(!Ye);Ye=!1){var tt=Z.text.charAt(n.ch)||"\n",lt=K(tt,Qe)?"w":Ue&&"\n"==tt?"n":!Ue||/\s/.test(tt)?null:"p";if(Ue&&!Ye&&!lt&&(lt="s"),Fe&&Fe!=lt){c<0&&(c=1,we(),n.sticky="after");break}if(lt&&(Fe=lt),c>0&&!we(!Ye))break}var ct=Yo(t,n,D,X,!0);return ks(D,ct)&&(ct.hitSide=!0),ct}function su(t,n,c,a){var X,ae,m=t.doc,D=n.left;if("page"==a){var Z=Math.min(t.display.wrapper.clientHeight,ye(t).innerHeight||m(t).documentElement.clientHeight),re=Math.max(Z-.5*Hn(t.display),3);X=(c>0?n.bottom:n.top)+c*re}else"line"==a&&(X=c>0?n.bottom+3:n.top-3);for(;(ae=Ro(t,D,X)).outside;){if(c<0?X<=0:X>=m.height){ae.hitSide=!0;break}X+=5*c}return ae}var Mt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function au(t,n){var c=Ps(t,n.line);if(!c||c.hidden)return null;var a=xt(t.doc,n.line),m=tl(c,a,n.line),D=rt(a,t.doc.direction),X="left";D&&(X=He(D,n.ch)%2?"right":"left");var re=nl(m.map,n.ch,X);return re.offset="right"==re.collapse?re.end:re.start,re}function ki(t,n){return n&&(t.bad=!0),t}function fo(t,n,c){var a;if(n==t.display.lineDiv){if(!(a=t.display.lineDiv.childNodes[c]))return ki(t.clipPos(ot(t.display.viewTo-1)),!0);n=null,c=0}else for(a=n;;a=a.parentNode){if(!a||a==t.display.lineDiv)return null;if(a.parentNode&&a.parentNode==t.display.lineDiv)break}for(var m=0;m<t.display.view.length;m++){var D=t.display.view[m];if(D.node==a)return Xf(D,n,c)}}function Xf(t,n,c){var a=t.text.firstChild,m=!1;if(!n||!se(a,n))return ki(ot(Pt(t.line),0),!0);if(n==a&&(m=!0,n=a.childNodes[c],c=0,!n)){var D=t.rest?at(t.rest):t.line;return ki(ot(Pt(D),D.text.length),m)}var X=3==n.nodeType?n:null,Z=n;for(!X&&1==n.childNodes.length&&3==n.firstChild.nodeType&&(X=n.firstChild,c&&(c=X.nodeValue.length));Z.parentNode!=a;)Z=Z.parentNode;var re=t.measure,ae=re.maps;function we(lt,ct,dt){for(var ht=-1;ht<(ae?ae.length:0);ht++)for(var gt=ht<0?re.map:ae[ht],_t=0;_t<gt.length;_t+=3){var wt=gt[_t+2];if(wt==lt||wt==ct){var Nt=Pt(ht<0?t.line:t.rest[ht]),Qt=gt[_t]+dt;return(dt<0||wt!=lt)&&(Qt=gt[_t+(dt?1:0)]),ot(Nt,Qt)}}}var Fe=we(X,Z,c);if(Fe)return ki(Fe,m);for(var Ue=Z.nextSibling,Qe=X?X.nodeValue.length-c:0;Ue;Ue=Ue.nextSibling){if(Fe=we(Ue,Ue.firstChild,0))return ki(ot(Fe.line,Fe.ch-Qe),m);Qe+=Ue.textContent.length}for(var Ye=Z.previousSibling,tt=c;Ye;Ye=Ye.previousSibling){if(Fe=we(Ye,Ye.firstChild,-1))return ki(ot(Fe.line,Fe.ch+tt),m);tt+=Ye.textContent.length}}Mt.prototype.init=function(t){var n=this,c=this,a=c.cm,m=c.div=t.lineDiv;function D(Z){for(var re=Z.target;re;re=re.parentNode){if(re==m)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(re.className))break}return!1}function X(Z){if(D(Z)&&!bt(a,Z)){if(a.somethingSelected())uo({lineWise:!1,text:a.getSelections()}),"cut"==Z.type&&a.replaceSelection("",null,"cut");else{if(!a.options.lineWiseCopyCut)return;var re=nu(a);uo({lineWise:!0,text:re.text}),"cut"==Z.type&&a.operation(function(){a.setSelections(re.ranges,0,pe),a.replaceSelection("",null,"cut")})}if(Z.clipboardData){Z.clipboardData.clearData();var ae=Qr.text.join("\n");if(Z.clipboardData.setData("Text",ae),Z.clipboardData.getData("Text")==ae)return void Z.preventDefault()}var we=iu(),Fe=we.firstChild;a.display.lineSpace.insertBefore(we,a.display.lineSpace.firstChild),Fe.value=Qr.text.join("\n");var Ue=ne(m.ownerDocument);me(Fe),setTimeout(function(){a.display.lineSpace.removeChild(we),Ue.focus(),Ue==m&&c.showPrimarySelection()},50)}}m.contentEditable=!0,ka(m,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize),et(m,"paste",function(Z){!D(Z)||bt(a,Z)||wa(Z,a)||e<=11&&setTimeout(or(a,function(){return n.updateFromDOM()}),20)}),et(m,"compositionstart",function(Z){n.composing={data:Z.data,done:!1}}),et(m,"compositionupdate",function(Z){n.composing||(n.composing={data:Z.data,done:!1})}),et(m,"compositionend",function(Z){n.composing&&(Z.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),et(m,"touchstart",function(){return c.forceCompositionEnd()}),et(m,"input",function(){n.composing||n.readFromDOMSoon()}),et(m,"copy",X),et(m,"cut",X)},Mt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Mt.prototype.prepareSelection=function(){var t=Do(this.cm,!1);return t.focus=ne(this.div.ownerDocument)==this.div,t},Mt.prototype.showSelection=function(t,n){!t||!this.cm.display.view.length||((t.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Mt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Mt.prototype.showPrimarySelection=function(){var t=this.getSelection(),n=this.cm,c=n.doc.sel.primary(),a=c.from(),m=c.to();if(n.display.viewTo==n.display.viewFrom||a.line>=n.display.viewTo||m.line<n.display.viewFrom)t.removeAllRanges();else{var D=fo(n,t.anchorNode,t.anchorOffset),X=fo(n,t.focusNode,t.focusOffset);if(!D||D.bad||!X||X.bad||0!=St(Ii(D,X),a)||0!=St(bo(D,X),m)){var Z=n.display.view,re=a.line>=n.display.viewFrom&&au(n,a)||{node:Z[0].measure.map[2],offset:0},ae=m.line<n.display.viewTo&&au(n,m);if(!ae){var we=Z[Z.length-1].measure,Fe=we.maps?we.maps[we.maps.length-1]:we.map;ae={node:Fe[Fe.length-1],offset:Fe[Fe.length-2]-Fe[Fe.length-3]}}if(!re||!ae)return void t.removeAllRanges();var Qe,Ue=t.rangeCount&&t.getRangeAt(0);try{Qe=te(re.node,re.offset,ae.offset,ae.node)}catch(Ye){}Qe&&(!ue&&n.state.focused?(t.collapse(re.node,re.offset),Qe.collapsed||(t.removeAllRanges(),t.addRange(Qe))):(t.removeAllRanges(),t.addRange(Qe)),Ue&&null==t.anchorNode?t.addRange(Ue):ue&&this.startGracePeriod()),this.rememberSelection()}}},Mt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Mt.prototype.showMultipleSelections=function(t){fe(this.cm.display.cursorDiv,t.cursors),fe(this.cm.display.selectionDiv,t.selection)},Mt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Mt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var n=t.getRangeAt(0).commonAncestorContainer;return se(this.div,n)},Mt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ne(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Mt.prototype.blur=function(){this.div.blur()},Mt.prototype.getField=function(){return this.div},Mt.prototype.supportsTouch=function(){return!0},Mt.prototype.receivedFocus=function(){var t=this,n=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):Fr(this.cm,function(){return n.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function c(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,c))})},Mt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Mt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),n=this.cm;if(T&&d&&this.cm.display.gutterSpecs.length&&function lu(t){for(var n=t;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var c=fo(n,t.anchorNode,t.anchorOffset),a=fo(n,t.focusNode,t.focusOffset);c&&a&&Fr(n,function(){hr(n.doc,Fn(c,a),pe),(c.bad||a.bad)&&(n.curOp.selectionChanged=!0)})}}},Mt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var D,X,Z,t=this.cm,n=t.display,c=t.doc.sel.primary(),a=c.from(),m=c.to();if(0==a.ch&&a.line>t.firstLine()&&(a=ot(a.line-1,xt(t.doc,a.line-1).length)),m.ch==xt(t.doc,m.line).text.length&&m.line<t.lastLine()&&(m=ot(m.line+1,0)),a.line<n.viewFrom||m.line>n.viewTo-1)return!1;a.line==n.viewFrom||0==(D=Jt(t,a.line))?(X=Pt(n.view[0].line),Z=n.view[0].node):(X=Pt(n.view[D].line),Z=n.view[D-1].node.nextSibling);var ae,we,re=Jt(t,m.line);if(re==n.view.length-1?(ae=n.viewTo-1,we=n.lineDiv.lastChild):(ae=Pt(n.view[re+1].line)-1,we=n.view[re+1].node.previousSibling),!Z)return!1;for(var Fe=t.doc.splitLines(function qf(t,n,c,a,m){var D="",X=!1,Z=t.doc.lineSeparator(),re=!1;function ae(Qe){return function(Ye){return Ye.id==Qe}}function we(){X&&(D+=Z,re&&(D+=Z),X=re=!1)}function Fe(Qe){Qe&&(we(),D+=Qe)}function Ue(Qe){if(1==Qe.nodeType){var Ye=Qe.getAttribute("cm-text");if(Ye)return void Fe(Ye);var lt,tt=Qe.getAttribute("cm-marker");if(tt){var ct=t.findMarks(ot(a,0),ot(m+1,0),ae(+tt));return void(ct.length&&(lt=ct[0].find(0))&&Fe(Mn(t.doc,lt.from,lt.to).join(Z)))}if("false"==Qe.getAttribute("contenteditable"))return;var dt=/^(pre|div|p|li|table|br)$/i.test(Qe.nodeName);if(!/^br$/i.test(Qe.nodeName)&&0==Qe.textContent.length)return;dt&&we();for(var ht=0;ht<Qe.childNodes.length;ht++)Ue(Qe.childNodes[ht]);/^(pre|p)$/i.test(Qe.nodeName)&&(re=!0),dt&&(X=!0)}else 3==Qe.nodeType&&Fe(Qe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ue(n),n!=c;)n=n.nextSibling,re=!1;return D}(t,Z,we,X,ae)),Ue=Mn(t.doc,ot(X,0),ot(ae,xt(t.doc,ae).text.length));Fe.length>1&&Ue.length>1;)if(at(Fe)==at(Ue))Fe.pop(),Ue.pop(),ae--;else{if(Fe[0]!=Ue[0])break;Fe.shift(),Ue.shift(),X++}for(var Qe=0,Ye=0,tt=Fe[0],lt=Ue[0],ct=Math.min(tt.length,lt.length);Qe<ct&&tt.charCodeAt(Qe)==lt.charCodeAt(Qe);)++Qe;for(var dt=at(Fe),ht=at(Ue),gt=Math.min(dt.length-(1==Fe.length?Qe:0),ht.length-(1==Ue.length?Qe:0));Ye<gt&&dt.charCodeAt(dt.length-Ye-1)==ht.charCodeAt(ht.length-Ye-1);)++Ye;if(1==Fe.length&&1==Ue.length&&X==a.line)for(;Qe&&Qe>a.ch&&dt.charCodeAt(dt.length-Ye-1)==ht.charCodeAt(ht.length-Ye-1);)Qe--,Ye++;Fe[Fe.length-1]=dt.slice(0,dt.length-Ye).replace(/^\u200b+/,""),Fe[0]=Fe[0].slice(Qe).replace(/\u200b+$/,"");var _t=ot(X,Qe),wt=ot(ae,Ue.length?at(Ue).length-Ye:0);return Fe.length>1||Fe[0]||St(_t,wt)?(Tn(t.doc,Fe,_t,wt,"+input"),!0):void 0},Mt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Mt.prototype.reset=function(){this.forceCompositionEnd()},Mt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Mt.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Mt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&Fr(this.cm,function(){return Bt(t.cm)})},Mt.prototype.setUneditable=function(t){t.contentEditable="false"},Mt.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||or(this.cm,xa)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Mt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Mt.prototype.onContextMenu=function(){},Mt.prototype.resetPosition=function(){},Mt.prototype.needsContentAttribute=!0;var qt=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new qe,this.hasSelection=!1,this.composing=null};qt.prototype.init=function(t){var n=this,c=this,a=this.cm;this.createField(t);var m=this.textarea;function D(X){if(!bt(a,X)){if(a.somethingSelected())uo({lineWise:!1,text:a.getSelections()});else{if(!a.options.lineWiseCopyCut)return;var Z=nu(a);uo({lineWise:!0,text:Z.text}),"cut"==X.type?a.setSelections(Z.ranges,null,pe):(c.prevInput="",m.value=Z.text.join("\n"),me(m))}"cut"==X.type&&(a.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),w&&(m.style.width="0px"),et(m,"input",function(){y&&e>=9&&n.hasSelection&&(n.hasSelection=null),c.poll()}),et(m,"paste",function(X){bt(a,X)||wa(X,a)||(a.state.pasteIncoming=+new Date,c.fastPoll())}),et(m,"cut",D),et(m,"copy",D),et(t.scroller,"paste",function(X){if(!on(t,X)&&!bt(a,X)){if(!m.dispatchEvent)return a.state.pasteIncoming=+new Date,void c.focus();var Z=new Event("paste");Z.clipboardData=X.clipboardData,m.dispatchEvent(Z)}}),et(t.lineSpace,"selectstart",function(X){on(t,X)||Ct(X)}),et(m,"compositionstart",function(){var X=a.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:X,range:a.markText(X,a.getCursor("to"),{className:"CodeMirror-composing"})}}),et(m,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},qt.prototype.createField=function(t){this.wrapper=iu(),this.textarea=this.wrapper.firstChild},qt.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},qt.prototype.prepareSelection=function(){var t=this.cm,n=t.display,c=t.doc,a=Do(t);if(t.options.moveInputWithCursor){var m=Er(t,c.sel.primary().head,"div"),D=n.wrapper.getBoundingClientRect(),X=n.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,m.top+X.top-D.top)),a.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,m.left+X.left-D.left))}return a},qt.prototype.showSelection=function(t){var c=this.cm.display;fe(c.cursorDiv,t.cursors),fe(c.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},qt.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var n=this.cm;if(n.somethingSelected()){this.prevInput="";var c=n.getSelection();this.textarea.value=c,n.state.focused&&me(this.textarea),y&&e>=9&&(this.hasSelection=c)}else t||(this.prevInput=this.textarea.value="",y&&e>=9&&(this.hasSelection=null))}},qt.prototype.getField=function(){return this.textarea},qt.prototype.supportsTouch=function(){return!1},qt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!E||ne(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(t){}},qt.prototype.blur=function(){this.textarea.blur()},qt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qt.prototype.receivedFocus=function(){this.slowPoll()},qt.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},qt.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,function c(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,c))})},qt.prototype.poll=function(){var t=this,n=this.cm,c=this.textarea,a=this.prevInput;if(this.contextMenuPending||!n.state.focused||ni(c)&&!a&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var m=c.value;if(m==a&&!n.somethingSelected())return!1;if(y&&e>=9&&this.hasSelection===m||P&&/[\uf700-\uf7ff]/.test(m))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var D=m.charCodeAt(0);if(8203==D&&!a&&(a="\u200b"),8666==D)return this.reset(),this.cm.execCommand("undo")}for(var X=0,Z=Math.min(a.length,m.length);X<Z&&a.charCodeAt(X)==m.charCodeAt(X);)++X;return Fr(n,function(){xa(n,m.slice(X),a.length-X,null,t.composing?"*compose":null),m.length>1e3||m.indexOf("\n")>-1?c.value=t.prevInput="":t.prevInput=m,t.composing&&(t.composing.range.clear(),t.composing.range=n.markText(t.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},qt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qt.prototype.onKeyPress=function(){y&&e>=9&&(this.hasSelection=null),this.fastPoll()},qt.prototype.onContextMenu=function(t){var n=this,c=n.cm,a=c.display,m=n.textarea;n.contextMenuPending&&n.contextMenuPending();var D=Wn(c,t),X=a.scroller.scrollTop;if(D&&!h){c.options.resetSelectionOnContextMenu&&-1==c.doc.sel.contains(D)&&or(c,hr)(c.doc,Fn(D),pe);var Fe,re=m.style.cssText,ae=n.wrapper.style.cssText,we=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",m.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-we.top-5)+"px; left: "+(t.clientX-we.left-5)+"px;\n      z-index: 1000; background: "+(y?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",o&&(Fe=m.ownerDocument.defaultView.scrollY),a.input.focus(),o&&m.ownerDocument.defaultView.scrollTo(null,Fe),a.input.reset(),c.somethingSelected()||(m.value=n.prevInput=" "),n.contextMenuPending=Qe,a.selForContextMenu=c.doc.sel,clearTimeout(a.detectingSelectAll),y&&e>=9&&Ue(),G){yn(t);var Ye=function(){vt(window,"mouseup",Ye),setTimeout(Qe,20)};et(window,"mouseup",Ye)}else setTimeout(Qe,50)}function Ue(){if(null!=m.selectionStart){var tt=c.somethingSelected(),lt="\u200b"+(tt?m.value:"");m.value="\u21da",m.value=lt,n.prevInput=tt?"":"\u200b",m.selectionStart=1,m.selectionEnd=lt.length,a.selForContextMenu=c.doc.sel}}function Qe(){if(n.contextMenuPending==Qe&&(n.contextMenuPending=!1,n.wrapper.style.cssText=ae,m.style.cssText=re,y&&e<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=X),null!=m.selectionStart)){(!y||y&&e<9)&&Ue();var tt=0,lt=function(){a.selForContextMenu==c.doc.sel&&0==m.selectionStart&&m.selectionEnd>0&&"\u200b"==n.prevInput?or(c,$o)(c):tt++<10?a.detectingSelectAll=setTimeout(lt,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(lt,200)}}},qt.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},qt.prototype.setUneditable=function(){},qt.prototype.needsContentAttribute=!1,function tu(t){var n=t.optionHandlers;function c(a,m,D,X){t.defaults[a]=m,D&&(n[a]=X?function(Z,re,ae){ae!=wi&&D(Z,re,ae)}:D)}t.defineOption=c,t.Init=wi,c("value","",function(a,m){return a.setValue(m)},!0),c("mode",null,function(a,m){a.doc.modeOption=m,ia(a)},!0),c("indentUnit",2,ia,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(a){qi(a),fi(a),Bt(a)},!0),c("lineSeparator",null,function(a,m){if(a.doc.lineSep=m,m){var D=[],X=a.doc.first;a.doc.iter(function(re){for(var ae=0;;){var we=re.text.indexOf(m,ae);if(-1==we)break;ae=we+m.length,D.push(ot(X,we))}X++});for(var Z=D.length-1;Z>=0;Z--)Tn(a.doc,m,D[Z],ot(D[Z].line,D[Z].ch+m.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,m,D){a.state.specialChars=new RegExp(m.source+(m.test("\t")?"":"|\t"),"g"),D!=wi&&a.refresh()}),c("specialCharPlaceholder",Ja,function(a){return a.refresh()},!0),c("electricChars",!0),c("inputStyle",E?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(a,m){return a.getInputField().spellcheck=m},!0),c("autocorrect",!1,function(a,m){return a.getInputField().autocorrect=m},!0),c("autocapitalize",!1,function(a,m){return a.getInputField().autocapitalize=m},!0),c("rtlMoveVisually",!j),c("wholeLineUpdateBefore",!0),c("theme","default",function(a){eu(a),zi(a)},!0),c("keyMap","default",function(a,m,D){var X=Vn(m),Z=D!=wi&&Vn(D);Z&&Z.detach&&Z.detach(a,X),X.attach&&X.attach(a,Z||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,Wf,!0),c("gutters",[],function(a,m){a.display.gutterSpecs=ra(m,a.options.lineNumbers),zi(a)},!0),c("fixedGutter",!0,function(a,m){a.display.gutters.style.left=m?zs(a.display)+"px":"0",a.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(a){return qn(a)},!0),c("scrollbarStyle","native",function(a){$s(a),qn(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),c("lineNumbers",!1,function(a,m){a.display.gutterSpecs=ra(a.options.gutters,m),zi(a)},!0),c("firstLineNumber",1,zi,!0),c("lineNumberFormatter",function(a){return a},zi,!0),c("showCursorWhenSelecting",!1,Qi,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(a,m){"nocursor"==m&&(hi(a),a.display.input.blur()),a.display.input.readOnlyChanged(m)}),c("screenReaderLabel",null,function(a,m){m=""===m?null:m,a.display.input.screenReaderLabelChanged(m)}),c("disableInput",!1,function(a,m){m||a.display.input.reset()},!0),c("dragDrop",!0,Hf),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,Qi,!0),c("singleCursorHeightPerLine",!0,Qi,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,qi,!0),c("addModeClass",!1,qi,!0),c("pollInterval",100),c("undoDepth",200,function(a,m){return a.doc.history.undoDepth=m}),c("historyEventDelay",1250),c("viewportMargin",10,function(a){return a.refresh()},!0),c("maxHighlightLength",1e4,qi,!0),c("moveInputWithCursor",!0,function(a,m){m||a.display.input.resetPosition()}),c("tabindex",null,function(a,m){return a.display.input.getField().tabIndex=m||""}),c("autofocus",null),c("direction","ltr",function(a,m){return a.doc.setDirection(m)},!0),c("phrases",null)}(Ut),function ou(t){var n=t.optionHandlers,c=t.helpers={};t.prototype={constructor:t,focus:function(){ye(this).focus(),this.display.input.focus()},setOption:function(a,m){var D=this.options,X=D[a];D[a]==m&&"mode"!=a||(D[a]=m,n.hasOwnProperty(a)&&or(this,n[a])(this,m,X),mt(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,m){this.state.keyMaps[m?"push":"unshift"](Vn(a))},removeKeyMap:function(a){for(var m=this.state.keyMaps,D=0;D<m.length;++D)if(m[D]==a||m[D].name==a)return m.splice(D,1),!0},addOverlay:vr(function(a,m){var D=a.token?a:t.getMode(this.options,a);if(D.startState)throw new Error("Overlays may not be stateful.");(function Wt(t,n,c){for(var a=0,m=c(n);a<t.length&&c(t[a])<=m;)a++;t.splice(a,0,n)})(this.state.overlays,{mode:D,modeSpec:a,opaque:m&&m.opaque,priority:m&&m.priority||0},function(X){return X.priority}),this.state.modeGen++,Bt(this)}),removeOverlay:vr(function(a){for(var m=this.state.overlays,D=0;D<m.length;++D){var X=m[D].modeSpec;if(X==a||"string"==typeof a&&X.name==a)return m.splice(D,1),this.state.modeGen++,void Bt(this)}}),indentLine:vr(function(a,m,D){"string"!=typeof m&&"number"!=typeof m&&(m=null==m?this.options.smartIndent?"smart":"prev":m?"add":"subtract"),Li(this.doc,a)&&lo(this,a,m,D)}),indentSelection:vr(function(a){for(var m=this.doc.sel.ranges,D=-1,X=0;X<m.length;X++){var Z=m[X];if(Z.empty())Z.head.line>D&&(lo(this,Z.head.line,a,!0),D=Z.head.line,X==this.doc.sel.primIndex&&pi(this));else{var re=Z.from(),ae=Z.to(),we=Math.max(D,re.line);D=Math.min(this.lastLine(),ae.line-(ae.ch?0:1))+1;for(var Fe=we;Fe<D;++Fe)lo(this,Fe,a);var Ue=this.doc.sel.ranges;0==re.ch&&m.length==Ue.length&&Ue[X].from().ch>0&&sa(this.doc,X,new Dt(re,Ue[X].to()),pe)}}}),getTokenAt:function(a,m){return Pa(this,a,m)},getLineTokens:function(a,m){return Pa(this,ot(a),m,!0)},getTokenTypeAt:function(a){a=At(this.doc,a);var re,m=Cs(this,xt(this.doc,a.line)),D=0,X=(m.length-1)/2,Z=a.ch;if(0==Z)re=m[2];else for(;;){var ae=D+X>>1;if((ae?m[2*ae-1]:0)>=Z)X=ae;else{if(!(m[2*ae+1]<Z)){re=m[2*ae+2];break}D=ae+1}}var we=re?re.indexOf("overlay "):-1;return we<0?re:0==we?null:re.slice(0,we-1)},getModeAt:function(a){var m=this.doc.mode;return m.innerMode?t.innerMode(m,this.getTokenAt(a).state).mode:m},getHelper:function(a,m){return this.getHelpers(a,m)[0]},getHelpers:function(a,m){var D=[];if(!c.hasOwnProperty(m))return D;var X=c[m],Z=this.getModeAt(a);if("string"==typeof Z[m])X[Z[m]]&&D.push(X[Z[m]]);else if(Z[m])for(var re=0;re<Z[m].length;re++){var ae=X[Z[m][re]];ae&&D.push(ae)}else Z.helperType&&X[Z.helperType]?D.push(X[Z.helperType]):X[Z.name]&&D.push(X[Z.name]);for(var we=0;we<X._global.length;we++){var Fe=X._global[we];Fe.pred(Z,this)&&-1==U(D,Fe.val)&&D.push(Fe.val)}return D},getStateAfter:function(a,m){var D=this.doc;return Oi(this,(a=Ra(D,null==a?D.first+D.size-1:a))+1,m).state},cursorCoords:function(a,m){var X=this.doc.sel.primary();return Er(this,null==a?X.head:"object"==typeof a?At(this.doc,a):a?X.from():X.to(),m||"page")},charCoords:function(a,m){return ln(this,At(this.doc,a),m||"page")},coordsChar:function(a,m){return Ro(this,(a=Oo(this,a,m||"page")).left,a.top)},lineAtHeight:function(a,m){return a=Oo(this,{top:a,left:0},m||"page").top,bn(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,m,D){var Z,X=!1;if("number"==typeof a){var re=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>re&&(a=re,X=!0),Z=xt(this.doc,a)}else Z=a;return an(this,Z,{top:0,left:0},m||"page",D||X).top+(X?this.doc.height-Xr(Z):0)},defaultTextHeight:function(){return Hn(this.display)},defaultCharWidth:function(){return ci(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,m,D,X,Z){var re=this.display,ae=(a=Er(this,At(this.doc,a))).bottom,we=a.left;if(m.style.position="absolute",m.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(m),re.sizer.appendChild(m),"over"==X)ae=a.top;else if("above"==X||"near"==X){var Fe=Math.max(re.wrapper.clientHeight,this.doc.height),Ue=Math.max(re.sizer.clientWidth,re.lineSpace.clientWidth);("above"==X||a.bottom+m.offsetHeight>Fe)&&a.top>m.offsetHeight?ae=a.top-m.offsetHeight:a.bottom+m.offsetHeight<=Fe&&(ae=a.bottom),we+m.offsetWidth>Ue&&(we=Ue-m.offsetWidth)}m.style.top=ae+"px",m.style.left=m.style.right="","right"==Z?(we=re.sizer.clientWidth-m.offsetWidth,m.style.right="0px"):("left"==Z?we=0:"middle"==Z&&(we=(re.sizer.clientWidth-m.offsetWidth)/2),m.style.left=we+"px"),D&&function sf(t,n){var c=Qo(t,n);null!=c.scrollTop&&Hi(t,c.scrollTop),null!=c.scrollLeft&&zn(t,c.scrollLeft)}(this,{left:we,top:ae,right:we+m.offsetWidth,bottom:ae+m.offsetHeight})},triggerOnKeyDown:vr(Xl),triggerOnKeyPress:vr(Jl),triggerOnKeyUp:Br,triggerOnMouseDown:vr(Vl),execCommand:function(a){if(Vr.hasOwnProperty(a))return Vr[a].call(null,this)},triggerElectric:vr(function(a){ru(this,a)}),findPosH:function(a,m,D,X){var Z=1;m<0&&(Z=-1,m=-m);for(var re=At(this.doc,a),ae=0;ae<m&&!(re=_a(this.doc,re,Z,D,X)).hitSide;++ae);return re},moveH:vr(function(a,m){var D=this;this.extendSelectionsBy(function(X){return D.display.shift||D.doc.extend||X.empty()?_a(D.doc,X.head,a,m,D.options.rtlMoveVisually):a<0?X.from():X.to()},ke)}),deleteH:vr(function(a,m){var D=this.doc.sel,X=this.doc;D.somethingSelected()?X.replaceSelection("",null,"+delete"):vn(this,function(Z){var re=_a(X,Z.head,a,m,!1);return a<0?{from:re,to:Z.head}:{from:Z.head,to:re}})}),findPosV:function(a,m,D,X){var Z=1,re=X;m<0&&(Z=-1,m=-m);for(var ae=At(this.doc,a),we=0;we<m;++we){var Fe=Er(this,ae,"div");if(null==re?re=Fe.left:Fe.left=re,(ae=su(this,Fe,Z,D)).hitSide)break}return ae},moveV:vr(function(a,m){var D=this,X=this.doc,Z=[],re=!this.display.shift&&!X.extend&&X.sel.somethingSelected();if(X.extendSelectionsBy(function(we){if(re)return a<0?we.from():we.to();var Fe=Er(D,we.head,"div");null!=we.goalColumn&&(Fe.left=we.goalColumn),Z.push(Fe.left);var Ue=su(D,Fe,a,m);return"page"==m&&we==X.sel.primary()&&Ys(D,ln(D,Ue,"div").top-Fe.top),Ue},ke),Z.length)for(var ae=0;ae<X.sel.ranges.length;ae++)X.sel.ranges[ae].goalColumn=Z[ae]}),findWordAt:function(a){var D=xt(this.doc,a.line).text,X=a.ch,Z=a.ch;if(D){var re=this.getHelper(a,"wordChars");"before"!=a.sticky&&Z!=D.length||!X?++Z:--X;for(var ae=D.charAt(X),we=K(ae,re)?function(Fe){return K(Fe,re)}:/\s/.test(ae)?function(Fe){return/\s/.test(Fe)}:function(Fe){return!/\s/.test(Fe)&&!K(Fe)};X>0&&we(D.charAt(X-1));)--X;for(;Z<D.length&&we(D.charAt(Z));)++Z}return new Dt(ot(a.line,X),ot(a.line,Z))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ve(this.display.cursorDiv,"CodeMirror-overwrite"):V(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ne(de(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:vr(function(a,m){Gi(this,a,m)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-mr(this)-this.display.barHeight,width:a.scrollWidth-mr(this)-this.display.barWidth,clientHeight:Ds(this),clientWidth:sn(this)}},scrollIntoView:vr(function(a,m){null==a?(a={from:this.doc.sel.primary().head,to:null},null==m&&(m=this.options.cursorScrollMargin)):"number"==typeof a?a={from:ot(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=m||0,null!=a.from.line?function dl(t,n){Uo(t),t.curOp.scrollToPos=n}(this,a):Zs(this,a.from,a.to,a.margin)}),setSize:vr(function(a,m){var D=this,X=function(re){return"number"==typeof re||/^\d+$/.test(String(re))?re+"px":re};null!=a&&(this.display.wrapper.style.width=X(a)),null!=m&&(this.display.wrapper.style.height=X(m)),this.options.lineWrapping&&ol(this);var Z=this.display.viewFrom;this.doc.iter(Z,this.display.viewTo,function(re){if(re.widgets)for(var ae=0;ae<re.widgets.length;ae++)if(re.widgets[ae].noHScroll){wn(D,Z,"widget");break}++Z}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(a){return Fr(this,a)},startOperation:function(){return An(this)},endOperation:function(){return Xn(this)},refresh:vr(function(){var a=this.display.cachedTextHeight;Bt(this),this.curOp.forceUpdate=!0,fi(this),Gi(this,this.doc.scrollLeft,this.doc.scrollTop),Zt(this.display),(null==a||Math.abs(a-Hn(this.display))>.5||this.options.lineWrapping)&&Xs(this),mt(this,"refresh",this)}),swapDoc:vr(function(a){var m=this.doc;return m.cm=null,this.state.selectingText&&this.state.selectingText(),Tl(this,a),fi(this),this.display.input.reset(),Gi(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,ir(this,"swapDoc",this,m),m}),phrase:function(a){var m=this.options.phrases;return m&&Object.prototype.hasOwnProperty.call(m,a)?m[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Tt(t),t.registerHelper=function(a,m,D){c.hasOwnProperty(a)||(c[a]=t[a]={_global:[]}),c[a][m]=D},t.registerGlobalHelper=function(a,m,D,X){t.registerHelper(a,m,X),c[a]._global.push({pred:D,val:X})}}(Ut);var uu="iter insert remove copy getEditor constructor".split(" ");for(var ls in br.prototype)br.prototype.hasOwnProperty(ls)&&U(uu,ls)<0&&(Ut.prototype[ls]=function(t){return function(){return t.apply(this.doc,arguments)}}(br.prototype[ls]));return Tt(br),Ut.inputStyles={textarea:qt,contenteditable:Mt},Ut.defineMode=function(t){!Ut.defaults.mode&&"null"!=t&&(Ut.defaults.mode=t),zr.apply(this,arguments)},Ut.defineMIME=function bs(t,n){en[t]=n},Ut.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Ut.defineMIME("text/plain","null"),Ut.defineExtension=function(t,n){Ut.prototype[t]=n},Ut.defineDocExtension=function(t,n){br.prototype[t]=n},Ut.fromTextArea=function Jf(t,n){if((n=n?Be(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var c=ne(t.ownerDocument);n.autofocus=c==t||null!=t.getAttribute("autofocus")&&c==document.body}function a(){t.value=Z.getValue()}var m;if(t.form&&(et(t.form,"submit",a),!n.leaveSubmitMethodAlone)){var D=t.form;m=D.submit;try{var X=D.submit=function(){a(),D.submit=m,D.submit(),D.submit=X}}catch(re){}}n.finishInit=function(re){re.save=a,re.getTextArea=function(){return t},re.toTextArea=function(){re.toTextArea=isNaN,a(),t.parentNode.removeChild(re.getWrapperElement()),t.style.display="",t.form&&(vt(t.form,"submit",a),!n.leaveSubmitMethodAlone&&"function"==typeof t.form.submit&&(t.form.submit=m))}},t.style.display="none";var Z=Ut(function(re){return t.parentNode.insertBefore(re,t.nextSibling)},n);return Z},function Vf(t){t.off=vt,t.on=et,t.wheelEventPixels=yf,t.Doc=br,t.splitLines=Rr,t.countColumn=Ie,t.findColumn=Pe,t.isWordChar=Re,t.Pass=ee,t.signal=mt,t.Line=oi,t.changeEnd=En,t.scrollbarModel=yl,t.Pos=ot,t.cmpPos=St,t.modes=Dn,t.mimeModes=en,t.resolveMode=mn,t.getMode=ii,t.modeExtensions=Lr,t.extendMode=xs,t.copyState=Ir,t.startState=Ni,t.innerMode=go,t.commands=Vr,t.keyMap=Pr,t.keyName=pa,t.isModifierKey=ha,t.lookupKey=dn,t.normalizeKeyMap=ca,t.StringStream=Xt,t.SharedTextMarker=eo,t.TextMarker=pn,t.LineWidget=$i,t.e_preventDefault=Ct,t.e_stopPropagation=Et,t.e_stop=yn,t.addClass=ve,t.contains=se,t.rmClass=V,t.keyNames=Mr}(Ut),Ut.version="5.65.7",Ut}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("turtle",function(ie){var q,ue=ie.indentUnit;function l(h){return new RegExp("^(?:"+h.join("|")+")$","i")}l([]);var y=l(["@prefix","@base","a"]),e=/[*+\-<>=&|]/;function o(h,k){var v=h.next();if(q=null,"<"==v&&!h.match(/^[\s\u00a0=]/,!1))return h.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==v||"'"==v)return k.tokenize=function u(h){return function(k,v){for(var w,f=!1;null!=(w=k.next());){if(w==h&&!f){v.tokenize=o;break}f=!f&&"\\"==w}return"string"}}(v),k.tokenize(h,k);if(/[{}\(\),\.;\[\]]/.test(v))return q=v,null;if("#"==v)return h.skipToEnd(),"comment";if(e.test(v))return h.eatWhile(e),null;if(":"==v)return"operator";if(h.eatWhile(/[_\w\d]/),":"==h.peek())return"variable-3";var f=h.current();return y.test(f)?"meta":v>="A"&&v<="Z"?"comment":"keyword"}function d(h,k,v){h.context={prev:h.context,indent:h.indent,col:v,type:k}}function b(h){h.indent=h.context.indent,h.context=h.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(h,k){if(h.sol()&&(k.context&&null==k.context.align&&(k.context.align=!1),k.indent=h.indentation()),h.eatSpace())return null;var v=k.tokenize(h,k);if("comment"!=v&&k.context&&null==k.context.align&&"pattern"!=k.context.type&&(k.context.align=!0),"("==q)d(k,")",h.column());else if("["==q)d(k,"]",h.column());else if("{"==q)d(k,"}",h.column());else if(/[\]\}\)]/.test(q)){for(;k.context&&"pattern"==k.context.type;)b(k);k.context&&q==k.context.type&&b(k)}else"."==q&&k.context&&"pattern"==k.context.type?b(k):/atom|string|variable/.test(v)&&k.context&&(/[\}\]]/.test(k.context.type)?d(k,"pattern",h.column()):"pattern"==k.context.type&&!k.context.align&&(k.context.align=!0,k.context.col=h.column()));return v},indent:function(h,k){var v=k&&k.charAt(0),f=h.context;if(/[\]\}]/.test(v))for(;f&&"pattern"==f.type;)f=f.prev;var w=f&&v==f.type;return f?"pattern"==f.type?f.col:f.align?f.col+(w?0:1):f.indent+(w?0:ue):0},lineComment:"#"}}),J.defineMIME("text/turtle","turtle")}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("sparql",function(ie){var q,ue=ie.indentUnit;function l(k){return new RegExp("^(?:"+k.join("|")+")$","i")}var F=l(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),y=l(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load","into"]),e=/[*+\-<>=&|\^\/!\?]/;function o(k,v){var f=k.next();if(q=null,"$"==f||"?"==f)return"?"==f&&k.match(/\s/,!1)?"operator":(k.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"==f&&!k.match(/^[\s\u00a0=]/,!1))return k.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==f||"'"==f)return v.tokenize=function d(k){return function(v,f){for(var T,w=!1;null!=(T=v.next());){if(T==k&&!w){f.tokenize=o;break}w=!w&&"\\"==T}return"string"}}(f),v.tokenize(k,v);if(/[{}\(\),\.;\[\]]/.test(f))return q=f,"bracket";if("#"==f)return k.skipToEnd(),"comment";if(e.test(f))return"operator";if(":"==f)return u(k),"atom";if("@"==f)return k.eatWhile(/[a-z\d\-]/i),"meta";if(k.eatWhile(/[_\w\d]/),k.eat(":"))return u(k),"atom";var w=k.current();return F.test(w)?"builtin":y.test(w)?"keyword":"variable"}function u(k){k.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function b(k,v,f){k.context={prev:k.context,indent:k.indent,col:f,type:v}}function h(k){k.indent=k.context.indent,k.context=k.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(k,v){if(k.sol()&&(v.context&&null==v.context.align&&(v.context.align=!1),v.indent=k.indentation()),k.eatSpace())return null;var f=v.tokenize(k,v);if("comment"!=f&&v.context&&null==v.context.align&&"pattern"!=v.context.type&&(v.context.align=!0),"("==q)b(v,")",k.column());else if("["==q)b(v,"]",k.column());else if("{"==q)b(v,"}",k.column());else if(/[\]\}\)]/.test(q)){for(;v.context&&"pattern"==v.context.type;)h(v);v.context&&q==v.context.type&&(h(v),"}"==q&&v.context&&"pattern"==v.context.type&&h(v))}else"."==q&&v.context&&"pattern"==v.context.type?h(v):/atom|string|variable/.test(f)&&v.context&&(/[\}\]]/.test(v.context.type)?b(v,"pattern",k.column()):"pattern"==v.context.type&&!v.context.align&&(v.context.align=!0,v.context.col=k.column()));return f},indent:function(k,v){var f=v&&v.charAt(0),w=k.context;if(/[\]\}]/.test(f))for(;w&&"pattern"==w.type;)w=w.prev;var T=w&&f==w.type;return w?"pattern"==w.type?w.col:w.align?w.col+(T?0:1):w.indent+(T?0:ue):0},lineComment:"#"}}),J.defineMIME("application/sparql-query","sparql")});