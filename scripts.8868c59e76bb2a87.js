var Cg=Object.defineProperty,Sg=Object.defineProperties,Ag=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,mp=Object.prototype.propertyIsEnumerable,gp=(J,re,le)=>re in J?Cg(J,re,{enumerable:!0,configurable:!0,writable:!0,value:le}):J[re]=le,Er=(J,re)=>{for(var le in re||(re={}))yp.call(re,le)&&gp(J,le,re[le]);if(Nu)for(var le of Nu(re))mp.call(re,le)&&gp(J,le,re[le]);return J},yn=(J,re)=>Sg(J,Ag(re)),bp=(J,re)=>{var le={};for(var q in J)yp.call(J,q)&&re.indexOf(q)<0&&(le[q]=J[q]);if(null!=J&&Nu)for(var q of Nu(J))re.indexOf(q)<0&&mp.call(J,q)&&(le[q]=J[q]);return le};function dateConverter(J){const re=1721425.5,q=["So","Mo","Di","Mi","Do","Fr","Sa"],u={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function F(y,f){return y-f*Math.floor(y/f)}function e(y){return(y=parseInt(y))%4==0&&!(y%100==0&&y%400!=0)}function o(y,f,w){return re-1+365*(y-1)+Math.floor((y-1)/4)+-Math.floor((y-1)/100)+Math.floor((y-1)/400)+Math.floor((367*f-362)/12+(f<=2?0:e(y)?-1:-2)+w)}function d(y,f){y=parseInt(y);const w={};let T;switch(f){case"GREGORIAN":case"gregorian":T=function l(y){let f,w,T,I,W,B,L,E,D,G,K,H,ie,ue;return f=Math.floor(y-.5)+.5,w=f-re,T=Math.floor(w/146097),I=F(w,146097),W=Math.floor(I/36524),B=F(I,36524),L=Math.floor(B/1461),E=F(B,1461),D=Math.floor(E/365),G=400*T+100*W+4*L+D,4==W||4==D||G++,K=f-o(G,1,1),H=f<o(G,3,1)?0:e(G)?1:2,ie=Math.floor((12*(K+H)+373)/367),ue=f-o(G,ie,1)+1,G<=0&&G--,new Array(G,ie,ue)}(y);break;case"JULIAN":case"julian":T=S.jd_to_julian(y);break;case"JEWISH":case"jewish":T=S.jd_to_hebrew(y);break;case"FRENCH":case"french":T=S.jd_to_french_revolutionary(y)}return w.year=T[0],w.month=T[1],w.day=T[2],w.weekday=function v(y){return y=Number(y),F(Math.floor(y+1.5),7)}(y),w}const m=d(J.dateval1,J.calendar),c=d(J.dateval2,J.calendar);let k="";if(J.dateprecision1==J.dateprecision2)switch(J.dateprecision1){case"DAY":k=m.year===c.year&&m.month===c.month&&m.day===c.day?"["+q[m.weekday]+"] "+m.day+". "+u[J.calendar][m.month]+" "+m.year:"["+q[m.weekday]+"] "+m.day+". "+u[J.calendar][m.month]+" "+m.year+" \u2013 ["+q[c.weekday]+"] "+c.day+". "+u[J.calendar][c.month]+" "+c.year;break;case"MONTH":k=m.year===c.year&&m.month===c.month?u[J.calendar][m.month]+" "+m.year:u[J.calendar][m.month]+" "+m.year+" \u2013 "+u[J.calendar][c.month]+" "+c.year;break;case"YEAR":k=m.year===c.year?m.year:m.year+"\u2013"+c.year}else{switch(J.dateprecision1){case"DAY":k="["+q[m.weekday]+"] "+m.day+". "+u[J.calendar][m.month]+" "+m.year;break;case"MONTH":k=u[J.calendar][m.month]+" "+m.year;break;case"YEAR":k=m.year}switch(k+=" \u2013 ",J.dateprecision2){case"DAY":k+="["+q[c.weekday]+"] "+c.day+". "+u[J.calendar][c.month]+" "+c.year;break;case"MONTH":k+=u[J.calendar][c.month]+" "+c.year;break;case"YEAR":k+=c.year}}return k+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[J.calendar].short+")",k}function htmlConverter(J,re){let q,u,F,v,e,o,l,d,m,c,le="";const k={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},y={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},f={};for(let T in y.settings.matching)f[y.settings.matching[T]]=T;const w=Object.keys(J);w.sort(function(T,I){return k[f[T]]-k[f[I]]}),q=[];for(let T in w)for(l in o=w[T],J[o])F=J[o][l].start,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"start"}),"_link"==q[F][q[F].length-1].propname?(q[F][q[F].length-1].href=J[o][l].href,void 0!==J[o][l].resid&&(q[F][q[F].length-1].resid=J[o][l].resid)):"style"==q[F][q[F].length-1].propname&&(q[F][q[F].length-1].css=J[o][l].css),F=J[o][l].end,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"end"});for(u=[],d=0;d<=re.length;d++){if(void 0!==q[d]){for(e=[],c=[],m=q[d].length-1;m>=0;m--)if("end"==q[d][m].proptype&&"linebreak"!=q[d][m].propname){for(;void 0!==(v=u.pop())&&(le+="</"+f[v]+">",v!=q[d][m].propname);)e.push(v);for(;void 0!==(v=e.pop());)u.push(v),le+="<"+f[v]+">"}for(m in q[d])if("start"==q[d][m].proptype)if("linebreak"==q[d][m].propname)le+="<br/>";else if("_link"==q[d][m].propname){u.push(q[d][m].propname);let T=q[d][m].href;void 0===T&&void 0!==q[d][m].resid&&(T="https://www.salsah.org/api/resources/"+q[d][m].resid),le+="<"+f[q[d][m].propname]+' href="'+T,void 0!==q[d][m].resid?le+='" class="salsah-link">':le+='">'}else"style"==q[d][m].propname?(u.push(q[d][m].propname),le+="<"+f[q[d][m].propname]+' style="'+q[d][m].css+'">'):(u.push(q[d][m].propname),le+="<"+f[q[d][m].propname]+">")}d<re.length&&(le+=re.charAt(d))}return le=le.replace(/\n/g,"<br/>"),le=le.replace(/\r/g,""),le}(function(J){var re,le,q="0.5.0",u="hasOwnProperty",F=/[\.\/]/,v=/\s*,\s*/,o=function(f,w){return f-w},l={n:{}},d=function(){for(var f=0,w=this.length;w>f;f++)if(void 0!==this[f])return this[f]},m=function(){for(var f=this.length;--f;)if(void 0!==this[f])return this[f]},c=Object.prototype.toString,k=String,y=Array.isArray||function(f){return f instanceof Array||"[object Array]"==c.call(f)};eve=function(f,w){var T,I=le,W=Array.prototype.slice.call(arguments,2),B=eve.listeners(f),L=0,E=[],D={},G=[],K=re;G.firstDefined=d,G.lastDefined=m,re=f,le=0;for(var H=0,ie=B.length;ie>H;H++)"zIndex"in B[H]&&(E.push(B[H].zIndex),B[H].zIndex<0&&(D[B[H].zIndex]=B[H]));for(E.sort(o);E[L]<0;)if(T=D[E[L++]],G.push(T.apply(w,W)),le)return le=I,G;for(H=0;ie>H;H++)if("zIndex"in(T=B[H]))if(T.zIndex==E[L]){if(G.push(T.apply(w,W)),le)break;do{if((T=D[E[++L]])&&G.push(T.apply(w,W)),le)break}while(T)}else D[T.zIndex]=T;else if(G.push(T.apply(w,W)),le)break;return le=I,re=K,G},eve._events=l,eve.listeners=function(f){var w,T,I,W,B,L,E,D,G=y(f)?f:f.split(F),K=l,H=[K],ie=[];for(W=0,B=G.length;B>W;W++){for(D=[],L=0,E=H.length;E>L;L++)for(T=[(K=H[L].n)[G[W]],K["*"]],I=2;I--;)(w=T[I])&&(D.push(w),ie=ie.concat(w.f||[]));H=D}return ie},eve.separator=function(f){f?(f="["+(f=k(f).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",F=new RegExp(f)):F=/[\.\/]/},eve.on=function(f,w){if("function"!=typeof w)return function(){};for(var T=y(f)?y(f[0])?f:[f]:k(f).split(v),I=0,W=T.length;W>I;I++)!function(B){for(var L,E=y(B)?B:k(B).split(F),D=l,G=0,K=E.length;K>G;G++)D=(D=D.n).hasOwnProperty(E[G])&&D[E[G]]||(D[E[G]]={n:{}});for(D.f=D.f||[],G=0,K=D.f.length;K>G;G++)if(D.f[G]==w){L=!0;break}!L&&D.f.push(w)}(T[I]);return function(B){+B==+B&&(w.zIndex=+B)}},eve.f=function(f){var w=[].slice.call(arguments,1);return function(){eve.apply(null,[f,null].concat(w).concat([].slice.call(arguments,0)))}},eve.stop=function(){le=1},eve.nt=function(f){var w=y(re)?re.join("."):re;return f?new RegExp("(?:\\.|\\/|^)"+f+"(?:\\.|\\/|$)").test(w):w},eve.nts=function(){return y(re)?re:re.split(F)},eve.off=eve.unbind=function(f,w){if(f){var T=y(f)?y(f[0])?f:[f]:k(f).split(v);if(T.length>1)for(var I=0,W=T.length;W>I;I++)eve.off(T[I],w);else{T=y(f)?f:k(f).split(F);var B,L,E,D,G,K=[l],H=[];for(I=0,W=T.length;W>I;I++)for(D=0;D<K.length;D+=E.length-2){if(E=[D,1],B=K[D].n,"*"!=T[I])B[T[I]]&&(E.push(B[T[I]]),H.unshift({n:B,name:T[I]}));else for(L in B)B[u](L)&&(E.push(B[L]),H.unshift({n:B,name:L}));K.splice.apply(K,E)}for(I=0,W=K.length;W>I;I++)for(B=K[I];B.n;){if(w){if(B.f){for(D=0,G=B.f.length;G>D;D++)if(B.f[D]==w){B.f.splice(D,1);break}!B.f.length&&delete B.f}for(L in B.n)if(B.n[u](L)&&B.n[L].f){var ie=B.n[L].f;for(D=0,G=ie.length;G>D;D++)if(ie[D]==w){ie.splice(D,1);break}!ie.length&&delete B.n[L].f}}else for(L in delete B.f,B.n)B.n[u](L)&&B.n[L].f&&delete B.n[L].f;B=B.n}e:for(I=0,W=H.length;W>I;I++){for(L in(B=H[I]).n[B.name].f)continue e;for(L in B.n[B.name].n)continue e;delete B.n[B.name]}}}else eve._events=l={n:{}}},eve.once=function(f,w){var T=function(){return eve.off(f,T),w.apply(this,arguments)};return eve.on(f,T)},eve.version=q,eve.toString=function(){return"You are running Eve "+q},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):J.eve=eve})(this),function(J,re){if("function"==typeof define&&define.amd)define(["eve"],function(q){return re(J,q)});else if("undefined"!=typeof exports){var le=require("eve");module.exports=re(J,le)}else re(J,J.eve)}(window||this,function(J,re){var u,F,v,e,o,l,d,c,k,y,f,w,T,I,W,B,L,le=(u=void 0===re?function(){}:re,v={},e=J.requestAnimationFrame||J.webkitRequestAnimationFrame||J.mozRequestAnimationFrame||J.oRequestAnimationFrame||J.msRequestAnimationFrame||function(E){return setTimeout(E,16,(new Date).getTime()),!0},o=Array.isArray||function(E){return E instanceof Array||"[object Array]"==Object.prototype.toString.call(E)},l=0,d="M"+(+new Date).toString(36),c=Date.now||function(){return+new Date},k=function(E){var D=this;if(null==E)return D.s;var G=D.s-E;D.b+=D.dur*G,D.B+=D.dur*G,D.s=E},y=function(E){return null==E?this.spd:void(this.spd=E)},f=function(E){var D=this;return null==E?D.dur:(D.s=D.s*E/D.dur,void(D.dur=E))},w=function(){var E=this;delete v[E.id],E.update(),u("mina.stop."+E.id,E)},T=function(){var E=this;E.pdif||(delete v[E.id],E.update(),E.pdif=E.get()-E.b)},I=function(){var E=this;E.pdif&&(E.b=E.get()-E.pdif,delete E.pdif,v[E.id]=E,B())},W=function(){var E,D=this;if(o(D.start)){E=[];for(var G=0,K=D.start.length;K>G;G++)E[G]=+D.start[G]+(D.end[G]-D.start[G])*D.easing(D.s)}else E=+D.start+(D.end-D.start)*D.easing(D.s);D.set(E)},B=function(E){if(E){var D=0;for(var G in v)if(v.hasOwnProperty(G)){var K=v[G],H=K.get();D++,K.s=(H-K.b)/(K.dur/K.spd),K.s>=1&&(delete v[G],K.s=1,D--,function(ie){setTimeout(function(){u("mina.finish."+ie.id,ie)})}(K)),K.update()}F=!!D&&e(B)}else F||(F=e(B))},(L=function(E,D,G,K,H,ie,ue){var ce={id:d+(l++).toString(36),start:E,end:D,b:G,s:0,dur:K-G,spd:1,get:H,set:ie,easing:ue||L.linear,status:k,speed:y,duration:f,stop:w,pause:T,resume:I,update:W};v[ce.id]=ce;var xe,oe=0;for(xe in v)if(v.hasOwnProperty(xe)&&2==++oe)break;return 1==oe&&B(),ce}).time=c,L.getById=function(E){return v[E]||null},L.linear=function(E){return E},L.easeout=function(E){return Math.pow(E,1.7)},L.easein=function(E){return Math.pow(E,.48)},L.easeinout=function(E){if(1==E)return 1;if(0==E)return 0;var D=.48-E/1.04,G=Math.sqrt(.1734+D*D),K=G-D,ie=-G-D,ce=Math.pow(Math.abs(K),1/3)*(0>K?-1:1)+Math.pow(Math.abs(ie),1/3)*(0>ie?-1:1)+.5;return 3*(1-ce)*ce*ce+ce*ce*ce},L.backin=function(E){if(1==E)return 1;var D=1.70158;return E*E*((D+1)*E-D)},L.backout=function(E){if(0==E)return 0;var D=1.70158;return(E-=1)*E*((D+1)*E+D)+1},L.elastic=function(E){return E==!!E?E:Math.pow(2,-10*E)*Math.sin((E-.075)*(2*Math.PI)/.3)+1},L.bounce=function(E){var G=7.5625,K=2.75;return 1/K>E?G*E*E:2/K>E?G*(E-=1.5/K)*E+.75:2.5/K>E?G*(E-=2.25/K)*E+.9375:G*(E-=2.625/K)*E+.984375},J.mina=L,L),q=function(u){function F(V,ne){if(V){if(V.nodeType)return G(V);if(e(V,"array")&&F.set)return F.set.apply(F,V);if(V instanceof B)return V;if(null==ne)return G(V=H.doc.querySelector(String(V)))}return new D(V=null==V?"100%":V,ne=null==ne?"100%":ne)}function v(V,ne){if(ne){if("#text"==V&&(V=H.doc.createTextNode(ne.text||ne["#text"]||"")),"#comment"==V&&(V=H.doc.createComment(ne.text||ne["#text"]||"")),"string"==typeof V&&(V=v(V)),"string"==typeof ne)return 1==V.nodeType?"xlink:"==ne.substring(0,6)?V.getAttributeNS(Ae,ne.substring(6)):"xml:"==ne.substring(0,4)?V.getAttributeNS(ye,ne.substring(4)):V.getAttribute(ne):"text"==ne?V.nodeValue:null;if(1==V.nodeType){for(var he in ne)if(ne[ie](he)){var me=ue(ne[he]);me?"xlink:"==he.substring(0,6)?V.setAttributeNS(Ae,he.substring(6),me):"xml:"==he.substring(0,4)?V.setAttributeNS(ye,he.substring(4),me):V.setAttribute(he,me):V.removeAttribute(he)}}else"text"in ne&&(V.nodeValue=ne.text)}else V=H.doc.createElementNS(ye,V);return V}function e(V,ne){return"finite"==(ne=ue.prototype.toLowerCase.call(ne))?isFinite(V):!("array"!=ne||!(V instanceof Array||Array.isArray&&Array.isArray(V)))||("null"==ne&&null===V||ne==typeof V&&null!==V||"object"==ne&&V===Object(V)||Ne.call(V).slice(8,-1).toLowerCase()==ne)}function l(V,ne){for(var he=0,me=V.length;me>he;he++)if(V[he]===ne)return V.push(V.splice(he,1)[0])}function d(V,ne,he){return function me(){var Le=Array.prototype.slice.call(arguments,0),_e=Le.join("\u2400"),ke=me.cache=me.cache||{},Ie=me.count=me.count||[];return ke[ie](_e)?(l(Ie,_e),he?he(ke[_e]):ke[_e]):(Ie.length>=1e3&&delete ke[Ie.shift()],Ie.push(_e),ke[_e]=V.apply(ne,Le),he?he(ke[_e]):ke[_e])}}function c(V){return V%360*ve/180}function T(V){return V.node.ownerSVGElement&&G(V.node.ownerSVGElement)||F.select("svg")}function W(V){e(V,"array")||(V=Array.prototype.slice.call(arguments,0));for(var ne=0,he=0,me=this.node;this[ne];)delete this[ne++];for(ne=0;ne<V.length;ne++)"set"==V[ne].type?V[ne].forEach(function(_e){me.appendChild(_e.node)}):me.appendChild(V[ne].node);var Le=me.childNodes;for(ne=0;ne<Le.length;ne++)this[he++]=G(Le[ne]);return this}function B(V){if(V.snap in De)return De[V.snap];var ne;try{ne=V.ownerSVGElement}catch(Le){}this.node=V,ne&&(this.paper=new D(ne)),this.type=V.tagName||V.nodeName;var he=this.id=pe(this);if(this.anims={},this._={transform:[]},V.snap=he,De[he]=this,"g"==this.type&&(this.add=W),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var me in D.prototype)D.prototype[ie](me)&&(this[me]=D.prototype[me])}function L(V){this.node=V}function E(V,ne){var he=v(V);return ne.appendChild(he),G(he)}function D(V,ne){var he,me,Le,_e=D.prototype;if(V&&V.tagName&&"svg"==V.tagName.toLowerCase()){if(V.snap in De)return De[V.snap];var ke=V.ownerDocument;for(var Ie in he=new B(V),me=V.getElementsByTagName("desc")[0],Le=V.getElementsByTagName("defs")[0],me||((me=v("desc")).appendChild(ke.createTextNode("Created with Snap")),he.node.appendChild(me)),Le||(Le=v("defs"),he.node.appendChild(Le)),he.defs=Le,_e)_e[ie](Ie)&&(he[Ie]=_e[Ie]);he.paper=he.root=he}else v((he=E("svg",H.doc.body)).node,{height:ne,version:1.1,width:V,xmlns:ye});return he}function G(V){return V&&(V instanceof B||V instanceof L?V:V.tagName&&"svg"==V.tagName.toLowerCase()?new D(V):V.tagName&&"object"==V.tagName.toLowerCase()&&"image/svg+xml"==V.type?new D(V.contentDocument.getElementsByTagName("svg")[0]):new B(V))}function K(V,ne){for(var he=0,me=V.length;me>he;he++){var Le={type:V[he].type,attr:V[he].attr()},_e=V[he].children();ne.push(Le),_e.length&&K(_e,Le.childNodes=[])}}F.version="0.5.1",F.toString=function(){return"Snap v"+this.version},F._={};var H={win:u.window,doc:u.window.document};F._.glob=H;var V,ne,ie="hasOwnProperty",ue=String,ce=parseFloat,xe=parseInt,oe=Math,fe=oe.max,ee=oe.min,de=oe.abs,ve=(oe.pow,oe.PI),Fe=(oe.round,""),Ne=Object.prototype.toString,Se=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,be=(F._.separator=/[,\s]+/,/[\s]*,[\s]*/),Pe={hs:1,rg:1},He=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Je=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,M=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,P=0,Y="S"+(+new Date).toString(36),pe=function(V){return(V&&V.type?V.type:Fe)+Y+(P++).toString(36)},Ae="http://www.w3.org/1999/xlink",ye="http://www.w3.org/2000/svg",De={};F.url=function(V){return"url('#"+V+"')"},F._.$=v,F._.id=pe,F.format=(V=/\{([^\}]+)\}/g,ne=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(me,Le){return ue(me).replace(V,function(_e,ke){return function(me,Le,_e){var ke=_e;return Le.replace(ne,function(Ie,We,Ze,rt,Ke){We=We||rt,ke&&(We in ke&&(ke=ke[We]),"function"==typeof ke&&Ke&&(ke=ke()))}),ke=(null==ke||ke==_e?me:ke)+""}(_e,ke,Le)})}),F._.clone=function o(V){if("function"==typeof V||Object(V)!==V)return V;var ne=new V.constructor;for(var he in V)V[ie](he)&&(ne[he]=o(V[he]));return ne},F._.cacher=d,F.rad=c,F.deg=function k(V){return 180*V/ve%360},F.sin=function(V){return oe.sin(F.rad(V))},F.tan=function(V){return oe.tan(F.rad(V))},F.cos=function(V){return oe.cos(F.rad(V))},F.asin=function(V){return F.deg(oe.asin(V))},F.acos=function(V){return F.deg(oe.acos(V))},F.atan=function(V){return F.deg(oe.atan(V))},F.atan2=function(V){return F.deg(oe.atan2(V))},F.angle=function m(V,ne,he,me,Le,_e){if(null==Le){var ke=V-he,Ie=ne-me;return ke||Ie?(180+180*oe.atan2(-Ie,-ke)/ve+360)%360:0}return m(V,ne,Le,_e)-m(he,me,Le,_e)},F.len=function(V,ne,he,me){return Math.sqrt(F.len2(V,ne,he,me))},F.len2=function(V,ne,he,me){return(V-he)*(V-he)+(ne-me)*(ne-me)},F.closestPoint=function(V,ne,he){function me(Tt){var Ct=Tt.x-ne,Et=Tt.y-he;return Ct*Ct+Et*Et}for(var Le,_e,ke,Ie,We=V.node,Ze=We.getTotalLength(),rt=Ze/We.pathSegList.numberOfItems*.125,Ke=1/0,et=0;Ze>=et;et+=rt)(Ie=me(ke=We.getPointAtLength(et)))<Ke&&(Le=ke,_e=et,Ke=Ie);for(rt*=.5;rt>.5;){var kt,vt,mt,bt,yt,at;(mt=_e-rt)>=0&&(yt=me(kt=We.getPointAtLength(mt)))<Ke?(Le=kt,_e=mt,Ke=yt):(bt=_e+rt)<=Ze&&(at=me(vt=We.getPointAtLength(bt)))<Ke?(Le=vt,_e=bt,Ke=at):rt*=.5}return{x:Le.x,y:Le.y,length:_e,distance:Math.sqrt(Ke)}},F.is=e,F.snapTo=function(V,ne,he){if(he=e(he,"finite")?he:10,e(V,"array")){for(var me=V.length;me--;)if(de(V[me]-ne)<=he)return V[me]}else{var Le=ne%(V=+V);if(he>Le)return ne-Le;if(Le>V-he)return ne-Le+V}return ne},F.getRGB=d(function(V){if(!V||(V=ue(V)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ct};if("none"==V)return{r:-1,g:-1,b:-1,hex:"none",toString:ct};if(!(Pe[ie](V.toLowerCase().substring(0,2))||"#"==V.charAt())&&(V=Be(V)),!V)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ct};var ne,he,me,Le,_e,ke,Ie=V.match(Se);return Ie?(Ie[2]&&(me=xe(Ie[2].substring(5),16),he=xe(Ie[2].substring(3,5),16),ne=xe(Ie[2].substring(1,3),16)),Ie[3]&&(me=xe((_e=Ie[3].charAt(3))+_e,16),he=xe((_e=Ie[3].charAt(2))+_e,16),ne=xe((_e=Ie[3].charAt(1))+_e,16)),Ie[4]&&(ke=Ie[4].split(be),ne=ce(ke[0]),"%"==ke[0].slice(-1)&&(ne*=2.55),he=ce(ke[1]),"%"==ke[1].slice(-1)&&(he*=2.55),me=ce(ke[2]),"%"==ke[2].slice(-1)&&(me*=2.55),"rgba"==Ie[1].toLowerCase().slice(0,4)&&(Le=ce(ke[3])),ke[3]&&"%"==ke[3].slice(-1)&&(Le/=100)),Ie[5]?(ke=Ie[5].split(be),ne=ce(ke[0]),"%"==ke[0].slice(-1)&&(ne/=100),he=ce(ke[1]),"%"==ke[1].slice(-1)&&(he/=100),me=ce(ke[2]),"%"==ke[2].slice(-1)&&(me/=100),("deg"==ke[0].slice(-3)||"\xb0"==ke[0].slice(-1))&&(ne/=360),"hsba"==Ie[1].toLowerCase().slice(0,4)&&(Le=ce(ke[3])),ke[3]&&"%"==ke[3].slice(-1)&&(Le/=100),F.hsb2rgb(ne,he,me,Le)):Ie[6]?(ke=Ie[6].split(be),ne=ce(ke[0]),"%"==ke[0].slice(-1)&&(ne/=100),he=ce(ke[1]),"%"==ke[1].slice(-1)&&(he/=100),me=ce(ke[2]),"%"==ke[2].slice(-1)&&(me/=100),("deg"==ke[0].slice(-3)||"\xb0"==ke[0].slice(-1))&&(ne/=360),"hsla"==Ie[1].toLowerCase().slice(0,4)&&(Le=ce(ke[3])),ke[3]&&"%"==ke[3].slice(-1)&&(Le/=100),F.hsl2rgb(ne,he,me,Le)):(ne=ee(oe.round(ne),255),he=ee(oe.round(he),255),me=ee(oe.round(me),255),Le=ee(fe(Le,0),1),(Ie={r:ne,g:he,b:me,toString:ct}).hex="#"+(16777216|me|he<<8|ne<<16).toString(16).slice(1),Ie.opacity=e(Le,"finite")?Le:1,Ie)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ct}},F),F.hsb=d(function(V,ne,he){return F.hsb2rgb(V,ne,he).hex}),F.hsl=d(function(V,ne,he){return F.hsl2rgb(V,ne,he).hex}),F.rgb=d(function(V,ne,he,me){if(e(me,"finite")){var Le=oe.round;return"rgba("+[Le(V),Le(ne),Le(he),+me.toFixed(2)]+")"}return"#"+(16777216|he|ne<<8|V<<16).toString(16).slice(1)});var Be=function(V){var ne=H.doc.getElementsByTagName("head")[0]||H.doc.getElementsByTagName("svg")[0],he="rgb(255, 0, 0)";return(Be=d(function(me){if("red"==me.toLowerCase())return he;ne.style.color=he,ne.style.color=me;var Le=H.doc.defaultView.getComputedStyle(ne,Fe).getPropertyValue("color");return Le==he?null:Le}))(V)},Xe=function(){return"hsb("+[this.h,this.s,this.b]+")"},ot=function(){return"hsl("+[this.h,this.s,this.l]+")"},ct=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},It=function(V,ne,he){if(null==ne&&e(V,"object")&&"r"in V&&"g"in V&&"b"in V&&(he=V.b,ne=V.g,V=V.r),null==ne&&e(V,string)){var me=F.getRGB(V);V=me.r,ne=me.g,he=me.b}return(V>1||ne>1||he>1)&&(V/=255,ne/=255,he/=255),[V,ne,he]},jt=function(V,ne,he,me){var Le={r:V=oe.round(255*V),g:ne=oe.round(255*ne),b:he=oe.round(255*he),opacity:e(me,"finite")?me:1,hex:F.rgb(V,ne,he),toString:ct};return e(me,"finite")&&(Le.opacity=me),Le};F.color=function(V){var ne;return e(V,"object")&&"h"in V&&"s"in V&&"b"in V?(ne=F.hsb2rgb(V),V.r=ne.r,V.g=ne.g,V.b=ne.b,V.opacity=1,V.hex=ne.hex):e(V,"object")&&"h"in V&&"s"in V&&"l"in V?(ne=F.hsl2rgb(V),V.r=ne.r,V.g=ne.g,V.b=ne.b,V.opacity=1,V.hex=ne.hex):(e(V,"string")&&(V=F.getRGB(V)),e(V,"object")&&"r"in V&&"g"in V&&"b"in V&&!("error"in V)?(ne=F.rgb2hsl(V),V.h=ne.h,V.s=ne.s,V.l=ne.l,ne=F.rgb2hsb(V),V.v=ne.b):((V={hex:"none"}).r=V.g=V.b=V.h=V.s=V.v=V.l=-1,V.error=1)),V.toString=ct,V},F.hsb2rgb=function(V,ne,he,me){var Le,_e,ke,Ie,We;return e(V,"object")&&"h"in V&&"s"in V&&"b"in V&&(he=V.b,ne=V.s,me=V.o,V=V.h),Le=_e=ke=he-(We=he*ne),Le+=[We,Ie=We*(1-de((V=(V*=360)%360/60)%2-1)),0,0,Ie,We][V=~~V],_e+=[Ie,We,We,Ie,0,0][V],ke+=[0,0,Ie,We,We,Ie][V],jt(Le,_e,ke,me)},F.hsl2rgb=function(V,ne,he,me){var Le,_e,ke,Ie,We;return e(V,"object")&&"h"in V&&"s"in V&&"l"in V&&(he=V.l,ne=V.s,V=V.h),(V>1||ne>1||he>1)&&(V/=360,ne/=100,he/=100),Le=_e=ke=he-(We=2*ne*(.5>he?he:1-he))/2,Le+=[We,Ie=We*(1-de((V=(V*=360)%360/60)%2-1)),0,0,Ie,We][V=~~V],_e+=[Ie,We,We,Ie,0,0][V],ke+=[0,0,Ie,We,We,Ie][V],jt(Le,_e,ke,me)},F.rgb2hsb=function(V,ne,he){var _e,ke;return V=(he=It(V,ne,he))[0],ne=he[1],he=he[2],{h:((0==(ke=(_e=fe(V,ne,he))-ee(V,ne,he))?null:_e==V?(ne-he)/ke:_e==ne?(he-V)/ke+2:(V-ne)/ke+4)+360)%6*60/360,s:0==ke?0:ke/_e,b:_e,toString:Xe}},F.rgb2hsl=function(V,ne,he){var _e,ke,Ie,We;return V=(he=It(V,ne,he))[0],ne=he[1],he=he[2],_e=((ke=fe(V,ne,he))+(Ie=ee(V,ne,he)))/2,{h:((0==(We=ke-Ie)?null:ke==V?(ne-he)/We:ke==ne?(he-V)/We+2:(V-ne)/We+4)+360)%6*60/360,s:0==We?0:.5>_e?We/(2*_e):We/(2-2*_e),l:_e,toString:ot}},F.parsePathString=function(V){if(!V)return null;var ne=F.path(V);if(ne.arr)return F.path.clone(ne.arr);var he={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},me=[];return e(V,"array")&&e(V[0],"array")&&(me=F.path.clone(V)),me.length||ue(V).replace(He,function(Le,_e,ke){var Ie=[],We=_e.toLowerCase();if(ke.replace(M,function(Ze,rt){rt&&Ie.push(+rt)}),"m"==We&&Ie.length>2&&(me.push([_e].concat(Ie.splice(0,2))),We="l",_e="m"==_e?"l":"L"),"o"==We&&1==Ie.length&&me.push([_e,Ie[0]]),"r"==We)me.push([_e].concat(Ie));else for(;Ie.length>=he[We]&&(me.push([_e].concat(Ie.splice(0,he[We]))),he[We]););}),me.toString=F.path.toString,ne.arr=F.path.clone(me),me};var Ee=F.parseTransformString=function(V){if(!V)return null;var ne=[];return e(V,"array")&&e(V[0],"array")&&(ne=F.path.clone(V)),ne.length||ue(V).replace(Je,function(he,me,Le){var _e=[];me.toLowerCase(),Le.replace(M,function(ke,Ie){Ie&&_e.push(+Ie)}),ne.push([me].concat(_e))}),ne.toString=F.path.toString,ne};F._.svgTransform2string=function y(V){var ne=[];return V=V.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(he,me,Le){return Le=Le.split(/\s*,\s*|\s+/),"rotate"==me&&1==Le.length&&Le.push(0,0),"scale"==me&&(Le.length>2?Le=Le.slice(0,2):2==Le.length&&Le.push(0,0),1==Le.length&&Le.push(Le[0],0,0)),"skewX"==me?ne.push(["m",1,0,oe.tan(c(Le[0])),1,0,0]):"skewY"==me?ne.push(["m",1,oe.tan(c(Le[0])),0,1,0,0]):ne.push([me.charAt(0)].concat(Le)),he}),ne},F._.rgTransform=/^[a-z][\s]*-?\.?\d/i,F._.transform2matrix=function f(V,ne){var he=Ee(V),me=new F.Matrix;if(he)for(var Le=0,_e=he.length;_e>Le;Le++){var ke,Ie,We,Ze,rt,Ke=he[Le],et=Ke.length,kt=ue(Ke[0]).toLowerCase(),vt=Ke[0]!=kt,mt=vt?me.invert():0;"t"==kt&&2==et?me.translate(Ke[1],0):"t"==kt&&3==et?vt?(ke=mt.x(0,0),Ie=mt.y(0,0),We=mt.x(Ke[1],Ke[2]),Ze=mt.y(Ke[1],Ke[2]),me.translate(We-ke,Ze-Ie)):me.translate(Ke[1],Ke[2]):"r"==kt?2==et?(rt=rt||ne,me.rotate(Ke[1],rt.x+rt.width/2,rt.y+rt.height/2)):4==et&&(vt?(We=mt.x(Ke[2],Ke[3]),Ze=mt.y(Ke[2],Ke[3]),me.rotate(Ke[1],We,Ze)):me.rotate(Ke[1],Ke[2],Ke[3])):"s"==kt?2==et||3==et?(rt=rt||ne,me.scale(Ke[1],Ke[et-1],rt.x+rt.width/2,rt.y+rt.height/2)):4==et?vt?(We=mt.x(Ke[2],Ke[3]),Ze=mt.y(Ke[2],Ke[3]),me.scale(Ke[1],Ke[1],We,Ze)):me.scale(Ke[1],Ke[1],Ke[2],Ke[3]):5==et&&(vt?(We=mt.x(Ke[3],Ke[4]),Ze=mt.y(Ke[3],Ke[4]),me.scale(Ke[1],Ke[2],We,Ze)):me.scale(Ke[1],Ke[2],Ke[3],Ke[4])):"m"==kt&&7==et&&me.add(Ke[1],Ke[2],Ke[3],Ke[4],Ke[5],Ke[6])}return me},F._unit2px=function I(V,ne,he){function me(Ze){if(null==Ze)return Fe;if(Ze==+Ze)return Ze;v(We,{width:Ze});try{return We.getBBox().width}catch(rt){return 0}}function Le(Ze){if(null==Ze)return Fe;if(Ze==+Ze)return Ze;v(We,{height:Ze});try{return We.getBBox().height}catch(rt){return 0}}function _e(Ze,rt){null==ne?Ie[Ze]=rt(V.attr(Ze)||0):Ze==ne&&(Ie=rt(null==he?V.attr(Ze)||0:he))}var ke=T(V).node,Ie={},We=ke.querySelector(".svg---mgr");switch(We||(We=v("rect"),v(We,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),ke.appendChild(We)),V.type){case"rect":_e("rx",me),_e("ry",Le);case"image":_e("width",me),_e("height",Le);case"text":_e("x",me),_e("y",Le);break;case"circle":_e("cx",me),_e("cy",Le),_e("r",me);break;case"ellipse":_e("cx",me),_e("cy",Le),_e("rx",me),_e("ry",Le);break;case"line":_e("x1",me),_e("x2",me),_e("y1",Le),_e("y2",Le);break;case"marker":_e("refX",me),_e("markerWidth",me),_e("refY",Le),_e("markerHeight",Le);break;case"radialGradient":_e("fx",me),_e("fy",Le);break;case"tspan":_e("dx",me),_e("dy",Le);break;default:_e(ne,me)}return ke.removeChild(We),Ie},H.doc.contains||H.doc.compareDocumentPosition,F._.getSomeDefs=function w(V){var ne=V.node.ownerSVGElement&&G(V.node.ownerSVGElement)||V.node.parentNode&&G(V.node.parentNode)||F.select("svg")||F(0,0),he=ne.select("defs"),me=null!=he&&he.node;return me||(me=E("defs",ne.node).node),me},F._.getSomeSVG=T,F.select=function(V){return V=ue(V).replace(/([^\\]):/g,"$1\\:"),G(H.doc.querySelector(V))},F.selectAll=function(V){for(var ne=H.doc.querySelectorAll(V),he=(F.set||Array)(),me=0;me<ne.length;me++)he.push(G(ne[me]));return he},setInterval(function(){for(var V in De)if(De[ie](V)){var ne=De[V],he=ne.node;("svg"!=ne.type&&!he.ownerSVGElement||"svg"==ne.type&&(!he.parentNode||"ownerSVGElement"in he.parentNode&&!he.ownerSVGElement))&&delete De[V]}},1e4),B.prototype.attr=function(V,ne){var he=this,me=he.node;if(!V){if(1!=me.nodeType)return{text:me.nodeValue};for(var Le=me.attributes,_e={},ke=0,Ie=Le.length;Ie>ke;ke++)_e[Le[ke].nodeName]=Le[ke].nodeValue;return _e}if(e(V,"string")){if(!(arguments.length>1))return re("snap.util.getattr."+V,he).firstDefined();var We={};We[V]=ne,V=We}for(var Ze in V)V[ie](Ze)&&re("snap.util.attr."+Ze,he,V[Ze]);return he},F.parse=function(V){var ne=H.doc.createDocumentFragment(),he=!0,me=H.doc.createElement("div");if((V=ue(V)).match(/^\s*<\s*svg(?:\s|>)/)||(V="<svg>"+V+"</svg>",he=!1),me.innerHTML=V,V=me.getElementsByTagName("svg")[0])if(he)ne=V;else for(;V.firstChild;)ne.appendChild(V.firstChild);return new L(ne)},F.fragment=function(){for(var V=Array.prototype.slice.call(arguments,0),ne=H.doc.createDocumentFragment(),he=0,me=V.length;me>he;he++){var Le=V[he];Le.node&&Le.node.nodeType&&ne.appendChild(Le.node),Le.nodeType&&ne.appendChild(Le),"string"==typeof Le&&ne.appendChild(F.parse(Le).node)}return new L(ne)},F._.make=E,F._.wrap=G,D.prototype.el=function(V,ne){var he=E(V,this.node);return ne&&he.attr(ne),he},B.prototype.children=function(){for(var V=[],ne=this.node.childNodes,he=0,me=ne.length;me>he;he++)V[he]=F(ne[he]);return V},B.prototype.toJSON=function(){var V=[];return K([this],V),V[0]},re.on("snap.util.getattr",function(){var V=re.nt(),ne=(V=V.substring(V.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(he){return"-"+he.toLowerCase()});return Re[ie](ne)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(ne):v(this.node,V)});var Re={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};re.on("snap.util.attr",function(V){var ne=re.nt(),he={};he[ne=ne.substring(ne.lastIndexOf(".")+1)]=V;var me=ne.replace(/-(\w)/gi,function(_e,ke){return ke.toUpperCase()}),Le=ne.replace(/[A-Z]/g,function(_e){return"-"+_e.toLowerCase()});Re[ie](Le)?this.node.style[me]=null==V?Fe:V:v(this.node,he)}),D.prototype,F.ajax=function(V,ne,he,me){var Le=new XMLHttpRequest,_e=pe();if(Le){if(e(ne,"function"))me=he,he=ne,ne=null;else if(e(ne,"object")){var ke=[];for(var Ie in ne)ne.hasOwnProperty(Ie)&&ke.push(encodeURIComponent(Ie)+"="+encodeURIComponent(ne[Ie]));ne=ke.join("&")}return Le.open(ne?"POST":"GET",V,!0),ne&&(Le.setRequestHeader("X-Requested-With","XMLHttpRequest"),Le.setRequestHeader("Content-type","application/x-www-form-urlencoded")),he&&(re.once("snap.ajax."+_e+".0",he),re.once("snap.ajax."+_e+".200",he),re.once("snap.ajax."+_e+".304",he)),Le.onreadystatechange=function(){4==Le.readyState&&re("snap.ajax."+_e+"."+Le.status,me,Le)},4==Le.readyState||Le.send(ne),Le}},F.load=function(V,ne,he){F.ajax(V,function(me){var Le=F.parse(me.responseText);he?ne.call(he,Le):ne(Le)})};return F.getElementByPoint=function(V,ne){var me=(this.canvas,H.doc.elementFromPoint(V,ne));if(H.win.opera&&"svg"==me.tagName){var Le=function(V){var ne=V.getBoundingClientRect(),he=V.ownerDocument,me=he.body,Le=he.documentElement,_e=Le.clientTop||me.clientTop||0,ke=Le.clientLeft||me.clientLeft||0;return{y:ne.top+(g.win.pageYOffset||Le.scrollTop||me.scrollTop)-_e,x:ne.left+(g.win.pageXOffset||Le.scrollLeft||me.scrollLeft)-ke}}(me),_e=me.createSVGRect();_e.x=V-Le.x,_e.y=ne-Le.y,_e.width=_e.height=1;var ke=me.getIntersectionList(_e,null);ke.length&&(me=ke[ke.length-1])}return me?G(me):null},F.plugin=function(V){V(F,B,D,H,L)},H.win.Snap=F,F}(J||this);return q.plugin(function(u,F,v,e,o){function l(D,G){if(null==G){var K=!0;if(!(G="linearGradient"==D.type||"radialGradient"==D.type?D.node.getAttribute("gradientTransform"):"pattern"==D.type?D.node.getAttribute("patternTransform"):D.node.getAttribute("transform")))return new u.Matrix;G=u._.svgTransform2string(G)}else G=u._.rgTransform.test(G)?y(G).replace(/\.{3}|\u2026/g,D._.transform||""):u._.svgTransform2string(G),k(G,"array")&&(G=u.path?u.path.toString.call(G):y(G)),D._.transform=G;var H=u._.transform2matrix(G,D.getBBox(1));return K?H:void(D.matrix=H)}function m(D){return function(){var G=D?"<"+this.type:"",K=this.node.attributes,H=this.node.childNodes;if(D)for(var ie=0,ue=K.length;ue>ie;ie++)G+=" "+K[ie].name+'="'+K[ie].value.replace(/"/g,'\\"')+'"';if(H.length){for(D&&(G+=">"),ie=0,ue=H.length;ue>ie;ie++)3==H[ie].nodeType?G+=H[ie].nodeValue:1==H[ie].nodeType&&(G+=B(H[ie]).toString());D&&(G+="</"+this.type+">")}else D&&(G+="/>");return G}}var c=F.prototype,k=u.is,y=String,f=u._unit2px,w=u._.$,T=u._.make,I=u._.getSomeDefs,W="hasOwnProperty",B=u._.wrap;c.getBBox=function(D){if("tspan"==this.type)return u._.box(this.node.getClientRects().item(0));if(!u.Matrix||!u.path)return this.node.getBBox();var G=this,K=new u.Matrix;if(G.removed)return u._.box();for(;"use"==G.type;)if(D||(K=K.add(G.transform().localMatrix.translate(G.attr("x")||0,G.attr("y")||0))),G.original)G=G.original;else{var H=G.attr("xlink:href");G=G.original=G.node.ownerDocument.getElementById(H.substring(H.indexOf("#")+1))}var ie=G._,ue=u.path.get[G.type]||u.path.get.deflt;try{return D?(ie.bboxwt=ue?u.path.getBBox(G.realPath=ue(G)):u._.box(G.node.getBBox()),u._.box(ie.bboxwt)):(G.realPath=ue(G),G.matrix=G.transform().localMatrix,ie.bbox=u.path.getBBox(u.path.map(G.realPath,K.add(G.matrix))),u._.box(ie.bbox))}catch(ce){return u._.box()}};var L=function(){return this.string};c.transform=function(D){var G=this._;if(null==D){for(var K,H=this,ie=new u.Matrix(this.node.getCTM()),ue=l(this),ce=[ue],xe=new u.Matrix,oe=ue.toTransformString(),fe=y(ue)==y(this.matrix)?y(G.transform):oe;"svg"!=H.type&&(H=H.parent());)ce.push(l(H));for(K=ce.length;K--;)xe.add(ce[K]);return{string:fe,globalMatrix:ie,totalMatrix:xe,localMatrix:ue,diffMatrix:ie.clone().add(ue.invert()),global:ie.toTransformString(),total:xe.toTransformString(),local:oe,toString:L}}return D instanceof u.Matrix?(this.matrix=D,this._.transform=D.toTransformString()):l(this,D),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?w(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?w(this.node,{patternTransform:this.matrix}):w(this.node,{transform:this.matrix})),this},c.parent=function(){return B(this.node.parentNode)},c.append=c.add=function(D){if(D){if("set"==D.type){var G=this;return D.forEach(function(K){G.add(K)}),this}D=B(D),this.node.appendChild(D.node),D.paper=this.paper}return this},c.appendTo=function(D){return D&&(D=B(D)).append(this),this},c.prepend=function(D){if(D){if("set"==D.type){var G,K=this;return D.forEach(function(ie){G?G.after(ie):K.prepend(ie),G=ie}),this}var H=(D=B(D)).parent();this.node.insertBefore(D.node,this.node.firstChild),this.add&&this.add(),D.paper=this.paper,this.parent()&&this.parent().add(),H&&H.add()}return this},c.prependTo=function(D){return(D=B(D)).prepend(this),this},c.before=function(D){if("set"==D.type){var G=this;return D.forEach(function(H){var ie=H.parent();G.node.parentNode.insertBefore(H.node,G.node),ie&&ie.add()}),this.parent().add(),this}var K=(D=B(D)).parent();return this.node.parentNode.insertBefore(D.node,this.node),this.parent()&&this.parent().add(),K&&K.add(),D.paper=this.paper,this},c.after=function(D){var G=(D=B(D)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(D.node,this.node.nextSibling):this.node.parentNode.appendChild(D.node),this.parent()&&this.parent().add(),G&&G.add(),D.paper=this.paper,this},c.insertBefore=function(D){D=B(D);var G=this.parent();return D.node.parentNode.insertBefore(this.node,D.node),this.paper=D.paper,G&&G.add(),D.parent()&&D.parent().add(),this},c.insertAfter=function(D){D=B(D);var G=this.parent();return D.node.parentNode.insertBefore(this.node,D.node.nextSibling),this.paper=D.paper,G&&G.add(),D.parent()&&D.parent().add(),this},c.remove=function(){var D=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,D&&D.add(),this},c.select=function(D){return B(this.node.querySelector(D))},c.selectAll=function(D){for(var G=this.node.querySelectorAll(D),K=(u.set||Array)(),H=0;H<G.length;H++)K.push(B(G[H]));return K},c.asPX=function(D,G){return null==G&&(G=this.attr(D)),+f(this,D,G)},c.use=function(){var D,G=this.node.id;return G||(G=this.id,w(this.node,{id:G})),D="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?T(this.type,this.node.parentNode):T("use",this.node.parentNode),w(D.node,{"xlink:href":"#"+G}),D.original=this,D},c.clone=function(){var D=B(this.node.cloneNode(!0));return w(D.node,"id")&&w(D.node,{id:D.id}),function d(D){function G(Ne,Se){var be=w(Ne.node,Se);(be=(be=be&&be.match(ue))&&be[2])&&"#"==be.charAt()&&(be=be.substring(1))&&(xe[be]=(xe[be]||[]).concat(function(Pe){var He={};He[Se]=u.url(Pe),w(Ne.node,He)}))}function K(Ne){var Se=w(Ne.node,"xlink:href");Se&&"#"==Se.charAt()&&(Se=Se.substring(1))&&(xe[Se]=(xe[Se]||[]).concat(function(be){Ne.attr("xlink:href","#"+be)}))}for(var H,ie=D.selectAll("*"),ue=/^\s*url\(("|'|)(.*)\1\)\s*$/,ce=[],xe={},oe=0,fe=ie.length;fe>oe;oe++){G(H=ie[oe],"fill"),G(H,"stroke"),G(H,"filter"),G(H,"mask"),G(H,"clip-path"),K(H);var ee=w(H.node,"id");ee&&(w(H.node,{id:H.id}),ce.push({old:ee,id:H.id}))}for(oe=0,fe=ce.length;fe>oe;oe++){var de=xe[ce[oe].old];if(de)for(var ve=0,Fe=de.length;Fe>ve;ve++)de[ve](ce[oe].id)}}(D),D.insertAfter(this),D},c.toDefs=function(){return I(this).appendChild(this.node),this},c.pattern=c.toPattern=function(D,G,K,H){var ie=T("pattern",I(this));return null==D&&(D=this.getBBox()),k(D,"object")&&"x"in D&&(G=D.y,K=D.width,H=D.height,D=D.x),w(ie.node,{x:D,y:G,width:K,height:H,patternUnits:"userSpaceOnUse",id:ie.id,viewBox:[D,G,K,H].join(" ")}),ie.node.appendChild(this.node),ie},c.marker=function(D,G,K,H,ie,ue){var ce=T("marker",I(this));return null==D&&(D=this.getBBox()),k(D,"object")&&"x"in D&&(G=D.y,K=D.width,H=D.height,ie=D.refX||D.cx,ue=D.refY||D.cy,D=D.x),w(ce.node,{viewBox:[D,G,K,H].join(" "),markerWidth:K,markerHeight:H,orient:"auto",refX:ie||0,refY:ue||0,id:ce.id}),ce.node.appendChild(this.node),ce};var E={};c.data=function(D,G){var K=E[this.id]=E[this.id]||{};if(0==arguments.length)return re("snap.data.get."+this.id,this,K,null),K;if(1==arguments.length){if(u.is(D,"object")){for(var H in D)D[W](H)&&this.data(H,D[H]);return this}return re("snap.data.get."+this.id,this,K[D],D),K[D]}return K[D]=G,re("snap.data.set."+this.id,this,G,D),this},c.removeData=function(D){return null==D?E[this.id]={}:E[this.id]&&delete E[this.id][D],this},c.outerSVG=c.toString=m(1),c.innerSVG=m(),c.toDataURL=function(){if(J&&J.btoa){var D=this.getBBox(),G=u.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+D.x.toFixed(3),y:+D.y.toFixed(3),width:+D.width.toFixed(3),height:+D.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(G)))}},o.prototype.select=c.select,o.prototype.selectAll=c.selectAll}),q.plugin(function(u,F,v,e,o){function l(f,w,T){return function(I){var W=I.slice(f,w);return 1==W.length&&(W=W[0]),T?T(W):W}}var d=F.prototype,m=u.is,c=String,k="hasOwnProperty",y=function(f,w,T,I){"function"!=typeof T||T.length||(I=T,T=le.linear),this.attr=f,this.dur=w,T&&(this.easing=T),I&&(this.callback=I)};u._.Animation=y,u.animation=function(f,w,T,I){return new y(f,w,T,I)},d.inAnim=function(){var f=this,w=[];for(var T in f.anims)f.anims[k](T)&&function(I){w.push({anim:new y(I._attrs,I.dur,I.easing,I._callback),mina:I,curStatus:I.status(),status:function(W){return I.status(W)},stop:function(){I.stop()}})}(f.anims[T]);return w},u.animate=function(f,w,T,I,W,B){"function"!=typeof W||W.length||(B=W,W=le.linear);var L=le.time(),E=le(f,w,L,L+I,le.time,T,W);return B&&re.once("mina.finish."+E.id,B),E},d.stop=function(){for(var f=this.inAnim(),w=0,T=f.length;T>w;w++)f[w].stop();return this},d.animate=function(f,w,T,I){"function"!=typeof T||T.length||(I=T,T=le.linear),f instanceof y&&(I=f.callback,T=f.easing,w=f.dur,f=f.attr);var W,B,L,E,D=[],G=[],K={},H=this;for(var ie in f)if(f[k](ie)){H.equal?(W=(E=H.equal(ie,c(f[ie]))).from,B=E.to,L=E.f):(W=+H.attr(ie),B=+f[ie]);var ue=m(W,"array")?W.length:1;K[ie]=l(D.length,D.length+ue,L),D=D.concat(W),G=G.concat(B)}var ce=le.time(),xe=le(D,G,ce,ce+w,le.time,function(oe){var fe={};for(var ee in K)K[k](ee)&&(fe[ee]=K[ee](oe));H.attr(fe)},T);return H.anims[xe.id]=xe,xe._attrs=f,xe._callback=I,re("snap.animcreated."+H.id,xe),re.once("mina.finish."+xe.id,function(){re.off("mina.*."+xe.id),delete H.anims[xe.id],I&&I.call(H)}),re.once("mina.stop."+xe.id,function(){re.off("mina.*."+xe.id),delete H.anims[xe.id]}),H}}),q.plugin(function(u,F,v,e,o){function l(y,f,w,T,I,W){return null==f&&"[object SVGMatrix]"==d.call(y)?(this.a=y.a,this.b=y.b,this.c=y.c,this.d=y.d,this.e=y.e,void(this.f=y.f)):void(null!=y?(this.a=+y,this.b=+f,this.c=+w,this.d=+T,this.e=+I,this.f=+W):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var d=Object.prototype.toString,m=String,c=Math;(function(y){function f(T){return T[0]*T[0]+T[1]*T[1]}function w(T){var I=c.sqrt(f(T));T[0]&&(T[0]/=I),T[1]&&(T[1]/=I)}y.add=function(T,I,W,B,L,E){if(T&&T instanceof l)return this.add(T.a,T.b,T.c,T.d,T.e,T.f);var D=T*this.a+I*this.c,G=T*this.b+I*this.d;return this.e+=L*this.a+E*this.c,this.f+=L*this.b+E*this.d,this.c=W*this.a+B*this.c,this.d=W*this.b+B*this.d,this.a=D,this.b=G,this},l.prototype.multLeft=function(T,I,W,B,L,E){if(T&&T instanceof l)return this.multLeft(T.a,T.b,T.c,T.d,T.e,T.f);var D=T*this.a+W*this.b,G=T*this.c+W*this.d,K=T*this.e+W*this.f+L;return this.b=I*this.a+B*this.b,this.d=I*this.c+B*this.d,this.f=I*this.e+B*this.f+E,this.a=D,this.c=G,this.e=K,this},y.invert=function(){var T=this,I=T.a*T.d-T.b*T.c;return new l(T.d/I,-T.b/I,-T.c/I,T.a/I,(T.c*T.f-T.d*T.e)/I,(T.b*T.e-T.a*T.f)/I)},y.clone=function(){return new l(this.a,this.b,this.c,this.d,this.e,this.f)},y.translate=function(T,I){return this.e+=T*this.a+I*this.c,this.f+=T*this.b+I*this.d,this},y.scale=function(T,I,W,B){return null==I&&(I=T),(W||B)&&this.translate(W,B),this.a*=T,this.b*=T,this.c*=I,this.d*=I,(W||B)&&this.translate(-W,-B),this},y.rotate=function(T,I,W){T=u.rad(T),I=I||0,W=W||0;var B=+c.cos(T).toFixed(9),L=+c.sin(T).toFixed(9);return this.add(B,L,-L,B,I,W),this.add(1,0,0,1,-I,-W)},y.skewX=function(T){return this.skew(T,0)},y.skewY=function(T){return this.skew(0,T)},y.skew=function(T,I){T=T||0,I=I||0,T=u.rad(T),I=u.rad(I);var W=c.tan(T).toFixed(9),B=c.tan(I).toFixed(9);return this.add(1,B,W,1,0,0)},y.x=function(T,I){return T*this.a+I*this.c+this.e},y.y=function(T,I){return T*this.b+I*this.d+this.f},y.get=function(T){return+this[m.fromCharCode(97+T)].toFixed(4)},y.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},y.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},y.determinant=function(){return this.a*this.d-this.b*this.c},y.split=function(){var T={};T.dx=this.e,T.dy=this.f;var I=[[this.a,this.b],[this.c,this.d]];T.scalex=c.sqrt(f(I[0])),w(I[0]),T.shear=I[0][0]*I[1][0]+I[0][1]*I[1][1],I[1]=[I[1][0]-I[0][0]*T.shear,I[1][1]-I[0][1]*T.shear],T.scaley=c.sqrt(f(I[1])),w(I[1]),T.shear/=T.scaley,this.determinant()<0&&(T.scalex=-T.scalex);var W=I[0][1],B=I[1][1];return 0>B?(T.rotate=u.deg(c.acos(B)),0>W&&(T.rotate=360-T.rotate)):T.rotate=u.deg(c.asin(W)),T.isSimple=!(+T.shear.toFixed(9)||T.scalex.toFixed(9)!=T.scaley.toFixed(9)&&T.rotate),T.isSuperSimple=!+T.shear.toFixed(9)&&T.scalex.toFixed(9)==T.scaley.toFixed(9)&&!T.rotate,T.noRotation=!+T.shear.toFixed(9)&&!T.rotate,T},y.toTransformString=function(T){var I=T||this.split();return+I.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(I.scalex=+I.scalex.toFixed(4),I.scaley=+I.scaley.toFixed(4),I.rotate=+I.rotate.toFixed(4),(I.dx||I.dy?"t"+[+I.dx.toFixed(4),+I.dy.toFixed(4)]:"")+(I.rotate?"r"+[+I.rotate.toFixed(4),0,0]:"")+(1!=I.scalex||1!=I.scaley?"s"+[I.scalex,I.scaley,0,0]:""))}})(l.prototype),u.Matrix=l,u.matrix=function(y,f,w,T,I,W){return new l(y,f,w,T,I,W)}}),q.plugin(function(u,F,v,e,o){function l(G){return function(K){if(re.stop(),K instanceof o&&1==K.node.childNodes.length&&("radialGradient"==K.node.firstChild.tagName||"linearGradient"==K.node.firstChild.tagName||"pattern"==K.node.firstChild.tagName)&&(K=K.node.firstChild,w(this).appendChild(K),K=y(K)),K instanceof F)if("radialGradient"==K.type||"linearGradient"==K.type||"pattern"==K.type){K.node.id||I(K.node,{id:K.id});var H=W(K.node.id)}else H=K.attr(G);else if((H=u.color(K)).error){var ie=u(w(this).ownerSVGElement).gradient(K);ie?(ie.node.id||I(ie.node,{id:ie.id}),H=W(ie.node.id)):H=K}else H=B(H);var ue={};ue[G]=H,I(this.node,ue),this.node.style[G]=E}}function d(G){re.stop(),G==+G&&(G+="px"),this.node.style.fontSize=G}function m(G){for(var K=[],H=G.childNodes,ie=0,ue=H.length;ue>ie;ie++){var ce=H[ie];3==ce.nodeType&&K.push(ce.nodeValue),"tspan"==ce.tagName&&(1==ce.childNodes.length&&3==ce.firstChild.nodeType?K.push(ce.firstChild.nodeValue):K.push(m(ce)))}return K}function c(){return re.stop(),this.node.style.fontSize}var G,k=u._.make,y=u._.wrap,f=u.is,w=u._.getSomeDefs,T=/^url\((['"]?)([^)]+)\1\)$/,I=u._.$,W=u.url,B=String,L=u._.separator,E="";u.deurl=function(G){var K=String(G).match(T);return K?K[2]:G},re.on("snap.util.attr.mask",function(G){if(G instanceof F||G instanceof o){if(re.stop(),G instanceof o&&1==G.node.childNodes.length&&(G=G.node.firstChild,w(this).appendChild(G),G=y(G)),"mask"==G.type)var K=G;else(K=k("mask",w(this))).node.appendChild(G.node);!K.node.id&&I(K.node,{id:K.id}),I(this.node,{mask:W(K.id)})}}),G=function(G){if(G instanceof F||G instanceof o){re.stop();for(var K,H=G.node;H;){if("clipPath"===H.nodeName){K=new F(H);break}if("svg"===H.nodeName){K=void 0;break}H=H.parentNode}K||((K=k("clipPath",w(this))).node.appendChild(G.node),!K.node.id&&I(K.node,{id:K.id})),I(this.node,{"clip-path":W(K.node.id||K.id)})}},re.on("snap.util.attr.clip",G),re.on("snap.util.attr.clip-path",G),re.on("snap.util.attr.clipPath",G),re.on("snap.util.attr.fill",l("fill")),re.on("snap.util.attr.stroke",l("stroke"));var D=/^([lr])(?:\(([^)]*)\))?(.*)$/i;re.on("snap.util.grad.parse",function(G){function K(de,ve){for(var Fe=(ve-oe)/(de-fe),Ne=fe;de>Ne;Ne++)ce[Ne].offset=+(+oe+Fe*(Ne-fe)).toFixed(2);fe=de,oe=ve}var H=(G=B(G)).match(D);if(!H)return null;var ie=H[1],ue=H[2],ce=H[3];1==(ue=ue.split(/\s*,\s*/).map(function(de){return+de==de?+de:de})).length&&0==ue[0]&&(ue=[]);var xe=(ce=(ce=ce.split("-")).map(function(de){var ve={color:(de=de.split(":"))[0]};return de[1]&&(ve.offset=parseFloat(de[1])),ve})).length,oe=0,fe=0;xe--;for(var ee=0;xe>ee;ee++)"offset"in ce[ee]&&K(ee,ce[ee].offset);return ce[xe].offset=ce[xe].offset||100,K(xe,ce[xe].offset),{type:ie,params:ue,stops:ce}}),re.on("snap.util.attr.d",function(G){re.stop(),f(G,"array")&&f(G[0],"array")&&(G=u.path.toString.call(G)),(G=B(G)).match(/[ruo]/i)&&(G=u.path.toAbsolute(G)),I(this.node,{d:G})})(-1),re.on("snap.util.attr.#text",function(G){re.stop(),G=B(G);for(var K=e.doc.createTextNode(G);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(K)})(-1),re.on("snap.util.attr.path",function(G){re.stop(),this.attr({d:G})})(-1),re.on("snap.util.attr.class",function(G){re.stop(),this.node.className.baseVal=G})(-1),re.on("snap.util.attr.viewBox",function(G){var K;K=f(G,"object")&&"x"in G?[G.x,G.y,G.width,G.height].join(" "):f(G,"array")?G.join(" "):G,I(this.node,{viewBox:K}),re.stop()})(-1),re.on("snap.util.attr.transform",function(G){this.transform(G),re.stop()})(-1),re.on("snap.util.attr.r",function(G){"rect"==this.type&&(re.stop(),I(this.node,{rx:G,ry:G}))})(-1),re.on("snap.util.attr.textpath",function(G){if(re.stop(),"text"==this.type){var K,H,ie;if(!G&&this.textPath){for(H=this.textPath;H.node.firstChild;)this.node.appendChild(H.node.firstChild);return H.remove(),void delete this.textPath}if(f(G,"string")){var ue=w(this),ce=y(ue.parentNode).path(G);ue.appendChild(ce.node),K=ce.id,ce.attr({id:K})}else(G=y(G))instanceof F&&((K=G.attr("id"))||(K=G.id,G.attr({id:K})));if(K)if(H=this.textPath,ie=this.node,H)H.attr({"xlink:href":"#"+K});else{for(H=I("textPath",{"xlink:href":"#"+K});ie.firstChild;)H.appendChild(ie.firstChild);ie.appendChild(H),this.textPath=y(H)}}})(-1),re.on("snap.util.attr.text",function(G){if("text"==this.type){for(var K=this.node,H=function(ue){var ce=I("tspan");if(f(ue,"array"))for(var xe=0;xe<ue.length;xe++)ce.appendChild(H(ue[xe]));else ce.appendChild(e.doc.createTextNode(ue));return ce.normalize&&ce.normalize(),ce};K.firstChild;)K.removeChild(K.firstChild);for(var ie=H(G);ie.firstChild;)K.appendChild(ie.firstChild)}re.stop()})(-1),re.on("snap.util.attr.fontSize",d)(-1),re.on("snap.util.attr.font-size",d)(-1),re.on("snap.util.getattr.transform",function(){return re.stop(),this.transform()})(-1),re.on("snap.util.getattr.textpath",function(){return re.stop(),this.textPath})(-1),function(){function G(H){return function(){re.stop();var ie=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+H);return"none"==ie?ie:u(e.doc.getElementById(ie.match(T)[1]))}}function K(H){return function(ie){re.stop();var ue="marker"+H.charAt(0).toUpperCase()+H.substring(1);if(""!=ie&&ie){if("marker"==ie.type){var ce=ie.node.id;return ce||I(ie.node,{id:ie.id}),void(this.node.style[ue]=W(ce))}}else this.node.style[ue]="none"}}re.on("snap.util.getattr.marker-end",G("end"))(-1),re.on("snap.util.getattr.markerEnd",G("end"))(-1),re.on("snap.util.getattr.marker-start",G("start"))(-1),re.on("snap.util.getattr.markerStart",G("start"))(-1),re.on("snap.util.getattr.marker-mid",G("mid"))(-1),re.on("snap.util.getattr.markerMid",G("mid"))(-1),re.on("snap.util.attr.marker-end",K("end"))(-1),re.on("snap.util.attr.markerEnd",K("end"))(-1),re.on("snap.util.attr.marker-start",K("start"))(-1),re.on("snap.util.attr.markerStart",K("start"))(-1),re.on("snap.util.attr.marker-mid",K("mid"))(-1),re.on("snap.util.attr.markerMid",K("mid"))(-1)}(),re.on("snap.util.getattr.r",function(){return"rect"==this.type&&I(this.node,"rx")==I(this.node,"ry")?(re.stop(),I(this.node,"rx")):void 0})(-1),re.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){re.stop();var G=m(this.node);return 1==G.length?G[0]:G}})(-1),re.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),re.on("snap.util.getattr.fill",function(G){if(!G){re.stop();var K=re("snap.util.getattr.fill",this,!0).firstDefined();return u(u.deurl(K))||K}})(-1),re.on("snap.util.getattr.stroke",function(G){if(!G){re.stop();var K=re("snap.util.getattr.stroke",this,!0).firstDefined();return u(u.deurl(K))||K}})(-1),re.on("snap.util.getattr.viewBox",function(){re.stop();var G=I(this.node,"viewBox");return G?(G=G.split(L),u._.box(+G[0],+G[1],+G[2],+G[3])):void 0})(-1),re.on("snap.util.getattr.points",function(){var G=I(this.node,"points");return re.stop(),G?G.split(L):void 0})(-1),re.on("snap.util.getattr.path",function(){var G=I(this.node,"d");return re.stop(),G})(-1),re.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),re.on("snap.util.getattr.fontSize",c)(-1),re.on("snap.util.getattr.font-size",c)(-1)}),q.plugin(function(u,F,v,e,o){var l=/\S+/g,d=String,m=F.prototype;m.addClass=function(c){var k,f,w,T=d(c||"").match(l)||[],I=this.node,W=I.className.baseVal,B=W.match(l)||[];if(T.length){for(k=0;f=T[k++];)~B.indexOf(f)||B.push(f);W!=(w=B.join(" "))&&(I.className.baseVal=w)}return this},m.removeClass=function(c){var k,y,f,w,T=d(c||"").match(l)||[],I=this.node,W=I.className.baseVal,B=W.match(l)||[];if(B.length){for(k=0;f=T[k++];)~(y=B.indexOf(f))&&B.splice(y,1);W!=(w=B.join(" "))&&(I.className.baseVal=w)}return this},m.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)},m.toggleClass=function(c,k){if(null!=k)return k?this.addClass(c):this.removeClass(c);var y,f,w,T,I=(c||"").match(l)||[],W=this.node,B=W.className.baseVal,L=B.match(l)||[];for(y=0;w=I[y++];)~(f=L.indexOf(w))?L.splice(f,1):L.push(w);return B!=(T=L.join(" "))&&(W.className.baseVal=T),this}}),q.plugin(function(u,F,v,e,o){function l(f){return f}function d(f){return function(w){return+w.toFixed(3)+f}}var m={"+":function(f,w){return f+w},"-":function(f,w){return f-w},"/":function(f,w){return f/w},"*":function(f,w){return f*w}},c=String,k=/[a-z]+$/i,y=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;re.on("snap.util.attr",function(f){var w=c(f).match(y);if(w){var T=re.nt(),I=T.substring(T.lastIndexOf(".")+1),W=this.attr(I),B={};re.stop();var L=w[3]||"",E=W.match(k),D=m[w[1]];if(E&&E==L?f=D(parseFloat(W),+w[2]):(W=this.asPX(I),f=D(this.asPX(I),this.asPX(I,w[2]+L))),isNaN(W)||isNaN(f))return;B[I]=f,this.attr(B)}})(-10),re.on("snap.util.equal",function(f,w){var T=c(this.attr(f)||""),I=c(w).match(y);if(I){re.stop();var W=I[3]||"",B=T.match(k),L=m[I[1]];return B&&B==W?{from:parseFloat(T),to:L(parseFloat(T),+I[2]),f:d(B)}:{from:T=this.asPX(f),to:L(T,this.asPX(f,I[2]+W)),f:l}}})(-10)}),q.plugin(function(u,F,v,e,o){var l=v.prototype,d=u.is;l.rect=function(c,k,y,f,w,T){var I;return null==T&&(T=w),d(c,"object")&&"[object Object]"==c?I=c:null!=c&&(I={x:c,y:k,width:y,height:f},null!=w&&(I.rx=w,I.ry=T)),this.el("rect",I)},l.circle=function(c,k,y){var f;return d(c,"object")&&"[object Object]"==c?f=c:null!=c&&(f={cx:c,cy:k,r:y}),this.el("circle",f)};var m=function(){function c(){this.parentNode.removeChild(this)}return function(k,y){var f=e.doc.createElement("img"),w=e.doc.body;f.style.cssText="position:absolute;left:-9999em;top:-9999em",f.onload=function(){y.call(f),f.onload=f.onerror=null,w.removeChild(f)},f.onerror=c,w.appendChild(f),f.src=k}}();l.image=function(c,k,y,f,w){var T=this.el("image");if(d(c,"object")&&"src"in c)T.attr(c);else if(null!=c){var I={"xlink:href":c,preserveAspectRatio:"none"};null!=k&&null!=y&&(I.x=k,I.y=y),null!=f&&null!=w?(I.width=f,I.height=w):m(c,function(){u._.$(T.node,{width:this.offsetWidth,height:this.offsetHeight})}),u._.$(T.node,I)}return T},l.ellipse=function(c,k,y,f){var w;return d(c,"object")&&"[object Object]"==c?w=c:null!=c&&(w={cx:c,cy:k,rx:y,ry:f}),this.el("ellipse",w)},l.path=function(c){var k;return d(c,"object")&&!d(c,"array")?k=c:c&&(k={d:c}),this.el("path",k)},l.group=l.g=function(c){var k=this.el("g");return 1==arguments.length&&c&&!c.type?k.attr(c):arguments.length&&k.add(Array.prototype.slice.call(arguments,0)),k},l.svg=function(c,k,y,f,w,T,I,W){var B={};return d(c,"object")&&null==k?B=c:(null!=c&&(B.x=c),null!=k&&(B.y=k),null!=y&&(B.width=y),null!=f&&(B.height=f),null!=w&&null!=T&&null!=I&&null!=W&&(B.viewBox=[w,T,I,W])),this.el("svg",B)},l.mask=function(c){var k=this.el("mask");return 1==arguments.length&&c&&!c.type?k.attr(c):arguments.length&&k.add(Array.prototype.slice.call(arguments,0)),k},l.ptrn=function(c,k,y,f,w,T,I,W){if(d(c,"object"))var B=c;else B={patternUnits:"userSpaceOnUse"},c&&(B.x=c),k&&(B.y=k),null!=y&&(B.width=y),null!=f&&(B.height=f),B.viewBox=null!=w&&null!=T&&null!=I&&null!=W?[w,T,I,W]:[c||0,k||0,y||0,f||0];return this.el("pattern",B)},l.use=function(c){return null!=c?(c instanceof F&&(c.attr("id")||c.attr({id:u._.id(c)}),c=c.attr("id")),"#"==String(c).charAt()&&(c=c.substring(1)),this.el("use",{"xlink:href":"#"+c})):F.prototype.use.call(this)},l.symbol=function(c,k,y,f){var w={};return null!=c&&null!=k&&null!=y&&null!=f&&(w.viewBox=[c,k,y,f]),this.el("symbol",w)},l.text=function(c,k,y){var f={};return d(c,"object")?f=c:null!=c&&(f={x:c,y:k,text:y||""}),this.el("text",f)},l.line=function(c,k,y,f){var w={};return d(c,"object")?w=c:null!=c&&(w={x1:c,x2:y,y1:k,y2:f}),this.el("line",w)},l.polyline=function(c){arguments.length>1&&(c=Array.prototype.slice.call(arguments,0));var k={};return d(c,"object")&&!d(c,"array")?k=c:null!=c&&(k={points:c}),this.el("polyline",k)},l.polygon=function(c){arguments.length>1&&(c=Array.prototype.slice.call(arguments,0));var k={};return d(c,"object")&&!d(c,"array")?k=c:null!=c&&(k={points:c}),this.el("polygon",k)},function(){function c(){return this.selectAll("stop")}function k(B,L){var E=W("stop"),D={offset:+L+"%"};B=u.color(B),D["stop-color"]=B.hex,B.opacity<1&&(D["stop-opacity"]=B.opacity),W(E,D);for(var G,K=this.stops(),H=0;H<K.length;H++){if(parseFloat(K[H].attr("offset"))>L){this.node.insertBefore(E,K[H].node),G=!0;break}}return G||this.node.appendChild(E),this}function y(){if("linearGradient"==this.type){var B=W(this.node,"x1")||0,L=W(this.node,"x2")||1,E=W(this.node,"y1")||0,D=W(this.node,"y2")||0;return u._.box(B,E,math.abs(L-B),math.abs(D-E))}var G=this.node.cx||.5,K=this.node.cy||.5,H=this.node.r||0;return u._.box(G-H,K-H,2*H,2*H)}function f(B){var L=B,E=this.stops();if("string"==typeof B&&(L=re("snap.util.grad.parse",null,"l(0,0,0,1)"+B).firstDefined().stops),u.is(L,"array")){for(var D=0;D<E.length;D++)if(L[D]){var G=u.color(L[D].color),K={offset:L[D].offset+"%"};K["stop-color"]=G.hex,G.opacity<1&&(K["stop-opacity"]=G.opacity),E[D].attr(K)}else E[D].remove();for(D=E.length;D<L.length;D++)this.addStop(L[D].color,L[D].offset);return this}}function T(B,L,E,D,G){var K=u._.make("linearGradient",B);return K.stops=c,K.addStop=k,K.getBBox=y,K.setStops=f,null!=L&&W(K.node,{x1:L,y1:E,x2:D,y2:G}),K}function I(B,L,E,D,G,K){var H=u._.make("radialGradient",B);return H.stops=c,H.addStop=k,H.getBBox=y,null!=L&&W(H.node,{cx:L,cy:E,r:D}),null!=G&&null!=K&&W(H.node,{fx:G,fy:K}),H}var W=u._.$;l.gradient=function(B){return function w(B,L){var E,D=re("snap.util.grad.parse",null,L).firstDefined();if(!D)return null;D.params.unshift(B),E="l"==D.type.toLowerCase()?T.apply(0,D.params):I.apply(0,D.params),D.type!=D.type.toLowerCase()&&W(E.node,{gradientUnits:"userSpaceOnUse"});for(var G=D.stops,K=G.length,H=0;K>H;H++){var ie=G[H];E.addStop(ie.color,ie.offset)}return E}(this.defs,B)},l.gradientLinear=function(B,L,E,D){return T(this.defs,B,L,E,D)},l.gradientRadial=function(B,L,E,D,G){return I(this.defs,B,L,E,D,G)},l.toString=function(){var B,L=this.node.ownerDocument,E=L.createDocumentFragment(),D=L.createElement("div"),G=this.node.cloneNode(!0);return E.appendChild(D),D.appendChild(G),u._.$(G,{xmlns:"http://www.w3.org/2000/svg"}),B=D.innerHTML,E.removeChild(E.firstChild),B},l.toDataURL=function(){return J&&J.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},l.clear=function(){for(var B,L=this.node.firstChild;L;)B=L.nextSibling,"defs"!=L.tagName?L.parentNode.removeChild(L):l.clear.call({node:L}),L=B}}()}),q.plugin(function(u,F,v,e){function o(Ee){var Re=o.ps=o.ps||{};return Re[Ee]?Re[Ee].sleep=100:Re[Ee]={sleep:100},setTimeout(function(){for(var je in Re)Re[Je](je)&&je!=Ee&&(Re[je].sleep--,!Re[je].sleep&&delete Re[je])}),Re[Ee]}function l(Ee,Re,je,V){return null==Ee&&(Ee=Re=je=V=0),null==Re&&(Re=Ee.y,je=Ee.width,V=Ee.height,Ee=Ee.x),{x:Ee,y:Re,width:je,w:je,height:V,h:V,x2:Ee+je,y2:Re+V,cx:Ee+je/2,cy:Re+V/2,r1:Y.min(je,V)/2,r2:Y.max(je,V)/2,r0:Y.sqrt(je*je+V*V)/2,path:ue(Ee,Re,je,V),vb:[Ee,Re,je,V].join(" ")}}function d(){return this.join(",").replace(M,"$1")}function m(Ee){var Re=He(Ee);return Re.toString=d,Re}function c(Ee,Re,je,V,ne,he,me,Le,_e){return null==_e?W(Ee,Re,je,V,ne,he,me,Le):y(Ee,Re,je,V,ne,he,me,Le,function B(Ee,Re,je,V,ne,he,me,Le,_e){if(!(0>_e||W(Ee,Re,je,V,ne,he,me,Le)<_e)){var ke,Ie=1,We=Ie/2,Ze=Ie-We,rt=.01;for(ke=W(Ee,Re,je,V,ne,he,me,Le,Ze);Be(ke-_e)>rt;)ke=W(Ee,Re,je,V,ne,he,me,Le,Ze+=(_e>ke?1:-1)*(We/=2));return Ze}}(Ee,Re,je,V,ne,he,me,Le,_e))}function k(Ee,Re){function je(V){return+(+V).toFixed(3)}return u._.cacher(function(V,ne,he){V instanceof F&&(V=V.attr("d"));for(var me,Le,_e,ke,Ie,We="",Ze={},rt=0,Ke=0,et=(V=Fe(V)).length;et>Ke;Ke++){if("M"==(_e=V[Ke])[0])me=+_e[1],Le=+_e[2];else{if(rt+(ke=c(me,Le,_e[1],_e[2],_e[3],_e[4],_e[5],_e[6]))>ne){if(Re&&!Ze.start){if(We+=["C"+je((Ie=c(me,Le,_e[1],_e[2],_e[3],_e[4],_e[5],_e[6],ne-rt)).start.x),je(Ie.start.y),je(Ie.m.x),je(Ie.m.y),je(Ie.x),je(Ie.y)],he)return We;Ze.start=We,We=["M"+je(Ie.x),je(Ie.y)+"C"+je(Ie.n.x),je(Ie.n.y),je(Ie.end.x),je(Ie.end.y),je(_e[5]),je(_e[6])].join(),rt+=ke,me=+_e[5],Le=+_e[6];continue}if(!Ee&&!Re)return c(me,Le,_e[1],_e[2],_e[3],_e[4],_e[5],_e[6],ne-rt)}rt+=ke,me=+_e[5],Le=+_e[6]}We+=_e.shift()+_e}return Ze.end=We,Ee?rt:Re?Ze:y(me,Le,_e[0],_e[1],_e[2],_e[3],_e[4],_e[5],1)},null,u._.clone)}function y(Ee,Re,je,V,ne,he,me,Le,_e){var ke=1-_e,Ie=De(ke,3),We=De(ke,2),Ze=_e*_e,rt=Ze*_e,kt=Ee+2*_e*(je-Ee)+Ze*(ne-2*je+Ee),vt=Re+2*_e*(V-Re)+Ze*(he-2*V+Re),mt=je+2*_e*(ne-je)+Ze*(me-2*ne+je),bt=V+2*_e*(he-V)+Ze*(Le-2*he+V);return{x:Ie*Ee+3*We*_e*je+3*ke*_e*_e*ne+rt*me,y:Ie*Re+3*We*_e*V+3*ke*_e*_e*he+rt*Le,m:{x:kt,y:vt},n:{x:mt,y:bt},start:{x:ke*Ee+_e*je,y:ke*Re+_e*V},end:{x:ke*ne+_e*me,y:ke*he+_e*Le},alpha:90-180*Y.atan2(kt-mt,vt-bt)/pe}}function f(Ee,Re,je,V,ne,he,me,Le){u.is(Ee,"array")||(Ee=[Ee,Re,je,V,ne,he,me,Le]);var _e=ve.apply(null,Ee);return l(_e.min.x,_e.min.y,_e.max.x-_e.min.x,_e.max.y-_e.min.y)}function w(Ee,Re,je){return Re>=Ee.x&&Re<=Ee.x+Ee.width&&je>=Ee.y&&je<=Ee.y+Ee.height}function T(Ee,Re){return Ee=l(Ee),w(Re=l(Re),Ee.x,Ee.y)||w(Re,Ee.x2,Ee.y)||w(Re,Ee.x,Ee.y2)||w(Re,Ee.x2,Ee.y2)||w(Ee,Re.x,Re.y)||w(Ee,Re.x2,Re.y)||w(Ee,Re.x,Re.y2)||w(Ee,Re.x2,Re.y2)||(Ee.x<Re.x2&&Ee.x>Re.x||Re.x<Ee.x2&&Re.x>Ee.x)&&(Ee.y<Re.y2&&Ee.y>Re.y||Re.y<Ee.y2&&Re.y>Ee.y)}function I(Ee,Re,je,V,ne){return Ee*(Ee*(-3*Re+9*je-9*V+3*ne)+6*Re-12*je+6*V)-3*Re+3*je}function W(Ee,Re,je,V,ne,he,me,Le,_e){null==_e&&(_e=1);for(var ke=(_e=_e>1?1:0>_e?0:_e)/2,We=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ze=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],rt=0,Ke=0;12>Ke;Ke++){var et=ke*We[Ke]+ke,kt=I(et,Ee,je,ne,me),vt=I(et,Re,V,he,Le),mt=kt*kt+vt*vt;rt+=Ze[Ke]*Y.sqrt(mt)}return ke*rt}function L(Ee,Re,je,V,ne,he,me,Le){if(!(ye(Ee,je)<Ae(ne,me)||Ae(Ee,je)>ye(ne,me)||ye(Re,V)<Ae(he,Le)||Ae(Re,V)>ye(he,Le))){var Ie=(Ee-je)*(he-Le)-(Re-V)*(ne-me);if(Ie){var We=((Ee*V-Re*je)*(ne-me)-(Ee-je)*(ne*Le-he*me))/Ie,Ze=((Ee*V-Re*je)*(he-Le)-(Re-V)*(ne*Le-he*me))/Ie,rt=+We.toFixed(2),Ke=+Ze.toFixed(2);if(!(rt<+Ae(Ee,je).toFixed(2)||rt>+ye(Ee,je).toFixed(2)||rt<+Ae(ne,me).toFixed(2)||rt>+ye(ne,me).toFixed(2)||Ke<+Ae(Re,V).toFixed(2)||Ke>+ye(Re,V).toFixed(2)||Ke<+Ae(he,Le).toFixed(2)||Ke>+ye(he,Le).toFixed(2)))return{x:We,y:Ze}}}}function E(Ee,Re,je){if(!T(f(Ee),f(Re)))return je?0:[];for(var Le=~~(W.apply(0,Ee)/8),_e=~~(W.apply(0,Re)/8),ke=[],Ie=[],We={},Ze=je?0:[],rt=0;Le+1>rt;rt++){var Ke=y.apply(0,Ee.concat(rt/Le));ke.push({x:Ke.x,y:Ke.y,t:rt/Le})}for(rt=0;_e+1>rt;rt++)Ke=y.apply(0,Re.concat(rt/_e)),Ie.push({x:Ke.x,y:Ke.y,t:rt/_e});for(rt=0;Le>rt;rt++)for(var et=0;_e>et;et++){var kt=ke[rt],vt=ke[rt+1],mt=Ie[et],bt=Ie[et+1],yt=Be(vt.x-kt.x)<.001?"y":"x",at=Be(bt.x-mt.x)<.001?"y":"x",Tt=L(kt.x,kt.y,vt.x,vt.y,mt.x,mt.y,bt.x,bt.y);if(Tt){if(We[Tt.x.toFixed(4)]==Tt.y.toFixed(4))continue;We[Tt.x.toFixed(4)]=Tt.y.toFixed(4);var Ct=kt.t+Be((Tt[yt]-kt[yt])/(vt[yt]-kt[yt]))*(vt.t-kt.t),Et=mt.t+Be((Tt[at]-mt[at])/(bt[at]-mt[at]))*(bt.t-mt.t);Ct>=0&&1>=Ct&&Et>=0&&1>=Et&&(je?Ze++:Ze.push({x:Tt.x,y:Tt.y,t1:Ct,t2:Et}))}}return Ze}function K(Ee,Re,je){Ee=Fe(Ee),Re=Fe(Re);for(var V,ne,he,me,Le,_e,ke,Ie,We,Ze,rt=je?0:[],Ke=0,et=Ee.length;et>Ke;Ke++){var kt=Ee[Ke];if("M"==kt[0])V=Le=kt[1],ne=_e=kt[2];else{"C"==kt[0]?(We=[V,ne].concat(kt.slice(1)),V=We[6],ne=We[7]):(We=[V,ne,V,ne,Le,_e,Le,_e],V=Le,ne=_e);for(var vt=0,mt=Re.length;mt>vt;vt++){var bt=Re[vt];if("M"==bt[0])he=ke=bt[1],me=Ie=bt[2];else{"C"==bt[0]?(Ze=[he,me].concat(bt.slice(1)),he=Ze[6],me=Ze[7]):(Ze=[he,me,he,me,ke,Ie,ke,Ie],he=ke,me=Ie);var yt=E(We,Ze,je);if(je)rt+=yt;else{for(var at=0,Tt=yt.length;Tt>at;at++)yt[at].segment1=Ke,yt[at].segment2=vt,yt[at].bez1=We,yt[at].bez2=Ze;rt=rt.concat(yt)}}}}}return rt}function ie(Ee){var Re=o(Ee);if(Re.bbox)return He(Re.bbox);if(!Ee)return l();for(var je,V=0,ne=0,he=[],me=[],Le=0,_e=(Ee=Fe(Ee)).length;_e>Le;Le++)if("M"==(je=Ee[Le])[0])V=je[1],ne=je[2],he.push(V),me.push(ne);else{var ke=ve(V,ne,je[1],je[2],je[3],je[4],je[5],je[6]);he=he.concat(ke.min.x,ke.max.x),me=me.concat(ke.min.y,ke.max.y),V=je[5],ne=je[6]}var Ie=Ae.apply(0,he),We=Ae.apply(0,me),Ke=l(Ie,We,ye.apply(0,he)-Ie,ye.apply(0,me)-We);return Re.bbox=He(Ke),Ke}function ue(Ee,Re,je,V,ne){if(ne)return[["M",+Ee+ +ne,Re],["l",je-2*ne,0],["a",ne,ne,0,0,1,ne,ne],["l",0,V-2*ne],["a",ne,ne,0,0,1,-ne,ne],["l",2*ne-je,0],["a",ne,ne,0,0,1,-ne,-ne],["l",0,2*ne-V],["a",ne,ne,0,0,1,ne,-ne],["z"]];var he=[["M",Ee,Re],["l",je,0],["l",0,V],["l",-je,0],["z"]];return he.toString=d,he}function ce(Ee,Re,je,V,ne){if(null==ne&&null==V&&(V=je),Ee=+Ee,Re=+Re,je=+je,V=+V,null!=ne)var he=Math.PI/180,me=Ee+je*Math.cos(-V*he),Le=Ee+je*Math.cos(-ne*he),Ie=[["M",me,Re+je*Math.sin(-V*he)],["A",je,je,0,+(ne-V>180),0,Le,Re+je*Math.sin(-ne*he)]];else Ie=[["M",Ee,Re],["m",0,-V],["a",je,V,0,1,1,0,2*V],["a",je,V,0,1,1,0,-2*V],["z"]];return Ie.toString=d,Ie}function oe(Ee){var Re=o(Ee);if(Re.abs)return m(Re.abs);if(Pe(Ee,"array")&&Pe(Ee&&Ee[0],"array")||(Ee=u.parsePathString(Ee)),!Ee||!Ee.length)return[["M",0,0]];var je,V=[],ne=0,he=0,me=0,Le=0,_e=0;"M"==Ee[0][0]&&(me=ne=+Ee[0][1],Le=he=+Ee[0][2],_e++,V[0]=["M",ne,he]);for(var ke,Ie,We=3==Ee.length&&"M"==Ee[0][0]&&"R"==Ee[1][0].toUpperCase()&&"Z"==Ee[2][0].toUpperCase(),Ze=_e,rt=Ee.length;rt>Ze;Ze++){if(V.push(ke=[]),(je=(Ie=Ee[Ze])[0])!=je.toUpperCase())switch(ke[0]=je.toUpperCase(),ke[0]){case"A":ke[1]=Ie[1],ke[2]=Ie[2],ke[3]=Ie[3],ke[4]=Ie[4],ke[5]=Ie[5],ke[6]=+Ie[6]+ne,ke[7]=+Ie[7]+he;break;case"V":ke[1]=+Ie[1]+he;break;case"H":ke[1]=+Ie[1]+ne;break;case"R":for(var Ke=[ne,he].concat(Ie.slice(1)),et=2,kt=Ke.length;kt>et;et++)Ke[et]=+Ke[et]+ne,Ke[++et]=+Ke[et]+he;V.pop(),V=V.concat(Se(Ke,We));break;case"O":V.pop(),(Ke=ce(ne,he,Ie[1],Ie[2])).push(Ke[0]),V=V.concat(Ke);break;case"U":V.pop(),V=V.concat(ce(ne,he,Ie[1],Ie[2],Ie[3])),ke=["U"].concat(V[V.length-1].slice(-2));break;case"M":me=+Ie[1]+ne,Le=+Ie[2]+he;default:for(et=1,kt=Ie.length;kt>et;et++)ke[et]=+Ie[et]+(et%2?ne:he)}else if("R"==je)Ke=[ne,he].concat(Ie.slice(1)),V.pop(),V=V.concat(Se(Ke,We)),ke=["R"].concat(Ie.slice(-2));else if("O"==je)V.pop(),(Ke=ce(ne,he,Ie[1],Ie[2])).push(Ke[0]),V=V.concat(Ke);else if("U"==je)V.pop(),V=V.concat(ce(ne,he,Ie[1],Ie[2],Ie[3])),ke=["U"].concat(V[V.length-1].slice(-2));else for(var vt=0,mt=Ie.length;mt>vt;vt++)ke[vt]=Ie[vt];if("O"!=(je=je.toUpperCase()))switch(ke[0]){case"Z":ne=+me,he=+Le;break;case"H":ne=ke[1];break;case"V":he=ke[1];break;case"M":me=ke[ke.length-2],Le=ke[ke.length-1];default:ne=ke[ke.length-2],he=ke[ke.length-1]}}return V.toString=d,Re.abs=m(V),V}function fe(Ee,Re,je,V){return[Ee,Re,je,V,je,V]}function ee(Ee,Re,je,V,ne,he){var me=.3333333333333333,Le=2/3;return[me*Ee+Le*je,me*Re+Le*V,me*ne+Le*je,me*he+Le*V,ne,he]}function de(Ee,Re,je,V,ne,he,me,Le,_e,ke){var Ie,We=120*pe/180,Ze=pe/180*(+ne||0),rt=[],Ke=u._.cacher(function(bn,oi,Ir){return{x:bn*Y.cos(Ir)-oi*Y.sin(Ir),y:bn*Y.sin(Ir)+oi*Y.cos(Ir)}});if(!je||!V)return[Ee,Re,Le,_e,Le,_e];if(ke)Ct=ke[0],Et=ke[1],at=ke[2],Tt=ke[3];else{Ee=(Ie=Ke(Ee,Re,-Ze)).x,Re=Ie.y,Le=(Ie=Ke(Le,_e,-Ze)).x,_e=Ie.y;var et=(Y.cos(pe/180*ne),Y.sin(pe/180*ne),(Ee-Le)/2),kt=(Re-_e)/2,vt=et*et/(je*je)+kt*kt/(V*V);vt>1&&(je*=vt=Y.sqrt(vt),V*=vt);var mt=je*je,bt=V*V,yt=(he==me?-1:1)*Y.sqrt(Be((mt*bt-mt*kt*kt-bt*et*et)/(mt*kt*kt+bt*et*et))),at=yt*je*kt/V+(Ee+Le)/2,Tt=yt*-V*et/je+(Re+_e)/2,Ct=Y.asin(((Re-Tt)/V).toFixed(9)),Et=Y.asin(((_e-Tt)/V).toFixed(9));0>(Ct=at>Ee?pe-Ct:Ct)&&(Ct=2*pe+Ct),0>(Et=at>Le?pe-Et:Et)&&(Et=2*pe+Et),me&&Ct>Et&&(Ct-=2*pe),!me&&Et>Ct&&(Et-=2*pe)}var Dn=Et-Ct;if(Be(Dn)>We){var mn=Et,Ti=Le,po=_e;Et=Ct+We*(me&&Et>Ct?1:-1),rt=de(Le=at+je*Y.cos(Et),_e=Tt+V*Y.sin(Et),je,V,ne,0,me,Ti,po,[Et,mn,at,Tt])}Dn=Et-Ct;var ys=Y.cos(Ct),Ni=Y.sin(Ct),ms=Y.cos(Et),Wr=Y.sin(Et),ni=Y.tan(Dn/4),jr=4/3*je*ni,ii=4/3*V*ni,vo=[Ee,Re],zr=[Ee+jr*Ni,Re-ii*ys],go=[Le+jr*Wr,_e-ii*ms],Mn=[Le,_e];if(zr[0]=2*vo[0]-zr[0],zr[1]=2*vo[1]-zr[1],ke)return[zr,go,Mn].concat(rt);for(var tn=[],qr=0,bs=(rt=[zr,go,Mn].concat(rt).join().split(",")).length;bs>qr;qr++)tn[qr]=qr%2?Ke(rt[qr-1],rt[qr],Ze).y:Ke(rt[qr],rt[qr+1],Ze).x;return tn}function ve(Ee,Re,je,V,ne,he,me,Le){for(var _e,ke,Ie,We,Ze,rt,Ke,et,kt=[],vt=[[],[]],mt=0;2>mt;++mt)if(0==mt?(ke=6*Ee-12*je+6*ne,_e=-3*Ee+9*je-9*ne+3*me,Ie=3*je-3*Ee):(ke=6*Re-12*V+6*he,_e=-3*Re+9*V-9*he+3*Le,Ie=3*V-3*Re),Be(_e)<1e-12){if(Be(ke)<1e-12)continue;(We=-Ie/ke)>0&&1>We&&kt.push(We)}else Ke=ke*ke-4*Ie*_e,et=Y.sqrt(Ke),0>Ke||((Ze=(-ke+et)/(2*_e))>0&&1>Ze&&kt.push(Ze),(rt=(-ke-et)/(2*_e))>0&&1>rt&&kt.push(rt));for(var bt,yt=kt.length,at=yt;yt--;)bt=1-(We=kt[yt]),vt[0][yt]=bt*bt*bt*Ee+3*bt*bt*We*je+3*bt*We*We*ne+We*We*We*me,vt[1][yt]=bt*bt*bt*Re+3*bt*bt*We*V+3*bt*We*We*he+We*We*We*Le;return vt[0][at]=Ee,vt[1][at]=Re,vt[0][at+1]=me,vt[1][at+1]=Le,vt[0].length=vt[1].length=at+2,{min:{x:Ae.apply(0,vt[0]),y:Ae.apply(0,vt[1])},max:{x:ye.apply(0,vt[0]),y:ye.apply(0,vt[1])}}}function Fe(Ee,Re){var je=!Re&&o(Ee);if(!Re&&je.curve)return m(je.curve);for(var V=oe(Ee),ne=Re&&oe(Re),he={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Le=function(yt,at,Tt){var Ct,Et;if(!yt)return["C",at.x,at.y,at.x,at.y,at.x,at.y];switch(!(yt[0]in{T:1,Q:1})&&(at.qx=at.qy=null),yt[0]){case"M":at.X=yt[1],at.Y=yt[2];break;case"A":yt=["C"].concat(de.apply(0,[at.x,at.y].concat(yt.slice(1))));break;case"S":"C"==Tt||"S"==Tt?(Ct=2*at.x-at.bx,Et=2*at.y-at.by):(Ct=at.x,Et=at.y),yt=["C",Ct,Et].concat(yt.slice(1));break;case"T":"Q"==Tt||"T"==Tt?(at.qx=2*at.x-at.qx,at.qy=2*at.y-at.qy):(at.qx=at.x,at.qy=at.y),yt=["C"].concat(ee(at.x,at.y,at.qx,at.qy,yt[1],yt[2]));break;case"Q":at.qx=yt[1],at.qy=yt[2],yt=["C"].concat(ee(at.x,at.y,yt[1],yt[2],yt[3],yt[4]));break;case"L":yt=["C"].concat(fe(at.x,at.y,yt[1],yt[2]));break;case"H":yt=["C"].concat(fe(at.x,at.y,yt[1],at.y));break;case"V":yt=["C"].concat(fe(at.x,at.y,at.x,yt[1]));break;case"Z":yt=["C"].concat(fe(at.x,at.y,at.X,at.Y))}return yt},_e=function(yt,at){if(yt[at].length>7){yt[at].shift();for(var Tt=yt[at];Tt.length;)Ie[at]="A",ne&&(We[at]="A"),yt.splice(at++,0,["C"].concat(Tt.splice(0,6)));yt.splice(at,1),et=ye(V.length,ne&&ne.length||0)}},ke=function(yt,at,Tt,Ct,Et){yt&&at&&"M"==yt[Et][0]&&"M"!=at[Et][0]&&(at.splice(Et,0,["M",Ct.x,Ct.y]),Tt.bx=0,Tt.by=0,Tt.x=yt[Et][1],Tt.y=yt[Et][2],et=ye(V.length,ne&&ne.length||0))},Ie=[],We=[],Ze="",rt="",Ke=0,et=ye(V.length,ne&&ne.length||0);et>Ke;Ke++){V[Ke]&&(Ze=V[Ke][0]),"C"!=Ze&&(Ie[Ke]=Ze,Ke&&(rt=Ie[Ke-1])),V[Ke]=Le(V[Ke],he,rt),"A"!=Ie[Ke]&&"C"==Ze&&(Ie[Ke]="C"),_e(V,Ke),ne&&(ne[Ke]&&(Ze=ne[Ke][0]),"C"!=Ze&&(We[Ke]=Ze,Ke&&(rt=We[Ke-1])),ne[Ke]=Le(ne[Ke],me,rt),"A"!=We[Ke]&&"C"==Ze&&(We[Ke]="C"),_e(ne,Ke)),ke(V,ne,he,me,Ke),ke(ne,V,me,he,Ke);var kt=V[Ke],vt=ne&&ne[Ke],mt=kt.length,bt=ne&&vt.length;he.x=kt[mt-2],he.y=kt[mt-1],he.bx=P(kt[mt-4])||he.x,he.by=P(kt[mt-3])||he.y,me.bx=ne&&(P(vt[bt-4])||me.x),me.by=ne&&(P(vt[bt-3])||me.y),me.x=ne&&vt[bt-2],me.y=ne&&vt[bt-1]}return ne||(je.curve=m(V)),ne?[V,ne]:V}function Se(Ee,Re){for(var je=[],V=0,ne=Ee.length;ne-2*!Re>V;V+=2){var he=[{x:+Ee[V-2],y:+Ee[V-1]},{x:+Ee[V],y:+Ee[V+1]},{x:+Ee[V+2],y:+Ee[V+3]},{x:+Ee[V+4],y:+Ee[V+5]}];Re?V?ne-4==V?he[3]={x:+Ee[0],y:+Ee[1]}:ne-2==V&&(he[2]={x:+Ee[0],y:+Ee[1]},he[3]={x:+Ee[2],y:+Ee[3]}):he[0]={x:+Ee[ne-2],y:+Ee[ne-1]}:ne-4==V?he[3]=he[2]:V||(he[0]={x:+Ee[V],y:+Ee[V+1]}),je.push(["C",(-he[0].x+6*he[1].x+he[2].x)/6,(-he[0].y+6*he[1].y+he[2].y)/6,(he[1].x+6*he[2].x-he[3].x)/6,(he[1].y+6*he[2].y-he[3].y)/6,he[2].x,he[2].y])}return je}var be=F.prototype,Pe=u.is,He=u._.clone,Je="hasOwnProperty",M=/,?([a-z]),?/gi,P=parseFloat,Y=Math,pe=Y.PI,Ae=Y.min,ye=Y.max,De=Y.pow,Be=Y.abs,Xe=k(1),ot=k(),ct=k(0,1),It=u._unit2px,jt={path:function(Ee){return Ee.attr("path")},circle:function(Ee){var Re=It(Ee);return ce(Re.cx,Re.cy,Re.r)},ellipse:function(Ee){var Re=It(Ee);return ce(Re.cx||0,Re.cy||0,Re.rx,Re.ry)},rect:function(Ee){var Re=It(Ee);return ue(Re.x||0,Re.y||0,Re.width,Re.height,Re.rx,Re.ry)},image:function(Ee){var Re=It(Ee);return ue(Re.x||0,Re.y||0,Re.width,Re.height)},line:function(Ee){return"M"+[Ee.attr("x1")||0,Ee.attr("y1")||0,Ee.attr("x2"),Ee.attr("y2")]},polyline:function(Ee){return"M"+Ee.attr("points")},polygon:function(Ee){return"M"+Ee.attr("points")+"z"},deflt:function(Ee){var Re=Ee.node.getBBox();return ue(Re.x,Re.y,Re.width,Re.height)}};u.path=o,u.path.getTotalLength=Xe,u.path.getPointAtLength=ot,u.path.getSubpath=function(Ee,Re,je){if(this.getTotalLength(Ee)-je<1e-6)return ct(Ee,Re).end;var V=ct(Ee,je,1);return Re?ct(V,Re).end:V},be.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},be.getPointAtLength=function(Ee){return ot(this.attr("d"),Ee)},be.getSubpath=function(Ee,Re){return u.path.getSubpath(this.attr("d"),Ee,Re)},u._.box=l,u.path.findDotsAtSegment=y,u.path.bezierBBox=f,u.path.isPointInsideBBox=w,u.closest=function(Ee,Re,je,V){for(var ne=100,he=l(Ee-ne/2,Re-ne/2,ne,ne),me=[],Le=je[0].hasOwnProperty("x")?function(et){return{x:je[et].x,y:je[et].y}}:function(et){return{x:je[et],y:V[et]}},_e=0;1e6>=ne&&!_e;){for(var ke=0,Ie=je.length;Ie>ke;ke++){var We=Le(ke);if(w(he,We.x,We.y)){_e++,me.push(We);break}}_e||(he=l(Ee-(ne*=2)/2,Re-ne/2,ne,ne))}if(1e6!=ne){var Ze,rt=1/0;for(ke=0,Ie=me.length;Ie>ke;ke++){var Ke=u.len(Ee,Re,me[ke].x,me[ke].y);rt>Ke&&(rt=Ke,me[ke].len=Ke,Ze=me[ke])}return Ze}},u.path.isBBoxIntersect=T,u.path.intersection=function D(Ee,Re){return K(Ee,Re)},u.path.intersectionNumber=function G(Ee,Re){return K(Ee,Re,1)},u.path.isPointInside=function H(Ee,Re,je){var V=ie(Ee);return w(V,Re,je)&&K(Ee,[["M",Re,je],["H",V.x2+10]],1)%2==1},u.path.getBBox=ie,u.path.get=jt,u.path.toRelative=function xe(Ee){var Re=o(Ee),je=String.prototype.toLowerCase;if(Re.rel)return m(Re.rel);u.is(Ee,"array")&&u.is(Ee&&Ee[0],"array")||(Ee=u.parsePathString(Ee));var V=[],ne=0,he=0,me=0,Le=0,_e=0;"M"==Ee[0][0]&&(me=ne=Ee[0][1],Le=he=Ee[0][2],_e++,V.push(["M",ne,he]));for(var ke=_e,Ie=Ee.length;Ie>ke;ke++){var We=V[ke]=[],Ze=Ee[ke];if(Ze[0]!=je.call(Ze[0]))switch(We[0]=je.call(Ze[0]),We[0]){case"a":We[1]=Ze[1],We[2]=Ze[2],We[3]=Ze[3],We[4]=Ze[4],We[5]=Ze[5],We[6]=+(Ze[6]-ne).toFixed(3),We[7]=+(Ze[7]-he).toFixed(3);break;case"v":We[1]=+(Ze[1]-he).toFixed(3);break;case"m":me=Ze[1],Le=Ze[2];default:for(var rt=1,Ke=Ze.length;Ke>rt;rt++)We[rt]=+(Ze[rt]-(rt%2?ne:he)).toFixed(3)}else{We=V[ke]=[],"m"==Ze[0]&&(me=Ze[1]+ne,Le=Ze[2]+he);for(var et=0,kt=Ze.length;kt>et;et++)V[ke][et]=Ze[et]}var vt=V[ke].length;switch(V[ke][0]){case"z":ne=me,he=Le;break;case"h":ne+=+V[ke][vt-1];break;case"v":he+=+V[ke][vt-1];break;default:ne+=+V[ke][vt-2],he+=+V[ke][vt-1]}}return V.toString=d,Re.rel=m(V),V},u.path.toAbsolute=oe,u.path.toCubic=Fe,u.path.map=function Ne(Ee,Re){if(!Re)return Ee;var je,V,ne,he,me,Le,_e;for(ne=0,me=(Ee=Fe(Ee)).length;me>ne;ne++)for(he=1,Le=(_e=Ee[ne]).length;Le>he;he+=2)je=Re.x(_e[he],_e[he+1]),V=Re.y(_e[he],_e[he+1]),_e[he]=je,_e[he+1]=V;return Ee},u.path.toString=d,u.path.clone=m}),q.plugin(function(u,F,v,e){var o=Math.max,l=Math.min,d=function(c){if(this.items=[],this.bindings={},this.length=0,this.type="set",c)for(var k=0,y=c.length;y>k;k++)c[k]&&(this[this.items.length]=this.items[this.items.length]=c[k],this.length++)},m=d.prototype;m.push=function(){for(var c,k,y=0,f=arguments.length;f>y;y++)(c=arguments[y])&&(this[k=this.items.length]=this.items[k]=c,this.length++);return this},m.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},m.forEach=function(c,k){for(var y=0,f=this.items.length;f>y;y++)if(!1===c.call(k,this.items[y],y))return this;return this},m.animate=function(c,k,y,f){"function"!=typeof y||y.length||(f=y,y=le.linear),c instanceof u._.Animation&&(f=c.callback,y=c.easing,k=y.dur,c=c.attr);var w=arguments;if(u.is(c,"array")&&u.is(w[w.length-1],"array"))var T=!0;var I,W=function(){I?this.b=I:I=this.b},B=0,L=this,E=f&&function(){++B==L.length&&f.call(this)};return this.forEach(function(D,G){re.once("snap.animcreated."+D.id,W),T?w[G]&&D.animate.apply(D,w[G]):D.animate(c,k,y,E)})},m.remove=function(){for(;this.length;)this.pop().remove();return this},m.bind=function(c,k,y){var f={};if("function"==typeof k)this.bindings[c]=k;else{var w=y||c;this.bindings[c]=function(T){f[w]=T,k.attr(f)}}return this},m.attr=function(c){var k={};for(var y in c)this.bindings[y]?this.bindings[y](c[y]):k[y]=c[y];for(var f=0,w=this.items.length;w>f;f++)this.items[f].attr(k);return this},m.clear=function(){for(;this.length;)this.pop()},m.splice=function(c,k,y){c=0>c?o(this.length+c,0):c,k=o(0,l(this.length-c,k));var f,w=[],T=[],I=[];for(f=2;f<arguments.length;f++)I.push(arguments[f]);for(f=0;k>f;f++)T.push(this[c+f]);for(;f<this.length-c;f++)w.push(this[c+f]);var W=I.length;for(f=0;f<W+w.length;f++)this.items[c+f]=this[c+f]=W>f?I[f]:w[f-W];for(f=this.items.length=this.length-=k-W;this[f];)delete this[f++];return new d(T)},m.exclude=function(c){for(var k=0,y=this.length;y>k;k++)if(this[k]==c)return this.splice(k,1),!0;return!1},m.insertAfter=function(c){for(var k=this.items.length;k--;)this.items[k].insertAfter(c);return this},m.getBBox=function(){for(var c=[],k=[],y=[],f=[],w=this.items.length;w--;)if(!this.items[w].removed){var T=this.items[w].getBBox();c.push(T.x),k.push(T.y),y.push(T.x+T.width),f.push(T.y+T.height)}return{x:c=l.apply(0,c),y:k=l.apply(0,k),x2:y=o.apply(0,y),y2:f=o.apply(0,f),width:y-c,height:f-k,cx:c+(y-c)/2,cy:k+(f-k)/2}},m.clone=function(c){c=new d;for(var k=0,y=this.items.length;y>k;k++)c.push(this.items[k].clone());return c},m.toString=function(){return"Snap\u2018s set"},m.type="set",u.Set=d,u.set=function(){var c=new d;return arguments.length&&c.push.apply(c,Array.prototype.slice.call(arguments,0)),c}}),q.plugin(function(u,F,v,e){function o(L){var E=L[0];switch(E.toLowerCase()){case"t":return[E,0,0];case"m":return[E,1,0,0,1,0,0];case"r":return 4==L.length?[E,0,L[2],L[3]]:[E,0];case"s":return 5==L.length?[E,1,1,L[3],L[4]]:3==L.length?[E,1,1]:[E,1]}}function d(L){return L}function m(L){return function(E){return+E.toFixed(3)+L}}function c(L){return L.join(" ")}function k(L){return u.rgb(L[0],L[1],L[2],L[3])}function y(L){var E,D,G,K,H,ie,ue=0,ce=[];for(E=0,D=L.length;D>E;E++){for(H="[",ie=['"'+L[E][0]+'"'],G=1,K=L[E].length;K>G;G++)ie[G]="val["+ue+++"]";H+=ie+"]",ce[E]=H}return Function("val","return Snap.path.toString.call(["+ce+"])")}function f(L){for(var E=[],D=0,G=L.length;G>D;D++)for(var K=1,H=L[D].length;H>K;K++)E.push(L[D][K]);return E}function w(L){return isFinite(L)}var I={},W=/[%a-z]+$/i,B=String;I.stroke=I.fill="colour",F.prototype.equal=function(L,E){return re("snap.util.equal",this,L,E).firstDefined()},re.on("snap.util.equal",function(L,E){var D,G,K=B(this.attr(L)||""),H=this;if("colour"==I[L])return D=u.color(K),G=u.color(E),{from:[D.r,D.g,D.b,D.opacity],to:[G.r,G.g,G.b,G.opacity],f:k};if("viewBox"==L)return{from:D=this.attr(L).vb.split(" ").map(Number),to:G=E.split(" ").map(Number),f:c};if("transform"==L||"gradientTransform"==L||"patternTransform"==L)return"string"==typeof E&&(E=B(E).replace(/\.{3}|\u2026/g,K)),function l(L,E,D){L=L||new u.Matrix,E=E||new u.Matrix,L=u.parseTransformString(L.toTransformString())||[],E=u.parseTransformString(E.toTransformString())||[];for(var G,K,H,ie,ue=Math.max(L.length,E.length),ce=[],xe=[],oe=0;ue>oe;oe++){if(H=L[oe]||o(E[oe]),ie=E[oe]||o(H),H[0]!=ie[0]||"r"==H[0].toLowerCase()&&(H[2]!=ie[2]||H[3]!=ie[3])||"s"==H[0].toLowerCase()&&(H[3]!=ie[3]||H[4]!=ie[4])){L=u._.transform2matrix(L,D()),E=u._.transform2matrix(E,D()),ce=[["m",L.a,L.b,L.c,L.d,L.e,L.f]],xe=[["m",E.a,E.b,E.c,E.d,E.e,E.f]];break}for(ce[oe]=[],xe[oe]=[],G=0,K=Math.max(H.length,ie.length);K>G;G++)G in H&&(ce[oe][G]=H[G]),G in ie&&(xe[oe][G]=ie[G])}return{from:f(ce),to:f(xe),f:y(ce)}}(K=this.matrix,E=u._.rgTransform.test(E)?u._.transform2matrix(E,this.getBBox()):u._.transform2matrix(u._.svgTransform2string(E),this.getBBox()),function(){return H.getBBox(1)});if("d"==L||"path"==L)return{from:f((D=u.path.toCubic(K,E))[0]),to:f(D[1]),f:y(D[0])};if("points"==L)return{from:D=B(K).split(u._.separator),to:G=B(E).split(u._.separator),f:function(ce){return ce}};if(w(K)&&w(E))return{from:parseFloat(K),to:parseFloat(E),f:d};var ie=K.match(W),ue=B(E).match(W);return ie&&function T(L,E){return!(!u.is(L,"array")||!u.is(E,"array"))&&L.toString()==E.toString()}(ie,ue)?{from:parseFloat(K),to:parseFloat(E),f:m(ie)}:{from:this.asPX(L),to:this.asPX(L,E),f:d}})}),q.plugin(function(u,F,v,e){for(var o=F.prototype,d=("createTouch"in e.doc),m=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},k=function(E,D){var G="y"==E?"scrollTop":"scrollLeft",K=D&&D.node?D.node.ownerDocument:e.doc;return K[G in K.documentElement?"documentElement":"body"][G]},y=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},w=function(E,D,G,K){var H=d&&c[D]?c[D]:D,ie=function(ue){var ce=k("y",K),xe=k("x",K);if(d&&c.hasOwnProperty(D))for(var oe=0,fe=ue.targetTouches&&ue.targetTouches.length;fe>oe;oe++)if(ue.targetTouches[oe].target==E||E.contains(ue.targetTouches[oe].target)){var ee=ue;(ue=ue.targetTouches[oe]).originalEvent=ee,ue.preventDefault=y,ue.stopPropagation=f;break}var de=ue.clientX+xe,ve=ue.clientY+ce;return G.call(K,ue,de,ve)};return D!==H&&E.addEventListener(D,ie,!1),E.addEventListener(H,ie,!1),function(){return D!==H&&E.removeEventListener(D,ie,!1),E.removeEventListener(H,ie,!1),!0}},T=[],I=function(E){for(var D,G=E.clientX,K=E.clientY,H=k("y"),ie=k("x"),ue=T.length;ue--;){if(D=T[ue],d){for(var ce,xe=E.touches&&E.touches.length;xe--;)if((ce=E.touches[xe]).identifier==D.el._drag.id||D.el.node.contains(ce.target)){G=ce.clientX,K=ce.clientY,(E.originalEvent?E.originalEvent:E).preventDefault();break}}else E.preventDefault();var oe=D.el.node;oe.nextSibling,oe.parentNode,oe.style.display,G+=ie,K+=H,re("snap.drag.move."+D.el.id,D.move_scope||D.el,G-D.el._drag.x,K-D.el._drag.y,G,K,E)}},W=function(E){u.unmousemove(I).unmouseup(W);for(var D,G=T.length;G--;)(D=T[G]).el._drag={},re("snap.drag.end."+D.el.id,D.end_scope||D.start_scope||D.move_scope||D.el,E),re.off("snap.drag.*."+D.el.id);T=[]},B=m.length;B--;)!function(E){u[E]=o[E]=function(D,G){if(u.is(D,"function"))this.events=this.events||[],this.events.push({name:E,f:D,unbind:w(this.node||document,E,D,G||this)});else for(var K=0,H=this.events.length;H>K;K++)if(this.events[K].name==E)try{this.events[K].f.call(this)}catch(ie){}return this},u["un"+E]=o["un"+E]=function(D){for(var G=this.events||[],K=G.length;K--;)if(G[K].name==E&&(G[K].f==D||!D))return G[K].unbind(),G.splice(K,1),!G.length&&delete this.events,this;return this}}(m[B]);o.hover=function(E,D,G,K){return this.mouseover(E,G).mouseout(D,K||G)},o.unhover=function(E,D){return this.unmouseover(E).unmouseout(D)};var L=[];o.drag=function(E,D,G,K,H,ie){function ue(fe,ee,de){(fe.originalEvent||fe).preventDefault(),xe._drag.x=ee,xe._drag.y=de,xe._drag.id=fe.identifier,!T.length&&u.mousemove(I).mouseup(W),T.push({el:xe,move_scope:K,start_scope:H,end_scope:ie}),D&&re.on("snap.drag.start."+xe.id,D),E&&re.on("snap.drag.move."+xe.id,E),G&&re.on("snap.drag.end."+xe.id,G),re("snap.drag.start."+xe.id,H||K||xe,ee,de,fe)}function ce(fe,ee,de){re("snap.draginit."+xe.id,xe,fe,ee,de)}var oe,xe=this;return arguments.length?(re.on("snap.draginit."+xe.id,ue),xe._drag={},L.push({el:xe,start:ue,init:ce}),xe.mousedown(ce),xe):xe.drag(function(fe,ee){this.attr({transform:oe+(oe?"T":"t")+[fe,ee]})},function(){oe=this.transform().local})},o.undrag=function(){for(var E=L.length;E--;)L[E].el==this&&(this.unmousedown(L[E].init),L.splice(E,1),re.unbind("snap.drag.*."+this.id),re.unbind("snap.draginit."+this.id));return!L.length&&u.unmousemove(I).unmouseup(W),this}}),q.plugin(function(u,F,v,e){var o=(F.prototype,v.prototype),l=/^\s*url\((.+)\)/,d=String,m=u._.$;u.filter={},o.filter=function(c){var k=this;"svg"!=k.type&&(k=k.paper);var y=u.parse(d(c)),f=u._.id(),w=(k.node.offsetWidth,k.node.offsetHeight,m("filter"));return m(w,{id:f,filterUnits:"userSpaceOnUse"}),w.appendChild(y.node),k.defs.appendChild(w),new F(w)},re.on("snap.util.getattr.filter",function(){re.stop();var c=m(this.node,"filter");if(c){var k=d(c).match(l);return k&&u.select(k[1])}}),re.on("snap.util.attr.filter",function(c){if(c instanceof F&&"filter"==c.type){re.stop();var k=c.node.id;k||(m(c.node,{id:c.id}),k=c.id),m(this.node,{filter:u.url(k)})}c&&"none"!=c||(re.stop(),this.node.removeAttribute("filter"))}),u.filter.blur=function(c,k){null==c&&(c=2);var y=null==k?c:[c,k];return u.format('<feGaussianBlur stdDeviation="{def}"/>',{def:y})},u.filter.blur.toString=function(){return this()},u.filter.shadow=function(c,k,y,f,w){return null==w&&(null==f?(w=y,y=4,f="#000"):(w=f,f=y,y=4)),null==y&&(y=4),null==w&&(w=1),null==c&&(c=0,k=2),null==k&&(k=c),f=u.color(f),u.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:f,dx:c,dy:k,blur:y,opacity:w})},u.filter.shadow.toString=function(){return this()},u.filter.grayscale=function(c){return null==c&&(c=1),u.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-c),b:.7152-.7152*(1-c),c:.0722-.0722*(1-c),d:.2126-.2126*(1-c),e:.7152+.2848*(1-c),f:.0722-.0722*(1-c),g:.2126-.2126*(1-c),h:.0722+.9278*(1-c)})},u.filter.grayscale.toString=function(){return this()},u.filter.sepia=function(c){return null==c&&(c=1),u.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-c),b:.769-.769*(1-c),c:.189-.189*(1-c),d:.349-.349*(1-c),e:.686+.314*(1-c),f:.168-.168*(1-c),g:.272-.272*(1-c),h:.534-.534*(1-c),i:.131+.869*(1-c)})},u.filter.sepia.toString=function(){return this()},u.filter.saturate=function(c){return null==c&&(c=1),u.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-c})},u.filter.saturate.toString=function(){return this()},u.filter.hueRotate=function(c){return c=c||0,u.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:c})},u.filter.hueRotate.toString=function(){return this()},u.filter.invert=function(c){return null==c&&(c=1),u.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:c,amount2:1-c})},u.filter.invert.toString=function(){return this()},u.filter.brightness=function(c){return null==c&&(c=1),u.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:c})},u.filter.brightness.toString=function(){return this()},u.filter.contrast=function(c){return null==c&&(c=1),u.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:c,amount2:.5-c/2})},u.filter.contrast.toString=function(){return this()}}),q.plugin(function(u,F,v,e,o){var l=u._.box,d=u.is,m=/^[^a-z]*([tbmlrc])/i,c=function(){return"T"+this.dx+","+this.dy};F.prototype.getAlign=function(k,y){null==y&&d(k,"string")&&(y=k,k=null);var f=(k=k||this.paper).getBBox?k.getBBox():l(k),w=this.getBBox(),T={};switch(y=(y=y&&y.match(m))?y[1].toLowerCase():"c"){case"t":T.dx=0,T.dy=f.y-w.y;break;case"b":T.dx=0,T.dy=f.y2-w.y2;break;case"m":T.dx=0,T.dy=f.cy-w.cy;break;case"l":T.dx=f.x-w.x,T.dy=0;break;case"r":T.dx=f.x2-w.x2,T.dy=0;break;default:T.dx=f.cx-w.cx,T.dy=0}return T.toString=c,T},F.prototype.align=function(k,y){return this.transform("..."+this.getAlign(k,y))}}),q.plugin(function(u,F,v,e){function o(ue){ue=ue.split(/(?=#)/);var ce=new String(ue[5]);return ce[50]=ue[0],ce[100]=ue[1],ce[200]=ue[2],ce[300]=ue[3],ce[400]=ue[4],ce[500]=ue[5],ce[600]=ue[6],ce[700]=ue[7],ce[800]=ue[8],ce[900]=ue[9],ue[10]&&(ce.A100=ue[10],ce.A200=ue[11],ce.A400=ue[12],ce.A700=ue[13]),ce}u.mui={},u.flat={},u.mui.red=o("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),u.mui.pink=o("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),u.mui.purple=o("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),u.mui.deeppurple=o("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),u.mui.indigo=o("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),u.mui.blue=o("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),u.mui.lightblue=o("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),u.mui.cyan=o("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),u.mui.teal=o("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),u.mui.green=o("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),u.mui.lightgreen=o("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),u.mui.lime=o("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),u.mui.yellow=o("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),u.mui.amber=o("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),u.mui.orange=o("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),u.mui.deeporange=o("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),u.mui.brown=o("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),u.mui.grey=o("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),u.mui.bluegrey=o("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),u.flat.turquoise="#1abc9c",u.flat.greensea="#16a085",u.flat.sunflower="#f1c40f",u.flat.orange="#f39c12",u.flat.emerland="#2ecc71",u.flat.nephritis="#27ae60",u.flat.carrot="#e67e22",u.flat.pumpkin="#d35400",u.flat.peterriver="#3498db",u.flat.belizehole="#2980b9",u.flat.alizarin="#e74c3c",u.flat.pomegranate="#c0392b",u.flat.amethyst="#9b59b6",u.flat.wisteria="#8e44ad",u.flat.clouds="#ecf0f1",u.flat.silver="#bdc3c7",u.flat.wetasphalt="#34495e",u.flat.midnightblue="#2c3e50",u.flat.concrete="#95a5a6",u.flat.asbestos="#7f8c8d",u.importMUIColors=function(){for(var ue in u.mui)u.mui.hasOwnProperty(ue)&&(J[ue]=u.mui[ue])}}),q}),function(J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J():"function"==typeof define&&define.amd?define([],J):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rdfstore=J()}(function(){var define,module,exports;return function J(re,le,q){function u(e,o){if(!le[e]){if(!re[e]){var l="function"==typeof require&&require;if(!o&&l)return l(e,!0);if(F)return F(e,!0);var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}var m=le[e]={exports:{}};re[e][0].call(m.exports,function(c){return u(re[e][1][c]||c)},m,m.exports,J,re,le,q)}return le[e].exports}for(var F="function"==typeof require&&require,v=0;v<q.length;v++)u(q[v]);return u}({1:[function(J,re,le){(function(q){(function(){"use strict";var u=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],F="undefined"==typeof globalThis?q:globalThis;re.exports=function(){for(var v=[],e=0;e<u.length;e++)"function"==typeof F[u[e]]&&(v[v.length]=u[e]);return v}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(J,re,le){"use strict";le.byteLength=function(m){var c=l(m),k=c[0],y=c[1];return 3*(k+y)/4-y},le.toByteArray=function(m){var c,k,E,y=l(m),f=y[0],w=y[1],T=new F(3*(f+(E=w))/4-E),I=0,W=w>0?f-4:f;for(k=0;k<W;k+=4)c=u[m.charCodeAt(k)]<<18|u[m.charCodeAt(k+1)]<<12|u[m.charCodeAt(k+2)]<<6|u[m.charCodeAt(k+3)],T[I++]=c>>16&255,T[I++]=c>>8&255,T[I++]=255&c;return 2===w&&(c=u[m.charCodeAt(k)]<<2|u[m.charCodeAt(k+1)]>>4,T[I++]=255&c),1===w&&(c=u[m.charCodeAt(k)]<<10|u[m.charCodeAt(k+1)]<<4|u[m.charCodeAt(k+2)]>>2,T[I++]=c>>8&255,T[I++]=255&c),T},le.fromByteArray=function(m){for(var c,k=m.length,y=k%3,f=[],w=0,T=k-y;w<T;w+=16383)f.push(d(m,w,w+16383>T?T:w+16383));return 1===y?(c=m[k-1],f.push(q[c>>2]+q[c<<4&63]+"==")):2===y&&(c=(m[k-2]<<8)+m[k-1],f.push(q[c>>10]+q[c>>4&63]+q[c<<2&63]+"=")),f.join("")};for(var q=[],u=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=v.length;e<o;++e)q[e]=v[e],u[v.charCodeAt(e)]=e;function l(m){var c=m.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=m.indexOf("=");return-1===k&&(k=c),[k,k===c?0:4-k%4]}function d(m,c,k){for(var y,f,w=[],T=c;T<k;T+=3)y=(m[T]<<16&16711680)+(m[T+1]<<8&65280)+(255&m[T+2]),w.push(q[(f=y)>>18&63]+q[f>>12&63]+q[f>>6&63]+q[63&f]);return w.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],3:[function(J,re,le){},{}],4:[function(J,re,le){arguments[4][3][0].apply(le,arguments)},{dup:3}],5:[function(J,re,le){(function(q){(function(){"use strict";var u=J("base64-js"),F=J("ieee754");le.Buffer=o,le.SlowBuffer=function(M){return+M!=M&&(M=0),o.alloc(+M)},le.INSPECT_MAX_BYTES=50;var v=2147483647;function e(M){if(M>v)throw new RangeError('The value "'+M+'" is invalid for option "size"');var P=new Uint8Array(M);return P.__proto__=o.prototype,P}function o(M,P,Y){if("number"==typeof M){if("string"==typeof P)throw new TypeError('The "string" argument must be of type string. Received type number');return m(M)}return l(M,P,Y)}function l(M,P,Y){if("string"==typeof M)return function(ye,De){if("string"==typeof De&&""!==De||(De="utf8"),!o.isEncoding(De))throw new TypeError("Unknown encoding: "+De);var Be=0|y(ye,De),Xe=e(Be),ot=Xe.write(ye,De);return ot!==Be&&(Xe=Xe.slice(0,ot)),Xe}(M,P);if(ArrayBuffer.isView(M))return c(M);if(null==M)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(He(M,ArrayBuffer)||M&&He(M.buffer,ArrayBuffer))return function(ye,De,Be){if(De<0||ye.byteLength<De)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<De+(Be||0))throw new RangeError('"length" is outside of buffer bounds');var Xe;return(Xe=void 0===De&&void 0===Be?new Uint8Array(ye):void 0===Be?new Uint8Array(ye,De):new Uint8Array(ye,De,Be)).__proto__=o.prototype,Xe}(M,P,Y);if("number"==typeof M)throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=M.valueOf&&M.valueOf();if(null!=pe&&pe!==M)return o.from(pe,P,Y);var Ae=function(ye){if(o.isBuffer(ye)){var De=0|k(ye.length),Be=e(De);return 0===Be.length||ye.copy(Be,0,0,De),Be}return void 0!==ye.length?"number"!=typeof ye.length||Je(ye.length)?e(0):c(ye):"Buffer"===ye.type&&Array.isArray(ye.data)?c(ye.data):void 0}(M);if(Ae)return Ae;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof M[Symbol.toPrimitive])return o.from(M[Symbol.toPrimitive]("string"),P,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function d(M){if("number"!=typeof M)throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function m(M){return d(M),e(M<0?0:0|k(M))}function c(M){for(var P=M.length<0?0:0|k(M.length),Y=e(P),pe=0;pe<P;pe+=1)Y[pe]=255&M[pe];return Y}function k(M){if(M>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|M}function y(M,P){if(o.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||He(M,ArrayBuffer))return M.byteLength;if("string"!=typeof M)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var Y=M.length,pe=arguments.length>2&&!0===arguments[2];if(!pe&&0===Y)return 0;for(var Ae=!1;;)switch(P){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return Se(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Y;case"hex":return Y>>>1;case"base64":return be(M).length;default:if(Ae)return pe?-1:Se(M).length;P=(""+P).toLowerCase(),Ae=!0}}function f(M,P,Y){var pe=M[P];M[P]=M[Y],M[Y]=pe}function w(M,P,Y,pe,Ae){if(0===M.length)return-1;if("string"==typeof Y?(pe=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),Je(Y=+Y)&&(Y=Ae?0:M.length-1),Y<0&&(Y=M.length+Y),Y>=M.length){if(Ae)return-1;Y=M.length-1}else if(Y<0){if(!Ae)return-1;Y=0}if("string"==typeof P&&(P=o.from(P,pe)),o.isBuffer(P))return 0===P.length?-1:T(M,P,Y,pe,Ae);if("number"==typeof P)return P&=255,"function"==typeof Uint8Array.prototype.indexOf?Ae?Uint8Array.prototype.indexOf.call(M,P,Y):Uint8Array.prototype.lastIndexOf.call(M,P,Y):T(M,[P],Y,pe,Ae);throw new TypeError("val must be string, number or Buffer")}function T(M,P,Y,pe,Ae){var ye,De=1,Be=M.length,Xe=P.length;if(void 0!==pe&&("ucs2"===(pe=String(pe).toLowerCase())||"ucs-2"===pe||"utf16le"===pe||"utf-16le"===pe)){if(M.length<2||P.length<2)return-1;De=2,Be/=2,Xe/=2,Y/=2}function ot(Ee,Re){return 1===De?Ee[Re]:Ee.readUInt16BE(Re*De)}if(Ae){var ct=-1;for(ye=Y;ye<Be;ye++)if(ot(M,ye)===ot(P,-1===ct?0:ye-ct)){if(-1===ct&&(ct=ye),ye-ct+1===Xe)return ct*De}else-1!==ct&&(ye-=ye-ct),ct=-1}else for(Y+Xe>Be&&(Y=Be-Xe),ye=Y;ye>=0;ye--){for(var It=!0,jt=0;jt<Xe;jt++)if(ot(M,ye+jt)!==ot(P,jt)){It=!1;break}if(It)return ye}return-1}function I(M,P,Y,pe){Y=Number(Y)||0;var Ae=M.length-Y;pe?(pe=Number(pe))>Ae&&(pe=Ae):pe=Ae;var ye=P.length;pe>ye/2&&(pe=ye/2);for(var De=0;De<pe;++De){var Be=parseInt(P.substr(2*De,2),16);if(Je(Be))return De;M[Y+De]=Be}return De}function W(M,P,Y,pe){return Pe(Se(P,M.length-Y),M,Y,pe)}function B(M,P,Y,pe){return Pe(function(Ae){for(var ye=[],De=0;De<Ae.length;++De)ye.push(255&Ae.charCodeAt(De));return ye}(P),M,Y,pe)}function L(M,P,Y,pe){return B(M,P,Y,pe)}function E(M,P,Y,pe){return Pe(be(P),M,Y,pe)}function D(M,P,Y,pe){return Pe(function(Ae,ye){for(var De,Be,Xe,ot=[],ct=0;ct<Ae.length&&!((ye-=2)<0);++ct)Be=(De=Ae.charCodeAt(ct))>>8,Xe=De%256,ot.push(Xe),ot.push(Be);return ot}(P,M.length-Y),M,Y,pe)}function G(M,P,Y){return 0===P&&Y===M.length?u.fromByteArray(M):u.fromByteArray(M.slice(P,Y))}function K(M,P,Y){Y=Math.min(M.length,Y);for(var pe=[],Ae=P;Ae<Y;){var ye,De,Be,Xe,ot=M[Ae],ct=null,It=ot>239?4:ot>223?3:ot>191?2:1;if(Ae+It<=Y)switch(It){case 1:ot<128&&(ct=ot);break;case 2:128==(192&(ye=M[Ae+1]))&&(Xe=(31&ot)<<6|63&ye)>127&&(ct=Xe);break;case 3:ye=M[Ae+1],De=M[Ae+2],128==(192&ye)&&128==(192&De)&&(Xe=(15&ot)<<12|(63&ye)<<6|63&De)>2047&&(Xe<55296||Xe>57343)&&(ct=Xe);break;case 4:ye=M[Ae+1],De=M[Ae+2],Be=M[Ae+3],128==(192&ye)&&128==(192&De)&&128==(192&Be)&&(Xe=(15&ot)<<18|(63&ye)<<12|(63&De)<<6|63&Be)>65535&&Xe<1114112&&(ct=Xe)}null===ct?(ct=65533,It=1):ct>65535&&(ct-=65536,pe.push(ct>>>10&1023|55296),ct=56320|1023&ct),pe.push(ct),Ae+=It}return function(jt){var Ee=jt.length;if(Ee<=H)return String.fromCharCode.apply(String,jt);for(var Re="",je=0;je<Ee;)Re+=String.fromCharCode.apply(String,jt.slice(je,je+=H));return Re}(pe)}le.kMaxLength=v,o.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1);return M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===M.foo()}catch(P){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(M,P,Y){return l(M,P,Y)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(M,P,Y){return Ae=P,ye=Y,d(pe=M),pe<=0?e(pe):void 0!==Ae?"string"==typeof ye?e(pe).fill(Ae,ye):e(pe).fill(Ae):e(pe);var pe,Ae,ye},o.allocUnsafe=function(M){return m(M)},o.allocUnsafeSlow=function(M){return m(M)},o.isBuffer=function(M){return null!=M&&!0===M._isBuffer&&M!==o.prototype},o.compare=function(M,P){if(He(M,Uint8Array)&&(M=o.from(M,M.offset,M.byteLength)),He(P,Uint8Array)&&(P=o.from(P,P.offset,P.byteLength)),!o.isBuffer(M)||!o.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===P)return 0;for(var Y=M.length,pe=P.length,Ae=0,ye=Math.min(Y,pe);Ae<ye;++Ae)if(M[Ae]!==P[Ae]){Y=M[Ae],pe=P[Ae];break}return Y<pe?-1:pe<Y?1:0},o.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(M,P){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(0===M.length)return o.alloc(0);var Y;if(void 0===P)for(P=0,Y=0;Y<M.length;++Y)P+=M[Y].length;var pe=o.allocUnsafe(P),Ae=0;for(Y=0;Y<M.length;++Y){var ye=M[Y];if(He(ye,Uint8Array)&&(ye=o.from(ye)),!o.isBuffer(ye))throw new TypeError('"list" argument must be an Array of Buffers');ye.copy(pe,Ae),Ae+=ye.length}return pe},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<M;P+=2)f(this,P,P+1);return this},o.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<M;P+=4)f(this,P,P+3),f(this,P+1,P+2);return this},o.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<M;P+=8)f(this,P,P+7),f(this,P+1,P+6),f(this,P+2,P+5),f(this,P+3,P+4);return this},o.prototype.toString=function(){var M=this.length;return 0===M?"":0===arguments.length?K(this,0,M):function(P,Y,pe){var Ae=!1;if((void 0===Y||Y<0)&&(Y=0),Y>this.length||((void 0===pe||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(Y>>>=0))return"";for(P||(P="utf8");;)switch(P){case"hex":return ce(this,Y,pe);case"utf8":case"utf-8":return K(this,Y,pe);case"ascii":return ie(this,Y,pe);case"latin1":case"binary":return ue(this,Y,pe);case"base64":return G(this,Y,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,Y,pe);default:if(Ae)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),Ae=!0}}.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(M){if(!o.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||0===o.compare(this,M)},o.prototype.inspect=function(){var M="",P=le.INSPECT_MAX_BYTES;return M=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(M+=" ... "),"<Buffer "+M+">"},o.prototype.compare=function(M,P,Y,pe,Ae){if(He(M,Uint8Array)&&(M=o.from(M,M.offset,M.byteLength)),!o.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(void 0===P&&(P=0),void 0===Y&&(Y=M?M.length:0),void 0===pe&&(pe=0),void 0===Ae&&(Ae=this.length),P<0||Y>M.length||pe<0||Ae>this.length)throw new RangeError("out of range index");if(pe>=Ae&&P>=Y)return 0;if(pe>=Ae)return-1;if(P>=Y)return 1;if(this===M)return 0;for(var ye=(Ae>>>=0)-(pe>>>=0),De=(Y>>>=0)-(P>>>=0),Be=Math.min(ye,De),Xe=this.slice(pe,Ae),ot=M.slice(P,Y),ct=0;ct<Be;++ct)if(Xe[ct]!==ot[ct]){ye=Xe[ct],De=ot[ct];break}return ye<De?-1:De<ye?1:0},o.prototype.includes=function(M,P,Y){return-1!==this.indexOf(M,P,Y)},o.prototype.indexOf=function(M,P,Y){return w(this,M,P,Y,!0)},o.prototype.lastIndexOf=function(M,P,Y){return w(this,M,P,Y,!1)},o.prototype.write=function(M,P,Y,pe){if(void 0===P)pe="utf8",Y=this.length,P=0;else if(void 0===Y&&"string"==typeof P)pe=P,Y=this.length,P=0;else{if(!isFinite(P))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");P>>>=0,isFinite(Y)?(Y>>>=0,void 0===pe&&(pe="utf8")):(pe=Y,Y=void 0)}var Ae=this.length-P;if((void 0===Y||Y>Ae)&&(Y=Ae),M.length>0&&(Y<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var ye=!1;;)switch(pe){case"hex":return I(this,M,P,Y);case"utf8":case"utf-8":return W(this,M,P,Y);case"ascii":return B(this,M,P,Y);case"latin1":case"binary":return L(this,M,P,Y);case"base64":return E(this,M,P,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,M,P,Y);default:if(ye)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),ye=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;function ie(M,P,Y){var pe="";Y=Math.min(M.length,Y);for(var Ae=P;Ae<Y;++Ae)pe+=String.fromCharCode(127&M[Ae]);return pe}function ue(M,P,Y){var pe="";Y=Math.min(M.length,Y);for(var Ae=P;Ae<Y;++Ae)pe+=String.fromCharCode(M[Ae]);return pe}function ce(M,P,Y){var pe=M.length;(!P||P<0)&&(P=0),(!Y||Y<0||Y>pe)&&(Y=pe);for(var Ae="",ye=P;ye<Y;++ye)Ae+=Ne(M[ye]);return Ae}function xe(M,P,Y){for(var pe=M.slice(P,Y),Ae="",ye=0;ye<pe.length;ye+=2)Ae+=String.fromCharCode(pe[ye]+256*pe[ye+1]);return Ae}function oe(M,P,Y){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if(M+P>Y)throw new RangeError("Trying to access beyond buffer length")}function fe(M,P,Y,pe,Ae,ye){if(!o.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>Ae||P<ye)throw new RangeError('"value" argument is out of bounds');if(Y+pe>M.length)throw new RangeError("Index out of range")}function ee(M,P,Y,pe,Ae,ye){if(Y+pe>M.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function de(M,P,Y,pe,Ae){return P=+P,Y>>>=0,Ae||ee(M,0,Y,4),F.write(M,P,Y,pe,23,4),Y+4}function ve(M,P,Y,pe,Ae){return P=+P,Y>>>=0,Ae||ee(M,0,Y,8),F.write(M,P,Y,pe,52,8),Y+8}o.prototype.slice=function(M,P){var Y=this.length;(M=~~M)<0?(M+=Y)<0&&(M=0):M>Y&&(M=Y),(P=void 0===P?Y:~~P)<0?(P+=Y)<0&&(P=0):P>Y&&(P=Y),P<M&&(P=M);var pe=this.subarray(M,P);return pe.__proto__=o.prototype,pe},o.prototype.readUIntLE=function(M,P,Y){M>>>=0,P>>>=0,Y||oe(M,P,this.length);for(var pe=this[M],Ae=1,ye=0;++ye<P&&(Ae*=256);)pe+=this[M+ye]*Ae;return pe},o.prototype.readUIntBE=function(M,P,Y){M>>>=0,P>>>=0,Y||oe(M,P,this.length);for(var pe=this[M+--P],Ae=1;P>0&&(Ae*=256);)pe+=this[M+--P]*Ae;return pe},o.prototype.readUInt8=function(M,P){return M>>>=0,P||oe(M,1,this.length),this[M]},o.prototype.readUInt16LE=function(M,P){return M>>>=0,P||oe(M,2,this.length),this[M]|this[M+1]<<8},o.prototype.readUInt16BE=function(M,P){return M>>>=0,P||oe(M,2,this.length),this[M]<<8|this[M+1]},o.prototype.readUInt32LE=function(M,P){return M>>>=0,P||oe(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},o.prototype.readUInt32BE=function(M,P){return M>>>=0,P||oe(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},o.prototype.readIntLE=function(M,P,Y){M>>>=0,P>>>=0,Y||oe(M,P,this.length);for(var pe=this[M],Ae=1,ye=0;++ye<P&&(Ae*=256);)pe+=this[M+ye]*Ae;return pe>=(Ae*=128)&&(pe-=Math.pow(2,8*P)),pe},o.prototype.readIntBE=function(M,P,Y){M>>>=0,P>>>=0,Y||oe(M,P,this.length);for(var pe=P,Ae=1,ye=this[M+--pe];pe>0&&(Ae*=256);)ye+=this[M+--pe]*Ae;return ye>=(Ae*=128)&&(ye-=Math.pow(2,8*P)),ye},o.prototype.readInt8=function(M,P){return M>>>=0,P||oe(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},o.prototype.readInt16LE=function(M,P){M>>>=0,P||oe(M,2,this.length);var Y=this[M]|this[M+1]<<8;return 32768&Y?4294901760|Y:Y},o.prototype.readInt16BE=function(M,P){M>>>=0,P||oe(M,2,this.length);var Y=this[M+1]|this[M]<<8;return 32768&Y?4294901760|Y:Y},o.prototype.readInt32LE=function(M,P){return M>>>=0,P||oe(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},o.prototype.readInt32BE=function(M,P){return M>>>=0,P||oe(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},o.prototype.readFloatLE=function(M,P){return M>>>=0,P||oe(M,4,this.length),F.read(this,M,!0,23,4)},o.prototype.readFloatBE=function(M,P){return M>>>=0,P||oe(M,4,this.length),F.read(this,M,!1,23,4)},o.prototype.readDoubleLE=function(M,P){return M>>>=0,P||oe(M,8,this.length),F.read(this,M,!0,52,8)},o.prototype.readDoubleBE=function(M,P){return M>>>=0,P||oe(M,8,this.length),F.read(this,M,!1,52,8)},o.prototype.writeUIntLE=function(M,P,Y,pe){M=+M,P>>>=0,Y>>>=0,pe||fe(this,M,P,Y,Math.pow(2,8*Y)-1,0);var Ae=1,ye=0;for(this[P]=255&M;++ye<Y&&(Ae*=256);)this[P+ye]=M/Ae&255;return P+Y},o.prototype.writeUIntBE=function(M,P,Y,pe){M=+M,P>>>=0,Y>>>=0,pe||fe(this,M,P,Y,Math.pow(2,8*Y)-1,0);var Ae=Y-1,ye=1;for(this[P+Ae]=255&M;--Ae>=0&&(ye*=256);)this[P+Ae]=M/ye&255;return P+Y},o.prototype.writeUInt8=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,1,255,0),this[P]=255&M,P+1},o.prototype.writeUInt16LE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,2,65535,0),this[P]=255&M,this[P+1]=M>>>8,P+2},o.prototype.writeUInt16BE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,2,65535,0),this[P]=M>>>8,this[P+1]=255&M,P+2},o.prototype.writeUInt32LE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,4,4294967295,0),this[P+3]=M>>>24,this[P+2]=M>>>16,this[P+1]=M>>>8,this[P]=255&M,P+4},o.prototype.writeUInt32BE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,4,4294967295,0),this[P]=M>>>24,this[P+1]=M>>>16,this[P+2]=M>>>8,this[P+3]=255&M,P+4},o.prototype.writeIntLE=function(M,P,Y,pe){if(M=+M,P>>>=0,!pe){var Ae=Math.pow(2,8*Y-1);fe(this,M,P,Y,Ae-1,-Ae)}var ye=0,De=1,Be=0;for(this[P]=255&M;++ye<Y&&(De*=256);)M<0&&0===Be&&0!==this[P+ye-1]&&(Be=1),this[P+ye]=(M/De>>0)-Be&255;return P+Y},o.prototype.writeIntBE=function(M,P,Y,pe){if(M=+M,P>>>=0,!pe){var Ae=Math.pow(2,8*Y-1);fe(this,M,P,Y,Ae-1,-Ae)}var ye=Y-1,De=1,Be=0;for(this[P+ye]=255&M;--ye>=0&&(De*=256);)M<0&&0===Be&&0!==this[P+ye+1]&&(Be=1),this[P+ye]=(M/De>>0)-Be&255;return P+Y},o.prototype.writeInt8=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,1,127,-128),M<0&&(M=255+M+1),this[P]=255&M,P+1},o.prototype.writeInt16LE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,2,32767,-32768),this[P]=255&M,this[P+1]=M>>>8,P+2},o.prototype.writeInt16BE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,2,32767,-32768),this[P]=M>>>8,this[P+1]=255&M,P+2},o.prototype.writeInt32LE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,4,2147483647,-2147483648),this[P]=255&M,this[P+1]=M>>>8,this[P+2]=M>>>16,this[P+3]=M>>>24,P+4},o.prototype.writeInt32BE=function(M,P,Y){return M=+M,P>>>=0,Y||fe(this,M,P,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[P]=M>>>24,this[P+1]=M>>>16,this[P+2]=M>>>8,this[P+3]=255&M,P+4},o.prototype.writeFloatLE=function(M,P,Y){return de(this,M,P,!0,Y)},o.prototype.writeFloatBE=function(M,P,Y){return de(this,M,P,!1,Y)},o.prototype.writeDoubleLE=function(M,P,Y){return ve(this,M,P,!0,Y)},o.prototype.writeDoubleBE=function(M,P,Y){return ve(this,M,P,!1,Y)},o.prototype.copy=function(M,P,Y,pe){if(!o.isBuffer(M))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),pe||0===pe||(pe=this.length),P>=M.length&&(P=M.length),P||(P=0),pe>0&&pe<Y&&(pe=Y),pe===Y||0===M.length||0===this.length)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),M.length-P<pe-Y&&(pe=M.length-P+Y);var Ae=pe-Y;if(this===M&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(P,Y,pe);else if(this===M&&Y<P&&P<pe)for(var ye=Ae-1;ye>=0;--ye)M[ye+P]=this[ye+Y];else Uint8Array.prototype.set.call(M,this.subarray(Y,pe),P);return Ae},o.prototype.fill=function(M,P,Y,pe){if("string"==typeof M){if("string"==typeof P?(pe=P,P=0,Y=this.length):"string"==typeof Y&&(pe=Y,Y=this.length),void 0!==pe&&"string"!=typeof pe)throw new TypeError("encoding must be a string");if("string"==typeof pe&&!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(1===M.length){var Ae=M.charCodeAt(0);("utf8"===pe&&Ae<128||"latin1"===pe)&&(M=Ae)}}else"number"==typeof M&&(M&=255);if(P<0||this.length<P||this.length<Y)throw new RangeError("Out of range index");if(Y<=P)return this;var ye;if(P>>>=0,Y=void 0===Y?this.length:Y>>>0,M||(M=0),"number"==typeof M)for(ye=P;ye<Y;++ye)this[ye]=M;else{var De=o.isBuffer(M)?M:o.from(M,pe),Be=De.length;if(0===Be)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ye=0;ye<Y-P;++ye)this[ye+P]=De[ye%Be]}return this};var Fe=/[^+/0-9A-Za-z-_]/g;function Ne(M){return M<16?"0"+M.toString(16):M.toString(16)}function Se(M,P){var Y;P=P||1/0;for(var pe=M.length,Ae=null,ye=[],De=0;De<pe;++De){if((Y=M.charCodeAt(De))>55295&&Y<57344){if(!Ae){if(Y>56319){(P-=3)>-1&&ye.push(239,191,189);continue}if(De+1===pe){(P-=3)>-1&&ye.push(239,191,189);continue}Ae=Y;continue}if(Y<56320){(P-=3)>-1&&ye.push(239,191,189),Ae=Y;continue}Y=65536+(Ae-55296<<10|Y-56320)}else Ae&&(P-=3)>-1&&ye.push(239,191,189);if(Ae=null,Y<128){if((P-=1)<0)break;ye.push(Y)}else if(Y<2048){if((P-=2)<0)break;ye.push(Y>>6|192,63&Y|128)}else if(Y<65536){if((P-=3)<0)break;ye.push(Y>>12|224,Y>>6&63|128,63&Y|128)}else{if(!(Y<1114112))throw new Error("Invalid code point");if((P-=4)<0)break;ye.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,63&Y|128)}}return ye}function be(M){return u.toByteArray(function(P){if((P=(P=P.split("=")[0]).trim().replace(Fe,"")).length<2)return"";for(;P.length%4!=0;)P+="=";return P}(M))}function Pe(M,P,Y,pe){for(var Ae=0;Ae<pe&&!(Ae+Y>=P.length||Ae>=M.length);++Ae)P[Ae+Y]=M[Ae];return Ae}function He(M,P){return M instanceof P||null!=M&&null!=M.constructor&&null!=M.constructor.name&&M.constructor.name===P.name}function Je(M){return M!=M}}).call(this)}).call(this,J("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:21}],6:[function(J,re,le){re.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],7:[function(J,re,le){"use strict";var q=J("get-intrinsic"),u=J("./"),F=u(q("String.prototype.indexOf"));re.exports=function(v,e){var o=q(v,!!e);return"function"==typeof o&&F(v,".prototype.")>-1?u(o):o}},{"./":8,"get-intrinsic":15}],8:[function(J,re,le){"use strict";var q=J("function-bind"),u=J("get-intrinsic"),F=u("%Function.prototype.apply%"),v=u("%Function.prototype.call%"),e=u("%Reflect.apply%",!0)||q.call(v,F),o=u("%Object.getOwnPropertyDescriptor%",!0),l=u("%Object.defineProperty%",!0),d=u("%Math.max%");if(l)try{l({},"a",{value:1})}catch(c){l=null}re.exports=function(c){var k=e(q,v,arguments);return o&&l&&o(k,"length").configurable&&l(k,"length",{value:1+d(0,c.length-(arguments.length-1))}),k};var m=function(){return e(q,F,arguments)};l?l(re.exports,"apply",{value:m}):re.exports.apply=m},{"function-bind":14,"get-intrinsic":15}],9:[function(J,re,le){"use strict";re.exports=function q(u){return null===u||"object"!=typeof u||null!=u.toJSON?JSON.stringify(u):Array.isArray(u)?"["+u.reduce((F,v,e)=>F+(0===e?"":",")+q(void 0===v||"symbol"==typeof v?null:v),"")+"]":"{"+Object.keys(u).sort().reduce((F,v,e)=>void 0===u[v]||"symbol"==typeof u[v]?F:F+(0===F.length?"":",")+q(v)+":"+q(u[v]),"")+"}"}},{}],10:[function(J,re,le){"use strict";var q=J("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(q)try{q([],"length")}catch(u){q=null}re.exports=q},{"get-intrinsic":15}],11:[function(J,re,le){"use strict";var q,u="object"==typeof Reflect?Reflect:null,F=u&&"function"==typeof u.apply?u.apply:function(T,I,W){return Function.prototype.apply.call(T,I,W)};q=u&&"function"==typeof u.ownKeys?u.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var v=Number.isNaN||function(T){return T!=T};function e(){e.init.call(this)}re.exports=e,re.exports.once=function(T,I){return new Promise(function(W,B){function L(D){T.removeListener(I,E),B(D)}function E(){"function"==typeof T.removeListener&&T.removeListener("error",L),W([].slice.call(arguments))}var D,G;w(T,I,E,{once:!0}),"error"!==I&&(G=L,"function"==typeof(D=T).on&&w(D,"error",G,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function l(T){if("function"!=typeof T)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function d(T){return void 0===T._maxListeners?e.defaultMaxListeners:T._maxListeners}function m(T,I,W,B){var L,E,D,G;if(l(W),void 0===(E=T._events)?(E=T._events=Object.create(null),T._eventsCount=0):(void 0!==E.newListener&&(T.emit("newListener",I,W.listener?W.listener:W),E=T._events),D=E[I]),void 0===D)D=E[I]=W,++T._eventsCount;else if("function"==typeof D?D=E[I]=B?[W,D]:[D,W]:B?D.unshift(W):D.push(W),(L=d(T))>0&&D.length>L&&!D.warned){D.warned=!0;var K=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");K.name="MaxListenersExceededWarning",K.emitter=T,K.type=I,K.count=D.length,G=K,console&&console.warn&&console.warn(G)}return T}function c(T,I,W){var B={fired:!1,wrapFn:void 0,target:T,type:I,listener:W},L=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(B);return L.listener=W,B.wrapFn=L,L}function k(T,I,W){var B=T._events;if(void 0===B)return[];var L=B[I];return void 0===L?[]:"function"==typeof L?W?[L.listener||L]:[L]:W?function(E){for(var D=new Array(E.length),G=0;G<D.length;++G)D[G]=E[G].listener||E[G];return D}(L):f(L,L.length)}function y(T){var I=this._events;if(void 0!==I){var W=I[T];if("function"==typeof W)return 1;if(void 0!==W)return W.length}return 0}function f(T,I){for(var W=new Array(I),B=0;B<I;++B)W[B]=T[B];return W}function w(T,I,W,B){if("function"==typeof T.on)B.once?T.once(I,W):T.on(I,W);else{if("function"!=typeof T.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(I,function L(E){B.once&&T.removeEventListener(I,L),W(E)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if("number"!=typeof T||T<0||v(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(T){if("number"!=typeof T||T<0||v(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},e.prototype.getMaxListeners=function(){return d(this)},e.prototype.emit=function(T){for(var I=[],W=1;W<arguments.length;W++)I.push(arguments[W]);var B="error"===T,L=this._events;if(void 0!==L)B=B&&void 0===L.error;else if(!B)return!1;if(B){var E;if(I.length>0&&(E=I[0]),E instanceof Error)throw E;var D=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw D.context=E,D}var G=L[T];if(void 0===G)return!1;if("function"==typeof G)F(G,this,I);else{var K=G.length,H=f(G,K);for(W=0;W<K;++W)F(H[W],this,I)}return!0},e.prototype.addListener=function(T,I){return m(this,T,I,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(T,I){return m(this,T,I,!0)},e.prototype.once=function(T,I){return l(I),this.on(T,c(this,T,I)),this},e.prototype.prependOnceListener=function(T,I){return l(I),this.prependListener(T,c(this,T,I)),this},e.prototype.removeListener=function(T,I){var W,B,L,E,D;if(l(I),void 0===(B=this._events))return this;if(void 0===(W=B[T]))return this;if(W===I||W.listener===I)0==--this._eventsCount?this._events=Object.create(null):(delete B[T],B.removeListener&&this.emit("removeListener",T,W.listener||I));else if("function"!=typeof W){for(L=-1,E=W.length-1;E>=0;E--)if(W[E]===I||W[E].listener===I){D=W[E].listener,L=E;break}if(L<0)return this;0===L?W.shift():function(G,K){for(;K+1<G.length;K++)G[K]=G[K+1];G.pop()}(W,L),1===W.length&&(B[T]=W[0]),void 0!==B.removeListener&&this.emit("removeListener",T,D||I)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(T){var I,W,B;if(void 0===(W=this._events))return this;if(void 0===W.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==W[T]&&(0==--this._eventsCount?this._events=Object.create(null):delete W[T]),this;if(0===arguments.length){var L,E=Object.keys(W);for(B=0;B<E.length;++B)"removeListener"!==(L=E[B])&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(I=W[T]))this.removeListener(T,I);else if(void 0!==I)for(B=I.length-1;B>=0;B--)this.removeListener(T,I[B]);return this},e.prototype.listeners=function(T){return k(this,T,!0)},e.prototype.rawListeners=function(T){return k(this,T,!1)},e.listenerCount=function(T,I){return"function"==typeof T.listenerCount?T.listenerCount(I):y.call(T,I)},e.prototype.listenerCount=y,e.prototype.eventNames=function(){return this._eventsCount>0?q(this._events):[]}},{}],12:[function(J,re,le){"use strict";var q=J("is-callable"),u=Object.prototype.toString,F=Object.prototype.hasOwnProperty;re.exports=function(v,e,o){if(!q(e))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=o),"[object Array]"===u.call(v)?function(d,m,c){for(var k=0,y=d.length;k<y;k++)F.call(d,k)&&(null==c?m(d[k],k,d):m.call(c,d[k],k,d))}(v,e,l):"string"==typeof v?function(d,m,c){for(var k=0,y=d.length;k<y;k++)null==c?m(d.charAt(k),k,d):m.call(c,d.charAt(k),k,d)}(v,e,l):function(d,m,c){for(var k in d)F.call(d,k)&&(null==c?m(d[k],k,d):m.call(c,d[k],k,d))}(v,e,l)}},{"is-callable":24}],13:[function(J,re,le){"use strict";var q=Array.prototype.slice,u=Object.prototype.toString;re.exports=function(F){var v=this;if("function"!=typeof v||"[object Function]"!==u.call(v))throw new TypeError("Function.prototype.bind called on incompatible "+v);for(var e,o=q.call(arguments,1),l=Math.max(0,v.length-o.length),d=[],m=0;m<l;m++)d.push("$"+m);if(e=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof e){var k=v.apply(this,o.concat(q.call(arguments)));return Object(k)===k?k:this}return v.apply(F,o.concat(q.call(arguments)))}),v.prototype){var c=function(){};c.prototype=v.prototype,e.prototype=new c,c.prototype=null}return e}},{}],14:[function(J,re,le){"use strict";var q=J("./implementation");re.exports=Function.prototype.bind||q},{"./implementation":13}],15:[function(J,re,le){"use strict";var q=SyntaxError,u=Function,F=TypeError,v=function(H){try{return u('"use strict"; return ('+H+").constructor;")()}catch(ie){}},e=Object.getOwnPropertyDescriptor;if(e)try{e({},"")}catch(H){e=null}var o=function(){throw new F},l=e?function(){try{return arguments.callee,o}catch(H){try{return e(arguments,"callee").get}catch(ie){return o}}}():o,d=J("has-symbols")(),m=Object.getPrototypeOf||function(H){return H.__proto__},c={},k="undefined"==typeof Uint8Array?void 0:m(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":d?m([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":c,"%AsyncGenerator%":c,"%AsyncGeneratorFunction%":c,"%AsyncIteratorPrototype%":c,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":c,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?m(m([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?m((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?m((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?m(""[Symbol.iterator]()):void 0,"%Symbol%":d?Symbol:void 0,"%SyntaxError%":q,"%ThrowTypeError%":l,"%TypedArray%":k,"%TypeError%":F,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=J("function-bind"),T=J("has"),I=w.call(Function.call,Array.prototype.concat),W=w.call(Function.apply,Array.prototype.splice),B=w.call(Function.call,String.prototype.replace),L=w.call(Function.call,String.prototype.slice),E=w.call(Function.call,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G=/\\(\\)?/g,K=function(H,ie){var ue,ce=H;if(T(f,ce)&&(ce="%"+(ue=f[ce])[0]+"%"),T(y,ce)){var xe=y[ce];if(xe===c&&(xe=function oe(fe){var ee;if("%AsyncFunction%"===fe)ee=v("async function () {}");else if("%GeneratorFunction%"===fe)ee=v("function* () {}");else if("%AsyncGeneratorFunction%"===fe)ee=v("async function* () {}");else if("%AsyncGenerator%"===fe){var de=oe("%AsyncGeneratorFunction%");de&&(ee=de.prototype)}else if("%AsyncIteratorPrototype%"===fe){var ve=oe("%AsyncGenerator%");ve&&(ee=m(ve.prototype))}return y[fe]=ee,ee}(ce)),void 0===xe&&!ie)throw new F("intrinsic "+H+" exists, but is not available. Please file an issue!");return{alias:ue,name:ce,value:xe}}throw new q("intrinsic "+H+" does not exist!")};re.exports=function(H,ie){if("string"!=typeof H||0===H.length)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ie)throw new F('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/g,H))throw new q("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ue=function(He){var Je=L(He,0,1),M=L(He,-1);if("%"===Je&&"%"!==M)throw new q("invalid intrinsic syntax, expected closing `%`");if("%"===M&&"%"!==Je)throw new q("invalid intrinsic syntax, expected opening `%`");var P=[];return B(He,D,function(Y,pe,Ae,ye){P[P.length]=Ae?B(ye,G,"$1"):pe||Y}),P}(H),ce=ue.length>0?ue[0]:"",xe=K("%"+ce+"%",ie),oe=xe.name,fe=xe.value,ee=!1,de=xe.alias;de&&(ce=de[0],W(ue,I([0,1],de)));for(var ve=1,Fe=!0;ve<ue.length;ve+=1){var Ne=ue[ve],Se=L(Ne,0,1),be=L(Ne,-1);if(('"'===Se||"'"===Se||"`"===Se||'"'===be||"'"===be||"`"===be)&&Se!==be)throw new q("property names with quotes must have matching quotes");if("constructor"!==Ne&&Fe||(ee=!0),T(y,oe="%"+(ce+="."+Ne)+"%"))fe=y[oe];else if(null!=fe){if(!(Ne in fe)){if(!ie)throw new F("base intrinsic for "+H+" exists, but the property is not available.");return}if(e&&ve+1>=ue.length){var Pe=e(fe,Ne);fe=(Fe=!!Pe)&&"get"in Pe&&!("originalValue"in Pe.get)?Pe.get:fe[Ne]}else Fe=T(fe,Ne),fe=fe[Ne];Fe&&!ee&&(y[oe]=fe)}}return fe}},{"function-bind":14,has:19,"has-symbols":16}],16:[function(J,re,le){"use strict";var q="undefined"!=typeof Symbol&&Symbol,u=J("./shams");re.exports=function(){return"function"==typeof q&&"function"==typeof Symbol&&"symbol"==typeof q("foo")&&"symbol"==typeof Symbol("bar")&&u()}},{"./shams":17}],17:[function(J,re,le){"use strict";re.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var q={},u=Symbol("test"),F=Object(u);if("string"==typeof u||"[object Symbol]"!==Object.prototype.toString.call(u)||"[object Symbol]"!==Object.prototype.toString.call(F))return!1;for(u in q[u]=42,q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(q).length)return!1;var v=Object.getOwnPropertySymbols(q);if(1!==v.length||v[0]!==u||!Object.prototype.propertyIsEnumerable.call(q,u))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(q,u);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],18:[function(J,re,le){"use strict";var q=J("has-symbols/shams");re.exports=function(){return q()&&!!Symbol.toStringTag}},{"has-symbols/shams":17}],19:[function(J,re,le){"use strict";var q=J("function-bind");re.exports=q.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":14}],20:[function(J,re,le){var q=J("http"),u=J("url"),F=re.exports;for(var v in q)q.hasOwnProperty(v)&&(F[v]=q[v]);function e(o){if("string"==typeof o&&(o=u.parse(o)),o.protocol||(o.protocol="https:"),"https:"!==o.protocol)throw new Error('Protocol "'+o.protocol+'" not supported. Expected "https:"');return o}F.request=function(o,l){return o=e(o),q.request.call(this,o,l)},F.get=function(o,l){return o=e(o),q.get.call(this,o,l)}},{http:91,url:112}],21:[function(J,re,le){le.read=function(q,u,F,v,e){var o,l,d=8*e-v-1,m=(1<<d)-1,c=m>>1,k=-7,y=F?e-1:0,f=F?-1:1,w=q[u+y];for(y+=f,o=w&(1<<-k)-1,w>>=-k,k+=d;k>0;o=256*o+q[u+y],y+=f,k-=8);for(l=o&(1<<-k)-1,o>>=-k,k+=v;k>0;l=256*l+q[u+y],y+=f,k-=8);if(0===o)o=1-c;else{if(o===m)return l?NaN:1/0*(w?-1:1);l+=Math.pow(2,v),o-=c}return(w?-1:1)*l*Math.pow(2,o-v)},le.write=function(q,u,F,v,e,o){var l,d,m,c=8*o-e-1,k=(1<<c)-1,y=k>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,w=v?0:o-1,T=v?1:-1,I=u<0||0===u&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(d=isNaN(u)?1:0,l=k):(l=Math.floor(Math.log(u)/Math.LN2),u*(m=Math.pow(2,-l))<1&&(l--,m*=2),(u+=l+y>=1?f/m:f*Math.pow(2,1-y))*m>=2&&(l++,m/=2),l+y>=k?(d=0,l=k):l+y>=1?(d=(u*m-1)*Math.pow(2,e),l+=y):(d=u*Math.pow(2,y-1)*Math.pow(2,e),l=0));e>=8;q[F+w]=255&d,w+=T,d/=256,e-=8);for(l=l<<e|d,c+=e;c>0;q[F+w]=255&l,w+=T,l/=256,c-=8);q[F+w-T]|=128*I}},{}],22:[function(J,re,le){"function"==typeof Object.create?re.exports=function(q,u){u&&(q.super_=u,q.prototype=Object.create(u.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}))}:re.exports=function(q,u){if(u){q.super_=u;var F=function(){};F.prototype=u.prototype,q.prototype=new F,q.prototype.constructor=q}}},{}],23:[function(J,re,le){"use strict";var q=J("has-tostringtag/shams")(),u=J("call-bind/callBound")("Object.prototype.toString"),F=function(o){return!(q&&o&&"object"==typeof o&&Symbol.toStringTag in o)&&"[object Arguments]"===u(o)},v=function(o){return!!F(o)||null!==o&&"object"==typeof o&&"number"==typeof o.length&&o.length>=0&&"[object Array]"!==u(o)&&"[object Function]"===u(o.callee)},e=function(){return F(arguments)}();F.isLegacyArguments=v,re.exports=e?F:v},{"call-bind/callBound":7,"has-tostringtag/shams":18}],24:[function(J,re,le){"use strict";var q,u,F=Function.prototype.toString,v="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof v&&"function"==typeof Object.defineProperty)try{q=Object.defineProperty({},"length",{get:function(){throw u}}),u={},v(function(){throw 42},null,q)}catch(c){c!==u&&(v=null)}else v=null;var e=/^\s*class\b/,o=function(c){try{var k=F.call(c);return e.test(k)}catch(y){return!1}},l=Object.prototype.toString,d="function"==typeof Symbol&&!!Symbol.toStringTag,m="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};re.exports=v?function(c){if(c===m)return!0;if(!c||"function"!=typeof c&&"object"!=typeof c)return!1;if("function"==typeof c&&!c.prototype)return!0;try{v(c,null,q)}catch(k){if(k!==u)return!1}return!o(c)}:function(c){if(c===m)return!0;if(!c||"function"!=typeof c&&"object"!=typeof c)return!1;if("function"==typeof c&&!c.prototype)return!0;if(d)return function(y){try{return!o(y)&&(F.call(y),!0)}catch(f){return!1}}(c);if(o(c))return!1;var k=l.call(c);return"[object Function]"===k||"[object GeneratorFunction]"===k}},{}],25:[function(J,re,le){"use strict";var q,u=Object.prototype.toString,F=Function.prototype.toString,v=/^\s*(?:function)?\*/,e=J("has-tostringtag/shams")(),o=Object.getPrototypeOf;re.exports=function(l){if("function"!=typeof l)return!1;if(v.test(F.call(l)))return!0;if(!e)return"[object GeneratorFunction]"===u.call(l);if(!o)return!1;if(void 0===q){var d=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch(m){}}();q=!!d&&o(d)}return o(l)===q}},{"has-tostringtag/shams":18}],26:[function(J,re,le){(function(q){(function(){"use strict";var u=J("for-each"),F=J("available-typed-arrays"),v=J("call-bind/callBound"),e=v("Object.prototype.toString"),o=J("has-tostringtag/shams")(),l="undefined"==typeof globalThis?q:globalThis,d=F(),m=v("Array.prototype.indexOf",!0)||function(w,T){for(var I=0;I<w.length;I+=1)if(w[I]===T)return I;return-1},c=v("String.prototype.slice"),k={},y=J("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;o&&y&&f&&u(d,function(w){var T=new l[w];if(Symbol.toStringTag in T){var I=f(T),W=y(I,Symbol.toStringTag);if(!W){var B=f(I);W=y(B,Symbol.toStringTag)}k[w]=W.get}}),re.exports=function(w){if(!w||"object"!=typeof w)return!1;if(!o||!(Symbol.toStringTag in w)){var T=c(e(w),8,-1);return m(d,T)>-1}return!!y&&(I=w,W=!1,u(k,function(B,L){if(!W)try{W=B.call(I)===L}catch(E){}}),W);var I,W}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18}],27:[function(J,re,le){"use strict";const{isArray:q,isObject:u,isString:F}=J("./types"),{asArray:v}=J("./util"),{prependBase:e}=J("./url"),o=J("./JsonLdError"),l=J("./ResolvedContext");function d(m){throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:m})}re.exports=class{constructor({sharedCache:m}){this.perOpCache=new Map,this.sharedCache=m}async resolve({activeCtx:m,context:c,documentLoader:k,base:y,cycles:f=new Set}){c&&u(c)&&c["@context"]&&(c=c["@context"]),c=v(c);const w=[];for(const T of c){if(F(T)){let B=this._get(T);B||(B=await this._resolveRemoteContext({activeCtx:m,url:T,documentLoader:k,base:y,cycles:f})),q(B)?w.push(...B):w.push(B);continue}if(null===T){w.push(new l({document:null}));continue}u(T)||d(c);const I=JSON.stringify(T);let W=this._get(I);W||(W=new l({document:T}),this._cacheResolvedContext({key:I,resolved:W,tag:"static"})),w.push(W)}return w}_get(m){let c=this.perOpCache.get(m);if(!c){const k=this.sharedCache.get(m);k&&(c=k.get("static"))&&this.perOpCache.set(m,c)}return c}_cacheResolvedContext({key:m,resolved:c,tag:k}){if(this.perOpCache.set(m,c),void 0!==k){let y=this.sharedCache.get(m);y||(y=new Map,this.sharedCache.set(m,y)),y.set(k,c)}return c}async _resolveRemoteContext({activeCtx:m,url:c,documentLoader:k,base:y,cycles:f}){c=e(y,c);const{context:w,remoteDoc:T}=await this._fetchContext({activeCtx:m,url:c,documentLoader:k,cycles:f});!function W({context:B,base:L}){if(!B)return;const E=B["@context"];if(F(E))B["@context"]=e(L,E);else if(q(E))for(let D=0;D<E.length;++D){const G=E[D];F(G)?E[D]=e(L,G):u(G)&&W({context:{"@context":G},base:L})}else if(u(E))for(const D in E)W({context:E[D],base:L})}({context:w,base:y=T.documentUrl||c});const I=await this.resolve({activeCtx:m,context:w,documentLoader:k,base:y,cycles:f});return this._cacheResolvedContext({key:c,resolved:I,tag:T.tag}),I}async _fetchContext({activeCtx:m,url:c,documentLoader:k,cycles:y}){if(y.size>10)throw new o("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===m.processingMode?"loading remote context failed":"context overflow",max:10});if(y.has(c))throw new o("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===m.processingMode?"recursive context inclusion":"context overflow",url:c});let f,w;y.add(c);try{f=(w=await k(c)).document||null,F(f)&&(f=JSON.parse(f))}catch(T){throw new o("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:c,cause:T})}if(!u(f))throw new o("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:c});return f="@context"in f?{"@context":f["@context"]}:{"@context":{}},w.contextUrl&&(q(f["@context"])||(f["@context"]=[f["@context"]]),f["@context"].push(w.contextUrl)),{context:f,remoteDoc:w}}}},{"./JsonLdError":28,"./ResolvedContext":32,"./types":47,"./url":48,"./util":49}],28:[function(J,re,le){"use strict";re.exports=class extends Error{constructor(q="An unspecified JSON-LD error occurred.",u="jsonld.Error",F={}){super(q),this.name=u,this.message=q,this.details=F}}},{}],29:[function(J,re,le){"use strict";re.exports=q=>{class u{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(u,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(u.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:u}),u.compact=function(F,v){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(F,v)},u.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(F)},u.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(F)},u}},{}],30:[function(J,re,le){"use strict";re.exports=J("rdf-canonize").NQuads},{"rdf-canonize":64}],31:[function(J,re,le){"use strict";re.exports=class{constructor(){this._requests={}}wrapLoader(q){const u=this;return u._loader=q,function(){return u.add.apply(u,arguments)}}async add(q){let u=this._requests[q];if(u)return Promise.resolve(u);u=this._requests[q]=this._loader(q);try{return await u}finally{delete this._requests[q]}}}},{}],32:[function(J,re,le){"use strict";const q=J("lru-cache");re.exports=class{constructor({document:u}){this.document=u,this.cache=new q({max:10})}getProcessed(u){return this.cache.get(u)}setProcessed(u,F){this.cache.set(u,F)}}},{"lru-cache":50}],33:[function(J,re,le){"use strict";const q=J("./JsonLdError"),{isArray:u,isObject:F,isString:v,isUndefined:e}=J("./types"),{isList:o,isValue:l,isGraph:d,isSimpleGraph:m,isSubjectReference:c}=J("./graphTypes"),{expandIri:k,getContextValue:y,isKeyword:f,process:w,processingMode:T}=J("./context"),{removeBase:I,prependBase:W}=J("./url"),{REGEX_KEYWORD:B,addValue:L,asArray:E,compareShortestLeast:D}=J("./util"),G={};function K(H,ie,ue){if("@nest"!==k(H,ie,{vocab:!0},ue))throw new q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}re.exports=G,G.compact=async({activeCtx:H,activeProperty:ie=null,element:ue,options:ce={}})=>{if(u(ue)){let oe=[];for(let fe=0;fe<ue.length;++fe){const ee=await G.compact({activeCtx:H,activeProperty:ie,element:ue[fe],options:ce});null!==ee&&oe.push(ee)}return ce.compactArrays&&1===oe.length&&0===(y(H,ie,"@container")||[]).length&&(oe=oe[0]),oe}const xe=y(H,ie,"@context");if(e(xe)||(H=await w({activeCtx:H,localCtx:xe,propagate:!0,overrideProtected:!0,options:ce})),F(ue)){if(ce.link&&"@id"in ue&&ce.link.hasOwnProperty(ue["@id"])){const Se=ce.link[ue["@id"]];for(let be=0;be<Se.length;++be)if(Se[be].expanded===ue)return Se[be].compacted}if(l(ue)||c(ue)){const Se=G.compactValue({activeCtx:H,activeProperty:ie,value:ue,options:ce});return ce.link&&c(ue)&&(ce.link.hasOwnProperty(ue["@id"])||(ce.link[ue["@id"]]=[]),ce.link[ue["@id"]].push({expanded:ue,compacted:Se})),Se}if(o(ue)&&(y(H,ie,"@container")||[]).includes("@list"))return G.compact({activeCtx:H,activeProperty:ie,element:ue["@list"],options:ce});const oe="@reverse"===ie,fe={},ee=H;l(ue)||c(ue)||(H=H.revertToPreviousContext());const de=y(ee,ie,"@context");e(de)||(H=await w({activeCtx:H,localCtx:de,propagate:!0,overrideProtected:!0,options:ce})),ce.link&&"@id"in ue&&(ce.link.hasOwnProperty(ue["@id"])||(ce.link[ue["@id"]]=[]),ce.link[ue["@id"]].push({expanded:ue,compacted:fe}));let ve=ue["@type"]||[];ve.length>1&&(ve=Array.from(ve).sort());const Fe=H;for(const Se of ve){const be=G.compactIri({activeCtx:Fe,iri:Se,relativeTo:{vocab:!0}}),Pe=y(ee,be,"@context");e(Pe)||(H=await w({activeCtx:H,localCtx:Pe,options:ce,propagate:!1}))}const Ne=Object.keys(ue).sort();for(const Se of Ne){const be=ue[Se];if("@id"!==Se)if("@type"!==Se)if("@reverse"!==Se)if("@preserve"!==Se)if("@index"!==Se)if("@graph"!==Se&&"@list"!==Se&&"@included"!==Se&&f(Se)){const Pe=G.compactIri({activeCtx:H,iri:Se,relativeTo:{vocab:!0}});L(fe,Pe,be)}else{if(!u(be))throw new q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===be.length){const Pe=G.compactIri({activeCtx:H,iri:Se,value:be,relativeTo:{vocab:!0},reverse:oe}),He=H.mappings.has(Pe)?H.mappings.get(Pe)["@nest"]:null;let Je=fe;He&&(K(H,He,ce),F(fe[He])||(fe[He]={}),Je=fe[He]),L(Je,Pe,be,{propertyIsArray:!0})}for(const Pe of be){const He=G.compactIri({activeCtx:H,iri:Se,value:Pe,relativeTo:{vocab:!0},reverse:oe}),Je=H.mappings.has(He)?H.mappings.get(He)["@nest"]:null;let M=fe;Je&&(K(H,Je,ce),F(fe[Je])||(fe[Je]={}),M=fe[Je]);const P=y(H,He,"@container")||[],Y=d(Pe),pe=o(Pe);let Ae;pe?Ae=Pe["@list"]:Y&&(Ae=Pe["@graph"]);let ye=await G.compact({activeCtx:H,activeProperty:He,element:pe||Y?Ae:Pe,options:ce});if(pe){if(u(ye)||(ye=[ye]),P.includes("@list")){L(M,He,ye,{valueIsArray:!0,allowDuplicate:!0});continue}ye={[G.compactIri({activeCtx:H,iri:"@list",relativeTo:{vocab:!0}})]:ye},"@index"in Pe&&(ye[G.compactIri({activeCtx:H,iri:"@index",relativeTo:{vocab:!0}})]=Pe["@index"])}if(Y)if(P.includes("@graph")&&(P.includes("@id")||P.includes("@index")&&m(Pe))){let De;M.hasOwnProperty(He)?De=M[He]:M[He]=De={};const Be=(P.includes("@id")?Pe["@id"]:Pe["@index"])||G.compactIri({activeCtx:H,iri:"@none",relativeTo:{vocab:!0}});L(De,Be,ye,{propertyIsArray:!ce.compactArrays||P.includes("@set")})}else P.includes("@graph")&&m(Pe)?(u(ye)&&ye.length>1&&(ye={"@included":ye}),L(M,He,ye,{propertyIsArray:!ce.compactArrays||P.includes("@set")})):(u(ye)&&1===ye.length&&ce.compactArrays&&(ye=ye[0]),ye={[G.compactIri({activeCtx:H,iri:"@graph",relativeTo:{vocab:!0}})]:ye},"@id"in Pe&&(ye[G.compactIri({activeCtx:H,iri:"@id",relativeTo:{vocab:!0}})]=Pe["@id"]),"@index"in Pe&&(ye[G.compactIri({activeCtx:H,iri:"@index",relativeTo:{vocab:!0}})]=Pe["@index"]),L(M,He,ye,{propertyIsArray:!ce.compactArrays||P.includes("@set")}));else if(P.includes("@language")||P.includes("@index")||P.includes("@id")||P.includes("@type")){let De,Be;if(M.hasOwnProperty(He)?De=M[He]:M[He]=De={},P.includes("@language"))l(ye)&&(ye=ye["@value"]),Be=Pe["@language"];else if(P.includes("@index")){const Xe=y(H,He,"@index")||"@index",ot=G.compactIri({activeCtx:H,iri:Xe,relativeTo:{vocab:!0}});if("@index"===Xe)Be=Pe["@index"],delete ye[ot];else{let ct;if([Be,...ct]=E(ye[Xe]||[]),v(Be))switch(ct.length){case 0:delete ye[Xe];break;case 1:ye[Xe]=ct[0];break;default:ye[Xe]=ct}else Be=null}}else if(P.includes("@id")){const Xe=G.compactIri({activeCtx:H,iri:"@id",relativeTo:{vocab:!0}});Be=ye[Xe],delete ye[Xe]}else if(P.includes("@type")){const Xe=G.compactIri({activeCtx:H,iri:"@type",relativeTo:{vocab:!0}});let ot;switch([Be,...ot]=E(ye[Xe]||[]),ot.length){case 0:delete ye[Xe];break;case 1:ye[Xe]=ot[0];break;default:ye[Xe]=ot}1===Object.keys(ye).length&&"@id"in Pe&&(ye=await G.compact({activeCtx:H,activeProperty:He,element:{"@id":Pe["@id"]},options:ce}))}Be||(Be=G.compactIri({activeCtx:H,iri:"@none",relativeTo:{vocab:!0}})),L(De,Be,ye,{propertyIsArray:P.includes("@set")})}else{const De=!ce.compactArrays||P.includes("@set")||P.includes("@list")||u(ye)&&0===ye.length||"@list"===Se||"@graph"===Se;L(M,He,ye,{propertyIsArray:De})}}}else{if((y(H,ie,"@container")||[]).includes("@index"))continue;const Pe=G.compactIri({activeCtx:H,iri:Se,relativeTo:{vocab:!0}});L(fe,Pe,be)}else{const Pe=await G.compact({activeCtx:H,activeProperty:ie,element:be,options:ce});u(Pe)&&0===Pe.length||L(fe,Se,Pe)}else{const Pe=await G.compact({activeCtx:H,activeProperty:"@reverse",element:be,options:ce});for(const He in Pe)if(H.mappings.has(He)&&H.mappings.get(He).reverse){const Je=Pe[He],M=(y(H,He,"@container")||[]).includes("@set")||!ce.compactArrays;L(fe,He,Je,{propertyIsArray:M}),delete Pe[He]}if(Object.keys(Pe).length>0){const He=G.compactIri({activeCtx:H,iri:Se,relativeTo:{vocab:!0}});L(fe,He,Pe)}}else{let Pe=E(be).map(M=>G.compactIri({activeCtx:ee,iri:M,relativeTo:{vocab:!0}}));1===Pe.length&&(Pe=Pe[0]);const He=G.compactIri({activeCtx:H,iri:"@type",relativeTo:{vocab:!0}}),Je=(y(H,He,"@container")||[]).includes("@set")&&T(H,1.1)||u(Pe)&&0===be.length;L(fe,He,Pe,{propertyIsArray:Je})}else{let Pe=E(be).map(He=>G.compactIri({activeCtx:H,iri:He,relativeTo:{vocab:!1},base:ce.base}));1===Pe.length&&(Pe=Pe[0]),fe[G.compactIri({activeCtx:H,iri:"@id",relativeTo:{vocab:!0}})]=Pe}}return fe}return ue},G.compactIri=({activeCtx:H,iri:ie,value:ue=null,relativeTo:ce={vocab:!1},reverse:xe=!1,base:oe=null})=>{if(null===ie)return ie;H.isPropertyTermScoped&&H.previousContext&&(H=H.previousContext);const fe=H.getInverse();if(f(ie)&&ie in fe&&"@none"in fe[ie]&&"@type"in fe[ie]["@none"]&&"@none"in fe[ie]["@none"]["@type"])return fe[ie]["@none"]["@type"]["@none"];if(ce.vocab&&ie in fe){const Ne=H["@language"]||"@none",Se=[];F(ue)&&"@index"in ue&&!("@graph"in ue)&&Se.push("@index","@index@set"),F(ue)&&"@preserve"in ue&&(ue=ue["@preserve"][0]),d(ue)?("@index"in ue&&Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ue&&Se.push("@graph@id","@graph@id@set"),Se.push("@graph","@graph@set","@set"),"@index"in ue||Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ue||Se.push("@graph@id","@graph@id@set")):F(ue)&&!l(ue)&&Se.push("@id","@id@set","@type","@set@type");let be="@language",Pe="@null";if(xe)be="@type",Pe="@reverse",Se.push("@set");else if(o(ue)){"@index"in ue||Se.push("@list");const Je=ue["@list"];if(0===Je.length)be="@any",Pe="@none";else{let M=0===Je.length?Ne:null,P=null;for(let Y=0;Y<Je.length;++Y){const pe=Je[Y];let Ae="@none",ye="@none";if(l(pe)?"@direction"in pe?Ae=`${(pe["@language"]||"").toLowerCase()}_${pe["@direction"]}`:"@language"in pe?Ae=pe["@language"].toLowerCase():"@type"in pe?ye=pe["@type"]:Ae="@null":ye="@id",null===M?M=Ae:Ae!==M&&l(pe)&&(M="@none"),null===P?P=ye:ye!==P&&(P="@none"),"@none"===M&&"@none"===P)break}M=M||"@none","@none"!==(P=P||"@none")?(be="@type",Pe=P):Pe=M}}else{if(l(ue))if("@language"in ue&&!("@index"in ue)){Se.push("@language","@language@set"),Pe=ue["@language"];const Je=ue["@direction"];Je&&(Pe=`${Pe}_${Je}`)}else"@direction"in ue&&!("@index"in ue)?Pe=`_${ue["@direction"]}`:"@type"in ue&&(be="@type",Pe=ue["@type"]);else be="@type",Pe="@id";Se.push("@set")}Se.push("@none"),!F(ue)||"@index"in ue||Se.push("@index","@index@set"),l(ue)&&1===Object.keys(ue).length&&Se.push("@language","@language@set");const He=function(Je,M,P,Y,pe,Ae){null===Ae&&(Ae="@null");const ye=[];if(("@id"===Ae||"@reverse"===Ae)&&F(P)&&"@id"in P){"@reverse"===Ae&&ye.push("@reverse");const Be=G.compactIri({activeCtx:Je,iri:P["@id"],relativeTo:{vocab:!0}});Je.mappings.has(Be)&&Je.mappings.get(Be)&&Je.mappings.get(Be)["@id"]===P["@id"]?ye.push.apply(ye,["@vocab","@id"]):ye.push.apply(ye,["@id","@vocab"])}else{ye.push(Ae);const Be=ye.find(Xe=>Xe.includes("_"));Be&&ye.push(Be.replace(/^[^_]+_/,"_"))}ye.push("@none");const De=Je.inverse[M];for(const Be of Y){if(!(Be in De))continue;const Xe=De[Be][pe];for(const ot of ye)if(ot in Xe)return Xe[ot]}return null}(H,ie,ue,Se,be,Pe);if(null!==He)return He}if(ce.vocab&&"@vocab"in H){const Ne=H["@vocab"];if(0===ie.indexOf(Ne)&&ie!==Ne){const Se=ie.substr(Ne.length);if(!H.mappings.has(Se))return Se}}let ee=null;const de=[];let ve=H.fastCurieMap;const Fe=ie.length-1;for(let Ne=0;Ne<Fe&&ie[Ne]in ve;++Ne)""in(ve=ve[ie[Ne]])&&de.push(ve[""][0]);for(let Ne=de.length-1;Ne>=0;--Ne){const Se=de[Ne],be=Se.terms;for(const Pe of be){const He=Pe+":"+ie.substr(Se.iri.length);H.mappings.get(Pe)._prefix&&(!H.mappings.has(He)||null===ue&&H.mappings.get(He)["@id"]===ie)&&(null===ee||D(He,ee)<0)&&(ee=He)}}if(null!==ee)return ee;for(const[Ne,Se]of H.mappings)if(Se&&Se._prefix&&ie.startsWith(Ne+":"))throw new q(`Absolute IRI "${ie}" confused with prefix "${Ne}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:H});if(!ce.vocab){if("@base"in H){if(H["@base"]){const Ne=I(W(oe,H["@base"]),ie);return B.test(Ne)?`./${Ne}`:Ne}return ie}return I(oe,ie)}return ie},G.compactValue=({activeCtx:H,activeProperty:ie,value:ue,options:ce})=>{if(l(ue)){const ee=y(H,ie,"@type"),de=y(H,ie,"@language"),ve=y(H,ie,"@direction"),Fe=y(H,ie,"@container")||[],Ne="@index"in ue&&!Fe.includes("@index");if(!Ne&&"@none"!==ee&&(ue["@type"]===ee||"@language"in ue&&ue["@language"]===de&&"@direction"in ue&&ue["@direction"]===ve||"@language"in ue&&ue["@language"]===de||"@direction"in ue&&ue["@direction"]===ve))return ue["@value"];const Se=Object.keys(ue).length,be=1===Se||2===Se&&"@index"in ue&&!Ne,Pe="@language"in H,He=v(ue["@value"]),Je=H.mappings.has(ie)&&null===H.mappings.get(ie)["@language"];if(be&&"@none"!==ee&&(!Pe||!He||Je))return ue["@value"];const M={};return Ne&&(M[G.compactIri({activeCtx:H,iri:"@index",relativeTo:{vocab:!0}})]=ue["@index"]),"@type"in ue?M[G.compactIri({activeCtx:H,iri:"@type",relativeTo:{vocab:!0}})]=G.compactIri({activeCtx:H,iri:ue["@type"],relativeTo:{vocab:!0}}):"@language"in ue&&(M[G.compactIri({activeCtx:H,iri:"@language",relativeTo:{vocab:!0}})]=ue["@language"]),"@direction"in ue&&(M[G.compactIri({activeCtx:H,iri:"@direction",relativeTo:{vocab:!0}})]=ue["@direction"]),M[G.compactIri({activeCtx:H,iri:"@value",relativeTo:{vocab:!0}})]=ue["@value"],M}const xe=k(H,ie,{vocab:!0},ce),oe=y(H,ie,"@type"),fe=G.compactIri({activeCtx:H,iri:ue["@id"],relativeTo:{vocab:"@vocab"===oe},base:ce.base});return"@id"===oe||"@vocab"===oe||"@graph"===xe?fe:{[G.compactIri({activeCtx:H,iri:"@id",relativeTo:{vocab:!0}})]:fe}}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],34:[function(J,re,le){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u="http://www.w3.org/2001/XMLSchema#";re.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:u,XSD_BOOLEAN:u+"boolean",XSD_DOUBLE:u+"double",XSD_INTEGER:u+"integer",XSD_STRING:u+"string"}},{}],35:[function(J,re,le){"use strict";const q=J("./util"),u=J("./JsonLdError"),{isArray:F,isObject:v,isString:e,isUndefined:o}=J("./types"),{isAbsolute:l,isRelative:d,prependBase:m}=J("./url"),{handleEvent:c}=J("./events"),{REGEX_BCP47:k,REGEX_KEYWORD:y,asArray:f,compareShortestLeast:w}=J("./util"),T=new Map,I={};function W(B,L,E,D,G,K){if(null===L||!e(L)||I.isKeyword(L))return L;if(L.match(y))return null;if(D&&D.hasOwnProperty(L)&&!0!==G.get(L)&&I.createTermDefinition({activeCtx:B,localCtx:D,term:L,defined:G,options:K}),(E=E||{}).vocab){const ie=B.mappings.get(L);if(null===ie)return null;if(v(ie)&&"@id"in ie)return ie["@id"]}const H=L.indexOf(":");if(H>0){const ie=L.substr(0,H),ue=L.substr(H+1);if("_"===ie||0===ue.indexOf("//"))return L;D&&D.hasOwnProperty(ie)&&I.createTermDefinition({activeCtx:B,localCtx:D,term:ie,defined:G,options:K});const ce=B.mappings.get(ie);if(ce&&ce._prefix)return ce["@id"]+ue;if(l(L))return L}if(E.vocab&&"@vocab"in B)L=B["@vocab"]+L;else if(E.base){let ie,ue;"@base"in B?B["@base"]?(ue=m(K.base,B["@base"]),ie=m(ue,L)):(ue=B["@base"],ie=L):(ue=K.base,ie=m(K.base,L)),L=ie}return L}re.exports=I,I.process=async({activeCtx:B,localCtx:L,options:E,propagate:D=!0,overrideProtected:G=!1,cycles:K=new Set})=>{if(v(L)&&"@context"in L&&F(L["@context"])&&(L=L["@context"]),0===f(L).length)return B;const H=[],ie=[({event:oe,next:fe})=>{H.push(oe),fe()}];E.eventHandler&&ie.push(E.eventHandler);const ue=E;E=yn(Er({},E),{eventHandler:ie});const ce=await E.contextResolver.resolve({activeCtx:B,context:L,documentLoader:E.documentLoader,base:E.base});v(ce[0].document)&&"boolean"==typeof ce[0].document["@propagate"]&&(D=ce[0].document["@propagate"]);let xe=B;D||xe.previousContext||((xe=xe.clone()).previousContext=B);for(const oe of ce){let{document:fe}=oe;if(B=xe,null===fe){if(!G&&0!==Object.keys(B.protected).length)throw new u("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});xe=B=I.getInitialContext(E).clone();continue}const ee=oe.getProcessed(B);if(ee){if(ue.eventHandler)for(const ve of ee.events)c({event:ve,options:ue});xe=B=ee.context;continue}if(v(fe)&&"@context"in fe&&(fe=fe["@context"]),!v(fe))throw new u("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:fe});xe=xe.clone();const de=new Map;if("@version"in fe){if(1.1!==fe["@version"])throw new u("Unsupported JSON-LD version: "+fe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:fe});if(B.processingMode&&"json-ld-1.0"===B.processingMode)throw new u("@version: "+fe["@version"]+" not compatible with "+B.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:fe});xe.processingMode="json-ld-1.1",xe["@version"]=fe["@version"],de.set("@version",!0)}if(xe.processingMode=xe.processingMode||B.processingMode,"@base"in fe){let ve=fe["@base"];if(null!==ve&&!l(ve)){if(!d(ve))throw new u('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:fe});ve=m(xe["@base"],ve)}xe["@base"]=ve,de.set("@base",!0)}if("@vocab"in fe){const ve=fe["@vocab"];if(null===ve)delete xe["@vocab"];else{if(!e(ve))throw new u('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:fe});if(!l(ve)&&I.processingMode(xe,1))throw new u('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:fe});{const Fe=W(xe,ve,{vocab:!0,base:!0},void 0,void 0,E);l(Fe)||E.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Fe}},options:E}),xe["@vocab"]=Fe}}de.set("@vocab",!0)}if("@language"in fe){const ve=fe["@language"];if(null===ve)delete xe["@language"];else{if(!e(ve))throw new u('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:fe});ve.match(k)||E.eventHandler&&c({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ve}},options:E}),xe["@language"]=ve.toLowerCase()}de.set("@language",!0)}if("@direction"in fe){const ve=fe["@direction"];if("json-ld-1.0"===B.processingMode)throw new u("Invalid JSON-LD syntax; @direction not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:fe});if(null===ve)delete xe["@direction"];else{if("ltr"!==ve&&"rtl"!==ve)throw new u('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:fe});xe["@direction"]=ve}de.set("@direction",!0)}if("@propagate"in fe){const ve=fe["@propagate"];if("json-ld-1.0"===B.processingMode)throw new u("Invalid JSON-LD syntax; @propagate not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:fe});if("boolean"!=typeof ve)throw new u("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:L});de.set("@propagate",!0)}if("@import"in fe){const ve=fe["@import"];if("json-ld-1.0"===B.processingMode)throw new u("Invalid JSON-LD syntax; @import not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:fe});if(!e(ve))throw new u("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:L});const Fe=await E.contextResolver.resolve({activeCtx:B,context:ve,documentLoader:E.documentLoader,base:E.base});if(1!==Fe.length)throw new u("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:L});const Ne=Fe[0].getProcessed(B);if(Ne)fe=Ne;else{const Se=Fe[0].document;if("@import"in Se)throw new u("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:L});for(const be in Se)fe.hasOwnProperty(be)||(fe[be]=Se[be]);Fe[0].setProcessed(B,fe)}de.set("@import",!0)}de.set("@protected",fe["@protected"]||!1);for(const ve in fe)if(I.createTermDefinition({activeCtx:xe,localCtx:fe,term:ve,defined:de,options:E,overrideProtected:G}),v(fe[ve])&&"@context"in fe[ve]){const Fe=fe[ve]["@context"];let Ne=!0;if(e(Fe)){const Se=m(E.base,Fe);K.has(Se)?Ne=!1:K.add(Se)}if(Ne)try{await I.process({activeCtx:xe.clone(),localCtx:fe[ve]["@context"],overrideProtected:!0,options:E,cycles:K})}catch(Se){throw new u("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:fe[ve]["@context"],term:ve})}}oe.setProcessed(B,{context:xe,events:H})}return xe},I.createTermDefinition=({activeCtx:B,localCtx:L,term:E,defined:D,options:G,overrideProtected:K=!1})=>{if(D.has(E)){if(D.get(E))return;throw new u("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:L,term:E})}let H;if(D.set(E,!1),L.hasOwnProperty(E)&&(H=L[E]),"@type"===E&&v(H)&&"@set"===(H["@container"]||"@set")&&I.processingMode(B,1.1)){const ee=["@container","@id","@protected"],de=Object.keys(H);if(0===de.length||de.some(ve=>!ee.includes(ve)))throw new u("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:E})}else{if(I.isKeyword(E))throw new u("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:E});if(E.match(y))return void(G.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:E}},options:G}));if(""===E)throw new u("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:L})}const ie=B.mappings.get(E);B.mappings.has(E)&&B.mappings.delete(E);let ue=!1;if((e(H)||null===H)&&(ue=!0,H={"@id":H}),!v(H))throw new u("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:L});const ce={};B.mappings.set(E,ce),ce.reverse=!1;const xe=["@container","@id","@language","@reverse","@type"];I.processingMode(B,1.1)&&xe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const ee in H)if(!xe.includes(ee))throw new u("Invalid JSON-LD syntax; a term definition must not contain "+ee,"jsonld.SyntaxError",{code:"invalid term definition",context:L});const oe=E.indexOf(":");if(ce._termHasColon=oe>0,"@reverse"in H){if("@id"in H)throw new u("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});if("@nest"in H)throw new u("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});const ee=H["@reverse"];if(!e(ee))throw new u("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(ee.match(y))return G.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:ee}},options:G}),void(ie?B.mappings.set(E,ie):B.mappings.delete(E));const de=W(B,ee,{vocab:!0,base:!1},L,D,G);if(!l(de))throw new u("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});ce["@id"]=de,ce.reverse=!0}else if("@id"in H){let ee=H["@id"];if(ee&&!e(ee))throw new u("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(null===ee)ce["@id"]=null;else{if(!I.isKeyword(ee)&&ee.match(y))return G.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:ee}},options:G}),void(ie?B.mappings.set(E,ie):B.mappings.delete(E));if(ee!==E){if(ee=W(B,ee,{vocab:!0,base:!1},L,D,G),!l(ee)&&!I.isKeyword(ee))throw new u("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(E.match(/(?::[^:])|\//)&&W(B,E,{vocab:!0,base:!1},L,new Map(D).set(E,!0),G)!==ee)throw new u("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});ce["@id"]=ee,ce._prefix=ue&&!ce._termHasColon&&ee.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ce))if(ce._termHasColon){const ee=E.substr(0,oe);if(L.hasOwnProperty(ee)&&I.createTermDefinition({activeCtx:B,localCtx:L,term:ee,defined:D,options:G}),B.mappings.has(ee)){const de=E.substr(oe+1);ce["@id"]=B.mappings.get(ee)["@id"]+de}else ce["@id"]=E}else if("@type"===E)ce["@id"]=E;else{if(!("@vocab"in B))throw new u("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L,term:E});ce["@id"]=B["@vocab"]+E}if((!0===H["@protected"]||!0===D.get("@protected")&&!1!==H["@protected"])&&(B.protected[E]=!0,ce.protected=!0),D.set(E,!0),"@type"in H){let ee=H["@type"];if(!e(ee))throw new u("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if("@json"===ee||"@none"===ee){if(I.processingMode(B,1))throw new u(`Invalid JSON-LD syntax; an @context @type value must not be "${ee}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else if("@id"!==ee&&"@vocab"!==ee){if(ee=W(B,ee,{vocab:!0,base:!1},L,D,G),!l(ee))throw new u("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if(0===ee.indexOf("_:"))throw new u("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}ce["@type"]=ee}if("@container"in H){const ee=e(H["@container"])?[H["@container"]]:H["@container"]||[],de=["@list","@set","@index","@language"];let ve=!0;const Fe=ee.includes("@set");if(I.processingMode(B,1.1)){if(de.push("@graph","@id","@type"),ee.includes("@list")){if(1!==ee.length)throw new u("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else if(ee.includes("@graph")){if(ee.some(Ne=>"@graph"!==Ne&&"@id"!==Ne&&"@index"!==Ne&&"@set"!==Ne))throw new u("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else ve&=ee.length<=(Fe?2:1);if(ee.includes("@type")&&(ce["@type"]=ce["@type"]||"@id",!["@id","@vocab"].includes(ce["@type"])))throw new u("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else ve&=!F(H["@container"]),ve&=ee.length<=1;if(ve&=ee.every(Ne=>de.includes(Ne)),!(ve&=!(Fe&&ee.includes("@list"))))throw new u("Invalid JSON-LD syntax; @context @container value must be one of the following: "+de.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:L});if(ce.reverse&&!ee.every(Ne=>["@index","@set"].includes(Ne)))throw new u("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});ce["@container"]=ee}if("@index"in H){if(!("@container"in H)||!ce["@container"].includes("@index"))throw new u(`Invalid JSON-LD syntax; @index without @index in @container: "${H["@index"]}" on term "${E}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});if(!e(H["@index"])||0===H["@index"].indexOf("@"))throw new u(`Invalid JSON-LD syntax; @index must expand to an IRI: "${H["@index"]}" on term "${E}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});ce["@index"]=H["@index"]}if("@context"in H&&(ce["@context"]=H["@context"]),"@language"in H&&!("@type"in H)){let ee=H["@language"];if(null!==ee&&!e(ee))throw new u("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:L});null!==ee&&(ee=ee.toLowerCase()),ce["@language"]=ee}if("@prefix"in H){if(E.match(/:|\//))throw new u("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:L});if(I.isKeyword(ce["@id"]))throw new u("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:L});if("boolean"!=typeof H["@prefix"])throw new u("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:L});ce._prefix=!0===H["@prefix"]}if("@direction"in H){const ee=H["@direction"];if(null!==ee&&"ltr"!==ee&&"rtl"!==ee)throw new u('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:L});ce["@direction"]=ee}if("@nest"in H){const ee=H["@nest"];if(!e(ee)||"@nest"!==ee&&0===ee.indexOf("@"))throw new u("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:L});ce["@nest"]=ee}const fe=ce["@id"];if("@context"===fe||"@preserve"===fe)throw new u("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:L});if(ie&&ie.protected&&!K&&(B.protected[E]=!0,ce.protected=!0,!function ee(de,ve){if(!de||"object"!=typeof de||!ve||"object"!=typeof ve)return de===ve;const Fe=Array.isArray(de);if(Fe!==Array.isArray(ve))return!1;if(Fe){if(de.length!==ve.length)return!1;for(let be=0;be<de.length;++be)if(!ee(de[be],ve[be]))return!1;return!0}const Ne=Object.keys(de),Se=Object.keys(ve);if(Ne.length!==Se.length)return!1;for(const be in de){let Pe=de[be],He=ve[be];if("@container"===be&&Array.isArray(Pe)&&Array.isArray(He)&&(Pe=Pe.slice().sort(),He=He.slice().sort()),!ee(Pe,He))return!1}return!0}(ie,ce)))throw new u("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:L,term:E})},I.expandIri=(B,L,E,D)=>W(B,L,E,void 0,void 0,D),I.getInitialContext=B=>{const L=JSON.stringify({processingMode:B.processingMode}),E=T.get(L);if(E)return E;const D={processingMode:B.processingMode,mappings:new Map,inverse:null,getInverse:function(){const H=this;if(H.inverse)return H.inverse;const ie=H.inverse={},ue=H.fastCurieMap={},ce={},xe=(H["@language"]||"@none").toLowerCase(),oe=H["@direction"],fe=H.mappings,ee=[...fe.keys()].sort(w);for(const de of ee){const ve=fe.get(de);if(null===ve)continue;let Fe=ve["@container"]||"@none";if(Fe=[].concat(Fe).sort().join(""),null===ve["@id"])continue;const Ne=f(ve["@id"]);for(const Se of Ne){let be=ie[Se];const Pe=I.isKeyword(Se);if(be)Pe||ve._termHasColon||ce[Se].push(de);else if(ie[Se]=be={},!Pe&&!ve._termHasColon){ce[Se]=[de];const He={iri:Se,terms:ce[Se]};Se[0]in ue?ue[Se[0]].push(He):ue[Se[0]]=[He]}if(be[Fe]||(be[Fe]={"@language":{},"@type":{},"@any":{}}),be=be[Fe],K(de,be["@any"],"@none"),ve.reverse)K(de,be["@type"],"@reverse");else if("@none"===ve["@type"])K(de,be["@any"],"@none"),K(de,be["@language"],"@none"),K(de,be["@type"],"@none");else if("@type"in ve)K(de,be["@type"],ve["@type"]);else if("@language"in ve&&"@direction"in ve){const He=ve["@language"],Je=ve["@direction"];K(de,be["@language"],He&&Je?`${He}_${Je}`.toLowerCase():He?He.toLowerCase():Je?`_${Je}`:"@null")}else"@language"in ve?K(de,be["@language"],(ve["@language"]||"@null").toLowerCase()):"@direction"in ve?ve["@direction"]?K(de,be["@language"],`_${ve["@direction"]}`):K(de,be["@language"],"@none"):oe?(K(de,be["@language"],`_${oe}`),K(de,be["@language"],"@none"),K(de,be["@type"],"@none")):(K(de,be["@language"],xe),K(de,be["@language"],"@none"),K(de,be["@type"],"@none"))}}for(const de in ue)G(ue,de,1);return ie},clone:function(){const H={};return H.mappings=q.clone(this.mappings),H.clone=this.clone,H.inverse=null,H.getInverse=this.getInverse,H.protected=q.clone(this.protected),this.previousContext&&(H.previousContext=this.previousContext.clone()),H.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(H["@base"]=this["@base"]),"@language"in this&&(H["@language"]=this["@language"]),"@vocab"in this&&(H["@vocab"]=this["@vocab"]),H},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===T.size&&T.clear(),T.set(L,D),D;function G(H,ie,ue){const ce=H[ie],xe=H[ie]={};let oe,fe;for(const ee of ce)(fe=ue>=(oe=ee.iri).length?"":oe[ue])in xe?xe[fe].push(ee):xe[fe]=[ee];for(const ee in xe)""!==ee&&G(xe,ee,ue+1)}function K(H,ie,ue){ie.hasOwnProperty(ue)||(ie[ue]=H)}},I.getContextValue=(B,L,E)=>{if(null===L)return"@context"===E?void 0:null;if(B.mappings.has(L)){const D=B.mappings.get(L);if(o(E))return D;if(D.hasOwnProperty(E))return D[E]}return"@language"===E&&E in B||"@direction"===E&&E in B?B[E]:"@context"!==E?null:void 0},I.processingMode=(B,L)=>L.toString()>="1.1"?!B.processingMode||B.processingMode>="json-ld-"+L.toString():"json-ld-1.0"===B.processingMode,I.isKeyword=B=>{if(!e(B)||"@"!==B[0])return!1;switch(B){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":28,"./events":37,"./types":47,"./url":48,"./util":49}],36:[function(J,re,le){"use strict";const{parseLinkHeader:q,buildHeaders:u}=J("../util"),{LINK_HEADER_CONTEXT:F}=J("../constants"),v=J("../JsonLdError"),e=J("../RequestQueue"),{prependBase:o}=J("../url"),l=/(^|(\r\n))link:/i;re.exports=({secure:d,headers:m={},xhr:c}={headers:{}})=>(m=u(m),(new e).wrapLoader(async function k(y){if(0!==y.indexOf("http:")&&0!==y.indexOf("https:"))throw new v('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:y});if(d&&0!==y.indexOf("https"))throw new v('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:y});let f;try{f=await function(B,L,E){const D=new(B=B||XMLHttpRequest);return new Promise((G,K)=>{D.onload=()=>G(D),D.onerror=H=>K(H),D.open("GET",L,!0);for(const H in E)D.setRequestHeader(H,E[H]);D.send()})}(c,y,m)}catch(B){throw new v("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:y,cause:B})}if(f.status>=400)throw new v("URL could not be dereferenced: "+f.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:y,httpStatusCode:f.status});let w={contextUrl:null,documentUrl:y,document:f.response},T=null;const I=f.getResponseHeader("Content-Type");let W;if(l.test(f.getAllResponseHeaders())&&(W=f.getResponseHeader("Link")),W&&"application/ld+json"!==I){const B=q(W),L=B[F];if(Array.isArray(L))throw new v("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:y});L&&(w.contextUrl=L.target),(T=B.alternate)&&"application/ld+json"==T.type&&!(I||"").match(/^application\/(\w*\+)?json$/)&&(w=await k(o(y,T.target)))}return w}))},{"../JsonLdError":28,"../RequestQueue":31,"../constants":34,"../url":48,"../util":49}],37:[function(J,re,le){"use strict";const q=J("./JsonLdError"),{isArray:u}=J("./types"),{asArray:F}=J("./util"),v={};re.exports=v,v.defaultEventHandler=null,v.setupEventHandler=({options:o={}})=>{const l=[].concat(o.safe?v.safeEventHandler:[],o.eventHandler?F(o.eventHandler):[],v.defaultEventHandler?v.defaultEventHandler:[]);return 0===l.length?null:l},v.handleEvent=({event:o,options:l})=>{!function d({event:m,handlers:c}){let k=!0;for(let y=0;k&&y<c.length;++y){k=!1;const f=c[y];if(u(f))k=d({event:m,handlers:f});else if("function"==typeof f)f({event:m,next:()=>{k=!0}});else{if("object"!=typeof f)throw new q("Invalid event handler.","jsonld.InvalidEventHandler",{event:m});m.code in f?f[m.code]({event:m,next:()=>{k=!0}}):k=!0}}return k}({event:o,handlers:l.eventHandler})};const e=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);v.safeEventHandler=function({event:o,next:l}){if("warning"===o.level&&e.has(o.code))throw new q("Safe mode validation error.","jsonld.ValidationError",{event:o});l()},v.logEventHandler=function({event:o,next:l}){console.log(`EVENT: ${o.message}`,{event:o}),l()},v.logWarningEventHandler=function({event:o,next:l}){"warning"===o.level&&console.warn(`WARNING: ${o.message}`,{event:o}),l()},v.unhandledEventHandler=function({event:o}){throw new q("No handler for event.","jsonld.UnhandledEvent",{event:o})},v.setDefaultEventHandler=function({eventHandler:o}={}){v.defaultEventHandler=o?F(o):null}},{"./JsonLdError":28,"./types":47,"./util":49}],38:[function(J,re,le){"use strict";const q=J("./JsonLdError"),{isArray:u,isObject:F,isEmptyObject:v,isString:e,isUndefined:o}=J("./types"),{isList:l,isValue:d,isGraph:m,isSubject:c}=J("./graphTypes"),{expandIri:k,getContextValue:y,isKeyword:f,process:w,processingMode:T}=J("./context"),{isAbsolute:I}=J("./url"),{REGEX_BCP47:W,REGEX_KEYWORD:B,addValue:L,asArray:E,getValues:D,validateTypeValue:G}=J("./util"),{handleEvent:K}=J("./events"),H={};function ie({activeCtx:xe,activeProperty:oe,value:fe,options:ee}){if(null==fe)return null;const de=k(xe,oe,{vocab:!0},ee);if("@id"===de)return k(xe,fe,{base:!0},ee);if("@type"===de)return k(xe,fe,{vocab:!0,base:!0},yn(Er({},ee),{typeExpansion:!0}));const ve=y(xe,oe,"@type");if(("@id"===ve||"@graph"===de)&&e(fe)){const Ne=k(xe,fe,{base:!0},ee);return null===Ne&&fe.match(B)&&ee.eventHandler&&K({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:oe}},options:ee}),{"@id":Ne}}if("@vocab"===ve&&e(fe))return{"@id":k(xe,fe,{vocab:!0,base:!0},ee)};if(f(de))return fe;const Fe={};if(ve&&!["@id","@vocab","@none"].includes(ve))Fe["@type"]=ve;else if(e(fe)){const Ne=y(xe,oe,"@language");null!==Ne&&(Fe["@language"]=Ne);const Se=y(xe,oe,"@direction");null!==Se&&(Fe["@direction"]=Se)}return["boolean","number","string"].includes(typeof fe)||(fe=fe.toString()),Fe["@value"]=fe,Fe}function ue(xe,oe,fe,ee){const de=[],ve=Object.keys(oe).sort();for(const Fe of ve){const Ne=k(xe,Fe,{vocab:!0},ee);let Se=oe[Fe];u(Se)||(Se=[Se]);for(const be of Se){if(null===be)continue;if(!e(be))throw new q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:oe});const Pe={"@value":be};"@none"!==Ne&&(Fe.match(W)||ee.eventHandler&&K({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Fe}},options:ee}),Pe["@language"]=Fe.toLowerCase()),fe&&(Pe["@direction"]=fe),de.push(Pe)}}return de}async function ce({activeCtx:xe,options:oe,activeProperty:fe,value:ee,asGraph:de,indexKey:ve,propertyIndex:Fe}){const Ne=[],Se=Object.keys(ee).sort(),be="@type"===ve;for(let Pe of Se){if(be){const M=y(xe,Pe,"@context");o(M)||(xe=await w({activeCtx:xe,localCtx:M,propagate:!1,options:oe}))}let He,Je=ee[Pe];u(Je)||(Je=[Je]),Je=await H.expand({activeCtx:xe,activeProperty:fe,element:Je,options:oe,insideList:!1,insideIndex:!0}),He=Fe?"@none"===Pe?"@none":ie({activeCtx:xe,activeProperty:ve,value:Pe,options:oe}):k(xe,Pe,{vocab:!0},oe),"@id"===ve?Pe=k(xe,Pe,{base:!0},oe):be&&(Pe=He);for(let M of Je){if(de&&!m(M)&&(M={"@graph":[M]}),"@type"===ve)"@none"===He||(M["@type"]?M["@type"]=[Pe].concat(M["@type"]):M["@type"]=[Pe]);else{if(d(M)&&!["@language","@type","@index"].includes(ve))throw new q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${ve}".`,"jsonld.SyntaxError",{code:"invalid value object",value:M});Fe?"@none"!==He&&L(M,Fe,He,{propertyIsArray:!0,prependValue:!0}):"@none"===He||ve in M||(M[ve]=Pe)}Ne.push(M)}}return Ne}re.exports=H,H.expand=async({activeCtx:xe,activeProperty:oe=null,element:fe,options:ee={},insideList:de=!1,insideIndex:ve=!1,typeScopedContext:Fe=null})=>{if(null==fe)return null;if("@default"===oe&&(ee=Object.assign({},ee,{isFrame:!1})),!u(fe)&&!F(fe))return de||null!==oe&&"@graph"!==k(xe,oe,{vocab:!0},ee)?ie({activeCtx:xe,activeProperty:oe,value:fe,options:ee}):(ee.eventHandler&&K({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:fe}},options:ee}),null);if(u(fe)){let P=[];const Y=y(xe,oe,"@container")||[];de=de||Y.includes("@list");for(let pe=0;pe<fe.length;++pe){let Ae=await H.expand({activeCtx:xe,activeProperty:oe,element:fe[pe],options:ee,insideIndex:ve,typeScopedContext:Fe});de&&u(Ae)&&(Ae={"@list":Ae}),null!==Ae&&(u(Ae)?P=P.concat(Ae):P.push(Ae))}return P}const Ne=k(xe,oe,{vocab:!0},ee),Se=y(xe,oe,"@context");Fe=Fe||(xe.previousContext?xe:null);let be=Object.keys(fe).sort(),Pe=!ve;if(Pe&&Fe&&be.length<=2&&!be.includes("@context"))for(const P of be){const Y=k(Fe,P,{vocab:!0},ee);if("@value"===Y){Pe=!1,xe=Fe;break}if("@id"===Y&&1===be.length){Pe=!1;break}}Pe&&(xe=xe.revertToPreviousContext()),o(Se)||(xe=await w({activeCtx:xe,localCtx:Se,propagate:!0,overrideProtected:!0,options:ee})),"@context"in fe&&(xe=await w({activeCtx:xe,localCtx:fe["@context"],options:ee})),Fe=xe;let He=null;for(const P of be)if("@type"===k(xe,P,{vocab:!0},ee)){He=He||P;const Y=fe[P],pe=Array.isArray(Y)?Y.length>1?Y.slice().sort():Y:[Y];for(const Ae of pe){const ye=y(Fe,Ae,"@context");o(ye)||(xe=await w({activeCtx:xe,localCtx:ye,options:ee,propagate:!1}))}}let Je={};await async function P({activeCtx:Y,activeProperty:pe,expandedActiveProperty:Ae,element:ye,expandedParent:De,options:Be={},insideList:Xe,typeKey:ot,typeScopedContext:ct}){const It=Object.keys(ye).sort(),jt=[];let Ee;const Re=ye[ot]&&"@json"===k(Y,u(ye[ot])?ye[ot][0]:ye[ot],{vocab:!0},yn(Er({},Be),{typeExpansion:!0}));for(const je of It){let V,ne=ye[je];if("@context"===je)continue;const he=k(Y,je,{vocab:!0},Be);if(null===he||!I(he)&&!f(he)){Be.eventHandler&&K({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:je,expandedProperty:he}},options:Be});continue}if(f(he)){if("@reverse"===Ae)throw new q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:ne});if(he in De&&"@included"!==he&&"@type"!==he)throw new q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:he})}if("@id"===he){if(!e(ne)){if(!Be.isFrame)throw new q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:ne});if(F(ne)){if(!v(ne))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:ne})}else{if(!u(ne))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:ne});if(!ne.every(ke=>e(ke)))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:ne})}}L(De,"@id",E(ne).map(ke=>{if(e(ke)){const Ie=k(Y,ke,{base:!0},Be);return Be.eventHandler&&(null===Ie?K(null===ke?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:ke}},options:Be}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:ke}},options:Be}):I(Ie)||K({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:ke,expandedId:Ie}},options:Be})),Ie}return ke}),{propertyIsArray:Be.isFrame});continue}if("@type"===he){F(ne)&&(ne=Object.fromEntries(Object.entries(ne).map(([ke,Ie])=>[k(ct,ke,{vocab:!0}),E(Ie).map(We=>k(ct,We,{base:!0,vocab:!0},yn(Er({},Be),{typeExpansion:!0})))]))),G(ne,Be.isFrame),L(De,"@type",E(ne).map(ke=>{if(e(ke)){const Ie=k(ct,ke,{base:!0,vocab:!0},yn(Er({},Be),{typeExpansion:!0}));return I(Ie)||Be.eventHandler&&K({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:ke}},options:Be}),Ie}return ke}),{propertyIsArray:Be.isFrame});continue}if("@included"===he&&T(Y,1.1)){const ke=E(await H.expand({activeCtx:Y,activeProperty:pe,element:ne,options:Be}));if(!ke.every(Ie=>c(Ie)))throw new q("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:ne});L(De,"@included",ke,{propertyIsArray:!0});continue}if("@graph"===he&&!F(ne)&&!u(ne))throw new q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:ne});if("@value"===he){Ee=ne,Re&&T(Y,1.1)?De["@value"]=ne:L(De,"@value",ne,{propertyIsArray:Be.isFrame});continue}if("@language"===he){if(null===ne)continue;if(!e(ne)&&!Be.isFrame)throw new q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:ne});ne=E(ne).map(ke=>e(ke)?ke.toLowerCase():ke);for(const ke of ne)e(ke)&&!ke.match(W)&&Be.eventHandler&&K({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ke}},options:Be});L(De,"@language",ne,{propertyIsArray:Be.isFrame});continue}if("@direction"===he){if(!e(ne)&&!Be.isFrame)throw new q('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:ne});ne=E(ne);for(const ke of ne)if(e(ke)&&"ltr"!==ke&&"rtl"!==ke)throw new q('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:ne});L(De,"@direction",ne,{propertyIsArray:Be.isFrame});continue}if("@index"===he){if(!e(ne))throw new q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:ne});L(De,"@index",ne);continue}if("@reverse"===he){if(!F(ne))throw new q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:ne});if("@reverse"in(V=await H.expand({activeCtx:Y,activeProperty:"@reverse",element:ne,options:Be})))for(const Ie in V["@reverse"])L(De,Ie,V["@reverse"][Ie],{propertyIsArray:!0});let ke=De["@reverse"]||null;for(const Ie in V){if("@reverse"===Ie)continue;null===ke&&(ke=De["@reverse"]={}),L(ke,Ie,[],{propertyIsArray:!0});const We=V[Ie];for(let Ze=0;Ze<We.length;++Ze){const rt=We[Ze];if(d(rt)||l(rt))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:V});L(ke,Ie,rt,{propertyIsArray:!0})}}continue}if("@nest"===he){jt.push(je);continue}let me=Y;const Le=y(Y,je,"@context");o(Le)||(me=await w({activeCtx:Y,localCtx:Le,propagate:!0,overrideProtected:!0,options:Be}));const _e=y(me,je,"@container")||[];if(_e.includes("@language")&&F(ne)){V=ue(me,ne,y(me,je,"@direction"),Be)}else if(_e.includes("@index")&&F(ne)){const ke=_e.includes("@graph"),Ie=y(me,je,"@index")||"@index",We="@index"!==Ie&&k(Y,Ie,{vocab:!0},Be);V=await ce({activeCtx:me,options:Be,activeProperty:je,value:ne,asGraph:ke,indexKey:Ie,propertyIndex:We})}else if(_e.includes("@id")&&F(ne)){const ke=_e.includes("@graph");V=await ce({activeCtx:me,options:Be,activeProperty:je,value:ne,asGraph:ke,indexKey:"@id"})}else if(_e.includes("@type")&&F(ne))V=await ce({activeCtx:me.revertToPreviousContext(),options:Be,activeProperty:je,value:ne,asGraph:!1,indexKey:"@type"});else{const ke="@list"===he;if(ke||"@set"===he){let Ie=pe;ke&&"@graph"===Ae&&(Ie=null),V=await H.expand({activeCtx:me,activeProperty:Ie,element:ne,options:Be,insideList:ke})}else V="@json"===y(Y,je,"@type")?{"@type":"@json","@value":ne}:await H.expand({activeCtx:me,activeProperty:je,element:ne,options:Be,insideList:!1})}if(null!==V||"@value"===he)if("@list"!==he&&!l(V)&&_e.includes("@list")&&(V={"@list":E(V)}),_e.includes("@graph")&&!_e.some(ke=>"@id"===ke||"@index"===ke)&&(V=E(V).map(ke=>({"@graph":E(ke)}))),me.mappings.has(je)&&me.mappings.get(je).reverse){const ke=De["@reverse"]=De["@reverse"]||{};V=E(V);for(let Ie=0;Ie<V.length;++Ie){const We=V[Ie];if(d(We)||l(We))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:V});L(ke,he,We,{propertyIsArray:!0})}}else L(De,he,V,{propertyIsArray:!0})}if("@value"in De&&("@json"!==De["@type"]||!T(Y,1.1))&&(F(Ee)||u(Ee))&&!Be.isFrame)throw new q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ee});for(const je of jt){const V=u(ye[je])?ye[je]:[ye[je]];for(const ne of V){if(!F(ne)||Object.keys(ne).some(he=>"@value"===k(Y,he,{vocab:!0},Be)))throw new q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ne});await P({activeCtx:Y,activeProperty:pe,expandedActiveProperty:Ae,element:ne,expandedParent:De,options:Be,insideList:Xe,typeScopedContext:ct,typeKey:ot})}}}({activeCtx:xe,activeProperty:oe,expandedActiveProperty:Ne,element:fe,expandedParent:Je,options:ee,insideList:de,typeKey:He,typeScopedContext:Fe});let M=(be=Object.keys(Je)).length;if("@value"in Je){if("@type"in Je&&("@language"in Je||"@direction"in Je))throw new q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Je});let P=M-1;if("@type"in Je&&(P-=1),"@index"in Je&&(P-=1),"@language"in Je&&(P-=1),"@direction"in Je&&(P-=1),0!==P)throw new q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Je});const Y=null===Je["@value"]?[]:E(Je["@value"]),pe=D(Je,"@type");if(!T(xe,1.1)||!pe.includes("@json")||1!==pe.length)if(0===Y.length)ee.eventHandler&&K({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Je}},options:ee}),Je=null;else{if(!Y.every(Ae=>e(Ae)||v(Ae))&&"@language"in Je)throw new q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Je});if(!pe.every(Ae=>I(Ae)&&!(e(Ae)&&0===Ae.indexOf("_:"))||v(Ae)))throw new q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Je})}}else if("@type"in Je&&!u(Je["@type"]))Je["@type"]=[Je["@type"]];else if("@set"in Je||"@list"in Je){if(M>1&&(2!==M||!("@index"in Je)))throw new q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Je});"@set"in Je&&(Je=Je["@set"],M=(be=Object.keys(Je)).length)}else 1===M&&"@language"in Je&&(ee.eventHandler&&K({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Je}},options:ee}),Je=null);if(F(Je)&&!ee.keepFreeFloatingNodes&&!de&&(null===oe||"@graph"===Ne)&&(0===M||"@value"in Je||"@list"in Je||1===M&&"@id"in Je)){if(ee.eventHandler){let P,Y;0===M?(P="empty object",Y="Dropping empty object."):"@value"in Je?(P="object with only @value",Y="Dropping object with only @value."):"@list"in Je?(P="object with only @list",Y="Dropping object with only @list."):1===M&&"@id"in Je&&(P="object with only @id",Y="Dropping object with only @id."),K({event:{type:["JsonLdEvent"],code:P,level:"warning",message:Y,details:{value:Je}},options:ee})}Je=null}return Je}},{"./JsonLdError":28,"./context":35,"./events":37,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],39:[function(J,re,le){"use strict";const{isSubjectReference:q}=J("./graphTypes"),{createMergedNodeMap:u}=J("./nodeMap"),F={};re.exports=F,F.flatten=v=>{const e=u(v),o=[],l=Object.keys(e).sort();for(let d=0;d<l.length;++d){const m=e[l[d]];q(m)||o.push(m)}return o}},{"./graphTypes":42,"./nodeMap":44}],40:[function(J,re,le){"use strict";const{isKeyword:q}=J("./context"),u=J("./graphTypes"),F=J("./types"),v=J("./util"),e=J("./url"),o=J("./JsonLdError"),{createNodeMap:l,mergeNodeMapGraphs:d}=J("./nodeMap"),m={};function c(L){const E={};for(const D in L)void 0!==L[D]&&(E["@"+D]=[L[D]]);return[E]}function k(L,E,D){for(let G=D.length-1;G>=0;--G){const K=D[G];if(K.graph===E&&K.subject["@id"]===L["@id"])return!0}return!1}function y(L,E,D){const G="@"+D;let K=G in L?L[G][0]:E[D];if("embed"===D)if(!0===K)K="@once";else if(!1===K)K="@never";else if("@always"!==K&&"@never"!==K&&"@link"!==K&&"@first"!==K&&"@last"!==K&&"@once"!==K)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:L});return K}function f(L){if(!F.isArray(L)||1!==L.length||!F.isObject(L[0]))throw new o("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:L});if("@id"in L[0])for(const E of v.asArray(L[0]["@id"]))if(!F.isObject(E)&&!e.isAbsolute(E)||F.isString(E)&&0===E.indexOf("_:"))throw new o("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:L});if("@type"in L[0])for(const E of v.asArray(L[0]["@type"]))if(!F.isObject(E)&&!e.isAbsolute(E)||F.isString(E)&&0===E.indexOf("_:"))throw new o("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:L})}function w(L,E,D,G){let K=!0,H=!1;for(const ie in D){let ue=!1;const ce=v.getValues(E,ie),xe=0===v.getValues(D,ie).length;if("@id"===ie){if(F.isEmptyObject(D["@id"][0]||{})?ue=!0:D["@id"].length>=0&&(ue=D["@id"].includes(ce[0])),!G.requireAll)return ue}else if("@type"===ie){if(K=!1,xe){if(ce.length>0)return!1;ue=!0}else if(1===D["@type"].length&&F.isEmptyObject(D["@type"][0]))ue=ce.length>0;else for(const oe of D["@type"])ue=!(!F.isObject(oe)||!("@default"in oe))||ue||ce.some(fe=>fe===oe);if(!G.requireAll)return ue}else{if(q(ie))continue;{const oe=v.getValues(D,ie)[0];let fe=!1;if(oe&&(f([oe]),fe="@default"in oe),K=!1,0===ce.length&&fe)continue;if(ce.length>0&&xe)return!1;if(void 0===oe){if(ce.length>0)return!1;ue=!0}else if(u.isList(oe)){const ee=oe["@list"][0];if(u.isList(ce[0])){const de=ce[0]["@list"];u.isValue(ee)?ue=de.some(ve=>B(ee,ve)):(u.isSubject(ee)||u.isSubjectReference(ee))&&(ue=de.some(ve=>W(L,ee,ve,G)))}}else ue=u.isValue(oe)?ce.some(ee=>B(oe,ee)):u.isSubjectReference(oe)?ce.some(ee=>W(L,oe,ee,G)):!!F.isObject(oe)&&ce.length>0}}if(!ue&&G.requireAll)return!1;H=H||ue}return K||H}function T(L,E){const D=L.uniqueEmbeds[L.graph],G=D[E],K=G.parent,H=G.property,ie={"@id":E};if(F.isArray(K)){for(let ce=0;ce<K.length;++ce)if(v.compareValues(K[ce],ie)){K[ce]=ie;break}}else{const ce=F.isArray(K[H]);v.removeValue(K,H,ie,{propertyIsArray:ce}),v.addValue(K,H,ie,{propertyIsArray:ce})}const ue=ce=>{const xe=Object.keys(D);for(const oe of xe)oe in D&&F.isObject(D[oe].parent)&&D[oe].parent["@id"]===ce&&(delete D[oe],ue(oe))};ue(E)}function I(L,E,D){F.isObject(L)?v.addValue(L,E,D,{propertyIsArray:!0}):L.push(D)}function W(L,E,D,G){if(!("@id"in D))return!1;const K=L.subjects[D["@id"]];return K&&w(L,K,E,G)}function B(L,E){const D=E["@value"],G=E["@type"],K=E["@language"],H=L["@value"]?F.isArray(L["@value"])?L["@value"]:[L["@value"]]:[],ie=L["@type"]?F.isArray(L["@type"])?L["@type"]:[L["@type"]]:[],ue=L["@language"]?F.isArray(L["@language"])?L["@language"]:[L["@language"]]:[];return 0===H.length&&0===ie.length&&0===ue.length||!(!H.includes(D)&&!F.isEmptyObject(H[0]))&&!!(!G&&0===ie.length||ie.includes(G)||G&&F.isEmptyObject(ie[0]))&&!!(!K&&0===ue.length||ue.includes(K)||K&&F.isEmptyObject(ue[0]))}re.exports=m,m.frameMergedOrDefault=(L,E,D)=>{const G={options:D,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},K=new v.IdentifierIssuer("_:b");l(L,G.graphMap,"@default",K),D.merged&&(G.graphMap["@merged"]=d(G.graphMap),G.graph="@merged"),G.subjects=G.graphMap[G.graph];const H=[];return m.frame(G,Object.keys(G.subjects).sort(),E,H),D.pruneBlankNodeIdentifiers&&(D.bnodesToClear=Object.keys(G.bnodeMap).filter(ie=>1===G.bnodeMap[ie].length)),D.link={},function ie(ue,ce){if(F.isArray(ue))return ue.map(xe=>ie(xe,ce));if(F.isObject(ue)){if("@preserve"in ue)return ue["@preserve"][0];if(u.isValue(ue))return ue;if(u.isList(ue))return ue["@list"]=ie(ue["@list"],ce),ue;if("@id"in ue){const xe=ue["@id"];if(ce.link.hasOwnProperty(xe)){const oe=ce.link[xe].indexOf(ue);if(-1!==oe)return ce.link[xe][oe];ce.link[xe].push(ue)}else ce.link[xe]=[ue]}for(const xe in ue)"@id"===xe&&ce.bnodesToClear.includes(ue[xe])?delete ue["@id"]:ue[xe]=ie(ue[xe],ce)}return ue}(H,D)},m.frame=(L,E,D,G,K=null)=>{f(D),D=D[0];const H=L.options,ie={embed:y(D,H,"embed"),explicit:y(D,H,"explicit"),requireAll:y(D,H,"requireAll")};L.link.hasOwnProperty(L.graph)||(L.link[L.graph]={});const ue=L.link[L.graph],ce=function(oe,fe,ee,de){const ve={};for(const Fe of fe){const Ne=oe.graphMap[oe.graph][Fe];w(oe,Ne,ee,de)&&(ve[Fe]=Ne)}return ve}(L,E,D,ie),xe=Object.keys(ce).sort();for(const oe of xe){const fe=ce[oe];if(null===K?L.uniqueEmbeds={[L.graph]:{}}:L.uniqueEmbeds[L.graph]=L.uniqueEmbeds[L.graph]||{},"@link"===ie.embed&&oe in ue){I(G,K,ue[oe]);continue}const ee={"@id":oe};if(0===oe.indexOf("_:")&&v.addValue(L.bnodeMap,oe,ee,{propertyIsArray:!0}),ue[oe]=ee,("@first"===ie.embed||"@last"===ie.embed)&&L.is11)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:D});if(L.embedded||!L.uniqueEmbeds[L.graph].hasOwnProperty(oe))if(!L.embedded||"@never"!==ie.embed&&!k(fe,L.graph,L.subjectStack))if(!L.embedded||"@first"!=ie.embed&&"@once"!=ie.embed||!L.uniqueEmbeds[L.graph].hasOwnProperty(oe)){if("@last"===ie.embed&&oe in L.uniqueEmbeds[L.graph]&&T(L,oe),L.uniqueEmbeds[L.graph][oe]={parent:G,property:K},L.subjectStack.push({subject:fe,graph:L.graph}),oe in L.graphMap){let de=!1,ve=null;"@graph"in D?(ve=D["@graph"][0],de=!("@merged"===oe||"@default"===oe),F.isObject(ve)||(ve={})):(de="@merged"!==L.graph,ve={}),de&&m.frame(yn(Er({},L),{graph:oe,embedded:!1}),Object.keys(L.graphMap[oe]).sort(),[ve],ee,"@graph")}"@included"in D&&m.frame(yn(Er({},L),{embedded:!1}),E,D["@included"],ee,"@included");for(const de of Object.keys(fe).sort())if(q(de)){if(ee[de]=v.clone(fe[de]),"@type"===de)for(const ve of fe["@type"])0===ve.indexOf("_:")&&v.addValue(L.bnodeMap,ve,ee,{propertyIsArray:!0})}else if(!ie.explicit||de in D)for(const ve of fe[de]){const Fe=de in D?D[de]:c(ie);if(u.isList(ve)){const Ne=D[de]&&D[de][0]&&D[de][0]["@list"]?D[de][0]["@list"]:c(ie),Se={"@list":[]};I(ee,de,Se);const be=ve["@list"];for(const Pe of be)u.isSubjectReference(Pe)?m.frame(yn(Er({},L),{embedded:!0}),[Pe["@id"]],Ne,Se,"@list"):I(Se,"@list",v.clone(Pe))}else u.isSubjectReference(ve)?m.frame(yn(Er({},L),{embedded:!0}),[ve["@id"]],Fe,ee,de):B(Fe[0],ve)&&I(ee,de,v.clone(ve))}for(const de of Object.keys(D).sort()){if("@type"===de){if(!F.isObject(D[de][0])||!("@default"in D[de][0]))continue}else if(q(de))continue;const ve=D[de][0]||{};if(!y(ve,H,"omitDefault")&&!(de in ee)){let Fe="@null";"@default"in ve&&(Fe=v.clone(ve["@default"])),F.isArray(Fe)||(Fe=[Fe]),ee[de]=[{"@preserve":Fe}]}}for(const de of Object.keys(D["@reverse"]||{}).sort()){const ve=D["@reverse"][de];for(const Fe of Object.keys(L.subjects))v.getValues(L.subjects[Fe],de).some(Ne=>Ne["@id"]===oe)&&(ee["@reverse"]=ee["@reverse"]||{},v.addValue(ee["@reverse"],de,[],{propertyIsArray:!0}),m.frame(yn(Er({},L),{embedded:!0}),[Fe],ve,ee["@reverse"][de],K))}I(G,K,ee),L.subjectStack.pop()}else I(G,K,ee);else I(G,K,ee)}},m.cleanupNull=(L,E)=>{if(F.isArray(L))return L.map(D=>m.cleanupNull(D,E)).filter(D=>D);if("@null"===L)return null;if(F.isObject(L)){if("@id"in L){const D=L["@id"];if(E.link.hasOwnProperty(D)){const G=E.link[D].indexOf(L);if(-1!==G)return E.link[D][G];E.link[D].push(L)}else E.link[D]=[L]}for(const D in L)L[D]=m.cleanupNull(L[D],E)}return L}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49}],41:[function(J,re,le){"use strict";const q=J("./JsonLdError"),u=J("./graphTypes"),F=J("./types"),{REGEX_BCP47:v,addValue:e}=J("./util"),{handleEvent:o}=J("./events"),{RDF_LIST:l,RDF_FIRST:d,RDF_REST:m,RDF_NIL:c,RDF_TYPE:k,RDF_JSON_LITERAL:y,XSD_BOOLEAN:f,XSD_DOUBLE:w,XSD_INTEGER:T,XSD_STRING:I}=J("./constants"),W={};function B(L,E,D,G){if(L.termType.endsWith("Node"))return{"@id":L.value};const K={"@value":L.value};if(L.language)L.language.match(v)||G.eventHandler&&o({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:L.language}},options:G}),K["@language"]=L.language;else{let H=L.datatype.value;if(H||(H=I),H===y){H="@json";try{K["@value"]=JSON.parse(K["@value"])}catch(ie){throw new q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:K["@value"],cause:ie})}}if(E){if(H===f)"true"===K["@value"]?K["@value"]=!0:"false"===K["@value"]&&(K["@value"]=!1);else if(F.isNumeric(K["@value"]))if(H===T){const ie=parseInt(K["@value"],10);ie.toFixed(0)===K["@value"]&&(K["@value"]=ie)}else H===w&&(K["@value"]=parseFloat(K["@value"]));[f,T,w,I].includes(H)||(K["@type"]=H)}else if("i18n-datatype"===D&&H.startsWith("https://www.w3.org/ns/i18n#")){const[,ie,ue]=H.split(/[#_]/);ie.length>0&&(K["@language"]=ie,ie.match(v)||G.eventHandler&&o({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ie}},options:G})),K["@direction"]=ue}else H!==I&&(K["@type"]=H)}return K}re.exports=W,W.fromRDF=async(L,E)=>{const D={},G={"@default":D},K={},{useRdfType:H=!1,useNativeTypes:ie=!1,rdfDirection:ue=null}=E;for(const oe of L){const fe="DefaultGraph"===oe.graph.termType?"@default":oe.graph.value;fe in G||(G[fe]={}),"@default"===fe||fe in D||(D[fe]={"@id":fe});const ee=G[fe],de=oe.subject.value,ve=oe.predicate.value,Fe=oe.object;de in ee||(ee[de]={"@id":de});const Ne=ee[de],Se=Fe.termType.endsWith("Node");if(!Se||Fe.value in ee||(ee[Fe.value]={"@id":Fe.value}),ve===k&&!H&&Se){e(Ne,"@type",Fe.value,{propertyIsArray:!0});continue}const be=B(Fe,ie,ue,E);if(e(Ne,ve,be,{propertyIsArray:!0}),Se)if(Fe.value===c){const Pe=ee[Fe.value];"usages"in Pe||(Pe.usages=[]),Pe.usages.push({node:Ne,property:ve,value:be})}else Fe.value in K?K[Fe.value]=!1:K[Fe.value]={node:Ne,property:ve,value:be}}for(const oe in G){const fe=G[oe];if(!(c in fe))continue;const ee=fe[c];if(ee.usages){for(let de of ee.usages){let ve=de.node,Fe=de.property,Ne=de.value;const Se=[],be=[];let Pe=Object.keys(ve).length;for(;Fe===m&&F.isObject(K[ve["@id"]])&&F.isArray(ve[d])&&1===ve[d].length&&F.isArray(ve[m])&&1===ve[m].length&&(3===Pe||4===Pe&&F.isArray(ve["@type"])&&1===ve["@type"].length&&ve["@type"][0]===l)&&(Se.push(ve[d][0]),be.push(ve["@id"]),ve=(de=K[ve["@id"]]).node,Fe=de.property,Ne=de.value,Pe=Object.keys(ve).length,u.isBlankNode(ve)););delete Ne["@id"],Ne["@list"]=Se.reverse();for(const He of be)delete fe[He]}delete ee.usages}}const ce=[],xe=Object.keys(D).sort();for(const oe of xe){const fe=D[oe];if(oe in G){const ee=fe["@graph"]=[],de=G[oe],ve=Object.keys(de).sort();for(const Fe of ve){const Ne=de[Fe];u.isSubjectReference(Ne)||ee.push(Ne)}}u.isSubjectReference(fe)||ce.push(fe)}return ce}},{"./JsonLdError":28,"./constants":34,"./events":37,"./graphTypes":42,"./types":47,"./util":49}],42:[function(J,re,le){"use strict";const q=J("./types"),u={};re.exports=u,u.isSubject=F=>!(!q.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),u.isSubjectReference=F=>q.isObject(F)&&1===Object.keys(F).length&&"@id"in F,u.isValue=F=>q.isObject(F)&&"@value"in F,u.isList=F=>q.isObject(F)&&"@list"in F,u.isGraph=F=>q.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(v=>"@id"!==v&&"@index"!==v).length,u.isSimpleGraph=F=>u.isGraph(F)&&!("@id"in F),u.isBlankNode=F=>{if(q.isObject(F)){if("@id"in F){const v=F["@id"];return!q.isString(v)||0===v.indexOf("_:")}return 0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F)}return!1}},{"./types":47}],43:[function(J,re,le){const q=J("rdf-canonize"),u=J("./platform"),F=J("./util"),v=J("./ContextResolver"),e=F.IdentifierIssuer,o=J("./JsonLdError"),l=J("lru-cache"),d=J("./NQuads"),{expand:m}=J("./expand"),{flatten:c}=J("./flatten"),{fromRDF:k}=J("./fromRdf"),{toRDF:y}=J("./toRdf"),{frameMergedOrDefault:f,cleanupNull:w}=J("./frame"),{isArray:T,isObject:I,isString:W}=J("./types"),{isSubjectReference:B}=J("./graphTypes"),{expandIri:L,getInitialContext:E,process:D,processingMode:G}=J("./context"),{compact:K,compactIri:H}=J("./compact"),{createNodeMap:ie,createMergedNodeMap:ue,mergeNodeMaps:ce}=J("./nodeMap"),{logEventHandler:xe,logWarningEventHandler:oe,safeEventHandler:fe,setDefaultEventHandler:ee,setupEventHandler:de,strictEventHandler:ve,unhandledEventHandler:Fe}=J("./events"),Ne=function(be){const Pe={},He=new l({max:100});function Je(M,pe){var Ae=pe,{documentLoader:P=be.documentLoader}=Ae,Y=bp(Ae,["documentLoader"]);if(M&&"compactionMap"in M)throw new o('"compactionMap" not supported.',"jsonld.OptionsError");if(M&&"expansionMap"in M)throw new o('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:P},Y,M,{eventHandler:de({options:M})})}return be.compact=async function(M,P,Y){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===P)throw new o("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===M)return null;let pe;(Y=Je(Y,{base:W(M)?M:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new v({sharedCache:He})})).link&&(Y.skipExpansion=!0),Y.compactToRelative||delete Y.base,pe=Y.skipExpansion?M:await be.expand(M,Y);const Ae=await be.processContext(E(Y),P,Y);let ye=await K({activeCtx:Ae,element:pe,options:Y});Y.compactArrays&&!Y.graph&&T(ye)?1===ye.length?ye=ye[0]:0===ye.length&&(ye={}):Y.graph&&I(ye)&&(ye=[ye]),I(P)&&"@context"in P&&(P=P["@context"]),P=F.clone(P),T(P)||(P=[P]);const De=P;P=[];for(let Xe=0;Xe<De.length;++Xe)(!I(De[Xe])||Object.keys(De[Xe]).length>0)&&P.push(De[Xe]);const Be=P.length>0;if(1===P.length&&(P=P[0]),T(ye)){const Xe=H({activeCtx:Ae,iri:"@graph",relativeTo:{vocab:!0}}),ot=ye;ye={},Be&&(ye["@context"]=P),ye[Xe]=ot}else if(I(ye)&&Be){const Xe=ye;ye={"@context":P};for(const ot in Xe)ye[ot]=Xe[ot]}return ye},be.expand=async function(M,P){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Y={},pe=[];if("expandContext"in(P=Je(P,{keepFreeFloatingNodes:!1,contextResolver:new v({sharedCache:He})}))){const Be=F.clone(P.expandContext);I(Be)&&"@context"in Be?Y.expandContext=Be:Y.expandContext={"@context":Be},pe.push(Y.expandContext)}let Ae;if(W(M)){const Be=await be.get(M,P);Ae=Be.documentUrl,Y.input=Be.document,Be.contextUrl&&(Y.remoteContext={"@context":Be.contextUrl},pe.push(Y.remoteContext))}else Y.input=F.clone(M);"base"in P||(P.base=Ae||"");let ye=E(P);for(const Be of pe)ye=await D({activeCtx:ye,localCtx:Be,options:P});let De=await m({activeCtx:ye,element:Y.input,options:P});return I(De)&&"@graph"in De&&1===Object.keys(De).length?De=De["@graph"]:null===De&&(De=[]),T(De)||(De=[De]),De},be.flatten=async function(M,P,Y){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");P="function"==typeof P?null:P||null,Y=Je(Y,{base:W(M)?M:"",contextResolver:new v({sharedCache:He})});const pe=await be.expand(M,Y),Ae=c(pe);return null===P?Ae:(Y.graph=!0,Y.skipExpansion=!0,await be.compact(Ae,P,Y))},be.frame=async function(M,P,Y){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Y=Je(Y,{base:W(M)?M:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new v({sharedCache:He})}),W(P)){const It=await be.get(P,Y);if(P=It.document,It.contextUrl){let jt=P["@context"];jt?T(jt)?jt.push(It.contextUrl):jt=[jt,It.contextUrl]:jt=It.contextUrl,P["@context"]=jt}}const pe=P&&P["@context"]||{},Ae=await be.processContext(E(Y),pe,Y);Y.hasOwnProperty("omitGraph")||(Y.omitGraph=G(Ae,1.1)),Y.hasOwnProperty("pruneBlankNodeIdentifiers")||(Y.pruneBlankNodeIdentifiers=G(Ae,1.1));const ye=await be.expand(M,Y),De=Er({},Y);De.isFrame=!0,De.keepFreeFloatingNodes=!0;const Be=await be.expand(P,De),Xe=Object.keys(P).map(It=>L(Ae,It,{vocab:!0}));De.merged=!Xe.includes("@graph"),De.is11=G(Ae,1.1);const ot=f(ye,Be,De);De.graph=!Y.omitGraph,De.skipExpansion=!0,De.link={},De.framing=!0;let ct=await be.compact(ot,pe,De);return De.link={},w(ct,De)},be.link=async function(M,P,Y){const pe={};return P&&(pe["@context"]=P),pe["@embed"]="@link",be.frame(M,pe,Y)},be.normalize=be.canonize=async function(M,P){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(P=Je(P,{base:W(M)?M:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new v({sharedCache:He})}))){if("application/n-quads"!==P.inputFormat&&"application/nquads"!==P.inputFormat)throw new o("Unknown canonicalization input format.","jsonld.CanonizeError");const Ae=d.parse(M);return q.canonize(Ae,P)}const Y=Er({},P);delete Y.format,Y.produceGeneralizedRdf=!1;const pe=await be.toRDF(M,Y);return q.canonize(pe,P)},be.fromRDF=async function(M,P){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");P=Je(P,{format:W(M)?"application/n-quads":void 0});const{format:Y}=P;let{rdfParser:pe}=P;if(Y){if(!(pe=pe||Pe[Y]))throw new o("Unknown input format.","jsonld.UnknownFormat",{format:Y})}else pe=()=>M;const Ae=await pe(M);return k(Ae,P)},be.toRDF=async function(M,P){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Y;Y=(P=Je(P,{base:W(M)?M:"",skipExpansion:!1,contextResolver:new v({sharedCache:He})})).skipExpansion?M:await be.expand(M,P);const pe=y(Y,P);if(P.format){if("application/n-quads"===P.format||"application/nquads"===P.format)return d.serialize(pe);throw new o("Unknown output format.","jsonld.UnknownFormat",{format:P.format})}return pe},be.createNodeMap=async function(M,P){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");P=Je(P,{base:W(M)?M:"",contextResolver:new v({sharedCache:He})});const Y=await be.expand(M,P);return ue(Y,P)},be.merge=async function(M,P,Y){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!T(M))throw new TypeError('Could not merge, "docs" must be an array.');P="function"==typeof P?null:P||null,Y=Je(Y,{contextResolver:new v({sharedCache:He})});const pe=await Promise.all(M.map(ct=>{const It=Er({},Y);return be.expand(ct,It)}));let Ae=!0;"mergeNodes"in Y&&(Ae=Y.mergeNodes);const ye=Y.issuer||new e("_:b"),De={"@default":{}};for(let ct=0;ct<pe.length;++ct){const It=F.relabelBlankNodes(pe[ct],{issuer:new e("_:b"+ct+"-")}),jt=Ae||0===ct?De:{"@default":{}};if(ie(It,jt,"@default",ye),jt!==De)for(const Ee in jt){const Re=jt[Ee];if(!(Ee in De)){De[Ee]=Re;continue}const je=De[Ee];for(const V in Re)V in je||(je[V]=Re[V])}}const Be=ce(De),Xe=[],ot=Object.keys(Be).sort();for(let ct=0;ct<ot.length;++ct){const It=Be[ot[ct]];B(It)||Xe.push(It)}return null===P?Xe:(Y.graph=!0,Y.skipExpansion=!0,await be.compact(Xe,P,Y))},Object.defineProperty(be,"documentLoader",{get:()=>be._documentLoader,set:M=>be._documentLoader=M}),be.documentLoader=async M=>{throw new o("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:M})},be.get=async function(M,P){let Y;Y="function"==typeof P.documentLoader?P.documentLoader:be.documentLoader;const pe=await Y(M);try{if(!pe.document)throw new o("No remote document found at the given URL.","jsonld.NullRemoteDocument");W(pe.document)&&(pe.document=JSON.parse(pe.document))}catch(Ae){throw new o("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ae,remoteDoc:pe})}return pe},be.processContext=async function(M,P,Y){return Y=Je(Y,{base:"",contextResolver:new v({sharedCache:He})}),null===P?E(Y):(P=F.clone(P),I(P)&&"@context"in P||(P={"@context":P}),D({activeCtx:M,localCtx:P,options:Y}))},be.getContextValue=J("./context").getContextValue,be.documentLoaders={},be.useDocumentLoader=function(M){if(!(M in be.documentLoaders))throw new o('Unknown document loader type: "'+M+'"',"jsonld.UnknownDocumentLoader",{type:M});be.documentLoader=be.documentLoaders[M].apply(be,Array.prototype.slice.call(arguments,1))},be.registerRDFParser=function(M,P){Pe[M]=P},be.unregisterRDFParser=function(M){delete Pe[M]},be.registerRDFParser("application/n-quads",d.parse),be.registerRDFParser("application/nquads",d.parse),be.url=J("./url"),be.logEventHandler=xe,be.logWarningEventHandler=oe,be.safeEventHandler=fe,be.setDefaultEventHandler=ee,be.strictEventHandler=ve,be.unhandledEventHandler=Fe,be.util=F,Object.assign(be,F),be.promises=be,be.RequestQueue=J("./RequestQueue"),be.JsonLdProcessor=J("./JsonLdProcessor")(be),u.setupGlobals(be),u.setupDocumentLoaders(be),be},Se=function(){return Ne(function(){return Se()})};Ne(Se),re.exports=Se},{"./ContextResolver":27,"./JsonLdError":28,"./JsonLdProcessor":29,"./NQuads":30,"./RequestQueue":31,"./compact":33,"./context":35,"./events":37,"./expand":38,"./flatten":39,"./frame":40,"./fromRdf":41,"./graphTypes":42,"./nodeMap":44,"./platform":45,"./toRdf":46,"./types":47,"./url":48,"./util":49,"lru-cache":50,"rdf-canonize":64}],44:[function(J,re,le){"use strict";const{isKeyword:q}=J("./context"),u=J("./graphTypes"),F=J("./types"),v=J("./util"),e=J("./JsonLdError"),o={};re.exports=o,o.createMergedNodeMap=(l,d)=>{const m=(d=d||{}).issuer||new v.IdentifierIssuer("_:b"),c={"@default":{}};return o.createNodeMap(l,c,"@default",m),o.mergeNodeMaps(c)},o.createNodeMap=(l,d,m,c,k,y)=>{if(F.isArray(l)){for(const I of l)o.createNodeMap(I,d,m,c,void 0,y);return}if(!F.isObject(l))return void(y&&y.push(l));if(u.isValue(l)){if("@type"in l){let I=l["@type"];0===I.indexOf("_:")&&(l["@type"]=I=c.getId(I))}return void(y&&y.push(l))}if(y&&u.isList(l)){const I=[];return o.createNodeMap(l["@list"],d,m,c,k,I),void y.push({"@list":I})}if("@type"in l){const I=l["@type"];for(const W of I)0===W.indexOf("_:")&&c.getId(W)}F.isUndefined(k)&&(k=u.isBlankNode(l)?c.getId(l["@id"]):l["@id"]),y&&y.push({"@id":k});const f=d[m],w=f[k]=f[k]||{};w["@id"]=k;const T=Object.keys(l).sort();for(let I of T){if("@id"===I)continue;if("@reverse"===I){const B={"@id":k},L=l["@reverse"];for(const E in L){const D=L[E];for(const G of D){let K=G["@id"];u.isBlankNode(G)&&(K=c.getId(K)),o.createNodeMap(G,d,m,c,K),v.addValue(f[K],E,B,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===I){k in d||(d[k]={}),o.createNodeMap(l[I],d,k,c);continue}if("@included"===I){o.createNodeMap(l[I],d,m,c);continue}if("@type"!==I&&q(I)){if("@index"===I&&I in w&&(l[I]!==w[I]||l[I]["@id"]!==w[I]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:w});w[I]=l[I];continue}const W=l[I];if(0===I.indexOf("_:")&&(I=c.getId(I)),0!==W.length)for(let B of W)if("@type"===I&&(B=0===B.indexOf("_:")?c.getId(B):B),u.isSubject(B)||u.isSubjectReference(B)){if("@id"in B&&!B["@id"])continue;const L=u.isBlankNode(B)?c.getId(B["@id"]):B["@id"];v.addValue(w,I,{"@id":L},{propertyIsArray:!0,allowDuplicate:!1}),o.createNodeMap(B,d,m,c,L)}else if(u.isValue(B))v.addValue(w,I,B,{propertyIsArray:!0,allowDuplicate:!1});else if(u.isList(B)){const L=[];o.createNodeMap(B["@list"],d,m,c,k,L),B={"@list":L},v.addValue(w,I,B,{propertyIsArray:!0,allowDuplicate:!1})}else o.createNodeMap(B,d,m,c,k),v.addValue(w,I,B,{propertyIsArray:!0,allowDuplicate:!1});else v.addValue(w,I,[],{propertyIsArray:!0})}},o.mergeNodeMapGraphs=l=>{const d={};for(const m of Object.keys(l).sort())for(const c of Object.keys(l[m]).sort()){const k=l[m][c];c in d||(d[c]={"@id":c});const y=d[c];for(const f of Object.keys(k).sort())if(q(f)&&"@type"!==f)y[f]=v.clone(k[f]);else for(const w of k[f])v.addValue(y,f,v.clone(w),{propertyIsArray:!0,allowDuplicate:!1})}return d},o.mergeNodeMaps=l=>{const d=l["@default"],m=Object.keys(l).sort();for(const c of m){if("@default"===c)continue;const k=l[c];let y=d[c];y?"@graph"in y||(y["@graph"]=[]):d[c]=y={"@id":c,"@graph":[]};const f=y["@graph"];for(const w of Object.keys(k).sort()){const T=k[w];u.isSubjectReference(T)||f.push(T)}}return d}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./util":49}],45:[function(J,re,le){"use strict";const q=J("./documentLoaders/xhr"),u={};re.exports=u,u.setupDocumentLoaders=function(F){"undefined"!=typeof XMLHttpRequest&&(F.documentLoaders.xhr=q,F.useDocumentLoader("xhr"))},u.setupGlobals=function(F){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:F.JsonLdProcessor})}},{"./documentLoaders/xhr":36}],46:[function(J,re,le){"use strict";const{createNodeMap:q}=J("./nodeMap"),{isKeyword:u}=J("./context"),F=J("./graphTypes"),v=J("canonicalize"),e=J("./types"),o=J("./util"),{handleEvent:l}=J("./events"),{RDF_FIRST:d,RDF_REST:m,RDF_NIL:c,RDF_TYPE:k,RDF_JSON_LITERAL:y,RDF_LANGSTRING:f,XSD_BOOLEAN:w,XSD_DOUBLE:T,XSD_INTEGER:I,XSD_STRING:W}=J("./constants"),{isAbsolute:B}=J("./url"),L={};function E(G,K,H,ie,ue){const ce=Object.keys(K).sort();for(const xe of ce){const oe=K[xe],fe=Object.keys(oe).sort();for(let ee of fe){const de=oe[ee];if("@type"===ee)ee=k;else if(u(ee))continue;for(const ve of de){const Fe={termType:xe.startsWith("_:")?"BlankNode":"NamedNode",value:xe};if(!B(xe)){ue.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:xe}},options:ue});continue}const Ne={termType:ee.startsWith("_:")?"BlankNode":"NamedNode",value:ee};if(!B(ee)){ue.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:ee}},options:ue});continue}if("BlankNode"===Ne.termType&&!ue.produceGeneralizedRdf){ue.eventHandler&&l({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ie.getOldIds().find(be=>ie.getId(be)===ee)}},options:ue});continue}const Se=D(ve,ie,G,H,ue.rdfDirection,ue);Se&&G.push({subject:Fe,predicate:Ne,object:Se,graph:H})}}}}function D(G,K,H,ie,ue,ce){const xe={};if(F.isValue(G)){xe.termType="Literal",xe.value=void 0,xe.datatype={termType:"NamedNode"};let oe=G["@value"];const fe=G["@type"]||null;if("@json"===fe)xe.value=v(oe),xe.datatype.value=y;else if(e.isBoolean(oe))xe.value=oe.toString(),xe.datatype.value=fe||w;else if(e.isDouble(oe)||fe===T)e.isDouble(oe)||(oe=parseFloat(oe)),xe.value=oe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),xe.datatype.value=fe||T;else if(e.isNumber(oe))xe.value=oe.toFixed(0),xe.datatype.value=fe||I;else if("i18n-datatype"===ue&&"@direction"in G){const ee="https://www.w3.org/ns/i18n#"+(G["@language"]||"")+`_${G["@direction"]}`;xe.datatype.value=ee,xe.value=oe}else"@language"in G?(xe.value=oe,xe.datatype.value=fe||f,xe.language=G["@language"]):(xe.value=oe,xe.datatype.value=fe||W)}else if(F.isList(G)){const oe=function(fe,ee,de,ve,Fe,Ne){const Se={termType:"NamedNode",value:d},be={termType:"NamedNode",value:m},Pe={termType:"NamedNode",value:c},He=fe.pop(),Je=He?{termType:"BlankNode",value:ee.getId()}:Pe;let M=Je;for(const P of fe){const Y=D(P,ee,de,ve,Fe,Ne),pe={termType:"BlankNode",value:ee.getId()};de.push({subject:M,predicate:Se,object:Y,graph:ve}),de.push({subject:M,predicate:be,object:pe,graph:ve}),M=pe}if(He){const P=D(He,ee,de,ve,Fe,Ne);de.push({subject:M,predicate:Se,object:P,graph:ve}),de.push({subject:M,predicate:be,object:Pe,graph:ve})}return Je}(G["@list"],K,H,ie,ue,ce);xe.termType=oe.termType,xe.value=oe.value}else{const oe=e.isObject(G)?G["@id"]:G;xe.termType=oe.startsWith("_:")?"BlankNode":"NamedNode",xe.value=oe}return"NamedNode"!==xe.termType||B(xe.value)?xe:(ce.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:xe.value}},options:ce}),null)}re.exports=L,L.toRDF=(G,K)=>{const H=new o.IdentifierIssuer("_:b"),ie={"@default":{}};q(G,ie,"@default",H);const ue=[],ce=Object.keys(ie).sort();for(const xe of ce){let oe;if("@default"===xe)oe={termType:"DefaultGraph",value:""};else{if(!B(xe)){K.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:xe}},options:K});continue}(oe=xe.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=xe}E(ue,ie[xe],oe,H,K)}return ue}},{"./constants":34,"./context":35,"./events":37,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49,canonicalize:9}],47:[function(J,re,le){"use strict";const q={};re.exports=q,q.isArray=Array.isArray,q.isBoolean=u=>"boolean"==typeof u||"[object Boolean]"===Object.prototype.toString.call(u),q.isDouble=u=>q.isNumber(u)&&(-1!==String(u).indexOf(".")||Math.abs(u)>=1e21),q.isEmptyObject=u=>q.isObject(u)&&0===Object.keys(u).length,q.isNumber=u=>"number"==typeof u||"[object Number]"===Object.prototype.toString.call(u),q.isNumeric=u=>!isNaN(parseFloat(u))&&isFinite(u),q.isObject=u=>"[object Object]"===Object.prototype.toString.call(u),q.isString=u=>"string"==typeof u||"[object String]"===Object.prototype.toString.call(u),q.isUndefined=u=>void 0===u},{}],48:[function(J,re,le){"use strict";const q=J("./types"),u={};re.exports=u,u.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},u.parse=(v,e)=>{const o={},l=u.parsers[e||"full"],d=l.regex.exec(v);let m=l.keys.length;for(;m--;)o[l.keys[m]]=void 0===d[m]?null:d[m];return("https"===o.scheme&&"443"===o.port||"http"===o.scheme&&"80"===o.port)&&(o.href=o.href.replace(":"+o.port,""),o.authority=o.authority.replace(":"+o.port,""),o.port=null),o.normalizedPath=u.removeDotSegments(o.path),o},u.prependBase=(v,e)=>{if(null===v||u.isAbsolute(e))return e;v&&!q.isString(v)||(v=u.parse(v||""));const o=u.parse(e),l={protocol:v.protocol||""};if(null!==o.authority)l.authority=o.authority,l.path=o.path,l.query=o.query;else if(l.authority=v.authority,""===o.path)l.path=v.path,null!==o.query?l.query=o.query:l.query=v.query;else{if(0===o.path.indexOf("/"))l.path=o.path;else{let m=v.path;((m=m.substr(0,m.lastIndexOf("/")+1)).length>0||v.authority)&&"/"!==m.substr(-1)&&(m+="/"),m+=o.path,l.path=m}l.query=o.query}""!==o.path&&(l.path=u.removeDotSegments(l.path));let d=l.protocol;return null!==l.authority&&(d+="//"+l.authority),d+=l.path,null!==l.query&&(d+="?"+l.query),null!==o.fragment&&(d+="#"+o.fragment),""===d&&(d="./"),d},u.removeBase=(v,e)=>{if(null===v)return e;v&&!q.isString(v)||(v=u.parse(v||""));let o="";if(""!==v.href?o+=(v.protocol||"")+"//"+(v.authority||""):e.indexOf("//")&&(o+="//"),0!==e.indexOf(o))return e;const l=u.parse(e.substr(o.length)),d=v.normalizedPath.split("/"),m=l.normalizedPath.split("/"),c=l.fragment||l.query?0:1;for(;d.length>0&&m.length>c&&d[0]===m[0];)d.shift(),m.shift();let k="";if(d.length>0){d.pop();for(let y=0;y<d.length;++y)k+="../"}return k+=m.join("/"),null!==l.query&&(k+="?"+l.query),null!==l.fragment&&(k+="#"+l.fragment),""===k&&(k="./"),k},u.removeDotSegments=v=>{if(0===v.length)return"";const e=v.split("/"),o=[];for(;e.length>0;){const l=e.shift(),d=0===e.length;"."!==l?".."!==l?o.push(l):(o.pop(),d&&o.push("")):d&&o.push("")}return"/"===v[0]&&o.length>0&&""!==o[0]&&o.unshift(""),1===o.length&&""===o[0]?"/":o.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;u.isAbsolute=v=>q.isString(v)&&F.test(v),u.isRelative=v=>q.isString(v)},{"./types":47}],49:[function(J,re,le){"use strict";const q=J("./graphTypes"),u=J("./types"),F=J("rdf-canonize").IdentifierIssuer,v=J("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,d_accept="application/ld+json, application/json",m={};re.exports=m,m.IdentifierIssuer=F,m.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,m.REGEX_KEYWORD=/^@[a-zA-Z]+$/,m.clone=function(c){if(c&&"object"==typeof c){let k;if(u.isArray(c)){k=[];for(let y=0;y<c.length;++y)k[y]=m.clone(c[y])}else if(c instanceof Map){k=new Map;for(const[y,f]of c)k.set(y,m.clone(f))}else if(c instanceof Set){k=new Set;for(const y of c)k.add(m.clone(y))}else if(u.isObject(c)){k={};for(const y in c)k[y]=m.clone(c[y])}else k=c.toString();return k}return c},m.asArray=function(c){return Array.isArray(c)?c:[c]},m.buildHeaders=(c={})=>{if(Object.keys(c).some(k=>"accept"===k.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+d_accept+'" is supported.');return Object.assign({Accept:d_accept},c)},m.parseLinkHeader=c=>{const k={},y=c.match(e);for(let f=0;f<y.length;++f){let w=y[f].match(o);if(!w)continue;const T={target:w[1]},I=w[2];for(;w=l.exec(I);)T[w[1]]=void 0===w[2]?w[3]:w[2];const W=T.rel||"";Array.isArray(k[W])?k[W].push(T):k.hasOwnProperty(W)?k[W]=[k[W],T]:k[W]=T}return k},m.validateTypeValue=(c,k)=>{if(!(u.isString(c)||u.isArray(c)&&c.every(y=>u.isString(y)))){if(k&&u.isObject(c))switch(Object.keys(c).length){case 0:return;case 1:if("@default"in c&&m.asArray(c["@default"]).every(y=>u.isString(y)))return}throw new v('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:c})}},m.hasProperty=(c,k)=>{if(c.hasOwnProperty(k)){const y=c[k];return!u.isArray(y)||y.length>0}return!1},m.hasValue=(c,k,y)=>{if(m.hasProperty(c,k)){let f=c[k];const w=q.isList(f);if(u.isArray(f)||w){w&&(f=f["@list"]);for(let T=0;T<f.length;++T)if(m.compareValues(y,f[T]))return!0}else if(!u.isArray(y))return m.compareValues(y,f)}return!1},m.addValue=(c,k,y,f)=>{if("propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1),"valueIsArray"in f||(f.valueIsArray=!1),"allowDuplicate"in f||(f.allowDuplicate=!0),"prependValue"in f||(f.prependValue=!1),f.valueIsArray)c[k]=y;else if(u.isArray(y)){0===y.length&&f.propertyIsArray&&!c.hasOwnProperty(k)&&(c[k]=[]),f.prependValue&&(y=y.concat(c[k]),c[k]=[]);for(let w=0;w<y.length;++w)m.addValue(c,k,y[w],f)}else if(c.hasOwnProperty(k)){const w=!f.allowDuplicate&&m.hasValue(c,k,y);u.isArray(c[k])||w&&!f.propertyIsArray||(c[k]=[c[k]]),w||(f.prependValue?c[k].unshift(y):c[k].push(y))}else c[k]=f.propertyIsArray?[y]:y},m.getValues=(c,k)=>[].concat(c[k]||[]),m.removeProperty=(c,k)=>{delete c[k]},m.removeValue=(c,k,y,f)=>{"propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1);const w=m.getValues(c,k).filter(T=>!m.compareValues(T,y));0===w.length?m.removeProperty(c,k):1!==w.length||f.propertyIsArray?c[k]=w:c[k]=w[0]},m.relabelBlankNodes=(c,k)=>function y(f,w){if(u.isArray(w))for(let T=0;T<w.length;++T)w[T]=y(f,w[T]);else if(q.isList(w))w["@list"]=y(f,w["@list"]);else if(u.isObject(w)){q.isBlankNode(w)&&(w["@id"]=f.getId(w["@id"]));const T=Object.keys(w).sort();for(let I=0;I<T.length;++I){const W=T[I];"@id"!==W&&(w[W]=y(f,w[W]))}}return w}((k=k||{}).issuer||new F("_:b"),c),m.compareValues=(c,k)=>c===k||!(!q.isValue(c)||!q.isValue(k)||c["@value"]!==k["@value"]||c["@type"]!==k["@type"]||c["@language"]!==k["@language"]||c["@index"]!==k["@index"])||!!(u.isObject(c)&&"@id"in c&&u.isObject(k)&&"@id"in k)&&c["@id"]===k["@id"],m.compareShortestLeast=(c,k)=>c.length<k.length?-1:k.length<c.length?1:c===k?0:c<k?-1:1},{"./JsonLdError":28,"./graphTypes":42,"./types":47,"rdf-canonize":64}],50:[function(J,re,le){"use strict";const q=J("yallist"),u=Symbol("max"),F=Symbol("length"),v=Symbol("lengthCalculator"),e=Symbol("allowStale"),o=Symbol("maxAge"),l=Symbol("dispose"),d=Symbol("noDisposeOnSet"),m=Symbol("lruList"),c=Symbol("cache"),k=Symbol("updateAgeOnGet"),y=()=>1,f=(L,E,D)=>{const G=L[c].get(E);if(G){const K=G.value;if(w(L,K)){if(I(L,G),!L[e])return}else D&&(L[k]&&(G.value.now=Date.now()),L[m].unshiftNode(G));return K.value}},w=(L,E)=>{if(!E||!E.maxAge&&!L[o])return!1;const D=Date.now()-E.now;return E.maxAge?D>E.maxAge:L[o]&&D>L[o]},T=L=>{if(L[F]>L[u])for(let E=L[m].tail;L[F]>L[u]&&null!==E;){const D=E.prev;I(L,E),E=D}},I=(L,E)=>{if(E){const D=E.value;L[l]&&L[l](D.key,D.value),L[F]-=D.length,L[c].delete(D.key),L[m].removeNode(E)}};class W{constructor(E,D,G,K,H){this.key=E,this.value=D,this.length=G,this.now=K,this.maxAge=H||0}}const B=(L,E,D,G)=>{let K=D.value;w(L,K)&&(I(L,D),L[e]||(K=void 0)),K&&E.call(G,K.value,K.key,L)};re.exports=class{constructor(L){if("number"==typeof L&&(L={max:L}),L||(L={}),L.max&&("number"!=typeof L.max||L.max<0))throw new TypeError("max must be a non-negative number");this[u]=L.max||1/0;const E=L.length||y;if(this[v]="function"!=typeof E?y:E,this[e]=L.stale||!1,L.maxAge&&"number"!=typeof L.maxAge)throw new TypeError("maxAge must be a number");this[o]=L.maxAge||0,this[l]=L.dispose,this[d]=L.noDisposeOnSet||!1,this[k]=L.updateAgeOnGet||!1,this.reset()}set max(L){if("number"!=typeof L||L<0)throw new TypeError("max must be a non-negative number");this[u]=L||1/0,T(this)}get max(){return this[u]}set allowStale(L){this[e]=!!L}get allowStale(){return this[e]}set maxAge(L){if("number"!=typeof L)throw new TypeError("maxAge must be a non-negative number");this[o]=L,T(this)}get maxAge(){return this[o]}set lengthCalculator(L){"function"!=typeof L&&(L=y),L!==this[v]&&(this[v]=L,this[F]=0,this[m].forEach(E=>{E.length=this[v](E.value,E.key),this[F]+=E.length})),T(this)}get lengthCalculator(){return this[v]}get length(){return this[F]}get itemCount(){return this[m].length}rforEach(L,E){E=E||this;for(let D=this[m].tail;null!==D;){const G=D.prev;B(this,L,D,E),D=G}}forEach(L,E){E=E||this;for(let D=this[m].head;null!==D;){const G=D.next;B(this,L,D,E),D=G}}keys(){return this[m].toArray().map(L=>L.key)}values(){return this[m].toArray().map(L=>L.value)}reset(){this[l]&&this[m]&&this[m].length&&this[m].forEach(L=>this[l](L.key,L.value)),this[c]=new Map,this[m]=new q,this[F]=0}dump(){return this[m].map(L=>!w(this,L)&&{k:L.key,v:L.value,e:L.now+(L.maxAge||0)}).toArray().filter(L=>L)}dumpLru(){return this[m]}set(L,E,D){if((D=D||this[o])&&"number"!=typeof D)throw new TypeError("maxAge must be a number");const G=D?Date.now():0,K=this[v](E,L);if(this[c].has(L)){if(K>this[u])return I(this,this[c].get(L)),!1;const ie=this[c].get(L).value;return this[l]&&(this[d]||this[l](L,ie.value)),ie.now=G,ie.maxAge=D,ie.value=E,this[F]+=K-ie.length,ie.length=K,this.get(L),T(this),!0}const H=new W(L,E,K,G,D);return H.length>this[u]?(this[l]&&this[l](L,E),!1):(this[F]+=H.length,this[m].unshift(H),this[c].set(L,this[m].head),T(this),!0)}has(L){if(!this[c].has(L))return!1;const E=this[c].get(L).value;return!w(this,E)}get(L){return f(this,L,!0)}peek(L){return f(this,L,!1)}pop(){const L=this[m].tail;return L?(I(this,L),L.value):null}del(L){I(this,this[c].get(L))}load(L){this.reset();const E=Date.now();for(let D=L.length-1;D>=0;D--){const G=L[D],K=G.e||0;if(0===K)this.set(G.k,G.v);else{const H=K-E;H>0&&this.set(G.k,G.v,H)}}}prune(){this[c].forEach((L,E)=>f(this,E,!1))}}},{yallist:121}],51:[function(J,re,le){var q=J;J=function(){},le=re.exports={Lexer:J("./lib/N3Lexer"),Parser:J("./lib/N3Parser"),Writer:J("./lib/N3Writer"),Store:J("./lib/N3Store"),StreamParser:J("./lib/N3StreamParser"),StreamWriter:J("./lib/N3StreamWriter"),Util:J("./lib/N3Util")},Object.keys(le).forEach(function(u){Object.defineProperty(le,u,{configurable:!0,enumerable:!0,get:function(){return delete le[u],le[u]=q("./lib/N3"+u)}})})},{"./lib/N3Lexer":52,"./lib/N3Parser":53,"./lib/N3Store":54,"./lib/N3StreamParser":55,"./lib/N3StreamWriter":56,"./lib/N3Util":57,"./lib/N3Writer":58}],52:[function(J,re,le){(function(q){(function(){var u=String.fromCharCode,F="function"==typeof q?q:function(d){setTimeout(d,0)},v=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},o=/[\x00-\x20<>\\"\{\}\|\^\`]/;function l(d){if(!(this instanceof l))return new l(d);if((d=d||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var m=this;this._tokenize=this.tokenize,this.tokenize=function(c,k){this._tokenize(c,function(y,f){!y&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(f.type)?k&&k(y,f):k&&k(y||m._syntaxError(f.type,k=null))})}}this._n3Mode=!1!==d.n3,this._comments=!!d.comments}l.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(d,m){for(var c=this._input,k=this._comments;;){for(var y,f;y=this._newline.exec(c);)k&&(f=this._comment.exec(y[0]))&&d(null,{line:this._line,type:"comment",value:f[1],prefix:""}),c=c.substr(y[0].length,c.length),this._line++;if((y=this._whitespace.exec(c))&&(c=c.substr(y[0].length,c.length)),this._endOfFile.test(c))return m&&(k&&(f=this._comment.exec(c))&&d(null,{line:this._line,type:"comment",value:f[1],prefix:""}),d(c=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=c;var w,T=this._line,I="",W="",B="",L=c[0],E=null,D=0,G=!1;switch(L){case"^":if(c.length<3)break;if("^"!==c[1]){this._n3Mode&&(D=1,I="^");break}if(this._previousMarker="^^","<"!==(c=c.substr(2))[0]){G=!0;break}case"<":if(E=this._unescapedIri.exec(c))I="IRI",W=E[1];else if(E=this._iri.exec(c)){if(null===(w=this._unescape(E[1]))||o.test(w))return H(this);I="IRI",W=w}else this._n3Mode&&c.length>1&&"="===c[1]&&(I="inverse",D=2,W="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((E=this._blank.exec(c))||m&&(E=this._blank.exec(c+" ")))&&(I="blank",B="_",W=E[1]);break;case'"':case"'":if(E=this._unescapedString.exec(c))I="literal",W=E[0];else if(E=this._singleQuotedString.exec(c)){if(null===(w=this._unescape(E[0])))return H(this);I="literal",W=w.replace(/^'|'$/g,'"')}else if(E=this._tripleQuotedString.exec(c)){if(w=E[1]||E[2],this._line+=w.split(/\r\n|\r|\n/).length-1,null===(w=this._unescape(w)))return H(this);I="literal",W=w.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(E=this._variable.exec(c))&&(I="var",W=E[0]);break;case"@":"literal"===this._previousMarker&&(E=this._langcode.exec(c))?(I="langcode",W=E[1]):(E=this._keyword.exec(c))&&(I=E[0]);break;case".":if(1===c.length?m:c[1]<"0"||c[1]>"9"){I=".",D=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(E=this._number.exec(c)||m&&(E=this._number.exec(c+" ")))&&(I="literal",W='"'+E[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(E[1]?"double":/^[+\-]?\d+$/.test(E[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(E=this._sparqlKeyword.exec(c))?I=E[0].toUpperCase():G=!0;break;case"f":case"t":(E=this._boolean.exec(c))?(I="literal",W='"'+E[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):G=!0;break;case"a":(E=this._shortPredicates.exec(c))?(I="abbreviation",W="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):G=!0;break;case"=":this._n3Mode&&c.length>1&&(I="abbreviation",">"!==c[1]?(D=1,W="http://www.w3.org/2002/07/owl#sameAs"):(D=2,W="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":D=1,I=L;break;default:G=!0}if(G&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(E=this._prefix.exec(c))?((E=this._prefixed.exec(c))||m&&(E=this._prefixed.exec(c+" ")))&&(I="prefixed",B=E[1]||"",W=this._unescape(E[2])):(I="prefix",W=E[1]||"")),"^^"===this._previousMarker)switch(I){case"prefixed":I="type";break;case"IRI":I="typeIRI";break;default:I=""}if(!I)return m||!/^'''|^"""/.test(c)&&/\n|\r/.test(c)?H(this):this._input=c;var K={line:T,type:I,value:W,prefix:B};d(null,K),this.previousToken=K,this._previousMarker=I,c=c.substr(D||E[0].length,c.length)}function H(ie){d(ie._syntaxError(/^\S*/.exec(c)[0]))}},_unescape:function(d){try{return d.replace(v,function(m,c,k,y){var f;if(c){if(f=parseInt(c,16),isNaN(f))throw new Error;return u(f)}if(k){if(f=parseInt(k,16),isNaN(f))throw new Error;return f<=65535?u(f):u(55296+(f-=65536)/1024,56320+(1023&f))}var w=e[y];if(!w)throw new Error;return w})}catch(m){return null}},_syntaxError:function(d){this._input=null;var m=new Error('Unexpected "'+d+'" on line '+this._line+".");return m.context={token:void 0,line:this._line,previousToken:this.previousToken},m},tokenize:function(d,m){var c=this;if(this._line=1,"string"==typeof d){if(this._input=d,"function"!=typeof m){var k,y=[];if(this._tokenizeToEnd(function(f,w){f?k=f:y.push(w)},!0),k)throw k;return y}F(function(){c._tokenizeToEnd(m,!0)})}else this._input="","function"==typeof d.setEncoding&&d.setEncoding("utf8"),d.on("data",function(f){null!==c._input&&(c._input+=f,c._tokenizeToEnd(m,!1))}),d.on("end",function(){null!==c._input&&c._tokenizeToEnd(m,!0)}),d.on("error",m)}},re.exports=l}).call(this)}).call(this,J("timers").setImmediate)},{timers:111}],53:[function(J,re,le){var q=J("./N3Lexer"),u="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F=u+"nil",v=u+"first",e=u+"rest",o=/^[a-z][a-z0-9+.-]*:/i,l=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,d=/(?:^|\/)\.\.?(?:$|[\/#?])/,m=0,c=0;function k(f){if(!(this instanceof k))return new k(f);this._contextStack=[],this._graph=null,f=f||{},this._setBase(f.documentIRI);var w="string"==typeof f.format?f.format.match(/\w*$/)[0].toLowerCase():"",T="turtle"===w,I="trig"===w,W=/triple/.test(w),B=/quad/.test(w),L=this._n3Mode=/n3/.test(w),E=W||B;(this._supportsNamedGraphs=!(T||L))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(T||I||W||L),E&&(this._base="",this._resolveIRI=function(D){return this._error("Disallowed relative IRI",D),this._callback=y,this._subject=null}),this._blankNodePrefix="string"!=typeof f.blankNodePrefix?"":"_:"+f.blankNodePrefix.replace(/^_:/,""),this._lexer=f.lexer||new q({lineMode:E,n3:L}),this._explicitQuantifiers=!!f.explicitQuantifiers}function y(){}k._resetBlankNodeIds=function(){m=c=0},k.prototype={_setBase:function(f){if(f){var w=f.indexOf("#");w>=0&&(f=f.substr(0,w)),this._base=f,this._basePath=f.indexOf("/")<0?f:f.replace(/[^\/?]*(?:\?.*)?$/,""),f=f.match(l),this._baseRoot=f[0],this._baseScheme=f[1]}else this._base=null},_saveContext:function(f,w,T,I,W){var B=this._n3Mode;this._contextStack.push({subject:T,predicate:I,object:W,graph:w,type:f,inverse:!!B&&this._inversePredicate,blankPrefix:B?this._prefixes._:"",quantified:B?this._quantified:null}),B&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var f=this._contextStack.pop(),w=this._n3Mode;this._subject=f.subject,this._predicate=f.predicate,this._object=f.object,this._graph=f.graph,w&&(this._inversePredicate=f.inverse,this._prefixes._=f.blankPrefix,this._quantified=f.quantified)},_readInTopContext:function(f){switch(f.type){case"eof":return null!==this._graph?this._error("Unclosed graph",f):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(f)}},_readEntity:function(f,w){var T;switch(f.type){case"IRI":case"typeIRI":T=null===this._base||o.test(f.value)?f.value:this._resolveIRI(f);break;case"type":case"blank":case"prefixed":var I=this._prefixes[f.prefix];if(void 0===I)return this._error('Undefined prefix "'+f.prefix+':"',f);T=I+f.value;break;case"var":return f.value;default:return this._error("Expected entity but got "+f.type,f)}return!w&&this._n3Mode&&T in this._quantified&&(T=this._quantified[T]),T},_readSubject:function(f){switch(this._predicate=null,f.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+c++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,F,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+c++,null,null),this._readSubject):this._error("Unexpected graph",f);case"}":return this._readPunctuation(f);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',f);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',f);default:if(void 0===(this._subject=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(f){var w=f.type;switch(w){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=f.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+w,f):(this._subject=null,"]"===w?this._readBlankNodeTail(f):this._readPunctuation(f));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",f);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",f);default:if(void 0===(this._predicate=this._readEntity(f)))return}return this._readObject},_readObject:function(f){switch(f.type){case"literal":return this._object=f.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+c++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,F),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+c++),this._readSubject):this._error("Unexpected graph",f);default:if(void 0===(this._object=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(f){return"{"===f.type?this._readGraph(f):this._readPredicate(f)},_readGraph:function(f){return"{"!==f.type?this._error("Expected graph but got "+f.type,f):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(f){return"]"===f.type?(this._subject=null,this._readBlankNodeTail(f)):(this._predicate=null,this._readPredicate(f))},_readBlankNodeTail:function(f){if("]"!==f.type)return this._readBlankNodePunctuation(f);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var w=null===this._predicate;return this._restoreContext(),null===this._object?w?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(f){return"."!==f.type||this._contextStack.length?this._readPredicate(f):(this._subject=null,this._readPunctuation(f))},_readListItem:function(f){var w=null,T=null,I=this._subject,W=this._contextStack,B=W[W.length-1],L=this._readListItem,E=!0;switch(f.type){case"[":this._saveContext("blank",this._graph,T="_:b"+c++,v,this._subject=w="_:b"+c++),L=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,T="_:b"+c++,v,F),this._subject=null;break;case")":if(this._restoreContext(),0!==W.length&&"list"===W[W.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(L=this._readPredicate,this._subject===F)return L}else if(L=this._getContextEndReader(),this._object===F)return L;T=F;break;case"literal":w=f.value,E=!1,L=this._readListItemDataTypeOrLang;break;default:if(void 0===(w=this._readEntity(f)))return}if(null===T&&(this._subject=T="_:b"+c++),null===I?null===B.predicate?B.subject=T:B.object=T:this._triple(I,e,T,this._graph),null!==w){if(this._n3Mode&&("IRI"===f.type||"prefixed"===f.type))return this._saveContext("item",this._graph,T,v,w),this._subject=w,this._predicate=null,this._getPathReader(this._readListItem);E?this._triple(T,v,w,this._graph):this._object=w}return L},_readDataTypeOrLang:function(f){return this._completeLiteral(f,!1)},_readListItemDataTypeOrLang:function(f){return this._completeLiteral(f,!0)},_completeLiteral:function(f,w){var T=!1;switch(f.type){case"type":case"typeIRI":var I=this._readEntity(f);if(void 0===I)return;T=!0,this._object+="^^"+I;break;case"langcode":T=!0,this._object+="@"+f.value.toLowerCase()}return w&&this._triple(this._subject,v,this._object,this._graph),T?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(f))},_readFormulaTail:function(f){return"}"!==f.type?this._readPunctuation(f):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(f){var w,T=this._subject,I=this._graph,W=this._inversePredicate;switch(f.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",f);if(this._n3Mode)return this._readFormulaTail(f);this._graph=null;case".":this._subject=null,w=this._contextStack.length?this._readSubject:this._readInTopContext,W&&(this._inversePredicate=!1);break;case";":w=this._readPredicate;break;case",":w=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(I=this._readEntity(f))){w=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',f)}if(null!==T){var B=this._predicate,L=this._object;W?this._triple(L,B,T,I):this._triple(T,B,L,I)}return w},_readBlankNodePunctuation:function(f){var w;switch(f.type){case";":w=this._readPredicate;break;case",":w=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',f)}return this._triple(this._subject,this._predicate,this._object,this._graph),w},_readQuadPunctuation:function(f){return"."!==f.type?this._error("Expected dot to follow quad",f):this._readInTopContext},_readPrefix:function(f){return"prefix"!==f.type?this._error("Expected prefix to follow @prefix",f):(this._prefix=f.value,this._readPrefixIRI)},_readPrefixIRI:function(f){if("IRI"!==f.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',f);var w=this._readEntity(f);return this._prefixes[this._prefix]=w,this._prefixCallback(this._prefix,w),this._readDeclarationPunctuation},_readBaseIRI:function(f){return"IRI"!==f.type?this._error("Expected IRI to follow base declaration",f):(this._setBase(null===this._base||o.test(f.value)?f.value:this._resolveIRI(f)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(f){switch(f.type){case"IRI":case"blank":case"prefixed":return this._readSubject(f),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",f)}},_readNamedGraphBlankLabel:function(f){return"]"!==f.type?this._error("Invalid graph label",f):(this._subject="_:b"+c++,this._readGraph)},_readDeclarationPunctuation:function(f){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(f)):"."!==f.type?this._error("Expected declaration to end with a dot",f):this._readInTopContext},_readQuantifierList:function(f){var w;switch(f.type){case"IRI":case"prefixed":if(void 0!==(w=this._readEntity(f,!0)))break;default:return this._error("Unexpected "+f.type,f)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+c++,"urn:n3:quantifiers"):this._triple(this._subject,e,this._subject="_:b"+c++,"urn:n3:quantifiers"),this._triple(this._subject,v,w,"urn:n3:quantifiers")):this._quantified[w]=this._quantifiedPrefix+c++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(f){return","===f.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,F,"urn:n3:quantifiers"),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(f))},_getPathReader:function(f){return this._afterPath=f,this._readPath},_readPath:function(f){switch(f.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var w=this._contextStack,T=w.length&&w[w.length-1];if(T&&"item"===T.type){var I=this._subject;this._restoreContext(),this._triple(this._subject,v,I,this._graph)}return this._afterPath(f)}},_readForwardPath:function(f){var w,T,I="_:b"+c++;if(void 0!==(T=this._readEntity(f)))return null===this._predicate?(w=this._subject,this._subject=I):(w=this._object,this._object=I),this._triple(w,T,I,this._graph),this._readPath},_readBackwardPath:function(f){var w,T,I="_:b"+c++;if(void 0!==(w=this._readEntity(f)))return null===this._predicate?(T=this._subject,this._subject=I):(T=this._object,this._object=I),this._triple(I,w,T,this._graph),this._readPath},_getContextEndReader:function(){var f=this._contextStack;if(!f.length)return this._readPunctuation;switch(f[f.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(f,w,T,I){this._callback(null,{subject:f,predicate:w,object:T,graph:I||""})},_error:function(f,w){var T=new Error(f+" on line "+w.line+".");T.context={token:w,line:w.line,previousToken:this._lexer.previousToken},this._callback(T),this._callback=y},_resolveIRI:function(f){var w=f.value;switch(w[0]){case void 0:return this._base;case"#":return this._base+w;case"?":return this._base.replace(/(?:\?.*)?$/,w);case"/":return("/"===w[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(w);default:return this._removeDotSegments(this._basePath+w)}},_removeDotSegments:function(f){if(!d.test(f))return f;for(var w="",T=f.length,I=-1,W=-1,B=0,L="/";I<T;){switch(L){case":":if(W<0&&"/"===f[++I]&&"/"===f[++I])for(;(W=I+1)<T&&"/"!==f[W];)I=W;break;case"?":case"#":I=T;break;case"/":if("."===f[I+1])switch(L=f[1+ ++I]){case"/":w+=f.substring(B,I-1),B=I+1;break;case void 0:case"?":case"#":return w+f.substring(B,I)+f.substr(I+1);case".":if(void 0===(L=f[1+ ++I])||"/"===L||"?"===L||"#"===L){if((B=(w+=f.substring(B,I-2)).lastIndexOf("/"))>=W&&(w=w.substr(0,B)),"/"!==L)return w+"/"+f.substr(I+1);B=I+1}}}L=f[++I]}return w+f.substring(B)},parse:function(f,w,T){var I=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+m+++"_",this._prefixCallback=T||y,this._inversePredicate=!1,this._quantified=Object.create(null),!w){var W,B=[];if(this._callback=function(L,E){L?W=L:E&&B.push(E)},this._lexer.tokenize(f).every(function(L){return I._readCallback=I._readCallback(L)}),W)throw W;return B}this._callback=w,this._lexer.tokenize(f,function(L,E){null!==L?(I._callback(L),I._callback=y):I._readCallback&&(I._readCallback=I._readCallback(E))})}},re.exports=k},{"./N3Lexer":52}],54:[function(J,re,le){var q=J("./N3Util").expandPrefixedName;function u(v,e){if(!(this instanceof u))return new u(v,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!v||v[0]||(e=v,v=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),v&&this.addTriples(v)}function F(v){return"string"==typeof v||v instanceof String}u.prototype={get size(){var v=this._size;if(null!==v)return v;v=0;var e,o,l=this._graphs;for(var d in l)for(var m in e=l[d].subjects)for(var c in o=e[m])v+=Object.keys(o[c]).length;return this._size=v},_addToIndex:function(v,e,o,l){var d=v[e]||(v[e]={}),m=d[o]||(d[o]={}),c=l in m;return c||(m[l]=null),!c},_removeFromIndex:function(v,e,o,l){var d,m=v[e],c=m[o];for(d in delete c[l],c)return;for(d in delete m[o],m)return;delete v[e]},_findInIndex:function(v,e,o,l,d,m,c,k,y,f){var w,T,I,W=!e+!o+!l>1?Object.keys(this._ids):this._entities;for(var B in e&&((w=v,v={})[e]=w[e]),v){var L=W[B];if(T=v[B])for(var E in o&&((w=T,T={})[o]=w[o]),T){var D=W[E];if(I=T[E])for(var G=(l?l in I?[l]:[]:Object.keys(I)),K=G.length-1;K>=0;K--){var H={subject:"",predicate:"",object:"",graph:k};if(H[d]=L,H[m]=D,H[c]=W[G[K]],f)f.push(H);else if(y(H))return!0}}}return f},_loop:function(v,e){for(var o in v)e(o)},_loopByKey0:function(v,e,o){var l,d;if(l=v[e])for(d in l)o(d)},_loopByKey1:function(v,e,o){var l;for(l in v)v[l][e]&&o(l)},_loopBy2Keys:function(v,e,o,l){var d,m,c;if((d=v[e])&&(m=d[o]))for(c in m)l(c)},_countInIndex:function(v,e,o,l){var d,m,c,k=0;for(var y in e&&((d=v,v={})[e]=d[e]),v)if(m=v[y])for(var f in o&&((d=m,m={})[o]=d[o]),m)(c=m[f])&&(l?l in c&&k++:k+=Object.keys(c).length);return k},_getGraphs:function(v){if(!F(v))return this._graphs;var e={};return e[v]=this._graphs[v],e},_uniqueEntities:function(v){var e=Object.create(null),o=this._entities;return function(l){l in e||(e[l]=!0,v(o[l]))}},addTriple:function(v,e,o,l){e||(l=v.graph,o=v.object,e=v.predicate,v=v.subject),l=l||"";var d=this._graphs[l];d||(d=this._graphs[l]={subjects:{},predicates:{},objects:{}},Object.freeze(d));var m=this._ids,c=this._entities;v=m[v]||(m[c[++this._id]=v]=this._id),e=m[e]||(m[c[++this._id]=e]=this._id),o=m[o]||(m[c[++this._id]=o]=this._id);var k=this._addToIndex(d.subjects,v,e,o);return this._addToIndex(d.predicates,e,o,v),this._addToIndex(d.objects,o,v,e),this._size=null,k},addTriples:function(v){for(var e=v.length-1;e>=0;e--)this.addTriple(v[e])},addPrefix:function(v,e){this._prefixes[v]=e},addPrefixes:function(v){for(var e in v)this.addPrefix(e,v[e])},removeTriple:function(v,e,o,l){e||(l=v.graph,o=v.object,e=v.predicate,v=v.subject),l=l||"";var d,m,c,k=this._ids,y=this._graphs;if(!((v=k[v])&&(e=k[e])&&(o=k[o])&&(d=y[l])&&(m=d.subjects[v])&&(c=m[e])&&o in c))return!1;for(v in this._removeFromIndex(d.subjects,v,e,o),this._removeFromIndex(d.predicates,e,o,v),this._removeFromIndex(d.objects,o,v,e),null!==this._size&&this._size--,d.subjects)return!0;return delete y[l],!0},removeTriples:function(v){for(var e=v.length-1;e>=0;e--)this.removeTriple(v[e])},getTriples:function(v,e,o,l){var d=this._prefixes;return this.getTriplesByIRI(q(v,d),q(e,d),q(o,d),q(l,d))},getTriplesByIRI:function(v,e,o,l){var d,m,c,k,y=[],f=this._getGraphs(l),w=this._ids;if(F(v)&&!(m=w[v])||F(e)&&!(c=w[e])||F(o)&&!(k=w[o]))return y;for(var T in f)(d=f[T])&&(m?k?this._findInIndex(d.objects,k,m,c,"object","subject","predicate",T,null,y):this._findInIndex(d.subjects,m,c,null,"subject","predicate","object",T,null,y):c?this._findInIndex(d.predicates,c,k,null,"predicate","object","subject",T,null,y):k?this._findInIndex(d.objects,k,null,null,"object","subject","predicate",T,null,y):this._findInIndex(d.subjects,null,null,null,"subject","predicate","object",T,null,y));return y},countTriples:function(v,e,o,l){var d=this._prefixes;return this.countTriplesByIRI(q(v,d),q(e,d),q(o,d),q(l,d))},countTriplesByIRI:function(v,e,o,l){var d,m,c,k,y=0,f=this._getGraphs(l),w=this._ids;if(F(v)&&!(m=w[v])||F(e)&&!(c=w[e])||F(o)&&!(k=w[o]))return 0;for(var T in f)(d=f[T])&&(y+=v?o?this._countInIndex(d.objects,k,m,c):this._countInIndex(d.subjects,m,c,k):e?this._countInIndex(d.predicates,c,k,m):this._countInIndex(d.objects,k,m,c));return y},forEach:function(v,e,o,l,d){var m=this._prefixes;this.forEachByIRI(v,q(e,m),q(o,m),q(l,m),q(d,m))},forEachByIRI:function(v,e,o,l,d){this.someByIRI(function(m){return v(m),!1},e,o,l,d)},every:function(v,e,o,l,d){var m=this._prefixes;return this.everyByIRI(v,q(e,m),q(o,m),q(l,m),q(d,m))},everyByIRI:function(v,e,o,l,d){var m=!1,c=!this.someByIRI(function(k){return m=!0,!v(k)},e,o,l,d);return m&&c},some:function(v,e,o,l,d){var m=this._prefixes;return this.someByIRI(v,q(e,m),q(o,m),q(l,m),q(d,m))},someByIRI:function(v,e,o,l,d){var m,c,k,y,f=this._getGraphs(d),w=this._ids;if(F(e)&&!(c=w[e])||F(o)&&!(k=w[o])||F(l)&&!(y=w[l]))return!1;for(var T in f)if(m=f[T])if(c){if(y){if(this._findInIndex(m.objects,y,c,k,"object","subject","predicate",T,v,null))return!0}else if(this._findInIndex(m.subjects,c,k,null,"subject","predicate","object",T,v,null))return!0}else if(k){if(this._findInIndex(m.predicates,k,y,null,"predicate","object","subject",T,v,null))return!0}else if(y){if(this._findInIndex(m.objects,y,null,null,"object","subject","predicate",T,v,null))return!0}else if(this._findInIndex(m.subjects,null,null,null,"subject","predicate","object",T,v,null))return!0;return!1},getSubjects:function(v,e,o){var l=this._prefixes;return this.getSubjectsByIRI(q(v,l),q(e,l),q(o,l))},getSubjectsByIRI:function(v,e,o){var l=[];return this.forSubjectsByIRI(function(d){l.push(d)},v,e,o),l},forSubjects:function(v,e,o,l){var d=this._prefixes;this.forSubjectsByIRI(v,q(e,d),q(o,d),q(l,d))},forSubjectsByIRI:function(v,e,o,l){var d,m,c,k=this._ids,y=this._getGraphs(l);if(v=this._uniqueEntities(v),!(F(e)&&!(m=k[e])||F(o)&&!(c=k[o])))for(l in y)(d=y[l])&&(m?c?this._loopBy2Keys(d.predicates,m,c,v):this._loopByKey1(d.subjects,m,v):c?this._loopByKey0(d.objects,c,v):this._loop(d.subjects,v))},getPredicates:function(v,e,o){var l=this._prefixes;return this.getPredicatesByIRI(q(v,l),q(e,l),q(o,l))},getPredicatesByIRI:function(v,e,o){var l=[];return this.forPredicatesByIRI(function(d){l.push(d)},v,e,o),l},forPredicates:function(v,e,o,l){var d=this._prefixes;this.forPredicatesByIRI(v,q(e,d),q(o,d),q(l,d))},forPredicatesByIRI:function(v,e,o,l){var d,m,c,k=this._ids,y=this._getGraphs(l);if(v=this._uniqueEntities(v),!(F(e)&&!(m=k[e])||F(o)&&!(c=k[o])))for(l in y)(d=y[l])&&(m?c?this._loopBy2Keys(d.objects,c,m,v):this._loopByKey0(d.subjects,m,v):c?this._loopByKey1(d.predicates,c,v):this._loop(d.predicates,v))},getObjects:function(v,e,o){var l=this._prefixes;return this.getObjectsByIRI(q(v,l),q(e,l),q(o,l))},getObjectsByIRI:function(v,e,o){var l=[];return this.forObjectsByIRI(function(d){l.push(d)},v,e,o),l},forObjects:function(v,e,o,l){var d=this._prefixes;this.forObjectsByIRI(v,q(e,d),q(o,d),q(l,d))},forObjectsByIRI:function(v,e,o,l){var d,m,c,k=this._ids,y=this._getGraphs(l);if(v=this._uniqueEntities(v),!(F(e)&&!(m=k[e])||F(o)&&!(c=k[o])))for(l in y)(d=y[l])&&(m?c?this._loopBy2Keys(d.subjects,m,c,v):this._loopByKey1(d.objects,m,v):c?this._loopByKey0(d.predicates,c,v):this._loop(d.objects,v))},getGraphs:function(v,e,o){var l=this._prefixes;return this.getGraphsByIRI(q(v,l),q(e,l),q(o,l))},getGraphsByIRI:function(v,e,o){var l=[];return this.forGraphsByIRI(function(d){l.push(d)},v,e,o),l},forGraphs:function(v,e,o,l){var d=this._prefixes;this.forGraphsByIRI(v,q(e,d),q(o,d),q(l,d))},forGraphsByIRI:function(v,e,o,l){for(var d in this._graphs)this.someByIRI(function(m){return v(m.graph),!0},e,o,l,d)},createBlankNode:function(v){var e,o;if(v)for(e=v="_:"+v,o=1;this._ids[e];)e=v+o++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},re.exports=u},{"./N3Util":57}],55:[function(J,re,le){var q=J("stream").Transform,u=J("util"),F=J("./N3Parser.js");function v(e){if(!(this instanceof v))return new v(e);q.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var o,l,d=this;new F(e).parse({on:function(m,c){switch(m){case"data":o=c;break;case"end":l=c}}},function(m,c){m&&d.emit("error",m)||c&&d.push(c)},function(m,c){d.emit("prefix",m,c)}),this._transform=function(m,c,k){o(m),k()},this._flush=function(m){l(),m()}}u.inherits(v,q),re.exports=v},{"./N3Parser.js":53,stream:76,util:117}],56:[function(J,re,le){var q=J("stream").Transform,u=J("util"),F=J("./N3Writer.js");function v(e){if(!(this instanceof v))return new v(e);q.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var o=this,l=new F({write:function(d,m,c){o.push(d),c&&c()},end:function(d){o.push(null),d&&d()}},e);this._transform=function(d,m,c){l.addTriple(d,c)},this._flush=function(d){l.end(d)}}u.inherits(v,q),re.exports=v},{"./N3Writer.js":58,stream:76,util:117}],57:[function(J,re,le){var u="http://www.w3.org/2001/XMLSchema#double",F={isIRI:function(v){if("string"!=typeof v)return!1;if(0===v.length)return!0;var e=v[0];return'"'!==e&&"_"!==e},isLiteral:function(v){return"string"==typeof v&&'"'===v[0]},isBlank:function(v){return"string"==typeof v&&"_:"===v.substr(0,2)},isDefaultGraph:function(v){return!v},inDefaultGraph:function(v){return!v.graph},getLiteralValue:function(v){var e=/^"([^]*)"/.exec(v);if(!e)throw new Error(v+" is not a literal");return e[1]},getLiteralType:function(v){var e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(v);if(!e)throw new Error(v+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(v){var e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(v);if(!e)throw new Error(v+" is not a literal");return e[1]?e[1].toLowerCase():""},isPrefixedName:function(v){return"string"==typeof v&&/^[^:\/"']*:[^:\/"']+$/.test(v)},expandPrefixedName:function(v,e){var o,l,d,m=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(v);return m&&(l=e[o=m[1]],d=m.index),void 0===l?v:0===d?l+v.substr(o.length+1):v.substr(0,d+3)+l+v.substr(d+o.length+4)},createIRI:function(v){return v&&'"'===v[0]?F.getLiteralValue(v):v},createLiteral:function(v,e){if(!e)switch(typeof v){case"boolean":e="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":isFinite(v)?e=v%1==0?"http://www.w3.org/2001/XMLSchema#integer":u:(e=u,isNaN(v)||(v=v>0?"INF":"-INF"));break;default:return'"'+v+'"'}return'"'+v+(/^[a-z]+(-[a-z0-9]+)*$/i.test(e)?'"@'+e.toLowerCase():'"^^'+e)},prefix:function(v){return F.prefixes({"":v})("")},prefixes:function(v){var e=Object.create(null);for(var o in v)l(o,v[o]);function l(d,m){if(m||!(d in e)){var c=Object.create(null);m=m||"",e[d]=function(k){return c[k]||(c[k]=m+k)}}return e[d]}return l}};re.exports=F},{}],58:[function(J,re,le){var q=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,u=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,F=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,v={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(l,d){if(!(this instanceof e))return new e(l,d);if(l&&"function"!=typeof l.write&&(d=l,l=null),d=d||{},l)this._outputStream=l,this._endStream=void 0===d.end||!!d.end;else{var m="";this._outputStream={write:function(c,k,y){m+=c,y&&y()},end:function(c){c&&c(null,m)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(d.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),d.prefixes&&this.addPrefixes(d.prefixes))}function o(l){var d=v[l];return void 0===d&&(1===l.length?(d=l.charCodeAt(0).toString(16),d="\\u0000".substr(0,6-d.length)+d):(d=(1024*(l.charCodeAt(0)-55296)+l.charCodeAt(1)+9216).toString(16),d="\\U00000000".substr(0,10-d.length)+d)),d}e.prototype={_write:function(l,d){this._outputStream.write(l,"utf8",d)},_writeTriple:function(l,d,m,c,k){try{this._graph!==c&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(c?this._encodeIriOrBlankNode(c)+" {\n":"")),this._subject=null,this._graph="["!==c[0]?c:"]"),this._subject===l?this._predicate===d?this._write(", "+this._encodeObject(m),k):this._write(";\n    "+this._encodePredicate(this._predicate=d)+" "+this._encodeObject(m),k):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=l)+" "+this._encodePredicate(this._predicate=d)+" "+this._encodeObject(m),k)}catch(y){k&&k(y)}},_writeTripleLine:function(l,d,m,c,k){delete this._prefixMatch;try{this._write(this.tripleToString(l,d,m,c),k)}catch(y){k&&k(y)}},tripleToString:function(l,d,m,c){return this._encodeIriOrBlankNode(l)+" "+this._encodeIriOrBlankNode(d)+" "+this._encodeObject(m)+(c?" "+this._encodeIriOrBlankNode(c)+".\n":".\n")},triplesToString:function(l){return l.map(function(d){return this.tripleToString(d.subject,d.predicate,d.object,d.graph)},this).join("")},_encodeIriOrBlankNode:function(l){var d=l[0];if("["===d||"("===d||"_"===d&&":"===l[1])return l;u.test(l)&&(l=l.replace(F,o));var m=this._prefixRegex.exec(l);return m?m[1]?this._prefixIRIs[m[1]]+m[2]:l:"<"+l+">"},_encodeLiteral:function(l,d,m){return u.test(l)&&(l=l.replace(F,o)),m?'"'+l+'"@'+m:d?'"'+l+'"^^'+this._encodeIriOrBlankNode(d):'"'+l+'"'},_encodeSubject:function(l){if('"'===l[0])throw new Error("A literal as subject is not allowed: "+l);return"["===l[0]&&(this._subject="]"),this._encodeIriOrBlankNode(l)},_encodePredicate:function(l){if('"'===l[0])throw new Error("A literal as predicate is not allowed: "+l);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===l?"a":this._encodeIriOrBlankNode(l)},_encodeObject:function(l){if('"'!==l[0])return this._encodeIriOrBlankNode(l);var d=q.exec(l);if(!d)throw new Error("Invalid literal: "+l);return this._encodeLiteral(d[1],d[2],d[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(l,d,m,c,k){void 0===m?this._writeTriple(l.subject,l.predicate,l.object,l.graph||"",d):"string"!=typeof c?this._writeTriple(l,d,m,"",c):this._writeTriple(l,d,m,c,k)},addTriples:function(l){for(var d=0;d<l.length;d++)this.addTriple(l[d])},addPrefix:function(l,d,m){var c={};c[l]=d,this.addPrefixes(c,m)},addPrefixes:function(l,d){var m=this._prefixIRIs,c=!1;for(var k in l){var y=l[k];/[#\/]$/.test(y)&&m[y]!==(k+=":")&&(c=!0,m[y]=k,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+k+" <"+y+">.\n"))}if(c){var f="",w="";for(var T in m)f+=f?"|"+T:T,w+=(w?"|":"")+m[T];f=f.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+w+")[^/]*$|^("+f+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(c?"\n":"",d)},blank:function(l,d){var m,c,k=l;switch(void 0===l?k=[]:"string"==typeof l?k=[{predicate:l,object:d}]:"length"in l||(k=[l]),c=k.length){case 0:return"[]";case 1:if("["!==(m=k[0]).object[0])return"[ "+this._encodePredicate(m.predicate)+" "+this._encodeObject(m.object)+" ]";default:for(var y="[",f=0;f<c;f++)(m=k[f]).predicate===l?y+=", "+this._encodeObject(m.object):(y+=(f?";\n  ":"\n  ")+this._encodePredicate(m.predicate)+" "+this._encodeObject(m.object),l=m.predicate);return y+"\n]"}},list:function(l){for(var d=l&&l.length||0,m=new Array(d),c=0;c<d;c++)m[c]=this._encodeObject(l[c]);return"("+m.join(" ")+")"},_prefixRegex:/$0^/,end:function(l){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var d=l&&function(m,c){d=null,l(m,c)};if(this._endStream)try{return this._outputStream.end(d)}catch(m){}d&&d()}},re.exports=e},{}],59:[function(J,re,le){var q,u,F=re.exports={};function v(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(T){if(q===setTimeout)return setTimeout(T,0);if((q===v||!q)&&setTimeout)return q=setTimeout,setTimeout(T,0);try{return q(T,0)}catch(I){try{return q.call(null,T,0)}catch(W){return q.call(this,T,0)}}}!function(){try{q="function"==typeof setTimeout?setTimeout:v}catch(T){q=v}try{u="function"==typeof clearTimeout?clearTimeout:e}catch(T){u=e}}();var l,d=[],m=!1,c=-1;function k(){m&&l&&(m=!1,l.length?d=l.concat(d):c=-1,d.length&&y())}function y(){if(!m){var T=o(k);m=!0;for(var I=d.length;I;){for(l=d,d=[];++c<I;)l&&l[c].run();c=-1,I=d.length}l=null,m=!1,function(W){if(u===clearTimeout)return clearTimeout(W);if((u===e||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(W);try{u(W)}catch(B){try{return u.call(null,W)}catch(L){return u.call(this,W)}}}(T)}}function f(T,I){this.fun=T,this.array=I}function w(){}F.nextTick=function(T){var I=new Array(arguments.length-1);if(arguments.length>1)for(var W=1;W<arguments.length;W++)I[W-1]=arguments[W];d.push(new f(T,I)),1!==d.length||m||o(y)},f.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=w,F.addListener=w,F.once=w,F.off=w,F.removeListener=w,F.removeAllListeners=w,F.emit=w,F.prependListener=w,F.prependOnceListener=w,F.listeners=function(T){return[]},F.binding=function(T){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(T){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},{}],60:[function(J,re,le){(function(q){(function(){!function(u){var F="object"==typeof le&&le&&!le.nodeType&&le,v="object"==typeof re&&re&&!re.nodeType&&re,e="object"==typeof q&&q;e.global!==e&&e.window!==e&&e.self!==e||(u=e);var o,l,d=2147483647,m=36,W=/^xn--/,B=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=Math.floor,K=String.fromCharCode;function H(ve){throw new RangeError(E[ve])}function ie(ve,Fe){for(var Ne=ve.length,Se=[];Ne--;)Se[Ne]=Fe(ve[Ne]);return Se}function ue(ve,Fe){var Ne=ve.split("@"),Se="";return Ne.length>1&&(Se=Ne[0]+"@",ve=Ne[1]),Se+ie((ve=ve.replace(L,".")).split("."),Fe).join(".")}function ce(ve){for(var Fe,Ne,Se=[],be=0,Pe=ve.length;be<Pe;)(Fe=ve.charCodeAt(be++))>=55296&&Fe<=56319&&be<Pe?56320==(64512&(Ne=ve.charCodeAt(be++)))?Se.push(((1023&Fe)<<10)+(1023&Ne)+65536):(Se.push(Fe),be--):Se.push(Fe);return Se}function xe(ve){return ie(ve,function(Fe){var Ne="";return Fe>65535&&(Ne+=K((Fe-=65536)>>>10&1023|55296),Fe=56320|1023&Fe),Ne+K(Fe)}).join("")}function oe(ve,Fe){return ve+22+75*(ve<26)-((0!=Fe)<<5)}function fe(ve,Fe,Ne){var Se=0;for(ve=Ne?G(ve/700):ve>>1,ve+=G(ve/Fe);ve>455;Se+=m)ve=G(ve/35);return G(Se+36*ve/(ve+38))}function ee(ve){var Fe,Ne,Se,be,Pe,He,Je,M,P,Y,pe,Ae=[],ye=ve.length,De=0,Be=128,Xe=72;for((Ne=ve.lastIndexOf("-"))<0&&(Ne=0),Se=0;Se<Ne;++Se)ve.charCodeAt(Se)>=128&&H("not-basic"),Ae.push(ve.charCodeAt(Se));for(be=Ne>0?Ne+1:0;be<ye;){for(Pe=De,He=1,Je=m;be>=ye&&H("invalid-input"),((M=(pe=ve.charCodeAt(be++))-48<10?pe-22:pe-65<26?pe-65:pe-97<26?pe-97:m)>=m||M>G((d-De)/He))&&H("overflow"),De+=M*He,!(M<(P=Je<=Xe?1:Je>=Xe+26?26:Je-Xe));Je+=m)He>G(d/(Y=m-P))&&H("overflow"),He*=Y;Xe=fe(De-Pe,Fe=Ae.length+1,0==Pe),G(De/Fe)>d-Be&&H("overflow"),Be+=G(De/Fe),De%=Fe,Ae.splice(De++,0,Be)}return xe(Ae)}function de(ve){var Fe,Ne,Se,be,Pe,He,Je,M,P,Y,pe,Ae,ye,De,Be,Xe=[];for(Ae=(ve=ce(ve)).length,Fe=128,Ne=0,Pe=72,He=0;He<Ae;++He)(pe=ve[He])<128&&Xe.push(K(pe));for(Se=be=Xe.length,be&&Xe.push("-");Se<Ae;){for(Je=d,He=0;He<Ae;++He)(pe=ve[He])>=Fe&&pe<Je&&(Je=pe);for(Je-Fe>G((d-Ne)/(ye=Se+1))&&H("overflow"),Ne+=(Je-Fe)*ye,Fe=Je,He=0;He<Ae;++He)if((pe=ve[He])<Fe&&++Ne>d&&H("overflow"),pe==Fe){for(M=Ne,P=m;!(M<(Y=P<=Pe?1:P>=Pe+26?26:P-Pe));P+=m)Be=M-Y,De=m-Y,Xe.push(K(oe(Y+Be%De,0))),M=G(Be/De);Xe.push(K(oe(M,0))),Pe=fe(Ne,ye,Se==be),Ne=0,++Se}++Ne,++Fe}return Xe.join("")}if(o={version:"1.4.1",ucs2:{decode:ce,encode:xe},decode:ee,encode:de,toASCII:function(ve){return ue(ve,function(Fe){return B.test(Fe)?"xn--"+de(Fe):Fe})},toUnicode:function(ve){return ue(ve,function(Fe){return W.test(Fe)?ee(Fe.slice(4).toLowerCase()):Fe})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(F&&v)if(re.exports==F)v.exports=o;else for(l in o)o.hasOwnProperty(l)&&(F[l]=o[l]);else u.punycode=o}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],61:[function(J,re,le){"use strict";function q(F,v){return Object.prototype.hasOwnProperty.call(F,v)}re.exports=function(F,v,e,o){v=v||"&",e=e||"=";var l={};if("string"!=typeof F||0===F.length)return l;var d=/\+/g;F=F.split(v);var m=1e3;o&&"number"==typeof o.maxKeys&&(m=o.maxKeys);var c=F.length;m>0&&c>m&&(c=m);for(var k=0;k<c;++k){var y,f,w,T,I=F[k].replace(d,"%20"),W=I.indexOf(e);W>=0?(y=I.substr(0,W),f=I.substr(W+1)):(y=I,f=""),w=decodeURIComponent(y),T=decodeURIComponent(f),q(l,w)?u(l[w])?l[w].push(T):l[w]=[l[w],T]:l[w]=T}return l};var u=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)}},{}],62:[function(J,re,le){"use strict";var q=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};re.exports=function(e,o,l,d){return o=o||"&",l=l||"=",null===e&&(e=void 0),"object"==typeof e?F(v(e),function(m){var c=encodeURIComponent(q(m))+l;return u(e[m])?F(e[m],function(k){return c+encodeURIComponent(q(k))}).join(o):c+encodeURIComponent(q(e[m]))}).join(o):d?encodeURIComponent(q(d))+l+encodeURIComponent(q(e)):""};var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function F(e,o){if(e.map)return e.map(o);for(var l=[],d=0;d<e.length;d++)l.push(o(e[d],d));return l}var v=Object.keys||function(e){var o=[];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&o.push(l);return o}},{}],63:[function(J,re,le){"use strict";le.decode=le.parse=J("./decode"),le.encode=le.stringify=J("./encode")},{"./decode":61,"./encode":62}],64:[function(J,re,le){re.exports=J("./lib")},{"./lib":73}],65:[function(J,re,le){"use strict";re.exports=class xp{constructor(u,F=new Map,v=0){this.prefix=u,this._existing=F,this.counter=v}clone(){const{prefix:u,_existing:F,counter:v}=this;return new xp(u,new Map(F),v)}getId(u){const F=u&&this._existing.get(u);if(F)return F;const v=this.prefix+this.counter;return this.counter++,u&&this._existing.set(u,v),v}hasId(u){return this._existing.has(u)}getOldIds(){return[...this._existing.keys()]}}},{}],66:[function(J,re,le){"use strict";J("setimmediate");const q=self.crypto||self.msCrypto;re.exports=class{constructor(u){if(!q||!q.subtle)throw new Error("crypto.subtle not found.");if("sha256"===u)this.algorithm={name:"SHA-256"};else{if("sha1"!==u)throw new Error(`Unsupport algorithm "${u}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(u){this._content+=u}async digest(){const u=(new TextEncoder).encode(this._content),F=new Uint8Array(await q.subtle.digest(this.algorithm,u));let v="";for(let e=0;e<F.length;++e)v+=F[e].toString(16).padStart(2,"0");return v}}},{setimmediate:75}],67:[function(J,re,le){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",u="http://www.w3.org/2001/XMLSchema#string",F="Literal",v={};function e(d,m){return d.subject.termType===m.subject.termType&&d.object.termType===m.object.termType&&d.subject.value===m.subject.value&&d.predicate.value===m.predicate.value&&d.object.value===m.object.value&&(d.object.termType!==F||d.object.datatype.termType===m.object.datatype.termType&&d.object.language===m.object.language&&d.object.datatype.value===m.object.datatype.value)}v.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,v.empty=new RegExp("^[ \\t]*$"),v.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),re.exports=class Ac{static parse(m){const c=[],k={},y=m.split(v.eoln);let f=0;for(const w of y){if(f++,v.empty.test(w))continue;const T=w.match(v.quad);if(null===T)throw new Error("N-Quads parse error on line "+f+".");const I={subject:null,predicate:null,object:null,graph:null};if(void 0!==T[1]?I.subject={termType:"NamedNode",value:T[1]}:I.subject={termType:"BlankNode",value:T[2]},I.predicate={termType:"NamedNode",value:T[3]},void 0!==T[4]?I.object={termType:"NamedNode",value:T[4]}:void 0!==T[5]?I.object={termType:"BlankNode",value:T[5]}:(I.object={termType:F,value:void 0,datatype:{termType:"NamedNode"}},void 0!==T[7]?I.object.datatype.value=T[7]:void 0!==T[8]?(I.object.datatype.value=q,I.object.language=T[8]):I.object.datatype.value=u,I.object.value=T[6].replace(l,function(W,B,L,E){if(B)switch(B){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(L)return String.fromCharCode(parseInt(L,16));if(E)throw new Error("Unsupported U escape")})),void 0!==T[9]?I.graph={termType:"NamedNode",value:T[9]}:void 0!==T[10]?I.graph={termType:"BlankNode",value:T[10]}:I.graph={termType:"DefaultGraph",value:""},I.graph.value in k){let W=!0;const B=k[I.graph.value];for(const L of B)if(e(L,I)){W=!1;break}W&&(B.push(I),c.push(I))}else k[I.graph.value]=[I],c.push(I)}return c}static serialize(m){Array.isArray(m)||(m=Ac.legacyDatasetToQuads(m));const c=[];for(const k of m)c.push(Ac.serializeQuad(k));return c.sort().join("")}static serializeQuad(m){const c=m.subject,k=m.predicate,y=m.object,f=m.graph;let w="";return"NamedNode"===c.termType?w+=`<${c.value}>`:w+=`${c.value}`,w+=` <${k.value}> `,"NamedNode"===y.termType?w+=`<${y.value}>`:"BlankNode"===y.termType?w+=y.value:(w+=`"${T=y.value,T.replace(o,function(I){switch(I){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,y.datatype.value===q?y.language&&(w+=`@${y.language}`):y.datatype.value!==u&&(w+=`^^<${y.datatype.value}>`)),"NamedNode"===f.termType?w+=` <${f.value}>`:"BlankNode"===f.termType&&(w+=` ${f.value}`),w+" .\n";var T}static legacyDatasetToQuads(m){const c=[],k={"blank node":"BlankNode",IRI:"NamedNode",literal:F};for(const y in m)m[y].forEach(f=>{const w={};for(const T in f){const I=f[T],W={termType:k[I.type],value:I.value};W.termType===F&&(W.datatype={termType:"NamedNode"},"datatype"in I&&(W.datatype.value=I.datatype),"language"in I?("datatype"in I||(W.datatype.value=q),W.language=I.language):"datatype"in I||(W.datatype.value=u)),w[T]=W}w.graph="@default"===y?{termType:"DefaultGraph",value:""}:{termType:y.startsWith("_:")?"BlankNode":"NamedNode",value:y},c.push(w)});return c}};const o=/["\\\n\r]/g,l=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],68:[function(J,re,le){"use strict";re.exports=class{constructor(q){this.current=q.sort(),this.done=!1,this.dir=new Map;for(let u=0;u<q.length;++u)this.dir.set(q[u],!0)}hasNext(){return!this.done}next(){const{current:q,dir:u}=this,F=q.slice();let v=null,e=0;const o=q.length;for(let l=0;l<o;++l){const d=q[l],m=u.get(d);(null===v||d>v)&&(m&&l>0&&d>q[l-1]||!m&&l<o-1&&d>q[l+1])&&(v=d,e=l)}if(null===v)this.done=!0;else{const l=u.get(v)?e-1:e+1;q[e]=q[l],q[l]=v;for(const d of q)d>v&&u.set(d,!u.get(d))}return F}}},{}],69:[function(J,re,le){(function(q){(function(){"use strict";const u=J("./IdentifierIssuer"),F=J("./MessageDigest"),v=J("./Permuter"),e=J("./NQuads");function o(l,d){return l.hash<d.hash?-1:l.hash>d.hash?1:0}re.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new u("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(l){this.quads=l;for(const w of l)this._addBlankNodeQuadInfo({quad:w,component:w.subject}),this._addBlankNodeQuadInfo({quad:w,component:w.object}),this._addBlankNodeQuadInfo({quad:w,component:w.graph});const d=new Map,m=[...this.blankNodeInfo.keys()];let c=0;for(const w of m)++c%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:w,hashToBlankNodes:d});const k=[...d.keys()].sort(),y=[];for(const w of k){const T=d.get(w);if(T.length>1){y.push(T);continue}const I=T[0];this.canonicalIssuer.getId(I)}for(const w of y){const T=[];for(const I of w){if(this.canonicalIssuer.hasId(I))continue;const W=new u("_:b");W.getId(I);const B=await this.hashNDegreeQuads(I,W);T.push(B)}T.sort(o);for(const I of T){const W=I.issuer.getOldIds();for(const B of W)this.canonicalIssuer.getId(B)}}const f=[];for(const w of this.quads){const T=Er({},w);T.subject=this._useCanonicalId({component:T.subject}),T.object=this._useCanonicalId({component:T.object}),T.graph=this._useCanonicalId({component:T.graph}),f.push(e.serializeQuad(T))}return f.sort(),f.join("")}async hashFirstDegreeQuads(l){const d=[],m=this.blankNodeInfo.get(l),c=m.quads;for(const y of c){const f={subject:null,predicate:y.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(l,y.subject,"subject"),f.object=this.modifyFirstDegreeComponent(l,y.object,"object"),f.graph=this.modifyFirstDegreeComponent(l,y.graph,"graph"),d.push(e.serializeQuad(f))}d.sort();const k=new F(this.hashAlgorithm);for(const y of d)k.update(y);return m.hash=await k.digest(),m.hash}async hashRelatedBlankNode(l,d,m,c){let k;k=this.canonicalIssuer.hasId(l)?this.canonicalIssuer.getId(l):m.hasId(l)?m.getId(l):this.blankNodeInfo.get(l).hash;const y=new F(this.hashAlgorithm);return y.update(c),"g"!==c&&y.update(this.getRelatedPredicate(d)),y.update(k),y.digest()}async hashNDegreeQuads(l,d){const m=new F(this.hashAlgorithm),c=await this.createHashToRelated(l,d),k=[...c.keys()].sort();for(const y of k){m.update(y);let f,w="";const T=new v(c.get(y));let I=0;for(;T.hasNext();){const W=T.next();++I%3==0&&await this._yield();let B=d.clone(),L="";const E=[];let D=!1;for(const G of W)if(this.canonicalIssuer.hasId(G)?L+=this.canonicalIssuer.getId(G):(B.hasId(G)||E.push(G),L+=B.getId(G)),0!==w.length&&L>w){D=!0;break}if(!D){for(const G of E){const K=await this.hashNDegreeQuads(G,B);if(L+=B.getId(G),L+=`<${K.hash}>`,B=K.issuer,0!==w.length&&L>w){D=!0;break}}D||(0===w.length||L<w)&&(w=L,f=B)}}m.update(w),d=f}return{hash:await m.digest(),issuer:d}}modifyFirstDegreeComponent(l,d){return"BlankNode"!==d.termType?d:{termType:"BlankNode",value:d.value===l?"_:a":"_:z"}}getRelatedPredicate(l){return`<${l.predicate.value}>`}async createHashToRelated(l,d){const m=new Map,c=this.blankNodeInfo.get(l).quads;let k=0;for(const y of c)++k%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:y,component:y.subject,position:"s",id:l,issuer:d,hashToRelated:m}),this._addRelatedBlankNodeHash({quad:y,component:y.object,position:"o",id:l,issuer:d,hashToRelated:m}),this._addRelatedBlankNodeHash({quad:y,component:y.graph,position:"g",id:l,issuer:d,hashToRelated:m})]);return m}async _hashAndTrackBlankNode({id:l,hashToBlankNodes:d}){const m=await this.hashFirstDegreeQuads(l),c=d.get(m);c?c.push(l):d.set(m,[l])}_addBlankNodeQuadInfo({quad:l,component:d}){if("BlankNode"!==d.termType)return;const m=d.value,c=this.blankNodeInfo.get(m);c?c.quads.add(l):this.blankNodeInfo.set(m,{quads:new Set([l]),hash:null})}async _addRelatedBlankNodeHash({quad:l,component:d,position:m,id:c,issuer:k,hashToRelated:y}){if("BlankNode"!==d.termType||d.value===c)return;const f=d.value,w=await this.hashRelatedBlankNode(f,l,k,m),T=y.get(w);T?T.push(f):y.set(w,[f])}_useCanonicalId({component:l}){return"BlankNode"!==l.termType||l.value.startsWith(this.canonicalIssuer.prefix)?l:{termType:"BlankNode",value:this.canonicalIssuer.getId(l.value)}}async _yield(){return new Promise(l=>q(l))}}}).call(this)}).call(this,J("timers").setImmediate)},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68,timers:111}],70:[function(J,re,le){"use strict";const q=J("./IdentifierIssuer"),u=J("./MessageDigest"),F=J("./Permuter"),v=J("./NQuads");function e(o,l){return o.hash<l.hash?-1:o.hash>l.hash?1:0}re.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new q("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(o){this.quads=o;for(const y of o)this._addBlankNodeQuadInfo({quad:y,component:y.subject}),this._addBlankNodeQuadInfo({quad:y,component:y.object}),this._addBlankNodeQuadInfo({quad:y,component:y.graph});const l=new Map,d=[...this.blankNodeInfo.keys()];for(const y of d)this._hashAndTrackBlankNode({id:y,hashToBlankNodes:l});const m=[...l.keys()].sort(),c=[];for(const y of m){const f=l.get(y);if(f.length>1){c.push(f);continue}const w=f[0];this.canonicalIssuer.getId(w)}for(const y of c){const f=[];for(const w of y){if(this.canonicalIssuer.hasId(w))continue;const T=new q("_:b");T.getId(w);const I=this.hashNDegreeQuads(w,T);f.push(I)}f.sort(e);for(const w of f){const T=w.issuer.getOldIds();for(const I of T)this.canonicalIssuer.getId(I)}}const k=[];for(const y of this.quads){const f=Er({},y);f.subject=this._useCanonicalId({component:f.subject}),f.object=this._useCanonicalId({component:f.object}),f.graph=this._useCanonicalId({component:f.graph}),k.push(v.serializeQuad(f))}return k.sort(),k.join("")}hashFirstDegreeQuads(o){const l=[],d=this.blankNodeInfo.get(o),m=d.quads;for(const k of m){const y={subject:null,predicate:k.predicate,object:null,graph:null};y.subject=this.modifyFirstDegreeComponent(o,k.subject,"subject"),y.object=this.modifyFirstDegreeComponent(o,k.object,"object"),y.graph=this.modifyFirstDegreeComponent(o,k.graph,"graph"),l.push(v.serializeQuad(y))}l.sort();const c=new u(this.hashAlgorithm);for(const k of l)c.update(k);return d.hash=c.digest(),d.hash}hashRelatedBlankNode(o,l,d,m){let c;c=this.canonicalIssuer.hasId(o)?this.canonicalIssuer.getId(o):d.hasId(o)?d.getId(o):this.blankNodeInfo.get(o).hash;const k=new u(this.hashAlgorithm);return k.update(m),"g"!==m&&k.update(this.getRelatedPredicate(l)),k.update(c),k.digest()}hashNDegreeQuads(o,l){const d=new u(this.hashAlgorithm),m=this.createHashToRelated(o,l),c=[...m.keys()].sort();for(const k of c){d.update(k);let y,f="";const w=new F(m.get(k));for(;w.hasNext();){const T=w.next();let I=l.clone(),W="";const B=[];let L=!1;for(const E of T)if(this.canonicalIssuer.hasId(E)?W+=this.canonicalIssuer.getId(E):(I.hasId(E)||B.push(E),W+=I.getId(E)),0!==f.length&&W>f){L=!0;break}if(!L){for(const E of B){const D=this.hashNDegreeQuads(E,I);if(W+=I.getId(E),W+=`<${D.hash}>`,I=D.issuer,0!==f.length&&W>f){L=!0;break}}L||(0===f.length||W<f)&&(f=W,y=I)}}d.update(f),l=y}return{hash:d.digest(),issuer:l}}modifyFirstDegreeComponent(o,l){return"BlankNode"!==l.termType?l:{termType:"BlankNode",value:l.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,l){const d=new Map,m=this.blankNodeInfo.get(o).quads;for(const c of m)this._addRelatedBlankNodeHash({quad:c,component:c.subject,position:"s",id:o,issuer:l,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:c,component:c.object,position:"o",id:o,issuer:l,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:c,component:c.graph,position:"g",id:o,issuer:l,hashToRelated:d});return d}_hashAndTrackBlankNode({id:o,hashToBlankNodes:l}){const d=this.hashFirstDegreeQuads(o),m=l.get(d);m?m.push(o):l.set(d,[o])}_addBlankNodeQuadInfo({quad:o,component:l}){if("BlankNode"!==l.termType)return;const d=l.value,m=this.blankNodeInfo.get(d);m?m.quads.add(o):this.blankNodeInfo.set(d,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:l,position:d,id:m,issuer:c,hashToRelated:k}){if("BlankNode"!==l.termType||l.value===m)return;const y=l.value,f=this.hashRelatedBlankNode(y,o,c,d),w=k.get(f);w?w.push(y):k.set(f,[y])}_useCanonicalId({component:o}){return"BlankNode"!==o.termType||o.value.startsWith(this.canonicalIssuer.prefix)?o:{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}}}},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68}],71:[function(J,re,le){"use strict";const q=J("./URDNA2015");re.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(u,F,v){return"BlankNode"!==F.termType?F:"graph"===v?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===u?"_:a":"_:z"}}getRelatedPredicate(u){return u.predicate.value}async createHashToRelated(u,F){const v=new Map,e=this.blankNodeInfo.get(u).quads;let o=0;for(const l of e){let d,m;if("BlankNode"===l.subject.termType&&l.subject.value!==u)m=l.subject.value,d="p";else{if("BlankNode"!==l.object.termType||l.object.value===u)continue;m=l.object.value,d="r"}++o%100==0&&await this._yield();const c=await this.hashRelatedBlankNode(m,l,F,d),k=v.get(c);k?k.push(m):v.set(c,[m])}return v}}},{"./URDNA2015":69}],72:[function(J,re,le){"use strict";const q=J("./URDNA2015Sync");re.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(u,F,v){return"BlankNode"!==F.termType?F:"graph"===v?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===u?"_:a":"_:z"}}getRelatedPredicate(u){return u.predicate.value}createHashToRelated(u,F){const v=new Map,e=this.blankNodeInfo.get(u).quads;for(const o of e){let l,d;if("BlankNode"===o.subject.termType&&o.subject.value!==u)d=o.subject.value,l="p";else{if("BlankNode"!==o.object.termType||o.object.value===u)continue;d=o.object.value,l="r"}const m=this.hashRelatedBlankNode(d,o,F,l),c=v.get(m);c?c.push(d):v.set(m,[d])}return v}}},{"./URDNA2015Sync":70}],73:[function(J,re,le){"use strict";const q=J("./URDNA2015"),u=J("./URGNA2012"),F=J("./URDNA2015Sync"),v=J("./URGNA2012Sync");let e;try{e=J("rdf-canonize-native")}catch(l){}const o={};re.exports=o,o.NQuads=J("./NQuads"),o.IdentifierIssuer=J("./IdentifierIssuer"),o._rdfCanonizeNative=function(l){return l&&(e=l),e},o.canonize=async function(l,d){if(Array.isArray(l)||(l=o.NQuads.legacyDatasetToQuads(l)),d.useNative){if(!e)throw new Error("rdf-canonize-native not available");return new Promise((m,c)=>e.canonize(l,d,(k,y)=>k?c(k):m(y)))}if("URDNA2015"===d.algorithm)return new q(d).main(l);if("URGNA2012"===d.algorithm)return new u(d).main(l);throw"algorithm"in d?new Error("Invalid RDF Dataset Canonicalization algorithm: "+d.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},o._canonizeSync=function(l,d){if(Array.isArray(l)||(l=o.NQuads.legacyDatasetToQuads(l)),d.useNative){if(e)return e.canonizeSync(l,d);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===d.algorithm)return new F(d).main(l);if("URGNA2012"===d.algorithm)return new v(d).main(l);throw"algorithm"in d?new Error("Invalid RDF Dataset Canonicalization algorithm: "+d.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":65,"./NQuads":67,"./URDNA2015":69,"./URDNA2015Sync":70,"./URGNA2012":71,"./URGNA2012Sync":72,"rdf-canonize-native":3}],74:[function(J,re,le){var q=J("buffer"),u=q.Buffer;function F(e,o){for(var l in e)o[l]=e[l]}function v(e,o,l){return u(e,o,l)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?re.exports=q:(F(q,le),le.Buffer=v),v.prototype=Object.create(u.prototype),F(u,v),v.from=function(e,o,l){if("number"==typeof e)throw new TypeError("Argument must not be a number");return u(e,o,l)},v.alloc=function(e,o,l){if("number"!=typeof e)throw new TypeError("Argument must be a number");var d=u(e);return void 0!==o?"string"==typeof l?d.fill(o,l):d.fill(o):d.fill(0),d},v.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return u(e)},v.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return q.SlowBuffer(e)}},{buffer:5}],75:[function(J,re,le){(function(q,u){(function(){!function(F,v){"use strict";if(!F.setImmediate){var e,o,l,d,m,c=1,k={},y=!1,f=F.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(F);w=w&&w.setTimeout?w:F,"[object process]"==={}.toString.call(F.process)?e=function(W){q.nextTick(function(){I(W)})}:function(){if(F.postMessage&&!F.importScripts){var W=!0,B=F.onmessage;return F.onmessage=function(){W=!1},F.postMessage("","*"),F.onmessage=B,W}}()?(d="setImmediate$"+Math.random()+"$",m=function(W){W.source===F&&"string"==typeof W.data&&0===W.data.indexOf(d)&&I(+W.data.slice(d.length))},F.addEventListener?F.addEventListener("message",m,!1):F.attachEvent("onmessage",m),e=function(W){F.postMessage(d+W,"*")}):F.MessageChannel?((l=new MessageChannel).port1.onmessage=function(W){I(W.data)},e=function(W){l.port2.postMessage(W)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,e=function(W){var B=f.createElement("script");B.onreadystatechange=function(){I(W),B.onreadystatechange=null,o.removeChild(B),B=null},o.appendChild(B)}):e=function(W){setTimeout(I,0,W)},w.setImmediate=function(W){"function"!=typeof W&&(W=new Function(""+W));for(var B=new Array(arguments.length-1),L=0;L<B.length;L++)B[L]=arguments[L+1];var E={callback:W,args:B};return k[c]=E,e(c),c++},w.clearImmediate=T}function T(W){delete k[W]}function I(W){if(y)setTimeout(I,0,W);else{var B=k[W];if(B){y=!0;try{!function(L){var E=L.callback,D=L.args;switch(D.length){case 0:E();break;case 1:E(D[0]);break;case 2:E(D[0],D[1]);break;case 3:E(D[0],D[1],D[2]);break;default:E.apply(undefined,D)}}(B)}finally{T(W),y=!1}}}}}("undefined"==typeof self?void 0===u?this:u:self)}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:59}],76:[function(J,re,le){re.exports=u;var q=J("events").EventEmitter;function u(){q.call(this)}J("inherits")(u,q),u.Readable=J("readable-stream/lib/_stream_readable.js"),u.Writable=J("readable-stream/lib/_stream_writable.js"),u.Duplex=J("readable-stream/lib/_stream_duplex.js"),u.Transform=J("readable-stream/lib/_stream_transform.js"),u.PassThrough=J("readable-stream/lib/_stream_passthrough.js"),u.finished=J("readable-stream/lib/internal/streams/end-of-stream.js"),u.pipeline=J("readable-stream/lib/internal/streams/pipeline.js"),u.Stream=u,u.prototype.pipe=function(F,v){var e=this;function o(f){F.writable&&!1===F.write(f)&&e.pause&&e.pause()}function l(){e.readable&&e.resume&&e.resume()}e.on("data",o),F.on("drain",l),F._isStdio||v&&!1===v.end||(e.on("end",m),e.on("close",c));var d=!1;function m(){d||(d=!0,F.end())}function c(){d||(d=!0,"function"==typeof F.destroy&&F.destroy())}function k(f){if(y(),0===q.listenerCount(this,"error"))throw f}function y(){e.removeListener("data",o),F.removeListener("drain",l),e.removeListener("end",m),e.removeListener("close",c),e.removeListener("error",k),F.removeListener("error",k),e.removeListener("end",y),e.removeListener("close",y),F.removeListener("close",y)}return e.on("error",k),F.on("error",k),e.on("end",y),e.on("close",y),F.on("close",y),F.emit("pipe",e),F}},{events:11,inherits:22,"readable-stream/lib/_stream_duplex.js":78,"readable-stream/lib/_stream_passthrough.js":79,"readable-stream/lib/_stream_readable.js":80,"readable-stream/lib/_stream_transform.js":81,"readable-stream/lib/_stream_writable.js":82,"readable-stream/lib/internal/streams/end-of-stream.js":86,"readable-stream/lib/internal/streams/pipeline.js":88}],77:[function(J,re,le){"use strict";var q={};function u(v,e,o){o||(o=Error);var l=function(d){var m,c;function k(y,f,w){return d.call(this,(T=y,I=f,W=w,"string"==typeof e?e:e(T,I,W)))||this;var T,I,W}return c=d,(m=k).prototype=Object.create(c.prototype),m.prototype.constructor=m,m.__proto__=c,k}(o);l.prototype.name=o.name,l.prototype.code=v,q[v]=l}function F(v,e){if(Array.isArray(v)){var o=v.length;return v=v.map(function(l){return String(l)}),o>2?"one of ".concat(e," ").concat(v.slice(0,o-1).join(", "),", or ")+v[o-1]:2===o?"one of ".concat(e," ").concat(v[0]," or ").concat(v[1]):"of ".concat(e," ").concat(v[0])}return"of ".concat(e," ").concat(String(v))}u("ERR_INVALID_OPT_VALUE",function(v,e){return'The value "'+e+'" is invalid for option "'+v+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function(v,e,o){var l,d,c,y,f,w;if("string"==typeof e&&(d="not ",e.substr(0,d.length)===d)?(l="must not be",e=e.replace(/^not /,"")):l="must be",y=v,f=" argument",(void 0===w||w>y.length)&&(w=y.length),y.substring(w-f.length,w)===f)c="The ".concat(v," ").concat(l," ").concat(F(e,"type"));else{var k=function(y,f,w){return"number"!=typeof w&&(w=0),!(w+".".length>y.length)&&-1!==y.indexOf(".",w)}(v)?"property":"argument";c='The "'.concat(v,'" ').concat(k," ").concat(l," ").concat(F(e,"type"))}return c+". Received type ".concat(typeof o)},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),re.exports.codes=q},{}],78:[function(J,re,le){(function(q){(function(){"use strict";var u=Object.keys||function(k){var y=[];for(var f in k)y.push(f);return y};re.exports=d;var F=J("./_stream_readable"),v=J("./_stream_writable");J("inherits")(d,F);for(var e=u(v.prototype),o=0;o<e.length;o++){var l=e[o];d.prototype[l]||(d.prototype[l]=v.prototype[l])}function d(k){if(!(this instanceof d))return new d(k);F.call(this,k),v.call(this,k),this.allowHalfOpen=!0,k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||q.nextTick(c,this)}function c(k){k.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}})}).call(this)}).call(this,J("_process"))},{"./_stream_readable":80,"./_stream_writable":82,_process:59,inherits:22}],79:[function(J,re,le){"use strict";re.exports=u;var q=J("./_stream_transform");function u(F){if(!(this instanceof u))return new u(F);q.call(this,F)}J("inherits")(u,q),u.prototype._transform=function(F,v,e){e(null,F)}},{"./_stream_transform":81,inherits:22}],80:[function(J,re,le){(function(q,u){(function(){"use strict";var F;re.exports=H,H.ReadableState=K,J("events").EventEmitter;var d,v=function(M,P){return M.listeners(P).length},e=J("./internal/streams/stream"),o=J("buffer").Buffer,l=u.Uint8Array||function(){},m=J("util");d=m&&m.debuglog?m.debuglog("stream"):function(){};var c,k,y,f=J("./internal/streams/buffer_list"),w=J("./internal/streams/destroy"),T=J("./internal/streams/state").getHighWaterMark,I=J("../errors").codes,W=I.ERR_INVALID_ARG_TYPE,B=I.ERR_STREAM_PUSH_AFTER_EOF,L=I.ERR_METHOD_NOT_IMPLEMENTED,E=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;J("inherits")(H,e);var D=w.errorOrDestroy,G=["error","close","destroy","pause","resume"];function K(M,P,Y){F=F||J("./_stream_duplex"),M=M||{},"boolean"!=typeof Y&&(Y=P instanceof F),this.objectMode=!!M.objectMode,Y&&(this.objectMode=this.objectMode||!!M.readableObjectMode),this.highWaterMark=T(this,M,"readableHighWaterMark",Y),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==M.emitClose,this.autoDestroy=!!M.autoDestroy,this.destroyed=!1,this.defaultEncoding=M.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,M.encoding&&(c||(c=J("string_decoder/").StringDecoder),this.decoder=new c(M.encoding),this.encoding=M.encoding)}function H(M){if(F=F||J("./_stream_duplex"),!(this instanceof H))return new H(M);var P=this instanceof F;this._readableState=new K(M,this,P),this.readable=!0,M&&("function"==typeof M.read&&(this._read=M.read),"function"==typeof M.destroy&&(this._destroy=M.destroy)),e.call(this)}function ie(M,P,Y,pe,Ae){d("readableAddChunk",P);var ye,Be,Xe,ot,ct,De=M._readableState;if(null===P)De.reading=!1,function(Be,Xe){if(d("onEofChunk"),!Xe.ended){if(Xe.decoder){var ot=Xe.decoder.end();ot&&ot.length&&(Xe.buffer.push(ot),Xe.length+=Xe.objectMode?1:ot.length)}Xe.ended=!0,Xe.sync?oe(Be):(Xe.needReadable=!1,Xe.emittedReadable||(Xe.emittedReadable=!0,fe(Be)))}}(M,De);else if(Ae||(Be=De,ct=Xe=P,o.isBuffer(ct)||ct instanceof l||"string"==typeof Xe||void 0===Xe||Be.objectMode||(ot=new W("chunk",["string","Buffer","Uint8Array"],Xe)),ye=ot),ye)D(M,ye);else if(De.objectMode||P&&P.length>0)if("string"==typeof P||De.objectMode||Object.getPrototypeOf(P)===o.prototype||(P=function(Be){return o.from(Be)}(P)),pe)De.endEmitted?D(M,new E):ue(M,De,P,!0);else if(De.ended)D(M,new B);else{if(De.destroyed)return!1;De.reading=!1,De.decoder&&!Y?(P=De.decoder.write(P),De.objectMode||0!==P.length?ue(M,De,P,!1):ee(M,De)):ue(M,De,P,!1)}else pe||(De.reading=!1,ee(M,De));return!De.ended&&(De.length<De.highWaterMark||0===De.length)}function ue(M,P,Y,pe){P.flowing&&0===P.length&&!P.sync?(P.awaitDrain=0,M.emit("data",Y)):(P.length+=P.objectMode?1:Y.length,pe?P.buffer.unshift(Y):P.buffer.push(Y),P.needReadable&&oe(M)),ee(M,P)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(M){this._readableState&&(this._readableState.destroyed=M)}}),H.prototype.destroy=w.destroy,H.prototype._undestroy=w.undestroy,H.prototype._destroy=function(M,P){P(M)},H.prototype.push=function(M,P){var Y,pe=this._readableState;return pe.objectMode?Y=!0:"string"==typeof M&&((P=P||pe.defaultEncoding)!==pe.encoding&&(M=o.from(M,P),P=""),Y=!0),ie(this,M,P,!1,Y)},H.prototype.unshift=function(M){return ie(this,M,null,!0,!1)},H.prototype.isPaused=function(){return!1===this._readableState.flowing},H.prototype.setEncoding=function(M){c||(c=J("string_decoder/").StringDecoder);var P=new c(M);this._readableState.decoder=P,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,pe="";null!==Y;)pe+=P.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),""!==pe&&this._readableState.buffer.push(pe),this._readableState.length=pe.length,this};var ce=1073741824;function xe(M,P){return M<=0||0===P.length&&P.ended?0:P.objectMode?1:M!=M?P.flowing&&P.length?P.buffer.head.data.length:P.length:(M>P.highWaterMark&&(P.highWaterMark=((Y=M)>=ce?Y=ce:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y)),M<=P.length?M:P.ended?P.length:(P.needReadable=!0,0));var Y}function oe(M){var P=M._readableState;d("emitReadable",P.needReadable,P.emittedReadable),P.needReadable=!1,P.emittedReadable||(d("emitReadable",P.flowing),P.emittedReadable=!0,q.nextTick(fe,M))}function fe(M){var P=M._readableState;d("emitReadable_",P.destroyed,P.length,P.ended),P.destroyed||!P.length&&!P.ended||(M.emit("readable"),P.emittedReadable=!1),P.needReadable=!P.flowing&&!P.ended&&P.length<=P.highWaterMark,Se(M)}function ee(M,P){P.readingMore||(P.readingMore=!0,q.nextTick(de,M,P))}function de(M,P){for(;!P.reading&&!P.ended&&(P.length<P.highWaterMark||P.flowing&&0===P.length);){var Y=P.length;if(d("maybeReadMore read 0"),M.read(0),Y===P.length)break}P.readingMore=!1}function ve(M){var P=M._readableState;P.readableListening=M.listenerCount("readable")>0,P.resumeScheduled&&!P.paused?P.flowing=!0:M.listenerCount("data")>0&&M.resume()}function Fe(M){d("readable nexttick read 0"),M.read(0)}function Ne(M,P){d("resume",P.reading),P.reading||M.read(0),P.resumeScheduled=!1,M.emit("resume"),Se(M),P.flowing&&!P.reading&&M.read(0)}function Se(M){var P=M._readableState;for(d("flow",P.flowing);P.flowing&&null!==M.read(););}function be(M,P){return 0===P.length?null:(P.objectMode?Y=P.buffer.shift():!M||M>=P.length?(Y=P.decoder?P.buffer.join(""):1===P.buffer.length?P.buffer.first():P.buffer.concat(P.length),P.buffer.clear()):Y=P.buffer.consume(M,P.decoder),Y);var Y}function Pe(M){var P=M._readableState;d("endReadable",P.endEmitted),P.endEmitted||(P.ended=!0,q.nextTick(He,P,M))}function He(M,P){if(d("endReadableNT",M.endEmitted,M.length),!M.endEmitted&&0===M.length&&(M.endEmitted=!0,P.readable=!1,P.emit("end"),M.autoDestroy)){var Y=P._writableState;(!Y||Y.autoDestroy&&Y.finished)&&P.destroy()}}function Je(M,P){for(var Y=0,pe=M.length;Y<pe;Y++)if(M[Y]===P)return Y;return-1}H.prototype.read=function(M){d("read",M),M=parseInt(M,10);var P=this._readableState,Y=M;if(0!==M&&(P.emittedReadable=!1),0===M&&P.needReadable&&((0!==P.highWaterMark?P.length>=P.highWaterMark:P.length>0)||P.ended))return d("read: emitReadable",P.length,P.ended),0===P.length&&P.ended?Pe(this):oe(this),null;if(0===(M=xe(M,P))&&P.ended)return 0===P.length&&Pe(this),null;var pe,Ae=P.needReadable;return d("need readable",Ae),(0===P.length||P.length-M<P.highWaterMark)&&d("length less than watermark",Ae=!0),P.ended||P.reading?d("reading or ended",Ae=!1):Ae&&(d("do read"),P.reading=!0,P.sync=!0,0===P.length&&(P.needReadable=!0),this._read(P.highWaterMark),P.sync=!1,P.reading||(M=xe(Y,P))),null===(pe=M>0?be(M,P):null)?(P.needReadable=P.length<=P.highWaterMark,M=0):(P.length-=M,P.awaitDrain=0),0===P.length&&(P.ended||(P.needReadable=!0),Y!==M&&P.ended&&Pe(this)),null!==pe&&this.emit("data",pe),pe},H.prototype._read=function(M){D(this,new L("_read()"))},H.prototype.pipe=function(M,P){var Y=this,pe=this._readableState;switch(pe.pipesCount){case 0:pe.pipes=M;break;case 1:pe.pipes=[pe.pipes,M];break;default:pe.pipes.push(M)}pe.pipesCount+=1,d("pipe count=%d opts=%j",pe.pipesCount,P);var Ae=P&&!1===P.end||M===q.stdout||M===q.stderr?Ee:De;function De(){d("onend"),M.end()}pe.endEmitted?q.nextTick(Ae):Y.once("end",Ae),M.on("unpipe",function ye(Re,je){d("onunpipe"),Re===Y&&je&&!1===je.hasUnpiped&&(je.hasUnpiped=!0,d("cleanup"),M.removeListener("close",It),M.removeListener("finish",jt),M.removeListener("drain",Be),M.removeListener("error",ct),M.removeListener("unpipe",ye),Y.removeListener("end",De),Y.removeListener("end",Ee),Y.removeListener("data",ot),Xe=!0,!pe.awaitDrain||M._writableState&&!M._writableState.needDrain||Be())});var Re,Be=(Re=Y,function(){var je=Re._readableState;d("pipeOnDrain",je.awaitDrain),je.awaitDrain&&je.awaitDrain--,0===je.awaitDrain&&v(Re,"data")&&(je.flowing=!0,Se(Re))});M.on("drain",Be);var Xe=!1;function ot(Re){d("ondata");var je=M.write(Re);d("dest.write",je),!1===je&&((1===pe.pipesCount&&pe.pipes===M||pe.pipesCount>1&&-1!==Je(pe.pipes,M))&&!Xe&&(d("false write response, pause",pe.awaitDrain),pe.awaitDrain++),Y.pause())}function ct(Re){d("onerror",Re),Ee(),M.removeListener("error",ct),0===v(M,"error")&&D(M,Re)}function It(){M.removeListener("finish",jt),Ee()}function jt(){d("onfinish"),M.removeListener("close",It),Ee()}function Ee(){d("unpipe"),Y.unpipe(M)}return Y.on("data",ot),function(Re,je,V){if("function"==typeof Re.prependListener)return Re.prependListener(je,V);Re._events&&Re._events[je]?Array.isArray(Re._events[je])?Re._events[je].unshift(V):Re._events[je]=[V,Re._events[je]]:Re.on(je,V)}(M,"error",ct),M.once("close",It),M.once("finish",jt),M.emit("pipe",Y),pe.flowing||(d("pipe resume"),Y.resume()),M},H.prototype.unpipe=function(M){var P=this._readableState,Y={hasUnpiped:!1};if(0===P.pipesCount)return this;if(1===P.pipesCount)return M&&M!==P.pipes||(M||(M=P.pipes),P.pipes=null,P.pipesCount=0,P.flowing=!1,M&&M.emit("unpipe",this,Y)),this;if(!M){var pe=P.pipes,Ae=P.pipesCount;P.pipes=null,P.pipesCount=0,P.flowing=!1;for(var ye=0;ye<Ae;ye++)pe[ye].emit("unpipe",this,{hasUnpiped:!1});return this}var De=Je(P.pipes,M);return-1===De||(P.pipes.splice(De,1),P.pipesCount-=1,1===P.pipesCount&&(P.pipes=P.pipes[0]),M.emit("unpipe",this,Y)),this},H.prototype.on=function(M,P){var Y=e.prototype.on.call(this,M,P),pe=this._readableState;return"data"===M?(pe.readableListening=this.listenerCount("readable")>0,!1!==pe.flowing&&this.resume()):"readable"===M&&(pe.endEmitted||pe.readableListening||(pe.readableListening=pe.needReadable=!0,pe.flowing=!1,pe.emittedReadable=!1,d("on readable",pe.length,pe.reading),pe.length?oe(this):pe.reading||q.nextTick(Fe,this))),Y},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(M,P){var Y=e.prototype.removeListener.call(this,M,P);return"readable"===M&&q.nextTick(ve,this),Y},H.prototype.removeAllListeners=function(M){var P=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==M&&void 0!==M||q.nextTick(ve,this),P},H.prototype.resume=function(){var P,Y,M=this._readableState;return M.flowing||(d("resume"),M.flowing=!M.readableListening,P=this,(Y=M).resumeScheduled||(Y.resumeScheduled=!0,q.nextTick(Ne,P,Y))),M.paused=!1,this},H.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},H.prototype.wrap=function(M){var P=this,Y=this._readableState,pe=!1;for(var Ae in M.on("end",function(){if(d("wrapped end"),Y.decoder&&!Y.ended){var De=Y.decoder.end();De&&De.length&&P.push(De)}P.push(null)}),M.on("data",function(De){d("wrapped data"),Y.decoder&&(De=Y.decoder.write(De)),Y.objectMode&&null==De||(Y.objectMode||De&&De.length)&&(P.push(De)||(pe=!0,M.pause()))}),M)void 0===this[Ae]&&"function"==typeof M[Ae]&&(this[Ae]=function(De){return function(){return M[De].apply(M,arguments)}}(Ae));for(var ye=0;ye<G.length;ye++)M.on(G[ye],this.emit.bind(this,G[ye]));return this._read=function(De){d("wrapped _read",De),pe&&(pe=!1,M.resume())},this},"function"==typeof Symbol&&(H.prototype[Symbol.asyncIterator]=function(){return void 0===k&&(k=J("./internal/streams/async_iterator")),k(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(M){this._readableState&&(this._readableState.flowing=M)}}),H._fromList=be,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(H.from=function(M,P){return void 0===y&&(y=J("./internal/streams/from")),y(H,M,P)})}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/async_iterator":83,"./internal/streams/buffer_list":84,"./internal/streams/destroy":85,"./internal/streams/from":87,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,events:11,inherits:22,"string_decoder/":110,util:3}],81:[function(J,re,le){"use strict";re.exports=d;var q=J("../errors").codes,u=q.ERR_METHOD_NOT_IMPLEMENTED,F=q.ERR_MULTIPLE_CALLBACK,v=q.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=q.ERR_TRANSFORM_WITH_LENGTH_0,o=J("./_stream_duplex");function l(k,y){var f=this._transformState;f.transforming=!1;var w=f.writecb;if(null===w)return this.emit("error",new F);f.writechunk=null,f.writecb=null,null!=y&&this.push(y),w(k);var T=this._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}function d(k){if(!(this instanceof d))return new d(k);o.call(this,k),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,k&&("function"==typeof k.transform&&(this._transform=k.transform),"function"==typeof k.flush&&(this._flush=k.flush)),this.on("prefinish",m)}function m(){var k=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(y,f){c(k,y,f)})}function c(k,y,f){if(y)return k.emit("error",y);if(null!=f&&k.push(f),k._writableState.length)throw new e;if(k._transformState.transforming)throw new v;return k.push(null)}J("inherits")(d,o),d.prototype.push=function(k,y){return this._transformState.needTransform=!1,o.prototype.push.call(this,k,y)},d.prototype._transform=function(k,y,f){f(new u("_transform()"))},d.prototype._write=function(k,y,f){var w=this._transformState;if(w.writecb=f,w.writechunk=k,w.writeencoding=y,!w.transforming){var T=this._readableState;(w.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},d.prototype._read=function(k){var y=this._transformState;null===y.writechunk||y.transforming?y.needTransform=!0:(y.transforming=!0,this._transform(y.writechunk,y.writeencoding,y.afterTransform))},d.prototype._destroy=function(k,y){o.prototype._destroy.call(this,k,function(f){y(f)})}},{"../errors":77,"./_stream_duplex":78,inherits:22}],82:[function(J,re,le){(function(q,u){(function(){"use strict";function F(ee){var de=this;this.next=null,this.entry=null,this.finish=function(){!function(ve,Fe,Ne){var Se=ve.entry;for(ve.entry=null;Se;){var be=Se.callback;Fe.pendingcb--,be(undefined),Se=Se.next}Fe.corkedRequestsFree.next=ve}(de,ee)}}var v;re.exports=H,H.WritableState=K;var m,e={deprecate:J("util-deprecate")},o=J("./internal/streams/stream"),l=J("buffer").Buffer,d=u.Uint8Array||function(){},c=J("./internal/streams/destroy"),k=J("./internal/streams/state").getHighWaterMark,y=J("../errors").codes,f=y.ERR_INVALID_ARG_TYPE,w=y.ERR_METHOD_NOT_IMPLEMENTED,T=y.ERR_MULTIPLE_CALLBACK,I=y.ERR_STREAM_CANNOT_PIPE,W=y.ERR_STREAM_DESTROYED,B=y.ERR_STREAM_NULL_VALUES,L=y.ERR_STREAM_WRITE_AFTER_END,E=y.ERR_UNKNOWN_ENCODING,D=c.errorOrDestroy;function G(){}function K(ee,de,ve){v=v||J("./_stream_duplex"),ee=ee||{},"boolean"!=typeof ve&&(ve=de instanceof v),this.objectMode=!!ee.objectMode,ve&&(this.objectMode=this.objectMode||!!ee.writableObjectMode),this.highWaterMark=k(this,ee,"writableHighWaterMark",ve),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Fe=!1===ee.decodeStrings;this.decodeStrings=!Fe,this.defaultEncoding=ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ne){!function(Se,be){var P,Pe=Se._writableState,He=Pe.sync,Je=Pe.writecb;if("function"!=typeof Je)throw new T;if((P=Pe).writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0,be)!function(P,Y,pe,Ae,ye){--Y.pendingcb,pe?(q.nextTick(ye,Ae),q.nextTick(fe,P,Y),P._writableState.errorEmitted=!0,D(P,Ae)):(ye(Ae),P._writableState.errorEmitted=!0,D(P,Ae),fe(P,Y))}(Se,Pe,He,be,Je);else{var M=xe(Pe)||Se.destroyed;M||Pe.corked||Pe.bufferProcessing||!Pe.bufferedRequest||ce(Se,Pe),He?q.nextTick(ue,Se,Pe,M,Je):ue(Se,Pe,M,Je)}}(de,Ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ee.emitClose,this.autoDestroy=!!ee.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function H(ee){var de=this instanceof(v=v||J("./_stream_duplex"));if(!de&&!m.call(H,this))return new H(ee);this._writableState=new K(ee,this,de),this.writable=!0,ee&&("function"==typeof ee.write&&(this._write=ee.write),"function"==typeof ee.writev&&(this._writev=ee.writev),"function"==typeof ee.destroy&&(this._destroy=ee.destroy),"function"==typeof ee.final&&(this._final=ee.final)),o.call(this)}function ie(ee,de,ve,Fe,Ne,Se,be){de.writelen=Fe,de.writecb=be,de.writing=!0,de.sync=!0,de.destroyed?de.onwrite(new W("write")):ve?ee._writev(Ne,de.onwrite):ee._write(Ne,Se,de.onwrite),de.sync=!1}function ue(ee,de,ve,Fe){var Ne,Se;ve||(Ne=ee,0===(Se=de).length&&Se.needDrain&&(Se.needDrain=!1,Ne.emit("drain"))),de.pendingcb--,Fe(),fe(ee,de)}function ce(ee,de){de.bufferProcessing=!0;var ve=de.bufferedRequest;if(ee._writev&&ve&&ve.next){var Fe=de.bufferedRequestCount,Ne=new Array(Fe),Se=de.corkedRequestsFree;Se.entry=ve;for(var be=0,Pe=!0;ve;)Ne[be]=ve,ve.isBuf||(Pe=!1),ve=ve.next,be+=1;Ne.allBuffers=Pe,ie(ee,de,!0,de.length,Ne,"",Se.finish),de.pendingcb++,de.lastBufferedRequest=null,Se.next?(de.corkedRequestsFree=Se.next,Se.next=null):de.corkedRequestsFree=new F(de),de.bufferedRequestCount=0}else{for(;ve;){var He=ve.chunk,Je=ve.encoding,M=ve.callback;if(ie(ee,de,!1,de.objectMode?1:He.length,He,Je,M),ve=ve.next,de.bufferedRequestCount--,de.writing)break}null===ve&&(de.lastBufferedRequest=null)}de.bufferedRequest=ve,de.bufferProcessing=!1}function xe(ee){return ee.ending&&0===ee.length&&null===ee.bufferedRequest&&!ee.finished&&!ee.writing}function oe(ee,de){ee._final(function(ve){de.pendingcb--,ve&&D(ee,ve),de.prefinished=!0,ee.emit("prefinish"),fe(ee,de)})}function fe(ee,de){var Ne,Se,ve=xe(de);if(ve&&(Ne=ee,(Se=de).prefinished||Se.finalCalled||("function"!=typeof Ne._final||Se.destroyed?(Se.prefinished=!0,Ne.emit("prefinish")):(Se.pendingcb++,Se.finalCalled=!0,q.nextTick(oe,Ne,Se))),0===de.pendingcb&&(de.finished=!0,ee.emit("finish"),de.autoDestroy))){var Fe=ee._readableState;(!Fe||Fe.autoDestroy&&Fe.endEmitted)&&ee.destroy()}return ve}J("inherits")(H,o),K.prototype.getBuffer=function(){for(var ee=this.bufferedRequest,de=[];ee;)de.push(ee),ee=ee.next;return de},function(){try{Object.defineProperty(K.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ee){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(H,Symbol.hasInstance,{value:function(ee){return!!m.call(this,ee)||this===H&&ee&&ee._writableState instanceof K}})):m=function(ee){return ee instanceof this},H.prototype.pipe=function(){D(this,new I)},H.prototype.write=function(ee,de,ve){var Fe,Pe,Ne=this._writableState,Se=!1,be=!Ne.objectMode&&(Fe=ee,l.isBuffer(Fe)||Fe instanceof d);return be&&!l.isBuffer(ee)&&(Pe=ee,ee=l.from(Pe)),"function"==typeof de&&(ve=de,de=null),be?de="buffer":de||(de=Ne.defaultEncoding),"function"!=typeof ve&&(ve=G),Ne.ending?function(Pe,He){var Je=new L;D(Pe,Je),q.nextTick(He,Je)}(this,ve):(be||function(Pe,He,Je,M){var P;return null===Je?P=new B:"string"==typeof Je||He.objectMode||(P=new f("chunk",["string","Buffer"],Je)),!P||(D(Pe,P),q.nextTick(M,P),!1)}(this,Ne,ee,ve))&&(Ne.pendingcb++,Se=function(Pe,He,Je,M,P,Y){if(!Je){var pe=(Xe=M,ot=P,(Be=He).objectMode||!1===Be.decodeStrings||"string"!=typeof Xe||(Xe=l.from(Xe,ot)),Xe);M!==pe&&(Je=!0,P="buffer",M=pe)}var Be,Xe,ot,Ae=He.objectMode?1:M.length;He.length+=Ae;var ye=He.length<He.highWaterMark;if(ye||(He.needDrain=!0),He.writing||He.corked){var De=He.lastBufferedRequest;He.lastBufferedRequest={chunk:M,encoding:P,isBuf:Je,callback:Y,next:null},De?De.next=He.lastBufferedRequest:He.bufferedRequest=He.lastBufferedRequest,He.bufferedRequestCount+=1}else ie(Pe,He,!1,Ae,M,P,Y);return ye}(this,Ne,be,ee,de,ve)),Se},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){var ee=this._writableState;ee.corked&&(ee.corked--,ee.writing||ee.corked||ee.bufferProcessing||!ee.bufferedRequest||ce(this,ee))},H.prototype.setDefaultEncoding=function(ee){if("string"==typeof ee&&(ee=ee.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ee+"").toLowerCase())>-1))throw new E(ee);return this._writableState.defaultEncoding=ee,this},Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),H.prototype._write=function(ee,de,ve){ve(new w("_write()"))},H.prototype._writev=null,H.prototype.end=function(ee,de,ve){var Ne,Se,be,Fe=this._writableState;return"function"==typeof ee?(ve=ee,ee=null,de=null):"function"==typeof de&&(ve=de,de=null),null!=ee&&this.write(ee,de),Fe.corked&&(Fe.corked=1,this.uncork()),Fe.ending||(Ne=this,be=ve,(Se=Fe).ending=!0,fe(Ne,Se),be&&(Se.finished?q.nextTick(be):Ne.once("finish",be)),Se.ended=!0,Ne.writable=!1),this},Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ee){this._writableState&&(this._writableState.destroyed=ee)}}),H.prototype.destroy=c.destroy,H.prototype._undestroy=c.undestroy,H.prototype._destroy=function(ee,de){de(ee)}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/destroy":85,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,inherits:22,"util-deprecate":114}],83:[function(J,re,le){(function(q){(function(){"use strict";var u;function F(I,W,B){return W in I?Object.defineProperty(I,W,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[W]=B,I}var v=J("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),d=Symbol("ended"),m=Symbol("lastPromise"),c=Symbol("handlePromise"),k=Symbol("stream");function y(I,W){return{value:I,done:W}}function f(I){var W=I[e];if(null!==W){var B=I[k].read();null!==B&&(I[m]=null,I[e]=null,I[o]=null,W(y(B,!1)))}}var w=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((F(u={get stream(){return this[k]},next:function(){var I=this,W=this[l];if(null!==W)return Promise.reject(W);if(this[d])return Promise.resolve(y(void 0,!0));if(this[k].destroyed)return new Promise(function(D,G){q.nextTick(function(){I[l]?G(I[l]):D(y(void 0,!0))})});var B,D,G,L=this[m];if(L)B=new Promise((D=L,G=this,function(K,H){D.then(function(){G[d]?K(y(void 0,!0)):G[c](K,H)},H)}));else{var E=this[k].read();if(null!==E)return Promise.resolve(y(E,!1));B=new Promise(this[c])}return this[m]=B,B}},Symbol.asyncIterator,function(){return this}),F(u,"return",function(){var I=this;return new Promise(function(W,B){I[k].destroy(null,function(L){L?B(L):W(y(void 0,!0))})})}),u),w);re.exports=function(I){var W,B=Object.create(T,(F(W={},k,{value:I,writable:!0}),F(W,e,{value:null,writable:!0}),F(W,o,{value:null,writable:!0}),F(W,l,{value:null,writable:!0}),F(W,d,{value:I._readableState.endEmitted,writable:!0}),F(W,c,{value:function(L,E){var D=B[k].read();D?(B[m]=null,B[e]=null,B[o]=null,L(y(D,!1))):(B[e]=L,B[o]=E)},writable:!0}),W));return B[m]=null,v(I,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var E=B[o];return null!==E&&(B[m]=null,B[e]=null,B[o]=null,E(L)),void(B[l]=L)}var D=B[e];null!==D&&(B[m]=null,B[e]=null,B[o]=null,D(y(void 0,!0))),B[d]=!0}),I.on("readable",function(L){q.nextTick(f,L)}.bind(null,B)),B}}).call(this)}).call(this,J("_process"))},{"./end-of-stream":86,_process:59}],84:[function(J,re,le){"use strict";function q(l,d){var m=Object.keys(l);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(l);d&&(c=c.filter(function(k){return Object.getOwnPropertyDescriptor(l,k).enumerable})),m.push.apply(m,c)}return m}function u(l,d,m){return d in l?Object.defineProperty(l,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[d]=m,l}function F(l,d){for(var m=0;m<d.length;m++){var c=d[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}var v=J("buffer").Buffer,e=J("util").inspect,o=e&&e.custom||"inspect";re.exports=function(){function l(){(function(k,y){if(!(k instanceof y))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}var d,m;return d=l,(m=[{key:"push",value:function(k){var y={data:k,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(k){var y={data:k,next:this.head};0===this.length&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var y=this.head,f=""+y.data;y=y.next;)f+=k+y.data;return f}},{key:"concat",value:function(k){if(0===this.length)return v.alloc(0);for(var y,f,w,T=v.allocUnsafe(k>>>0),I=this.head,W=0;I;)y=I.data,f=T,w=W,v.prototype.copy.call(y,f,w),W+=I.data.length,I=I.next;return T}},{key:"consume",value:function(k,y){var f;return k<this.head.data.length?(f=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):f=k===this.head.data.length?this.shift():y?this._getString(k):this._getBuffer(k),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var y=this.head,f=1,w=y.data;for(k-=w.length;y=y.next;){var T=y.data,I=k>T.length?T.length:k;if(I===T.length?w+=T:w+=T.slice(0,k),0==(k-=I)){I===T.length?(++f,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=T.slice(I));break}++f}return this.length-=f,w}},{key:"_getBuffer",value:function(k){var y=v.allocUnsafe(k),f=this.head,w=1;for(f.data.copy(y),k-=f.data.length;f=f.next;){var T=f.data,I=k>T.length?T.length:k;if(T.copy(y,y.length-k,0,I),0==(k-=I)){I===T.length?(++w,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=T.slice(I));break}++w}return this.length-=w,y}},{key:o,value:function(k,y){return e(this,function(f){for(var w=1;w<arguments.length;w++){var T=null!=arguments[w]?arguments[w]:{};w%2?q(Object(T),!0).forEach(function(I){u(f,I,T[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(T)):q(Object(T)).forEach(function(I){Object.defineProperty(f,I,Object.getOwnPropertyDescriptor(T,I))})}return f}({},y,{depth:0,customInspect:!1}))}}])&&F(d.prototype,m),l}()},{buffer:5,util:3}],85:[function(J,re,le){(function(q){(function(){"use strict";function u(e,o){v(e,o),F(e)}function F(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function v(e,o){e.emit("error",o)}re.exports={destroy:function(e,o){var l=this,d=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return d||m?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(v,this,e)):q.nextTick(v,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(c){!o&&c?l._writableState?l._writableState.errorEmitted?q.nextTick(F,l):(l._writableState.errorEmitted=!0,q.nextTick(u,l,c)):q.nextTick(u,l,c):o?(q.nextTick(F,l),o(c)):q.nextTick(F,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var l=e._readableState,d=e._writableState;l&&l.autoDestroy||d&&d.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,J("_process"))},{_process:59}],86:[function(J,re,le){"use strict";var q=J("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function u(){}re.exports=function F(v,e,o){if("function"==typeof e)return F(v,null,e);var W,B;e||(e={}),W=o||u,B=!1,o=function(){if(!B){B=!0;for(var L=arguments.length,E=new Array(L),D=0;D<L;D++)E[D]=arguments[D];W.apply(this,E)}};var l=e.readable||!1!==e.readable&&v.readable,d=e.writable||!1!==e.writable&&v.writable,m=function(){v.writable||k()},c=v._writableState&&v._writableState.finished,k=function(){d=!1,c=!0,l||o.call(v)},y=v._readableState&&v._readableState.endEmitted,f=function(){l=!1,y=!0,d||o.call(v)},w=function(W){o.call(v,W)},T=function(){var W;return l&&!y?(v._readableState&&v._readableState.ended||(W=new q),o.call(v,W)):d&&!c?(v._writableState&&v._writableState.ended||(W=new q),o.call(v,W)):void 0},I=function(){v.req.on("finish",k)};return function(W){return W.setHeader&&"function"==typeof W.abort}(v)?(v.on("complete",k),v.on("abort",T),v.req?I():v.on("request",I)):d&&!v._writableState&&(v.on("end",m),v.on("close",m)),v.on("end",f),v.on("finish",k),!1!==e.error&&v.on("error",w),v.on("close",T),function(){v.removeListener("complete",k),v.removeListener("abort",T),v.removeListener("request",I),v.req&&v.req.removeListener("finish",k),v.removeListener("end",m),v.removeListener("close",m),v.removeListener("finish",k),v.removeListener("end",f),v.removeListener("error",w),v.removeListener("close",T)}}},{"../../../errors":77}],87:[function(J,re,le){re.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],88:[function(J,re,le){"use strict";var q,u=J("../../../errors").codes,F=u.ERR_MISSING_ARGS,v=u.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function o(d){d()}function l(d,m){return d.pipe(m)}re.exports=function(){for(var d=arguments.length,m=new Array(d),c=0;c<d;c++)m[c]=arguments[c];var k,w,y=(w=m).length?"function"!=typeof w[w.length-1]?e:w.pop():e;if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new F("streams");var f=m.map(function(w,T){var I=T<m.length-1;return function(W,B,L,E){var K,H;K=E,H=!1,E=function(){H||(H=!0,K.apply(void 0,arguments))};var D=!1;W.on("close",function(){D=!0}),void 0===q&&(q=J("./end-of-stream")),q(W,{readable:B,writable:L},function(K){if(K)return E(K);D=!0,E()});var G=!1;return function(K){if(!D&&!G)return G=!0,function(H){return H.setHeader&&"function"==typeof H.abort}(W)?W.abort():"function"==typeof W.destroy?W.destroy():void E(K||new v("pipe"))}}(w,I,T>0,function(W){k||(k=W),W&&f.forEach(o),I||(f.forEach(o),y(k))})});return m.reduce(l)}},{"../../../errors":77,"./end-of-stream":86}],89:[function(J,re,le){"use strict";var q=J("../../../errors").codes.ERR_INVALID_OPT_VALUE;re.exports={getHighWaterMark:function(u,F,v,e){var l,d,m,o=(d=e,m=v,null!=(l=F).highWaterMark?l.highWaterMark:d?l[m]:null);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new q(e?v:"highWaterMark",o);return Math.floor(o)}return u.objectMode?16:16384}}},{"../../../errors":77}],90:[function(J,re,le){re.exports=J("events").EventEmitter},{events:11}],91:[function(J,re,le){(function(q){(function(){var u=J("./lib/request"),F=J("./lib/response"),v=J("xtend"),e=J("builtin-status-codes"),o=J("url"),l=le;l.request=function(d,m){d="string"==typeof d?o.parse(d):v(d);var c=-1===q.location.protocol.search(/^https?:$/)?"http:":"",k=d.protocol||c,y=d.hostname||d.host,f=d.port,w=d.path||"/";y&&-1!==y.indexOf(":")&&(y="["+y+"]"),d.url=(y?k+"//"+y:"")+(f?":"+f:"")+w,d.method=(d.method||"GET").toUpperCase(),d.headers=d.headers||{};var T=new u(d);return m&&T.on("response",m),T},l.get=function(d,m){var c=l.request(d,m);return c.end(),c},l.ClientRequest=u,l.IncomingMessage=F.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=e,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":93,"./lib/response":94,"builtin-status-codes":6,url:112,xtend:119}],92:[function(J,re,le){(function(q){(function(){var u;function F(){if(void 0!==u)return u;if(q.XMLHttpRequest){u=new q.XMLHttpRequest;try{u.open("GET",q.XDomainRequest?"/":"https://example.com")}catch(o){u=null}}else u=null;return u}function v(o){var l=F();if(!l)return!1;try{return l.responseType=o,l.responseType===o}catch(d){}return!1}function e(o){return"function"==typeof o}le.fetch=e(q.fetch)&&e(q.ReadableStream),le.writableStream=e(q.WritableStream),le.abortController=e(q.AbortController),le.arraybuffer=le.fetch||v("arraybuffer"),le.msstream=!le.fetch&&v("ms-stream"),le.mozchunkedarraybuffer=!le.fetch&&v("moz-chunked-arraybuffer"),le.overrideMimeType=le.fetch||!!F()&&e(F().overrideMimeType),u=null}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],93:[function(J,re,le){(function(q,u,F){(function(){var v=J("./capability"),e=J("inherits"),o=J("./response"),l=J("readable-stream"),d=o.IncomingMessage,m=o.readyStates,c=re.exports=function(y){var f,w=this;l.Writable.call(w),w._opts=y,w._body=[],w._headers={},y.auth&&w.setHeader("Authorization","Basic "+F.from(y.auth).toString("base64")),Object.keys(y.headers).forEach(function(I){w.setHeader(I,y.headers[I])});var I,W,T=!0;if("disable-fetch"===y.mode||"requestTimeout"in y&&!v.abortController)T=!1,f=!0;else if("prefer-streaming"===y.mode)f=!1;else if("allow-wrong-content-type"===y.mode)f=!v.overrideMimeType;else{if(y.mode&&"default"!==y.mode&&"prefer-fast"!==y.mode)throw new Error("Invalid value for opts.mode");f=!0}w._mode=(I=f,W=T,v.fetch&&W?"fetch":v.mozchunkedarraybuffer?"moz-chunked-arraybuffer":v.msstream?"ms-stream":v.arraybuffer&&I?"arraybuffer":"text"),w._fetchTimer=null,w._socketTimeout=null,w._socketTimer=null,w.on("finish",function(){w._onFinish()})};e(c,l.Writable),c.prototype.setHeader=function(y,f){var w=y.toLowerCase();-1===k.indexOf(w)&&(this._headers[w]={name:y,value:f})},c.prototype.getHeader=function(y){var f=this._headers[y.toLowerCase()];return f?f.value:null},c.prototype.removeHeader=function(y){delete this._headers[y.toLowerCase()]},c.prototype._onFinish=function(){var y=this;if(!y._destroyed){var f=y._opts;"timeout"in f&&0!==f.timeout&&y.setTimeout(f.timeout);var w=y._headers,T=null;"GET"!==f.method&&"HEAD"!==f.method&&(T=new Blob(y._body,{type:(w["content-type"]||{}).value||""}));var I=[];if(Object.keys(w).forEach(function(E){var D=w[E].name,G=w[E].value;Array.isArray(G)?G.forEach(function(K){I.push([D,K])}):I.push([D,G])}),"fetch"===y._mode){var W=null;if(v.abortController){var B=new AbortController;W=B.signal,y._fetchAbortController=B,"requestTimeout"in f&&0!==f.requestTimeout&&(y._fetchTimer=u.setTimeout(function(){y.emit("requestTimeout"),y._fetchAbortController&&y._fetchAbortController.abort()},f.requestTimeout))}u.fetch(y._opts.url,{method:y._opts.method,headers:I,body:T||void 0,mode:"cors",credentials:f.withCredentials?"include":"same-origin",signal:W}).then(function(E){y._fetchResponse=E,y._resetTimers(!1),y._connect()},function(E){y._resetTimers(!0),y._destroyed||y.emit("error",E)})}else{var L=y._xhr=new u.XMLHttpRequest;try{L.open(y._opts.method,y._opts.url,!0)}catch(E){return void q.nextTick(function(){y.emit("error",E)})}"responseType"in L&&(L.responseType=y._mode),"withCredentials"in L&&(L.withCredentials=!!f.withCredentials),"text"===y._mode&&"overrideMimeType"in L&&L.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in f&&(L.timeout=f.requestTimeout,L.ontimeout=function(){y.emit("requestTimeout")}),I.forEach(function(E){L.setRequestHeader(E[0],E[1])}),y._response=null,L.onreadystatechange=function(){switch(L.readyState){case m.LOADING:case m.DONE:y._onXHRProgress()}},"moz-chunked-arraybuffer"===y._mode&&(L.onprogress=function(){y._onXHRProgress()}),L.onerror=function(){y._destroyed||(y._resetTimers(!0),y.emit("error",new Error("XHR error")))};try{L.send(T)}catch(E){return void q.nextTick(function(){y.emit("error",E)})}}}},c.prototype._onXHRProgress=function(){this._resetTimers(!1),function(y){try{var f=y.status;return null!==f&&0!==f}catch(w){return!1}}(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))},c.prototype._connect=function(){var y=this;y._destroyed||(y._response=new d(y._xhr,y._fetchResponse,y._mode,y._resetTimers.bind(y)),y._response.on("error",function(f){y.emit("error",f)}),y.emit("response",y._response))},c.prototype._write=function(y,f,w){this._body.push(y),w()},c.prototype._resetTimers=function(y){var f=this;u.clearTimeout(f._socketTimer),f._socketTimer=null,y?(u.clearTimeout(f._fetchTimer),f._fetchTimer=null):f._socketTimeout&&(f._socketTimer=u.setTimeout(function(){f.emit("timeout")},f._socketTimeout))},c.prototype.abort=c.prototype.destroy=function(y){this._destroyed=!0,this._resetTimers(!0),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort(),y&&this.emit("error",y)},c.prototype.end=function(y,f,w){"function"==typeof y&&(w=y,y=void 0),l.Writable.prototype.end.call(this,y,f,w)},c.prototype.setTimeout=function(y,f){f&&this.once("timeout",f),this._socketTimeout=y,this._resetTimers(!1)},c.prototype.flushHeaders=function(){},c.prototype.setNoDelay=function(){},c.prototype.setSocketKeepAlive=function(){};var k=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":92,"./response":94,_process:59,buffer:5,inherits:22,"readable-stream":109}],94:[function(J,re,le){(function(q,u,F){(function(){var v=J("./capability"),e=J("inherits"),o=J("readable-stream"),l=le.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},d=le.IncomingMessage=function(m,c,k,y){var f=this;if(o.Readable.call(f),f._mode=k,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",function(){q.nextTick(function(){f.emit("close")})}),"fetch"===k){if(f._fetchResponse=c,f.url=c.url,f.statusCode=c.status,f.statusMessage=c.statusText,c.headers.forEach(function(B,L){f.headers[L.toLowerCase()]=B,f.rawHeaders.push(L,B)}),v.writableStream){var w=new WritableStream({write:function(B){return y(!1),new Promise(function(L,E){f._destroyed?E():f.push(F.from(B))?L():f._resumeFetch=L})},close:function(){y(!0),f._destroyed||f.push(null)},abort:function(B){y(!0),f._destroyed||f.emit("error",B)}});try{return void c.body.pipeTo(w).catch(function(B){y(!0),f._destroyed||f.emit("error",B)})}catch(B){}}var T=c.body.getReader();!function B(){T.read().then(function(L){f._destroyed||(y(L.done),L.done?f.push(null):(f.push(F.from(L.value)),B()))}).catch(function(L){y(!0),f._destroyed||f.emit("error",L)})}()}else if(f._xhr=m,f._pos=0,f.url=m.responseURL,f.statusCode=m.status,f.statusMessage=m.statusText,m.getAllResponseHeaders().split(/\r?\n/).forEach(function(B){var L=B.match(/^([^:]+):\s*(.*)/);if(L){var E=L[1].toLowerCase();"set-cookie"===E?(void 0===f.headers[E]&&(f.headers[E]=[]),f.headers[E].push(L[2])):void 0!==f.headers[E]?f.headers[E]+=", "+L[2]:f.headers[E]=L[2],f.rawHeaders.push(L[1],L[2])}}),f._charset="x-user-defined",!v.overrideMimeType){var I=f.rawHeaders["mime-type"];if(I){var W=I.match(/;\s*charset=([^;])(;|$)/);W&&(f._charset=W[1].toLowerCase())}f._charset||(f._charset="utf-8")}};e(d,o.Readable),d.prototype._read=function(){var m=this._resumeFetch;m&&(this._resumeFetch=null,m())},d.prototype._onXHRProgress=function(m){var c=this,k=c._xhr,y=null;switch(c._mode){case"text":if((y=k.responseText).length>c._pos){var f=y.substr(c._pos);if("x-user-defined"===c._charset){for(var w=F.alloc(f.length),T=0;T<f.length;T++)w[T]=255&f.charCodeAt(T);c.push(w)}else c.push(f,c._charset);c._pos=y.length}break;case"arraybuffer":if(k.readyState!==l.DONE||!k.response)break;y=k.response,c.push(F.from(new Uint8Array(y)));break;case"moz-chunked-arraybuffer":if(y=k.response,k.readyState!==l.LOADING||!y)break;c.push(F.from(new Uint8Array(y)));break;case"ms-stream":if(y=k.response,k.readyState!==l.LOADING)break;var I=new u.MSStreamReader;I.onprogress=function(){I.result.byteLength>c._pos&&(c.push(F.from(new Uint8Array(I.result.slice(c._pos)))),c._pos=I.result.byteLength)},I.onload=function(){m(!0),c.push(null)},I.readAsArrayBuffer(y)}c._xhr.readyState===l.DONE&&"ms-stream"!==c._mode&&(m(!0),c.push(null))}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":92,_process:59,buffer:5,inherits:22,"readable-stream":109}],95:[function(J,re,le){arguments[4][77][0].apply(le,arguments)},{dup:77}],96:[function(J,re,le){arguments[4][78][0].apply(le,arguments)},{"./_stream_readable":98,"./_stream_writable":100,_process:59,dup:78,inherits:22}],97:[function(J,re,le){arguments[4][79][0].apply(le,arguments)},{"./_stream_transform":99,dup:79,inherits:22}],98:[function(J,re,le){arguments[4][80][0].apply(le,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/async_iterator":101,"./internal/streams/buffer_list":102,"./internal/streams/destroy":103,"./internal/streams/from":105,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:80,events:11,inherits:22,"string_decoder/":110,util:3}],99:[function(J,re,le){arguments[4][81][0].apply(le,arguments)},{"../errors":95,"./_stream_duplex":96,dup:81,inherits:22}],100:[function(J,re,le){arguments[4][82][0].apply(le,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/destroy":103,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:82,inherits:22,"util-deprecate":114}],101:[function(J,re,le){arguments[4][83][0].apply(le,arguments)},{"./end-of-stream":104,_process:59,dup:83}],102:[function(J,re,le){arguments[4][84][0].apply(le,arguments)},{buffer:5,dup:84,util:3}],103:[function(J,re,le){arguments[4][85][0].apply(le,arguments)},{_process:59,dup:85}],104:[function(J,re,le){arguments[4][86][0].apply(le,arguments)},{"../../../errors":95,dup:86}],105:[function(J,re,le){arguments[4][87][0].apply(le,arguments)},{dup:87}],106:[function(J,re,le){arguments[4][88][0].apply(le,arguments)},{"../../../errors":95,"./end-of-stream":104,dup:88}],107:[function(J,re,le){arguments[4][89][0].apply(le,arguments)},{"../../../errors":95,dup:89}],108:[function(J,re,le){arguments[4][90][0].apply(le,arguments)},{dup:90,events:11}],109:[function(J,re,le){(le=re.exports=J("./lib/_stream_readable.js")).Stream=le,le.Readable=le,le.Writable=J("./lib/_stream_writable.js"),le.Duplex=J("./lib/_stream_duplex.js"),le.Transform=J("./lib/_stream_transform.js"),le.PassThrough=J("./lib/_stream_passthrough.js"),le.finished=J("./lib/internal/streams/end-of-stream.js"),le.pipeline=J("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":96,"./lib/_stream_passthrough.js":97,"./lib/_stream_readable.js":98,"./lib/_stream_transform.js":99,"./lib/_stream_writable.js":100,"./lib/internal/streams/end-of-stream.js":104,"./lib/internal/streams/pipeline.js":106}],110:[function(J,re,le){"use strict";var q=J("safe-buffer").Buffer,u=q.isEncoding||function(y){switch((y=""+y)&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function F(y){var f;switch(this.encoding=function(w){var T=function(I){if(!I)return"utf8";for(var W;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(W)return;I=(""+I).toLowerCase(),W=!0}}(w);if("string"!=typeof T&&(q.isEncoding===u||!u(w)))throw new Error("Unknown encoding: "+w);return T||w}(y),this.encoding){case"utf16le":this.text=o,this.end=l,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=d,this.end=m,f=3;break;default:return this.write=c,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=q.allocUnsafe(f)}function v(y){return y<=127?0:y>>5==6?2:y>>4==14?3:y>>3==30?4:y>>6==2?-1:-2}function e(y){var f=this.lastTotal-this.lastNeed,w=function(T,I,W){if(128!=(192&I[0]))return T.lastNeed=0,"\ufffd";if(T.lastNeed>1&&I.length>1){if(128!=(192&I[1]))return T.lastNeed=1,"\ufffd";if(T.lastNeed>2&&I.length>2&&128!=(192&I[2]))return T.lastNeed=2,"\ufffd"}}(this,y);return void 0!==w?w:this.lastNeed<=y.length?(y.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(y.copy(this.lastChar,f,0,y.length),void(this.lastNeed-=y.length))}function o(y,f){if((y.length-f)%2==0){var w=y.toString("utf16le",f);if(w){var T=w.charCodeAt(w.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",f,y.length-1)}function l(y){var f=y&&y.length?this.write(y):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return f+this.lastChar.toString("utf16le",0,w)}return f}function d(y,f){var w=(y.length-f)%3;return 0===w?y.toString("base64",f):(this.lastNeed=3-w,this.lastTotal=3,1===w?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",f,y.length-w))}function m(y){var f=y&&y.length?this.write(y):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function c(y){return y.toString(this.encoding)}function k(y){return y&&y.length?this.write(y):""}le.StringDecoder=F,F.prototype.write=function(y){if(0===y.length)return"";var f,w;if(this.lastNeed){if(void 0===(f=this.fillLast(y)))return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<y.length?f?f+this.text(y,w):this.text(y,w):f||""},F.prototype.end=function(y){var f=y&&y.length?this.write(y):"";return this.lastNeed?f+"\ufffd":f},F.prototype.text=function(y,f){var w=function(I,W,B){var L=W.length-1;if(L<B)return 0;var E=v(W[L]);return E>=0?(E>0&&(I.lastNeed=E-1),E):--L<B||-2===E?0:(E=v(W[L]))>=0?(E>0&&(I.lastNeed=E-2),E):--L<B||-2===E?0:(E=v(W[L]))>=0?(E>0&&(2===E?E=0:I.lastNeed=E-3),E):0}(this,y,f);if(!this.lastNeed)return y.toString("utf8",f);this.lastTotal=w;var T=y.length-(w-this.lastNeed);return y.copy(this.lastChar,0,T),y.toString("utf8",f,T)},F.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length}},{"safe-buffer":74}],111:[function(J,re,le){(function(q,u){(function(){var F=J("process/browser.js").nextTick,v=Function.prototype.apply,e=Array.prototype.slice,o={},l=0;function d(m,c){this._id=m,this._clearFn=c}le.setTimeout=function(){return new d(v.call(setTimeout,window,arguments),clearTimeout)},le.setInterval=function(){return new d(v.call(setInterval,window,arguments),clearInterval)},le.clearTimeout=le.clearInterval=function(m){m.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},le.enroll=function(m,c){clearTimeout(m._idleTimeoutId),m._idleTimeout=c},le.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},le._unrefActive=le.active=function(m){clearTimeout(m._idleTimeoutId);var c=m._idleTimeout;c>=0&&(m._idleTimeoutId=setTimeout(function(){m._onTimeout&&m._onTimeout()},c))},le.setImmediate="function"==typeof q?q:function(m){var c=l++,k=!(arguments.length<2)&&e.call(arguments,1);return o[c]=!0,F(function(){o[c]&&(k?m.apply(null,k):m.call(null),le.clearImmediate(c))}),c},le.clearImmediate="function"==typeof u?u:function(m){delete o[m]}}).call(this)}).call(this,J("timers").setImmediate,J("timers").clearImmediate)},{"process/browser.js":59,timers:111}],112:[function(J,re,le){"use strict";var q=J("punycode"),u=J("./util");function F(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}le.parse=W,le.resolve=function(B,L){return W(B,!1,!0).resolve(L)},le.resolveObject=function(B,L){return B?W(B,!1,!0).resolveObject(L):L},le.format=function(B){return u.isString(B)&&(B=W(B)),B instanceof F?B.format():F.prototype.format.call(B)},le.Url=F;var v=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(l),m=["%","/","?",";","#"].concat(d),c=["/","?","#"],k=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=J("querystring");function W(B,L,E){if(B&&u.isObject(B)&&B instanceof F)return B;var D=new F;return D.parse(B,L,E),D}F.prototype.parse=function(B,L,E){if(!u.isString(B))throw new TypeError("Parameter 'url' must be a string, not "+typeof B);var D=B.indexOf("?"),G=-1!==D&&D<B.indexOf("#")?"?":"#",K=B.split(G);K[0]=K[0].replace(/\\/g,"/");var H=B=K.join(G);if(H=H.trim(),!E&&1===B.split("#").length){var ie=o.exec(H);if(ie)return this.path=H,this.href=H,this.pathname=ie[1],ie[2]?(this.search=ie[2],this.query=L?I.parse(this.search.substr(1)):this.search.substr(1)):L&&(this.search="",this.query={}),this}var ue=v.exec(H);if(ue){var ce=(ue=ue[0]).toLowerCase();this.protocol=ce,H=H.substr(ue.length)}if(E||ue||H.match(/^\/\/[^@\/]+@[^@\/]+/)){var xe="//"===H.substr(0,2);!xe||ue&&w[ue]||(H=H.substr(2),this.slashes=!0)}if(!w[ue]&&(xe||ue&&!T[ue])){for(var oe,fe,ee=-1,de=0;de<c.length;de++)-1!==(ve=H.indexOf(c[de]))&&(-1===ee||ve<ee)&&(ee=ve);for(-1!==(fe=-1===ee?H.lastIndexOf("@"):H.lastIndexOf("@",ee))&&(oe=H.slice(0,fe),H=H.slice(fe+1),this.auth=decodeURIComponent(oe)),ee=-1,de=0;de<m.length;de++){var ve;-1!==(ve=H.indexOf(m[de]))&&(-1===ee||ve<ee)&&(ee=ve)}-1===ee&&(ee=H.length),this.host=H.slice(0,ee),H=H.slice(ee),this.parseHost(),this.hostname=this.hostname||"";var Fe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Fe)for(var Ne=this.hostname.split(/\./),Se=(de=0,Ne.length);de<Se;de++){var be=Ne[de];if(be&&!be.match(k)){for(var Pe="",He=0,Je=be.length;He<Je;He++)be.charCodeAt(He)>127?Pe+="x":Pe+=be[He];if(!Pe.match(k)){var M=Ne.slice(0,de),P=Ne.slice(de+1),Y=be.match(y);Y&&(M.push(Y[1]),P.unshift(Y[2])),P.length&&(H="/"+P.join(".")+H),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),Fe||(this.hostname=q.toASCII(this.hostname));var pe=this.port?":"+this.port:"",Ae=this.hostname||"";this.host=Ae+pe,this.href+=this.host,Fe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==H[0]&&(H="/"+H))}if(!f[ce])for(de=0,Se=d.length;de<Se;de++){var ye=d[de];if(-1!==H.indexOf(ye)){var De=encodeURIComponent(ye);De===ye&&(De=escape(ye)),H=H.split(ye).join(De)}}var Be=H.indexOf("#");-1!==Be&&(this.hash=H.substr(Be),H=H.slice(0,Be));var Xe=H.indexOf("?");if(-1!==Xe?(this.search=H.substr(Xe),this.query=H.substr(Xe+1),L&&(this.query=I.parse(this.query)),H=H.slice(0,Xe)):L&&(this.search="",this.query={}),H&&(this.pathname=H),T[ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){pe=this.pathname||"";var ot=this.search||"";this.path=pe+ot}return this.href=this.format(),this},F.prototype.format=function(){var B=this.auth||"";B&&(B=(B=encodeURIComponent(B)).replace(/%3A/i,":"),B+="@");var L=this.protocol||"",E=this.pathname||"",D=this.hash||"",G=!1,K="";this.host?G=B+this.host:this.hostname&&(G=B+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(G+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(K=I.stringify(this.query));var H=this.search||K&&"?"+K||"";return L&&":"!==L.substr(-1)&&(L+=":"),this.slashes||(!L||T[L])&&!1!==G?(G="//"+(G||""),E&&"/"!==E.charAt(0)&&(E="/"+E)):G||(G=""),D&&"#"!==D.charAt(0)&&(D="#"+D),H&&"?"!==H.charAt(0)&&(H="?"+H),L+G+(E=E.replace(/[?#]/g,function(ie){return encodeURIComponent(ie)}))+(H=H.replace("#","%23"))+D},F.prototype.resolve=function(B){return this.resolveObject(W(B,!1,!0)).format()},F.prototype.resolveObject=function(B){if(u.isString(B)){var L=new F;L.parse(B,!1,!0),B=L}for(var E=new F,D=Object.keys(this),G=0;G<D.length;G++){var K=D[G];E[K]=this[K]}if(E.hash=B.hash,""===B.href)return E.href=E.format(),E;if(B.slashes&&!B.protocol){for(var H=Object.keys(B),ie=0;ie<H.length;ie++){var ue=H[ie];"protocol"!==ue&&(E[ue]=B[ue])}return T[E.protocol]&&E.hostname&&!E.pathname&&(E.path=E.pathname="/"),E.href=E.format(),E}if(B.protocol&&B.protocol!==E.protocol){if(!T[B.protocol]){for(var ce=Object.keys(B),xe=0;xe<ce.length;xe++){var oe=ce[xe];E[oe]=B[oe]}return E.href=E.format(),E}if(E.protocol=B.protocol,B.host||w[B.protocol])E.pathname=B.pathname;else{for(var fe=(B.pathname||"").split("/");fe.length&&!(B.host=fe.shift()););B.host||(B.host=""),B.hostname||(B.hostname=""),""!==fe[0]&&fe.unshift(""),fe.length<2&&fe.unshift(""),E.pathname=fe.join("/")}if(E.search=B.search,E.query=B.query,E.host=B.host||"",E.auth=B.auth,E.hostname=B.hostname||B.host,E.port=B.port,E.pathname||E.search){var ee=E.pathname||"",de=E.search||"";E.path=ee+de}return E.slashes=E.slashes||B.slashes,E.href=E.format(),E}var ve=E.pathname&&"/"===E.pathname.charAt(0),Fe=B.host||B.pathname&&"/"===B.pathname.charAt(0),Ne=Fe||ve||E.host&&B.pathname,Se=Ne,be=E.pathname&&E.pathname.split("/")||[],Pe=(fe=B.pathname&&B.pathname.split("/")||[],E.protocol&&!T[E.protocol]);if(Pe&&(E.hostname="",E.port=null,E.host&&(""===be[0]?be[0]=E.host:be.unshift(E.host)),E.host="",B.protocol&&(B.hostname=null,B.port=null,B.host&&(""===fe[0]?fe[0]=B.host:fe.unshift(B.host)),B.host=null),Ne=Ne&&(""===fe[0]||""===be[0])),Fe)E.host=B.host||""===B.host?B.host:E.host,E.hostname=B.hostname||""===B.hostname?B.hostname:E.hostname,E.search=B.search,E.query=B.query,be=fe;else if(fe.length)be||(be=[]),be.pop(),be=be.concat(fe),E.search=B.search,E.query=B.query;else if(!u.isNullOrUndefined(B.search))return Pe&&(E.hostname=E.host=be.shift(),(Y=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@"))&&(E.auth=Y.shift(),E.host=E.hostname=Y.shift())),E.search=B.search,E.query=B.query,u.isNull(E.pathname)&&u.isNull(E.search)||(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E;if(!be.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var He=be.slice(-1)[0],Je=(E.host||B.host||be.length>1)&&("."===He||".."===He)||""===He,M=0,P=be.length;P>=0;P--)"."===(He=be[P])?be.splice(P,1):".."===He?(be.splice(P,1),M++):M&&(be.splice(P,1),M--);if(!Ne&&!Se)for(;M--;M)be.unshift("..");!Ne||""===be[0]||be[0]&&"/"===be[0].charAt(0)||be.unshift(""),Je&&"/"!==be.join("/").substr(-1)&&be.push("");var Y,pe=""===be[0]||be[0]&&"/"===be[0].charAt(0);return Pe&&(E.hostname=E.host=pe?"":be.length?be.shift():"",(Y=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@"))&&(E.auth=Y.shift(),E.host=E.hostname=Y.shift())),(Ne=Ne||E.host&&be.length)&&!pe&&be.unshift(""),be.length?E.pathname=be.join("/"):(E.pathname=null,E.path=null),u.isNull(E.pathname)&&u.isNull(E.search)||(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=B.auth||E.auth,E.slashes=E.slashes||B.slashes,E.href=E.format(),E},F.prototype.parseHost=function(){var B=this.host,L=e.exec(B);L&&(":"!==(L=L[0])&&(this.port=L.substr(1)),B=B.substr(0,B.length-L.length)),B&&(this.hostname=B)}},{"./util":113,punycode:60,querystring:63}],113:[function(J,re,le){"use strict";re.exports={isString:function(q){return"string"==typeof q},isObject:function(q){return"object"==typeof q&&null!==q},isNull:function(q){return null===q},isNullOrUndefined:function(q){return null==q}}},{}],114:[function(J,re,le){(function(q){(function(){function u(F){try{if(!q.localStorage)return!1}catch(e){return!1}var v=q.localStorage[F];return null!=v&&"true"===String(v).toLowerCase()}re.exports=function(F,v){if(u("noDeprecation"))return F;var e=!1;return function(){if(!e){if(u("throwDeprecation"))throw new Error(v);u("traceDeprecation")?console.trace(v):console.warn(v),e=!0}return F.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],115:[function(J,re,le){re.exports=function(q){return q&&"object"==typeof q&&"function"==typeof q.copy&&"function"==typeof q.fill&&"function"==typeof q.readUInt8}},{}],116:[function(J,re,le){"use strict";var q=J("is-arguments"),u=J("is-generator-function"),F=J("which-typed-array"),v=J("is-typed-array");function e(ee){return ee.call.bind(ee)}var o="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,d=e(Object.prototype.toString),m=e(Number.prototype.valueOf),c=e(String.prototype.valueOf),k=e(Boolean.prototype.valueOf);if(o)var y=e(BigInt.prototype.valueOf);if(l)var f=e(Symbol.prototype.valueOf);function w(ee,de){if("object"!=typeof ee)return!1;try{return de(ee),!0}catch(ve){return!1}}function T(ee){return"[object Map]"===d(ee)}function I(ee){return"[object Set]"===d(ee)}function W(ee){return"[object WeakMap]"===d(ee)}function B(ee){return"[object WeakSet]"===d(ee)}function L(ee){return"[object ArrayBuffer]"===d(ee)}function E(ee){return"undefined"!=typeof ArrayBuffer&&(L.working?L(ee):ee instanceof ArrayBuffer)}function D(ee){return"[object DataView]"===d(ee)}function G(ee){return"undefined"!=typeof DataView&&(D.working?D(ee):ee instanceof DataView)}le.isArgumentsObject=q,le.isGeneratorFunction=u,le.isTypedArray=v,le.isPromise=function(ee){return"undefined"!=typeof Promise&&ee instanceof Promise||null!==ee&&"object"==typeof ee&&"function"==typeof ee.then&&"function"==typeof ee.catch},le.isArrayBufferView=function(ee){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ee):v(ee)||G(ee)},le.isUint8Array=function(ee){return"Uint8Array"===F(ee)},le.isUint8ClampedArray=function(ee){return"Uint8ClampedArray"===F(ee)},le.isUint16Array=function(ee){return"Uint16Array"===F(ee)},le.isUint32Array=function(ee){return"Uint32Array"===F(ee)},le.isInt8Array=function(ee){return"Int8Array"===F(ee)},le.isInt16Array=function(ee){return"Int16Array"===F(ee)},le.isInt32Array=function(ee){return"Int32Array"===F(ee)},le.isFloat32Array=function(ee){return"Float32Array"===F(ee)},le.isFloat64Array=function(ee){return"Float64Array"===F(ee)},le.isBigInt64Array=function(ee){return"BigInt64Array"===F(ee)},le.isBigUint64Array=function(ee){return"BigUint64Array"===F(ee)},T.working="undefined"!=typeof Map&&T(new Map),le.isMap=function(ee){return"undefined"!=typeof Map&&(T.working?T(ee):ee instanceof Map)},I.working="undefined"!=typeof Set&&I(new Set),le.isSet=function(ee){return"undefined"!=typeof Set&&(I.working?I(ee):ee instanceof Set)},W.working="undefined"!=typeof WeakMap&&W(new WeakMap),le.isWeakMap=function(ee){return"undefined"!=typeof WeakMap&&(W.working?W(ee):ee instanceof WeakMap)},B.working="undefined"!=typeof WeakSet&&B(new WeakSet),le.isWeakSet=function(ee){return B(ee)},L.working="undefined"!=typeof ArrayBuffer&&L(new ArrayBuffer),le.isArrayBuffer=E,D.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&D(new DataView(new ArrayBuffer(1),0,1)),le.isDataView=G;var K="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function H(ee){return"[object SharedArrayBuffer]"===d(ee)}function ie(ee){return void 0!==K&&(void 0===H.working&&(H.working=H(new K)),H.working?H(ee):ee instanceof K)}function ue(ee){return w(ee,m)}function ce(ee){return w(ee,c)}function xe(ee){return w(ee,k)}function oe(ee){return o&&w(ee,y)}function fe(ee){return l&&w(ee,f)}le.isSharedArrayBuffer=ie,le.isAsyncFunction=function(ee){return"[object AsyncFunction]"===d(ee)},le.isMapIterator=function(ee){return"[object Map Iterator]"===d(ee)},le.isSetIterator=function(ee){return"[object Set Iterator]"===d(ee)},le.isGeneratorObject=function(ee){return"[object Generator]"===d(ee)},le.isWebAssemblyCompiledModule=function(ee){return"[object WebAssembly.Module]"===d(ee)},le.isNumberObject=ue,le.isStringObject=ce,le.isBooleanObject=xe,le.isBigIntObject=oe,le.isSymbolObject=fe,le.isBoxedPrimitive=function(ee){return ue(ee)||ce(ee)||xe(ee)||oe(ee)||fe(ee)},le.isAnyArrayBuffer=function(ee){return"undefined"!=typeof Uint8Array&&(E(ee)||ie(ee))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ee){Object.defineProperty(le,ee,{enumerable:!1,value:function(){throw new Error(ee+" is not supported in userland")}})})},{"is-arguments":23,"is-generator-function":25,"is-typed-array":26,"which-typed-array":118}],117:[function(J,re,le){(function(q){(function(){var u=Object.getOwnPropertyDescriptors||function(oe){for(var fe=Object.keys(oe),ee={},de=0;de<fe.length;de++)ee[fe[de]]=Object.getOwnPropertyDescriptor(oe,fe[de]);return ee},F=/%[sdj%]/g;le.format=function(oe){if(!W(oe)){for(var fe=[],ee=0;ee<arguments.length;ee++)fe.push(l(arguments[ee]));return fe.join(" ")}ee=1;for(var de=arguments,ve=de.length,Fe=String(oe).replace(F,function(Se){if("%%"===Se)return"%";if(ee>=ve)return Se;switch(Se){case"%s":return String(de[ee++]);case"%d":return Number(de[ee++]);case"%j":try{return JSON.stringify(de[ee++])}catch(be){return"[Circular]"}default:return Se}}),Ne=de[ee];ee<ve;Ne=de[++ee])T(Ne)||!E(Ne)?Fe+=" "+Ne:Fe+=" "+l(Ne);return Fe},le.deprecate=function(oe,fe){if(void 0!==q&&!0===q.noDeprecation)return oe;if(void 0===q)return function(){return le.deprecate(oe,fe).apply(this,arguments)};var ee=!1;return function(){if(!ee){if(q.throwDeprecation)throw new Error(fe);q.traceDeprecation?console.trace(fe):console.error(fe),ee=!0}return oe.apply(this,arguments)}};var v={},e=/^$/;if(q.env.NODE_DEBUG){var o=q.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+o+"$","i")}function l(oe,fe){var ee={seen:[],stylize:m};return arguments.length>=3&&(ee.depth=arguments[2]),arguments.length>=4&&(ee.colors=arguments[3]),w(fe)?ee.showHidden=fe:fe&&le._extend(ee,fe),B(ee.showHidden)&&(ee.showHidden=!1),B(ee.depth)&&(ee.depth=2),B(ee.colors)&&(ee.colors=!1),B(ee.customInspect)&&(ee.customInspect=!0),ee.colors&&(ee.stylize=d),c(ee,oe,ee.depth)}function d(oe,fe){var ee=l.styles[fe];return ee?"\x1b["+l.colors[ee][0]+"m"+oe+"\x1b["+l.colors[ee][1]+"m":oe}function m(oe,fe){return oe}function c(oe,fe,ee){if(oe.customInspect&&fe&&K(fe.inspect)&&fe.inspect!==le.inspect&&(!fe.constructor||fe.constructor.prototype!==fe)){var de=fe.inspect(ee,oe);return W(de)||(de=c(oe,de,ee)),de}var ve=function(M,P){if(B(P))return M.stylize("undefined","undefined");if(W(P)){var Y="'"+JSON.stringify(P).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return M.stylize(Y,"string")}return I(P)?M.stylize(""+P,"number"):w(P)?M.stylize(""+P,"boolean"):T(P)?M.stylize("null","null"):void 0}(oe,fe);if(ve)return ve;var P,Fe=Object.keys(fe),Ne=(P={},Fe.forEach(function(Y,pe){P[Y]=!0}),P);if(oe.showHidden&&(Fe=Object.getOwnPropertyNames(fe)),G(fe)&&(Fe.indexOf("message")>=0||Fe.indexOf("description")>=0))return k(fe);if(0===Fe.length){if(K(fe)){var Se=fe.name?": "+fe.name:"";return oe.stylize("[Function"+Se+"]","special")}if(L(fe))return oe.stylize(RegExp.prototype.toString.call(fe),"regexp");if(D(fe))return oe.stylize(Date.prototype.toString.call(fe),"date");if(G(fe))return k(fe)}var be,Pe="",He=!1,Je=["{","}"];return f(fe)&&(He=!0,Je=["[","]"]),K(fe)&&(Pe=" [Function"+(fe.name?": "+fe.name:"")+"]"),L(fe)&&(Pe=" "+RegExp.prototype.toString.call(fe)),D(fe)&&(Pe=" "+Date.prototype.toUTCString.call(fe)),G(fe)&&(Pe=" "+k(fe)),0!==Fe.length||He&&0!=fe.length?ee<0?L(fe)?oe.stylize(RegExp.prototype.toString.call(fe),"regexp"):oe.stylize("[Object]","special"):(oe.seen.push(fe),be=He?function(M,P,Y,pe,Ae){for(var ye=[],De=0,Be=P.length;De<Be;++De)ce(P,String(De))?ye.push(y(M,P,Y,pe,String(De),!0)):ye.push("");return Ae.forEach(function(Xe){Xe.match(/^\d+$/)||ye.push(y(M,P,Y,pe,Xe,!0))}),ye}(oe,fe,ee,Ne,Fe):Fe.map(function(M){return y(oe,fe,ee,Ne,M,He)}),oe.seen.pop(),function(M,P,Y){return M.reduce(function(pe,Ae){return Ae.indexOf("\n"),pe+Ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Y[0]+(""===P?"":P+"\n ")+" "+M.join(",\n  ")+" "+Y[1]:Y[0]+P+" "+M.join(", ")+" "+Y[1]}(be,Pe,Je)):Je[0]+Pe+Je[1]}function k(oe){return"["+Error.prototype.toString.call(oe)+"]"}function y(oe,fe,ee,de,ve,Fe){var Ne,Se,be;if((be=Object.getOwnPropertyDescriptor(fe,ve)||{value:fe[ve]}).get?Se=be.set?oe.stylize("[Getter/Setter]","special"):oe.stylize("[Getter]","special"):be.set&&(Se=oe.stylize("[Setter]","special")),ce(de,ve)||(Ne="["+ve+"]"),Se||(oe.seen.indexOf(be.value)<0?(Se=T(ee)?c(oe,be.value,null):c(oe,be.value,ee-1)).indexOf("\n")>-1&&(Se=Fe?Se.split("\n").map(function(Pe){return"  "+Pe}).join("\n").substr(2):"\n"+Se.split("\n").map(function(Pe){return"   "+Pe}).join("\n")):Se=oe.stylize("[Circular]","special")),B(Ne)){if(Fe&&ve.match(/^\d+$/))return Se;(Ne=JSON.stringify(""+ve)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ne=Ne.substr(1,Ne.length-2),Ne=oe.stylize(Ne,"name")):(Ne=Ne.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ne=oe.stylize(Ne,"string"))}return Ne+": "+Se}function f(oe){return Array.isArray(oe)}function w(oe){return"boolean"==typeof oe}function T(oe){return null===oe}function I(oe){return"number"==typeof oe}function W(oe){return"string"==typeof oe}function B(oe){return void 0===oe}function L(oe){return E(oe)&&"[object RegExp]"===H(oe)}function E(oe){return"object"==typeof oe&&null!==oe}function D(oe){return E(oe)&&"[object Date]"===H(oe)}function G(oe){return E(oe)&&("[object Error]"===H(oe)||oe instanceof Error)}function K(oe){return"function"==typeof oe}function H(oe){return Object.prototype.toString.call(oe)}function ie(oe){return oe<10?"0"+oe.toString(10):oe.toString(10)}le.debuglog=function(oe){if(oe=oe.toUpperCase(),!v[oe])if(e.test(oe)){var fe=q.pid;v[oe]=function(){var ee=le.format.apply(le,arguments);console.error("%s %d: %s",oe,fe,ee)}}else v[oe]=function(){};return v[oe]},le.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},le.types=J("./support/types"),le.isArray=f,le.isBoolean=w,le.isNull=T,le.isNullOrUndefined=function(oe){return null==oe},le.isNumber=I,le.isString=W,le.isSymbol=function(oe){return"symbol"==typeof oe},le.isUndefined=B,le.isRegExp=L,le.types.isRegExp=L,le.isObject=E,le.isDate=D,le.types.isDate=D,le.isError=G,le.types.isNativeError=G,le.isFunction=K,le.isPrimitive=function(oe){return null===oe||"boolean"==typeof oe||"number"==typeof oe||"string"==typeof oe||"symbol"==typeof oe||void 0===oe},le.isBuffer=J("./support/isBuffer");var ue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(oe,fe){return Object.prototype.hasOwnProperty.call(oe,fe)}le.log=function(){var oe,fe;console.log("%s - %s",(fe=[ie((oe=new Date).getHours()),ie(oe.getMinutes()),ie(oe.getSeconds())].join(":"),[oe.getDate(),ue[oe.getMonth()],fe].join(" ")),le.format.apply(le,arguments))},le.inherits=J("inherits"),le._extend=function(oe,fe){if(!fe||!E(fe))return oe;for(var ee=Object.keys(fe),de=ee.length;de--;)oe[ee[de]]=fe[ee[de]];return oe};var xe="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;le.promisify=function(oe){if("function"!=typeof oe)throw new TypeError('The "original" argument must be of type Function');if(xe&&oe[xe]){var fe;if("function"!=typeof(fe=oe[xe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fe,xe,{value:fe,enumerable:!1,writable:!1,configurable:!0}),fe}function fe(){for(var ee,de,ve=new Promise(function(Se,be){ee=Se,de=be}),Fe=[],Ne=0;Ne<arguments.length;Ne++)Fe.push(arguments[Ne]);Fe.push(function(Se,be){Se?de(Se):ee(be)});try{oe.apply(this,Fe)}catch(Se){de(Se)}return ve}return Object.setPrototypeOf(fe,Object.getPrototypeOf(oe)),xe&&Object.defineProperty(fe,xe,{value:fe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fe,u(oe))},le.promisify.custom=xe,le.callbackify=function(oe){if("function"!=typeof oe)throw new TypeError('The "original" argument must be of type Function');function fe(){for(var ee=[],de=0;de<arguments.length;de++)ee.push(arguments[de]);var ve=ee.pop();if("function"!=typeof ve)throw new TypeError("The last argument must be of type Function");var Fe=this,Ne=function(){return ve.apply(Fe,arguments)};oe.apply(this,ee).then(function(Se){q.nextTick(Ne.bind(null,null,Se))},function(Se){q.nextTick(function(be,Pe){if(!be){var He=new Error("Promise was rejected with a falsy value");He.reason=be,be=He}return Pe(be)}.bind(null,Se,Ne))})}return Object.setPrototypeOf(fe,Object.getPrototypeOf(oe)),Object.defineProperties(fe,u(oe)),fe}}).call(this)}).call(this,J("_process"))},{"./support/isBuffer":115,"./support/types":116,_process:59,inherits:22}],118:[function(J,re,le){(function(q){(function(){"use strict";var u=J("for-each"),F=J("available-typed-arrays"),v=J("call-bind/callBound"),e=v("Object.prototype.toString"),o=J("has-tostringtag/shams")(),l="undefined"==typeof globalThis?q:globalThis,d=F(),m=v("String.prototype.slice"),c={},k=J("es-abstract/helpers/getOwnPropertyDescriptor"),y=Object.getPrototypeOf;o&&k&&y&&u(d,function(w){if("function"==typeof l[w]){var T=new l[w];if(Symbol.toStringTag in T){var I=y(T),W=k(I,Symbol.toStringTag);if(!W){var B=y(I);W=k(B,Symbol.toStringTag)}c[w]=W.get}}});var f=J("is-typed-array");re.exports=function(w){return!!f(w)&&(o&&Symbol.toStringTag in w?(T=w,I=!1,u(c,function(W,B){if(!I)try{var L=W.call(T);L===B&&(I=L)}catch(E){}}),I):m(e(w),8,-1));var T,I}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18,"is-typed-array":26}],119:[function(J,re,le){re.exports=function(){for(var u={},F=0;F<arguments.length;F++){var v=arguments[F];for(var e in v)q.call(v,e)&&(u[e]=v[e])}return u};var q=Object.prototype.hasOwnProperty},{}],120:[function(J,re,le){"use strict";re.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let u=this.head;u;u=u.next)yield u.value}}},{}],121:[function(J,re,le){"use strict";function q(o){var l=this;if(l instanceof q||(l=new q),l.tail=null,l.head=null,l.length=0,o&&"function"==typeof o.forEach)o.forEach(function(c){l.push(c)});else if(arguments.length>0)for(var d=0,m=arguments.length;d<m;d++)l.push(arguments[d]);return l}function u(o,l,d){var m=l===o.head?new e(d,null,l,o):new e(d,l,l.next,o);return null===m.next&&(o.tail=m),null===m.prev&&(o.head=m),o.length++,m}function F(o,l){o.tail=new e(l,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function v(o,l){o.head=new e(l,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function e(o,l,d,m){if(!(this instanceof e))return new e(o,l,d,m);this.list=m,this.value=o,l?(l.next=this,this.prev=l):this.prev=null,d?(d.prev=this,this.next=d):this.next=null}re.exports=q,q.Node=e,q.create=q,q.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var l=o.next,d=o.prev;return l&&(l.prev=d),d&&(d.next=l),o===this.head&&(this.head=l),o===this.tail&&(this.tail=d),o.list.length--,o.next=null,o.prev=null,o.list=null,l},q.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var l=this.head;o.list=this,o.next=l,l&&(l.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},q.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var l=this.tail;o.list=this,o.prev=l,l&&(l.next=o),this.tail=o,this.head||(this.head=o),this.length++}},q.prototype.push=function(){for(var o=0,l=arguments.length;o<l;o++)F(this,arguments[o]);return this.length},q.prototype.unshift=function(){for(var o=0,l=arguments.length;o<l;o++)v(this,arguments[o]);return this.length},q.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},q.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},q.prototype.forEach=function(o,l){l=l||this;for(var d=this.head,m=0;null!==d;m++)o.call(l,d.value,m,this),d=d.next},q.prototype.forEachReverse=function(o,l){l=l||this;for(var d=this.tail,m=this.length-1;null!==d;m--)o.call(l,d.value,m,this),d=d.prev},q.prototype.get=function(o){for(var l=0,d=this.head;null!==d&&l<o;l++)d=d.next;if(l===o&&null!==d)return d.value},q.prototype.getReverse=function(o){for(var l=0,d=this.tail;null!==d&&l<o;l++)d=d.prev;if(l===o&&null!==d)return d.value},q.prototype.map=function(o,l){l=l||this;for(var d=new q,m=this.head;null!==m;)d.push(o.call(l,m.value,this)),m=m.next;return d},q.prototype.mapReverse=function(o,l){l=l||this;for(var d=new q,m=this.tail;null!==m;)d.push(o.call(l,m.value,this)),m=m.prev;return d},q.prototype.reduce=function(o,l){var d,m=this.head;if(arguments.length>1)d=l;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");m=this.head.next,d=this.head.value}for(var c=0;null!==m;c++)d=o(d,m.value,c),m=m.next;return d},q.prototype.reduceReverse=function(o,l){var d,m=this.tail;if(arguments.length>1)d=l;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");m=this.tail.prev,d=this.tail.value}for(var c=this.length-1;null!==m;c--)d=o(d,m.value,c),m=m.prev;return d},q.prototype.toArray=function(){for(var o=new Array(this.length),l=0,d=this.head;null!==d;l++)o[l]=d.value,d=d.next;return o},q.prototype.toArrayReverse=function(){for(var o=new Array(this.length),l=0,d=this.tail;null!==d;l++)o[l]=d.value,d=d.prev;return o},q.prototype.slice=function(o,l){(l=l||this.length)<0&&(l+=this.length),(o=o||0)<0&&(o+=this.length);var d=new q;if(l<o||l<0)return d;o<0&&(o=0),l>this.length&&(l=this.length);for(var m=0,c=this.head;null!==c&&m<o;m++)c=c.next;for(;null!==c&&m<l;m++,c=c.next)d.push(c.value);return d},q.prototype.sliceReverse=function(o,l){(l=l||this.length)<0&&(l+=this.length),(o=o||0)<0&&(o+=this.length);var d=new q;if(l<o||l<0)return d;o<0&&(o=0),l>this.length&&(l=this.length);for(var m=this.length,c=this.tail;null!==c&&m>l;m--)c=c.prev;for(;null!==c&&m>o;m--,c=c.prev)d.push(c.value);return d},q.prototype.splice=function(o,l,...d){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var m=0,c=this.head;null!==c&&m<o;m++)c=c.next;var k=[];for(m=0;c&&m<l;m++)k.push(c.value),c=this.removeNode(c);for(null===c&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev),m=0;m<d.length;m++)c=u(this,c,d[m]);return k},q.prototype.reverse=function(){for(var o=this.head,l=this.tail,d=o;null!==d;d=d.prev){var m=d.prev;d.prev=d.next,d.next=m}return this.head=l,this.tail=o,this};try{J("./iterator.js")(q)}catch(o){}},{"./iterator.js":120}],122:[function(J,re,le){var q=J("./parser"),u=J("./utils"),F=u;function v(o,l){this.name="NonSupportedSparqlFeatureError",this.feature=o,this.message=l||"SPARQL feature "+o+" non supported"}function e(o){this.name=ParserError,this.message=o||"Error parsing SPARQL query"}v.prototype=new Error,v.constructor=v,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(o){return q.parse(o)},AbstractQueryTree.prototype.parseExecutableUnit=function(o){if("select"===o.kind)return this.parseSelect(o);if("ask"===o.kind)return this.parseSelect(o);if("modify"===o.kind)return this.parseSelect(o);if("construct"===o.kind)return this.parseSelect(o);if("insertdata"===o.kind)return this.parseInsertData(o);if("deletedata"===o.kind)return this.parseInsertData(o);if("load"===o.kind||"clear"===o.kind||"drop"===o.kind||"create"===o.kind)return o;throw new Error("unknown executable unit: "+o.kind)},AbstractQueryTree.prototype.parseSelect=function(o){return null==o?(console.log("error parsing query"),null):(o.pattern=this.build(o.pattern,{freshCounter:0}),o)},AbstractQueryTree.prototype.parseInsertData=function(o){return null==o?(console.log("error parsing query"),null):o},AbstractQueryTree.prototype.build=function(o,l){if("groupgraphpattern"===o.token)return this._buildGroupGraphPattern(o,l);if("basicgraphpattern"===o.token){var d={kind:"BGP",value:o.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(d,l)}if("graphunionpattern"===o.token)return{kind:"UNION",value:[this.build(o.value[0],l),this.build(o.value[1],l)]};if("graphgraphpattern"===o.token)return{kind:"GRAPH",value:this.build(o.value,l),graph:o.graph};throw null!=o.token?new v(o.token,"Non implemented SPARQL graph pattern: '"+o.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(o)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(o,l){for(var d,m,c,k=[],y=0;y<o.value.length;y++)if(o.value[y].predicate&&"path"===o.value[y].predicate.token){d=o.value[y],m=o.value.slice(y+1);var f=AbstractQueryTree.translatePathExpression(d,l),w=null;if("BGP"!==f.kind){if("ZERO_OR_MORE_PATH"===f.kind||"ONE_OR_MORE_PATH"===f.kind){if(c=k.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:k},rvalue:f}:f,"ZERO_OR_MORE_PATH"===f.kind)if("var"===f.y.token&&0===f.y.value.indexOf("fresh:")&&"var"===f.x.token&&0===f.x.value.indexOf("fresh:"))for(var T=0;T<o.value.length;T++)o.value[T].object&&"var"===o.value[T].object.token&&o.value[T].object.value===f.x.value&&((w=F.clone(o.value[T],!0)).object=f.y);else if("var"===f.y.token&&0===f.y.value.indexOf("fresh:"))for(T=0;T<o.value.length;T++)o.value[T].subject&&"var"===o.value[T].subject.token&&o.value[T].subject.value===f.y.value&&((w=F.clone(o.value[T],!0)).subject=f.x);if(m.length>0){var I=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:m},l);return null!=w?{kind:"UNION",value:[{kind:"JOIN",lvalue:c,rvalue:I},{kind:"BGP",value:k.concat([w]).concat(m)}]}:{kind:"JOIN",lvalue:c,rvalue:I}}return c}return f}k=k.concat(f.value)}else k.push(o.value[y]);return o.value=k,o},AbstractQueryTree.translatePathExpression=function(o,l){if("element"===o.predicate.kind)return"+"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,l),x:o.subject,y:o.object}):"*"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,l),x:o.subject,y:o.object}):(o.predicate=o.predicate.value,{kind:"BGP",value:[o]});if("sequence"===o.predicate.kind){for(var d,m,c=o.subject,k=o.object,y=o.graph,f=[],w=0;w<o.predicate.value.length;w++)w!=o.predicate.value.length-1?(d={token:"var",value:"fresh:"+l.freshCounter},l.freshCounter++):d=k,m={subject:c,predicate:o.predicate.value[w],object:d},null!=y&&(m.graph=F.clone(y,!0)),f.push(m),w!=o.predicate.value.length-1&&(c=F.clone(d,!0));var T={kind:"BGP",value:f};return AbstractQueryTree.translatePathExpressionsInBGP(T,l)}throw new v("Non supported path expression "+o.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(o,l){for(var d=o.filters||[],m=o.binds||[],c={kind:"EMPTY_PATTERN"},k=0;k<o.patterns.length;k++){var y=o.patterns[k];if("optionalgraphpattern"===y.token)c="FILTER"===(f=this.build(y.value,l)).kind?{kind:"LEFT_JOIN",lvalue:c,rvalue:f.value,filter:f.filter}:{kind:"LEFT_JOIN",lvalue:c,rvalue:f,filter:!0};else{var f=this.build(y,l);c="EMPTY_PATTERN"==c.kind?f:{kind:"JOIN",lvalue:c,rvalue:f}}}if(c.binds=m,0!=d.length){if("EMPTY_PATTERN"===c.kind)return{kind:"FILTER",filter:d,value:c};if("LEFT_JOIN"===c.kind&&!0===c.filter)return{kind:"FILTER",filter:d,value:c};if("LEFT_JOIN"===c.kind)return{kind:"FILTER",filter:d,value:c};if("JOIN"===c.kind)return{kind:"FILTER",filter:d,value:c};if("UNION"===c.kind)return{kind:"FILTER",filter:d,value:c};if("GRAPH"===c.kind)return{kind:"FILTER",filter:d,value:c};if("BGP"===c.kind)return{kind:"FILTER",filter:d,value:c};throw new Error("Unknow kind of algebra expression: "+c.kind)}return c},AbstractQueryTree.prototype.collectBasicTriples=function(o,l){if(null==l&&(l=[]),"select"===o.kind)l=this.collectBasicTriples(o.pattern,l);else if("BGP"===o.kind)l=l.concat(o.value);else if("ZERO_OR_MORE_PATH"===o.kind)l=this.collectBasicTriples(o.path);else if("UNION"===o.kind)l=this.collectBasicTriples(o.value[0],l),l=this.collectBasicTriples(o.value[1],l);else if("GRAPH"===o.kind)l=this.collectBasicTriples(o.value,l);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)l=this.collectBasicTriples(o.lvalue,l),l=this.collectBasicTriples(o.rvalue,l);else if("FILTER"===o.kind)l=this.collectBasicTriples(o.value,l);else if("construct"===o.kind)l=this.collectBasicTriples(o.pattern,l);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return l},AbstractQueryTree.prototype.bind=function(o,l){if(null!=o.graph&&o.graph.token&&"var"===o.graph.token&&null!=l[o.graph.value]&&(o.graph=l[o.graph.value]),null!=o.filter){for(var d=[],m=0;m<o.filter.length;m++)o.filter[m].value=this._bindFilter(o.filter[m].value,l),d.push(o.filter[m]);o.filter=d}if("select"===o.kind)o.pattern=this.bind(o.pattern,l);else if("BGP"===o.kind)o.value=this._bindTripleContext(o.value,l);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._bindTripleContext(o.path,l),o.x&&"var"===o.x.token&&null!=l[o.x.value]&&(o.x=l[o.x.value]),o.y&&"var"===o.y.token&&null!=l[o.y.value]&&(o.y=l[o.y.value]);else if("UNION"===o.kind)o.value[0]=this.bind(o.value[0],l),o.value[1]=this.bind(o.value[1],l);else if("GRAPH"===o.kind)o.value=this.bind(o.value,l);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.bind(o.lvalue,l),o.rvalue=this.bind(o.rvalue,l);else if("FILTER"===o.kind){var c=this;o.value=this.bind(o.value,l),o.filter=o.filter.map(function(k){return{token:"filter",value:c._bindFilter(k.value,l)}})}else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._bindTripleContext=function(o,l){for(var d=0;d<o.length;d++)for(var m in delete o[d].graph,delete o[d].variables,o[d]){var c=o[d][m];"var"===c.token&&null!=l[c.value]&&(o[d][m]=l[c.value])}return o},AbstractQueryTree.prototype._bindFilter=function(o,l){if(null!=o.expressionType){var d=o.expressionType;if("relationalexpression"==d)o.op1=this._bindFilter(o.op1,l),o.op2=this._bindFilter(o.op2,l);else if("conditionalor"==d||"conditionaland"==d)for(var m=0;m<o.operands.length;m++)o.operands[m]=this._bindFilter(o.operands[m],l);else if("additiveexpression"==d)for(o.summand=this._bindFilter(o.summand,l),m=0;m<o.summands.length;m++)o.summands[m].expression=this._bindFilter(o.summands[m].expression,l);else if("builtincall"==d)for(m=0;m<o.args.length;m++)o.args[m]=this._bindFilter(o.args[m],l);else if("multiplicativeexpression"==d)for(o.factor=this._bindFilter(o.factor,l),m=0;m<o.factors.length;m++)o.factors[m].expression=this._bindFilter(o.factors[m].expression,l);else if("unaryexpression"==d)o.expression=this._bindFilter(o.expression,l);else if("irireforfunction"==d)for(m=0;m<o.factors.args;m++)o.args[m]=this._bindFilter(o.args[m],l);else if("atomic"==d&&"var"==o.primaryexpression&&null!=l[o.value.value]){var c=l[o.value.value];"uri"===c.token?o.primaryexpression="iri":o.primaryexpression="literal",o.value=c}}return o},AbstractQueryTree.prototype.replace=function(o,l,d,m){if(null!=o.graph&&o.graph.token&&o.graph.token===l.token&&o.graph.value==l.value&&(o.graph=F.clone(d,!0)),null!=o.filter){for(var c=[],k=0;k<o.filter.length;k++)o.filter[k].value=this._replaceFilter(o.filter[k].value,l,d,m),c.push(o.filter[k]);o.filter=c}if("select"===o.kind)o.pattern=this.replace(o.pattern,l,d,m);else if("BGP"===o.kind)o.value=this._replaceTripleContext(o.value,l,d,m);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._replaceTripleContext(o.path,l,d,m),o.x&&o.x.token===l.token&&o.value===l.value&&(o.x=F.clone(d,!0)),o.y&&o.y.token===l.token&&o.value===l.value&&(o.y=F.clone(d,!0));else if("UNION"===o.kind)o.value[0]=this.replace(o.value[0],l,d,m),o.value[1]=this.replace(o.value[1],l,d,m);else if("GRAPH"===o.kind)o.value=this.replace(o.value,l,d);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.replace(o.lvalue,l,d,m),o.rvalue=this.replace(o.rvalue,l,d,m);else if("FILTER"===o.kind)o.value=this._replaceFilter(o.value,l,d,m);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._replaceTripleContext=function(o,l,d,m){for(var c=0;c<o.length;c++)for(var k in o[c]){var y=o[c][k];"var"===y.token&&"var"===l.token&&y.value===l.value||"blank"===y.token&&"blank"===l.token&&y.value===l.value?o[c][k]=d:"literal"!==y.token&&"uri"!==y.token||"literal"!==l.token&&"uri"!==l.token||y.token!==l.token||u.lexicalFormTerm(y,m)[y.token]!==u.lexicalFormTerm(l,m)[y.token]||(o[c][k]=d)}return o},AbstractQueryTree.prototype._replaceFilter=function(o,l,d,m){if(null!=o.expressionType){var c=o.expressionType;if("relationalexpression"==c)o.op1=this._replaceFilter(o.op1,l,d,m),o.op2=this._replaceFilter(o.op2,l,d,m);else if("conditionalor"==c||"conditionaland"==c)for(var k=0;k<o.operands.length;k++)o.operands[k]=this._replaceFilter(o.operands[k],l,d,m);else if("additiveexpression"==c)for(o.summand=this._replaceFilter(o.summand,l,d,m),k=0;k<o.summands.length;k++)o.summands[k].expression=this._replaceFilter(o.summands[k].expression,l,d,m);else if("builtincall"==c)for(k=0;k<o.args.length;k++)o.args[k]=this._replaceFilter(o.args[k],l,d,m);else if("multiplicativeexpression"==c)for(o.factor=this._replaceFilter(o.factor,l,d,m),k=0;k<o.factors.length;k++)o.factors[k].expression=this._replaceFilter(o.factors[k].expression,l,d,m);else if("unaryexpression"==c)o.expression=this._replaceFilter(o.expression,l,d,m);else if("irireforfunction"==c)for(k=0;k<o.factors.args;k++)o.args[k]=this._replaceFilter(o.args[k],l,d,m);else if("atomic"==c){var y=null;(o.primaryexpression==l.token&&o.value==l.value||"iri"==o.primaryexpression&&"uri"==l.token&&o.value==l.value)&&(y=d.value),null!=y&&("uri"===d.token?o.primaryexpression="iri":o.primaryexpression=d.token,o.value=y)}}return o},AbstractQueryTree.prototype.treeWithUnion=function(o){if(null==o||null==o.kind)return!1;if("select"===o.kind)return this.treeWithUnion(o.pattern);if("BGP"===o.kind)return this.treeWithUnion(o.value);if("ZERO_OR_MORE_PATH"===o.kind)return!1;if("UNION"===o.kind){if(null==o.value[0].value||null==o.value[0].value.variables||null==o.value[1].value||null==o.value[1].value.variables)return!0;if(o.value[0].variables.join("/")===o.values[1].variables.join("/"))return!!this.treeWithUnion(o.value[0])||this.treeWithUnion(o.value[1])}else{if("GRAPH"===o.kind)return!1;if("LEFT_JOIN"!==o.kind&&"JOIN"!==o.kind)return"FILTER"!==o.kind&&(o.kind,!1);if(this.treeWithUnion(o.lvalue))return!0;this.treeWithUnion(o.rvalue)}},re.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:v,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(J,re,le){"use strict";var q=J("./utils"),u=q,F=q.nextTick,v=function(o,l){if(0!=arguments.length){this.order=o,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var d=this;this._diskWrite(this.root,function(m){d.root=m,d._updateRootNode(d.root,function(c){d.comparator=function(k,y){return k<y?-1:k>y?1:0},d.merger=null,null!=l&&l(d)})})}};v.prototype._allocateNode=function(){return new e},v.prototype._diskWrite=function(o,l){F(function(){l(o)})},v.prototype._diskRead=function(o,l){F(function(){l(o)})},v.prototype._diskDelete=function(o,l){F(function(){l()})},v.prototype._updateRootNode=function(o,l){l(o)},v.prototype.search=function(o,l,d){var m=this.root;this.__search(this,o,m,l,d)},v.prototype.__search=function(o,l,d,m,c){for(var k=0;k<d.numberActives&&1===o.comparator(l,d.keys[k].key);)k++;k<d.numberActives&&0===o.comparator(d.keys[k].key,l)?m(null!=c&&1==c||d.keys[k].data):!0===d.isLeaf?m(null):o._diskRead(d.children[k],function(y){o.__search(o,l,y,m,c)})},v.prototype.walk=function(o,l){this.__walk(this,this.root,o,l)},v.prototype.__walk=function(o,l,d,m){var c=l.numberActives,k=0;if(l.isLeaf){for(k=0;k<l.numberActives;k++)d(l.keys[k]);return m()}u.whilst(function(){return k<c},function(y){o._diskRead(l.children[k],function(f){o.__walk(o,f,d,function(){o._diskRead(l.keys[k],function(w){d(w),k++,y()})})})},function(){o._diskRead(l.children[c],function(y){o.__walk(o,y,d,function(){m()})})})},v.prototype.walkNodes=function(o){this.__walkNodes(this,root,o,function(){})},v.prototype.__walkNodes=function(o,l,d,m){if(l.isLeaf)return d(l),m();d(l);var c=l.numberActives,k=0;u.whilst(function(){return k<c},function(y){o._diskRead(l.children[k],function(f){o.__walkNodes(o,f,d,function(){k++,y()})})},function(){o._diskRead(l.children[c],function(y){o.__walkNodes(o,y,d,function(){})})})},v.prototype._splitChild=function(o,l,d,m){var c=this._allocateNode();c.isLeaf=d.isLeaf,c.level=d.level,c.numberActives=this.order-1;var k=d.keys[this.order-1];d.keys[this.order-1]=null;for(var y=0;y<this.order-1;y++)c.keys[y]=d.keys[y+this.order],d.keys[y+this.order]=null,d.isLeaf||(c.children[y]=d.children[y+this.order],d.children[y+this.order]=null);for(d.isLeaf||(c.children[y]=d.children[y+this.order],d.children[y+this.order]=null),d.numberActives=this.order-1,y=o.numberActives+1;y>l+1;y--)o.children[y]=o.children[y-1];for(o.children[l+1]=c,y=o.numberActives;y>l;y--)o.keys[y]=o.keys[y-1];o.keys[l]=k,o.numberActives++;var f=this;this._diskWrite(c,function(w){f._diskWrite(o,function(T){T.children[l+1]=w,f._diskWrite(d,function(I){return m(T)})})})},v.prototype.insert=function(o,l,d){if(this.root.numberActives===2*this.order-1){var m=this._allocateNode();m.isLeaf=!1,m.level=this.root.level+1,m.numberActives=0,m.children[0]=this.root;var c=this;this._splitChild(m,0,this.root,function(k){m=k,c.root=m,c._updateRootNode(m,function(y){c._insertNonFull(y,o,l,d)})})}else this._insertNonFull(this.root,o,l,d)},v.prototype._insertNonFull=function(o,l,d,m){var c=o.numberActives-1;this.__insertNonFull(this,o,c,l,d,m)},v.prototype.__insertNonFull=function(o,l,d,m,c,k){if(l.isLeaf){for(;d>=0&&-1===o.comparator(m,l.keys[d].key);)l.keys[d+1]=l.keys[d],d--;d>=0&&0===o.comparator(m,l.keys[d].key)?l.keys[d]={key:m,data:c}:(l.keys[d+1]={key:m,data:c},l.numberActives++),o._diskWrite(l,function(f){return k(f)})}else{for(;d>=0&&-1===o.comparator(m,l.keys[d].key);)d--;d++;var y=o;o._diskRead(l.children[d],function(f){f.numberActives===2*y.order-1?y._splitChild(l,d,f,function(){1===y.comparator(m,l.keys[d].key)&&d++,y._diskRead(l.children[d],function(w){d=w.numberActives-1,y.__insertNonFull(o,w,d,m,c,k)})}):y._diskRead(l.children[d],function(w){d=w.numberActives-1,y.__insertNonFull(o,w,d,m,c,k)})})}},v.prototype.delete=function(o,l){var d=this.root;v.prototype.__deleteSearchNode(this,o,d,l)},v.prototype.__deleteSearchNode=function(o,l,d,m){var c=0;if(0===d.numberActives)return m(!1);for(;c<d.numberActives&&1===o.comparator(l,d.keys[c].key);)c++;var k=c;if(c<d.numberActives&&0===o.comparator(l,d.keys[c].key))return o.__deleteNodeFound(o,k,l,d,m);if(!0===d.isLeaf)return m(!1);var y=d;o._diskRead(d.children[c],function(f){if(null===f)return m(!1);var w=!1,T=!1,I=null,W=null;k===y.numberActives?(T=!0,W=y.children[k-1],I=y.children[k-1]):0===k?(w=!0,I=y.children[1],W=y.children[1]):(W=y.children[k-1],I=y.children[k+1]),o._diskRead(W,function(B){o._diskRead(I,function(L){!0===T&&(L=null),!0===w&&(B=null),f.numberActives===o.order-1&&null!=y?null!=L&&L.numberActives>o.order-1?o._moveKey(y,c,-1,function(E){o.__deleteSearchNode(o,l,f,m)}):null!=B&&B.numberActives>o.order-1?o._moveKey(y,c,1,function(E){o.__deleteSearchNode(o,l,f,m)}):null!=B&&B.numberActives===o.order-1?o._mergeSiblings(y,c,-1,function(E){o.__deleteSearchNode(o,l,E,m)}):null!=L&&L.numberActives===o.order-1&&o._mergeSiblings(y,c,1,function(E){o.__deleteSearchNode(o,l,E,m)}):o.__deleteSearchNode(o,l,f,m)})})})},v.prototype.__deleteNodeFound=function(o,l,d,m,c){return m.isLeaf&&m.numberActives>o.order-1||m.isLeaf&&m===o.root?(o._deleteKeyFromNode(m,l,function(){c(!0)}),!0):(!1===m.isLeaf&&o._diskRead(m.children[l],function(k){k.numberActives>o.order-1?o._getMaxKeyPos(o,k,function(y){d=y.node.keys[y.index],m.keys[l]=d,o._diskWrite(m,function(f){f=k,d=d.key,o.__deleteSearchNode(o,d,f,c)})}):o._diskRead(m.children[l+1],function(y){y.numberActives>o.order-1?o._getMinKeyPos(o,y,function(f){d=f.node.keys[f.index],m.keys[l]=d,o._diskWrite(m,function(w){w=y,d=d.key,o.__deleteSearchNode(o,d,w,c)})}):k.numberActives===o.order-1&&y.numberActives===o.order-1&&o._mergeNodes(k,m.keys[l],y,function(f){m.children[l]=f;for(var w=++l;w<m.numberActives;w++)m.children[w]=m.children[w+1],m.keys[w-1]=m.keys[w];m.children[w]=null,m.keys[w-1]=null,m.numberActives--,0===m.numberActives&&o.root===m&&(o.root=f),o._diskWrite(m,function(T){o.__deleteSearchNode(o,d,f,c)})})})}),void(m.isLeaf&&m.numberActives>o.order-1&&o._deleteKeyFromNode(m,l,function(k){o.__deleteSearchNode(o,d,k,c)})))},v.prototype._moveKey=function(o,l,d,m){1===d&&l--;var c=this;c._diskRead(o.children[l],function(k){c._diskRead(o.children[l+1],function(y){if(-1==d){k.keys[k.numberActives]=o.keys[l],k.children[k.numberActives+1]=y.children[0],y.children[0]=null,k.numberActives++,o.keys[l]=y.keys[0];for(var f=1;f<y.numberActives;f++)y.keys[f-1]=y.keys[f],y.children[f-1]=y.children[f];y.children[y.numberActives-1]=y.children[y.numberActives],y.numberActives--}else{for(y.children[y.numberActives+1]=y.children[y.numberActives],f=y.numberActives;f>0;f--)y.children[f]=y.children[f-1],y.keys[f]=y.keys[f-1];y.keys[0]=null,y.children[0]=null,y.children[0]=k.children[k.numberActives],y.keys[0]=o.keys[l],y.numberActives++,k.children[k.numberActives]=null,o.keys[l]=k.keys[k.numberActives-1],k.keys[k.numberActives-1]=null,k.numberActives--}c._diskWrite(k,function(w){c._diskWrite(y,function(T){c._diskWrite(o,function(I){return m(I)})})})})})},v.prototype._mergeSiblings=function(o,l,d,m){var c,k,y,f;l===o.numberActives?(l--,y=o.children[o.numberActives-1],f=o.children[o.numberActives]):(y=o.children[l],f=o.children[l+1]);var w=this;w._diskRead(y,function(T){w._diskRead(f,function(I){var W=w._allocateNode();for(W.isLeaf=T.isLeaf,W.level=T.level,k=0;k<w.order-1;k++)W.keys[k]=T.keys[k],W.children[k]=T.children[k];for(W.keys[w.order-1]=o.keys[l],W.children[w.order-1]=T.children[w.order-1],k=0;k<w.order-1;k++)W.keys[k+w.order]=I.keys[k],W.children[k+w.order]=I.children[k];for(W.children[2*w.order-1]=I.children[w.order-1],o.children[l]=W,k=l;k<o.numberActives;k++)o.keys[k]=o.keys[k+1],o.children[k+1]=o.children[k+2];for(W.numberActives=T.numberActives+I.numberActives+1,o.numberActives--,c=o.numberActives;c<2*w.order-1;c++)o.keys[c]=null;0===o.numberActives&&w.root===o&&(w.root=W,W.level?W.isLeaf=!1:W.isLeaf=!0),w._diskWrite(W,function(B){w._diskWrite(o,function(L){w._diskDelete(T,function(){w._diskDelete(I,function(){if(w.root!==B)return m(B);w._updateRootNode(w.root,function(){return m(B)})})})})})})})},v.prototype._deleteKeyFromNode=function(o,l,d){var m,c=2*this.order-1;if(o.numberActives<c&&(c=o.numberActives),!1===o.isLeaf)return!1;for(o.keys[l],m=l;m<c-1;m++)o.keys[m]=o.keys[m+1];o.keys.pop(),o.numberActives--,this._diskWrite(o,function(k){return d(k)})},v.prototype._mergeNodes=function(o,l,d,m){var c,k;for((c=this._allocateNode()).isLeaf=!0,k=0;k<o.numberActives;k++)c.keys[k]=o.keys[k],c.children[k]=o.children[k];for(c.children[o.numberActives]=o.children[o.numberActives],c.keys[o.numberActives]=l,k=0;k<d.numberActives;k++)c.keys[k+o.numberActives+1]=d.keys[k],c.children[k+o.numberActives+1]=d.children[k];c.children[2*this.order-1]=d.children[d.numberActives],c.numberActives=o.numberActives+d.numberActives+1,c.isLeaf=o.isLeaf,c.level=o.level;var y=this;this._diskWrite(c,function(f){y._diskDelete(o,function(){y._diskDelete(d,function(){return m(f)})})})},v.prototype.audit=function(o){var l=[],d=[],m=this,c=function(y){for(var f=0;f<d.length;f++)if(0===m.comparator(d[f],y)){var w=" !!! duplicated key "+y;!0===o&&console.log(w),l.push(w)}},k=null;return m=this,this.walkNodes(function(y){!0===o&&(console.log("--- Node at "+y.level+" level"),console.log(" - leaf? "+y.isLeaf),console.log(" - num actives? "+y.numberActives),console.log(" - keys: "));for(var f=y.numberActives;f<y.keys.length;f++)null!=y.keys[f]&&!0===o&&(console.log(" * warning : redundant key data"),l.push(" * warning : redundant key data"));for(f=y.numberActives+1;f<y.children.length;f++)null!=y.children[f]&&!0===o&&(console.log(" * warning : redundant children data"),l.push(" * warning : redundant key data"));if(!1===y.isLeaf)for(f=0;f<y.numberActives;f++){var w=this._diskRead(y.children[f]).keys[this._diskRead(y.children[f]).numberActives-1].key,T=this._diskRead(y.children[f+1]).keys[0].key;if(!0===o&&console.log("   "+y.keys[f].key+"("+w+","+T+")"),-1===m.comparator(y.keys[f].key,w)){var I=" !!! value max left "+w+" > key "+y.keys[f].key;!0===o&&console.log(I),l.push(I)}1===m.comparator(y.keys[f].key,T)&&(I=" !!! value min right "+T+" < key "+y.keys[f].key,!0===o&&console.log(I),l.push(I)),c(y.keys[f].key),d.push(y.keys[f].key)}else for(null===k?k=y.level:k!=y.level&&(I=" !!! Leaf node with wrong level value",!0===o&&console.log(I),l.push(I)),f=0;f<y.numberActives;f++)!0===o&&console.log(" "+y.keys[f].key),c(y.keys[f].key),d.push(y.keys[f].key);y!=m.root&&(y.numberActives>2*m.order-1&&(!0===o&&(I=" !!!! MAX num keys restriction violated "),console.log(I),l.push(I)),y.numberActives<m.order-1&&(!0===o&&(I=" !!!! MIN num keys restriction violated "),console.log(I),l.push(I)))}),l},v.prototype._getMaxKeyPos=function(o,l,d){var m={};return null===l?d(null):!0===l.isLeaf?(m.node=l,m.index=l.numberActives-1,d(m)):(m.node=l,m.index=l.numberActives-1,void o._diskRead(l.children[l.numberActives],function(c){return o._getMaxKeyPos(o,c,d)}))},v.prototype._getMinKeyPos=function(o,l,d){var m={};if(null===l&&d(null),!0===l.isLeaf)return m.node=l,m.index=0,d(m);m.node=l,m.index=0,o._diskRead(l.children[0],function(c){return o._getMinKeyPos(o,c,d)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};re.exports={Tree:v,Node:e}},{"./utils":140}],124:[function(J,re,le){var q=J("./utils"),u=J("./utils"),F=(J("./quad_index").QuadIndex,J("./quad_index").Pattern),v=J("./rdf_model"),e=J("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var o=0;o<this.indices.length;o++){var l=this.indices[o];this.indexMap[l]={},this.queriesIndexMap[l]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(o,l){this.updateInProgress[o].push(l)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(o){if(!0!==this.ongoingModification){var l=this;if(null!=this.updateInProgress){var d=l.updateInProgress;l.updateInProgress=null,this.sendNotification(Callbacks.deleted,d[Callbacks.deleted],function(){l.sendNotification(Callbacks.added,d[Callbacks.added],function(){l.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){l.dispatchQueries(function(){o(!0)})})})})}else o(!0)}else o(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(o,l,d){for(var m={},c=0;c<l.length;c++){var k=l[c];for(var y in this.indexMap){var f=this.indexMap[y],w=this.componentOrders[y];this._searchCallbacksInIndex(f,w,o,k,m),0!=this.pendingQueries.length&&(f=this.queriesIndexMap[y],this._searchQueriesInIndex(f,w,k))}}this.dispatchNotifications(m),null!=d&&d(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(o,l,d){for(var m=this.emptyNotificationsMap[o]||[],c=0;c<m.length;c++)m[c](o,l);d()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(o){for(var l in o){var d=this.callbacksMap[l],m=o[l][Callbacks.deleted];if(null!=m)try{d(Callbacks.deleted,m)}catch(k){}for(var c in o[l])if(c!=Callbacks.deleted)try{d(c,o[l][c])}catch(k){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(o,l,d,m,c){for(var k=m[1],y=(m=m[0],0);y<l.length+1;y++){for(var f=o._||[],w=[],T=0;T<f.length;T++){var I=f[T];null!=this.callbacksMap[I]&&(c[I]=c[I]||{},c[I][d]=c[I][d]||[],c[I][d].push(m),w.push(I))}o._=w;var W=l[y];if(null==o[""+k[W]])break;o=o[""+k[W]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(o,l){var d=this.emptyNotificationsMap[o]||[];d.push(l),this.emptyNotificationsMap[o]=d},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(o,l){var d=this.emptyNotificationsMap[o];null!=d&&(d=q.reject(d,function(m){return m===l})),this.emptyNotificationsMap[o]=d},Callbacks.CallbacksBackend.prototype.subscribe=function(o,l,d,m,c,k){var y=this._tokenizeComponents(o,l,d,m),f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var w=this;this.engine.normalizeQuad(y,f,!0,function(T){for(var I=new F(T),W=w._indexForPattern(I),B=w.componentOrders[W],L=w.indexMap[W],E=0;E<B.length;E++){var D=T[B[E]];if("_"===D){null==L._&&(L._=[]),w.callbackCounter++,L._.push(w.callbackCounter),w.callbacksMap[w.callbackCounter]=c,w.callbacksInverseMap[c]=w.callbackCounter;break}E===B.length-1?(L[D]=L[D]||{_:[]},w.callbackCounter++,L[D]._.push(w.callbackCounter),w.callbacksMap[w.callbackCounter]=c,w.callbacksInverseMap[c]=w.callbackCounter):(L[D]=L[D]||{},L=L[D])}null!=k&&k(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(o){var l=this.callbacksInverseMap[o];null!=l&&(delete this.callbacksInverseMap[o],delete this.callbacksMap[l])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(o,l,d,m){var c={};return null==o?c.subject=Callbacks.ANYTHING:0==o.indexOf("_:")?c.subject={token:"blank",value:o}:c.subject={token:"uri",value:o},c.predicate=null==l?Callbacks.ANYTHING:{token:"uri",value:l},c.object=null==d?Callbacks.ANYTHING:{token:"uri",value:d},c.graph=null==m?Callbacks.ANYTHING:{token:"uri",value:m},c},Callbacks.CallbacksBackend.prototype._indexForPattern=function(o){for(var l=o.indexKey,d=this.indices,m=0;m<d.length;m++)for(var c=d[m],k=this.componentOrders[c],y=0;y<k.length&&!1!==q.include(l,k[y]);y++)if(y==l.length-1)return c;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var o,l,d,m;4===arguments.length?(o=arguments[0],l=arguments[1],d=arguments[2],m=arguments[3]):(o=arguments[0],l=this.engine.lexicon.defaultGraphUri,d=arguments[1],m=arguments[2]);var c="CONSTRUCT { <"+o+"> ?p ?o } WHERE { GRAPH <"+l+"> { <"+o+"> ?p ?o } }",k=this,y={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,y);var f=[];this.engine.execute(c,function(w,T){if(w)m&&m(!1);else{var I=T,W=!1,B=function(L,E){if("eventsFlushed"===L&&W){W=!1;try{d(I)}catch(ue){}}else if("eventsFlushed"!==L){W=!0;for(var D=0;D<E.length;D++){var G=E[D],K=v.buildRDFResource(G.subject,f,k.engine,y),H=v.buildRDFResource(G.predicate,f,k.engine,y),ie=v.buildRDFResource(G.object,f,k.engine,y);null!=K&&null!=H&&null!=ie&&(G=new v.Triple(K,H,ie),L===Callbacks.added?I.add(G):L===Callbacks.deleted&&I.remove(G))}}};k.observersMap[d]=B,k.subscribeEmpty(Callbacks.eventsFlushed,B),k.subscribe(o,null,null,null,B,function(){try{d(I)}catch(L){}m&&m(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(o){var l=this.observersMap[o];return!!l&&(this.unsubscribe(l),this.unsubscribeEmpty(Callbacks.eventsFlushed,l),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(o,l,d){var m=this.aqt.parseQueryString(o),c=this.aqt.parseSelect(m.units[0]),k=this.aqt.collectBasicTriples(c),y=this,f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var w=this.queryCounter;this.queryCounter++,this.queriesMap[w]=o,this.queriesInverseMap[o]=w,this.queriesList.push(w),this.queriesCallbacksMap[w]=l,u.eachSeries(k,function(T,I){null==T.graph&&(T.graph=y.engine.lexicon.defaultGraphUriTerm),y.engine.normalizeQuad(T,f,!0,function(W){for(var B=new F(W),L=y._indexForPattern(B),E=y.componentOrders[L],D=y.queriesIndexMap[L],G=0;G<E.length;G++){var K=W[E[G]];if("string"==typeof K){null==D._&&(D._=[]),D._.push(w);break}G===E.length-1?(D[K]=D[K]||{_:[]},D[K]._.push(w)):(D[K]=D[K]||{},D=D[K])}I()})},function(){y.engine.execute(o,function(T,I){T?console.log("ERROR in query callback "+I):l(I)}),null!=d&&d()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(o){var l=this.queriesInverseMap[o];null!=l&&(delete this.queriesInverseMap[o],delete this.queriesMap[l],this.queriesList=q.reject(this.queriesList,function(d){return d===l}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(o,l,d){for(var m=d[1],c=(d=d[0],0);c<l.length+1;c++){for(var k=o._||[],y=[],f=0;f<k.length;f++){var w=k[f];q.include(this.pendingQueries,w)&&(q.remove(this.pendingQueries,function(I){return I===w}),this.matchedQueries.push(w)),null!=this.queriesMap[w]&&y.push(w)}o._=y;var T=l[c];if(null==o[""+m[T]])break;o=o[""+m[T]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(o){var l,d,m=this,c={};u.eachSeries(this.matchedQueries,function(k,y){null==c[k]?(c[k]=!0,l=m.queriesMap[k],d=m.queriesCallbacksMap[k],m.engine.execute(l,function(f,w){if(!f)try{d(w)}catch(T){}y()})):y()},function(){o()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,re.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(J,re,le){var q=J("jsonld");le.JSONLDParser={};var u=le.JSONLDParser;u.parser={async:!0,parse:function(F,v,e,o){try{"string"==typeof F&&(F=JSON.parse(F)),async function(l,d,m){var c=null;var y=function(L){return"BlankNode"===L.termType?{blank:L.value}:"NamedNode"===L.termType?{token:"uri",value:L.value}:"Literal"===L.termType?null!=L.language?{literal:'"'+L.value+'"@'+L.language}:null!==L.datatype?{literal:'"'+L.value+'"^^<'+L.datatype.value+">"}:{literal:'"'+L.value+'"'}:void 0};c=[];for(var f,w,T,I=await q.toRDF(l,{}),W=0;W<I.length;W++){var B=I[W];f=B.subject,w=B.predicate,T=B.object,c.push({subject:y(f),predicate:y(w),object:y(T),graph:d})}m(null,c)}(F,v,o)}catch(l){o(l)}}},re.exports={JSONLDParser:u}},{jsonld:43}],126:[function(J,re,le){var q=J("./utils"),u=J("./btree").Tree;Lexicon=function(F){var v=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new u(2,function(o){v.uris=o,e()})},function(e){new u(2,function(o){v.literals=o,e()})},function(e){new u(2,function(o){v.knownGraphs=o,e()})},function(e){new u(2,function(o){v.oidUris=o,e()})},function(e){new u(2,function(o){v.oidLiterals=o,e()})},function(e){new u(2,function(o){v.oidBlanks=o,e()})})(function(){null!=F&&F(v)})},Lexicon.prototype.registerGraph=function(F,v,e){F!=this.defaultGraphOid?this.knownGraphs.insert(F,v,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(F,v){var e=[];this.knownGraphs.walk(function(o){!0===F?e.push(o.data):e.push(o.key)},function(){v(e)})},Lexicon.prototype.registerUri=function(F,v){var e=this;F===this.defaultGraphUri?v(this.defaultGraphOid):this.uris.search(F,function(o){if(null==o){var l=e.oidCounter,d="u"+l;e.oidCounter++,q.seq(function(m){e.uris.insert(F,[l,0],function(){m()})},function(m){e.oidUris.insert(d,F,function(){m()})})(function(){v(l)})}else l=o[0],o[1]=o[1]+1,v(l)})},Lexicon.prototype.resolveUri=function(F,v){F===this.defaultGraphUri?v(this.defaultGraphOid):this.uris.search(F,function(e){v(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(F,v){F===this.defaultGraphUri?v(0):this.uris.search(F,function(e){v(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(F){var v=this.oidCounter;this.oidCounter++;var e=""+v;this.oidBlanks.insert(e,e,function(){F(v)})},Lexicon.prototype.resolveBlank=function(F,v){var e=this;this.oidBlanks.search(F,function(o){if(null!=o)v(o);else{var l=e.oidCounter;this.oidCounter++,v(""+l)}})},Lexicon.prototype.resolveBlankCost=function(F,v){v(0)},Lexicon.prototype.registerLiteral=function(F,v){var e=this;this.literals.search(F,function(o){if(null==o){var l="l"+(d=e.oidCounter);e.oidCounter++,q.seq(function(m){e.literals.insert(F,[d,0],function(){m()})},function(m){e.oidLiterals.insert(l,F,function(){m()})})(function(){v(d)})}else{var d=o[0];o[1]=o[1]+1,v(d)}})},Lexicon.prototype.resolveLiteral=function(F,v){this.literals.search(F,function(e){v(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(F,v){this.literals.search(F,function(e){v(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(F){var v;return-1!=(v=F.lastIndexOf("@"))&&'"'===F[v-1]&&null!=F.substring(v,F.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:F.substring(1,v-1),lang:F.substring(v+1,F.length)}:-1!=(v=F.lastIndexOf("^^"))&&'"'===F[v-1]&&"<"===F[v+2]&&">"===F[F.length-1]?{token:"literal",value:F.substring(1,v-1),type:F.substring(v+3,F.length-1)}:{token:"literal",value:F.substring(1,F.length-1)}},Lexicon.prototype.parseUri=function(F){return{token:"uri",value:F}},Lexicon.prototype.retrieve=function(F,v){var e=this;F===this.defaultGraphOid?v({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):q.seq(function(o,l){e.oidUris.search("u"+F,function(d){l(null,null!=d?e.parseUri(d):null)})},function(o,l){null==o?e.oidLiterals.search("l"+F,function(d){l(null,null!=d?e.parseLiteral(d):null)}):l(null,o)},function(o,l){null==o?e.oidBlanks.search(""+F,function(d){l(null,null!=d?{token:"blank",value:"_:"+F}:null)}):l(null,o)})(null,function(o,l){v(l)})},Lexicon.prototype.clear=function(F){var v=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new u(2,function(o){v.uris=o,e()})},function(e){new u(2,function(o){v.literals=o,e()})},function(e){new u(2,function(o){v.knownGraphs=o,e()})},function(e){new u(2,function(o){v.oidUris=o,e()})},function(e){new u(2,function(o){v.oidLiterals=o,e()})},function(e){new u(2,function(o){v.oidBlanks=o,e()})})(function(){null!=F&&F()})},Lexicon.prototype.unregister=function(F,v,e){var o=this;q.seq(function(l){o._unregisterTerm(F.subject.token,v.subject,l)},function(l){o._unregisterTerm(F.predicate.token,v.predicate,l)},function(l){o._unregisterTerm(F.object.token,v.object,l)},function(l){null!=F.graph?o._unregisterTerm(F.graph.token,v.graph,l):l()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(F,v,e){var o=this;if("uri"===F)if(v!=this.defaultGraphOid){var l="u"+v;o.oidUris.search(l,function(d){o.uris.search(d,function(m){var c=m[1];""+m[0]==""+v?0===c?q.seq(function(k){o.oidUris.delete(l,function(){k()})},function(k){o.uris.delete(d,function(){k()})},function(k){o.knownGraphs.delete(v,function(){k()})})(function(){e()}):o.uris.insert(d,[v,c-1],function(){e()}):e()})})}else e();else"literal"===F?(this.oidCounter++,l="l"+v,o.oidLiterals.search(l,function(d){o.literals.search(d,function(m){var c=m[1];""+m[0]==""+v?0===c?q.seq(function(k){o.oidLiterals.delete(l,function(){k()})},function(k){o.literals.delete(d,function(){k()})})(function(){e()}):o.literals.insert(d,[v,c-1],function(){e()}):e()})})):"blank"===F?o.oidBlanks.delete(""+v,function(){e()}):e()},re.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(J,re,le){if(!J("./utils").isWorker()){var q=J("http"),u=J("https"),F=J("url");NetworkTransport={load:function(v,e,o,l){var d=null==l?3:l,m=F.parse(v,!0,!0),c={host:m.host,hostname:m.hostname,method:"GET",path:m.path,headers:{host:m.hostname,Accept:e}},k=null;"http:"===m.protocol?(c.port=m.port||80,k=q):"https:"===m.protocol&&(c.port=m.port||443,k=u);var y=k.request(c,function(f){var w=f.headers,T="";if("2"==(""+f.statusCode)[0])f.on("end",function(){o(null,{headers:w,data:T})}),f.on("data",function(W){T+=W});else if("3"==(""+f.statusCode)[0])if(0==d)o(new Error("Too many redirections"));else{var I=w.Location||w.location;null!=I?NetworkTransport.load(I,e,o,d-1):o(new Error("Redirection without location header"))}else o(new Error("HTTP error: "+f.statusCode))});y.on("error",o),y.end()}},re.exports={NetworkTransport}}},{"./utils":140,http:91,https:20,url:112}],128:[function(J,re,le){re.exports=function(){"use strict";function q(u,F,v,e){this.message=u,this.expected=F,this.found=v,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,q)}return function(u,F){function v(){this.constructor=u}v.prototype=F.prototype,u.prototype=new v}(q,Error),q.buildMessage=function(u,F){var d,v={literal:function(d){return'"'+o(d.text)+'"'},class:function(d){var m,c="";for(m=0;m<d.parts.length;m++)c+=d.parts[m]instanceof Array?l(d.parts[m][0])+"-"+l(d.parts[m][1]):l(d.parts[m]);return"["+(d.inverted?"^":"")+c+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};function e(d){return d.charCodeAt(0).toString(16).toUpperCase()}function o(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+e(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+e(m)})}function l(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+e(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+e(m)})}return"Expected "+function(d){var m,c,k,y=new Array(d.length);for(m=0;m<d.length;m++)y[m]=(k=d[m],v[k.type](k));if(y.sort(),y.length>0){for(m=1,c=1;m<y.length;m++)y[m-1]!==y[m]&&(y[c]=y[m],c++);y.length=c}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}(u)+" but "+(((d=F)?'"'+o(d)+'"':"end of input")+" found.")},{SyntaxError:q,parse:function(u,F){F=void 0!==F?F:{};var v,e={},o={DOCUMENT:jh},l=jh,d=qe("[1] QueryUnit"),m=qe("[2] Query"),k=qe("[3] Prologue"),f=qe("[4] BaseDecl"),w="BASE",T=Ge("BASE",!1),I="base",W=Ge("base",!1),L=qe("[5] PrefixDecl"),E="PREFIX",D=Ge("PREFIX",!1),G="prefix",K=Ge("prefix",!1),ie=qe("[6] SelectQuery"),ce=qe("[7] SubSelect"),oe=qe("[8] SelectClause"),ee=Ge("SELECT",!1),ve=Ge("select",!1),Fe="DISTINCT",Ne=Ge("DISTINCT",!1),Se="distinct",be=Ge("distinct",!1),Pe="REDUCED",He=Ge("REDUCED",!1),Je="reduced",M=Ge("reduced",!1),P="(",Y=Ge("(",!1),pe="AS",Ae=Ge("AS",!1),ye="as",De=Ge("as",!1),Be=")",Xe=Ge(")",!1),ot="*",ct=Ge("*",!1),jt=qe("[9] ConstructQuery"),Ee="CONSTRUCT",Re=Ge("CONSTRUCT",!1),je="construct",V=Ge("construct",!1),he="WHERE",me=Ge("WHERE",!1),Le="where",_e=Ge("where",!1),ke="{",Ie=Ge("{",!1),We="}",Ze=Ge("}",!1),Ke=qe("[10] DescribeQuery"),et="DESCRIBE",kt=Ge("DESCRIBE",!1),vt=qe("[11] AskQuery"),bt=Ge("ASK",!1),at=Ge("ask",!1),Ct=qe("[12] DatasetClause"),Dn=Ge("FROM",!1),Ti=Ge("from",!1),ys=qe("[13] DefaultGraphClause"),ms=qe("[14] NamedGraphClause"),Wr="NAMED",ni=Ge("NAMED",!1),jr="named",ii=Ge("named",!1),zr=qe("[15] SourceSelector"),go=qe("[16] WhereClause"),tn=qe("[17] SolutionModifier"),bs=qe("[18] GroupClause"),oi=Ge("GROUP",!1),xs=Ge("group",!1),yo=Ge("BY",!1),Jt=Ge("by",!1),Pn=qe("[19] GroupCondition"),Ii=qe("[20] HavingClause"),st=Ge("HAVING",!1),St=qe("[21] HavingCondition"),ks=qe("[22] OrderClause"),xo=Ge("ORDER",!1),Ra=Ge("order",!1),Lu=qe("[23] OrderCondition"),wo=Ge("ASC",!1),ja=Ge("asc",!1),Ri=Ge("DESC",!1),Da=Ge("desc",!1),Pa=qe("[24] LimitOffsetClauses"),Qa=qe("[25] LimitClause"),Iu=Ge("LIMIT",!1),rn=Ge("limit",!1),Ru=qe("[26] OffsetClause"),Di=Ge("OFFSET",!1),ju=Ge("offset",!1),Mu=qe("[27] BindingsClause"),_o="BINDINGS",Ha=Ge("BINDINGS",!1),Pu=qe("[28] BindingValue"),Mi="UNDEF",Fs=Ge("UNDEF",!1),Co=qe("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Bn="VALUES",So=Ge("VALUES",!1),Pi="values",Es=Ge("values",!1),Bu=qe("[29] UpdateUnit"),Wa=qe("[30] Update"),nr=";",nn=Ge(";",!1),Ts=qe("[31] Update1"),za=qe("[32] Load"),Ns=Ge("LOAD",!1),Fo=Ge("load",!1),si=Ge("INTO",!1),Uu=Ge("into",!1),Hu=qe("[33] Clear"),Ja=Ge("CLEAR",!1),Wu=Ge("clear",!1),ai="SILENT",Is=Ge("SILENT",!1),Qn="silent",Os=Ge("silent",!1),To=qe("[34] Drop"),zu=Ge("DROP",!1),qu=Ge("drop",!1),ir=qe("[35] Create"),Za=Ge("CREATE",!1),Ju=Ge("create",!1),Xu=qe("[36] InsertData"),ui="INSERT",Rs=Ge("INSERT",!1),No="insert",el=Ge("insert",!1),Qi="DATA",js=Ge("DATA",!1),Lo="data",fi=Ge("data",!1),Io=qe("[37] DeleteData"),wn="DELETE",Oo=Ge("DELETE",!1),mr="delete",an=Ge("delete",!1),Vu=qe("[38] DeleteWhere"),Ku=qe("[39] Modify"),Ps=Ge("WITH",!1),Vr=Ge("with",!1),nl=qe("[40] DeleteClause"),Yu=qe("[41] InsertClause"),Zu=qe("[42] UsingClause"),ol=Ge("USING",!1),sl=Ge("using",!1),Qs=qe("[43] GraphRef"),ln="GRAPH",Ro=Ge("GRAPH",!1),un="graph",Tr=Ge("graph",!1),Us=qe("[44] GraphRefAll"),jo="DEFAULT",ul=Ge("DEFAULT",!1),Gs="default",Hs=Ge("default",!1),Hn=Ge("ALL",!1),hi=Ge("all",!1),zs=qe("[45] QuadPattern"),qs=function(s){return s.quadsContext},Js=qe("[46] QuadData"),zn=qe("[47] Quads"),Xt=".",Ut=Ge(".",!1),_n=qe("[48] QuadsNotTriples"),tf=qe("[49] TriplesTemplate"),Ui=qe("[50] GroupGraphPattern"),Xs=qe("[51] GroupGraphPatternSub"),rf=qe("[54] TriplesBlock"),hl=qe("[53] GraphPatternNotTriples"),Ks=qe("[54] OptionalGraphPattern"),Bo="OPTIONAL",pi=Ge("OPTIONAL",!1),Gi="optional",pl=Ge("optional",!1),nf=qe("[55] GraphGraphPattern"),sf=qe("[56] ServiceGraphPattern"),Uo="SERVICE",Ys=Ge("SERVICE",!1),Hi=qe("[57] MinusGraphPattern"),Go=Ge("MINUS",!1),Wi=Ge("minus",!1),qn=qe("[58] GroupOrUnionGraphPattern"),Cn="UNION",Sn=Ge("UNION",!1),An="union",Jn=Ge("union",!1),yl=qe("[59] Filter"),af=Ge("FILTER",!1),Xn=Ge("filter",!1),uf=qe("[60] Bind"),ff=Ge("BIND",!1),cf=Ge("bind",!1),or=qe("[60] Constraint"),vr=qe("[61] InlineData"),zi=qe("[62] DataBlock"),hf=qe("[63] InlineDataOneVar"),pf=qe("[64] InlineDataFull"),vf=qe("[65] DataBlockValue"),ea=qe("[61] FunctionCall"),ta=qe("[62] ArgList"),Zt=",",$t=Ge(",",!1),_l=qe("[63] ExpressionList"),Cl=qe("[64] ConstructTemplate"),gf=qe("[65] ConstructTriples"),fn=qe("[66] TriplesSameSubject"),Al=qe("[83] PropertyListPathNotEmpty"),Pt=qe("[67] PropertyListNotEmpty"),En=qe("[68] PropertyList"),Tn=qe("[86] ObjectListPath"),na=qe("[69] ObjectList"),mf=qe("[87] ObjectPath"),ia=qe("[70] Object"),Ji=qe("[71] Verb"),vi=Ge("a",!1),Tl=qe("[72] TriplesSameSubjectPath"),zo=qe("[73] PropertyListNotEmptyPath"),Ll=qe("[74] PropertyListPath"),xf=qe("[75]"),wf=qe("[76] VerbSimple"),kf=qe("[77] Path"),qo=qe("[78] PathAlternative"),Jo=Ge("|",!1),Ol=qe("[79] PathSequence"),hn=Ge("/",!1),Rl=qe("[88] PathElt"),jl=qe("[81] PathEltOrInverse"),aa=Ge("^",!1),Vo=qe("[82] PathMod"),Yo=Ge("?",!1),pn="+",Lr=Ge("+",!1),Zo=qe("[83] PathPrimary"),es=Ge("!",!1),Ml=qe("[85] PathOneInPropertySet"),gi=qe("[86] Integer"),Pl=qe("[100] TriplesNodePath"),Bl=qe("[87] TriplesNode"),Cf=qe("[101] BlankNodePropertyListPath"),rs=Ge("[",!1),is=Ge("]",!1),Zi=qe("[88] BlankNodePropertyList"),eo=qe("[103] CollectionPath"),Sf=qe("[89] Collection"),Ql=qe("[105] GraphNodePath"),dn=function(s){return s[1]},yi=qe("[90] GraphNode"),to=qe("[91] VarOrTerm"),Af=qe("[92] VarOrIRIref"),Ul=qe("[93] Var"),Ef=qe("[94] GraphTerm"),Tf=qe("[95] Expression"),br=qe("[96] ConditionalOrExpression"),Gl=Ge("||",!1),Lf=qe("[97] ConditionalAndExpression"),ua=Ge("&&",!1),If=qe("[98] ValueLogical"),Of=qe("[99] RelationalExpression"),Pr=Ge("=",!1),io=Ge("!=",!1),Br=Ge("<",!1),ca=Ge(">",!1),ha=Ge("<=",!1),pa=Ge(">=",!1),gn=Ge("I",!1),bi=Ge("i",!1),xi=Ge("N",!1),Yn=Ge("n",!1),da=Ge("O",!1),zl=Ge("o",!1),wi=Ge("T",!1),ga=Ge("t",!1),ya=qe("[100] NumericExpression"),Jl=qe("[101] AdditiveExpression"),Yr="-",Qr=Ge("-",!1),jf=qe("[102] MultiplicativeExpression"),ao=qe("[103] UnaryExpression"),Mf=qe("[104] PrimaryExpression"),Uf=qe("[105] BrackettedExpression"),Yl=qe("[106] BuiltInCall"),Zl=Ge("STR",!1),eu=Ge("str",!1),as=Ge("LANG",!1),Hf=Ge("lang",!1),Ht="LANGMATCHES",zf=Ge("LANGMATCHES",!1),ls="langmatches",uo=Ge("langmatches",!1),fo="DATATYPE",xa=Ge("DATATYPE",!1),wa="datatype",ru=Ge("datatype",!1),iu=Ge("BOUND",!1),_a=Ge("bound",!1),au=Ge("IRI",!1),_i=Ge("iri",!1),Jf=Ge("URI",!1),Xf=Ge("uri",!1),us=Ge("BNODE",!1),t="bnode",n=Ge("bnode",!1),a="COALESCE",b=Ge("COALESCE",!1),j="coalesce",X=Ge("coalesce",!1),se=Ge("IF",!1),Te=Ge("if",!1),Qe="ISLITERAL",Ye=Ge("ISLITERAL",!1),tt="isliteral",lt=Ge("isliteral",!1),ht="isLITERAL",dt=Ge("isLITERAL",!1),gt="ISBLANK",_t=Ge("ISBLANK",!1),wt="isblank",Nt=Ge("isblank",!1),Gt="isBLANK",ar=Ge("isBLANK",!1),xr="SAMETERM",wr=Ge("SAMETERM",!1),Vt="sameterm",kr=Ge("sameterm",!1),tr=Ge("ISURI",!1),_r=Ge("isuri",!1),On=Ge("isURI",!1),Zr=Ge("ISIRI",!1),Ca=Ge("isiri",!1),$n=Ge("isIRI",!1),pr="custom:",Ci=Ge("custom:",!1),fs="CUSTOM:",wp=Ge("CUSTOM:",!1),Fc=/^[a-zA-Z0-9_]/,Ec=Dt([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),_p=qe("[107] RegexExpression"),Cp=Ge("REGEX",!1),Sp=Ge("regex",!1),Fp=qe("[108] ExistsFunc"),fu="EXISTS",Lc=Ge("EXISTS",!1),cu="exists",Ic=Ge("exists",!1),Tp=qe("[109] NotExistsFunc"),Np=Ge("NOT",!1),Lp=Ge("not",!1),Op=qe("[110] Aggregate"),Rp=Ge("COUNT",!1),jp=Ge("count",!1),Mc="GROUP_CONCAT",Mp=Ge("GROUP_CONCAT",!1),Pc="group_concat",Pp=Ge("group_concat",!1),Bc="SEPARATOR",Bp=Ge("SEPARATOR",!1),Up=Ge("SUM",!1),Gp=Ge("sum",!1),Wp=Ge("MIN",!1),zp=Ge("min",!1),Jp=Ge("MAX",!1),Xp=Ge("max",!1),Kp=Ge("AVG",!1),Yp=Ge("avg",!1),$p=qe("[117] IRIrefOrFunction"),td=qe("[112] RDFLiteral"),rd=Ge("^^",!1),id=qe("[113] NumericLiteral"),od=qe("[114] NumericLiteralUnsigned"),sd=qe("[115] NumericLiteralPositive"),ad=qe("[116] NumericLiteralNegative"),ld=qe("[117] BooleanLiteral"),ud=Ge("TRUE",!1),fd=Ge("true",!1),hd=Ge("FALSE",!1),pd=Ge("false",!1),vd=qe("[118] String"),hu=function(s){return{token:"string",value:s}},gd=qe("[119] IRIref"),md=qe("[120] PrefixedName"),wd=qe("[121] BlankNode"),Cd=qe("[122] IRI_REF"),eh=/^[^<>"{}|\^`\\]/,th=Dt(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Ad=qe("[123] PNAME_NS"),Aa=Ge(":",!1),Fd=qe("[124] PNAME_LN"),Td=qe("[125] BLANK_NODE_LABEL"),Nd=Ge("_:",!1),Id=qe("[126] VAR1"),Od=qe("[127] VAR2"),oh=Ge("$",!1),Rd=qe("[128] LANGTAG"),ah=Ge("@",!1),lh=/^[a-zA-Z]/,uh=Dt([["a","z"],["A","Z"]],!1,!1),pu=/^[a-zA-Z0-9]/,du=Dt([["a","z"],["A","Z"],["0","9"]],!1,!1),Dd=qe("[129] INTEGER"),Kt=/^[0-9]/,Yt=Dt([["0","9"]],!1,!1),Pd=qe("[130] DECIMAL"),Ud=qe("[131] DOUBLE"),zd=qe("[132] INTEGER_POSITIVE"),Jd=qe("[133] DECIMAL_POSITIVE"),fh=function(s){return s.value="+"+s.value,s},Xd=qe("[134] DOUBLE_POSITIVE"),Vd=qe("[135] INTEGER_NEGATIVE"),Kf=function(s){return s.value="-"+s.value,s},Kd=qe("[136] DECIMAL_NEGATIVE"),Yd=qe("[137] DOUBLE_NEGATIVE"),Zd=qe("[138] EXPONENT"),$d=/^[eE]/,ev=Dt(["e","E"],!1,!1),tv=/^[+\-]/,rv=Dt(["+","-"],!1,!1),iv=qe("[139] STRING_LITERAL1"),Zf=Ge("'",!1),ch=/^[^'\\\n\r]/,hh=Dt(["'","\\","\n","\r"],!0,!1),vu=function(s){return Ai(s)},ov=qe("[140] STRING_LITERAL2"),dh=Ge('"',!1),vh=/^[^"\\\n\r]/,gh=Dt(['"',"\\","\n","\r"],!0,!1),sv=qe("[141] STRING_LITERAL_LONG1"),gu="'''",yh=Ge("'''",!1),mh=/^[^'\\]/,bh=Dt(["'","\\"],!0,!1),av=qe("[142] STRING_LITERAL_LONG2"),yu='"""',xh=Ge('"""',!1),wh=/^[^"\\]/,kh=Dt(['"',"\\"],!0,!1),lv=qe("[143] ECHAR"),Ch=Ge("\\",!1),uv=/^[tbnrf"']/,fv=Dt(["t","b","n","r","f",'"',"'"],!1,!1),cv=qe("[144] NIL"),pv=qe("[145] WS"),dv=/^[ ]/,vv=Dt([" "],!1,!1),gv=/^[\t]/,yv=Dt(["\t"],!1,!1),mv=/^[\r]/,bv=Dt(["\r"],!1,!1),xv=/^[\n]/,wv=Dt(["\n"],!1,!1),kv=qe(" COMMENT"),Ah=Ge("#",!1),Fh=/^[^\n\r]/,Eh=Dt(["\n","\r"],!0,!1),_v=qe("[146] ANON"),Cv=qe("[147] PN_CHARS_BASE"),Sv=/^[A-Z]/,Av=Dt([["A","Z"]],!1,!1),Fv=/^[a-z]/,Ev=Dt([["a","z"]],!1,!1),Tv=/^[\xC0-\xD6]/,Nv=Dt([["\xc0","\xd6"]],!1,!1),Lv=/^[\xD8-\xF6]/,Iv=Dt([["\xd8","\xf6"]],!1,!1),Ov=/^[\xF8-\u02FF]/,Rv=Dt([["\xf8","\u02ff"]],!1,!1),jv=/^[\u0370-\u037D]/,Dv=Dt([["\u0370","\u037d"]],!1,!1),Mv=/^[\u037F-\u1FFF]/,Pv=Dt([["\u037f","\u1fff"]],!1,!1),Bv=/^[\u200C-\u200D]/,Qv=Dt([["\u200c","\u200d"]],!1,!1),Uv=/^[\u2070-\u218F]/,Gv=Dt([["\u2070","\u218f"]],!1,!1),Hv=/^[\u2C00-\u2FEF]/,Wv=Dt([["\u2c00","\u2fef"]],!1,!1),zv=/^[\u3001-\uD7FF]/,qv=Dt([["\u3001","\ud7ff"]],!1,!1),Jv=/^[\uF900-\uFDCF]/,Xv=Dt([["\uf900","\ufdcf"]],!1,!1),Vv=/^[\uFDF0-\uFFFD]/,Kv=Dt([["\ufdf0","\ufffd"]],!1,!1),Yv=/^[\u1000-\uEFFF]/,Zv=Dt([["\u1000","\uefff"]],!1,!1),$v=qe("[148] PN_CHARS_U"),Nh=Ge("_",!1),eg=qe("[149] VARNAME"),$f=/^[\xB7]/,ec=Dt(["\xb7"],!1,!1),tc=/^[\u0300-\u036F]/,rc=Dt([["\u0300","\u036f"]],!1,!1),nc=/^[\u203F-\u2040]/,ic=Dt([["\u203f","\u2040"]],!1,!1),rg=qe("[150] PN_CHARS"),ng=qe("[151] PN_PREFIX"),og=qe("[152] PN_LOCAL"),ag=qe("[170] PLX"),lg=qe("[171] PERCENT"),Ih=Ge("%",!1),fg=qe("[172] HEX"),cg=/^[A-F]/,hg=Dt([["A","F"]],!1,!1),pg=/^[a-f]/,dg=Dt([["a","f"]],!1,!1),vg=qe("[173] PN_LOCAL_ESC"),yg=Ge("~",!1),bg=Ge("&",!1),r=0,mu=[{line:1,column:1}],Rn=0,oc=[],A=0;if("startRule"in F){if(!(F.startRule in o))throw new Error("Can't start parsing from rule \""+F.startRule+'".');l=o[F.startRule]}function Ge(s,x){return{type:"literal",text:s,ignoreCase:x}}function Dt(s,x,C){return{type:"class",parts:s,inverted:x,ignoreCase:C}}function qe(s){return{type:"other",description:s}}function Oh(s){var x,C=mu[s];if(C)return C;for(x=s-1;!mu[x];)x--;for(C={line:(C=mu[x]).line,column:C.column};x<s;)10===u.charCodeAt(x)?(C.line++,C.column=1):C.column++,x++;return mu[s]=C,C}function Rh(s,x){var C=Oh(s),_=Oh(x);return{start:{offset:s,line:C.line,column:C.column},end:{offset:x,line:_.line,column:_.column}}}function z(s){r<Rn||(r>Rn&&(Rn=r,oc=[]),oc.push(s))}function jh(){return A++,A++,C=r,(_=Dh())!==e?((N=function(){var O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt;if(A++,O=r,(Q=Ph())!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e){for(ae=[],ge=jn();ge!==e;)ae.push(ge),ge=jn();if(ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if((Oe=Fa())!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if((Ce=Ea())!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();Ve!==e&&(nt=function(){var Me,$e,it,ft,Lt,ut,Rt,Mt,Ft;if(A++,Me=r,u.substr(r,8)===_o?($e=_o,r+=8):($e=e,0===A&&z(Ha)),$e!==e){for(it=[],ft=gr();ft!==e;)it.push(ft),ft=gr();if(it!==e)if(123===u.charCodeAt(r)?(ft=ke,r++):(ft=e,0===A&&z(Ie)),ft!==e){if(Lt=[],ut=r,40===u.charCodeAt(r)?(Rt=P,r++):(Rt=e,0===A&&z(Y)),Rt!==e){if(Mt=[],(Ft=bu())!==e)for(;Ft!==e;)Mt.push(Ft),Ft=bu();else Mt=e;Mt!==e?(41===u.charCodeAt(r)?(Ft=Be,r++):(Ft=e,0===A&&z(Xe)),Ft!==e?ut=Rt=[Rt,Mt,Ft]:(r=ut,ut=e)):(r=ut,ut=e)}else r=ut,ut=e;for(ut===e&&(ut=ri());ut!==e;){if(Lt.push(ut),ut=r,40===u.charCodeAt(r)?(Rt=P,r++):(Rt=e,0===A&&z(Y)),Rt!==e){if(Mt=[],(Ft=bu())!==e)for(;Ft!==e;)Mt.push(Ft),Ft=bu();else Mt=e;Mt!==e?(41===u.charCodeAt(r)?(Ft=Be,r++):(Ft=e,0===A&&z(Xe)),Ft!==e?ut=Rt=[Rt,Mt,Ft]:(r=ut,ut=e)):(r=ut,ut=e)}else r=ut,ut=e;ut===e&&(ut=ri())}Lt!==e?(125===u.charCodeAt(r)?(ut=We,r++):(ut=e,0===A&&z(Ze)),ut!==e?Me=$e=[$e,it,ft,Lt,ut]:(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return Me===e&&(Me=null),A--,Me===e&&($e=e,0===A&&z(Mu)),Me}())!==e?(Q=function(s,x,C,_){for(var N={named:[],implicit:[]},R=0;R<x.length;R++){var O=x[R];"default"===O.kind?N.implicit.push(O.graph):N.named.push(O.graph)}0===N.named.length&&0===N.implicit.length&&N.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Q={kind:"select",token:"executableunit"};return Q.dataset=N,Q.projection=s.vars,Q.modifier=s.modifier,Q.pattern=C,null!=_&&null!=_.limit&&(Q.limit=_.limit),null!=_&&null!=_.offset&&(Q.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(Q.order=_.order),null!=_&&null!=_.group&&(Q.group=_.group),Q}(Q,ae,Oe,Ce),O=Q):(r=O,O=e)}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e}else r=O,O=e}else r=O,O=e;return A--,O===e&&(Q=e,0===A&&z(ie)),O}())===e&&(N=function(){var O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt,Me,$e,it,ft,Lt;for(A++,O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(u.substr(r,9)===Ee?(Z=Ee,r+=9):(Z=e,0===A&&z(Re)),Z===e&&(u.substr(r,9)===je?(Z=je,r+=9):(Z=e,0===A&&z(V))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e)if((ge=function(){var ut,Rt,Mt,Ft,Cr,lr;if(A++,ut=r,123===u.charCodeAt(r)?(Rt=ke,r++):(Rt=e,0===A&&z(Ie)),Rt!==e){for(Mt=[],Ft=U();Ft!==e;)Mt.push(Ft),Ft=U();if(Mt!==e)if((Ft=function dr(){var Sr,Ar,ur,Oa,Fi,Tu,Ei;if(A++,Sr=r,(Ar=rp())!==e){for(ur=r,Oa=[],Fi=U();Fi!==e;)Oa.push(Fi),Fi=U();if(Oa!==e)if(46===u.charCodeAt(r)?(Fi=Xt,r++):(Fi=e,0===A&&z(Ut)),Fi!==e){for(Tu=[],Ei=U();Ei!==e;)Tu.push(Ei),Ei=U();Tu!==e?((Ei=dr())===e&&(Ei=null),Ei!==e?ur=Oa=[Oa,Fi,Tu,Ei]:(r=ur,ur=e)):(r=ur,ur=e)}else r=ur,ur=e;else r=ur,ur=e;ur===e&&(ur=null),ur!==e?(Ar=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x.length&&null!=x[3]&&null!=x[3].triplesContext&&(C=C.concat(x[3].triplesContext)),{token:"triplestemplate",triplesContext:C}}(Ar,ur),Sr=Ar):(r=Sr,Sr=e)}else r=Sr,Sr=e;return A--,Sr===e&&(Ar=e,0===A&&z(gf)),Sr}())===e&&(Ft=null),Ft!==e){for(Cr=[],lr=U();lr!==e;)Cr.push(lr),lr=U();Cr!==e?(125===u.charCodeAt(r)?(lr=We,r++):(lr=e,0===A&&z(Ze)),lr!==e?ut=Rt=Ft:(r=ut,ut=e)):(r=ut,ut=e)}else r=ut,ut=e;else r=ut,ut=e}else r=ut,ut=e;return A--,ut===e&&(Rt=e,0===A&&z(Cl)),ut}())!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();if(Oe!==e){for(ze=[],Ce=jn();Ce!==e;)ze.push(Ce),Ce=jn();if(ze!==e){for(Ce=[],Ve=U();Ve!==e;)Ce.push(Ve),Ve=U();if(Ce!==e)if((Ve=Fa())!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();nt!==e&&(Me=Ea())!==e?(Q=function(s,x,C,_){for(var N={named:[],implicit:[]},R=0;R<x.length;R++){var O=x[R];"default"===O.kind?N.implicit.push(O.graph):N.named.push(O.graph)}0===N.named.length&&0===N.implicit.length&&N.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Q={kind:"construct",token:"executableunit"};return Q.dataset=N,Q.template=s,Q.pattern=C,null!=_&&null!=_.limit&&(Q.limit=_.limit),null!=_&&null!=_.offset&&(Q.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(Q.order=_.order),Q}(ge,ze,Ve,Me),O=Q):(r=O,O=e)}else r=O,O=e;else r=O,O=e}else r=O,O=e}else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(u.substr(r,9)===Ee?(Z=Ee,r+=9):(Z=e,0===A&&z(Re)),Z===e&&(u.substr(r,9)===je?(Z=je,r+=9):(Z=e,0===A&&z(V))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e){for(ge=[],Oe=jn();Oe!==e;)ge.push(Oe),Oe=jn();if(ge!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();if(Oe!==e)if(u.substr(r,5)===he?(ze=he,r+=5):(ze=e,0===A&&z(me)),ze===e&&(u.substr(r,5)===Le?(ze=Le,r+=5):(ze=e,0===A&&z(_e))),ze!==e){for(Ce=[],Ve=U();Ve!==e;)Ce.push(Ve),Ve=U();if(Ce!==e)if(123===u.charCodeAt(r)?(Ve=ke,r++):(Ve=e,0===A&&z(Ie)),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if((Me=cs())===e&&(Me=null),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();if($e!==e)if(125===u.charCodeAt(r)?(it=We,r++):(it=e,0===A&&z(Ze)),it!==e){for(ft=[],Lt=U();Lt!==e;)ft.push(Lt),Lt=U();ft!==e&&(Lt=Ea())!==e?(Q=function(s,x,C){for(var _={named:[],implicit:[]},N=0;N<s.length;N++){var R=s[N];"default"===R.kind?_.implicit.push(R.graph):_.named.push(R.graph)}0===_.named.length&&0===_.implicit.length&&_.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var O={kind:"construct",token:"executableunit"};return O.dataset=_,O.template=x,O.pattern={token:"basicgraphpattern",triplesContext:x.triplesContext},null!=C&&null!=C.limit&&(O.limit=C.limit),null!=C&&null!=C.offset&&(O.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(O.order=C.order),O}(ge,Me,Lt),O=Q):(r=O,O=e)}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e}else r=O,O=e}else r=O,O=e;else r=O,O=e}return A--,O===e&&(Q=e,0===A&&z(jt)),O}())===e&&(N=function(){var O,Q,Z,ae,ge,Oe;if(A++,O=r,u.substr(r,8)===et?(Q=et,r+=8):(Q=e,0===A&&z(kt)),Q!==e){if(Z=[],(ae=vs())!==e)for(;ae!==e;)Z.push(ae),ae=vs();else Z=e;if(Z===e&&(42===u.charCodeAt(r)?(Z=ot,r++):(Z=e,0===A&&z(ct))),Z!==e){for(ae=[],ge=jn();ge!==e;)ae.push(ge),ge=jn();ae!==e?((ge=Fa())===e&&(ge=null),ge!==e&&(Oe=Ea())!==e?O=Q=[Q,Z,ae,ge,Oe]:(r=O,O=e)):(r=O,O=e)}else r=O,O=e}else r=O,O=e;return A--,O===e&&(Q=e,0===A&&z(Ke)),O}())===e&&(N=function(){var O,Q,Z,ae,ge,Oe,ze;for(A++,O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if("ASK"===u.substr(r,3)?(Z="ASK",r+=3):(Z=e,0===A&&z(bt)),Z===e&&("ask"===u.substr(r,3)?(Z="ask",r+=3):(Z=e,0===A&&z(at))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e){for(ge=[],Oe=jn();Oe!==e;)ge.push(Oe),Oe=jn();if(ge!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();Oe!==e&&(ze=Fa())!==e?(Q=function(s,x){for(var C={named:[],implicit:[]},_=0;_<s.length;_++){var N=s[_];"implicit"===N.kind?C.implicit.push(N.graph):C.named.push(N.graph)}0===C.named.length&&0===C.implicit.length&&C.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var R={kind:"ask",token:"executableunit"};return R.dataset=C,R.pattern=x,R}(ge,ze),O=Q):(r=O,O=e)}else r=O,O=e}else r=O,O=e}else r=O,O=e;else r=O,O=e;return A--,O===e&&(Q=e,0===A&&z(vt)),O}()),N!==e&&(A++,Q=r,u.substr(r,6)===Bn?(Z=Bn,r+=6):(Z=e,0===A&&z(So)),Z===e&&(u.substr(r,6)===Pi?(Z=Pi,r+=6):(Z=e,0===A&&z(Es))),Z!==e&&(ae=$h())!==e?Q=Z=[Z,ae]:(r=Q,Q=e),Q===e&&(Q=null),Q!==e&&(Q=function(s){return null!=s?s[1]:null}(Q)),A--,(O=Q)===e&&(Q=e,0===A&&z(Co)),(R=O)!==e)?(_=function(s,x,C){return{token:"query",kind:"query",prologue:s,units:[x],inlineData:C}}(_,N,R),C=_):(r=C,C=e)):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(m)),A--,(x=C)===e&&0===A&&z(d),(s=x)===e&&(s=function(){var x;return A++,x=function C(){var _,N,R,O,Q,Z,ae,ge,Oe,ze;if(A++,_=r,(N=Dh())!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(A++,(ze=function(){var Ce,Ve,nt,Me,$e,it,ft,Lt,ut;if(A++,Ce=r,"LOAD"===u.substr(r,4)?(Ve="LOAD",r+=4):(Ve=e,0===A&&z(Ns)),Ve===e&&("load"===u.substr(r,4)?(Ve="load",r+=4):(Ve=e,0===A&&z(Fo))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if((Me=yr())!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();if($e!==e){if(it=r,"INTO"===u.substr(r,4)?(ft="INTO",r+=4):(ft=e,0===A&&z(si)),ft===e&&("into"===u.substr(r,4)?(ft="into",r+=4):(ft=e,0===A&&z(Uu))),ft!==e){for(Lt=[],ut=U();ut!==e;)Lt.push(ut),ut=U();Lt!==e&&(ut=sc())!==e?it=ft=[ft,Lt,ut]:(r=it,it=e)}else r=it,it=e;it===e&&(it=null),it!==e?(Ve=function(s,x){var C={kind:"load",token:"executableunit"};return C.sourceGraph=s,null!=x&&(C.destinyGraph=x[2]),C}(Me,it),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(za)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e,it;if(A++,Ce=r,"CLEAR"===u.substr(r,5)?(Ve="CLEAR",r+=5):(Ve=e,0===A&&z(Ja)),Ve===e&&("clear"===u.substr(r,5)?(Ve="clear",r+=5):(Ve=e,0===A&&z(Wu))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if(u.substr(r,6)===ai?(Me=ai,r+=6):(Me=e,0===A&&z(Is)),Me===e&&(u.substr(r,6)===Qn?(Me=Qn,r+=6):(Me=e,0===A&&z(Os))),Me===e&&(Me=null),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();$e!==e&&(it=Jh())!==e?(Ve=function(s){var x={kind:"clear",token:"executableunit"};return x.destinyGraph=s,x}(it),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(Hu)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e,it;if(A++,Ce=r,"DROP"===u.substr(r,4)?(Ve="DROP",r+=4):(Ve=e,0===A&&z(zu)),Ve===e&&("drop"===u.substr(r,4)?(Ve="drop",r+=4):(Ve=e,0===A&&z(qu))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if(u.substr(r,6)===ai?(Me=ai,r+=6):(Me=e,0===A&&z(Is)),Me===e&&(u.substr(r,6)===Qn?(Me=Qn,r+=6):(Me=e,0===A&&z(Os))),Me===e&&(Me=null),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();$e!==e&&(it=Jh())!==e?(Ve=function(s){var x={kind:"drop",token:"executableunit"};return x.destinyGraph=s,x}(it),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(To)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e,it;if(A++,Ce=r,"CREATE"===u.substr(r,6)?(Ve="CREATE",r+=6):(Ve=e,0===A&&z(Za)),Ve===e&&("create"===u.substr(r,6)?(Ve="create",r+=6):(Ve=e,0===A&&z(Ju))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if(u.substr(r,6)===ai?(Me=ai,r+=6):(Me=e,0===A&&z(Is)),Me===e&&(u.substr(r,6)===Qn?(Me=Qn,r+=6):(Me=e,0===A&&z(Os))),Me===e&&(Me=null),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();$e!==e&&(it=sc())!==e?(Ve=function(s){var x={kind:"create",token:"executableunit"};return x.destinyGraph=s,x}(it),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(ir)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e,it;if(A++,Ce=r,u.substr(r,6)===ui?(Ve=ui,r+=6):(Ve=e,0===A&&z(Rs)),Ve===e&&(u.substr(r,6)===No?(Ve=No,r+=6):(Ve=e,0===A&&z(el))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if(u.substr(r,4)===Qi?(Me=Qi,r+=4):(Me=e,0===A&&z(js)),Me===e&&(u.substr(r,4)===Lo?(Me=Lo,r+=4):(Me=e,0===A&&z(fi))),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();$e!==e&&(it=Vh())!==e?(Ve=function(s){var x={kind:"insertdata",token:"executableunit"};return x.quads=s,x}(it),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(Xu)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e;if(A++,Ce=r,u.substr(r,6)===wn?(Ve=wn,r+=6):(Ve=e,0===A&&z(Oo)),Ve===e&&(u.substr(r,6)===mr?(Ve=mr,r+=6):(Ve=e,0===A&&z(an))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();nt!==e?(u.substr(r,4)===Qi?(Me=Qi,r+=4):(Me=e,0===A&&z(js)),Me===e&&(u.substr(r,4)===Lo?(Me=Lo,r+=4):(Me=e,0===A&&z(fi))),Me!==e&&($e=Vh())!==e?(Ve=function(s){var x={kind:"deletedata",token:"executableunit"};return x.quads=s,x}($e),Ce=Ve):(r=Ce,Ce=e)):(r=Ce,Ce=e)}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(Io)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e,it;if(A++,Ce=r,u.substr(r,6)===wn?(Ve=wn,r+=6):(Ve=e,0===A&&z(Oo)),Ve===e&&(u.substr(r,6)===mr?(Ve=mr,r+=6):(Ve=e,0===A&&z(an))),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e)if(u.substr(r,5)===he?(Me=he,r+=5):(Me=e,0===A&&z(me)),Me===e&&(u.substr(r,5)===Le?(Me=Le,r+=5):(Me=e,0===A&&z(_e))),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();$e!==e&&(it=en())!==e?(Ve=function(s){var x={kind:"modify"};x.pattern=s,x.with=null,x.using=null;var C=[],_=s.patterns[0];_=null==_.triplesContext&&null!=_.patterns?_.patterns[0].triplesContext:_.triplesContext;for(var N=0;N<_.length;N++){var R={},O=_[N];R.subject=O.subject,R.predicate=O.predicate,R.object=O.object,R.graph=O.graph,C.push(R)}return x.delete=C,x}(it),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(Vu)),Ce}())===e&&(ze=function(){var Ce,Ve,nt,Me,$e,it,ft,Lt,ut,Rt,Mt,Ft,Cr,lr,dr;if(A++,Ce=r,Ve=r,"WITH"===u.substr(r,4)?(nt="WITH",r+=4):(nt=e,0===A&&z(Ps)),nt===e&&("with"===u.substr(r,4)?(nt="with",r+=4):(nt=e,0===A&&z(Vr))),nt!==e){for(Me=[],$e=U();$e!==e;)Me.push($e),$e=U();Me!==e&&($e=yr())!==e?Ve=nt=[nt,Me,$e]:(r=Ve,Ve=e)}else r=Ve,Ve=e;if(Ve===e&&(Ve=null),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();if(nt!==e){if(Me=r,A++,Cr=r,u.substr(r,6)===wn?(lr=wn,r+=6):(lr=e,0===A&&z(Oo)),lr===e&&(u.substr(r,6)===mr?(lr=mr,r+=6):(lr=e,0===A&&z(an))),lr!==e&&(dr=Xh())!==e?Cr=lr=dr:(r=Cr,Cr=e),A--,Cr===e&&(lr=e,0===A&&z(nl)),($e=Cr)!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();it!==e?((ft=zh())===e&&(ft=null),ft!==e?Me=$e=[$e,it,ft]:(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e;if(Me===e&&(Me=zh()),Me!==e){for($e=[],it=U();it!==e;)$e.push(it),it=U();if($e!==e){for(it=[],ft=qh();ft!==e;)it.push(ft),ft=qh();if(it!==e){for(ft=[],Lt=U();Lt!==e;)ft.push(Lt),Lt=U();if(ft!==e)if(u.substr(r,5)===he?(Lt=he,r+=5):(Lt=e,0===A&&z(me)),Lt===e&&(u.substr(r,5)===Le?(Lt=Le,r+=5):(Lt=e,0===A&&z(_e))),Lt!==e){for(ut=[],Rt=U();Rt!==e;)ut.push(Rt),Rt=U();if(ut!==e)if((Rt=en())!==e){for(Mt=[],Ft=U();Ft!==e;)Mt.push(Ft),Ft=U();Mt!==e?(Ve=function(s,x,C,_){var N={kind:"modify"};return N.with=""!=s&&null!=s?s[2]:null,3!==x.length||""!==x[2]&&null!=x[2]?3===x.length&&null!=x[0].length&&null!=x[1].length&&null!=x[2].length?(N.delete=x[0],N.insert=x[2]):(N.insert=x,N.delete=null):(N.delete=x[0],N.insert=null),""!=C&&(N.using=C),N.pattern=_,N}(Ve,Me,it,Rt),Ce=Ve):(r=Ce,Ce=e)}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e;else r=Ce,Ce=e}else r=Ce,Ce=e}else r=Ce,Ce=e}else r=Ce,Ce=e}else r=Ce,Ce=e}else r=Ce,Ce=e;return A--,Ce===e&&(Ve=e,0===A&&z(Ku)),Ce}()),A--,ze===e&&0===A&&z(Ts),(O=ze)!==e){for(Q=r,Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if(59===u.charCodeAt(r)?(ae=nr,r++):(ae=e,0===A&&z(nn)),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e?((Oe=C())===e&&(Oe=null),Oe!==e?Q=Z=[Z,ae,ge,Oe]:(r=Q,Q=e)):(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e;Q===e&&(Q=null),Q!==e?(N=function(s,x,C){var _={token:"query",kind:"update"};_.prologue=s;var N=[x];return null!=C&&null!=C.length&&null!=C[3]&&null!=C[3].units&&(N=N.concat(C[3].units)),_.units=N,_}(N,O,Q),_=N):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;return A--,_===e&&(N=e,0===A&&z(Wa)),_}(),A--,x===e&&0===A&&z(Bu),x}()),s;var s,x,C,_,N,R,O,Q,Z,ae}function Dh(){var s,x,C,_,N;if(A++,s=r,(x=function(){var R,O,Q,Z,ae;for(A++,R=r,O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,4)===w?(Q=w,r+=4):(Q=e,0===A&&z(T)),Q===e&&(u.substr(r,4)===I?(Q=I,r+=4):(Q=e,0===A&&z(W))),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e&&(ae=Fu())!==e?(O=function(s){_g(s);var x={token:"base"};return x.value=s,x}(ae),R=O):(r=R,R=e)}else r=R,R=e;else r=R,R=e;return A--,R===e&&(O=e,0===A&&z(f)),R}())===e&&(x=null),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e){for(_=[],N=Mh();N!==e;)_.push(N),N=Mh();_!==e?s=x=function(s,x){return{token:"prologue",base:s,prefixes:x}}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(k)),s}function Mh(){var s,x,C,_,N,R,O;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if(u.substr(r,6)===E?(C=E,r+=6):(C=e,0===A&&z(D)),C===e&&(u.substr(r,6)===G?(C=G,r+=6):(C=e,0===A&&z(K))),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if((N=wc())!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();R!==e&&(O=Fu())!==e?s=x=function(s,x){kg(s,x);var C={token:"prefix"};return C.prefix=s,C.local=x,C}(N,O):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(L)),s}function Ph(){var s,x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt,Me,$e,it,ft;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if("SELECT"===u.substr(r,6)?(C="SELECT",r+=6):(C=e,0===A&&z(ee)),C===e&&("select"===u.substr(r,6)?(C="select",r+=6):(C=e,0===A&&z(ve))),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(u.substr(r,8)===Fe?(N=Fe,r+=8):(N=e,0===A&&z(Ne)),N===e&&(u.substr(r,8)===Se?(N=Se,r+=8):(N=e,0===A&&z(be))),N===e&&(u.substr(r,7)===Pe?(N=Pe,r+=7):(N=e,0===A&&z(He)),N===e&&(u.substr(r,7)===Je?(N=Je,r+=7):(N=e,0===A&&z(M)))),N===e&&(N=null),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e){for(O=[],Q=r,Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=gr())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e?Q=Z=[Z,ae,ge]:(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e;if(Q===e){for(Q=r,Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if(40===u.charCodeAt(r)?(ae=P,r++):(ae=e,0===A&&z(Y)),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if((Oe=Ot())!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if(u.substr(r,2)===pe?(Ce=pe,r+=2):(Ce=e,0===A&&z(Ae)),Ce===e&&(u.substr(r,2)===ye?(Ce=ye,r+=2):(Ce=e,0===A&&z(De))),Ce!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();if(Ve!==e)if((nt=gr())!==e){for(Me=[],$e=U();$e!==e;)Me.push($e),$e=U();if(Me!==e)if(41===u.charCodeAt(r)?($e=Be,r++):($e=e,0===A&&z(Xe)),$e!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();it!==e?Q=Z=[Z,ae,ge,Oe,ze,Ce,Ve,nt,Me,$e,it]:(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}if(Q!==e)for(;Q!==e;){for(O.push(Q),Q=r,Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=gr())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e?Q=Z=[Z,ae,ge]:(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e;if(Q===e){for(Q=r,Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if(40===u.charCodeAt(r)?(ae=P,r++):(ae=e,0===A&&z(Y)),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if((Oe=Ot())!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if(u.substr(r,2)===pe?(Ce=pe,r+=2):(Ce=e,0===A&&z(Ae)),Ce===e&&(u.substr(r,2)===ye?(Ce=ye,r+=2):(Ce=e,0===A&&z(De))),Ce!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();if(Ve!==e)if((nt=gr())!==e){for(Me=[],$e=U();$e!==e;)Me.push($e),$e=U();if(Me!==e)if(41===u.charCodeAt(r)?($e=Be,r++):($e=e,0===A&&z(Xe)),$e!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();it!==e?Q=Z=[Z,ae,ge,Oe,ze,Ce,Ve,nt,Me,$e,it]:(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}}else O=e;if(O===e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(42===u.charCodeAt(r)?(Z=ot,r++):(Z=e,0===A&&z(ct)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e?O=Q=[Q,Z,ae]:(r=O,O=e)}else r=O,O=e;else r=O,O=e}O!==e?s=x=function(s,x){var C=[];if(3===x.length&&"*"===x[1])return{vars:[{token:"variable",kind:"*"}],modifier:vp(s)};for(var _=0;_<x.length;_++){var N=x[_];3===N.length?C.push({token:"variable",kind:"var",value:N[1]}):C.push({token:"variable",kind:"aliased",expression:N[3],alias:N[7]})}return{vars:C,modifier:vp(s)}}(N,O):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(oe)),s}function jn(){var s,x,C,_,N,R;if(A++,s=r,"FROM"===u.substr(r,4)?(x="FROM",r+=4):(x=e,0===A&&z(Dn)),x===e&&("from"===u.substr(r,4)?(x="from",r+=4):(x=e,0===A&&z(Ti))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=function(){var O,Q,Z;for(A++,O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();return Q!==e&&(Z=Bh())!==e?(Q=function(s){return{graph:s,kind:"default",token:"graphClause"}}(Z),O=Q):(r=O,O=e),A--,O===e&&(Q=e,0===A&&z(ys)),O}())===e&&(_=function(){var O,Q,Z,ae;if(A++,O=r,u.substr(r,5)===Wr?(Q=Wr,r+=5):(Q=e,0===A&&z(ni)),Q===e&&(u.substr(r,5)===jr?(Q=jr,r+=5):(Q=e,0===A&&z(ii))),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e&&(ae=Bh())!==e?(Q=function(s){return{graph:s,kind:"named",token:"graphCluase"}}(ae),O=Q):(r=O,O=e)}else r=O,O=e;return A--,O===e&&(Q=e,0===A&&z(ms)),O}()),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?s=x=_:(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ct)),s}function Bh(){var s;return A++,s=yr(),A--,s===e&&0===A&&z(zr),s}function Fa(){var s,x,C,_,N,R;if(A++,s=r,u.substr(r,5)===he?(x=he,r+=5):(x=e,0===A&&z(me)),x===e&&(u.substr(r,5)===Le?(x=Le,r+=5):(x=e,0===A&&z(_e))),x===e&&(x=null),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=en())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?s=x=_:(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(go)),s}function Ea(){var s,x,C,_,N,R,O,Q,Z;return A++,s=r,(x=function(){var R,O,Q,Z,ae,ge,Oe;if(A++,R=r,"GROUP"===u.substr(r,5)?(O="GROUP",r+=5):(O=e,0===A&&z(oi)),O===e&&("group"===u.substr(r,5)?(O="group",r+=5):(O=e,0===A&&z(xs))),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if("BY"===u.substr(r,2)?(Z="BY",r+=2):(Z=e,0===A&&z(yo)),Z===e&&("by"===u.substr(r,2)?(Z="by",r+=2):(Z=e,0===A&&z(Jt))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e){if(ge=[],(Oe=Qh())!==e)for(;Oe!==e;)ge.push(Oe),Oe=Qh();else ge=e;ge!==e?R=O=ge:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e}else r=R,R=e;return A--,R===e&&(O=e,0===A&&z(bs)),R}())===e&&(x=null),x!==e?((C=function(){var R,O,Q,Z;if(A++,R=r,"HAVING"===u.substr(r,6)?(O="HAVING",r+=6):(O=e,0===A&&z(st)),O!==e){if(Q=[],(Z=Uh())!==e)for(;Z!==e;)Q.push(Z),Z=Uh();else Q=e;Q!==e?R=O=[O,Q]:(r=R,R=e)}else r=R,R=e;return A--,R===e&&(O=e,0===A&&z(Ii)),R}())===e&&(C=null),C!==e?((_=function(){var R,O,Q,Z,ae,ge,Oe,ze;if(A++,R=r,"ORDER"===u.substr(r,5)?(O="ORDER",r+=5):(O=e,0===A&&z(xo)),O===e&&("order"===u.substr(r,5)?(O="order",r+=5):(O=e,0===A&&z(Ra))),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if("BY"===u.substr(r,2)?(Z="BY",r+=2):(Z=e,0===A&&z(yo)),Z===e&&("by"===u.substr(r,2)?(Z="by",r+=2):(Z=e,0===A&&z(Jt))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e){if(ge=[],(Oe=Gh())!==e)for(;Oe!==e;)ge.push(Oe),Oe=Gh();else ge=e;if(ge!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();Oe!==e?R=O=ge:(r=R,R=e)}else r=R,R=e}else r=R,R=e}else r=R,R=e;else r=R,R=e}else r=R,R=e;return A--,R===e&&(O=e,0===A&&z(ks)),R}())===e&&(_=null),_!==e?(A++,O=r,(Q=Hh())!==e?((Z=Wh())===e&&(Z=null),Z!==e?O=Q=[Q,Z]:(r=O,O=e)):(r=O,O=e),O===e&&(O=r,(Q=Wh())!==e?((Z=Hh())===e&&(Z=null),Z!==e?O=Q=[Q,Z]:(r=O,O=e)):(r=O,O=e)),O!==e&&(O=function(s){for(var x={},C=0;C<s.length;C++){var _=s[C];null!=_&&null!=_.limit?x.limit=_.limit:null!=_&&null!=_.offset&&(x.offset=_.offset)}return x}(O)),A--,(R=O)===e&&(O=e,0===A&&z(Pa)),(N=R)===e&&(N=null),N!==e?s=x=function(s,x,C){var _={};return null!=C&&(null!=C.limit&&(_.limit=C.limit),null!=C.offset&&(_.offset=C.offset)),null!=s&&(_.group=s),_.order=x,_}(x,_,N):(r=s,s=e)):(r=s,s=e)):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(tn)),s}function Qh(){var s,x,C,_,N,R,O,Q,Z,ae,ge;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if((C=xc())!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if((C=ep())!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if(40===u.charCodeAt(r)?(C=P,r++):(C=e,0===A&&z(Y)),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if((N=Ot())!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e){if(O=r,u.substr(r,2)===pe?(Q=pe,r+=2):(Q=e,0===A&&z(Ae)),Q===e&&(u.substr(r,2)===ye?(Q=ye,r+=2):(Q=e,0===A&&z(De))),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e&&(ae=gr())!==e?O=Q=[Q,Z,ae]:(r=O,O=e)}else r=O,O=e;if(O===e&&(O=null),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(41===u.charCodeAt(r)?(Z=Be,r++):(Z=e,0===A&&z(Xe)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e?s=x=function(s,x){return 0!=x.length?{token:"aliased_expression",expression:s,alias:x[2]}:s}(N,O):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if((C=gr())!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e}}}return A--,s===e&&(x=e,0===A&&z(Pn)),s}function Uh(){var s;return A++,s=ac(),A--,s===e&&0===A&&z(St),s}function Gh(){var s,x,C,_,N,R;if(A++,s=r,"ASC"===u.substr(r,3)?(x="ASC",r+=3):(x=e,0===A&&z(wo)),x===e&&("asc"===u.substr(r,3)?(x="asc",r+=3):(x=e,0===A&&z(ja)),x===e&&("DESC"===u.substr(r,4)?(x="DESC",r+=4):(x=e,0===A&&z(Ri)),x===e&&("desc"===u.substr(r,4)?(x="desc",r+=4):(x=e,0===A&&z(Da))))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=bc())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?s=x=function(s,x){return{direction:s.toUpperCase(),expression:x}}(x,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e)if(s=r,(x=ac())===e&&(x=gr()),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e?s=x=function(s){return"var"===s.token&&(s={token:"expression",expressionType:"atomic",primaryexpression:"var",value:s}),{direction:"ASC",expression:s}}(x):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Lu)),s}function Hh(){var s,x,C,_,N,R;if(A++,s=r,"LIMIT"===u.substr(r,5)?(x="LIMIT",r+=5):(x=e,0===A&&z(Iu)),x===e&&("limit"===u.substr(r,5)?(x="limit",r+=5):(x=e,0===A&&z(rn))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=gs())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?s=x=function(s){return{limit:parseInt(s.value)}}(_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Qa)),s}function Wh(){var s,x,C,_,N,R;if(A++,s=r,"OFFSET"===u.substr(r,6)?(x="OFFSET",r+=6):(x=e,0===A&&z(Di)),x===e&&("offset"===u.substr(r,6)?(x="offset",r+=6):(x=e,0===A&&z(ju))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=gs())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?s=x=function(s){return{offset:parseInt(s.value)}}(_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ru)),s}function bu(){var s;return A++,(s=yr())===e&&(s=Cu())===e&&(s=Su())===e&&(s=Au())===e&&(u.substr(r,5)===Mi?(s=Mi,r+=5):(s=e,0===A&&z(Fs))),A--,s===e&&0===A&&z(Pu),s}function zh(){var s,x,C;return A++,s=r,u.substr(r,6)===ui?(x=ui,r+=6):(x=e,0===A&&z(Rs)),x===e&&(u.substr(r,6)===No?(x=No,r+=6):(x=e,0===A&&z(el))),x!==e&&(C=Xh())!==e?s=x=C:(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Yu)),s}function qh(){var s,x,C,_,N,R,O,Q;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if("USING"===u.substr(r,5)?(C="USING",r+=5):(C=e,0===A&&z(ol)),C===e&&("using"===u.substr(r,5)?(C="using",r+=5):(C=e,0===A&&z(sl))),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e){if((N=yr())===e)if(N=r,u.substr(r,5)===Wr?(R=Wr,r+=5):(R=e,0===A&&z(ni)),R===e&&(u.substr(r,5)===jr?(R=jr,r+=5):(R=e,0===A&&z(ii))),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=yr())!==e?N=R=[R,O,Q]:(r=N,N=e)}else r=N,N=e;N!==e?s=x=function(s){return null!=s.length?{kind:"named",uri:s[2]}:{kind:"default",uri:s}}(N):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Zu)),s}function sc(){var s,x,C,_;if(A++,s=r,u.substr(r,5)===ln?(x=ln,r+=5):(x=e,0===A&&z(Ro)),x===e&&(u.substr(r,5)===un?(x=un,r+=5):(x=e,0===A&&z(Tr))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e&&(_=yr())!==e?s=x=_:(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Qs)),s}function Jh(){var s,x;return A++,s=r,(s=x=sc())===e&&(s=r,u.substr(r,7)===jo?(x=jo,r+=7):(x=e,0===A&&z(ul)),x===e&&(u.substr(r,7)===Gs?(x=Gs,r+=7):(x=e,0===A&&z(Hs))),x!==e&&(x="default"),(s=x)===e&&(s=r,u.substr(r,5)===Wr?(x=Wr,r+=5):(x=e,0===A&&z(ni)),x===e&&(u.substr(r,5)===jr?(x=jr,r+=5):(x=e,0===A&&z(ii))),x!==e&&(x="named"),(s=x)===e&&(s=r,"ALL"===u.substr(r,3)?(x="ALL",r+=3):(x=e,0===A&&z(Hn)),x===e&&("all"===u.substr(r,3)?(x="all",r+=3):(x=e,0===A&&z(hi))),x!==e&&(x="all"),s=x))),A--,s===e&&(x=e,0===A&&z(Us)),s}function Xh(){var s,x,C,_,N,R,O,Q,Z;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if(123===u.charCodeAt(r)?(C=ke,r++):(C=e,0===A&&z(Ie)),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if((N=Kh())!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(125===u.charCodeAt(r)?(O=We,r++):(O=e,0===A&&z(Ze)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e?s=x=qs(N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(zs)),s}function Vh(){var s,x,C,_,N,R,O,Q,Z;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if(123===u.charCodeAt(r)?(C=ke,r++):(C=e,0===A&&z(Ie)),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if((N=Kh())!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(125===u.charCodeAt(r)?(O=We,r++):(O=e,0===A&&z(Ze)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e?s=x=qs(N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Js)),s}function Kh(){var s,x,C,_,N,R,O;if(A++,s=r,(x=cs())===e&&(x=null),x!==e){for(C=[],_=r,(N=Yh())!==e?(46===u.charCodeAt(r)?(R=Xt,r++):(R=e,0===A&&z(Ut)),R===e&&(R=null),R!==e?((O=cs())===e&&(O=null),O!==e?_=N=[N,R,O]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e);_!==e;)C.push(_),_=r,(N=Yh())!==e?(46===u.charCodeAt(r)?(R=Xt,r++):(R=e,0===A&&z(Ut)),R===e&&(R=null),R!==e?((O=cs())===e&&(O=null),O!==e?_=N=[N,R,O]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e);C!==e?s=x=function(s,x){var C=[];if(null!=s&&null!=s.triplesContext)for(var _=0;_<s.triplesContext.length;_++)(N=s.triplesContext[_]).graph=null,C.push(N);if(x&&x.length>0&&x[0].length>0&&(C=C.concat(x[0][0].quadsContext),null!=x[0][2]&&null!=x[0][2].triplesContext))for(_=0;_<x[0][2].triplesContext.length;_++){var N;(N=x[0][2].triplesContext[_]).graph=null,C.push(N)}return{token:"quads",quadsContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(zn)),s}function Yh(){var s,x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if(u.substr(r,5)===ln?(C=ln,r+=5):(C=e,0===A&&z(Ro)),C===e&&(u.substr(r,5)===un?(C=un,r+=5):(C=e,0===A&&z(Tr))),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if((N=vs())!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(123===u.charCodeAt(r)?(O=ke,r++):(O=e,0===A&&z(Ie)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if((Z=cs())===e&&(Z=null),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e)if(125===u.charCodeAt(r)?(ge=We,r++):(ge=e,0===A&&z(Ze)),ge!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();Oe!==e?s=x=function(s,x){var C=[];if(null!=x)for(var _=0;_<x.triplesContext.length;_++){var N=x.triplesContext[_];N.graph=s,C.push(N)}return{token:"quadsnottriples",quadsContext:C}}(N,Z):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(_n)),s}function cs(){var s,x,C,_,N,R,O;if(A++,s=r,(x=rp())!==e){for(C=r,_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(46===u.charCodeAt(r)?(N=Xt,r++):(N=e,0===A&&z(Ut)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();R!==e?((O=cs())===e&&(O=null),O!==e?C=_=[_,N,R,O]:(r=C,C=e)):(r=C,C=e)}else r=C,C=e;else r=C,C=e;C===e&&(C=null),C!==e?s=x=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x.length&&null!=x[3]&&null!=x[3].triplesContext&&(C=C.concat(x[3].triplesContext)),{token:"triplestemplate",triplesContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(tf)),s}function en(){var s,x,C,_,N,R,O,Q,Z,ae;if(A++,s=r,123===u.charCodeAt(r)?(x=ke,r++):(x=e,0===A&&z(Ie)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(A++,O=r,(Q=Ph())!==e&&(Z=Fa())!==e&&(ae=Ea())!==e?O=Q=function(s,x,C){var _={kind:"select",token:"subselect"};return _.projection=s.vars,_.modifier=s.modifier,_.pattern=x,null!=C&&null!=C.limit&&(_.limit=C.limit),null!=C&&null!=C.offset&&(_.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(_.order=C.order),null!=C&&null!=C.group&&(_.group=C.group),_}(Q,Z,ae):(r=O,O=e),A--,O===e&&(Q=e,0===A&&z(ce)),(_=O)!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?(125===u.charCodeAt(r)?(R=We,r++):(R=e,0===A&&z(Ze)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e)if(s=r,123===u.charCodeAt(r)?(x=ke,r++):(x=e,0===A&&z(Ie)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=function(){var O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt;if(A++,O=r,(Q=xu())===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e){if(ae=[],ge=r,(Oe=Zh())!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if(46===u.charCodeAt(r)?(Ce=Xt,r++):(Ce=e,0===A&&z(Ut)),Ce===e&&(Ce=null),Ce!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();Ve!==e?((nt=xu())===e&&(nt=null),nt!==e?ge=Oe=[Oe,ze,Ce,Ve,nt]:(r=ge,ge=e)):(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;for(;ge!==e;)if(ae.push(ge),ge=r,(Oe=Zh())!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if(46===u.charCodeAt(r)?(Ce=Xt,r++):(Ce=e,0===A&&z(Ut)),Ce===e&&(Ce=null),Ce!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();Ve!==e?((nt=xu())===e&&(nt=null),nt!==e?ge=Oe=[Oe,ze,Ce,Ve,nt]:(r=ge,ge=e)):(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;ae!==e?(Q=function(s,x){var C=[];null!=s&&s!=[]&&C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)null!=x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);var R=[],O=[],Q=[],Z=[];for(_=0;_<C.length;_++)if("triplespattern"!==C[_].token&&"filter"!==C[_].token&&"bind"!==C[_].token){if(0!=O.length||0!=Q.length){var ae=[];for(N=0;N<O.length;N++)ae=ae.concat(O[N].triplesContext);ae.length>0&&R.push({token:"basicgraphpattern",triplesContext:ae}),O=[]}R.push(C[_])}else"triplespattern"===C[_].token?O.push(C[_]):"bind"===C[_].token?Z.push(C[_]):Q.push(C[_]);if(0!=O.length||0!=Q.length){for(ae=[],N=0;N<O.length;N++)ae=ae.concat(O[N].triplesContext);ae.length>0&&R.push({token:"basicgraphpattern",triplesContext:ae})}return{token:"groupgraphpattern",patterns:R,filters:Q,binds:Z}}(Q,ae),O=Q):(r=O,O=e)}else r=O,O=e}else r=O,O=e;return A--,O===e&&(Q=e,0===A&&z(Xs)),O}())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?(125===u.charCodeAt(r)?(R=We,r++):(R=e,0===A&&z(Ze)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ui)),s}function xu(){var s,x,C,_,N,R;if(A++,s=r,(x=function(){var O,Q,Z,ae,ge,Oe;for(A++,O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if((Z=ku())!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e&&(ge=ip())!==e?(Q=function(s,x){var C=x.triplesContext,_=s;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N],O=null;null!=R[1].length&&(R[1]=R[1][0]),_.token&&"triplesnodecollection"===_.token?("path"===(O={subject:_.chainSubject[0],predicate:R[0],object:R[1]}).predicate.token&&"element"===O.predicate.kind&&(O.predicate=O.predicate.value),C.push(O),C=C.concat(_.triplesContext)):("path"===(O={subject:_,predicate:R[0],object:R[1]}).predicate.token&&"element"===O.predicate.kind&&(O.predicate=O.predicate.value),C.push(O))}var Q={token:"triplessamesubject"};return Q.triplesContext=C,Q.chainSubject=_,Q}(Z,ge),O=Q):(r=O,O=e)}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if((Z=ap())!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e&&(A++,(Oe=function(){var ze,Ce,Ve,nt,Me,$e,it,ft,Lt,ut,Rt,Mt,Ft;if(A++,ze=r,(Ce=ps())===e&&(Ce=ds()),Ce!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();if(Ve!==e)if((nt=np())!==e){for(Me=[],$e=r,it=[],ft=U();ft!==e;)it.push(ft),ft=U();if(it!==e)if(59===u.charCodeAt(r)?(ft=nr,r++):(ft=e,0===A&&z(nn)),ft!==e){for(Lt=[],ut=U();ut!==e;)Lt.push(ut),ut=U();if(Lt!==e){if(ut=r,(Rt=ps())===e&&(Rt=ds()),Rt!==e){for(Mt=[],Ft=U();Ft!==e;)Mt.push(Ft),Ft=U();Mt!==e&&(Ft=ho())!==e?ut=Rt=[Rt,Mt,Ft]:(r=ut,ut=e)}else r=ut,ut=e;ut===e&&(ut=null),ut!==e?$e=it=[it,ft,Lt,ut]:(r=$e,$e=e)}else r=$e,$e=e}else r=$e,$e=e;else r=$e,$e=e;for(;$e!==e;){for(Me.push($e),$e=r,it=[],ft=U();ft!==e;)it.push(ft),ft=U();if(it!==e)if(59===u.charCodeAt(r)?(ft=nr,r++):(ft=e,0===A&&z(nn)),ft!==e){for(Lt=[],ut=U();ut!==e;)Lt.push(ut),ut=U();if(Lt!==e){if(ut=r,(Rt=ps())===e&&(Rt=ds()),Rt!==e){for(Mt=[],Ft=U();Ft!==e;)Mt.push(Ft),Ft=U();Mt!==e&&(Ft=ho())!==e?ut=Rt=[Rt,Mt,Ft]:(r=ut,ut=e)}else r=ut,ut=e;ut===e&&(ut=null),ut!==e?$e=it=[it,ft,Lt,ut]:(r=$e,$e=e)}else r=$e,$e=e}else r=$e,$e=e;else r=$e,$e=e}Me!==e?(Ce=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],O=0;O<x.length;O++)null!=x[O].triplesContext?(N=N.concat(x[O].triplesContext),"triplesnodecollection"===x[O].token&&null!=x[O].chainSubject.length?R.push([s,x[O].chainSubject[0]]):R.push([s,x[O].chainSubject])):R.push([s,x[O]]);for(O=0;O<C.length;O++)for(var Q=C[O][3],Z=Q[0],ae=Q[2]||[],ge=0;ge<ae.length;ge++)null!=ae[ge].triplesContext?(N=N.concat(ae[ge].triplesContext),R.push([Z,ae[ge].chainSubject])):R.push([Z,ae[ge]]);return _.pairs=R,_.triplesContext=N,_}(Ce,nt,Me),ze=Ce):(r=ze,ze=e)}else r=ze,ze=e;else r=ze,ze=e}else r=ze,ze=e;return A--,ze===e&&(Ce=e,0===A&&z(Al)),ze}())===e&&(Oe=null),A--,Oe===e&&0===A&&z(Ll),(ge=Oe)!==e)?(Q=function(s,x){var C=s.triplesContext,_=s.chainSubject;if(null!=x&&null!=x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N];if(null!=R[1].length&&(R[1]=R[1][0]),"triplesnodecollection"===s.token)for(var O=0;O<_.length;O++){var Q=_[O];if(null!=Q.triplesContext){var Z={subject:Q.chainSubject,predicate:R[0],object:R[1]};C.concat(Q.triplesContext)}else Z={subject:_[O],predicate:R[0],object:R[1]},C.push(Z)}else Z={subject:_,predicate:R[0],object:R[1]},C.push(Z)}var ae={token:"triplessamesubject"};return ae.triplesContext=C,ae.chainSubject=_,ae}(Z,ge),O=Q):(r=O,O=e)}else r=O,O=e;else r=O,O=e}return A--,O===e&&(Q=e,0===A&&z(Tl)),O}())!==e){for(C=r,_=[],N=U();N!==e;)_.push(N),N=U();_!==e?(46===u.charCodeAt(r)?(N=Xt,r++):(N=e,0===A&&z(Ut)),N!==e?((R=xu())===e&&(R=null),R!==e?C=_=[_,N,R]:(r=C,C=e)):(r=C,C=e)):(r=C,C=e),C===e&&(C=null),C!==e?s=x=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x&&null!=x.length&&null!=x[2]&&null!=x[2].triplesContext&&(C=C.concat(x[2].triplesContext)),{token:"triplespattern",triplesContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(rf)),s}function Zh(){var s,x,C,_,N;return A++,(s=function(){var x,C,_,N,R,O,Q,Z;if(A++,x=r,(C=en())!==e){for(_=[],N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(u.substr(r,5)===Cn?(O=Cn,r+=5):(O=e,0===A&&z(Sn)),O===e&&(u.substr(r,5)===An?(O=An,r+=5):(O=e,0===A&&z(Jn))),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=en())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;for(;N!==e;){for(_.push(N),N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(u.substr(r,5)===Cn?(O=Cn,r+=5):(O=e,0===A&&z(Sn)),O===e&&(u.substr(r,5)===An?(O=An,r+=5):(O=e,0===A&&z(Jn))),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=en())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e}_!==e?(C=function(s,x){if(0===x.length)return s;for(var C={token:"graphunionpattern",value:[s]},_=0;_<x.length;_++)_==x.length-1?C.value.push(x[_][3]):(C.value.push(x[_][3]),C={token:"graphunionpattern",value:[C]});return C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(qn)),x}())===e&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(u.substr(r,8)===Bo?(_=Bo,r+=8):(_=e,0===A&&z(pi)),_===e&&(u.substr(r,8)===Gi?(_=Gi,r+=8):(_=e,0===A&&z(pl))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e&&(R=en())!==e?(C=function(s){return{token:"optionalgraphpattern",value:s}}(R),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Ks)),x}())===e&&(s=function(){var x,C,_,N;if(A++,x=r,"MINUS"===u.substr(r,5)?(C="MINUS",r+=5):(C=e,0===A&&z(Go)),C===e&&("minus"===u.substr(r,5)?(C="minus",r+=5):(C=e,0===A&&z(Wi))),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e&&(N=en())!==e?(C=function(s){return{token:"minusgraphpattern",status:"todo",value:s}}(N),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Hi)),x}())===e&&(s=function(){var x,C,_,N,R,O,Q;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(u.substr(r,5)===ln?(_=ln,r+=5):(_=e,0===A&&z(Ro)),_===e&&(u.substr(r,5)===un?(_=un,r+=5):(_=e,0===A&&z(Tr))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=vs())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=en())!==e?(C=function(s,x){for(var C=0;C<x.patterns.length;C++)for(var _=x.patterns[C],N=0;N<_.triplesContext.length;N++)_.triplesContext[N].graph=s;return x.token="groupgraphpattern",x}(R,Q),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(nf)),x}())===e&&(A++,x=r,u.substr(r,7)===Uo?(C=Uo,r+=7):(C=e,0===A&&z(Ys)),C!==e&&(_=vs())!==e&&(N=en())!==e?(C=function(s,x){return{token:"servicegraphpattern",status:"todo",value:[s,x]}}(_,N),x=C):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(sf)),(s=x)===e)&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if("FILTER"===u.substr(r,6)?(_="FILTER",r+=6):(_=e,0===A&&z(af)),_===e&&("filter"===u.substr(r,6)?(_="filter",r+=6):(_=e,0===A&&z(Xn))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e&&(R=ac())!==e?(C=function(s){return{token:"filter",value:s}}(R),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(yl)),x}())===e&&(s=function(){var x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze,Ce;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if("BIND"===u.substr(r,4)?(_="BIND",r+=4):(_=e,0===A&&z(ff)),_===e&&("bind"===u.substr(r,4)?(_="bind",r+=4):(_=e,0===A&&z(cf))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if((Q=Ot())!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if(u.substr(r,2)===ye?(ae=ye,r+=2):(ae=e,0===A&&z(De)),ae===e&&(u.substr(r,2)===pe?(ae=pe,r+=2):(ae=e,0===A&&z(Ae))),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if((Oe=gr())!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(41===u.charCodeAt(r)?(Ce=Be,r++):(Ce=e,0===A&&z(Xe)),Ce!==e?(C=function(s,x){return{token:"bind",expression:s,as:x}}(Q,Oe),x=C):(r=x,x=e)):(r=x,x=e)}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(uf)),x}())===e&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(u.substr(r,6)===Bn?(_=Bn,r+=6):(_=e,0===A&&z(So)),_===e&&(u.substr(r,6)===Pi?(_=Pi,r+=6):(_=e,0===A&&z(Es))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e&&(R=$h())!==e?x=C=R:(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(vr)),x}()),A--,s===e&&0===A&&z(hl),s}function ac(){var s;return A++,(s=bc())===e&&(s=xc())===e&&(s=ep()),A--,s===e&&0===A&&z(or),s}function $h(){var s;return A++,(s=function(){var x,C,_,N,R,O,Q,Z;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=gr())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(123===u.charCodeAt(r)?(R=ke,r++):(R=e,0===A&&z(Ie)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e){for(Q=[],Z=hs();Z!==e;)Q.push(Z),Z=hs();Q!==e?(125===u.charCodeAt(r)?(Z=We,r++):(Z=e,0===A&&z(Ze)),Z!==e?(C=function(s,x){return{token:"inlineData",values:[{var:s,value:x}]}}(_,Q),x=C):(r=x,x=e)):(r=x,x=e)}else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(hf)),x}())===e&&(s=function(){var x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt,Me;for(A++,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e){if((_=ri())===e)if(_=r,40===u.charCodeAt(r)?(N=P,r++):(N=e,0===A&&z(Y)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e){for(O=[],Q=gr();Q!==e;)O.push(Q),Q=gr();if(O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e?(41===u.charCodeAt(r)?(Z=Be,r++):(Z=e,0===A&&z(Xe)),Z!==e?_=N=[N,R,O,Q,Z]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e}else r=_,_=e}else r=_,_=e;if(_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(123===u.charCodeAt(r)?(R=ke,r++):(R=e,0===A&&z(Ie)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e){for(Q=[],Z=r,ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e)if(40===u.charCodeAt(r)?(ge=P,r++):(ge=e,0===A&&z(Y)),ge!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();if(Oe!==e){for(ze=[],Ce=hs();Ce!==e;)ze.push(Ce),Ce=hs();if(ze!==e){for(Ce=[],Ve=U();Ve!==e;)Ce.push(Ve),Ve=U();if(Ce!==e)if(41===u.charCodeAt(r)?(Ve=Be,r++):(Ve=e,0===A&&z(Xe)),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();nt!==e?Z=ae=[ae,ge,Oe,ze,Ce,Ve,nt]:(r=Z,Z=e)}else r=Z,Z=e;else r=Z,Z=e}else r=Z,Z=e}else r=Z,Z=e}else r=Z,Z=e;else r=Z,Z=e;for(Z===e&&(Z=ri());Z!==e;){for(Q.push(Z),Z=r,ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e)if(40===u.charCodeAt(r)?(ge=P,r++):(ge=e,0===A&&z(Y)),ge!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();if(Oe!==e){for(ze=[],Ce=hs();Ce!==e;)ze.push(Ce),Ce=hs();if(ze!==e){for(Ce=[],Ve=U();Ve!==e;)Ce.push(Ve),Ve=U();if(Ce!==e)if(41===u.charCodeAt(r)?(Ve=Be,r++):(Ve=e,0===A&&z(Xe)),Ve!==e){for(nt=[],Me=U();Me!==e;)nt.push(Me),Me=U();nt!==e?Z=ae=[ae,ge,Oe,ze,Ce,Ve,nt]:(r=Z,Z=e)}else r=Z,Z=e;else r=Z,Z=e}else r=Z,Z=e}else r=Z,Z=e}else r=Z,Z=e;else r=Z,Z=e;Z===e&&(Z=ri())}if(Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?(125===u.charCodeAt(r)?(ae=We,r++):(ae=e,0===A&&z(Ze)),ae!==e?x=C={token:"inlineData",values:[],todo:!0}:(r=x,x=e)):(r=x,x=e)}else r=x,x=e}else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(pf)),x}()),A--,s===e&&0===A&&z(zi),s}function hs(){var s,x,C,_,N;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if((C=Fu())===e&&(C=Cu())===e&&(C=Su())===e&&(C=Au())===e&&(u.substr(r,5)===Mi?(C=Mi,r+=5):(C=e,0===A&&z(Fs))),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(vf)),s}function ep(){var s,x,C,_;if(A++,s=r,(x=yr())!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e&&(_=tp())!==e?s=x=function(s,x){var C={token:"expression",expressionType:"irireforfunction"};return C.iriref=s,C.args=x.value,C}(x,_):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ea)),s}function tp(){var s,x,C,_,N,R,O,Q,Z,ae,ge,Oe;if(A++,s=r,(x=ri())!==e&&(x={token:"args",value:[]}),(s=x)===e)if(s=r,40===u.charCodeAt(r)?(x=P,r++):(x=e,0===A&&z(Y)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(u.substr(r,8)===Fe?(_=Fe,r+=8):(_=e,0===A&&z(Ne)),_===e&&(u.substr(r,8)===Se?(_=Se,r+=8):(_=e,0===A&&z(be))),_===e&&(_=null),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e){if(Q=[],Z=r,44===u.charCodeAt(r)?(ae=Zt,r++):(ae=e,0===A&&z($t)),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e&&(Oe=Ot())!==e?Z=ae=[ae,ge,Oe]:(r=Z,Z=e)}else r=Z,Z=e;for(;Z!==e;)if(Q.push(Z),Z=r,44===u.charCodeAt(r)?(ae=Zt,r++):(ae=e,0===A&&z($t)),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e&&(Oe=Ot())!==e?Z=ae=[ae,ge,Oe]:(r=Z,Z=e)}else r=Z,Z=e;Q!==e?(41===u.charCodeAt(r)?(Z=Be,r++):(Z=e,0===A&&z(Xe)),Z!==e?s=x=function(s,x,C){for(var _=[],N=0;N<C.length;N++)_.push(C[N][2]);var R={token:"args"};return R.value=[x].concat(_),null!=s&&"DISTINCT"===s.toUpperCase()?R.distinct=!0:R.distinct=!1,R}(_,R,Q):(r=s,s=e)):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ta)),s}function Ta(){var s,x,C,_,N,R,O,Q,Z,ae;if(A++,s=r,(x=ri())!==e&&(x={token:"args",value:[]}),(s=x)===e)if(s=r,40===u.charCodeAt(r)?(x=P,r++):(x=e,0===A&&z(Y)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=yr())===e&&(_=Ot()),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e){if(R=[],O=r,44===u.charCodeAt(r)?(Q=Zt,r++):(Q=e,0===A&&z($t)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?((ae=yr())===e&&(ae=Ot()),ae!==e?O=Q=[Q,Z,ae]:(r=O,O=e)):(r=O,O=e)}else r=O,O=e;for(;O!==e;)if(R.push(O),O=r,44===u.charCodeAt(r)?(Q=Zt,r++):(Q=e,0===A&&z($t)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?((ae=yr())===e&&(ae=Ot()),ae!==e?O=Q=[Q,Z,ae]:(r=O,O=e)):(r=O,O=e)}else r=O,O=e;R!==e?(41===u.charCodeAt(r)?(O=Be,r++):(O=e,0===A&&z(Xe)),O!==e?s=x=function(s,x){for(var C=[],_=0;_<x.length;_++)C.push(x[_][2]);var N={token:"args"};return N.value=[s].concat(C),N}(_,R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(_l)),s}function rp(){var s,x,C,_,N,R;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if((C=ku())!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e&&(N=lc())!==e?s=x=function(s,x){var C=x.triplesContext,_=s;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N],O=null;null!=R[1].length&&(R[1]=R[1][0]),_.token&&"triplesnodecollection"===_.token?(O={subject:_.chainSubject[0],predicate:R[0],object:R[1]},C.push(O),C=C.concat(_.triplesContext)):(O={subject:_,predicate:R[0],object:R[1]},C.push(O))}var Q={token:"triplessamesubject"};return Q.triplesContext=C,Q.chainSubject=_,Q}(C,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if((C=lp())!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e&&(A++,(R=lc())===e&&(R=null),A--,R===e&&0===A&&z(En),(N=R)!==e)?s=x=function(s,x){var C=s.triplesContext,_=s.chainSubject;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N];if(null!=R[1].length&&(R[1]=R[1][0]),"triplesnodecollection"===s.token)for(var O=0;O<_.length;O++){var Q=_[O];if(null!=Q.triplesContext){var Z={subject:Q.chainSubject,predicate:R[0],object:R[1]};C.concat(Q.triplesContext)}else Z={subject:_[O],predicate:R[0],object:R[1]},C.push(Z)}else Z={subject:_,predicate:R[0],object:R[1]},C.push(Z)}var ae={token:"triplessamesubject"};return ae.triplesContext=C,ae.chainSubject=_,ae}(C,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}return A--,s===e&&(x=e,0===A&&z(fn)),s}function lc(){var s,x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze;if(A++,s=r,(x=cc())!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=ho())!==e){for(N=[],R=r,O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(59===u.charCodeAt(r)?(Q=nr,r++):(Q=e,0===A&&z(nn)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e){if(ae=r,(ge=cc())!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();Oe!==e&&(ze=ho())!==e?ae=ge=[ge,Oe,ze]:(r=ae,ae=e)}else r=ae,ae=e;ae===e&&(ae=null),ae!==e?R=O=[O,Q,Z,ae]:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e;for(;R!==e;){for(N.push(R),R=r,O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(59===u.charCodeAt(r)?(Q=nr,r++):(Q=e,0===A&&z(nn)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e){if(ae=r,(ge=cc())!==e){for(Oe=[],ze=U();ze!==e;)Oe.push(ze),ze=U();Oe!==e&&(ze=ho())!==e?ae=ge=[ge,Oe,ze]:(r=ae,ae=e)}else r=ae,ae=e;ae===e&&(ae=null),ae!==e?R=O=[O,Q,Z,ae]:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e}N!==e?s=x=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],O=0;O<x.length;O++)null!=x[O].triplesContext?(N=N.concat(x[O].triplesContext),"triplesnodecollection"===x[O].token&&null!=x[O].chainSubject.length?R.push([s,x[O].chainSubject[0]]):R.push([s,x[O].chainSubject])):R.push([s,x[O]]);for(O=0;O<C.length;O++)for(var Q=C[O][3],Z=Q[0],ae=Q[2]||[],ge=0;ge<ae.length;ge++)null!=ae[ge].triplesContext?(N=N.concat(ae[ge].triplesContext),R.push([Z,ae[ge].chainSubject])):R.push([Z,ae[ge]]);return _.pairs=R,_.triplesContext=N,_}(x,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Pt)),s}function np(){var s,x,C,_,N,R,O,Q;if(A++,s=r,(x=uc())!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e){if(_=[],N=r,44===u.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=uc())!==e?N=R=[R,O,Q]:(r=N,N=e)}else r=N,N=e;for(;N!==e;)if(_.push(N),N=r,44===u.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=uc())!==e?N=R=[R,O,Q]:(r=N,N=e)}else r=N,N=e;_!==e?s=x=function(s,x){var C=[];C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)"object"==typeof x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);return C}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Tn)),s}function ho(){var s,x,C,_,N,R,O,Q;if(A++,s=r,(x=fc())!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e){if(_=[],N=r,44===u.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=fc())!==e?N=R=[R,O,Q]:(r=N,N=e)}else r=N,N=e;for(;N!==e;)if(_.push(N),N=r,44===u.charCodeAt(r)?(R=Zt,r++):(R=e,0===A&&z($t)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=fc())!==e?N=R=[R,O,Q]:(r=N,N=e)}else r=N,N=e;_!==e?s=x=function(s,x){var C=[];C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)"object"==typeof x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);return C}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(na)),s}function uc(){var s;return A++,s=vc(),A--,s===e&&0===A&&z(mf),s}function fc(){var s;return A++,s=gc(),A--,s===e&&0===A&&z(ia),s}function cc(){var s,x;return A++,(s=vs())===e&&(s=r,97===u.charCodeAt(r)?(x="a",r++):(x=e,0===A&&z(vi)),x!==e&&(x={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),s=x),A--,s===e&&(x=e,0===A&&z(Ji)),s}function ip(){var s,x,C,_,N,R,O,Q,Z,ae,ge,Oe;if(A++,s=r,(x=ps())===e&&(x=ds()),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=np())!==e){for(N=[],R=r,O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(59===u.charCodeAt(r)?(Q=nr,r++):(Q=e,0===A&&z(nn)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?(ae=r,(ge=ps())===e&&(ge=ds()),ge!==e&&(Oe=ho())!==e?ae=ge=[ge,Oe]:(r=ae,ae=e),ae===e&&(ae=null),ae!==e?R=O=[O,Q,Z,ae]:(r=R,R=e)):(r=R,R=e)}else r=R,R=e;else r=R,R=e;for(;R!==e;){for(N.push(R),R=r,O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(59===u.charCodeAt(r)?(Q=nr,r++):(Q=e,0===A&&z(nn)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?(ae=r,(ge=ps())===e&&(ge=ds()),ge!==e&&(Oe=ho())!==e?ae=ge=[ge,Oe]:(r=ae,ae=e),ae===e&&(ae=null),ae!==e?R=O=[O,Q,Z,ae]:(r=R,R=e)):(r=R,R=e)}else r=R,R=e;else r=R,R=e}N!==e?s=x=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],O=0;O<x.length;O++)null!=x[O].triplesContext?(N=N.concat(x[O].triplesContext),"triplesnodecollection"===x[O].token&&null!=x[O].chainSubject.length?R.push([s,x[O].chainSubject[0]]):R.push([s,x[O].chainSubject])):R.push([s,x[O]]);for(O=0;O<C.length;O++)for(var Q=C[O][3],Z=Q[0],ae=Q[1]||[],ge=0;ge<ae.length;ge++)null!=ae[ge].triplesContext?(N=N.concat(ae[ge].triplesContext),R.push([Z,ae[ge].chainSubject])):R.push([Z,ae[ge]]);return _.pairs=R,_.triplesContext=N,_}(x,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(zo)),s}function ps(){var s,x;return A++,r,(x=op())!==e&&(x=function(s){return{token:"path",kind:"element"}.value=s,s}(x)),A--,(s=x)===e&&(x=e,0===A&&z(xf)),s}function ds(){var s;return A++,s=gr(),A--,s===e&&0===A&&z(wf),s}function op(){var s;return A++,s=function(){var x,C,_,N,R,O;if(A++,x=r,(C=hc())!==e){for(_=[],N=r,124===u.charCodeAt(r)?(R="|",r++):(R=e,0===A&&z(Jo)),R!==e&&(O=hc())!==e?N=R=[R,O]:(r=N,N=e);N!==e;)_.push(N),N=r,124===u.charCodeAt(r)?(R="|",r++):(R=e,0===A&&z(Jo)),R!==e&&(O=hc())!==e?N=R=[R,O]:(r=N,N=e);_!==e?(C=function(s,x){if(null==x||0===x.length)return s;for(var C=[],_=0;_<x.length;_++)C.push(x[1]);var N={token:"path",kind:"alternative"};return N.value=C,N}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(qo)),x}(),A--,s===e&&0===A&&z(kf),s}function hc(){var s,x,C,_,N,R;if(A++,s=r,(x=pc())!==e){for(C=[],_=r,47===u.charCodeAt(r)?(N="/",r++):(N=e,0===A&&z(hn)),N!==e&&(R=pc())!==e?_=N=[N,R]:(r=_,_=e);_!==e;)C.push(_),_=r,47===u.charCodeAt(r)?(N="/",r++):(N=e,0===A&&z(hn)),N!==e&&(R=pc())!==e?_=N=[N,R]:(r=_,_=e);C!==e?s=x=function(s,x){if(null==x||0===x.length)return s;for(var C=[s],_=0;_<x.length;_++)C.push(x[_][1]);var N={token:"path",kind:"sequence"};return N.value=C,N}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ol)),s}function sp(){var s,x,C,_,N,R,O;return A++,s=r,A++,(_=yr())===e&&(_=r,97===u.charCodeAt(r)?(N="a",r++):(N=e,0===A&&z(vi)),N!==e&&(N={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(_=N)===e&&(_=r,33===u.charCodeAt(r)?(N="!",r++):(N=e,0===A&&z(es)),N!==e&&(R=function(){var Q,Z,ae,ge,Oe,ze,Ce,Ve;if((Q=wu())===e)if(Q=r,40===u.charCodeAt(r)?(Z=P,r++):(Z=e,0===A&&z(Y)),Z!==e){if(ae=r,(ge=wu())!==e){for(Oe=[],ze=r,124===u.charCodeAt(r)?(Ce="|",r++):(Ce=e,0===A&&z(Jo)),Ce!==e&&(Ve=wu())!==e?ze=Ce=[Ce,Ve]:(r=ze,ze=e);ze!==e;)Oe.push(ze),ze=r,124===u.charCodeAt(r)?(Ce="|",r++):(Ce=e,0===A&&z(Jo)),Ce!==e&&(Ve=wu())!==e?ze=Ce=[Ce,Ve]:(r=ze,ze=e);Oe!==e?ae=ge=[ge,Oe]:(r=ae,ae=e)}else r=ae,ae=e;ae===e&&(ae=null),ae!==e?(41===u.charCodeAt(r)?(ge=Be,r++):(ge=e,0===A&&z(Xe)),ge!==e?Q=Z=[Z,ae,ge]:(r=Q,Q=e)):(r=Q,Q=e)}else r=Q,Q=e;return Q}())!==e?_=N=[N,R]:(r=_,_=e),_===e&&(_=r,40===u.charCodeAt(r)?(N=P,r++):(N=e,0===A&&z(Y)),N!==e&&(R=op())!==e?(41===u.charCodeAt(r)?(O=Be,r++):(O=e,0===A&&z(Xe)),O!==e?_=N=R:(r=_,_=e)):(r=_,_=e)))),A--,_===e&&(N=e,0===A&&z(Zo)),(x=_)!==e?((C=function(){var _,N,R,O,Q,Z,ae,ge,Oe;return A++,42===u.charCodeAt(r)?(_=ot,r++):(_=e,0===A&&z(ct)),_===e&&(63===u.charCodeAt(r)?(_="?",r++):(_=e,0===A&&z(Yo)),_===e&&(43===u.charCodeAt(r)?(_=pn,r++):(_=e,0===A&&z(Lr)),_===e&&(_=r,123===u.charCodeAt(r)?(N=ke,r++):(N=e,0===A&&z(Ie)),N!==e?(R=r,(O=dc())!==e?(Q=r,44===u.charCodeAt(r)?(Z=Zt,r++):(Z=e,0===A&&z($t)),Z!==e?(125===u.charCodeAt(r)?(ae=We,r++):(ae=e,0===A&&z(Ze)),ae===e&&(ae=r,(ge=dc())!==e?(125===u.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ze)),Oe!==e?ae=ge=[ge,Oe]:(r=ae,ae=e)):(r=ae,ae=e)),ae!==e?Q=Z=[Z,ae]:(r=Q,Q=e)):(r=Q,Q=e),Q===e&&(125===u.charCodeAt(r)?(Q=We,r++):(Q=e,0===A&&z(Ze))),Q!==e?R=O=[O,Q]:(r=R,R=e)):(r=R,R=e),R===e&&(R=r,44===u.charCodeAt(r)?(O=Zt,r++):(O=e,0===A&&z($t)),O!==e&&(Q=dc())!==e?(125===u.charCodeAt(r)?(Z=We,r++):(Z=e,0===A&&z(Ze)),Z!==e?R=O=[O,Q,Z]:(r=R,R=e)):(r=R,R=e)),R!==e?_=N=[N,R]:(r=_,_=e)):(r=_,_=e)))),A--,_===e&&(N=e,0===A&&z(Vo)),_}())===e&&(C=null),C!==e?s=x=function(s,x){if(s.token&&"path"!=s.token&&""==x)return s;if(s.token&&s.token!=C&&""!=x){var C={token:"path",kind:"element"};return C.value=s,C.modifier=x,C}return s.modifier=x,s}(x,C):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Rl)),s}function pc(){var s,x,C;return A++,(s=sp())===e&&(s=r,94===u.charCodeAt(r)?(x="^",r++):(x=e,0===A&&z(aa)),x!==e&&(C=sp())!==e?s=x=function(s){var x={token:"path",kind:"inversePath"};return x.value=s,x}(C):(r=s,s=e)),A--,s===e&&(x=e,0===A&&z(jl)),s}function wu(){var s,x,C;return A++,(s=yr())===e&&(97===u.charCodeAt(r)?(s="a",r++):(s=e,0===A&&z(vi)),s===e&&(s=r,94===u.charCodeAt(r)?(x="^",r++):(x=e,0===A&&z(aa)),x!==e?((C=yr())===e&&(97===u.charCodeAt(r)?(C="a",r++):(C=e,0===A&&z(vi))),C!==e?s=x=[x,C]:(r=s,s=e)):(r=s,s=e))),A--,s===e&&(x=e,0===A&&z(Ml)),s}function dc(){var s;return A++,s=gs(),A--,s===e&&0===A&&z(gi),s}function ap(){var s,x;return A++,s=r,(x=function(){var C,_,N,R,O,Q,Z,ae,ge;for(A++,C=r,_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(40===u.charCodeAt(r)?(N=P,r++):(N=e,0===A&&z(Y)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e){if(O=[],(Q=vc())!==e)for(;Q!==e;)O.push(Q),Q=vc();else O=e;if(O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(41===u.charCodeAt(r)?(Z=Be,r++):(Z=e,0===A&&z(Xe)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e?C=_=O:(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e}else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(eo)),C}())!==e&&(x=function(s){for(var x=[],C=[],_=null,N=0;N<s.length;N++){Hr++;var R=null;null==s[N].chainSubject&&null==s[N].triplesContext?R=s[N]:(R=s[N].chainSubject,x=x.concat(s[N].triplesContext)),_={subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:R},0==N&&C.push(_.subject),x.push(_),_=N===s.length-1?{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Hr+1)}},x.push(_)}return{token:"triplesnodecollection",triplesContext:x,chainSubject:C}}(x)),(s=x)===e&&(s=function(){var C,_,N,R,O,Q,Z,ae;for(A++,C=r,_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(91===u.charCodeAt(r)?(N="[",r++):(N=e,0===A&&z(rs)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if((O=ip())!==e)if(93===u.charCodeAt(r)?(Q="]",r++):(Q=e,0===A&&z(is)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?(_=function(s){for(var x={token:"blank",value:"_:"+ ++Hr},C=[],_=0;_<s.pairs.length;_++){var N=s.pairs[_],R={};R.subject=x,R.predicate=N[0],null!=N[1].length&&(N[1]=N[1][0]),R.object=N[1],C.push(R)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:s.triplesContext.concat(C),chainSubject:x}}(O),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Cf)),C}()),A--,s===e&&(x=e,0===A&&z(Pl)),s}function lp(){var s,x;return A++,s=r,(x=function(){var C,_,N,R,O,Q,Z,ae,ge;for(A++,C=r,_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(40===u.charCodeAt(r)?(N=P,r++):(N=e,0===A&&z(Y)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e){if(O=[],(Q=gc())!==e)for(;Q!==e;)O.push(Q),Q=gc();else O=e;if(O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(41===u.charCodeAt(r)?(Z=Be,r++):(Z=e,0===A&&z(Xe)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e?C=_=O:(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e}else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Sf)),C}())!==e&&(x=function(s){for(var x=[],C=[],_=null,N=0;N<s.length;N++){Hr++;var R=null;null==s[N].chainSubject&&null==s[N].triplesContext?R=s[N]:(R=s[N].chainSubject,x=x.concat(R.triplesContext)),_={subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:R},0==N&&C.push(_.subject),x.push(_),_=N===s.length-1?{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Hr+1)}},x.push(_)}return{token:"triplesnodecollection",triplesContext:x,chainSubject:C}}(x)),(s=x)===e&&(s=function(){var C,_,N,R,O,Q,Z,ae,ge;for(A++,C=r,_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(91===u.charCodeAt(r)?(N="[",r++):(N=e,0===A&&z(rs)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if((O=lc())!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(93===u.charCodeAt(r)?(Z="]",r++):(Z=e,0===A&&z(is)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e?(_=function(s){for(var x={token:"blank",value:"_:"+ ++Hr},C=[],_=0;_<s.pairs.length;_++){var N=s.pairs[_],R={};R.subject=x,R.predicate=N[0],null!=N[1].length&&(N[1]=N[1][0]),R.object=N[1],C.push(R)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:s.triplesContext.concat(C),chainSubject:x}}(O),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Zi)),C}()),A--,s===e&&(x=e,0===A&&z(Bl)),s}function vc(){var s,x,C,_,N,R;for(A++,r,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=ku())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e;if(x===e){for(x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=ap())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e}return x!==e&&(x=dn(x)),A--,(s=x)===e&&(x=e,0===A&&z(Ql)),s}function gc(){var s,x,C,_,N,R;for(A++,r,x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=ku())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e;if(x===e){for(x=r,C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=lp())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e}return x!==e&&(x=dn(x)),A--,(s=x)===e&&(x=e,0===A&&z(yi)),s}function ku(){var s,x,C,_,N,R,O;return A++,(s=gr())===e&&(A++,(x=yr())===e&&(x=Cu())===e&&(x=Su())===e&&(x=Au())===e&&(A++,C=r,A++,N=r,"_:"===u.substr(r,2)?(R="_:",r+=2):(R=e,0===A&&z(Nd)),R!==e&&(O=hp())!==e?N=R=O:(r=N,N=e),A--,N===e&&(R=e,0===A&&z(Td)),(_=N)!==e&&(_=function(s){return{token:"blank",value:s}}(_)),(C=_)===e&&(C=r,(_=function(){var N,R,O,Q;if(A++,N=r,91===u.charCodeAt(r)?(R="[",r++):(R=e,0===A&&z(rs)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(93===u.charCodeAt(r)?(Q="]",r++):(Q=e,0===A&&z(is)),Q!==e?N=R=[R,O,Q]:(r=N,N=e)):(r=N,N=e)}else r=N,N=e;return A--,N===e&&(R=e,0===A&&z(_v)),N}())!==e&&(_={token:"blank",value:"_:"+ ++Hr}),C=_),A--,C===e&&(_=e,0===A&&z(wd)),(x=C)===e)&&(x=ri()),A--,x===e&&0===A&&z(Ef),s=x),A--,s===e&&0===A&&z(to),s}function vs(){var s;return A++,(s=gr())===e&&(s=yr()),A--,s===e&&0===A&&z(Af),s}function gr(){var s,x,C,_,N,R,O,Q;for(A++,s=r,x=[],C=U();C!==e;)x.push(C),C=U();if(x!==e)if(A++,R=r,63===u.charCodeAt(r)?(O="?",r++):(O=e,0===A&&z(Yo)),O!==e&&(Q=cp())!==e?R=O=Q:(r=R,R=e),A--,R===e&&(O=e,0===A&&z(Id)),(C=R)===e&&(C=function(){var R,O,Q;return A++,R=r,36===u.charCodeAt(r)?(O="$",r++):(O=e,0===A&&z(oh)),O!==e&&(Q=cp())!==e?R=O=Q:(r=R,R=e),A--,R===e&&(O=e,0===A&&z(Od)),R}()),C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();_!==e?s=x=function(s){var x={token:"var"};return x.value=s,x}(C):(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ul)),s}function Ot(){var s;return A++,s=function(){var x,C,_,N,R,O,Q,Z;if(A++,x=r,(C=yc())!==e){for(_=[],N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if("||"===u.substr(r,2)?(O="||",r+=2):(O=e,0===A&&z(Gl)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=yc())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;for(;N!==e;){for(_.push(N),N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if("||"===u.substr(r,2)?(O="||",r+=2):(O=e,0===A&&z(Gl)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=yc())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e}_!==e?(C=function(s,x){if(0===x.length)return s;for(var C={token:"expression",expressionType:"conditionalor"},_=[s],N=0;N<x.length;N++)_.push(x[N][3]);return C.operands=_,C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(br)),x}(),A--,s===e&&0===A&&z(Tf),s}function yc(){var s,x,C,_,N,R,O,Q;if(A++,s=r,(x=mc())!==e){for(C=[],_=r,N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if("&&"===u.substr(r,2)?(R="&&",r+=2):(R=e,0===A&&z(ua)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=mc())!==e?_=N=[N,R,O,Q]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;for(;_!==e;){for(C.push(_),_=r,N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if("&&"===u.substr(r,2)?(R="&&",r+=2):(R=e,0===A&&z(ua)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=mc())!==e?_=N=[N,R,O,Q]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}C!==e?s=x=function(s,x){if(0===x.length)return s;for(var C={token:"expression",expressionType:"conditionaland"},_=[s],N=0;N<x.length;N++)_.push(x[N][3]);return C.operands=_,C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Lf)),s}function mc(){var s;return A++,s=function(){var x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze,Ce;if(A++,x=r,(C=Gr())!==e){for(_=[],N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(61===u.charCodeAt(r)?(O="=",r++):(O=e,0===A&&z(Pr)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if("!="===u.substr(r,2)?(O="!=",r+=2):(O=e,0===A&&z(io)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(60===u.charCodeAt(r)?(O="<",r++):(O=e,0===A&&z(Br)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(62===u.charCodeAt(r)?(O=">",r++):(O=e,0===A&&z(ca)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if("<="===u.substr(r,2)?(O="<=",r+=2):(O=e,0===A&&z(ha)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(">="===u.substr(r,2)?(O=">=",r+=2):(O=e,0===A&&z(pa)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(73===u.charCodeAt(r)?(O="I",r++):(O=e,0===A&&z(gn)),O===e&&(105===u.charCodeAt(r)?(O="i",r++):(O=e,0===A&&z(bi))),O!==e)if(78===u.charCodeAt(r)?(Q="N",r++):(Q=e,0===A&&z(xi)),Q===e&&(110===u.charCodeAt(r)?(Q="n",r++):(Q=e,0===A&&z(Yn))),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e&&(ae=Ta())!==e?N=R=[R,O,Q,Z,ae]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(78===u.charCodeAt(r)?(O="N",r++):(O=e,0===A&&z(xi)),O===e&&(110===u.charCodeAt(r)?(O="n",r++):(O=e,0===A&&z(Yn))),O!==e)if(79===u.charCodeAt(r)?(Q="O",r++):(Q=e,0===A&&z(da)),Q===e&&(111===u.charCodeAt(r)?(Q="o",r++):(Q=e,0===A&&z(zl))),Q!==e)if(84===u.charCodeAt(r)?(Z="T",r++):(Z=e,0===A&&z(wi)),Z===e&&(116===u.charCodeAt(r)?(Z="t",r++):(Z=e,0===A&&z(ga))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e)if(73===u.charCodeAt(r)?(ge="I",r++):(ge=e,0===A&&z(gn)),ge===e&&(105===u.charCodeAt(r)?(ge="i",r++):(ge=e,0===A&&z(bi))),ge!==e)if(78===u.charCodeAt(r)?(Oe="N",r++):(Oe=e,0===A&&z(xi)),Oe===e&&(110===u.charCodeAt(r)?(Oe="n",r++):(Oe=e,0===A&&z(Yn))),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e&&(Ce=Ta())!==e?N=R=[R,O,Q,Z,ae,ge,Oe,ze,Ce]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e}else r=N,N=e;else r=N,N=e;else r=N,N=e;else r=N,N=e}}}}}}}for(;N!==e;){for(_.push(N),N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(61===u.charCodeAt(r)?(O="=",r++):(O=e,0===A&&z(Pr)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if("!="===u.substr(r,2)?(O="!=",r+=2):(O=e,0===A&&z(io)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(60===u.charCodeAt(r)?(O="<",r++):(O=e,0===A&&z(Br)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(62===u.charCodeAt(r)?(O=">",r++):(O=e,0===A&&z(ca)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if("<="===u.substr(r,2)?(O="<=",r+=2):(O=e,0===A&&z(ha)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(">="===u.substr(r,2)?(O=">=",r+=2):(O=e,0===A&&z(pa)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Gr())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(73===u.charCodeAt(r)?(O="I",r++):(O=e,0===A&&z(gn)),O===e&&(105===u.charCodeAt(r)?(O="i",r++):(O=e,0===A&&z(bi))),O!==e)if(78===u.charCodeAt(r)?(Q="N",r++):(Q=e,0===A&&z(xi)),Q===e&&(110===u.charCodeAt(r)?(Q="n",r++):(Q=e,0===A&&z(Yn))),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e&&(ae=Ta())!==e?N=R=[R,O,Q,Z,ae]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(78===u.charCodeAt(r)?(O="N",r++):(O=e,0===A&&z(xi)),O===e&&(110===u.charCodeAt(r)?(O="n",r++):(O=e,0===A&&z(Yn))),O!==e)if(79===u.charCodeAt(r)?(Q="O",r++):(Q=e,0===A&&z(da)),Q===e&&(111===u.charCodeAt(r)?(Q="o",r++):(Q=e,0===A&&z(zl))),Q!==e)if(84===u.charCodeAt(r)?(Z="T",r++):(Z=e,0===A&&z(wi)),Z===e&&(116===u.charCodeAt(r)?(Z="t",r++):(Z=e,0===A&&z(ga))),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();if(ae!==e)if(73===u.charCodeAt(r)?(ge="I",r++):(ge=e,0===A&&z(gn)),ge===e&&(105===u.charCodeAt(r)?(ge="i",r++):(ge=e,0===A&&z(bi))),ge!==e)if(78===u.charCodeAt(r)?(Oe="N",r++):(Oe=e,0===A&&z(xi)),Oe===e&&(110===u.charCodeAt(r)?(Oe="n",r++):(Oe=e,0===A&&z(Yn))),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e&&(Ce=Ta())!==e?N=R=[R,O,Q,Z,ae,ge,Oe,ze,Ce]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e}else r=N,N=e;else r=N,N=e;else r=N,N=e;else r=N,N=e}}}}}}}}_!==e?(C=function(s,x){if(0===x.length)return s;if("i"===x[0][1]||"I"===x[0][1]||"n"===x[0][1]||"N"===x[0][1]){var C={};if("i"===x[0][1]||"I"===x[0][1]){var _="=";C.expressionType="conditionalor"}else _="!=",C.expressionType="conditionaland";for(var N=s,R=[],O=0;O<x[0].length;O++)if("args"===x[0][O].token){R=x[0][O].value;break}C.token="expression",C.operands=[];for(var Q=0;Q<R.length;Q++){var Z={token:"expression",expressionType:"relationalexpression"};Z.operator=_,Z.op1=N,Z.op2=R[Q],C.operands.push(Z)}return C}return(C={expressionType:"relationalexpression"}).operator=x[0][1],C.op1=s,C.op2=x[0][3],C.token="expression",C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Of)),x}(),A--,s===e&&0===A&&z(If),s}function Gr(){var s;return A++,s=function(){var x,C,_,N,R,O,Q,Z,ae,ge;if(A++,x=r,(C=Na())!==e){for(_=[],N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(43===u.charCodeAt(r)?(O=pn,r++):(O=e,0===A&&z(Lr)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Na())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(45===u.charCodeAt(r)?(O=Yr,r++):(O=e,0===A&&z(Qr)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Na())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e)if(N=r,(R=La())===e&&(R=La()),R!==e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(42===u.charCodeAt(r)?(Z=ot,r++):(Z=e,0===A&&z(ct)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e&&(ge=ti())!==e?O=Q=[Q,Z,ae,ge]:(r=O,O=e)}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(47===u.charCodeAt(r)?(Z="/",r++):(Z=e,0===A&&z(hn)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e&&(ge=ti())!==e?O=Q=[Q,Z,ae,ge]:(r=O,O=e)}else r=O,O=e;else r=O,O=e}O===e&&(O=null),O!==e?N=R=[R,O]:(r=N,N=e)}else r=N,N=e}for(;N!==e;){for(_.push(N),N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(43===u.charCodeAt(r)?(O=pn,r++):(O=e,0===A&&z(Lr)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Na())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if(45===u.charCodeAt(r)?(O=Yr,r++):(O=e,0===A&&z(Qr)),O!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Na())!==e?N=R=[R,O,Q,Z]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e)if(N=r,(R=La())===e&&(R=La()),R!==e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(42===u.charCodeAt(r)?(Z=ot,r++):(Z=e,0===A&&z(ct)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e&&(ge=ti())!==e?O=Q=[Q,Z,ae,ge]:(r=O,O=e)}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();if(Q!==e)if(47===u.charCodeAt(r)?(Z="/",r++):(Z=e,0===A&&z(hn)),Z!==e){for(ae=[],ge=U();ge!==e;)ae.push(ge),ge=U();ae!==e&&(ge=ti())!==e?O=Q=[Q,Z,ae,ge]:(r=O,O=e)}else r=O,O=e;else r=O,O=e}O===e&&(O=null),O!==e?N=R=[R,O]:(r=N,N=e)}else r=N,N=e}}_!==e?(C=function(s,x){if(0===x.length)return s;var C={token:"expression",expressionType:"additiveexpression"};C.summand=s,C.summands=[];for(var _=0;_<x.length;_++){var N=x[_],R={};if(4==N.length&&"string"==typeof N[1])R.operator=N[1],R.expression=N[3];else{var O={},Q=R[0],Z=(R[1][1],R[1][3]);Q.value<0?(R.operator="-",Q.value=-Q.value):R.operator="+",O.token="expression",O.expressionType="multiplicativeexpression",O.operator=Q,O.factors=[{operator:null,expression:Z}],R.expression=O}C.summands.push(R)}return C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Jl)),x}(),A--,s===e&&0===A&&z(ya),s}function Na(){var s,x,C,_,N,R,O,Q;if(A++,s=r,(x=ti())!==e){for(C=[],_=r,N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(42===u.charCodeAt(r)?(R=ot,r++):(R=e,0===A&&z(ct)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=ti())!==e?_=N=[N,R,O,Q]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;if(_===e){for(_=r,N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(47===u.charCodeAt(r)?(R="/",r++):(R=e,0===A&&z(hn)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=ti())!==e?_=N=[N,R,O,Q]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}for(;_!==e;){for(C.push(_),_=r,N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(42===u.charCodeAt(r)?(R=ot,r++):(R=e,0===A&&z(ct)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=ti())!==e?_=N=[N,R,O,Q]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;if(_===e){for(_=r,N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(47===u.charCodeAt(r)?(R="/",r++):(R=e,0===A&&z(hn)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e&&(Q=ti())!==e?_=N=[N,R,O,Q]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}}C!==e?s=x=function(s,x){if(0===x.length)return s;var C={token:"expression",expressionType:"multiplicativeexpression"};C.factor=s,C.factors=[];for(var _=0;_<x.length;_++){var N=x[_],R={};R.operator=N[1],R.expression=N[3],C.factors.push(R)}return C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(jf)),s}function ti(){var s,x,C,_;if(A++,s=r,33===u.charCodeAt(r)?(x="!",r++):(x=e,0===A&&z(es)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e&&(_=_u())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,43===u.charCodeAt(r)?(x=pn,r++):(x=e,0===A&&z(Lr)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e&&(_=_u())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,45===u.charCodeAt(r)?(x=Yr,r++):(x=e,0===A&&z(Qr)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e&&(_=_u())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;s===e&&(s=_u())}}return A--,s===e&&(x=e,0===A&&z(ao)),s}function _u(){var s,x;return A++,(s=bc())===e&&(s=xc())===e&&(s=function(){var C,_,N,R;if(A++,C=r,(_=yr())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?((R=tp())===e&&(R=null),R!==e?(_=function(s,x){var C={token:"expression",expressionType:"irireforfunction"};return C.iriref=s,C.args=null!=x?x.value:x,C}(_,R),C=_):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z($p)),C}())===e&&(s=r,(x=Cu())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=r,(x=Su())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=r,(x=Au())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=function(){var C,_,N,R,O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt,Me,$e,it,ft;if(A++,C=r,"COUNT"===u.substr(r,5)?(_="COUNT",r+=5):(_=e,0===A&&z(Rp)),_===e&&("count"===u.substr(r,5)?(_="count",r+=5):(_=e,0===A&&z(jp))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,8)===Fe?(Q=Fe,r+=8):(Q=e,0===A&&z(Ne)),Q===e&&(u.substr(r,8)===Se?(Q=Se,r+=8):(Q=e,0===A&&z(be))),Q===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if(42===u.charCodeAt(r)?(ae=ot,r++):(ae=e,0===A&&z(ct)),ae===e&&(ae=Ot()),ae!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"count"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(Q,ae),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,u.substr(r,12)===Mc?(_=Mc,r+=12):(_=e,0===A&&z(Mp)),_===e&&(u.substr(r,12)===Pc?(_=Pc,r+=12):(_=e,0===A&&z(Pp))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,8)===Fe?(Q=Fe,r+=8):(Q=e,0===A&&z(Ne)),Q===e&&(u.substr(r,8)===Se?(Q=Se,r+=8):(Q=e,0===A&&z(be))),Q===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){if(ge=r,59===u.charCodeAt(r)?(Oe=nr,r++):(Oe=e,0===A&&z(nn)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if(u.substr(r,9)===Bc?(Ce=Bc,r+=9):(Ce=e,0===A&&z(Bp)),Ce!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();if(Ve!==e)if(61===u.charCodeAt(r)?(nt="=",r++):(nt=e,0===A&&z(Pr)),nt!==e){for(Me=[],$e=U();$e!==e;)Me.push($e),$e=U();if(Me!==e)if(($e=up())!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();it!==e?ge=Oe=[Oe,ze,Ce,Ve,nt,Me,$e,it]:(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;if(ge===e&&(ge=null),ge!==e)if(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(_=function(s,x,C){var _={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return _.distinct=""!=s&&null!=s?"DISTINCT":s,_.expression=x,_.separator=C,_}(Q,ae,ge),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"SUM"===u.substr(r,3)?(_="SUM",r+=3):(_=e,0===A&&z(Up)),_===e&&("sum"===u.substr(r,3)?(_="sum",r+=3):(_=e,0===A&&z(Gp))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,8)===Fe?(Q=Fe,r+=8):(Q=e,0===A&&z(Ne)),Q===e&&(u.substr(r,8)===Se?(Q=Se,r+=8):(Q=e,0===A&&z(be))),Q===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(Q,ae),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"MIN"===u.substr(r,3)?(_="MIN",r+=3):(_=e,0===A&&z(Wp)),_===e&&("min"===u.substr(r,3)?(_="min",r+=3):(_=e,0===A&&z(zp))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,8)===Fe?(Q=Fe,r+=8):(Q=e,0===A&&z(Ne)),Q===e&&(u.substr(r,8)===Se?(Q=Se,r+=8):(Q=e,0===A&&z(be))),Q===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"min"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(Q,ae),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"MAX"===u.substr(r,3)?(_="MAX",r+=3):(_=e,0===A&&z(Jp)),_===e&&("max"===u.substr(r,3)?(_="max",r+=3):(_=e,0===A&&z(Xp))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,8)===Fe?(Q=Fe,r+=8):(Q=e,0===A&&z(Ne)),Q===e&&(u.substr(r,8)===Se?(Q=Se,r+=8):(Q=e,0===A&&z(be))),Q===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"max"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(Q,ae),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e)if(C=r,"AVG"===u.substr(r,3)?(_="AVG",r+=3):(_=e,0===A&&z(Kp)),_===e&&("avg"===u.substr(r,3)?(_="avg",r+=3):(_=e,0===A&&z(Yp))),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if(40===u.charCodeAt(r)?(R=P,r++):(R=e,0===A&&z(Y)),R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(u.substr(r,8)===Fe?(Q=Fe,r+=8):(Q=e,0===A&&z(Ne)),Q===e&&(u.substr(r,8)===Se?(Q=Se,r+=8):(Q=e,0===A&&z(be))),Q===e&&(Q=null),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(Q,ae),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e}}}}return A--,C===e&&(_=e,0===A&&z(Op)),C}())===e&&(s=r,(x=gr())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"var"};return x.value=s,x}(x)),s=x)))),A--,s===e&&(x=e,0===A&&z(Mf)),s}function bc(){var s,x,C,_,N,R;if(A++,s=r,40===u.charCodeAt(r)?(x=P,r++):(x=e,0===A&&z(Y)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if((_=Ot())!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();N!==e?(41===u.charCodeAt(r)?(R=Be,r++):(R=e,0===A&&z(Xe)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Uf)),s}function xc(){var s,x,C,_,N,R,O,Q,Z,ae,ge,Oe,ze,Ce,Ve,nt;if(A++,s=r,"STR"===u.substr(r,3)?(x="STR",r+=3):(x=e,0===A&&z(Zl)),x===e&&("str"===u.substr(r,3)?(x="str",r+=3):(x=e,0===A&&z(eu))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"str"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"LANG"===u.substr(r,4)?(x="LANG",r+=4):(x=e,0===A&&z(as)),x===e&&("lang"===u.substr(r,4)?(x="lang",r+=4):(x=e,0===A&&z(Hf))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"lang"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,11)===Ht?(x=Ht,r+=11):(x=e,0===A&&z(zf)),x===e&&(u.substr(r,11)===ls?(x=ls,r+=11):(x=e,0===A&&z(uo))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(44===u.charCodeAt(r)?(Q=Zt,r++):(Q=e,0===A&&z($t)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e?(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e?s=x=function(s,x){var C={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return C.args=[s,x],C}(R,ae):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,8)===fo?(x=fo,r+=8):(x=e,0===A&&z(xa)),x===e&&(u.substr(r,8)===wa?(x=wa,r+=8):(x=e,0===A&&z(ru))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"BOUND"===u.substr(r,5)?(x="BOUND",r+=5):(x=e,0===A&&z(iu)),x===e&&("bound"===u.substr(r,5)?(x="bound",r+=5):(x=e,0===A&&z(_a))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=gr())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"bound"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"IRI"===u.substr(r,3)?(x="IRI",r+=3):(x=e,0===A&&z(au)),x===e&&("iri"===u.substr(r,3)?(x="iri",r+=3):(x=e,0===A&&z(_i))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"iri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"URI"===u.substr(r,3)?(x="URI",r+=3):(x=e,0===A&&z(Jf)),x===e&&("uri"===u.substr(r,3)?(x="uri",r+=3):(x=e,0===A&&z(Xf))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"uri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"BNODE"===u.substr(r,5)?(x="BNODE",r+=5):(x=e,0===A&&z(us)),x===e&&(u.substr(r,5)===t?(x=t,r+=5):(x=e,0===A&&z(n))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e){if(_=r,40===u.charCodeAt(r)?(N=P,r++):(N=e,0===A&&z(Y)),N!==e){for(R=[],O=U();O!==e;)R.push(O),O=U();if(R!==e)if((O=Ot())!==e){for(Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e?(41===u.charCodeAt(r)?(Z=Be,r++):(Z=e,0===A&&z(Xe)),Z!==e?_=N=[N,R,O,Q,Z]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;_===e&&(_=ri()),_!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===s.length?x.args=[s[2]]:x.args=null,x}(_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,8)===a?(x=a,r+=8):(x=e,0===A&&z(b)),x===e&&(u.substr(r,8)===j?(x=j,r+=8):(x=e,0===A&&z(X))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e&&(_=Ta())!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return x.args=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,"IF"===u.substr(r,2)?(x="IF",r+=2):(x=e,0===A&&z(se)),x===e&&("if"===u.substr(r,2)?(x="if",r+=2):(x=e,0===A&&z(Te))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(44===u.charCodeAt(r)?(Q=Zt,r++):(Q=e,0===A&&z($t)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();if(ge!==e)if(44===u.charCodeAt(r)?(Oe=Zt,r++):(Oe=e,0===A&&z($t)),Oe!==e){for(ze=[],Ce=U();Ce!==e;)ze.push(Ce),Ce=U();if(ze!==e)if((Ce=Ot())!==e){for(Ve=[],nt=U();nt!==e;)Ve.push(nt),nt=U();Ve!==e?(41===u.charCodeAt(r)?(nt=Be,r++):(nt=e,0===A&&z(Xe)),nt!==e?s=x=function(s,x,C){var _={token:"expression",expressionType:"builtincall",builtincall:"if"};return _.args=[s,x,C],_}(R,ae,Ce):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,9)===Qe?(x=Qe,r+=9):(x=e,0===A&&z(Ye)),x===e&&(u.substr(r,9)===tt?(x=tt,r+=9):(x=e,0===A&&z(lt)),x===e&&(u.substr(r,9)===ht?(x=ht,r+=9):(x=e,0===A&&z(dt)))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,7)===gt?(x=gt,r+=7):(x=e,0===A&&z(_t)),x===e&&(u.substr(r,7)===wt?(x=wt,r+=7):(x=e,0===A&&z(Nt)),x===e&&(u.substr(r,7)===Gt?(x=Gt,r+=7):(x=e,0===A&&z(ar)))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,8)===xr?(x=xr,r+=8):(x=e,0===A&&z(wr)),x===e&&(u.substr(r,8)===Vt?(x=Vt,r+=8):(x=e,0===A&&z(kr))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if(44===u.charCodeAt(r)?(Q=Zt,r++):(Q=e,0===A&&z($t)),Q!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();if(Z!==e)if((ae=Ot())!==e){for(ge=[],Oe=U();Oe!==e;)ge.push(Oe),Oe=U();ge!==e?(41===u.charCodeAt(r)?(Oe=Be,r++):(Oe=e,0===A&&z(Xe)),Oe!==e?s=x=function(s,x){var C={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return C.args=[s,x],C}(R,ae):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"ISURI"===u.substr(r,5)?(x="ISURI",r+=5):(x=e,0===A&&z(tr)),x===e&&("isuri"===u.substr(r,5)?(x="isuri",r+=5):(x=e,0===A&&z(_r)),x===e&&("isURI"===u.substr(r,5)?(x="isURI",r+=5):(x=e,0===A&&z(On)),x===e&&("ISIRI"===u.substr(r,5)?(x="ISIRI",r+=5):(x=e,0===A&&z(Zr)),x===e&&("isiri"===u.substr(r,5)?(x="isiri",r+=5):(x=e,0===A&&z(Ca)),x===e&&("isIRI"===u.substr(r,5)?(x="isIRI",r+=5):(x=e,0===A&&z($n))))))),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();if(C!==e)if(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_!==e){for(N=[],R=U();R!==e;)N.push(R),R=U();if(N!==e)if((R=Ot())!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();O!==e?(41===u.charCodeAt(r)?(Q=Be,r++):(Q=e,0===A&&z(Xe)),Q!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,u.substr(r,7)===pr?(x=pr,r+=7):(x=e,0===A&&z(Ci)),x===e&&(u.substr(r,7)===fs?(x=fs,r+=7):(x=e,0===A&&z(wp))),x!==e){if(C=[],Fc.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Ec)),_!==e)for(;_!==e;)C.push(_),Fc.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Ec));else C=e;if(C!==e){for(_=[],N=U();N!==e;)_.push(N),N=U();if(_!==e)if(40===u.charCodeAt(r)?(N=P,r++):(N=e,0===A&&z(Y)),N!==e){for(R=[],O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();for(Q!==e&&(Z=Ot())!==e?(44===u.charCodeAt(r)?(ae=Zt,r++):(ae=e,0===A&&z($t)),ae!==e?O=Q=[Q,Z,ae]:(r=O,O=e)):(r=O,O=e);O!==e;){for(R.push(O),O=r,Q=[],Z=U();Z!==e;)Q.push(Z),Z=U();Q!==e&&(Z=Ot())!==e?(44===u.charCodeAt(r)?(ae=Zt,r++):(ae=e,0===A&&z($t)),ae!==e?O=Q=[Q,Z,ae]:(r=O,O=e)):(r=O,O=e)}if(R!==e){for(O=[],Q=U();Q!==e;)O.push(Q),Q=U();if(O!==e)if((Q=Ot())!==e){for(Z=[],ae=U();ae!==e;)Z.push(ae),ae=U();Z!==e?(41===u.charCodeAt(r)?(ae=Be,r++):(ae=e,0===A&&z(Xe)),ae!==e?s=x=function(s,x,C){var _={token:"expression",expressionType:"custom"};_.name=s.join("");for(var N=[],R=0;R<x.length;R++)N.push(x[R][1]);return N.push(C),_.args=N,_}(C,R,Q):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e;s===e&&(s=function(){var Me,$e,it,ft,Lt,ut,Rt,Mt,Ft,Cr,lr,dr,Sr,Ar,ur;if(A++,Me=r,"REGEX"===u.substr(r,5)?($e="REGEX",r+=5):($e=e,0===A&&z(Cp)),$e===e&&("regex"===u.substr(r,5)?($e="regex",r+=5):($e=e,0===A&&z(Sp))),$e!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();if(it!==e)if(40===u.charCodeAt(r)?(ft=P,r++):(ft=e,0===A&&z(Y)),ft!==e){for(Lt=[],ut=U();ut!==e;)Lt.push(ut),ut=U();if(Lt!==e)if((ut=Ot())!==e){for(Rt=[],Mt=U();Mt!==e;)Rt.push(Mt),Mt=U();if(Rt!==e)if(44===u.charCodeAt(r)?(Mt=Zt,r++):(Mt=e,0===A&&z($t)),Mt!==e){for(Ft=[],Cr=U();Cr!==e;)Ft.push(Cr),Cr=U();if(Ft!==e)if((Cr=Ot())!==e){for(lr=[],dr=U();dr!==e;)lr.push(dr),dr=U();if(lr!==e){if(dr=r,44===u.charCodeAt(r)?(Sr=Zt,r++):(Sr=e,0===A&&z($t)),Sr!==e){for(Ar=[],ur=U();ur!==e;)Ar.push(ur),ur=U();Ar!==e&&(ur=Ot())!==e?dr=Sr=[Sr,Ar,ur]:(r=dr,dr=e)}else r=dr,dr=e;if(dr===e&&(dr=null),dr!==e){for(Sr=[],Ar=U();Ar!==e;)Sr.push(Ar),Ar=U();Sr!==e?(41===u.charCodeAt(r)?(Ar=Be,r++):(Ar=e,0===A&&z(Xe)),Ar!==e?($e=function(s,x,C){var _={token:"expression",expressionType:"regex"};return _.text=s,_.pattern=x,null!=C&&(_.flags=C[2]),_}(ut,Cr,dr),Me=$e):(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e}else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return A--,Me===e&&($e=e,0===A&&z(_p)),Me}())===e&&(s=function(){var Me,$e,it,ft;if(A++,Me=r,u.substr(r,6)===fu?($e=fu,r+=6):($e=e,0===A&&z(Lc)),$e===e&&(u.substr(r,6)===cu?($e=cu,r+=6):($e=e,0===A&&z(Ic))),$e!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();it!==e&&(ft=en())!==e?($e=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"exists"};return x.args=[s],x}(ft),Me=$e):(r=Me,Me=e)}else r=Me,Me=e;return A--,Me===e&&($e=e,0===A&&z(Fp)),Me}())===e&&(s=function(){var Me,$e,it,ft,Lt,ut;if(A++,Me=r,"NOT"===u.substr(r,3)?($e="NOT",r+=3):($e=e,0===A&&z(Np)),$e===e&&("not"===u.substr(r,3)?($e="not",r+=3):($e=e,0===A&&z(Lp))),$e!==e){for(it=[],ft=U();ft!==e;)it.push(ft),ft=U();if(it!==e)if(u.substr(r,6)===fu?(ft=fu,r+=6):(ft=e,0===A&&z(Lc)),ft===e&&(u.substr(r,6)===cu?(ft=cu,r+=6):(ft=e,0===A&&z(Ic))),ft!==e){for(Lt=[],ut=U();ut!==e;)Lt.push(ut),ut=U();Lt!==e&&(ut=en())!==e?($e=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return x.args=[s],x}(ut),Me=$e):(r=Me,Me=e)}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return A--,Me===e&&($e=e,0===A&&z(Tp)),Me}())}}}}}}}}}}}}}}return A--,s===e&&(x=e,0===A&&z(Yl)),s}function Cu(){var s,x,C,_,N;return A++,s=r,(x=up())!==e?((C=function(){var R,O,Q,Z,ae,ge,Oe,ze;if(A++,R=r,64===u.charCodeAt(r)?(O="@",r++):(O=e,0===A&&z(ah)),O!==e){if(Q=[],lh.test(u.charAt(r))?(Z=u.charAt(r),r++):(Z=e,0===A&&z(uh)),Z!==e)for(;Z!==e;)Q.push(Z),lh.test(u.charAt(r))?(Z=u.charAt(r),r++):(Z=e,0===A&&z(uh));else Q=e;if(Q!==e){if(Z=[],ae=r,45===u.charCodeAt(r)?(ge=Yr,r++):(ge=e,0===A&&z(Qr)),ge!==e){if(Oe=[],pu.test(u.charAt(r))?(ze=u.charAt(r),r++):(ze=e,0===A&&z(du)),ze!==e)for(;ze!==e;)Oe.push(ze),pu.test(u.charAt(r))?(ze=u.charAt(r),r++):(ze=e,0===A&&z(du));else Oe=e;Oe!==e?ae=ge=[ge,Oe]:(r=ae,ae=e)}else r=ae,ae=e;for(;ae!==e;)if(Z.push(ae),ae=r,45===u.charCodeAt(r)?(ge=Yr,r++):(ge=e,0===A&&z(Qr)),ge!==e){if(Oe=[],pu.test(u.charAt(r))?(ze=u.charAt(r),r++):(ze=e,0===A&&z(du)),ze!==e)for(;ze!==e;)Oe.push(ze),pu.test(u.charAt(r))?(ze=u.charAt(r),r++):(ze=e,0===A&&z(du));else Oe=e;Oe!==e?ae=ge=[ge,Oe]:(r=ae,ae=e)}else r=ae,ae=e;Z!==e?(O=function(s,x){return 0===x.length?("@"+s.join("")).toLowerCase():("@"+s.join("")+"-"+x[0][1].join("")).toLowerCase()}(Q,Z),R=O):(r=R,R=e)}else r=R,R=e}else r=R,R=e;return A--,R===e&&(O=e,0===A&&z(Rd)),R}())===e&&(C=r,"^^"===u.substr(r,2)?(_="^^",r+=2):(_=e,0===A&&z(rd)),_!==e&&(N=yr())!==e?C=_=[_,N]:(r=C,C=e)),C===e&&(C=null),C!==e?s=x=function(s,x){return"string"==typeof x&&x.length>0?{token:"literal",value:s.value,lang:x.slice(1),type:null}:null!=x&&"object"==typeof x?(x.shift(),{token:"literal",value:s.value,lang:null,type:x[0]}):{token:"literal",value:s.value,lang:null,type:null}}(x,C):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(td)),s}function Su(){var s,x;return A++,A++,(x=_c())===e&&(x=kc())===e&&(x=gs()),A--,x===e&&0===A&&z(od),(s=x)===e&&(s=function(){var x,C,_,N;return A++,A++,C=r,43===u.charCodeAt(r)?(_=pn,r++):(_=e,0===A&&z(Lr)),_!==e&&(N=_c())!==e?C=_=fh(N):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(Xd)),(x=C)===e&&(x=function(){var C,_,N;return A++,C=r,43===u.charCodeAt(r)?(_=pn,r++):(_=e,0===A&&z(Lr)),_!==e&&(N=kc())!==e?C=_=fh(N):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(Jd)),C}())===e&&(x=function(){var C,_,N;return A++,C=r,43===u.charCodeAt(r)?(_=pn,r++):(_=e,0===A&&z(Lr)),_!==e&&(N=gs())!==e?(_=function(s){return s.value="+"+s.value,s}(N),C=_):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(zd)),C}()),A--,x===e&&0===A&&z(sd),x}())===e&&(s=La()),A--,s===e&&0===A&&z(id),s}function La(){var s,x,C,_;return A++,A++,x=r,45===u.charCodeAt(r)?(C=Yr,r++):(C=e,0===A&&z(Qr)),C!==e&&(_=_c())!==e?x=C=Kf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Yd)),(s=x)===e&&(s=function(){var x,C,_;return A++,x=r,45===u.charCodeAt(r)?(C=Yr,r++):(C=e,0===A&&z(Qr)),C!==e&&(_=kc())!==e?x=C=Kf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Kd)),x}())===e&&(s=function(){var x,C,_;return A++,x=r,45===u.charCodeAt(r)?(C=Yr,r++):(C=e,0===A&&z(Qr)),C!==e&&(_=gs())!==e?x=C=Kf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Vd)),x}()),A--,s===e&&0===A&&z(ad),s}function Au(){var s,x;return A++,s=r,"TRUE"===u.substr(r,4)?(x="TRUE",r+=4):(x=e,0===A&&z(ud)),x===e&&("true"===u.substr(r,4)?(x="true",r+=4):(x=e,0===A&&z(fd))),x!==e&&(x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(s=x)===e&&(s=r,"FALSE"===u.substr(r,5)?(x="FALSE",r+=5):(x=e,0===A&&z(hd)),x===e&&("false"===u.substr(r,5)?(x="false",r+=5):(x=e,0===A&&z(pd))),x!==e&&(x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),s=x),A--,s===e&&(x=e,0===A&&z(ld)),s}function up(){var s,x;return A++,s=r,(x=function(){var C,_,N,R;if(A++,C=r,u.substr(r,3)===gu?(_=gu,r+=3):(_=e,0===A&&z(yh)),_!==e){for(N=[],mh.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(bh)),R===e&&(R=Si());R!==e;)N.push(R),mh.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(bh)),R===e&&(R=Si());N!==e?(u.substr(r,3)===gu?(R=gu,r+=3):(R=e,0===A&&z(yh)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(sv)),C}())!==e&&(x=hu(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,u.substr(r,3)===yu?(_=yu,r+=3):(_=e,0===A&&z(xh)),_!==e){for(N=[],wh.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(kh)),R===e&&(R=Si());R!==e;)N.push(R),wh.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(kh)),R===e&&(R=Si());N!==e?(u.substr(r,3)===yu?(R=yu,r+=3):(R=e,0===A&&z(xh)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(av)),C}())!==e&&(x=hu(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,39===u.charCodeAt(r)?(_="'",r++):(_=e,0===A&&z(Zf)),_!==e){for(N=[],ch.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(hh)),R===e&&(R=Si());R!==e;)N.push(R),ch.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(hh)),R===e&&(R=Si());N!==e?(39===u.charCodeAt(r)?(R="'",r++):(R=e,0===A&&z(Zf)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(iv)),C}())!==e&&(x=hu(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,34===u.charCodeAt(r)?(_='"',r++):(_=e,0===A&&z(dh)),_!==e){for(N=[],vh.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(gh)),R===e&&(R=Si());R!==e;)N.push(R),vh.test(u.charAt(r))?(R=u.charAt(r),r++):(R=e,0===A&&z(gh)),R===e&&(R=Si());N!==e?(34===u.charCodeAt(r)?(R='"',r++):(R=e,0===A&&z(dh)),R!==e?C=_=vu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(ov)),C}())!==e&&(x=hu(x)),s=x))),A--,s===e&&(x=e,0===A&&z(vd)),s}function yr(){var s,x,C,_,N,R,O;return A++,s=r,(x=Fu())!==e&&(x=function(s){return{token:"uri",prefix:null,suffix:null,value:s}}(x)),(s=x)===e&&(s=r,A++,C=r,A++,N=r,(R=wc())!==e&&(O=hp())!==e?(R=function(s,x){return[s,x]}(R,O),N=R):(r=N,N=e),A--,N===e&&(R=e,0===A&&z(Fd)),(_=N)!==e&&(_=function(s){return{token:"uri",prefix:s[0],suffix:s[1],value:null}}(_)),(C=_)===e&&(C=r,(_=wc())!==e&&(_=function(s){return{token:"uri",prefix:s,suffix:"",value:null}}(_)),C=_),A--,C===e&&(_=e,0===A&&z(md)),s=x=C),A--,s===e&&(x=e,0===A&&z(gd)),s}function Fu(){var s,x,C,_;if(A++,s=r,60===u.charCodeAt(r)?(x="<",r++):(x=e,0===A&&z(Br)),x!==e){for(C=[],eh.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(th));_!==e;)C.push(_),eh.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(th));C!==e?(62===u.charCodeAt(r)?(_=">",r++):(_=e,0===A&&z(ca)),_!==e?s=x=function(s){return s.join("")}(C):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Cd)),s}function wc(){var s,x,C;return A++,s=r,(x=function(){var _,N,R,O;if(A++,_=r,(N=fp())!==e){for(R=[],(O=Eu())===e&&(46===u.charCodeAt(r)?(O=Xt,r++):(O=e,0===A&&z(Ut)));O!==e;)R.push(O),(O=Eu())===e&&(46===u.charCodeAt(r)?(O=Xt,r++):(O=e,0===A&&z(Ut)));R!==e?(N=function(s,x){if("."==x[x.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return s+x.join("")}(N,R),_=N):(r=_,_=e)}else r=_,_=e;return A--,_===e&&(N=e,0===A&&z(ng)),_}())===e&&(x=null),x!==e?(58===u.charCodeAt(r)?(C=":",r++):(C=e,0===A&&z(Aa)),C!==e?s=x:(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Ad)),s}function gs(){var s,x,C;if(A++,r,x=[],Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;return x!==e&&(x=function(s){var x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return x.value=Ai(s),x}(x)),A--,(s=x)===e&&(x=e,0===A&&z(Dd)),s}function kc(){var s,x,C,_,N;if(A++,s=r,x=[],Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;if(x!==e)if(46===u.charCodeAt(r)?(C=Xt,r++):(C=e,0===A&&z(Ut)),C!==e){for(_=[],Kt.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Yt));N!==e;)_.push(N),Kt.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Yt));_!==e?s=x=function(s,x,C){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return _.value=Ai([s,x,C]),_}(x,C,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e)if(s=r,46===u.charCodeAt(r)?(x=Xt,r++):(x=e,0===A&&z(Ut)),x!==e){if(C=[],Kt.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Yt)),_!==e)for(;_!==e;)C.push(_),Kt.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Yt));else C=e;C!==e?s=x=function(s,x){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return C.value=Ai([s,x]),C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Pd)),s}function _c(){var s,x,C,_,N;if(A++,s=r,x=[],Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;if(x!==e)if(46===u.charCodeAt(r)?(C=Xt,r++):(C=e,0===A&&z(Ut)),C!==e){for(_=[],Kt.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Yt));N!==e;)_.push(N),Kt.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Yt));_!==e&&(N=Cc())!==e?s=x=function(s,x,C,_){var N={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return N.value=Ai([s,x,C,_]),N}(x,C,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){if(s=r,46===u.charCodeAt(r)?(x=Xt,r++):(x=e,0===A&&z(Ut)),x!==e){if(C=[],Kt.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Yt)),_!==e)for(;_!==e;)C.push(_),Kt.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Yt));else C=e;C!==e&&(_=Cc())!==e?s=x=function(s,x,C){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return _.value=Ai([s,x,C]),_}(x,C,_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,x=[],Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;x!==e&&(C=Cc())!==e?s=x=function(s,x){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return C.value=Ai([s,x]),C}(x,C):(r=s,s=e)}}return A--,s===e&&(x=e,0===A&&z(Ud)),s}function Cc(){var s,x,C,_,N;if(A++,s=r,$d.test(u.charAt(r))?(x=u.charAt(r),r++):(x=e,0===A&&z(ev)),x!==e)if(tv.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(rv)),C===e&&(C=null),C!==e){if(_=[],Kt.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Yt)),N!==e)for(;N!==e;)_.push(N),Kt.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Yt));else _=e;_!==e?s=x=function(s,x,C){return Ai([s,x,C])}(x,C,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Zd)),s}function Si(){var s,x,C;return A++,s=r,92===u.charCodeAt(r)?(x="\\",r++):(x=e,0===A&&z(Ch)),x!==e?(uv.test(u.charAt(r))?(C=u.charAt(r),r++):(C=e,0===A&&z(fv)),C!==e?s=x=[x,C]:(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(lv)),s}function ri(){var s,x,C,_;if(A++,s=r,40===u.charCodeAt(r)?(x=P,r++):(x=e,0===A&&z(Y)),x!==e){for(C=[],_=U();_!==e;)C.push(_),_=U();C!==e?(41===u.charCodeAt(r)?(_=Be,r++):(_=e,0===A&&z(Xe)),_!==e?s=x={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(cv)),s}function U(){var s;return A++,dv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(vv)),s===e&&(gv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(yv)),s===e&&(mv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(bv)),s===e&&(xv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(wv)),s===e&&(s=function(){var x,C,_,N;if(A++,x=r,35===u.charCodeAt(r)?(C="#",r++):(C=e,0===A&&z(Ah)),C!==e){for(_=[],Fh.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Eh));N!==e;)_.push(N),Fh.test(u.charAt(r))?(N=u.charAt(r),r++):(N=e,0===A&&z(Eh));_!==e?x=C=[C,_]:(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(kv)),x}())))),A--,s===e&&0===A&&z(pv),s}function fp(){var s;return A++,Sv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Av)),s===e&&(Fv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Ev)),s===e&&(Tv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Nv)),s===e&&(Lv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Iv)),s===e&&(Ov.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Rv)),s===e&&(jv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Dv)),s===e&&(Mv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Pv)),s===e&&(Bv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Qv)),s===e&&(Uv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Gv)),s===e&&(Hv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Wv)),s===e&&(zv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(qv)),s===e&&(Jv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Xv)),s===e&&(Vv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Kv)),s===e&&(Yv.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Zv))))))))))))))),A--,s===e&&0===A&&z(Cv),s}function Ia(){var s;return A++,(s=fp())===e&&(95===u.charCodeAt(r)?(s="_",r++):(s=e,0===A&&z(Nh))),A--,s===e&&0===A&&z($v),s}function cp(){var s,x,C,_;if(A++,s=r,(x=Ia())===e&&(Kt.test(u.charAt(r))?(x=u.charAt(r),r++):(x=e,0===A&&z(Yt))),x!==e){for(C=[],(_=Ia())===e&&(Kt.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Yt)),_===e&&($f.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(ec)),_===e&&(tc.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(rc)),_===e&&(nc.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(ic))))));_!==e;)C.push(_),(_=Ia())===e&&(Kt.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(Yt)),_===e&&($f.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(ec)),_===e&&(tc.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(rc)),_===e&&(nc.test(u.charAt(r))?(_=u.charAt(r),r++):(_=e,0===A&&z(ic))))));C!==e?s=x=function(s,x){return s+x.join("")}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(eg)),s}function Eu(){var s;return A++,(s=Ia())===e&&(45===u.charCodeAt(r)?(s=Yr,r++):(s=e,0===A&&z(Qr)),s===e&&(Kt.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Yt)),s===e&&($f.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(ec)),s===e&&(tc.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(rc)),s===e&&(nc.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(ic))))))),A--,s===e&&0===A&&z(rg),s}function hp(){var s,x,C,_;if(A++,s=r,(x=Ia())===e&&(Kt.test(u.charAt(r))?(x=u.charAt(r),r++):(x=e,0===A&&z(Yt)),x===e&&(58===u.charCodeAt(r)?(x=":",r++):(x=e,0===A&&z(Aa)),x===e&&(x=Sc()))),x!==e){for(C=[],(_=Eu())===e&&(46===u.charCodeAt(r)?(_=Xt,r++):(_=e,0===A&&z(Ut)),_===e&&(58===u.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(Aa)),_===e&&(_=Sc())));_!==e;)C.push(_),(_=Eu())===e&&(46===u.charCodeAt(r)?(_=Xt,r++):(_=e,0===A&&z(Ut)),_===e&&(58===u.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(Aa)),_===e&&(_=Sc())));C!==e?s=x=function(s,x){return s+(x||[]).join("")}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(og)),s}function Sc(){var s,x,C,_,N,R;return A++,A++,C=r,37===u.charCodeAt(r)?(_="%",r++):(_=e,0===A&&z(Ih)),_!==e&&(N=pp())!==e&&(R=pp())!==e?C=_=[_,N,R]:(r=C,C=e),C!==e&&(C=function(s){return s.join("")}(C)),A--,(x=C)===e&&(C=e,0===A&&z(lg)),(s=x)===e&&(s=function(){var x,C,_;return A++,x=r,92===u.charCodeAt(r)?(C="\\",r++):(C=e,0===A&&z(Ch)),C!==e?(95===u.charCodeAt(r)?(_="_",r++):(_=e,0===A&&z(Nh)),_===e&&(126===u.charCodeAt(r)?(_="~",r++):(_=e,0===A&&z(yg)),_===e&&(46===u.charCodeAt(r)?(_=Xt,r++):(_=e,0===A&&z(Ut)),_===e&&(45===u.charCodeAt(r)?(_=Yr,r++):(_=e,0===A&&z(Qr)),_===e&&(33===u.charCodeAt(r)?(_="!",r++):(_=e,0===A&&z(es)),_===e&&(36===u.charCodeAt(r)?(_="$",r++):(_=e,0===A&&z(oh)),_===e&&(38===u.charCodeAt(r)?(_="&",r++):(_=e,0===A&&z(bg)),_===e&&(39===u.charCodeAt(r)?(_="'",r++):(_=e,0===A&&z(Zf)),_===e&&(40===u.charCodeAt(r)?(_=P,r++):(_=e,0===A&&z(Y)),_===e&&(41===u.charCodeAt(r)?(_=Be,r++):(_=e,0===A&&z(Xe)),_===e&&(42===u.charCodeAt(r)?(_=ot,r++):(_=e,0===A&&z(ct)),_===e&&(43===u.charCodeAt(r)?(_=pn,r++):(_=e,0===A&&z(Lr)),_===e&&(44===u.charCodeAt(r)?(_=Zt,r++):(_=e,0===A&&z($t)),_===e&&(59===u.charCodeAt(r)?(_=nr,r++):(_=e,0===A&&z(nn)),_===e&&(58===u.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(Aa)),_===e&&(61===u.charCodeAt(r)?(_="=",r++):(_=e,0===A&&z(Pr)),_===e&&(47===u.charCodeAt(r)?(_="/",r++):(_=e,0===A&&z(hn)),_===e&&(63===u.charCodeAt(r)?(_="?",r++):(_=e,0===A&&z(Yo)),_===e&&(35===u.charCodeAt(r)?(_="#",r++):(_=e,0===A&&z(Ah)),_===e&&(64===u.charCodeAt(r)?(_="@",r++):(_=e,0===A&&z(ah)),_===e&&(37===u.charCodeAt(r)?(_="%",r++):(_=e,0===A&&z(Ih)))))))))))))))))))))),_!==e?(C=function(s){return"\\"+s}(_),x=C):(r=x,x=e)):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(vg)),x}()),A--,s===e&&0===A&&z(ag),s}function pp(){var s;return A++,Kt.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(Yt)),s===e&&(cg.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(hg)),s===e&&(pg.test(u.charAt(r))?(s=u.charAt(r),r++):(s=e,0===A&&z(dg)))),A--,s===e&&0===A&&z(fg),s}var Ai=function(s){for(var x="",C=0;C<s.length;C++)"string"==typeof s[C]?x+=s[C]:x+=s[C].join("");return x},Hr=0,dp={},kg=function(s,x){dp[s]=x},_g=function(s){dp.null=s},vp=function(s){var x="";if(null==s)return null;for(var C=0;C<s.length;C++)x+=s[C];return x.toUpperCase()};if((v=l())!==e&&r===u.length)return v;throw v!==e&&r<u.length&&z({type:"end"}),function wg(s,x,C){return new q(q.buildMessage(s,x),s,x,C)}(oc,Rn<u.length?u.charAt(Rn):null,Rn<u.length?Rh(Rn,Rn+1):Rh(Rn,Rn))}}}()},{}],129:[function(J,re,le){J("./btree").Tree;var q=J("./utils"),u=q,F=J("./lexicon").Lexicon;PersistentLexicon=function(v,e){var o=this;q.registerIndexedDB(o),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,o.dbName=e||"rdfstorejs";var l=o.indexedDB.open(this.dbName+"_lexicon",1);l.onerror=function(d){v(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},l.onsuccess=function(d){o.db=d.target.result,v(o)},l.onupgradeneeded=function(d){o.db=d.target.result,o.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),o.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(v,e,o){if(v!=this.defaultGraphOid){var l=this.db.transaction(["knownGraphs"],"readwrite");l.onerror=function(m){o(null,new Error(m.target.statusCode))};var d=l.objectStore("knownGraphs");d.get(e).onsuccess=function(m){m.target.result?o(!0):d.add({oid:v,uriToken:e}).onsuccess=function(c){o(!0)}}}else o()},PersistentLexicon.prototype.registeredGraphs=function(v,e){var o=[],l=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();l.onsuccess=function(d){var m=d.target.result;m?(!0===v?o.push(m.value.uriToken):o.push(m.value.oid),m.continue()):e(o)},l.onerror=function(d){e(null,new Error("Error retrieving data from the cursor: "+d.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(v,e){if(v===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"],"readwrite").objectStore("components"),l=o.index("value").get("_u:"+v);l.onsuccess=function(d){var m=d.target.result;if(m){m.counter++;var c=m.id,k=o.put(m);k.onsuccess=function(f){e(c)},k.onerror=function(f){e(null,new Error("Error updating the URI data"+f.target.errorCode))}}else{var y=o.add({value:"_u:"+v,counter:0,uri:!0});y.onsuccess=function(f){e(f.target.result)},y.onerror=function(f){e(null,new Error("Error inserting the URI data"+f.target.errorCode))}}},l.onerror=function(d){e(null,new Error("Error retrieving the URI data"+d.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(v,e){if(v===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+v);o.onsuccess=function(l){null!=l.target.result?e(l.target.result.id):e(-1)},o.onerror=function(l){e(null,new Error("Error retrieving uri data "+l.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(v,e){if(v===this.defaultGraphUri)e(0);else{var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+v);o.onsuccess=function(l){null!=l.target.result?e(l.target.result.cost):e(-1)},o.onerror=function(l){e(null,new Error("Error retrieving uri data "+l.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(v){var e=guid(),o=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});o.onsuccess=function(l){v(l.target.result)},o.onerror=function(l){v(null,new Error("Error inserting the URI data"+l.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(v,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(v,e){var o=this.db.transaction(["components"],"readwrite").objectStore("components"),l=o.index("value").get("_l:"+v);l.onsuccess=function(d){var m=d.target.result;if(m){m.counter++;var c=m.id,k=o.put(m);k.onsuccess=function(f){e(c)},k.onerror=function(f){e(null,new Error("Error updating the literal data"+f.target.errorCode))}}else{var y=o.add({value:"_l:"+v,counter:0,literal:!0});y.onsuccess=function(f){e(f.target.result)},y.onerror=function(f){e(null,new Error("Error inserting the literal data"+f.target.errorCode))}}},l.onerror=function(d){e(null,new Error("Error retrieving the literal data"+d.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(v,e){var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+v);o.onsuccess=function(l){null!=l.target.result?e(l.target.result.id):e(-1)},o.onerror=function(l){e(null,new Error("Error retrieving literal data "+l.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(v,e){var o=that.db.transaction(["components"]).objectStore("components").index("components").get(v);o.onsuccess=function(l){null!=l.target.result?e(l.target.result.cost):e(-1)},o.onerror=function(l){e(null,new Error("Error retrieving literal data "+l.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(v){return F.prototype.parseLiteral(v)},PersistentLexicon.prototype.parseUri=function(v){return F.prototype.parseUri(v)},PersistentLexicon.prototype.retrieve=function(v,e){var o,l=this;v===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((o=l.db.transaction(["components"]).objectStore("components").get(v)).onsuccess=function(d){if(null!=d.target.result)if(null!=d.target.result.label){var m="_:"+d.target.result.id;e({token:"blank",value:m})}else null!=d.target.result.uri?e(l.parseUri(d.target.result.value.slice(3,d.target.result.value.length))):null!=d.target.result.literal?e(l.parseLiteral(d.target.result.value.slice(3,d.target.result.value.length))):(console.log(d.target.result),e(null,new Error("Unknown type of component "+d.target.result)));else e(null,null)},o.onerror=function(d){e(null,new Error("Error searching in blanks data "+d.target.errorCode))})},PersistentLexicon.prototype.clear=function(v){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,o=function(){null!=v&&v()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=o,e.onerror=o},PersistentLexicon.prototype.unregister=function(v,e,o){var l=this;u.seq(function(d){l._unregisterTerm(v.subject.token,e.subject,d)},function(d){l._unregisterTerm(v.predicate.token,e.predicate,d)},function(d){l._unregisterTerm(v.object.token,e.object,d)},function(d){null!=v.graph?l._unregisterTerm(v.graph.token,e.graph,d):d()})(function(){o(!0)})},PersistentLexicon.prototype._unregisterTerm=function(v,e,o){var l=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===v?e!=this.defaultGraphOid?l.objectStore("components").delete(e).onsuccess=void(l.objectStore("knownGraphs").delete(e).onsuccess=function(){o()}):o():l.objectStore("components").delete(e).onsuccess=function(){o()}},re.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(J,re,le){var q=J("./utils");PersistentQuadBackend=function(u,F){var v=this;if(0!==arguments){for(var e in q.registerIndexedDB(v),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var o=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[o]=e}v.dbName=u.name||"rdfstorejs";var l=v.indexedDB.open(this.dbName+"_db",1);l.onerror=function(d){F(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},l.onsuccess=function(d){v.db=d.target.result,F(v)},l.onupgradeneeded=function(d){var m=d.target.result.createObjectStore(v.dbName,{keyPath:"SPOG"});q.each(v.indices,function(c){"SPOG"!==c&&m.createIndex(c,c,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(u,F){var v=this;q.each(this.indices,function(o){u[o]=v._genMinIndexKey(u,o)});var e=v.db.transaction([v.dbName],"readwrite");e.oncomplete=function(o){},e.onerror=function(o){F(null,new Error(o.target.statusCode))},e.objectStore(v.dbName).add(u).onsuccess=function(o){F(!0)}},PersistentQuadBackend.prototype.range=function(u,F){var v=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._indexForPattern(u),o=this._genMinIndexKey(u,e),l=this._genMaxIndexKey(u,e),d=this.IDBKeyRange.bound(o,l,!1,!1),m=[];("SPOG"===e?v:v.index(e)).openCursor(d).onsuccess=function(c){var k=c.target.result;k?(m.push(k.value),k.continue()):F(m)}},PersistentQuadBackend.prototype.search=function(u,F){var v=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._genMinIndexKey(u,"SPOG"),o=v.get(e);o.onerror=function(l){F(null,new Error(l.target.statusCode))},o.onsuccess=function(l){F(null!=l.target.result)}},PersistentQuadBackend.prototype.delete=function(u,F){var v=this._genMinIndexKey(u,"SPOG"),e=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(v);e.onsuccess=function(){F(!0)},e.onerror=function(o){F(null,new Error(o.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(u,F){var v=this.componentOrders[F];return q.map(v,function(e){return"string"==typeof u[e]||null==u[e]?"0":u[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(u,F){for(var v=this.componentOrders[F],e=[],o=0;o<v.length;o++){var l=u[v[o]];e[o]="string"==typeof l?"z":l}return q.map(e,function(d){return""+d}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(u){var F=u.indexKey.sort().join("."),v=this.componentOrdersMap[F];if(null==v)throw new Error("Error, cannot find index for indexKey "+F);return v},PersistentQuadBackend.prototype.clear=function(u){var F;(F=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){u()},F.onerror=function(){u()}},re.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(J,re,le){var q=J("./quad_index").QuadIndex,u=J("./utils");QuadBackend=function(F,v){this.indexMap={},this.treeOrder=F.treeOrder,this.indices=F.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;u.eachSeries(this.indices,function(o,l){new q({order:e.treeOrder,componentOrder:e.componentOrders[o]},function(d){e.indexMap[o]=d,l()})},function(){v(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(F){for(var v=F.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var o=QuadBackend.allIndices[e],l=QuadBackend.componentOrders[o],d=0;d<l.length&&!1!==u.include(v,l[d]);d++)if(d==v.length-1)return o;return"SPOG"},QuadBackend.prototype.index=function(F,v){var e=this;u.eachSeries(this.indices,function(o,l){e.indexMap[o].insert(F,function(){l()})},function(){v(!0)})},QuadBackend.prototype.range=function(F,v){var e=this._indexForPattern(F),o=this.indexMap[e];null!=o&&o.range(F,function(l){v(l)})},QuadBackend.prototype.search=function(F,v){var e=this.indexMap.SPOG;null!=e&&e.search(F,function(o){v(null!=o)})},QuadBackend.prototype.delete=function(F,v){var e=this;u.eachSeries(this.indices,function(o,l){e.indexMap[o].delete(F,function(){l()})},function(){v(!0)})},QuadBackend.prototype.clear=function(F){var v=this;u.eachSeries(this.indices,function(e,o){new q({order:v.treeOrder,componentOrder:v.componentOrders[e]},function(l){v.indexMap[e]=l,o()})},function(){F(!0)})},re.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(J,re,le){var q=J("./btree").Tree,u=J("./utils"),F=J("./utils");NodeKey=function(v,e){this.subject=v.subject,this.predicate=v.predicate,this.object=v.object,this.graph=v.graph,this.order=e},NodeKey.prototype.comparator=function(v){for(var e=0;e<this.order.length;e++){var o=this.order[e];if(null==v[o])return 0;if(this[o]<v[o])return-1;if(this[o]>v[o])return 1}return 0},Pattern=function(v){this.subject=v.subject,this.predicate=v.predicate,this.object=v.object,this.graph=v.graph,this.indexKey=[],this.keyComponents={};var e=[],o=[],l=this;u.forEach(["subject","predicate","object","graph"],function(d){"string"==typeof l[d]?(o.push(d),l.keyComponents[d]=null):(e.push(d),l.keyComponents[d]=l[d],l.indexKey.push(d))}),this.order=e.concat(o),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(v,e){0!=arguments&&(this.componentOrder=v.componentOrder,q.call(this,v.order,function(o){o.comparator=function(l,d){for(var m=0;m<o.componentOrder.length;m++){var c=o.componentOrder[m],k=l[c],y=d[c];if(k<y)return-1;if(k>y)return 1}return 0},o.rangeComparator=function(l,d){for(var m=0;m<o.componentOrder.length;m++){var c=o.componentOrder[m];if(null==d[c]||null==l[c])return 0;if(l[c]<d[c])return-1;if(l[c]>d[c])return 1}return 0},e(o)}))},QuadIndex.prototype=u.create(q.prototype,{constructor:q}),QuadIndex.prototype.insert=function(v,e){q.prototype.insert.call(this,v,null,function(o){e(o)})},QuadIndex.prototype.search=function(v,e){q.prototype.search.call(this,v,function(o){e(o)},!0)},QuadIndex.prototype.range=function(v,e){this._rangeTraverse(this,this.root,v,e)},QuadIndex.prototype._rangeTraverse=function(v,e,o,l){var d=o.key,m=[],c=[e];F.whilst(function(){return c.length>0},function(k){for(var y=c.shift(),f=0;f<y.numberActives&&-1===v.rangeComparator(y.keys[f].key,d);)f++;if(!0===y.isLeaf){for(var w=f;w<y.numberActives&&0===v.rangeComparator(y.keys[w].key,d);)m.push(y.keys[w].key),w++;k()}else v._diskRead(y.children[f],function(T){c.push(T);var I=f;F.whilst(function(){return I<y.numberActives&&0===v.rangeComparator(y.keys[I].key,d)},function(W){m.push(y.keys[I].key),I++,v._diskRead(y.children[I],function(B){c.push(B),W()})},function(){k()})})},function(){l(m)})},re.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(J,re,le){var q=J("./abstract_query_tree").AbstractQueryTree,u=J("./abstract_query_tree").NonSupportedSparqlFeatureError,F=J("./utils"),v=J("./quad_index"),e=J("./query_plan").QueryPlan,o=J("./query_filters").QueryFilters,l=J("./rdf_model"),d=J("./rdf_loader").RDFLoader,m=J("./graph_callbacks").CallbacksBackend,c=J("./utils"),k=J("./utils");function y(f,w,T){this.name="BindExpressionError",this.bind=w,this.error=T,this.message=f}y.prototype=new Error,y.constructor=y,QueryEngine=function(f){0!=arguments.length&&(this.backend=f.backend,this.lexicon=f.lexicon,this.eventsOnBatchLoad=f.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new q,this.rdfLoader=new d(f.communication),this.callbacksBackend=new m(this),this.customFns=f.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(f){this.customFns=f},QueryEngine.prototype.registerNsInEnvironment=function(f,w){var T=[];null!=f&&null!=f.prefixes&&(T=f.prefixes);var I={};for(var W in this.defaultPrefixes)I[W]=this.defaultPrefixes[W];for(var B=0;B<T.length;B++){var L=T[B];"prefix"===L.token&&(I[L.prefix]=L.local)}w.namespaces=I,null!=f&&f.base&&"object"==typeof f.base?w.base=f.base.value:w.base=null},QueryEngine.prototype.applyModifier=function(f,w){if("DISTINCT"==f){for(var T={},I=[],W=0;W<w.length;W++){var B=w[W],L="";for(var E in B){var D=B[E];null==D?L=L+E+"null":"literal"==D.token?(null!=D.value&&(L+=D.value),null!=D.lang&&(L+=D.lang),null!=D.type&&(L+=D.type)):L=D.value?L+E+D.value:L+E+D}null==T[L]&&(I.push(B),T[L]=!0)}return I}return w},QueryEngine.prototype.applyLimitOffset=function(f,w,T){return null==w&&null==f?T:(null==f&&(f=0),w=null==w?T.length:f+w,T.slice(f,w))},QueryEngine.prototype.applySingleOrderBy=function(f,w,T,I,W){var B=[],L=this;c.eachSeries(f,function(E,D){o.collect(E.expression,[w],T,I,L,function(G){B.push(G[0].value),D()})},function(){W({binding:w,value:B})})},QueryEngine.prototype.applyOrderBy=function(f,w,T,I,W){var B=this,L=[];null!=f&&f.length>0?c.eachSeries(w,function(E,D){B.applySingleOrderBy(f,E,T,I,function(G){L.push(G),D()})},function(){L.sort(function(G,K){return B.compareFilteredBindings(G,K,f,I)});for(var E=[],D=0;D<L.length;D++)E.push(L[D].binding);W(E)}):W(w)},QueryEngine.prototype.compareFilteredBindings=function(f,w,T,I){for(var W=0;;){if(W==f.value.length)return 0;var B,L=T[W].direction;if(null!=f.value[W]||null!=w.value[W]){if(null==f.value[W])B={value:!1};else if(null==w.value[W])B={value:!0};else{if("blank"===f.value[W].token&&"blank"===w.value[W].token){W++;continue}if("blank"===f.value[W].token)B={value:!1};else if("blank"===w.value[W].token)B={value:!0};else if("uri"===f.value[W].token&&"uri"===w.value[W].token){if(1==o.runEqualityFunction(f.value[W],w.value[W],[],this,I).value){W++;continue}B=o.runTotalGtFunction(f.value[W],w.value[W],[])}else if("uri"===f.value[W].token)B={value:!1};else if("uri"===w.value[W].token)B={value:!0};else if("literal"===f.value[W].token&&"literal"===w.value[W].token&&null==f.value[W].type&&null==w.value[W].type){if(1==o.runEqualityFunction(f.value[W],w.value[W],[],this,I).value){W++;continue}B=o.runTotalGtFunction(f.value[W],w.value[W],[])}else if("literal"===f.value[W].token&&null==f.value[W].type)B={value:!1};else if("literal"===w.value[W].token&&null==w.value[W].type)B={value:!0};else{if(1==o.runEqualityFunction(f.value[W],w.value[W],[],this,I).value){W++;continue}B=o.runTotalGtFunction(f.value[W],w.value[W],[])}}return 1==B.value?"ASC"===L?1:-1:"ASC"===L?-1:1}W++}},QueryEngine.prototype.removeDefaultGraphBindings=function(f,w){for(var T=[],I={},W=0;W<w.named.length;W++)I[w.named[W].oid]=!0;for(W=0;W<w.implicit.length;W++)null==I[w.implicit[W].oid]&&T.push(w.implicit[W].oid);var B=[];for(W=0;W<f.length;W++){var L=f[W],E=!1;for(var D in L){for(var G=0;G<I.length;G++)if(L[D]===I[G]){E=!0;break}if(E)break}E||B.push(L)}return B},QueryEngine.prototype.aggregateBindings=function(f,w,T,I,W){this.copyDenormalizedBindings(w,I.outCache,function(B){for(var L={},E=0;E<f.length;E++){var D=o.runAggregator(f[E],B,this,T,I);f[E].alias?L[f[E].alias.value]=D:L[f[E].value.value]=D}W(L)})},QueryEngine.prototype.projectBindings=function(f,w,T){if("*"===f[0].kind)return w;for(var I=[],W=0;W<w.length;W++){for(var B=w[W],L={},E=!0,D=0;D<f.length;D++)if("variable"==f[D].token&&"aliased"!=f[D].kind)L[f[D].value.value]=B[f[D].value.value];else if("variable"==f[D].token&&"aliased"==f[D].kind){var G=o.runFilter(f[D].expression,B,this,T,{blanks:{},outCache:{}});if(o.isEbvError(G)){E=!1;break}L[f[D].alias.value]=G}!0===E&&I.push(L)}return I},QueryEngine.prototype.resolveNsInEnvironment=function(f,w){return w.namespaces[f]},QueryEngine.prototype.normalizeTerm=function(f,w,T,I){if("uri"===f.token){var W=F.lexicalFormBaseUri(f,w);null==W?I(null):T?this.lexicon.registerUri(W,I):this.lexicon.resolveUri(W,I)}else if("literal"===f.token){var B=F.lexicalFormLiteral(f,w);T?this.lexicon.registerLiteral(B,I):this.lexicon.resolveLiteral(B,I)}else if("blank"===f.token){var L=f.value,E=w.blanks[L];null!=E?I(E):T?this.lexicon.registerBlank(function(D){w.blanks[L]=D,I(D)}):this.lexicon.resolveBlank(function(D){w.blanks[L]=D,I(D)})}else"var"===f.token?I(f.value):I(null)},QueryEngine.prototype.normalizeDatasets=function(f,w,T){var I=this;c.eachSeries(f,function(W,B){W.value===I.lexicon.defaultGraphUri?(W.oid=I.lexicon.defaultGraphOid,B()):I.normalizeTerm(W,w,!1,function(L){null!=L&&(W.oid=L),B()})},function(){T(!0)})},QueryEngine.prototype.normalizeQuad=function(f,w,T,I){var W=null,B=null,L=null,E=null,D=this,G=!1;c.seq(function(K){if(null==f.graph||f.graph.value===D.lexicon.defaultGraphUri)E=0,K();else{var H=F.lexicalFormBaseUri(f.graph,w);D.normalizeTerm(f.graph,w,T,function(ie){null!=ie?(E=ie,!0===T&&"var"!=f.graph.token?D.lexicon.registerGraph(ie,H,function(){K()}):K()):(G=!0,K())})}},function(K){!1===G?D.normalizeTerm(f.subject,w,T,function(H){null!=H?(W=H,K()):(G=!0,K())}):K()},function(K){!1===G?D.normalizeTerm(f.predicate,w,T,function(H){null!=H?(B=H,K()):(G=!0,K())}):K()},function(K){!1===G?D.normalizeTerm(f.object,w,T,function(H){null!=H?(L=H,K()):(G=!0,K())}):K()})(function(){I(!0===G?null:{subject:W,predicate:B,object:L,graph:E})})},QueryEngine.prototype.denormalizeBindingsList=function(f,w,T){var I=this,W=[];c.eachSeries(f,function(B,L){I.denormalizeBindings(B,w,function(E){W.push(E),L()})},function(){T(W)})},QueryEngine.prototype.copyDenormalizedBindings=function(f,w,T){var I=this,W=[];c.eachSeries(f,function(B,L){var E={},D=k.keys(B);c.eachSeries(D,function(G,K){var H=B[G];if(null==H)E[G]=null,K();else if("object"==typeof H)E[G]=H,K();else{var ie=w[H];null!=ie?(E[G]=ie,K()):I.lexicon.retrieve(H,function(ue){w[H]=ue,E[G]=ue,K()})}},function(){W.push(E),L()})},function(){T(W)})},QueryEngine.prototype.denormalizeBindings=function(f,w,T){var I=k.keys(f),W=w.outCache,B=this;c.eachSeries(I,function(L,E){var D=f[L];null==D?(f[L]=null,E()):"object"==typeof D?E():null!=W[D]?(f[L]=W[D],E()):B.lexicon.retrieve(D,function(G){f[L]=G,"blank"===G.token&&(w.blanks[G.value]=D),E()})},function(){T(f)})},QueryEngine.prototype.execute=function(f,w,T,I){f=F.normalizeUnicodeLiterals(f);var W=this.abstractQueryTree.parseQueryString(f);if(null==W)w(!1,"Error parsing query string");else if("query"===W.token&&"update"==W.kind){this.callbacksBackend.startGraphModification();var B=this;this.executeUpdate(W,function(L,E){B.lexicon.updateAfterWrite&&B.lexicon.updateAfterWrite(),L?(B.callbacksBackend.cancelGraphModification(),w(L,E)):B.callbacksBackend.endGraphModification(function(){w(L,E)})})}else"query"===W.token&&"query"==W.kind&&this.executeQuery(W,w,T,I)},QueryEngine.prototype.executeQuery=function(f,w,T,I){var W=f.prologue,B=f.units,L=this,E={blanks:{},outCache:{}};this.registerNsInEnvironment(W,E);var D=L.abstractQueryTree.parseExecutableUnit(B[0]);"select"===D.kind?this.executeSelect(D,E,T,I,function(G,K){null==G?"object"==typeof K&&!0===K.denorm?w(null,K.bindings):L.denormalizeBindingsList(K,E,function(H){w(null,H)}):w(G)}):"ask"===D.kind?(D.projection=[{token:"variable",kind:"*"}],this.executeSelect(D,E,T,I,function(G,K){null==G?K.length>0?w(null,!0):w(null,!1):w(G)})):"construct"===D.kind&&(D.projection=[{token:"variable",kind:"*"}],L=this,this.executeSelect(D,E,T,I,function(G,K){null==G?L.denormalizeBindingsList(K,E,function(H){if(null!=H){var ie=new l.Graph;null==D.template&&(D.template={triplesContext:D.pattern});for(var ue=1,ce=[],xe=0;xe<H.length;xe++){for(var oe=H[xe],fe=0;fe<ce.length;fe++)delete ce[fe].valuetmp;for(fe=0;fe<D.template.triplesContext.length;fe++){for(var ee=["subject","predicate","object"],de=D.template.triplesContext[fe],ve=0;ve<ee.length;ve++){var Fe=ee[ve];if("blank"===de[Fe].token&&(!de[Fe].valuetmp||null==de[Fe].valuetmp)){var Ne="_:b"+ue;ue++,de[Fe].valuetmp=Ne,ce.push(de[Fe])}}var Se=l.buildRDFResource(de.subject,oe,L,E),be=(ve=l.buildRDFResource(de.predicate,oe,L,E),l.buildRDFResource(de.object,oe,L,E));if(null!=Se&&null!=ve&&null!=be){var Pe=new l.Triple(Se,ve,be);ie.add(Pe)}}}w(null,ie)}else w(new Error("Error denormalizing bindings."))}):w(G)}))},QueryEngine.prototype.executeSelect=function(f,w,T,I,W){if("select"===f.kind||"ask"===f.kind||"construct"===f.kind||"modify"===f.kind){var B=f.projection,L=f.dataset,E=f.modifier,D=f.limit,G=f.offset,K=f.order,H=this;null==T&&null==I||(L.implicit=T||[],L.named=I||[]),null!=L.implicit&&0===L.implicit.length&&null!=L.named&&0===L.named.length&&L.implicit.push(this.lexicon.defaultGraphUriTerm),H.normalizeDatasets(L.implicit.concat(L.named),w,function(){try{H.executeSelectUnit(B,L,f.pattern,w,function(ie){if(null!=ie){if(null!=f.group&&""===f.group){for(var ue=!1,ce=0;ce<f.projection.length;ce++)if(null!=f.projection[ce].expression&&"aggregate"===f.projection[ce].expression.expressionType){ue=!0;break}!0===ue&&(f.group="singleGroup")}f.group&&""!=f.group?H.checkGroupSemantics(f.group,B)?H.groupSolution(ie,f.group,L,w,function(xe){var oe=[];c.eachSeries(xe,function(fe,ee){H.aggregateBindings(B,fe,L,w,function(de){oe.push(de),ee()})},function(){W(null,{bindings:oe,denorm:!0})})}):W(new Error("Incompatible Group and Projection variables")):H.applyOrderBy(K,ie,L,w,function(xe){var oe=H.projectBindings(B,xe,L),fe=H.applyModifier(E,oe),ee=H.applyLimitOffset(G,D,fe),de=H.removeDefaultGraphBindings(ee,L);W(null,de)})}else W(new Error("Error executing SELECT query."))})}catch(ie){W(ie)}})}else W(new Error("Cannot execute "+f.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(f,w,T,I,W){var B=[],L=[],E=!1,D=this;"singleGroup"===w?W([f]):c.eachSeries(f,function(G,K){var H=!0;c.eachSeries(w,function(ie,ue){var ce=null;if("var"===ie.token)ce=ie.value,0==E&&B.push(ce),ue();else if("aliased_expression"===ie.token){if(ce=ie.alias.value,0==E&&B.push(ce),"var"===ie.expression.primaryexpression)G[ie.alias.value]=G[ie.expression.value.value];else{var xe=D.copyDenormalizedBindings([G],I.outCache),oe=o.runFilter(ie.expression,xe[0],D,T,I);o.isEbvError(oe)?H=!1:(null!=oe.value&&(oe.value=""+oe.value),G[ie.alias.value]=oe)}ue()}else D.copyDenormalizedBindings([G],I.outCache,function(fe){var ee=o.runFilter(ie,fe[0],D,I);o.isEbvError(ee)?H=!1:(G["groupCondition"+env._i]=ee,ce="groupCondition"+env._i,0==E&&B.push(ce)),ue()})},function(){0==E&&(E=!0),!0===H&&L.push(G),K()})},function(){for(var G={},K={},H=0;H<L.length;H++){for(var ie=L[H],ue="",ce=0;ce<B.length;ce++){var xe=ie[B[ce]];ue+="object"==typeof xe?xe.value:xe}null==G[ue]?(K[ue]=0,G[ue]=[ie]):G[ue].push(ie)}var oe=[];for(var fe in G)oe.push(G[fe]);W(oe)})},QueryEngine.prototype.executeSelectUnit=function(f,w,T,I,W){if("BGP"===T.kind)this.executeAndBGP(f,w,T,I,W);else if("UNION"===T.kind)this.executeUNION(f,w,T.value,I,W);else if("JOIN"===T.kind)this.executeJOIN(f,w,T,I,W);else if("LEFT_JOIN"===T.kind)this.executeLEFT_JOIN(f,w,T,I,W);else if("FILTER"===T.kind){var B=this;this.executeSelectUnit(f,w,T.value,I,function(L){null!=L?o.checkFilters(T,L,!1,w,I,B,W):W([])})}else{if("EMPTY_PATTERN"!==T.kind)throw new u(T.kind);W([])}},QueryEngine.prototype.executeUNION=function(f,w,T,I,W){var B,L,E=T[0],D=T[1],G=null;if(2!=T.length)throw"SPARQL algebra UNION with more than two components";var K=this;c.seq(function(H){try{K.executeSelectUnit(f,w,E,I,function(ie){B=ie,H()})}catch(ie){G=ie,H()}},function(H){if(null==G)try{K.executeSelectUnit(f,w,D,I,function(ie){L=ie,H()})}catch(ie){G=ie,H()}else H()})(function(){if(null!=G)W(G);else{var H=e.unionBindings(B,L);K.runBinds(T.binds,H,w,I,function(ie,ue){if(null!=ie)throw new y("Error processing bind expressions",T.binds,ie);o.checkFilters(T,ue,!1,w,I,K,W)})}})},QueryEngine.prototype.executeAndBGP=function(f,w,T,I,W){var B=this;e.executeAndBGPsDPSize(T.value,w,this,I,function(L){null!=L?B.runBinds(T.binds,L,w,I,function(E,D){if(null!=E)throw new y("Error processing bind expressions",T.binds,E);o.checkFilters(T,D,!1,w,I,B,W)}):W(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(f,w,T,I,W){var B=T.lvalue,L=T.rvalue;if("EMPTY_PATTERN"===B.kind)this.executeSelectUnit(f,w,L,I,W);else{var E,D,G=null,K=null,H=null,ie=this;c.seq(function(ue){try{ie.executeSelectUnit(f,w,B,I,function(ce){G=ce,ue()})}catch(ce){H=ce,ue()}},function(ue){if(null!=H)ue();else try{ie.executeSelectUnit(f,w,L,I,function(ce){K=ce,ue()})}catch(ce){H=ce,ue()}})(function(){if(null!=H)W(H);else{var ue=e.leftOuterJoinBindings(G,K);ie.runBinds(T.binds,ue,w,I,function(ce,xe){if(null!=ce)throw new y("Error processing bind expressions",T.binds,ce);o.checkFilters(T,ue,!0,w,I,ie,function(oe){if(G.length>1&&K.length>1){var fe=[],ee={};for(var de in G[0])ee[de]=!0;for(de in K[0])1!=ee[de]&&fe.push(de);E=[],D={};for(var ve=0;ve<oe.length;ve++)if(!0===oe[ve].__nullify__){for(var Fe=0;Fe<fe.length;Fe++)oe[ve].bindings[fe[Fe]]=null;var Ne=[],Se=[];for(var de in oe[ve].bindings)null!=oe[ve].bindings[de]&&(Ne.push(de+oe[ve].bindings[de]),Ne.sort(),Se.push(Ne.join("")));if(null==D[Ne.join("")]){for(Fe=0;Fe<Se.length;Fe++)D[Se[Fe]]=!0;E.push(oe[ve].bindings)}}else for(var de in E.push(oe[ve]),Ne=[],Se=[],oe[ve])Ne.push(de+oe[ve][de]),Ne.sort(),D[Ne.join("")]=!0;W(E)}else W(oe)})})}})}},QueryEngine.prototype.executeJOIN=function(f,w,T,I,W){var B=T.lvalue,L=T.rvalue,E=null,D=null,G=null,K=this;c.seq(function(H){try{K.executeSelectUnit(f,w,B,I,function(ie){E=ie,H()})}catch(ie){G=ie,H()}},function(H){if(null!=G)H();else try{K.executeSelectUnit(f,w,L,I,function(ie){D=ie,H()})}catch(ie){G=ie,H()}})(function(){var H=null;if(null!=G)W(G);else if(0===E.length||0===D.length)W([]);else{var ie={},ue=[];for(var ce in E[0])ie[ce]=!1;for(var ce in D[0])!1===ie[ce]&&ue.push(ce);H=0==ue.length||K.abstractQueryTree.treeWithUnion(B)||K.abstractQueryTree.treeWithUnion(L)?e.joinBindings(E,D):e.joinBindings2(ue,E,D),K.runBinds(T.binds,H,w,I,function(xe,oe){if(null!=xe)throw new y("Error processing bind expressions",T.binds,xe);o.checkFilters(T,oe,!1,w,I,K,W)})}})},QueryEngine.prototype.rangeQuery=function(f,w,T){var I=this;I.normalizeQuad(f,w,!1,function(W){null!=W?I.backend.range(new v.Pattern(W),function(B){null==B||0==B.length?T([]):T(B)}):T(null)})},QueryEngine.prototype.executeUpdate=function(f,w){var T=f.prologue,I=f.units,W=this,B={blanks:{},outCache:{}};this.registerNsInEnvironment(T,B);for(var L=0;L<I.length;L++){var E=W.abstractQueryTree.parseExecutableUnit(I[L]);if("insertdata"===E.kind){var D=null;c.eachSeries(E.quads,function(K,H){null===D?W._executeQuadInsert(K,B,function(ie){null!=ie&&(D=ie),H()}):H()},function(){null===D?w(null,!0):w(D)})}else if("deletedata"===E.kind)D=null,c.eachSeries(E.quads,function(K,H){null===D?W._executeQuadDelete(K,B,function(ie){null!=ie&&(D=ie),H()}):H()},function(){null===D?w(null,!0):w(D)});else if("modify"===E.kind)this._executeModifyQuery(E,B,w);else if("create"===E.kind)w(!0);else if("load"===E.kind){var G={uri:F.lexicalFormBaseUri(E.sourceGraph,B)};null!=E.destinyGraph&&(G={uri:F.lexicalFormBaseUri(E.destinyGraph,B)}),W=this,this.rdfLoader.load(E.sourceGraph.value,G,function(K,H){K?w(new Error("error batch loading quads")):W.batchLoad(H,function(ie){null!==ie?w(null,ie):w(new Error("Error batch loading quads"))})})}else if("drop"===E.kind)this._executeClearGraph(E.destinyGraph,B,w);else{if("clear"!==E.kind)throw new Error("not supported execution unit");this._executeClearGraph(E.destinyGraph,B,w)}}},QueryEngine.prototype.batchLoad=function(f,w){var T=0,I={},W=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),c.eachSeries(f,function(B,L){var E={};c.eachSeries(["subject","predicate","object","graph"],function(D,G){!function(K,H,ie,ue){var ce;if(K[H].uri||"uri"===K[H].token){var xe=K[H].uri||K[H].value;W.lexicon.registerUri(xe,function(oe){var fe=function(){null!=K[H].uri&&(K[H]={token:"uri",value:K[H].uri},delete K[H].uri),ie[H]=oe,ue()};"graph"===H?W.lexicon.registerGraph(oe,xe,function(){fe()}):fe()})}else K[H].literal||"literal"===K[H].token?W.lexicon.registerLiteral(K[H].literal||K[H].value,function(oe){null!=K[H].literal&&(K[H]=W.lexicon.parseLiteral(K[H].literal),delete K[H].literal),ie[H]=oe,ue()}):null==(ce=I[K[H].blank||K[H].value])?W.lexicon.registerBlank(function(oe){I[K[H].blank||K[H].value]=oe,null==K[H].token&&(K[H].token="blank",K[H].value=K[H].blank,delete K[H].blank),ie[H]=oe,ue()}):(null==K[H].token&&(K[H].token="blank",K[H].value=K[H].blank,delete K[H].blank),ie[H]=ce,ue())}(B,D,E,G)},function(){var D=B;B=E;var G=new v.NodeKey(B);W.backend.search(G,function(K){K?L():W.backend.index(G,function(H){H&&(W.eventsOnBatchLoad&&W.callbacksBackend.nextGraphModification(m.added,[D,B]),T+=1),L()})})})},function(){null!=W.lexicon.updateAfterWrite&&W.lexicon.updateAfterWrite();var B=function(){w(T)};W.eventsOnBatchLoad?W.callbacksBackend.endGraphModification(B()):B()})},QueryEngine.prototype._executeModifyQuery=function(f,w,T){var I=this,W=!0,B=new Error("Error executing modify query"),L=null,E=["subject","predicate","object","graph"];f.insert=null==f.insert?[]:f.insert,f.delete=null==f.delete?[]:f.delete,c.seq(function(D){var G=[],K=[];if(null!=f.with&&G.push(f.with),null!=f.using){K=[];for(var H=0;H<f.using.length;H++){var ie=f.using[H];"named"===ie.kind?K.push(ie.uri):G.push(ie.uri)}}f.dataset={},f.projection=[{token:"variable",kind:"*"}],I.executeSelect(f,w,G,K,function(ue,ce){if(ue)return B=ue,W=!1,D();I.denormalizeBindingsList(ce,w,function(xe){null!=xe?L=xe:(B=new Error("Error denormalizing bindings list"),W=!1),D()})})},function(D){var G=f.with;if(W){for(var K=[],H=0;H<f.delete.length;H++)for(var ie=f.delete[H],ue=0;ue<L.length;ue++){for(var ce={},xe=L[ue],oe=0;oe<E.length;oe++){var fe=E[oe];"graph"==fe&&null==ie[fe]?ce.graph=G:"var"===ie[fe].token?ce[fe]=xe[ie[fe].value]:ce[fe]=ie[fe]}K.push(ce)}c.eachSeries(K,function(ee,de){I._executeQuadDelete(ee,w,function(){de()})},function(){D()})}else D()},function(D){var G=f.with;if(W){for(var K=[],H=0;H<f.insert.length;H++)for(var ie=f.insert[H],ue=0;ue<L.length;ue++){for(var ce={},xe=L[ue],oe=0;oe<E.length;oe++){var fe=E[oe];"graph"==fe&&null==ie[fe]?ce.graph=G:"var"===ie[fe].token?ce[fe]=xe[ie[fe].value]:ce[fe]=ie[fe]}K.push(ce)}c.eachSeries(K,function(ee,de){I._executeQuadInsert(ee,w,function(){de()})},function(){D()})}else D()})(function(){T(W?null:B)})},QueryEngine.prototype._executeQuadInsert=function(f,w,T){var I,W=this,B=!1,L=null;c.seq(function(E){W.normalizeQuad(f,w,!0,function(D){null!=D?I=D:(B=!0,L="Error normalizing quad."),E()})},function(E){if(!1===B){var D=new v.NodeKey(I);W.backend.search(D,function(G){!0===G?E():W.backend.index(D,function(){W.callbacksBackend.nextGraphModification(m.added,[f,I]),E()})})}else E()})(function(){B?T(new Error(L)):T(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(f,w,T){var I,W,B,L=this,E=!1;c.seq(function(D){L.normalizeQuad(f,w,!0,function(G){null!=G?I=G:(E=!0,W="Error normalizing quad."),D()})},function(D){!1===E?(B=new v.NodeKey(I),L.backend.delete(B,function(){D()})):D()},function(D){!1===E?L.lexicon.unregister(f,B,function(){L.callbacksBackend.nextGraphModification(m.deleted,[f,I]),D()}):D()})(function(){E?T(new Error(W)):T(null,!0)})},QueryEngine.prototype._executeClearGraph=function(f,w,T){var I=this;if("default"===f)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",T);else if("named"===f)I.lexicon.registeredGraphs(!0,function(B){if(null!=B){var L=!1;c.eachSeries(B,function(E,D){L?D():I.execute("DELETE { GRAPH <"+E+"> { ?s ?p ?o } } WHERE { GRAPH <"+E+"> { ?s ?p ?o } }",function(G,K){G?(L=G,D()):I.lexicon.resolveUri(E,function(H){-1!=H?I.lexicon.knownGraphs.delete(H,function(){D()}):(L="Cannot find graph "+E+" to clear it",D())})})},function(){T(!L)})}else T(!1,"Error deleting named graphs")});else if("all"===f)I=this,this.execute("CLEAR DEFAULT",function(B,L){B?T(!1,L):I.execute("CLEAR NAMED",T)});else if("uri"==f.token){var W=F.lexicalFormBaseUri(f,w);null!=W?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+W+"> { ?s ?p ?o } } WHERE { GRAPH <"+W+"> { ?s ?p ?o } }",function(B){I.callbacksBackend.ongoingModification=!1,T(B)})):T(!1,"wrong graph URI")}else T(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(f,w){if("singleGroup"===f)return!0;for(var T={},I=0;I<f.length;I++){var W=f[I];"var"===W.token?T[W.value]=!0:"aliased_expression"===W.token&&(T[W.alias.value]=!0)}for(I=0;I<w.length;I++){var B=w[I];if("var"===B.kind){if(null==T[B.value.value])return!1}else if("aliased"===B.kind&&B.expression&&"var"===B.expression.primaryexpression&&null==T[B.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(f,w,T,I,W){var B=this,L=w;null!=f&&f.length>0?B.copyDenormalizedBindings(w,I.outCache,function(E){for(var D=0;D<w.length;D++)for(var G=0;G<f.length;G++){var K=f[G],H=E[D],ie=o.runFilter(K.expression,H,B,T,I);o.isEbvError(ie)?W(ie):L[D][K.as.value]=ie}W(null,w)}):W(null,w)},QueryEngine.prototype.computeCosts=function(f,w,T){for(var I=0;I<f.length;I++)f[I]._cost=this.quadCost(f[I],w);T(f)},QueryEngine.prototype.quadCost=function(f,w){return 1},QueryEngine.prototype.registerDefaultNamespace=function(f,w){this.defaultPrefixes[f]=w},re.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(J,re,le){var q=J("./utils"),u=q,F=J("./utils");QueryFilters={};var v="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,o,l,d,m,c,k){var y=[];e.filter&&"function"!=typeof e.filter&&(y=e.filter);var f=[];if(null==y||0===y.length||null!=e.length)return k(o);QueryFilters.preprocessExistentialFilters(y,o,c,d,m,function(w){F.eachSeries(w,function(T,I){QueryFilters.run(T.value,o,l,d,m,c,function(W){for(var B=[],L=0;L<W.length;L++){var E=W[L];null!=E.__nullify__?f.push(E):B.push(E)}o=B,I()})},function(){k(o.concat(f))})})},QueryFilters.preprocessExistentialFilters=function(e,o,l,d,m,c){var k=[];F.eachSeries(e,function(y,f){if("builtincall"!==y.value.expressionType||"exists"!==y.value.builtincall&&"notexists"!==y.value.builtincall)if("conditionalor"===y.value.expressionType||"conditionaland"===y.value.expressionType){var w=u.map(y.value.operands,function(B){return{value:B}});QueryFilters.preprocessExistentialFilters(w,o,l,d,m,function(B){y.value.operands=B.map(function(L){return L.value}),k.push(y),f()})}else"multiplicativeexpression"===y.value.expressionType?(w=u.map(y.value.factors,function(B){return{value:B}}),QueryFilters.preprocessExistentialFilters(w,o,l,d,m,function(B){y.value.factors=B.map(function(L){return L.value}),k.push(y),f()})):"additiveexpression"===y.value.expressionType?(w=u.map(y.value.summands,function(B){return{value:B}}),QueryFilters.preprocessExistentialFilters(w,o,l,d,m,function(B){y.value.summands=B.map(function(L){return L.value}),k.push(y),f()})):"relationalexpression"===y.value.expressionType?(w=[{value:y.value.op1},{value:y.value.op2}],QueryFilters.preprocessExistentialFilters(w,o,l,d,m,function(B){y.value.op1=B[0].value,y.value.op2=B[1].value,k.push(y),f()})):"irireforfunction"!==y.value.expressionType&&"custom"!==y.value.expressionType||null==y.value.args?(k.push(y),f()):(w=u.map(y.value.args,function(B){return{value:B}}),QueryFilters.preprocessExistentialFilters(w,o,l,d,m,function(B){y.value.args=B.map(function(L){return L.value}),k.push(y),f()}));else{var T=y.value.builtincall,I=y.value.args,W={};l.copyDenormalizedBindings(o,m.outCache,function(B){F.eachSeries(B,function(L,E){var D=u.clone(I[0],!0),G=l.abstractQueryTree.parseSelect({pattern:D},L);G=l.abstractQueryTree.bind(G.pattern,L),l.executeSelectUnit([{kind:"*"}],d,G,m,function(K){var H;H="exists"===T?QueryFilters.ebvBoolean(0!==K.length):QueryFilters.ebvBoolean(0===K.length);var ie=[];for(var ue in L)ie.push(JSON.stringify(L[ue]));ie=ie.sort().join(""),W[ie]=H,E()})},function(){y.value.origArgs=y.value.args,y.value.args=W,k.push(y),f()})})}},function(){c(k)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var o=e.expressionType;if("relationalexpression"==o){var l=e.op1,d=e.op2;return QueryFilters.boundVars(l)+QueryFilters.boundVars(d)}if("conditionalor"==o||"conditionaland"==o){for(var m=[],c=0;c<e.operands;c++)m=m.concat(QueryFilters.boundVars(e.operands[c]));return m}if("builtincall"==o){if(null==e.args)return[];var k=[];for(c=0;c<e.args.length;c++)k=k.concat(QueryFilters.boundVars(e.args[c]));return k}if("multiplicativeexpression"==o){k=QueryFilters.boundVars(e.factor);for(c=0;c<e.factors.length;c++)k=k.concat(QueryFilters.boundVars(e.factors[c].expression));return k}if("additiveexpression"==o){for(k=QueryFilters.boundVars(e.summand),c=0;c<e.summands.length;c++)k=k.concat(QueryFilters.boundVars(e.summands[c].expression));return k}return"regex"==o?(k=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==o?QueryFilters.boundVars(e.expression):"atomic"==o?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,o,l,d,m,c,k){c.copyDenormalizedBindings(o,m.outCache,function(y){for(var f=[],w=0;w<o.length;w++){var T=y[w],I=QueryFilters.runFilter(e,T,c,d,m);if(I=QueryFilters.ebv(I),QueryFilters.isEbvError(I)){if(l){var W={__nullify__:!0,bindings:o[w]};f.push(W)}}else!0===I?f.push(o[w]):l&&(W={__nullify__:!0,bindings:o[w]},f.push(W))}k(f)})},QueryFilters.collect=function(e,o,l,d,m,c){m.copyDenormalizedBindings(o,d.outCache,function(k){for(var y=[],f=0;f<k.length;f++){var w=k[f],T=QueryFilters.runFilter(e,w,m,l,d);y.push({binding:o[f],value:T})}return c(y)})},QueryFilters.runDistinct=function(e,o){},QueryFilters.runAggregator=function(e,o,l,d,m){if(null==o||0===o.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return o[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return o[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var c=null,k=0;k<o.length;k++){var y=o[k],f=QueryFilters.runFilter(e.expression.expression,y,l,d,m);QueryFilters.isEbvError(f)||(null===c||!0===QueryFilters.runLtFunction(c,f).value)&&(c=f)}return null===c?QueryFilters.ebvError():c}if("min"===e.expression.aggregateType){var w=null;for(k=0;k<o.length;k++)y=o[k],f=QueryFilters.runFilter(e.expression.expression,y,l,d,m),QueryFilters.isEbvError(f)||(null===w||!0===QueryFilters.runGtFunction(w,f).value)&&(w=f);return null===w?QueryFilters.ebvError():w}if("count"===e.expression.aggregateType){var T={},I=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(k=0;k<o.length;k++)y=o[k],null==T[L=q.hashTerm(y)]&&(T[L]=!0,I++);else I=o.length;else for(k=0;k<o.length;k++)y=o[k],f=QueryFilters.runFilter(e.expression.expression,y,l,d,m),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[L=q.hashTerm(f)]&&(T[L]=!0,I++):I++);return{token:"literal",type:v+"integer",value:""+I}}if("avg"===e.expression.aggregateType){T={};var W={token:"literal",type:v+"integer",value:"0"};for(I=0,k=0;k<o.length;k++)y=o[k],f=QueryFilters.runFilter(e.expression.expression,y,l,d,m),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[L=q.hashTerm(f)]&&(T[L]=!0,QueryFilters.isNumeric(f)&&(W=QueryFilters.runSumFunction(W,f),I++)):QueryFilters.isNumeric(f)&&(W=QueryFilters.runSumFunction(W,f),I++));var B=QueryFilters.runDivFunction(W,{token:"literal",type:v+"integer",value:""+I});return B.value=""+B.value,B}if("sum"===e.expression.aggregateType){for(T={},W={token:"literal",type:v+"integer",value:"0"},k=0;k<o.length;k++){var L;y=o[k],f=QueryFilters.runFilter(e.expression.expression,y,l,d,m),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[L=q.hashTerm(f)]&&(T[L]=!0,QueryFilters.isNumeric(f)&&(W=QueryFilters.runSumFunction(W,f))):QueryFilters.isNumeric(f)&&(W=QueryFilters.runSumFunction(W,f)))}return W.value=""+W.value,W}return QueryFilters.runFilter(aggregate.expression,o[0],d,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,o,l,d,m){if(null!=e.expressionType){var c=e.expressionType;if("relationalexpression"==c){var k=QueryFilters.runFilter(e.op1,o,l,d,m),y=QueryFilters.runFilter(e.op2,o,l,d,m);return QueryFilters.runRelationalFilter(e,k,y,o,l,d,m)}if("conditionalor"==c)return QueryFilters.runOrFunction(e,o,l,d,m);if("conditionaland"==c)return QueryFilters.runAndFunction(e,o,l,d,m);if("additiveexpression"==c)return QueryFilters.runAddition(e.summand,e.summands,o,l,d,m);if("builtincall"==c)return QueryFilters.runBuiltInCall(e.builtincall,e.args,o,l,d,m);if("multiplicativeexpression"==c)return QueryFilters.runMultiplication(e.factor,e.factors,o,l,d,m);if("unaryexpression"==c)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,o,l,d,m);if("irireforfunction"==c)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,o,l,d,m);if("regex"==c)return QueryFilters.runRegex(e.text,e.pattern,e.flags,o,l,d,m);if("custom"==c)return QueryFilters.runBuiltInCall(e.name,e.args,o,l,d,m);if("atomic"==c)return"var"==e.primaryexpression?o[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,m)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,o,l,d){return"literal"===e.token&&"literal"===o.token?e.lang==o.lang&&e.type==o.type&&e.value==o.value||(null!=e.type&&null!=o.type||QueryFilters.isSimpleLiteral(e)&&null!=o.type||!(!QueryFilters.isSimpleLiteral(o)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===o.token?q.lexicalFormBaseUri(e,d)==q.lexicalFormBaseUri(o,d):"blank"===e.token&&"blank"===o.token&&e.value==o.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==v+"integer"||e.type==v+"decimal"||e.type==v+"double"||e.type==v+"nonPositiveInteger"||e.type==v+"negativeInteger"||e.type==v+"long"||e.type==v+"int"||e.type==v+"short"||e.type==v+"byte"||e.type==v+"nonNegativeInteger"||e.type==v+"unsignedLong"||e.type==v+"unsignedInt"||e.type==v+"unsignedShort"||e.type==v+"unsignedByte"||e.type==v+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==v+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==v+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==v+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==v+"integer"||e.type==v+"decimal"||e.type==v+"float"||e.type==v+"double"||e.type==v+"nonPositiveInteger"||e.type==v+"negativeInteger"||e.type==v+"long"||e.type==v+"int"||e.type==v+"short"||e.type==v+"byte"||e.type==v+"nonNegativeInteger"||e.type==v+"unsignedLong"||e.type==v+"unsignedInt"||e.type==v+"unsignedShort"||e.type==v+"unsignedByte"||e.type==v+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,o){return!(!o||"literal"!=o.token)&&o.type==v+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==v+"integer"||e.type==v+"decimal"||e.type==v+"double"||e.type==v+"nonPositiveInteger"||e.type==v+"negativeInteger"||e.type==v+"long"||e.type==v+"int"||e.type==v+"short"||e.type==v+"byte"||e.type==v+"nonNegativeInteger"||e.type==v+"unsignedLong"||e.type==v+"unsignedInt"||e.type==v+"unsignedShort"||e.type==v+"unsignedByte"||e.type==v+"positiveInteger"){var o=parseFloat(e.value);return!isNaN(o)&&0!=parseFloat(e.value)}return e.type===v+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===v+"string"?""!=e.value:e.type===v+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:v+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:v+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,o,l,d,m,c,k){var y=e.operator;if("="===y)return QueryFilters.runEqualityFunction(o,l,d,m,c,k);if("!="===y){var f=QueryFilters.runEqualityFunction(o,l,d,m,c,k);return QueryFilters.isEbvError(f)||(f.value=!f.value),f}if("<"===y)return QueryFilters.runLtFunction(o,l,d);if(">"===y)return QueryFilters.runGtFunction(o,l,d);if("<="===y)return QueryFilters.runLtEqFunction(o,l,d);if(">="===y)return QueryFilters.runGtEqFunction(o,l,d);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==v+"integer")return parseInt(e.value);if(e.type==v+"decimal"||e.type==v+"float"||e.type==v+"double"||e.type==v+"nonPositiveInteger")return parseFloat(e.value);if(e.type==v+"negativeInteger"||e.type==v+"long"||e.type==v+"int"||e.type==v+"short"||e.type==v+"byte"||e.type==v+"nonNegativeInteger"||e.type==v+"unsignedLong"||e.type==v+"unsignedInt"||e.type==v+"unsignedShort"||e.type==v+"unsignedByte"||e.type==v+"positiveInteger")return parseInt(e.value);if(e.type!=v+"date"&&e.type!=v+"dateTime")return e.type==v+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==v+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return q.parseISO8601(e.value)}catch(o){return null}},QueryFilters.runOrFunction=function(e,o,l,d,m){for(var c=null,k=0;k<e.operands.length;k++){var y=QueryFilters.runFilter(e.operands[k],o,l,d,m);0==QueryFilters.isEbvError(y)&&(y=QueryFilters.ebv(y)),null==c?c=y:QueryFilters.isEbvError(y)?c=QueryFilters.isEbvError(c)?QueryFilters.ebvError():!0===c||QueryFilters.ebvError():!0===y?c=!0:QueryFilters.isEbvError(c)&&(c=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(c)},QueryFilters.runAndFunction=function(e,o,l,d,m){for(var c=null,k=0;k<e.operands.length;k++){var y=QueryFilters.runFilter(e.operands[k],o,l,d,m);0==QueryFilters.isEbvError(y)&&(y=QueryFilters.ebv(y)),null==c?c=y:QueryFilters.isEbvError(y)?c=(QueryFilters.isEbvError(c)||!0===c)&&QueryFilters.ebvError():!0===y?QueryFilters.isEbvError(c)&&(c=QueryFilters.ebvError()):c=!1}return QueryFilters.ebvBoolean(c)},QueryFilters.runEqualityFunction=function(e,o,l,d,m,c){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)){var k=QueryFilters.effectiveTypeValue(e),y=QueryFilters.effectiveTypeValue(o);return isNaN(k)||isNaN(y)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,d,c)):QueryFilters.ebvBoolean(k==y)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",o))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var f=q.compareDateComponents(e.value,o.value);return null!=f?0==f?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(o)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,d,c)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,o,l){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?1==d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,o){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",o)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",o)?QueryFilters.runGtFunction(e,o,[]):e.token&&"uri"===e.token&&o.token&&"uri"===o.token?QueryFilters.ebvBoolean(e.value>o.value):e.token&&"literal"===e.token&&o.token&&"literal"===o.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+o.value+o.type+o.lang):e.token&&"blank"===e.token&&o.token&&"blank"===o.token||e.value&&o.value?QueryFilters.ebvBoolean(e.value>o.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,o,l){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?-1==d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,o,l){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?-1!=d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,o,l){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?1!=d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,o,l,d,m,c){var k=QueryFilters.runFilter(e,l,d,m,c);if(QueryFilters.isEbvError(k))return QueryFilters.ebvError();var y=k;if(QueryFilters.isNumeric(k)){for(var f=0;f<o.length;f++){var w=QueryFilters.runFilter(o[f].expression,l,d,m,c);if(!QueryFilters.isNumeric(w))return QueryFilters.ebvFalse();"+"===o[f].operator?y=QueryFilters.runSumFunction(y,w):"-"===o[f].operator&&(y=QueryFilters.runSubFunction(y,w))}return y}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var l=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:v+"double",value:l}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:v+"float",value:l}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:v+"decimal",value:l}:{token:"literal",type:v+"integer",value:l}},QueryFilters.runSubFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var l=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:v+"double",value:l}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:v+"float",value:l}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:v+"decimal",value:l}:{token:"literal",type:v+"integer",value:l}},QueryFilters.runMultiplication=function(e,o,l,d,m,c){var k=QueryFilters.runFilter(e,l,d,m,c);if(QueryFilters.isEbvError(k))return k;var y=k;if(QueryFilters.isNumeric(k)){for(var f=0;f<o.length;f++){var w=QueryFilters.runFilter(o[f].expression,l,d,m,c);if(QueryFilters.isEbvError(w))return k;if(!QueryFilters.isNumeric(w))return QueryFilters.ebvFalse();"*"===o[f].operator?y=QueryFilters.runMulFunction(y,w):"/"===o[f].operator&&(y=QueryFilters.runDivFunction(y,w))}return y}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var l=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:v+"double",value:l}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:v+"float",value:l}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:v+"decimal",value:l}:{token:"literal",type:v+"integer",value:l}},QueryFilters.runDivFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var l=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:v+"double",value:l}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:v+"float",value:l}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:v+"decimal",value:l}:{token:"literal",type:v+"integer",value:l}},QueryFilters.runBuiltInCall=function(e,o,l,d,m,c){if("notexists"===e||"exists"===e){var k=[];for(var y in l)k.push(JSON.stringify(l[y]));return o[k=k.sort().join("")]}for(var f=[],w=0;w<o.length;w++)if("var"===o[w].token)f.push(o[w]);else{var T=QueryFilters.runFilter(o[w],l,d,m,c);if(QueryFilters.isEbvError(T))return T;f.push(T)}if("str"===e)return"literal"===f[0].token?{token:"literal",type:null,value:""+f[0].value}:"uri"===f[0].token?{token:"literal",type:null,value:f[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===f[0].token?null!=f[0].lang?{token:"literal",value:""+f[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===f[0].token){var I=f[0];return null!=I.type?"string"==typeof I.type?{token:"uri",value:I.type,prefix:null,suffix:null}:I.type:null==I.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var W=f[0],B=f[1],L=QueryFilters.RDFTermEquality(W,B,d,c);return QueryFilters.isEbvError(L)&&(L=!1),QueryFilters.ebvBoolean(L)}if("langmatches"===e){var E=f[0],D=f[1];return"literal"===E.token&&"literal"===D.token?"*"===D.value&&""!=E.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===E.value.toLowerCase().indexOf(D.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var G=f[0].value;return null==G?QueryFilters.ebvError():null!=l[G]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=d.customFns[e])return d.customFns[e](QueryFilters,f);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,o,l,d,m,c){var k=QueryFilters.runFilter(o,l,d,m,c);if(QueryFilters.isEbvError(k))return k;if("!"===e){var y=QueryFilters.ebv(k);return QueryFilters.isEbvError(y)?QueryFilters.ebvFalse():(y=!y,QueryFilters.ebvBoolean(y))}if("+"===e)return QueryFilters.isNumeric(k)?k:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(k)){var f={};for(var w in k)f[w]=k[w];return f.value=-f.value,f}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,o,l,d,m,c,k){if(null==e||(e=QueryFilters.runFilter(e,d,m,c,k),null==o)||(o=QueryFilters.runFilter(o,d,m,c,k),null!=l&&(l=QueryFilters.runFilter(l,d,m,c,k)),null==o||"literal"!==o.token||null!=l&&"literal"!==l.token))return QueryFilters.ebvError();if(o=o.value,l=null==l?null:l.value,null!=e&&"var"==e.token){if(null==d[e.value])return QueryFilters.ebvError();e=d[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==l?new RegExp(o):new RegExp(o,l.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,o,l){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,l)),e},QueryFilters.runIriRefOrFunction=function(e,o,l,d,m,c){if(null==o)return e;for(var k=[],y=0;y<o.length;y++)k.push(QueryFilters.runFilter(o[y],l,d,m,c));var f=q.lexicalFormBaseUri(e,c);if(f==v+"integer"||f==v+"decimal"||f==v+"double"||f==v+"nonPositiveInteger"||f==v+"negativeInteger"||f==v+"long"||f==v+"int"||f==v+"short"||f==v+"byte"||f==v+"nonNegativeInteger"||f==v+"unsignedLong"||f==v+"unsignedInt"||f==v+"unsignedShort"||f==v+"unsignedByte"||f==v+"positiveInteger"){if("literal"!==(w=k[0]).token)return QueryFilters.ebvError();if((w=QueryFilters.normalizeLiteralDatatype(w,d,c)).type==v+"integer"||w.type==v+"decimal"||w.type==v+"double"||w.type==v+"nonPositiveInteger"||w.type==v+"negativeInteger"||w.type==v+"long"||w.type==v+"int"||w.type==v+"short"||w.type==v+"byte"||w.type==v+"nonNegativeInteger"||w.type==v+"unsignedLong"||w.type==v+"unsignedInt"||w.type==v+"unsignedShort"||w.type==v+"unsignedByte"||w.type==v+"positiveInteger")return w.type=f,w;if("http://www.w3.org/2001/XMLSchema#boolean"==w.type)return 1==QueryFilters.ebv(w)?(w.type=f,w.value=1):(w.type=f,w.value=0),w;if("http://www.w3.org/2001/XMLSchema#float"==w.type||"http://www.w3.org/2001/XMLSchema#double"==w.type)return w.type=f,w.value=parseInt(w.value),w;if("http://www.w3.org/2001/XMLSchema#string"!=w.type&&null!=w.type||w.value.split(".").length>2||w.value.split("-").length>2||w.value.split("/").length>2||w.value.split("+").length>2||f==v+"decimal"&&(-1!=w.value.indexOf("e")||-1!=w.value.indexOf("E"))||!(f!=v+"int"&&f!=v+"integer"||-1==w.value.indexOf("e")&&-1==w.value.indexOf("E")&&-1==w.value.indexOf(".")))return QueryFilters.ebvError();try{return w.value=parseInt(parseFloat(w.value)),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}}else{if(f==v+"boolean")return"literal"===(w=k[0]).token&&null==w.type?"true"===w.value||"1"===w.value?QueryFilters.ebvTrue():"false"===w.value||"0"===w.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===w.token?QueryFilters.isEbvError(w)?w:QueryFilters.ebvBoolean(w):QueryFilters.ebvError();if(f==v+"string")return"literal"===(w=k[0]).token?(w=QueryFilters.normalizeLiteralDatatype(w,d,c)).type==v+"integer"||w.type==v+"decimal"||w.type==v+"double"||w.type==v+"nonPositiveInteger"||w.type==v+"negativeInteger"||w.type==v+"long"||w.type==v+"int"||w.type==v+"short"||w.type==v+"byte"||w.type==v+"nonNegativeInteger"||w.type==v+"unsignedLong"||w.type==v+"unsignedInt"||w.type==v+"unsignedShort"||w.type==v+"unsignedByte"||w.type==v+"positiveInteger"||w.type==v+"float"?(w.type=f,w.value=""+w.value,w):w.type==v+"string"?w:w.type==v+"boolean"?(QueryFilters.ebv(w)?(w.type=f,w.value="true"):(w.type=f,w.value="false"),w):w.type==v+"dateTime"||w.type==v+"date"?(w.type=f,"string"!=typeof w.value&&(w.value=q.iso8601(w.value)),w):null==w.type?(w.value=""+w.value,w.type=f,w):QueryFilters.ebvError():"uri"===w.token?{token:"literal",value:q.lexicalFormBaseUri(w,c),type:f,lang:null}:QueryFilters.ebvError();if(f==v+"dateTime"||f==v+"date"){if((w=k[0]).type==v+"dateTime"||w.type==v+"date")return w;if(w.type!=v+"string"&&null!=w.type)return QueryFilters.ebvError();try{return w.value=q.iso8601(q.parseISO8601(w.value)),w.type=f,w}catch(T){return QueryFilters.ebvError()}}else{if(f!=v+"float")return null!=d.customFns[f]?d.customFns[f](QueryFilters,k):QueryFilters.ebvError();var w;if("literal"!==(w=k[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(w=QueryFilters.normalizeLiteralDatatype(w,d,c)).type||"http://www.w3.org/2001/XMLSchema#int"==w.type)return w.type=f,w.value=parseFloat(w.value),w;if("http://www.w3.org/2001/XMLSchema#boolean"==w.type)return 1==QueryFilters.ebv(w)?(w.type=f,w.value=1):(w.type=f,w.value=0),w;if("http://www.w3.org/2001/XMLSchema#float"==w.type||"http://www.w3.org/2001/XMLSchema#double"==w.type)return w.type=f,w.value=parseFloat(w.value),w;if("http://www.w3.org/2001/XMLSchema#string"==w.type)try{return w.value=parseFloat(w.value),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}else{if(null!=w.type||w.value.split(".").length>2||w.value.split("-").length>2||w.value.split("/").length>2||w.value.split("+").length>2)return QueryFilters.ebvError();try{return w.value=parseFloat(w.value),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}}}}},re.exports={QueryFilters}},{"./utils":140}],135:[function(J,re,le){var q=J("./utils"),u=J("./utils"),F={variablesInBGP:function(v){var e=v.variables;if(e)return e;var o=v.value||v;for(var l in e=[],o)o[l]&&"var"===o[l].token?e.push(o[l].value):o[l]&&"blank"===o[l].token&&e.push("blank:"+o[l].value);return v.variables=e,e},connected:function(v,e){for(var o="/"+v.vars.join("/")+"/",l=0;l<e.vars.length;l++)if(-1!=o.indexOf("/"+e.vars[l]+"/"))return!0;return!1},variablesIntersectionBGP:function(v,e){return function(o,l){for(var d={},m=0;m<o.lenght;m++)d[o[m]]=1;for(m=0;m<l.length;m++){var c=d[l[m]]||0;c++,d[l[m]]=c}var k=[];for(var y in d)2==d[y]&&k.push(d[y]);return k}(F.variablesInBGP(v),F.variablesInBGP(e))},executeAndBGPsGroups:function(v){for(var e={},o={},l=0,d=function(W,B){for(var L=0;L<W.length;L++){var E="/"+W[L]+"/";if(-1!=B.indexOf(E))return!0}return!1},m=function(W,B,L,E){var D=[],G="",K="";for(var H in B)G+=H,D=D.concat(e[H]),K+=o[H];K=K+w.join("/")+"/",D.push(W),L[G]=D,E[G]=K},c=0;c<v.length;c++){var k=v[c],y={},f={},w=F.variablesInBGP(k),T={};for(var I in o)d(w,o[I])?T[I]=!0:(y[I]=e[I],f[I]=o[I]);0===q.size(T)?(y["g"+l]=[k],f["g"+l]="/"+w.join("/")+"/",l++):m(k,T,y,f),e=y,o=f}return q.values(e)},intersectionSize:function(v,e){for(var o=e.i.split("_"),l=0;l<o.length;l++)if(""!=o[l]&&-1!=v.i.indexOf("_"+o[l]+"_"))return 1;return 0},createJoinTree:function(v,e){for(var o="/"+v.vars.join("/")+"/",l=v.vars.concat([]),d=[],m=0;m<e.vars.length;m++)-1!=o.indexOf("/"+e.vars[m]+"/")?0==e.vars[m].indexOf("_:")?d.push("blank:"+e.vars[m]):d.push(e.vars[m]):l.push(e.vars[m]);var c=e.i.split("_"),k=v.i.split("_"),y={};for(m=0;m<c.length;m++)""!=c[m]&&(y[c[m]]=!0);for(m=0;m<k.length;m++)""!=k[m]&&(y[k[m]]=!0);var f=q.keys(y);return{left:v,right:e,cost:v.cost+e.cost,i:"_"+f.sort().join("_")+"_",vars:l,join:d}},executeBushyTree:function(v,e,o,l,d){null==v.left?F.executeEmptyJoinBGP(v.right,e,o,l,d):null==v.right?F.executeEmptyJoinBGP(v.left,e,o,l,d):F.executeBushyTree(v.left,e,o,l,function(m){null!=m?F.executeBushyTree(v.right,e,o,l,function(c){d(null!=c?F.joinBindings2(v.join,m,c):null)}):d(null)})},executeAndBGPsDPSize:function(v,e,o,l,d){var m=F.executeAndBGPsGroups(v),c=[];u.eachSeries(m,function(k,y){o.computeCosts(k,l,function(f){var w={},T={},I={},W=1,B=null,L={};I[1]=[];for(var E=0;E<f.length;E++){var D=[];for(var G in delete f[E].variables,f[E])"_cost"!=G&&("var"===f[E][G].token||"blank"===f[E][G].token)&&D.push(f[E][G].value);T["_"+E+"_"]={left:f[E],right:null,cost:f[E]._cost,i:"_"+E+"_",vars:D};var K={left:f[E],right:null,cost:f[E]._cost,i:"_"+E+"_",vars:D};w["_"+E+"_"]=K,delete f[E]._cost,L["_"+E+"_"]=!0,I[1].push("_"+E+"_"),(null==B||B.cost>K.cost)&&(B=K)}for(var H=2;H<=f.length;H++)for(var ie=1;ie<H;ie++){var ue=H-ie,ce=I[""+ie]||[],xe=I[""+ue]||[];for(E=0;E<ce.length;E++)for(var oe=0;oe<xe.length;oe++)if(ce[E]!==xe[oe]){var fe=T[ce[E]],ee=T[xe[oe]];if(0==F.intersectionSize(fe,ee)&&F.connected(fe,ee)){W=H;var de=w[fe.i],ve=w[ee.i],Fe=F.createJoinTree(de,ve);if(!L[Fe.i]){L[Fe.i]=!0;var Ne=Fe.cost+1;null!=w[Fe.i]&&(Ne=w[Fe.i].cost);var Se=I[H]||[];Se.push(Fe.i),T[Fe.i]=Fe,I[H]=Se,Ne>Fe.cost&&(W===H&&(B=Fe),w[Fe.i]=Fe)}}}}c.push(B),y()})},function(){var k=null;u.eachSeries(c,function(y,f){F.executeBushyTree(y,e,o,l,function(w){w?null==k?(k=w,f()):(k=F.crossProductBindings(k,w),f()):f("Error executing bushy tree")})},function(y){y?d(null,y):d(k)})})},executeEmptyJoinBGP:function(v,e,o,l,d){return F.executeBGPDatasets(v,e,o,l,d)},executeBGPDatasets:function(v,e,o,l,d){var m={};if(null==v.graph){var c=[];u.eachSeries(e.implicit,function(y,f){null==m[y.oid]?(m[y.oid]=!0,v.graph=y,o.rangeQuery(v,l,function(w){w=F.buildBindingsFromRange(w,v),c.push(w),f()})):f()},function(){var y=F.unionManyBindings(c);d(y)})}else if("var"===v.graph.token){var k=v.graph.value;c=[],u.eachSeries(e.named,function(y,f){null==m[y.oid]?(m[y.oid]=!0,v.graph=y,null!=c?o.rangeQuery(v,l,function(w){if(null!=w){w=F.buildBindingsFromRange(w,v);for(var T=0;T<w.length;T++)w[T][k]=y.oid;c.push(w)}else c=null;f()}):f()):f()},function(){if(null==c)d(null);else{var y=F.unionManyBindings(c);d(y)}})}else o.rangeQuery(v,l,function(y){null!=y?(y=F.buildBindingsFromRange(y,v),d(y)):d(null)})},buildBindingsFromRange:function(v,e){F.variablesInBGP(e);var o=e.value||e,l={};for(f in o)o[f]&&"var"===o[f].token?l[f]=o[f].value:o[f]&&"blank"===o[f].token&&(l[f]="blank:"+o[f].value);var d=[];if(null!=v)for(var m=0;m<v.length;m++){var c={},k=v[m],y=!1;for(var f in l){var w=k[f];if(null!=c[l[f]]&&c[l[f]]!==w){y=!0;break}c[l[f]]=w}y||d.push(c)}return d},areCompatibleBindings:function(v,e){for(var o in v)if(null!=e[o]&&e[o]!=v[o])return!1;return!0},mergeBindings:function(v,e){var o={};for(var l in v)o[l]=v[l];for(var l in e)o[l]=e[l];return o},joinBindings2:function(v,e,o){for(var l,d,m,c,k={},y=[],f=0;f<e.length;f++){l=e[f],c=k;for(var w=0;w<v.length;w++)d=l[v[w]],w==v.length-1?((m=c[d]||[]).push(l),c[d]=m):(m=c[d]||{},c[d]=m,c=m)}for(f=0;f<o.length;f++)for(l=o[f],c=k,w=0;w<v.length;w++)if(null!=c[d=l[v[w]]])if(w==v.length-1)for(var T=0;T<c[d].length;T++)y.push(F.mergeBindings(c[d][T],l));else c=c[d];return y},joinBindings:function(v,e){for(var o=[],l=0;l<v.length;l++)for(var d=v[l],m=0;m<e.length;m++){var c=e[m];F.areCompatibleBindings(d,c)&&o.push(F.mergeBindings(d,c))}return o},augmentMissingBindings:function(v,e){for(var o in e)null==v[o]&&(v[o]=null);return v},leftOuterJoinBindings:function(v,e){for(var o=[],l=0;l<v.length;l++){for(var d=v[l],m=!1,c=0;c<e.length;c++){var k=e[c];F.areCompatibleBindings(d,k)&&(m=!0,o.push(F.mergeBindings(d,k)))}!1===m&&(F.augmentMissingBindings(d,k),o.push(d))}return o},crossProductBindings:function(v,e){for(var o=[],l=0;l<v.length;l++)for(var d=v[l],m=0;m<e.length;m++){var c=e[m];o.push(F.mergeBindings(d,c))}return o},unionBindings:function(v,e){return v.concat(e)},unionManyBindings:function(v){for(var e=[],o=0;o<v.length;o++){var l=v[o];e=F.unionBindings(e,l)}return e}};re.exports={QueryPlan:F}},{"./utils":140}],136:[function(J,re,le){var q=J("./network_transport").NetworkTransport,u=J("./rvn3_parser").RVN3Parser,F=J("./jsonld_parser").JSONLDParser,v=J("./utils"),e=function(o){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":u.parser,"text/n3":u.parser,"application/ld+json":F.parser,"application/json":F.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=o)for(var l in o.parsers)this.parsers[l]=o.parsers[l];if(o&&null!=o.precedences)for(var l in this.precedences=o.precedences,o.parsers)v.include(this.precedences,l)||this.precedences.push(l);this.acceptHeaderValue="";for(var d=0;d<this.precedences.length;d++)this.acceptHeaderValue=0!=d?this.acceptHeaderValue+","+this.precedences[d]:this.acceptHeaderValue+this.precedences[d]};e.prototype.registerParser=function(o,l){this.parsers[o]=l,this.precedences.push(o)},e.prototype.unregisterParser=function(o){delete this.parsers[o];for(var l=[],d=0;d<this.precedences.length;d++)this.precedences[d]!=o&&l.push(this.precedences[d]);this.precedences=l},e.prototype.setAcceptHeaderPrecedence=function(o){this.precedences=o},e.prototype.load=function(o,l,d){var m=this;q.load(o,this.acceptHeaderValue,function(c,k){if(c)d(c);else{var y=k.headers["Content-Type"]||k.headers["content-type"],f=k.data;if(null!=y){for(var w in y=y.split(";")[0],m.parsers)if(-1!=w.indexOf("/")){var T=w.split("/");if("*"===T[1]){if(-1!=y.indexOf(T[0]))return m.tryToParse(m.parsers[w],l,f,{documentURI:o},d)}else{if(-1!=y.indexOf(w))return m.tryToParse(m.parsers[w],l,f,{documentURI:o},d);if(-1!=y.indexOf(T[1]))return m.tryToParse(m.parsers[w],l,f,{documentURI:o},d)}}else if(-1!=y.indexOf(w))return m.tryToParse(m.parsers[w],l,f,{documentURI:o},d);d(new Error("Unknown media type : "+y))}else d(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(o,l,d,m){try{var c=this;J("fs").readFile(d.split("file:/")[1],function(k,y){k?m(k):(y=y.toString("utf8"),c.tryToParse(o,l,y,{documentURI:d},m))})}catch(k){m(k)}},e.prototype.tryToParse=function(o,l,d,m,c){try{"string"==typeof d&&(d=v.normalizeUnicodeLiterals(d)),o.parse(d,l,m,c)}catch(k){console.log(k.message),console.log(k.stack),c(k)}},re.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:4}],137:[function(J,re,le){var q=J("./utils"),u=J("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var F={};for(var v in this)q.include(this.interfaceProperties,v)||"function"==typeof this[v]||"defaultNs"===v||"interfaceProperties"===v||(F[v]=this[v]);return F},RDFModel.UrisMap.prototype.get=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[F]},RDFModel.UrisMap.prototype.remove=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[F],null},RDFModel.UrisMap.prototype.set=function(F,v){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";this[F]=v},RDFModel.UrisMap.prototype.setDefault=function(F){this.defaultNs=F},RDFModel.UrisMap.prototype.addAll=function(F,v){for(var e in F)q.include(this.interfaceProperties,e)||(null!=this[e]?!0===v&&(this[e]=F[e]):this[e]=F[e]);return this},RDFModel.UrisMap.prototype.resolve=function(F){var v=F.split(":"),e=v[0],o=v[1];return""===e?null==this.defaultNs?null:this.defaultNs+o:null!=this[e]?this[e]+o:null},RDFModel.UrisMap.prototype.shrink=function(F){for(var v in this){var e=this[v];if(0===F.indexOf(e)&&""!==e&&"defaultNs"!=v)return v+":"+F.split(e)[1]}return F},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(F,v){this.prefixes.addAll(F.prefixes,v),this.terms.addAll(F.terms,v)},RDFModel.Profile.prototype.resolve=function(F){return-1!=F.indexOf(":")?this.prefixes.resolve(F):null!=this.terms[F]?this.terms.resolve(F):null},RDFModel.Profile.prototype.setDefaultPrefix=function(F){this.prefixes.setDefault(F)},RDFModel.Profile.prototype.setDefaultVocabulary=function(F){this.terms.setDefault(F)},RDFModel.Profile.prototype.setPrefix=function(F,v){this.prefixes.set(F,v)},RDFModel.Profile.prototype.setTerm=function(F,v){this.terms.set(F,v)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var F=this;for(var v in this.filters={s:function(e){return function(o){return o.subject.equals(e)}},p:function(e){return function(o){return o.predicate.equals(e)}},o:function(e){return function(o){return o.object.equals(e)}},sp:function(e,o){return function(l){return l.subject.equals(e)&&l.predicate.equals(o)}},so:function(e,o){return function(l){return l.subject.equals(e)&&l.object.equals(o)}},po:function(e,o){return function(l){return l.predicate.equals(e)&&l.object.equals(o)}},spo:function(e,o,l){return function(d){return d.subject.equals(e)&&d.predicate.equals(o)&&d.object.equals(l)}},describes:function(e){return function(o){return o.subject.equals(e)||o.object.equals(e)}},type:function(e){var o=F.resolve("rdf:type");return function(l){return l.predicate.equals(o)&&l.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(v,RDFModel.defaultContext[v])},RDFModel.RDFEnvironment.prototype=q.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var F=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,F},RDFModel.RDFEnvironment.prototype.createNamedNode=function(F){var v=this.resolve(F);return null!=v?new RDFModel.NamedNode(v):new RDFModel.NamedNode(F)},RDFModel.RDFEnvironment.prototype.createLiteral=function(F,v,e){return null!=e?new RDFModel.Literal(F,v,e.toString()):new RDFModel.Literal(F,v,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(F,v,e){return new RDFModel.Triple(F,v,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(F){var v=new RDFModel.Graph;if(null!=F)for(var e=0;e<F.length;e++)v.add(F[e]);return v},RDFModel.RDFEnvironment.prototype.createAction=function(F,v){return function(e){return F(e)?v(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(F){if(!0===F)return new RDFModel.RDFEnvironment.Profile;var v=new RDFModel.RDFEnvironment.Profile;return v.importProfile(this),v},RDFModel.RDFEnvironment.prototype.createTermMap=function(F){if(!0===F)return new RDFModel.UrisMap;var v=this.terms.values(),e=new RDFModel.UrisMap;for(var o in v)e[o]=v[o];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(F){if(!0===F)return new RDFModel.UrisMap;var v=this.prefixes.values(),e=new RDFModel.UrisMap;for(var o in v)e[o]=v[o];return e},RDFModel.RDFNode=function(F){this.interfaceName=F,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(F){if(null==F.interfaceName)return this.valueOf()==F;for(var v in this.attributes){var e=this.attributes[v];if(this[e]!=F[e])return!1}return!0},RDFModel.BlankNode=function(F){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+F,this.bnodeId=F},RDFModel.BlankNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(F,v,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=F,null!=v?this.language=v:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var F='"'+this.nominalValue+'"';return null!=this.language?F=F+"@"+this.language:(null!=this.datatype||this.type)&&(F=F+"^^<"+(this.datatype||this.type)+">"),F},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return u.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(F){RDFModel.RDFNode.call(this,"NamedNode"),null!=F.value?this.nominalValue=F.value:this.nominalValue=F},RDFModel.NamedNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(F,v,e){this.subject=F,this.predicate=v,this.object=e},RDFModel.Triple.prototype.equals=function(F){return this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(F){for(var v=0;v<this.actions.length;v++)F=this.actions[v](F);var e=F.subject.toString()+F.predicate.toString()+F.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(F)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(F,v){if(this.actions.push(F),1==v)for(var e=0;e<this.triples.length;e++)this.triples[e]=F(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(F){for(var v=F.toArray(),e=0;e<v.length;e++)this.add(v[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(F){for(var v=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(F)){var o=F.subject.toString()+F.predicate.toString()+F.object.toString();delete this.duplicates[o],v=e;break}return null!=v&&this.triples.splice(v,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(F){for(var v=0;v<this.triples.length;v++)if(!0===F(this.triples[v],this))return!0;return!1},RDFModel.Graph.prototype.every=function(F){for(var v=0;v<this.triples.length;v++)if(!1===F(this.triples[v],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(F){for(var v=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===F(this.triples[e],this)&&v.add(this.triples[e]);return v},RDFModel.Graph.prototype.forEach=function(F){for(var v=0;v<this.triples.length;v++)F(this.triples[v],this)},RDFModel.Graph.prototype.merge=function(F){for(var v=new RDFModel.Graph,e=0;e<this.triples.length;e++)v.add(this.triples[e]);return v},RDFModel.Graph.prototype.match=function(F,v,e,o){for(var l=new RDFModel.Graph,d=0,m=0;m<this.triples.length;m++){var c=this.triples[m];if((null==F||c.subject.equals(F))&&(null==v||c.predicate.equals(v))&&(null==e||c.object.equals(e))){if(!(null==o||d<o))return l;d++,l.add(c)}}return l},RDFModel.Graph.prototype.removeMatches=function(F,v,e){for(var o=[],l=0;l<this.triples.length;l++){var d=this.triples[l];(null==F||d.subject.equals(F))&&(null==v||d.predicate.equals(v))&&(null==e||d.object.equals(e))&&o.push(d)}for(l=0;l<o.length;l++)this.remove(o[l]);return this},RDFModel.Graph.prototype.toNT=function(){var F="";return this.forEach(function(v){F+=v.toString()}),F},RDFModel.buildRDFResource=function(F,v,e,o){if("blank"===F.token)return RDFModel.buildBlankNode(F,v,e,o);if("literal"===F.token)return RDFModel.buildLiteral(F,v,e,o);if("uri"===F.token)return RDFModel.buildNamedNode(F,v,e,o);if("var"===F.token){var l=v[F.value];return null!=l?RDFModel.buildRDFResource(l,v,e,o):null}return null},RDFModel.buildBlankNode=function(F,v,e,o){return null!=F.valuetmp&&(F.value=F.valuetmp),0===F.value.indexOf("_:")&&(F.value=F.value.split("_:")[1]),new RDFModel.BlankNode(F.value)},RDFModel.buildLiteral=function(F,v,e,o){return new RDFModel.Literal(F.value,F.lang,F.type)},RDFModel.buildNamedNode=function(F,v,e,o){if(null!=F.value)return new RDFModel.NamedNode(F);if(null!=F.prefix){var l=e.resolveNsInEnvironment(F.prefix,o);return F.value=l+F.suffix,new RDFModel.NamedNode(F)}return new RDFModel.NamedNode(F)},RDFModel.rdf=new RDFModel.RDFEnvironment,re.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(J,re,le){var q=J("n3").Parser,u={};function F(v){switch(v[0]){case'"':if(v.indexOf("^^")>0){var e=v.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:v};case"_":return{blank:v.replace("b","")};default:return{token:"uri",value:v,prefix:null,suffix:null}}}u.parser={async:!0,parse:function(v,e,o,l){l||(l=o,o=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),o&&o.baseURI&&(o.documentIRI=o.baseURI);var d=[];new q(o).parse(v,function(m,c){m?l(m):c?d.push({subject:F(c.subject),predicate:F(c.predicate),object:F(c.object),graph:e}):l(!1,d)})},resetBlankNodeIds:function(){q._resetBlankNodeIds()}},re.exports={RVN3Parser:u}},{n3:51}],139:[function(J,re,le){var q=J("./query_engine").QueryEngine,u=J("./quad_backend").QuadBackend,F=J("./persistent_quad_backend").PersistentQuadBackend,v=J("./lexicon").Lexicon,e=J("./persistent_lexicon").PersistentLexicon,o=J("./rdf_model"),l=J("./utils");Store=function(d,m){var c=null,k=null;if(0==arguments.length)k={};else if(1==arguments.length)k={},c=d;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";k=d,c=m}null==k.treeOrder&&(k.treeOrder=15);var y=v,f=u;!0===k.persistent&&(y=e,f=F),this.functionMap={};var w=this;this.customFns={},new y(function(T){var I=function(){new f(k,function(W){var B=function(){k.backend=W,k.lexicon=T,w.engine=new q(k),c(null,w)};k.overwrite?W.clear(B):B()})};!0===k.overwrite?T.clear(I):I()},k.name)},Store.prototype.rdf=o.rdf,Store.prototype.rdf.api=o,Store.prototype.registerCustomFunction=function(d,m){this.customFns[d]=m,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var d;if(1===arguments.length){d=arguments[0];var m=function(){}}else 2===arguments.length&&(d=arguments[0],m=arguments[1]);this.engine.execute(d,m)}},Store.prototype.executeWithEnvironment=function(){var d,m,c;if(3===arguments.length){d=arguments[0];var k=function(){};m=arguments[1],c=arguments[2]}else 4===arguments.length&&(d=arguments[0],k=arguments[3],m=arguments[1],c=arguments[2]);m=l.map(m,function(y){return{token:"uri",value:y}}),c=l.map(c,function(y){return{token:"uri",value:y}}),this.engine.execute(d,k,m,c)},Store.prototype.graph=function(){var d=null,m=null;if(1===arguments.length)m=arguments[0]||function(){},d=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";m=arguments[1]||function(){},d=arguments[0]}null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",m)},Store.prototype.node=function(){var d=null,m=null,c=null;if(2===arguments.length)c=arguments[0],m=arguments[1]||function(){},d=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";c=arguments[0],d=arguments[1],m=arguments[2]||function(){}}null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),null!=this.rdf.resolve(c)&&(c=this.rdf.resolve(c)),this.engine.execute("CONSTRUCT { <"+c+"> ?p ?o } WHERE { GRAPH <"+d+"> { <"+c+"> ?p ?o } }",m)},Store.prototype.startObservingNode=function(){var d,m,c;2===arguments.length?(d=arguments[0],c=arguments[1],this.engine.callbacksBackend.observeNode(d,c,function(){})):3===arguments.length&&(d=arguments[0],m=arguments[1],c=arguments[2],this.engine.callbacksBackend.observeNode(d,m,c,function(){}))},Store.prototype.stopObservingNode=function(d){this.engine.callbacksBackend.stopObservingNode(d)},Store.prototype.startObservingQuery=function(){var d=arguments[0],m=arguments[1],c=arguments[2];null!=c?this.engine.callbacksBackend.observeQuery(d,m,c):this.engine.callbacksBackend.observeQuery(d,m,function(){})},Store.prototype.stopObservingQuery=function(d){this.engine.callbacksBackend.stopObservingQuery(d)},Store.prototype.subscribe=function(d,m,c,k,y){var f=this,w=function(T,I){var W=[],B={blanks:{},outCache:{}},L=[];l.each(I,function(E){var D=o.buildRDFResource(E.subject,L,f.engine,B),G=o.buildRDFResource(E.predicate,L,f.engine,B),K=o.buildRDFResource(E.object,L,f.engine,B);null!=D&&null!=G&&null!=K&&(E=new o.Triple(D,G,K),W.push(E))}),y(T,W)};this.functionMap[y]=w,this.engine.callbacksBackend.subscribe(d,m,c,k,w,function(){})},Store.prototype.unsubscribe=function(d){var m=this.functionMap[d];this.engine.callbacksBackend.unsubscribe(m),delete this.functionMap[d]},Store.prototype.setPrefix=function(d,m){this.rdf.setPrefix(d,m)},Store.prototype.setDefaultPrefix=function(d){this.rdf.setDefaultPrefix(d)},Store.prototype.insert=function(){var d,m,c;if(1===arguments.length)m=arguments[0],c=function(){};else if(2===arguments.length)m=arguments[0],c=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";m=arguments[0],d=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){}}var k="",y=this;m.forEach(function(f){k=k+y._nodeToQuery(f.subject)+y._nodeToQuery(f.predicate)+y._nodeToQuery(f.object)+"."}),k=null!=d?"INSERT DATA { GRAPH "+this._nodeToQuery(d)+" { "+k+" } }":"INSERT DATA { "+k+" }",this.engine.execute(k,c)},Store.prototype._nodeToQuery=function(d){if("NamedNode"===d.interfaceName){var m=this.rdf.resolve(d.valueOf());return null!=m?"<"+m+">":"<"+d.valueOf()+">"}return d.toString()},Store.prototype.delete=function(){var d,m,c;if(1===arguments.length)m=arguments[0],c=function(){};else if(2===arguments.length)m=arguments[0],c=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";m=arguments[0],d=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){}}var k="",y=this;m.forEach(function(f){k=k+y._nodeToQuery(f.subject)+y._nodeToQuery(f.predicate)+y._nodeToQuery(f.object)+"."}),k=null!=d?"DELETE DATA { GRAPH "+this._nodeToQuery(d)+" { "+k+" } }":"DELETE DATA { "+k+" }",this.engine.execute(k,c)},Store.prototype.clear=function(){var d;if(0===arguments.length){d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var m=function(){}}else if(1===arguments.length)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),m=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";d=this.rdf.createNamedNode(arguments[0]),m=arguments[1]||function(){}}var c="CLEAR GRAPH "+this._nodeToQuery(d);this.engine.execute(c,m)},Store.prototype.setBatchLoadEvents=function(d){this.engine.eventsOnBatchLoad=d},Store.prototype.registerDefaultNamespace=function(d,m){this.rdf.prefixes.set(d,m),this.engine.registerDefaultNamespace(d,m)},Store.prototype.registerDefaultProfileNamespaces=function(){var d=this.rdf.prefixes.values();for(var m in d)this.registerDefaultNamespace(m,d[m])},Store.prototype.load=function(){var d,m,c,k,y={};if(3===arguments.length)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0],m=arguments[1],k=arguments[2]||function(){};else if(4===arguments.length)d=arguments[0],m=arguments[1],"string"==typeof(y=arguments[2])?(c=this.rdf.createNamedNode(y),y={}):(c=this.rdf.createNamedNode(y.graph||this.engine.lexicon.defaultGraphUri),delete y.graph),k=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===d){var f="LOAD <"+(m=this.rdf.createNamedNode(m)).valueOf()+"> INTO GRAPH <"+c.valueOf()+">";this.engine.execute(f,k)}else{var w=this,T=this.engine.rdfLoader.parsers[d];if(!T)return k(new Error("Cannot find parser for the provided media type:"+d));var I=[T,{token:"uri",value:c.valueOf()},m,y,function(W,B){W?k(W,B):w.engine.batchLoad(B,function(L){null!=L?k(null,L):k(new Error("Error batch-loading triples."))})}];m&&"string"==typeof m&&0===m.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,I):this.engine.rdfLoader.tryToParse.apply(null,I)}},Store.prototype.registerParser=function(d,m){this.engine.rdfLoader.registerParser(d,m)},Store.prototype.registeredGraphs=function(d){this.engine.lexicon.registeredGraphs(!0,function(m){var c=l.map(m,function(k){return new o.NamedNode(k)});d(null,c)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(d){NetworkTransport=d},Store.prototype.close=function(d){null==d&&(d=function(){}),this.engine.close?this.engine.close(d):d()},Store.VERSION="0.9.18-alpha.6",Store.yieldFrequency=function(d){l.yieldFrequency(d)},re.exports.Store=Store,re.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},re.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(J){setTimeout(J,0)},spin=0,yieldFrequency=100,nextTick=function(J){++spin<yieldFrequency?J():(spin=0,slowNextTick(J))},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var re="l"+J.value;return re+=J.type||"",re+=J.lang||""}}catch(q){if("object"==typeof J){var le="";for(p in J)le=le+p+J[p];return le}return J}},lexicalFormBaseUri=function(J,re){var le=null;if(re=re||{},null==J.value){var q=J.prefix,u=J.suffix,F=re.namespaces[q];le=null!=F?F+u:q+":"+u}else le=J.value;return null===le?null:(-1==le.indexOf(":")&&(le=(re.base||"")+le),le)};parseISO8601=function(J){return Date.parse(J)},Date.prototype.toISOString||function(){function J(re){return re<10?"0"+re:re}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+J(this.getUTCMonth()+1)+"-"+J(this.getUTCDate())+"T"+J(this.getUTCHours())+":"+J(this.getUTCMinutes())+":"+J(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(J){return J.toISOString()},compareDateComponents=function(J,re){var le=parseISO8601(J),q=parseISO8601(re);return le==q?0:le<q?-1:1},lexicalFormLiteral=function(J,re){var le=J.value,q=J.lang,u=J.type,F=null;if(null!=le&&null!=u&&"string"!=typeof u){var v=u.value;if(null==v){var e=u.prefix,o=u.suffix,l=re.namespaces[e];J.type=l+o,v=l+o}F=-1!=v.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+v+">":'"'+J.value+'"^^<'+v+">"}else F=null==q&&null==u?'"'+le+'"':null==u?'"'+le+'"@'+q:-1!=u.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+u+">":'"'+J.value+'"^^<'+u+">";return F},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(J){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var re=_dereq_("sqlite3"),le=_dereq_("indexeddb-js"),q=new re.Database(":memory:"),u=le.makeScope("sqlite3",q);J.indexedDB=u.indexedDB,J.IDBKeyRange=u.IDBKeyRange}else{var F;(F="undefined"==typeof window?self:window).indexedDB=F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,F.IDBKeyRange=F.IDBKeyRange||F.webkitIDBKeyRange||F.msIDBKeyRange,F.indexedDB?(J.indexedDB=F.indexedDB,J.IDBKeyRange=F.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function J(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return J()+J()+"-"+J()+"-"+J()+"-"+J()+"-"+J()+J()+J()},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var re="l"+J.value;return re+=J.type||"",re+=J.lang||""}}catch(q){if("object"==typeof J){var le="";for(p in J)le=le+p+J[p];return le}return J}};var reject=function(J,re){for(var le=[],q=0;q<J.length;q++)re(J[q])&&le.push(J[q]);return le},include=function(J,re){for(var le=0;le<J.length;le++)if(J[le]===re)return!0;return!1},each=function(J,re){if(J.forEach)J.forEach(re);else for(var le=0;le<J.length;le++)re(J[le])},map=function(J,re){if(J.map)return J.map(re);for(var le=[],q=0;q<J.length;q++)le[q]=re(J[q]);return le},keys=function(J){var re=[];for(var le in J)re.push(le);return re},values=function(J){var re=[];for(var le in J)re.push(J[le]);return re},size=function(J){if(J.length)return J.length;var re=0;for(var le in J)re++;return re};clone=function(J){return JSON.parse(JSON.stringify(J))};var isObject=function(J){var re=typeof J;return"function"==re||J&&"object"==re||!1},create=function(){function J(){}return function(re){if(isObject(re)){J.prototype=re;var le=new J;J.prototype=null}return le||void 0}}(),whilst=function(J,re,le){J()?re(function(q){if(q)return le(q);whilst(J,re,le)}):le()},eachSeries=function(J,re,le){if(le=le||function(){},!J.length)return le();var q=0,u=function(){re(J[q],function(F){F?(le(F),le=function(){}):(q+=1)>=J.length?le():nextTick(u)})};u()},eachParallel=function(J,re,le){if(le=le||function(){},!J.length)return le();for(var q=!1,u=0,F=function(e){if(e)throw q=!0,new Error(e);q||++u===J.length&&le()},v=0;v<J.length;v++)!function(e,o,l,d){nextTick(function(){try{d(e[o],function(){l()})}catch(m){l(m)}})}(J,v,F,re)},reduce=function(J,re,le,q){eachSeries(J,function(u,F){le(re,u,function(v,e){re=e,F(v)})},function(u){q(u,re)})},seq=function(){var J=arguments;return function(){var re=this,le=Array.prototype.slice.call(arguments),q=le.pop();reduce(J,le,function(u,F,v){F.apply(re,u.concat([function(){var e=arguments[0],o=Array.prototype.slice.call(arguments,1);v(e,o)}]))},function(u,F){q.apply(re,[u].concat(F))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(J){yieldFrequency=J}}}).call(this)}).call(this,require("_process"))},{_process:59}]},{},[139])(139)}),function(J,re){"object"==typeof exports&&"undefined"!=typeof module?module.exports=re():"function"==typeof define&&define.amd?define(re):(J=J||self).CodeMirror=re()}(this,function(){"use strict";var J=navigator.userAgent,re=navigator.platform,le=/gecko\/\d/i.test(J),q=/MSIE \d/.test(J),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(J),F=/Edge\/(\d+)/.exec(J),v=q||u||F,e=v&&(q?document.documentMode||6:+(F||u)[1]),o=!F&&/WebKit\//.test(J),l=o&&/Qt\/\d+\.\d+/.test(J),d=!F&&/Chrome\/(\d+)/.exec(J),m=d&&+d[1],c=/Opera\//.test(J),k=/Apple Computer/.test(navigator.vendor),y=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(J),f=/PhantomJS/.test(J),w=k&&(/Mobile\/\w+/.test(J)||navigator.maxTouchPoints>2),T=/Android/.test(J),I=w||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(J),W=w||/Mac/.test(re),B=/\bCrOS\b/.test(J),L=/win/i.test(re),E=c&&J.match(/Version\/(\d*\.\d*)/);E&&(E=Number(E[1])),E&&E>=15&&(c=!1,o=!0);var D=W&&(l||c&&(null==E||E<12.11)),G=le||v&&e>=9;function K(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var oe,H=function(t,n){var h=t.className,a=K(n).exec(h);if(a){var b=h.slice(a.index+a[0].length);t.className=h.slice(0,a.index)+(b?a[1]+b:"")}};function ie(t){for(var n=t.childNodes.length;n>0;--n)t.removeChild(t.firstChild);return t}function ue(t,n){return ie(t).appendChild(n)}function ce(t,n,h,a){var b=document.createElement(t);if(h&&(b.className=h),a&&(b.style.cssText=a),"string"==typeof n)b.appendChild(document.createTextNode(n));else if(n)for(var j=0;j<n.length;++j)b.appendChild(n[j]);return b}function xe(t,n,h,a){var b=ce(t,n,h,a);return b.setAttribute("role","presentation"),b}function fe(t,n){if(3==n.nodeType&&(n=n.parentNode),t.contains)return t.contains(n);do{if(11==n.nodeType&&(n=n.host),n==t)return!0}while(n=n.parentNode)}function ee(t){var n;try{n=t.activeElement}catch(h){n=t.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function de(t,n){var h=t.className;K(n).test(h)||(t.className+=(h?" ":"")+n)}function ve(t,n){for(var h=t.split(" "),a=0;a<h.length;a++)h[a]&&!K(h[a]).test(n)&&(n+=" "+h[a]);return n}oe=document.createRange?function(t,n,h,a){var b=document.createRange();return b.setEnd(a||t,h),b.setStart(t,n),b}:function(t,n,h){var a=document.body.createTextRange();try{a.moveToElementText(t.parentNode)}catch(b){return a}return a.collapse(!0),a.moveEnd("character",h),a.moveStart("character",n),a};var Fe=function(t){t.select()};function Ne(t){return t.display.wrapper.ownerDocument}function Se(t){return Ne(t).defaultView}function be(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n)}}function Pe(t,n,h){for(var a in n||(n={}),t)t.hasOwnProperty(a)&&(!1!==h||!n.hasOwnProperty(a))&&(n[a]=t[a]);return n}function He(t,n,h,a,b){null==n&&(-1==(n=t.search(/[^\s\u00a0]/))&&(n=t.length));for(var j=a||0,X=b||0;;){var $=t.indexOf("\t",j);if($<0||$>=n)return X+(n-j);X+=$-j,X+=h-X%h,j=$+1}}w?Fe=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:v&&(Fe=function(t){try{t.select()}catch(n){}});var Je=function(){this.id=null,this.f=null,this.time=0,this.handler=be(this.onTimeout,this)};function M(t,n){for(var h=0;h<t.length;++h)if(t[h]==n)return h;return-1}Je.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Je.prototype.set=function(t,n){this.f=n;var h=+new Date+t;(!this.id||h<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=h)};var Y={toString:function(){return"CodeMirror.Pass"}},pe={scroll:!1},Ae={origin:"*mouse"},ye={origin:"+move"};function De(t,n,h){for(var a=0,b=0;;){var j=t.indexOf("\t",a);-1==j&&(j=t.length);var X=j-a;if(j==t.length||b+X>=n)return a+Math.min(X,n-b);if(b+=j-a,a=j+1,(b+=h-b%h)>=n)return a}}var Be=[""];function Xe(t){for(;Be.length<=t;)Be.push(ot(Be)+" ");return Be[t]}function ot(t){return t[t.length-1]}function ct(t,n){for(var h=[],a=0;a<t.length;a++)h[a]=n(t[a],a);return h}function jt(){}function Ee(t,n){var h;return Object.create?h=Object.create(t):(jt.prototype=t,h=new jt),n&&Pe(n,h),h}var Re=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function je(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Re.test(t))}function V(t,n){return n?!!(n.source.indexOf("\\w")>-1&&je(t))||n.test(t):je(t)}function ne(t){for(var n in t)if(t.hasOwnProperty(n)&&t[n])return!1;return!0}var he=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function me(t){return t.charCodeAt(0)>=768&&he.test(t)}function Le(t,n,h){for(;(h<0?n>0:n<t.length)&&me(t.charAt(n));)n+=h;return n}function _e(t,n,h){for(var a=n>h?-1:1;;){if(n==h)return n;var b=(n+h)/2,j=a<0?Math.ceil(b):Math.floor(b);if(j==n)return t(j)?n:h;t(j)?h=j:n=j+a}}var Ie=null;function We(t,n,h){var a;Ie=null;for(var b=0;b<t.length;++b){var j=t[b];if(j.from<n&&j.to>n)return b;j.to==n&&(j.from!=j.to&&"before"==h?a=b:Ie=b),j.from==n&&(j.from!=j.to&&"before"!=h?a=b:Ie=b)}return null!=a?a:Ie}var Ze=function(){function h(se){return se<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(se):1424<=se&&se<=1524?"R":1536<=se&&se<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(se-1536):1774<=se&&se<=2220?"r":8192<=se&&se<=8203?"w":8204==se?"b":"L"}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b=/[stwN]/,j=/[LRr]/,X=/[Lb1n]/,$=/[1n]/;function te(se,we,Te){this.level=se,this.from=we,this.to=Te}return function(se,we){var Te="ltr"==we?"L":"R";if(0==se.length||"ltr"==we&&!a.test(se))return!1;for(var Ue=se.length,Qe=[],Ye=0;Ye<Ue;++Ye)Qe.push(h(se.charCodeAt(Ye)));for(var tt=0,lt=Te;tt<Ue;++tt){var ht=Qe[tt];"m"==ht?Qe[tt]=lt:lt=ht}for(var dt=0,pt=Te;dt<Ue;++dt){var gt=Qe[dt];"1"==gt&&"r"==pt?Qe[dt]="n":j.test(gt)&&(pt=gt,"r"==gt&&(Qe[dt]="R"))}for(var _t=1,wt=Qe[0];_t<Ue-1;++_t){var Nt=Qe[_t];"+"==Nt&&"1"==wt&&"1"==Qe[_t+1]?Qe[_t]="1":","==Nt&&wt==Qe[_t+1]&&("1"==wt||"n"==wt)&&(Qe[_t]=wt),wt=Nt}for(var Gt=0;Gt<Ue;++Gt){var ar=Qe[Gt];if(","==ar)Qe[Gt]="N";else if("%"==ar){var Wt=void 0;for(Wt=Gt+1;Wt<Ue&&"%"==Qe[Wt];++Wt);for(var xr=Gt&&"!"==Qe[Gt-1]||Wt<Ue&&"1"==Qe[Wt]?"1":"N",wr=Gt;wr<Wt;++wr)Qe[wr]=xr;Gt=Wt-1}}for(var Vt=0,kr=Te;Vt<Ue;++Vt){var fr=Qe[Vt];"L"==kr&&"1"==fr?Qe[Vt]="L":j.test(fr)&&(kr=fr)}for(var er=0;er<Ue;++er)if(b.test(Qe[er])){var tr=void 0;for(tr=er+1;tr<Ue&&b.test(Qe[tr]);++tr);for(var zt="L"==(er?Qe[er-1]:Te),Zn=zt==("L"==(tr<Ue?Qe[tr]:Te))?zt?"L":"R":Te,On=er;On<tr;++On)Qe[On]=Zn;er=tr-1}for(var Zr,cr=[],rr=0;rr<Ue;)if(X.test(Qe[rr])){var Ca=rr;for(++rr;rr<Ue&&X.test(Qe[rr]);++rr);cr.push(new te(0,Ca,rr))}else{var $r=rr,$n=cr.length,ei="rtl"==we?1:0;for(++rr;rr<Ue&&"L"!=Qe[rr];++rr);for(var pr=$r;pr<rr;)if($.test(Qe[pr])){$r<pr&&(cr.splice($n,0,new te(1,$r,pr)),$n+=ei);var Ci=pr;for(++pr;pr<rr&&$.test(Qe[pr]);++pr);cr.splice($n,0,new te(2,Ci,pr)),$n+=ei,$r=pr}else++pr;$r<rr&&cr.splice($n,0,new te(1,$r,rr))}return"ltr"==we&&(1==cr[0].level&&(Zr=se.match(/^\s+/))&&(cr[0].from=Zr[0].length,cr.unshift(new te(0,0,Zr[0].length))),1==ot(cr).level&&(Zr=se.match(/\s+$/))&&(ot(cr).to-=Zr[0].length,cr.push(new te(0,Ue-Zr[0].length,Ue)))),"rtl"==we?cr.reverse():cr}}();function rt(t,n){var h=t.order;return null==h&&(h=t.order=Ze(t.text,n)),h}var Ke=[],et=function(t,n,h){if(t.addEventListener)t.addEventListener(n,h,!1);else if(t.attachEvent)t.attachEvent("on"+n,h);else{var a=t._handlers||(t._handlers={});a[n]=(a[n]||Ke).concat(h)}};function kt(t,n){return t._handlers&&t._handlers[n]||Ke}function vt(t,n,h){if(t.removeEventListener)t.removeEventListener(n,h,!1);else if(t.detachEvent)t.detachEvent("on"+n,h);else{var a=t._handlers,b=a&&a[n];if(b){var j=M(b,h);j>-1&&(a[n]=b.slice(0,j).concat(b.slice(j+1)))}}}function mt(t,n){var h=kt(t,n);if(h.length)for(var a=Array.prototype.slice.call(arguments,2),b=0;b<h.length;++b)h[b].apply(null,a)}function bt(t,n,h){return"string"==typeof n&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),mt(t,h||n.type,t,n),Dn(n)||n.codemirrorIgnore}function yt(t){var n=t._handlers&&t._handlers.cursorActivity;if(n)for(var h=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),a=0;a<n.length;++a)-1==M(h,n[a])&&h.push(n[a])}function at(t,n){return kt(t,n).length>0}function Tt(t){t.prototype.on=function(n,h){et(this,n,h)},t.prototype.off=function(n,h){vt(this,n,h)}}function Ct(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Et(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Dn(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function mn(t){Ct(t),Et(t)}function Ti(t){return t.target||t.srcElement}function po(t){var n=t.which;return null==n&&(1&t.button?n=1:2&t.button?n=3:4&t.button&&(n=2)),W&&t.ctrlKey&&1==n&&(n=3),n}var Ni,Wr,ys=function(){if(v&&e<9)return!1;var t=ce("div");return"draggable"in t||"dragDrop"in t}();function ms(t){if(null==Ni){var n=ce("span","\u200b");ue(t,ce("span",[n,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ni=n.offsetWidth<=1&&n.offsetHeight>2&&!(v&&e<8))}var h=Ni?ce("span","\u200b"):ce("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return h.setAttribute("cm-text",""),h}function ni(t){if(null!=Wr)return Wr;var n=ue(t,document.createTextNode("A\u062eA")),h=oe(n,0,1).getBoundingClientRect(),a=oe(n,1,2).getBoundingClientRect();return ie(t),!(!h||h.left==h.right)&&(Wr=a.right-h.right<3)}var t,jr=3!="\n\nb".split(/\n/).length?function(t){for(var n=0,h=[],a=t.length;n<=a;){var b=t.indexOf("\n",n);-1==b&&(b=t.length);var j=t.slice(n,"\r"==t.charAt(b-1)?b-1:b),X=j.indexOf("\r");-1!=X?(h.push(j.slice(0,X)),n+=X+1):(h.push(j),n=b+1)}return h}:function(t){return t.split(/\r\n?|\n/)},ii=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(n){return!1}}:function(t){var n;try{n=t.ownerDocument.selection.createRange()}catch(h){}return!(!n||n.parentElement()!=t)&&0!=n.compareEndPoints("StartToEnd",n)},vo="oncopy"in(t=ce("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),zr=null;var Mn={},tn={};function qr(t,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Mn[t]=n}function bn(t){if("string"==typeof t&&tn.hasOwnProperty(t))t=tn[t];else if(t&&"string"==typeof t.name&&tn.hasOwnProperty(t.name)){var n=tn[t.name];"string"==typeof n&&(n={name:n}),(t=Ee(n,t)).name=n.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return bn("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return bn("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function oi(t,n){n=bn(n);var h=Mn[n.name];if(!h)return oi(t,"text/plain");var a=h(t,n);if(Ir.hasOwnProperty(n.name)){var b=Ir[n.name];for(var j in b)!b.hasOwnProperty(j)||(a.hasOwnProperty(j)&&(a["_"+j]=a[j]),a[j]=b[j])}if(a.name=n.name,n.helperType&&(a.helperType=n.helperType),n.modeProps)for(var X in n.modeProps)a[X]=n.modeProps[X];return a}var Ir={};function xs(t,n){Pe(n,Ir.hasOwnProperty(t)?Ir[t]:Ir[t]={})}function Or(t,n){if(!0===n)return n;if(t.copyState)return t.copyState(n);var h={};for(var a in n){var b=n[a];b instanceof Array&&(b=b.concat([])),h[a]=b}return h}function yo(t,n){for(var h;t.innerMode&&((h=t.innerMode(n))&&h.mode!=t);)n=h.state,t=h.mode;return h||{mode:t,state:n}}function Li(t,n,h){return!t.startState||t.startState(n,h)}var Jt=function(t,n,h){this.pos=this.start=0,this.string=t,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=h};function xt(t,n){if((n-=t.first)<0||n>=t.size)throw new Error("There is no line "+(n+t.first)+" in the document.");for(var h=t;!h.lines;)for(var a=0;;++a){var b=h.children[a],j=b.chunkSize();if(n<j){h=b;break}n-=j}return h.lines[n]}function Pn(t,n,h){var a=[],b=n.line;return t.iter(n.line,h.line+1,function(j){var X=j.text;b==h.line&&(X=X.slice(0,h.ch)),b==n.line&&(X=X.slice(n.ch)),a.push(X),++b}),a}function ws(t,n,h){var a=[];return t.iter(n,h,function(b){a.push(b.text)}),a}function Jr(t,n){var h=n-t.height;if(h)for(var a=t;a;a=a.parent)a.height+=h}function Qt(t){if(null==t.parent)return null;for(var n=t.parent,h=M(n.lines,t),a=n.parent;a;n=a,a=a.parent)for(var b=0;a.children[b]!=n;++b)h+=a.children[b].chunkSize();return h+n.first}function xn(t,n){var h=t.first;e:do{for(var a=0;a<t.children.length;++a){var b=t.children[a],j=b.height;if(n<j){t=b;continue e}n-=j,h+=b.chunkSize()}return h}while(!t.lines);for(var X=0;X<t.lines.length;++X){var te=t.lines[X].height;if(n<te)break;n-=te}return h+X}function Ii(t,n){return n>=t.first&&n<t.first+t.size}function mo(t,n){return String(t.lineNumberFormatter(n+t.firstLineNumber))}function st(t,n,h){if(void 0===h&&(h=null),!(this instanceof st))return new st(t,n,h);this.line=t,this.ch=n,this.sticky=h}function St(t,n){return t.line-n.line||t.ch-n.ch}function ks(t,n){return t.sticky==n.sticky&&0==St(t,n)}function bo(t){return st(t.line,t.ch)}function xo(t,n){return St(t,n)<0?n:t}function Oi(t,n){return St(t,n)<0?t:n}function Ra(t,n){return Math.max(t.first,Math.min(n,t.first+t.size-1))}function At(t,n){if(n.line<t.first)return st(t.first,0);var h=t.first+t.size-1;return n.line>h?st(h,xt(t,h).text.length):function Lu(t,n){var h=t.ch;return null==h||h>n?st(t.line,n):h<0?st(t.line,0):t}(n,xt(t,n.line).text.length)}function _s(t,n){for(var h=[],a=0;a<n.length;a++)h[a]=At(t,n[a]);return h}Jt.prototype.eol=function(){return this.pos>=this.string.length},Jt.prototype.sol=function(){return this.pos==this.lineStart},Jt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Jt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Jt.prototype.eat=function(t){var n=this.string.charAt(this.pos);if("string"==typeof t?n==t:n&&(t.test?t.test(n):t(n)))return++this.pos,n},Jt.prototype.eatWhile=function(t){for(var n=this.pos;this.eat(t););return this.pos>n},Jt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Jt.prototype.skipToEnd=function(){this.pos=this.string.length},Jt.prototype.skipTo=function(t){var n=this.string.indexOf(t,this.pos);if(n>-1)return this.pos=n,!0},Jt.prototype.backUp=function(t){this.pos-=t},Jt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=He(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?He(this.string,this.lineStart,this.tabSize):0)},Jt.prototype.indentation=function(){return He(this.string,null,this.tabSize)-(this.lineStart?He(this.string,this.lineStart,this.tabSize):0)},Jt.prototype.match=function(t,n,h){if("string"!=typeof t){var j=this.string.slice(this.pos).match(t);return j&&j.index>0?null:(j&&!1!==n&&(this.pos+=j[0].length),j)}var a=function(X){return h?X.toLowerCase():X};if(a(this.string.substr(this.pos,t.length))==a(t))return!1!==n&&(this.pos+=t.length),!0},Jt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Jt.prototype.hideFirstChars=function(t,n){this.lineStart+=t;try{return n()}finally{this.lineStart-=t}},Jt.prototype.lookAhead=function(t){var n=this.lineOracle;return n&&n.lookAhead(t)},Jt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var wo=function(t,n){this.state=t,this.lookAhead=n},Dr=function(t,n,h,a){this.state=n,this.doc=t,this.line=h,this.maxLookAhead=a||0,this.baseTokens=null,this.baseTokenPos=1};function ja(t,n,h,a){var b=[t.state.modeGen],j={};Qa(t,n.text,t.doc.mode,h,function(se,we){return b.push(se,we)},j,a);for(var X=h.state,$=function(se){h.baseTokens=b;var we=t.state.overlays[se],Te=1,Ue=0;h.state=!0,Qa(t,n.text,we.mode,h,function(Qe,Ye){for(var tt=Te;Ue<Qe;){var lt=b[Te];lt>Qe&&b.splice(Te,1,Qe,b[Te+1],lt),Te+=2,Ue=Math.min(Qe,lt)}if(Ye)if(we.opaque)b.splice(tt,Te-tt,Qe,"overlay "+Ye),Te=tt+2;else for(;tt<Te;tt+=2){var ht=b[tt+1];b[tt+1]=(ht?ht+" ":"")+"overlay "+Ye}},j),h.state=X,h.baseTokens=null,h.baseTokenPos=1},te=0;te<t.state.overlays.length;++te)$(te);return{styles:b,classes:j.bgClass||j.textClass?j:null}}function Cs(t,n,h){if(!n.styles||n.styles[0]!=t.state.modeGen){var a=Ri(t,Qt(n)),b=n.text.length>t.options.maxHighlightLength&&Or(t.doc.mode,a.state),j=ja(t,n,a);b&&(a.state=b),n.stateAfter=a.save(!b),n.styles=j.styles,j.classes?n.styleClasses=j.classes:n.styleClasses&&(n.styleClasses=null),h===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return n.styles}function Ri(t,n,h){var a=t.doc,b=t.display;if(!a.mode.startState)return new Dr(a,!0,n);var j=function Ua(t,n,h){for(var a,b,j=t.doc,X=h?-1:n-(t.doc.mode.innerMode?1e3:100),$=n;$>X;--$){if($<=j.first)return j.first;var te=xt(j,$-1),se=te.stateAfter;if(se&&(!h||$+(se instanceof wo?se.lookAhead:0)<=j.modeFrontier))return $;var we=He(te.text,null,t.options.tabSize);(null==b||a>we)&&(b=$-1,a=we)}return b}(t,n,h),X=j>a.first&&xt(a,j-1).stateAfter,$=X?Dr.fromSaved(a,X,j):new Dr(a,Li(a.mode),j);return a.iter(j,n,function(te){ko(t,te.text,$);var se=$.line;te.stateAfter=se==n-1||se%5==0||se>=b.viewFrom&&se<b.viewTo?$.save():null,$.nextLine()}),h&&(a.modeFrontier=$.line),$}function ko(t,n,h,a){var b=t.doc.mode,j=new Jt(n,t.options.tabSize,h);for(j.start=j.pos=a||0,""==n&&Da(b,h.state);!j.eol();)Ss(b,j,h.state),j.start=j.pos}function Da(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var h=yo(t,n);if(h.mode.blankLine)return h.mode.blankLine(h.state)}}function Ss(t,n,h,a){for(var b=0;b<10;b++){a&&(a[0]=yo(t,h).mode);var j=t.token(n,h);if(n.pos>n.start)return j}throw new Error("Mode "+t.name+" failed to advance stream.")}Dr.prototype.lookAhead=function(t){var n=this.doc.getLine(this.line+t);return null!=n&&t>this.maxLookAhead&&(this.maxLookAhead=t),n},Dr.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Dr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Dr.fromSaved=function(t,n,h){return n instanceof wo?new Dr(t,Or(t.mode,n.state),h,n.lookAhead):new Dr(t,Or(t.mode,n),h)},Dr.prototype.save=function(t){var n=!1!==t?Or(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new wo(n,this.maxLookAhead):n};var Ma=function(t,n,h){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=n||null,this.state=h};function Pa(t,n,h,a){var X,we,b=t.doc,j=b.mode,$=xt(b,(n=At(b,n)).line),te=Ri(t,n.line,h),se=new Jt($.text,t.options.tabSize,te);for(a&&(we=[]);(a||se.pos<n.ch)&&!se.eol();)se.start=se.pos,X=Ss(j,se,te.state),a&&we.push(new Ma(se,X,Or(b.mode,te.state)));return a?we:new Ma(se,X,te.state)}function Ba(t,n){if(t)for(;;){var h=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!h)break;t=t.slice(0,h.index)+t.slice(h.index+h[0].length);var a=h[1]?"bgClass":"textClass";null==n[a]?n[a]=h[2]:new RegExp("(?:^|\\s)"+h[2]+"(?:$|\\s)").test(n[a])||(n[a]+=" "+h[2])}return t}function Qa(t,n,h,a,b,j,X){var $=h.flattenSpans;null==$&&($=t.options.flattenSpans);var Te,te=0,se=null,we=new Jt(n,t.options.tabSize,a),Ue=t.options.addModeClass&&[null];for(""==n&&Ba(Da(h,a.state),j);!we.eol();){if(we.pos>t.options.maxHighlightLength?($=!1,X&&ko(t,n,a,we.pos),we.pos=n.length,Te=null):Te=Ba(Ss(h,we,a.state,Ue),j),Ue){var Qe=Ue[0].name;Qe&&(Te="m-"+(Te?Qe+" "+Te:Qe))}if(!$||se!=Te){for(;te<we.start;)b(te=Math.min(we.start,te+5e3),se);se=Te}we.start=we.pos}for(;te<we.pos;){var Ye=Math.min(we.pos,te+5e3);b(Ye,se),te=Ye}}var As=!1,rn=!1;function ji(t,n,h){this.marker=t,this.from=n,this.to=h}function Di(t,n){if(t)for(var h=0;h<t.length;++h){var a=t[h];if(a.marker==n)return a}}function Ga(t,n){for(var h,a=0;a<t.length;++a)t[a]!=n&&(h||(h=[])).push(t[a]);return h}function _o(t,n){if(n.full)return null;var h=Ii(t,n.from.line)&&xt(t,n.from.line).markedSpans,a=Ii(t,n.to.line)&&xt(t,n.to.line).markedSpans;if(!h&&!a)return null;var b=n.from.ch,j=n.to.ch,X=0==St(n.from,n.to),$=function Du(t,n,h){var a;if(t)for(var b=0;b<t.length;++b){var j=t[b],X=j.marker;if(null==j.from||(X.inclusiveLeft?j.from<=n:j.from<n)||j.from==n&&"bookmark"==X.type&&(!h||!j.marker.insertLeft)){var te=null==j.to||(X.inclusiveRight?j.to>=n:j.to>n);(a||(a=[])).push(new ji(X,j.from,te?null:j.to))}}return a}(h,b,X),te=function Mu(t,n,h){var a;if(t)for(var b=0;b<t.length;++b){var j=t[b],X=j.marker;if(null==j.to||(X.inclusiveRight?j.to>=n:j.to>n)||j.from==n&&"bookmark"==X.type&&(!h||j.marker.insertLeft)){var te=null==j.from||(X.inclusiveLeft?j.from<=n:j.from<n);(a||(a=[])).push(new ji(X,te?null:j.from-n,null==j.to?null:j.to-n))}}return a}(a,j,X),se=1==n.text.length,we=ot(n.text).length+(se?b:0);if($)for(var Te=0;Te<$.length;++Te){var Ue=$[Te];if(null==Ue.to){var Qe=Di(te,Ue.marker);Qe?se&&(Ue.to=null==Qe.to?null:Qe.to+we):Ue.to=b}}if(te)for(var Ye=0;Ye<te.length;++Ye){var tt=te[Ye];if(null!=tt.to&&(tt.to+=we),null==tt.from)Di($,tt.marker)||(tt.from=we,se&&($||($=[])).push(tt));else tt.from+=we,se&&($||($=[])).push(tt)}$&&($=Ha($)),te&&te!=$&&(te=Ha(te));var ht=[$];if(!se){var pt,dt=n.text.length-2;if(dt>0&&$)for(var gt=0;gt<$.length;++gt)null==$[gt].to&&(pt||(pt=[])).push(new ji($[gt].marker,null,null));for(var _t=0;_t<dt;++_t)ht.push(pt);ht.push(te)}return ht}function Ha(t){for(var n=0;n<t.length;++n){var h=t[n];null!=h.from&&h.from==h.to&&!1!==h.marker.clearWhenEmpty&&t.splice(n--,1)}return t.length?t:null}function Mi(t){var n=t.markedSpans;if(n){for(var h=0;h<n.length;++h)n[h].marker.detachLine(t);t.markedSpans=null}}function Fs(t,n){if(n){for(var h=0;h<n.length;++h)n[h].marker.attachLine(t);t.markedSpans=n}}function Co(t){return t.inclusiveLeft?-1:0}function Bn(t){return t.inclusiveRight?1:0}function So(t,n){var h=t.lines.length-n.lines.length;if(0!=h)return h;var a=t.find(),b=n.find(),j=St(a.from,b.from)||Co(t)-Co(n);return j?-j:St(a.to,b.to)||Bn(t)-Bn(n)||n.id-t.id}function Pi(t,n){var a,h=rn&&t.markedSpans;if(h)for(var b=void 0,j=0;j<h.length;++j)(b=h[j]).marker.collapsed&&null==(n?b.from:b.to)&&(!a||So(a,b.marker)<0)&&(a=b.marker);return a}function Es(t){return Pi(t,!0)}function Ao(t){return Pi(t,!1)}function Bu(t,n){var a,h=rn&&t.markedSpans;if(h)for(var b=0;b<h.length;++b){var j=h[b];j.marker.collapsed&&(null==j.from||j.from<n)&&(null==j.to||j.to>n)&&(!a||So(a,j.marker)<0)&&(a=j.marker)}return a}function Wa(t,n,h,a,b){var j=xt(t,n),X=rn&&j.markedSpans;if(X)for(var $=0;$<X.length;++$){var te=X[$];if(te.marker.collapsed){var se=te.marker.find(0),we=St(se.from,h)||Co(te.marker)-Co(b),Te=St(se.to,a)||Bn(te.marker)-Bn(b);if(!(we>=0&&Te<=0||we<=0&&Te>=0)&&(we<=0&&(te.marker.inclusiveRight&&b.inclusiveLeft?St(se.to,h)>=0:St(se.to,h)>0)||we>=0&&(te.marker.inclusiveRight&&b.inclusiveLeft?St(se.from,a)<=0:St(se.from,a)<0)))return!0}}}function nr(t){for(var n;n=Es(t);)t=n.find(-1,!0).line;return t}function Ts(t,n){var h=xt(t,n),a=nr(h);return h==a?n:Qt(a)}function za(t,n){if(n>t.lastLine())return n;var a,h=xt(t,n);if(!on(t,h))return n;for(;a=Ao(h);)h=a.find(1,!0).line;return Qt(h)+1}function on(t,n){var h=rn&&n.markedSpans;if(h)for(var a=void 0,b=0;b<h.length;++b)if((a=h[b]).marker.collapsed){if(null==a.from)return!0;if(!a.marker.widgetNode&&0==a.from&&a.marker.inclusiveLeft&&Ns(t,n,a))return!0}}function Ns(t,n,h){if(null==h.to){var a=h.marker.find(1,!0);return Ns(t,a.line,Di(a.line.markedSpans,h.marker))}if(h.marker.inclusiveRight&&h.to==n.text.length)return!0;for(var b=void 0,j=0;j<n.markedSpans.length;++j)if((b=n.markedSpans[j]).marker.collapsed&&!b.marker.widgetNode&&b.from==h.to&&(null==b.to||b.to!=h.from)&&(b.marker.inclusiveLeft||h.marker.inclusiveRight)&&Ns(t,n,b))return!0}function Xr(t){for(var n=0,h=(t=nr(t)).parent,a=0;a<h.lines.length;++a){var b=h.lines[a];if(b==t)break;n+=b.height}for(var j=h.parent;j;j=(h=j).parent)for(var X=0;X<j.children.length;++X){var $=j.children[X];if($==h)break;n+=$.height}return n}function Fo(t){if(0==t.height)return 0;for(var h,n=t.text.length,a=t;h=Es(a);){var b=h.find(0,!0);a=b.from.line,n+=b.from.ch-b.to.ch}for(a=t;h=Ao(a);){var j=h.find(0,!0);n-=a.text.length-j.from.ch,n+=(a=j.to.line).text.length-j.to.ch}return n}function Eo(t){var n=t.display,h=t.doc;n.maxLine=xt(h,h.first),n.maxLineLength=Fo(n.maxLine),n.maxLineChanged=!0,h.iter(function(a){var b=Fo(a);b>n.maxLineLength&&(n.maxLineLength=b,n.maxLine=a)})}var si=function(t,n,h){this.text=t,Fs(this,n),this.height=h?h(this):1};function Uu(t){t.parent=null,Mi(t)}si.prototype.lineNo=function(){return Qt(this)},Tt(si);var Gu={},Hu={};function Ls(t,n){if(!t||/^\s*$/.test(t))return null;var h=n.addModeClass?Hu:Gu;return h[t]||(h[t]=t.replace(/\S+/g,"cm-$&"))}function Ja(t,n){var h=xe("span",null,null,o?"padding-right: .1px":null),a={pre:xe("pre",[h],"CodeMirror-line"),content:h,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};n.measure={};for(var b=0;b<=(n.rest?n.rest.length:0);b++){var j=b?n.rest[b-1]:n.line,X=void 0;a.pos=0,a.addToken=Wu,ni(t.display.measure)&&(X=rt(j,t.doc.direction))&&(a.addToken=Is(a.addToken,X)),a.map=[],Os(j,a,Cs(t,j,n!=t.display.externalMeasured&&Qt(j))),j.styleClasses&&(j.styleClasses.bgClass&&(a.bgClass=ve(j.styleClasses.bgClass,a.bgClass||"")),j.styleClasses.textClass&&(a.textClass=ve(j.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(ms(t.display.measure))),0==b?(n.measure.map=a.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(a.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(o){var te=a.content.lastChild;(/\bcm-tab\b/.test(te.className)||te.querySelector&&te.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return mt(t,"renderLine",t,n.line,a.pre),a.pre.className&&(a.textClass=ve(a.pre.className,a.textClass||"")),a}function Xa(t){var n=ce("span","\u2022","cm-invalidchar");return n.title="\\u"+t.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function Wu(t,n,h,a,b,j,X){if(n){var we,$=t.splitSpaces?function ai(t,n){if(t.length>1&&!/  /.test(t))return t;for(var h=n,a="",b=0;b<t.length;b++){var j=t.charAt(b);" "==j&&h&&(b==t.length-1||32==t.charCodeAt(b+1))&&(j="\xa0"),a+=j,h=" "==j}return a}(n,t.trailingSpace):n,te=t.cm.state.specialChars,se=!1;if(te.test(n)){we=document.createDocumentFragment();for(var Te=0;;){te.lastIndex=Te;var Ue=te.exec(n),Qe=Ue?Ue.index-Te:n.length-Te;if(Qe){var Ye=document.createTextNode($.slice(Te,Te+Qe));v&&e<9?we.appendChild(ce("span",[Ye])):we.appendChild(Ye),t.map.push(t.pos,t.pos+Qe,Ye),t.col+=Qe,t.pos+=Qe}if(!Ue)break;Te+=Qe+1;var tt=void 0;if("\t"==Ue[0]){var lt=t.cm.options.tabSize,ht=lt-t.col%lt;(tt=we.appendChild(ce("span",Xe(ht),"cm-tab"))).setAttribute("role","presentation"),tt.setAttribute("cm-text","\t"),t.col+=ht}else"\r"==Ue[0]||"\n"==Ue[0]?((tt=we.appendChild(ce("span","\r"==Ue[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Ue[0]),t.col+=1):((tt=t.cm.options.specialCharPlaceholder(Ue[0])).setAttribute("cm-text",Ue[0]),v&&e<9?we.appendChild(ce("span",[tt])):we.appendChild(tt),t.col+=1);t.map.push(t.pos,t.pos+1,tt),t.pos++}}else t.col+=n.length,we=document.createTextNode($),t.map.push(t.pos,t.pos+n.length,we),v&&e<9&&(se=!0),t.pos+=n.length;if(t.trailingSpace=32==$.charCodeAt(n.length-1),h||a||b||se||j||X){var dt=h||"";a&&(dt+=a),b&&(dt+=b);var pt=ce("span",[we],dt,j);if(X)for(var gt in X)X.hasOwnProperty(gt)&&"style"!=gt&&"class"!=gt&&pt.setAttribute(gt,X[gt]);return t.content.appendChild(pt)}t.content.appendChild(we)}}function Is(t,n){return function(h,a,b,j,X,$,te){b=b?b+" cm-force-border":"cm-force-border";for(var se=h.pos,we=se+a.length;;){for(var Te=void 0,Ue=0;Ue<n.length&&!((Te=n[Ue]).to>se&&Te.from<=se);Ue++);if(Te.to>=we)return t(h,a,b,j,X,$,te);t(h,a.slice(0,Te.to-se),b,j,null,$,te),j=null,a=a.slice(Te.to-se),se=Te.to}}}function Qn(t,n,h,a){var b=!a&&h.widgetNode;b&&t.map.push(t.pos,t.pos+n,b),!a&&t.cm.display.input.needsContentAttribute&&(b||(b=t.content.appendChild(document.createElement("span"))),b.setAttribute("cm-marker",h.id)),b&&(t.cm.display.input.setUneditable(b),t.content.appendChild(b)),t.pos+=n,t.trailingSpace=!1}function Os(t,n,h){var a=t.markedSpans,b=t.text,j=0;if(a)for(var Te,Ue,Ye,tt,lt,ht,dt,$=b.length,te=0,se=1,we="",Qe=0;;){if(Qe==te){Ye=tt=lt=Ue="",dt=null,ht=null,Qe=1/0;for(var pt=[],gt=void 0,_t=0;_t<a.length;++_t){var wt=a[_t],Nt=wt.marker;if("bookmark"==Nt.type&&wt.from==te&&Nt.widgetNode)pt.push(Nt);else if(wt.from<=te&&(null==wt.to||wt.to>te||Nt.collapsed&&wt.to==te&&wt.from==te)){if(null!=wt.to&&wt.to!=te&&Qe>wt.to&&(Qe=wt.to,tt=""),Nt.className&&(Ye+=" "+Nt.className),Nt.css&&(Ue=(Ue?Ue+";":"")+Nt.css),Nt.startStyle&&wt.from==te&&(lt+=" "+Nt.startStyle),Nt.endStyle&&wt.to==Qe&&(gt||(gt=[])).push(Nt.endStyle,wt.to),Nt.title&&((dt||(dt={})).title=Nt.title),Nt.attributes)for(var Gt in Nt.attributes)(dt||(dt={}))[Gt]=Nt.attributes[Gt];Nt.collapsed&&(!ht||So(ht.marker,Nt)<0)&&(ht=wt)}else wt.from>te&&Qe>wt.from&&(Qe=wt.from)}if(gt)for(var ar=0;ar<gt.length;ar+=2)gt[ar+1]==Qe&&(tt+=" "+gt[ar]);if(!ht||ht.from==te)for(var Wt=0;Wt<pt.length;++Wt)Qn(n,0,pt[Wt]);if(ht&&(ht.from||0)==te){if(Qn(n,(null==ht.to?$+1:ht.to)-te,ht.marker,null==ht.from),null==ht.to)return;ht.to==te&&(ht=!1)}}if(te>=$)break;for(var xr=Math.min($,Qe);;){if(we){var wr=te+we.length;if(!ht){var Vt=wr>xr?we.slice(0,xr-te):we;n.addToken(n,Vt,Te?Te+Ye:Ye,lt,te+Vt.length==Qe?tt:"",Ue,dt)}if(wr>=xr){we=we.slice(xr-te),te=xr;break}te=wr,lt=""}we=b.slice(j,j=h[se++]),Te=Ls(h[se++],n.cm.options)}}else for(var X=1;X<h.length;X+=2)n.addToken(n,b.slice(j,j=h[X]),Ls(h[X+1],n.cm.options))}function Va(t,n,h){this.line=n,this.rest=function Qu(t){for(var n,h;n=Ao(t);)t=n.find(1,!0).line,(h||(h=[])).push(t);return h}(n),this.size=this.rest?Qt(ot(this.rest))-h+1:1,this.node=this.text=null,this.hidden=on(t,n)}function To(t,n,h){for(var b,a=[],j=n;j<h;j=b){var X=new Va(t.doc,xt(t.doc,j),j);b=j+X.size,a.push(X)}return a}var Un=null;var Bi=null;function ir(t,n){var h=kt(t,n);if(h.length){var b,a=Array.prototype.slice.call(arguments,2);Un?b=Un.delayedCallbacks:Bi?b=Bi:(b=Bi=[],setTimeout(Ya,0));for(var j=function($){b.push(function(){return h[$].apply(null,a)})},X=0;X<h.length;++X)j(X)}}function Ya(){var t=Bi;Bi=null;for(var n=0;n<t.length;++n)t[n]()}function Za(t,n,h,a){for(var b=0;b<n.changes.length;b++){var j=n.changes[b];"text"==j?Xu(t,n):"gutter"==j?Rs(t,n,h,a):"class"==j?ui(t,n):"widget"==j&&No(t,n,a)}n.changes=null}function li(t){return t.node==t.text&&(t.node=ce("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),v&&e<8&&(t.node.style.zIndex=2)),t.node}function $a(t,n){var h=t.display.externalMeasured;return h&&h.line==n.line?(t.display.externalMeasured=null,n.measure=h.measure,h.built):Ja(t,n)}function Xu(t,n){var h=n.text.className,a=$a(t,n);n.text==n.node&&(n.node=a.pre),n.text.parentNode.replaceChild(a.pre,n.text),n.text=a.pre,a.bgClass!=n.bgClass||a.textClass!=n.textClass?(n.bgClass=a.bgClass,n.textClass=a.textClass,ui(t,n)):h&&(n.text.className=h)}function ui(t,n){(function Ju(t,n){var h=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(h&&(h+=" CodeMirror-linebackground"),n.background)h?n.background.className=h:(n.background.parentNode.removeChild(n.background),n.background=null);else if(h){var a=li(n);n.background=a.insertBefore(ce("div",null,h),a.firstChild),t.display.input.setUneditable(n.background)}})(t,n),n.line.wrapClass?li(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className="");var h=n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass;n.text.className=h||""}function Rs(t,n,h,a){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var b=li(n);n.gutterBackground=ce("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(t.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px"),t.display.input.setUneditable(n.gutterBackground),b.insertBefore(n.gutterBackground,n.text)}var j=n.line.gutterMarkers;if(t.options.lineNumbers||j){var X=li(n),$=n.gutter=ce("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px");if($.setAttribute("aria-hidden","true"),t.display.input.setUneditable($),X.insertBefore($,n.text),n.line.gutterClass&&($.className+=" "+n.line.gutterClass),t.options.lineNumbers&&(!j||!j["CodeMirror-linenumbers"])&&(n.lineNumber=$.appendChild(ce("div",mo(t.options,h),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),j)for(var te=0;te<t.display.gutterSpecs.length;++te){var se=t.display.gutterSpecs[te].className,we=j.hasOwnProperty(se)&&j[se];we&&$.appendChild(ce("div",[we],"CodeMirror-gutter-elt","left: "+a.gutterLeft[se]+"px; width: "+a.gutterWidth[se]+"px"))}}}function No(t,n,h){n.alignable&&(n.alignable=null);for(var a=K("CodeMirror-linewidget"),b=n.node.firstChild,j=void 0;b;b=j)j=b.nextSibling,a.test(b.className)&&n.node.removeChild(b);Qi(t,n,h)}function el(t,n,h,a){var b=$a(t,n);return n.text=n.node=b.pre,b.bgClass&&(n.bgClass=b.bgClass),b.textClass&&(n.textClass=b.textClass),ui(t,n),Rs(t,n,h,a),Qi(t,n,a),n.node}function Qi(t,n,h){if(js(t,n.line,n,h,!0),n.rest)for(var a=0;a<n.rest.length;a++)js(t,n.rest[a],n,h,!1)}function js(t,n,h,a,b){if(n.widgets)for(var j=li(h),X=0,$=n.widgets;X<$.length;++X){var te=$[X],se=ce("div",[te.node],"CodeMirror-linewidget"+(te.className?" "+te.className:""));te.handleMouseEvents||se.setAttribute("cm-ignore-events","true"),Lo(te,se,h,a),t.display.input.setUneditable(se),b&&te.above?j.insertBefore(se,h.gutter||h.text):j.appendChild(se),ir(te,"redraw")}}function Lo(t,n,h,a){if(t.noHScroll){(h.alignable||(h.alignable=[])).push(n);var b=a.wrapperWidth;n.style.left=a.fixedPos+"px",t.coverGutter||(b-=a.gutterTotalWidth,n.style.paddingLeft=a.gutterTotalWidth+"px"),n.style.width=b+"px"}t.coverGutter&&(n.style.zIndex=5,n.style.position="relative",t.noHScroll||(n.style.marginLeft=-a.gutterTotalWidth+"px"))}function fi(t){if(null!=t.height)return t.height;var n=t.doc.cm;if(!n)return 0;if(!fe(document.body,t.node)){var h="position: relative;";t.coverGutter&&(h+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),t.noHScroll&&(h+="width: "+n.display.wrapper.clientWidth+"px;"),ue(n.display.measure,ce("div",[t.node],null,h))}return t.height=t.node.parentNode.offsetHeight}function sn(t,n){for(var h=Ti(n);h!=t.wrapper;h=h.parentNode)if(!h||1==h.nodeType&&"true"==h.getAttribute("cm-ignore-events")||h.parentNode==t.sizer&&h!=t.mover)return!0}function Io(t){return t.lineSpace.offsetTop}function wn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Oo(t){if(t.cachedPaddingH)return t.cachedPaddingH;var n=ue(t.measure,ce("pre","x","CodeMirror-line-like")),h=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,a={left:parseInt(h.paddingLeft),right:parseInt(h.paddingRight)};return!isNaN(a.left)&&!isNaN(a.right)&&(t.cachedPaddingH=a),a}function mr(t){return 50-t.display.nativeBarWidth}function an(t){return t.display.scroller.clientWidth-mr(t)-t.display.barWidth}function Ds(t){return t.display.scroller.clientHeight-mr(t)-t.display.barHeight}function tl(t,n,h){if(t.line==n)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var a=0;a<t.rest.length;a++)if(t.rest[a]==n)return{map:t.measure.maps[a],cache:t.measure.caches[a]};for(var b=0;b<t.rest.length;b++)if(Qt(t.rest[b])>h)return{map:t.measure.maps[b],cache:t.measure.caches[b],before:!0}}}function Ms(t,n,h,a){return Vr(t,Gn(t,n),h,a)}function Ps(t,n){if(n>=t.display.viewFrom&&n<t.display.viewTo)return t.display.view[Xt(t,n)];var h=t.display.externalMeasured;return h&&n>=h.lineN&&n<h.lineN+h.size?h:void 0}function Gn(t,n){var h=Qt(n),a=Ps(t,h);a&&!a.text?a=null:a&&a.changes&&(Za(t,a,h,Ws(t)),t.curOp.forceUpdate=!0),a||(a=function Ku(t,n){var h=Qt(n=nr(n)),a=t.display.externalMeasured=new Va(t.doc,n,h);a.lineN=h;var b=a.built=Ja(t,a);return a.text=b.pre,ue(t.display.lineMeasure,b.pre),a}(t,n));var b=tl(a,n,h);return{line:n,view:a,rect:null,map:b.map,cache:b.cache,before:b.before,hasHeights:!1}}function Vr(t,n,h,a,b){n.before&&(h=-1);var X,j=h+(a||"");return n.cache.hasOwnProperty(j)?X=n.cache[j]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(function Vu(t,n,h){var a=t.options.lineWrapping,b=a&&an(t);if(!n.measure.heights||a&&n.measure.width!=b){var j=n.measure.heights=[];if(a){n.measure.width=b;for(var X=n.text.firstChild.getClientRects(),$=0;$<X.length-1;$++){var te=X[$],se=X[$+1];Math.abs(te.bottom-se.bottom)>2&&j.push((te.bottom+se.top)/2-h.top)}}j.push(h.bottom-h.top)}}(t,n.view,n.rect),n.hasHeights=!0),X=function Yu(t,n,h,a){var se,b=nl(n.map,h,a),j=b.node,X=b.start,$=b.end,te=b.collapse;if(3==j.nodeType){for(var we=0;we<4;we++){for(;X&&me(n.line.text.charAt(b.coverStart+X));)--X;for(;b.coverStart+$<b.coverEnd&&me(n.line.text.charAt(b.coverStart+$));)++$;if((se=v&&e<9&&0==X&&$==b.coverEnd-b.coverStart?j.parentNode.getBoundingClientRect():il(oe(j,X,$).getClientRects(),a)).left||se.right||0==X)break;$=X,X-=1,te="right"}v&&e<11&&(se=function Zu(t,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function go(t){if(null!=zr)return zr;var n=ue(t,ce("span","x")),h=n.getBoundingClientRect(),a=oe(n,0,1).getBoundingClientRect();return zr=Math.abs(h.left-a.left)>1}(t))return n;var h=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*h,right:n.right*h,top:n.top*a,bottom:n.bottom*a}}(t.display.measure,se))}else{var Te;X>0&&(te=a="right"),se=t.options.lineWrapping&&(Te=j.getClientRects()).length>1?Te["right"==a?Te.length-1:0]:j.getBoundingClientRect()}if(v&&e<9&&!X&&(!se||!se.left&&!se.right)){var Ue=j.parentNode.getClientRects()[0];se=Ue?{left:Ue.left,right:Ue.left+hi(t.display),top:Ue.top,bottom:Ue.bottom}:rl}for(var Qe=se.top-n.rect.top,Ye=se.bottom-n.rect.top,tt=(Qe+Ye)/2,lt=n.view.measure.heights,ht=0;ht<lt.length-1&&!(tt<lt[ht]);ht++);var dt=ht?lt[ht-1]:0,pt=lt[ht],gt={left:("right"==te?se.right:se.left)-n.rect.left,right:("left"==te?se.left:se.right)-n.rect.left,top:dt,bottom:pt};return!se.left&&!se.right&&(gt.bogus=!0),t.options.singleCursorHeightPerLine||(gt.rtop=Qe,gt.rbottom=Ye),gt}(t,n,h,a),X.bogus||(n.cache[j]=X)),{left:X.left,right:X.right,top:b?X.rtop:X.top,bottom:b?X.rbottom:X.bottom}}var Hn,rl={left:0,right:0,top:0,bottom:0};function nl(t,n,h){for(var a,b,j,X,$,te,se=0;se<t.length;se+=3)if($=t[se],te=t[se+1],n<$?(b=0,j=1,X="left"):n<te?j=(b=n-$)+1:(se==t.length-3||n==te&&t[se+3]>n)&&(b=(j=te-$)-1,n>=te&&(X="right")),null!=b){if(a=t[se+2],$==te&&h==(a.insertLeft?"left":"right")&&(X=h),"left"==h&&0==b)for(;se&&t[se-2]==t[se-3]&&t[se-1].insertLeft;)a=t[2+(se-=3)],X="left";if("right"==h&&b==te-$)for(;se<t.length-3&&t[se+3]==t[se+4]&&!t[se+5].insertLeft;)a=t[(se+=3)+2],X="right";break}return{node:a,start:b,end:j,collapse:X,coverStart:$,coverEnd:te}}function il(t,n){var h=rl;if("left"==n)for(var a=0;a<t.length&&(h=t[a]).left==h.right;a++);else for(var b=t.length-1;b>=0&&(h=t[b]).left==h.right;b--);return h}function Bs(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var n=0;n<t.rest.length;n++)t.measure.caches[n]={}}function ol(t){t.display.externalMeasure=null,ie(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)Bs(t.display.view[n])}function ci(t){ol(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function sl(t){return d&&T?-(t.body.getBoundingClientRect().left-parseInt(getComputedStyle(t.body).marginLeft)):t.defaultView.pageXOffset||(t.documentElement||t.body).scrollLeft}function al(t){return d&&T?-(t.body.getBoundingClientRect().top-parseInt(getComputedStyle(t.body).marginTop)):t.defaultView.pageYOffset||(t.documentElement||t.body).scrollTop}function Qs(t){var h=nr(t).widgets,a=0;if(h)for(var b=0;b<h.length;++b)h[b].above&&(a+=fi(h[b]));return a}function ln(t,n,h,a,b){if(!b){var j=Qs(n);h.top+=j,h.bottom+=j}if("line"==a)return h;a||(a="local");var X=Xr(n);if("local"==a?X+=Io(t.display):X-=t.display.viewOffset,"page"==a||"window"==a){var $=t.display.lineSpace.getBoundingClientRect();X+=$.top+("window"==a?0:al(Ne(t)));var te=$.left+("window"==a?0:sl(Ne(t)));h.left+=te,h.right+=te}return h.top+=X,h.bottom+=X,h}function Ro(t,n,h){if("div"==h)return n;var a=n.left,b=n.top;if("page"==h)a-=sl(Ne(t)),b-=al(Ne(t));else if("local"==h||!h){var j=t.display.sizer.getBoundingClientRect();a+=j.left,b+=j.top}var X=t.display.lineSpace.getBoundingClientRect();return{left:a-X.left,top:b-X.top}}function un(t,n,h,a,b){return a||(a=xt(t.doc,n.line)),ln(t,a,Ms(t,a,n.ch,b),h)}function Tr(t,n,h,a,b,j){function X(Ye,tt){var lt=Vr(t,b,Ye,tt?"right":"left",j);return tt?lt.left=lt.right:lt.right=lt.left,ln(t,a,lt,h)}a=a||xt(t.doc,n.line),b||(b=Gn(t,a));var $=rt(a,t.doc.direction),te=n.ch,se=n.sticky;if(te>=a.text.length?(te=a.text.length,se="before"):te<=0&&(te=0,se="after"),!$)return X("before"==se?te-1:te,"before"==se);function we(Ye,tt,lt){return X(lt?Ye-1:Ye,1==$[tt].level!=lt)}var Te=We($,te,se),Ue=Ie,Qe=we(te,Te,"before"==se);return null!=Ue&&(Qe.other=we(te,Ue,"before"!=se)),Qe}function ll(t,n){var h=0;n=At(t.doc,n),t.options.lineWrapping||(h=hi(t.display)*n.ch);var a=xt(t.doc,n.line),b=Xr(a)+Io(t.display);return{left:h,right:h,top:b,bottom:b+a.height}}function Us(t,n,h,a,b){var j=st(t,n,h);return j.xRel=b,a&&(j.outside=a),j}function jo(t,n,h){var a=t.doc;if((h+=t.display.viewOffset)<0)return Us(a.first,0,null,-1,-1);var b=xn(a,h),j=a.first+a.size-1;if(b>j)return Us(a.first+a.size-1,xt(a,j).text.length,null,1,1);n<0&&(n=0);for(var X=xt(a,b);;){var $=$u(t,X,b,n,h),te=Bu(X,$.ch+($.xRel>0||$.outside>0?1:0));if(!te)return $;var se=te.find(1);if(se.line==b)return se;X=xt(a,b=se.line)}}function ul(t,n,h,a){a-=Qs(n);var b=n.text.length,j=_e(function(X){return Vr(t,h,X-1).bottom<=a},b,0);return{begin:j,end:b=_e(function(X){return Vr(t,h,X).top>a},j,b)}}function Gs(t,n,h,a){return h||(h=Gn(t,n)),ul(t,n,h,ln(t,n,Vr(t,h,a),"line").top)}function Hs(t,n,h,a){return!(t.bottom<=h)&&(t.top>h||(a?t.left:t.right)>n)}function $u(t,n,h,a,b){b-=Xr(n);var j=Gn(t,n),X=Qs(n),$=0,te=n.text.length,se=!0,we=rt(n,t.doc.direction);if(we){var Te=(t.options.lineWrapping?fl:ef)(t,n,h,j,we,a,b);$=(se=1!=Te.level)?Te.from:Te.to-1,te=se?Te.to:Te.from-1}var tt,lt,Ue=null,Qe=null,Ye=_e(function(_t){var wt=Vr(t,j,_t);return wt.top+=X,wt.bottom+=X,!!Hs(wt,a,b,!1)&&(wt.top<=b&&wt.left<=a&&(Ue=_t,Qe=wt),!0)},$,te),ht=!1;if(Qe){var dt=a-Qe.left<Qe.right-a,pt=dt==se;Ye=Ue+(pt?0:1),lt=pt?"after":"before",tt=dt?Qe.left:Qe.right}else{!se&&(Ye==te||Ye==$)&&Ye++,lt=0==Ye?"after":Ye==n.text.length?"before":Vr(t,j,Ye-(se?1:0)).bottom+X<=b==se?"after":"before";var gt=Tr(t,st(h,Ye,lt),"line",n,j);tt=gt.left,ht=b<gt.top?-1:b>=gt.bottom?1:0}return Us(h,Ye=Le(n.text,Ye,1),lt,ht,a-tt)}function ef(t,n,h,a,b,j,X){var $=_e(function(Te){var Ue=b[Te],Qe=1!=Ue.level;return Hs(Tr(t,st(h,Qe?Ue.to:Ue.from,Qe?"before":"after"),"line",n,a),j,X,!0)},0,b.length-1),te=b[$];if($>0){var se=1!=te.level,we=Tr(t,st(h,se?te.from:te.to,se?"after":"before"),"line",n,a);Hs(we,j,X,!0)&&we.top>X&&(te=b[$-1])}return te}function fl(t,n,h,a,b,j,X){var $=ul(t,n,a,X),te=$.begin,se=$.end;/\s/.test(n.text.charAt(se-1))&&se--;for(var we=null,Te=null,Ue=0;Ue<b.length;Ue++){var Qe=b[Ue];if(!(Qe.from>=se||Qe.to<=te)){var tt=Vr(t,a,1!=Qe.level?Math.min(se,Qe.to)-1:Math.max(te,Qe.from)).right,lt=tt<j?j-tt+1e9:tt-j;(!we||Te>lt)&&(we=Qe,Te=lt)}}return we||(we=b[b.length-1]),we.from<te&&(we={from:te,to:we.to,level:we.level}),we.to>se&&(we={from:we.from,to:se,level:we.level}),we}function Wn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Hn){Hn=ce("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)Hn.appendChild(document.createTextNode("x")),Hn.appendChild(ce("br"));Hn.appendChild(document.createTextNode("x"))}ue(t.measure,Hn);var h=Hn.offsetHeight/50;return h>3&&(t.cachedTextHeight=h),ie(t.measure),h||1}function hi(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var n=ce("span","xxxxxxxxxx"),h=ce("pre",[n],"CodeMirror-line-like");ue(t.measure,h);var a=n.getBoundingClientRect(),b=(a.right-a.left)/10;return b>2&&(t.cachedCharWidth=b),b||10}function Ws(t){for(var n=t.display,h={},a={},b=n.gutters.clientLeft,j=n.gutters.firstChild,X=0;j;j=j.nextSibling,++X){var $=t.display.gutterSpecs[X].className;h[$]=j.offsetLeft+j.clientLeft+b,a[$]=j.clientWidth}return{fixedPos:zs(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:h,gutterWidth:a,wrapperWidth:n.wrapper.clientWidth}}function zs(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function qs(t){var n=Wn(t.display),h=t.options.lineWrapping,a=h&&Math.max(5,t.display.scroller.clientWidth/hi(t.display)-3);return function(b){if(on(t.doc,b))return 0;var j=0;if(b.widgets)for(var X=0;X<b.widgets.length;X++)b.widgets[X].height&&(j+=b.widgets[X].height);return h?j+(Math.ceil(b.text.length/a)||1)*n:j+n}}function Js(t){var n=t.doc,h=qs(t);n.iter(function(a){var b=h(a);b!=a.height&&Jr(a,b)})}function zn(t,n,h,a){var b=t.display;if(!h&&"true"==Ti(n).getAttribute("cm-not-content"))return null;var j,X,$=b.lineSpace.getBoundingClientRect();try{j=n.clientX-$.left,X=n.clientY-$.top}catch(Te){return null}var se,te=jo(t,j,X);if(a&&te.xRel>0&&(se=xt(t.doc,te.line).text).length==te.ch){var we=He(se,se.length,t.options.tabSize)-se.length;te=st(te.line,Math.max(0,Math.round((j-Oo(t.display).left)/hi(t.display))-we))}return te}function Xt(t,n){if(n>=t.display.viewTo||(n-=t.display.viewFrom)<0)return null;for(var h=t.display.view,a=0;a<h.length;a++)if((n-=h[a].size)<0)return a}function Ut(t,n,h,a){null==n&&(n=t.doc.first),null==h&&(h=t.doc.first+t.doc.size),a||(a=0);var b=t.display;if(a&&h<b.viewTo&&(null==b.updateLineNumbers||b.updateLineNumbers>n)&&(b.updateLineNumbers=n),t.curOp.viewChanged=!0,n>=b.viewTo)rn&&Ts(t.doc,n)<b.viewTo&&_n(t);else if(h<=b.viewFrom)rn&&za(t.doc,h+a)>b.viewFrom?_n(t):(b.viewFrom+=a,b.viewTo+=a);else if(n<=b.viewFrom&&h>=b.viewTo)_n(t);else if(n<=b.viewFrom){var j=Do(t,h,h+a,1);j?(b.view=b.view.slice(j.index),b.viewFrom=j.lineN,b.viewTo+=a):_n(t)}else if(h>=b.viewTo){var X=Do(t,n,n,-1);X?(b.view=b.view.slice(0,X.index),b.viewTo=X.lineN):_n(t)}else{var $=Do(t,n,n,-1),te=Do(t,h,h+a,1);$&&te?(b.view=b.view.slice(0,$.index).concat(To(t,$.lineN,te.lineN)).concat(b.view.slice(te.index)),b.viewTo+=a):_n(t)}var se=b.externalMeasured;se&&(h<se.lineN?se.lineN+=a:n<se.lineN+se.size&&(b.externalMeasured=null))}function kn(t,n,h){t.curOp.viewChanged=!0;var a=t.display,b=t.display.externalMeasured;if(b&&n>=b.lineN&&n<b.lineN+b.size&&(a.externalMeasured=null),!(n<a.viewFrom||n>=a.viewTo)){var j=a.view[Xt(t,n)];if(null!=j.node){var X=j.changes||(j.changes=[]);-1==M(X,h)&&X.push(h)}}}function _n(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Do(t,n,h,a){var j,b=Xt(t,n),X=t.display.view;if(!rn||h==t.doc.first+t.doc.size)return{index:b,lineN:h};for(var $=t.display.viewFrom,te=0;te<b;te++)$+=X[te].size;if($!=n){if(a>0){if(b==X.length-1)return null;j=$+X[b].size-n,b++}else j=$-n;n+=j,h+=j}for(;Ts(t.doc,h)!=h;){if(b==(a<0?0:X.length-1))return null;h+=a*X[b-(a<0?1:0)].size,b+=a}return{index:b,lineN:h}}function cl(t){for(var n=t.display.view,h=0,a=0;a<n.length;a++){var b=n[a];!b.hidden&&(!b.node||b.changes)&&++h}return h}function Ui(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Mo(t,n){void 0===n&&(n=!0);var h=t.doc,a={},b=a.cursors=document.createDocumentFragment(),j=a.selection=document.createDocumentFragment(),X=t.options.$customCursor;X&&(n=!0);for(var $=0;$<h.sel.ranges.length;$++)if(n||$!=h.sel.primIndex){var te=h.sel.ranges[$];if(!(te.from().line>=t.display.viewTo||te.to().line<t.display.viewFrom)){var se=te.empty();if(X){var we=X(t,te);we&&Xs(t,we,b)}else(se||t.options.showCursorWhenSelecting)&&Xs(t,te.head,b);se||rf(t,te,j)}}return a}function Xs(t,n,h){var a=Tr(t,n,"div",null,null,!t.options.singleCursorHeightPerLine),b=h.appendChild(ce("div","\xa0","CodeMirror-cursor"));if(b.style.left=a.left+"px",b.style.top=a.top+"px",b.style.height=Math.max(0,a.bottom-a.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var j=un(t,n,"div",null,null),X=j.right-j.left;b.style.width=(X>0?X:t.defaultCharWidth())+"px"}if(a.other){var $=h.appendChild(ce("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));$.style.display="",$.style.left=a.other.left+"px",$.style.top=a.other.top+"px",$.style.height=.85*(a.other.bottom-a.other.top)+"px"}}function Po(t,n){return t.top-n.top||t.left-n.left}function rf(t,n,h){var a=t.display,b=t.doc,j=document.createDocumentFragment(),X=Oo(t.display),$=X.left,te=Math.max(a.sizerWidth,an(t)-a.sizer.offsetLeft)-X.right,se="ltr"==b.direction;function we(pt,gt,_t,wt){gt<0&&(gt=0),gt=Math.round(gt),wt=Math.round(wt),j.appendChild(ce("div",null,"CodeMirror-selected","position: absolute; left: "+pt+"px;\n                             top: "+gt+"px; width: "+(null==_t?te-pt:_t)+"px;\n                             height: "+(wt-gt)+"px"))}function Te(pt,gt,_t){var Gt,ar,wt=xt(b,pt),Nt=wt.text.length;function Wt(Vt,kr){return un(t,st(pt,Vt),"div",wt,kr)}function xr(Vt,kr,fr){var er=Gs(t,wt,null,Vt),tr="ltr"==kr==("after"==fr)?"left":"right";return Wt("after"==fr?er.begin:er.end-(/\s/.test(wt.text.charAt(er.end-1))?2:1),tr)[tr]}var wr=rt(wt,b.direction);return function ke(t,n,h,a){if(!t)return a(n,h,"ltr",0);for(var b=!1,j=0;j<t.length;++j){var X=t[j];(X.from<h&&X.to>n||n==h&&X.to==n)&&(a(Math.max(X.from,n),Math.min(X.to,h),1==X.level?"rtl":"ltr",j),b=!0)}b||a(n,h,"ltr")}(wr,gt||0,null==_t?Nt:_t,function(Vt,kr,fr,er){var tr="ltr"==fr,zt=Wt(Vt,tr?"left":"right"),_r=Wt(kr-1,tr?"right":"left"),Zn=null==gt&&0==Vt,On=null==_t&&kr==Nt,cr=0==er,Zr=!wr||er==wr.length-1;if(_r.top-zt.top<=3){var Ca=(se?On:Zn)&&Zr,$r=(se?Zn:On)&&cr?$:(tr?zt:_r).left,$n=Ca?te:(tr?_r:zt).right;we($r,zt.top,$n-$r,zt.bottom)}else{var ei,pr,Ci,fs;tr?(ei=se&&Zn&&cr?$:zt.left,pr=se?te:xr(Vt,fr,"before"),Ci=se?$:xr(kr,fr,"after"),fs=se&&On&&Zr?te:_r.right):(ei=se?xr(Vt,fr,"before"):$,pr=!se&&Zn&&cr?te:zt.right,Ci=!se&&On&&Zr?$:_r.left,fs=se?xr(kr,fr,"after"):te),we(ei,zt.top,pr-ei,zt.bottom),zt.bottom<_r.top&&we($,zt.bottom,null,_r.top),we(Ci,_r.top,fs-Ci,_r.bottom)}(!Gt||Po(zt,Gt)<0)&&(Gt=zt),Po(_r,Gt)<0&&(Gt=_r),(!ar||Po(zt,ar)<0)&&(ar=zt),Po(_r,ar)<0&&(ar=_r)}),{start:Gt,end:ar}}var Ue=n.from(),Qe=n.to();if(Ue.line==Qe.line)Te(Ue.line,Ue.ch,Qe.ch);else{var Ye=xt(b,Ue.line),tt=xt(b,Qe.line),lt=nr(Ye)==nr(tt),ht=Te(Ue.line,Ue.ch,lt?Ye.text.length+1:null).end,dt=Te(Qe.line,lt?0:null,Qe.ch).start;lt&&(ht.top<dt.top-2?(we(ht.right,ht.top,null,ht.bottom),we($,dt.top,dt.left,dt.bottom)):we(ht.right,ht.top,dt.left-ht.right,ht.bottom)),ht.bottom<dt.top&&we($,ht.bottom,null,dt.top)}h.appendChild(j)}function Vs(t){if(t.state.focused){var n=t.display;clearInterval(n.blinker);var h=!0;n.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?n.blinker=setInterval(function(){t.hasFocus()||pi(t),n.cursorDiv.style.visibility=(h=!h)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function hl(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Bo(t))}function Ks(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&pi(t))},100)}function Bo(t,n){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(mt(t,"focus",t,n),t.state.focused=!0,de(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),o&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Vs(t))}function pi(t,n){t.state.delayingBlurEvent||(t.state.focused&&(mt(t,"blur",t,n),t.state.focused=!1,H(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Gi(t){for(var n=t.display,h=n.lineDiv.offsetTop,a=Math.max(0,n.scroller.getBoundingClientRect().top),b=n.lineDiv.getBoundingClientRect().top,j=0,X=0;X<n.view.length;X++){var $=n.view[X],te=t.options.lineWrapping,se=void 0,we=0;if(!$.hidden){if(b+=$.line.height,v&&e<8){var Te=$.node.offsetTop+$.node.offsetHeight;se=Te-h,h=Te}else{var Ue=$.node.getBoundingClientRect();se=Ue.bottom-Ue.top,!te&&$.text.firstChild&&(we=$.text.firstChild.getBoundingClientRect().right-Ue.left-1)}var Qe=$.line.height-se;if((Qe>.005||Qe<-.005)&&(b<a&&(j-=Qe),Jr($.line,se),pl($.line),$.rest))for(var Ye=0;Ye<$.rest.length;Ye++)pl($.rest[Ye]);if(we>t.display.sizerWidth){var tt=Math.ceil(we/hi(t.display));tt>t.display.maxLineLength&&(t.display.maxLineLength=tt,t.display.maxLine=$.line,t.display.maxLineChanged=!0)}}}Math.abs(j)>2&&(n.scroller.scrollTop+=j)}function pl(t){if(t.widgets)for(var n=0;n<t.widgets.length;++n){var h=t.widgets[n],a=h.node.parentNode;a&&(h.height=a.offsetHeight)}}function Qo(t,n,h){var a=h&&null!=h.top?Math.max(0,h.top):t.scroller.scrollTop;a=Math.floor(a-Io(t));var b=h&&null!=h.bottom?h.bottom:a+t.wrapper.clientHeight,j=xn(n,a),X=xn(n,b);if(h&&h.ensure){var $=h.ensure.from.line,te=h.ensure.to.line;$<j?(j=$,X=xn(n,Xr(xt(n,$))+t.wrapper.clientHeight)):Math.min(te,n.lastLine())>=X&&(j=xn(n,Xr(xt(n,te))-t.wrapper.clientHeight),X=te)}return{from:j,to:Math.max(X,j+1)}}function Uo(t,n){var h=t.display,a=Wn(t.display);n.top<0&&(n.top=0);var b=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:h.scroller.scrollTop,j=Ds(t),X={};n.bottom-n.top>j&&(n.bottom=n.top+j);var $=t.doc.height+wn(h),te=n.top<a,se=n.bottom>$-a;if(n.top<b)X.scrollTop=te?0:n.top;else if(n.bottom>b+j){var we=Math.min(n.top,(se?$:n.bottom)-j);we!=b&&(X.scrollTop=we)}var Te=t.options.fixedGutter?0:h.gutters.offsetWidth,Ue=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:h.scroller.scrollLeft-Te,Qe=an(t)-h.gutters.offsetWidth,Ye=n.right-n.left>Qe;return Ye&&(n.right=n.left+Qe),n.left<10?X.scrollLeft=0:n.left<Ue?X.scrollLeft=Math.max(0,n.left+Te-(Ye?0:10)):n.right>Qe+Ue-3&&(X.scrollLeft=n.right+(Ye?0:10)-Qe),X}function Ys(t,n){null!=n&&(Go(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function di(t){Go(t);var n=t.getCursor();t.curOp.scrollToPos={from:n,to:n,margin:t.options.cursorScrollMargin}}function Hi(t,n,h){(null!=n||null!=h)&&Go(t),null!=n&&(t.curOp.scrollLeft=n),null!=h&&(t.curOp.scrollTop=h)}function Go(t){var n=t.curOp.scrollToPos;n&&(t.curOp.scrollToPos=null,Zs(t,ll(t,n.from),ll(t,n.to),n.margin))}function Zs(t,n,h,a){var b=Uo(t,{left:Math.min(n.left,h.left),top:Math.min(n.top,h.top)-a,right:Math.max(n.right,h.right),bottom:Math.max(n.bottom,h.bottom)+a});Hi(t,b.scrollLeft,b.scrollTop)}function Wi(t,n){Math.abs(t.doc.scrollTop-n)<2||(le||ta(t,{top:n}),vl(t,n,!0),le&&ta(t),zi(t,100))}function vl(t,n,h){n=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,n)),(t.display.scroller.scrollTop!=n||h)&&(t.doc.scrollTop=n,t.display.scrollbars.setScrollTop(n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n))}function qn(t,n,h,a){n=Math.max(0,Math.min(n,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(!(h?n==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-n)<2)||a)&&(t.doc.scrollLeft=n,kl(t),t.display.scroller.scrollLeft!=n&&(t.display.scroller.scrollLeft=n),t.display.scrollbars.setScrollLeft(n))}function Cn(t){var n=t.display,h=n.gutters.offsetWidth,a=Math.round(t.doc.height+wn(t.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:t.options.fixedGutter?h:0,docHeight:a,scrollHeight:a+mr(t)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:h}}var Sn=function(t,n,h){this.cm=h;var a=this.vert=ce("div",[ce("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),b=this.horiz=ce("div",[ce("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=b.tabIndex=-1,t(a),t(b),et(a,"scroll",function(){a.clientHeight&&n(a.scrollTop,"vertical")}),et(b,"scroll",function(){b.clientWidth&&n(b.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,v&&e<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Sn.prototype.update=function(t){var n=t.scrollWidth>t.clientWidth+1,h=t.scrollHeight>t.clientHeight+1,a=t.nativeBarWidth;if(h){this.vert.style.display="block",this.vert.style.bottom=n?a+"px":"0";var b=t.viewHeight-(n?a:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+b)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(n){this.horiz.style.display="block",this.horiz.style.right=h?a+"px":"0",this.horiz.style.left=t.barLeft+"px";var j=t.viewWidth-t.barLeft-(h?a:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+j)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==a&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:h?a:0,bottom:n?a:0}},Sn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Sn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Sn.prototype.zeroWidthHack=function(){var t=W&&!y?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Je,this.disableVert=new Je},Sn.prototype.enableZeroWidthBar=function(t,n,h){t.style.visibility="",n.set(1e3,function a(){var b=t.getBoundingClientRect();("vert"==h?document.elementFromPoint(b.right-1,(b.top+b.bottom)/2):document.elementFromPoint((b.right+b.left)/2,b.bottom-1))!=t?t.style.visibility="hidden":n.set(1e3,a)})},Sn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var An=function(){};function Jn(t,n){n||(n=Cn(t));var h=t.display.barWidth,a=t.display.barHeight;gl(t,n);for(var b=0;b<4&&h!=t.display.barWidth||a!=t.display.barHeight;b++)h!=t.display.barWidth&&t.options.lineWrapping&&Gi(t),gl(t,Cn(t)),h=t.display.barWidth,a=t.display.barHeight}function gl(t,n){var h=t.display,a=h.scrollbars.update(n);h.sizer.style.paddingRight=(h.barWidth=a.right)+"px",h.sizer.style.paddingBottom=(h.barHeight=a.bottom)+"px",h.heightForcer.style.borderBottom=a.bottom+"px solid transparent",a.right&&a.bottom?(h.scrollbarFiller.style.display="block",h.scrollbarFiller.style.height=a.bottom+"px",h.scrollbarFiller.style.width=a.right+"px"):h.scrollbarFiller.style.display="",a.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(h.gutterFiller.style.display="block",h.gutterFiller.style.height=a.bottom+"px",h.gutterFiller.style.width=n.gutterWidth+"px"):h.gutterFiller.style.display=""}An.prototype.update=function(){return{bottom:0,right:0}},An.prototype.setScrollLeft=function(){},An.prototype.setScrollTop=function(){},An.prototype.clear=function(){};var yl={native:Sn,null:An};function $s(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&H(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new yl[t.options.scrollbarStyle](function(n){t.display.wrapper.insertBefore(n,t.display.scrollbarFiller),et(n,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,h){"horizontal"==h?qn(t,n):Wi(t,n)},t),t.display.scrollbars.addClass&&de(t.display.wrapper,t.display.scrollbars.addClass)}var af=0;function Fn(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++af,markArrays:null},function zu(t){Un?Un.ops.push(t):t.ownsGroup=Un={ops:[t],delayedCallbacks:[]}}(t.curOp)}function Xn(t){var n=t.curOp;n&&function qu(t,n){var h=t.ownsGroup;if(h)try{!function Ka(t){var n=t.delayedCallbacks,h=0;do{for(;h<n.length;h++)n[h].call(null);for(var a=0;a<t.ops.length;a++){var b=t.ops[a];if(b.cursorActivityHandlers)for(;b.cursorActivityCalled<b.cursorActivityHandlers.length;)b.cursorActivityHandlers[b.cursorActivityCalled++].call(null,b.cm)}}while(h<n.length)}(h)}finally{Un=null,n(h)}}(n,function(h){for(var a=0;a<h.ops.length;a++)h.ops[a].cm.curOp=null;!function lf(t){for(var n=t.ops,h=0;h<n.length;h++)uf(n[h]);for(var a=0;a<n.length;a++)ml(n[a]);for(var b=0;b<n.length;b++)ff(n[b]);for(var j=0;j<n.length;j++)bl(n[j]);for(var X=0;X<n.length;X++)cf(n[X])}(h)})}function uf(t){var n=t.cm,h=n.display;(function pf(t){var n=t.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=mr(t)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=mr(t)+"px",n.scrollbarsClipped=!0)})(n),t.updateMaxLine&&Eo(n),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<h.viewFrom||t.scrollToPos.to.line>=h.viewTo)||h.maxLineChanged&&n.options.lineWrapping,t.update=t.mustUpdate&&new Ho(n,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ml(t){t.updatedDisplay=t.mustUpdate&&ea(t.cm,t.update)}function ff(t){var n=t.cm,h=n.display;t.updatedDisplay&&Gi(n),t.barMeasure=Cn(n),h.maxLineChanged&&!n.options.lineWrapping&&(t.adjustWidthTo=Ms(n,h.maxLine,h.maxLine.text.length).left+3,n.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(h.scroller.clientWidth,h.sizer.offsetLeft+t.adjustWidthTo+mr(n)+n.display.barWidth),t.maxScrollLeft=Math.max(0,h.sizer.offsetLeft+t.adjustWidthTo-an(n))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=h.input.prepareSelection())}function bl(t){var n=t.cm;null!=t.adjustWidthTo&&(n.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<n.doc.scrollLeft&&qn(n,Math.min(n.display.scroller.scrollLeft,t.maxScrollLeft),!0),n.display.maxLineChanged=!1);var h=t.focus&&t.focus==ee(Ne(n));t.preparedSelection&&n.display.input.showSelection(t.preparedSelection,h),(t.updatedDisplay||t.startHeight!=n.doc.height)&&Jn(n,t.barMeasure),t.updatedDisplay&&$t(n,t.barMeasure),t.selectionChanged&&Vs(n),n.state.focused&&t.updateInput&&n.display.input.reset(t.typing),h&&hl(t.cm)}function cf(t){var n=t.cm,h=n.display,a=n.doc;if(t.updatedDisplay&&xl(n,t.update),null!=h.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(h.wheelStartX=h.wheelStartY=null),null!=t.scrollTop&&vl(n,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&qn(n,t.scrollLeft,!0,!0),t.scrollToPos){var b=function of(t,n,h,a){var b;null==a&&(a=0),!t.options.lineWrapping&&n==h&&(h="before"==n.sticky?st(n.line,n.ch+1,"before"):n,n=n.ch?st(n.line,"before"==n.sticky?n.ch-1:n.ch,"after"):n);for(var j=0;j<5;j++){var X=!1,$=Tr(t,n),te=h&&h!=n?Tr(t,h):$,se=Uo(t,b={left:Math.min($.left,te.left),top:Math.min($.top,te.top)-a,right:Math.max($.left,te.left),bottom:Math.max($.bottom,te.bottom)+a}),we=t.doc.scrollTop,Te=t.doc.scrollLeft;if(null!=se.scrollTop&&(Wi(t,se.scrollTop),Math.abs(t.doc.scrollTop-we)>1&&(X=!0)),null!=se.scrollLeft&&(qn(t,se.scrollLeft),Math.abs(t.doc.scrollLeft-Te)>1&&(X=!0)),!X)break}return b}(n,At(a,t.scrollToPos.from),At(a,t.scrollToPos.to),t.scrollToPos.margin);!function nf(t,n){if(!bt(t,"scrollCursorIntoView")){var h=t.display,a=h.sizer.getBoundingClientRect(),b=null,j=h.wrapper.ownerDocument;if(n.top+a.top<0?b=!0:n.bottom+a.top>(j.defaultView.innerHeight||j.documentElement.clientHeight)&&(b=!1),null!=b&&!f){var X=ce("div","\u200b",null,"position: absolute;\n                         top: "+(n.top-h.viewOffset-Io(t.display))+"px;\n                         height: "+(n.bottom-n.top+mr(t)+h.barHeight)+"px;\n                         left: "+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");t.display.lineSpace.appendChild(X),X.scrollIntoView(b),t.display.lineSpace.removeChild(X)}}}(n,b)}var j=t.maybeHiddenMarkers,X=t.maybeUnhiddenMarkers;if(j)for(var $=0;$<j.length;++$)j[$].lines.length||mt(j[$],"hide");if(X)for(var te=0;te<X.length;++te)X[te].lines.length&&mt(X[te],"unhide");h.wrapper.offsetHeight&&(a.scrollTop=n.display.scroller.scrollTop),t.changeObjs&&mt(n,"changes",n,t.changeObjs),t.update&&t.update.finish()}function Fr(t,n){if(t.curOp)return n();Fn(t);try{return n()}finally{Xn(t)}}function or(t,n){return function(){if(t.curOp)return n.apply(t,arguments);Fn(t);try{return n.apply(t,arguments)}finally{Xn(t)}}}function vr(t){return function(){if(this.curOp)return t.apply(this,arguments);Fn(this);try{return t.apply(this,arguments)}finally{Xn(this)}}}function sr(t){return function(){var n=this.cm;if(!n||n.curOp)return t.apply(this,arguments);Fn(n);try{return t.apply(this,arguments)}finally{Xn(n)}}}function zi(t,n){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(n,be(hf,t))}function hf(t){var n=t.doc;if(!(n.highlightFrontier>=t.display.viewTo)){var h=+new Date+t.options.workTime,a=Ri(t,n.highlightFrontier),b=[];n.iter(a.line,Math.min(n.first+n.size,t.display.viewTo+500),function(j){if(a.line>=t.display.viewFrom){var X=j.styles,$=j.text.length>t.options.maxHighlightLength?Or(n.mode,a.state):null,te=ja(t,j,a,!0);$&&(a.state=$),j.styles=te.styles;var se=j.styleClasses,we=te.classes;we?j.styleClasses=we:se&&(j.styleClasses=null);for(var Te=!X||X.length!=j.styles.length||se!=we&&(!se||!we||se.bgClass!=we.bgClass||se.textClass!=we.textClass),Ue=0;!Te&&Ue<X.length;++Ue)Te=X[Ue]!=j.styles[Ue];Te&&b.push(a.line),j.stateAfter=a.save(),a.nextLine()}else j.text.length<=t.options.maxHighlightLength&&ko(t,j.text,a),j.stateAfter=a.line%5==0?a.save():null,a.nextLine();if(+new Date>h)return zi(t,t.options.workDelay),!0}),n.highlightFrontier=a.line,n.modeFrontier=Math.max(n.modeFrontier,a.line),b.length&&Fr(t,function(){for(var j=0;j<b.length;j++)kn(t,b[j],"text")})}}var Ho=function(t,n,h){var a=t.display;this.viewport=n,this.visible=Qo(a,t.doc,n),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=an(t),this.force=h,this.dims=Ws(t),this.events=[]};function ea(t,n){var h=t.display,a=t.doc;if(n.editorIsHidden)return _n(t),!1;if(!n.force&&n.visible.from>=h.viewFrom&&n.visible.to<=h.viewTo&&(null==h.updateLineNumbers||h.updateLineNumbers>=h.viewTo)&&h.renderedView==h.view&&0==cl(t))return!1;_l(t)&&(_n(t),n.dims=Ws(t));var b=a.first+a.size,j=Math.max(n.visible.from-t.options.viewportMargin,a.first),X=Math.min(b,n.visible.to+t.options.viewportMargin);h.viewFrom<j&&j-h.viewFrom<20&&(j=Math.max(a.first,h.viewFrom)),h.viewTo>X&&h.viewTo-X<20&&(X=Math.min(b,h.viewTo)),rn&&(j=Ts(t.doc,j),X=za(t.doc,X));var $=j!=h.viewFrom||X!=h.viewTo||h.lastWrapHeight!=n.wrapperHeight||h.lastWrapWidth!=n.wrapperWidth;(function tf(t,n,h){var a=t.display;0==a.view.length||n>=a.viewTo||h<=a.viewFrom?(a.view=To(t,n,h),a.viewFrom=n):(a.viewFrom>n?a.view=To(t,n,a.viewFrom).concat(a.view):a.viewFrom<n&&(a.view=a.view.slice(Xt(t,n))),a.viewFrom=n,a.viewTo<h?a.view=a.view.concat(To(t,a.viewTo,h)):a.viewTo>h&&(a.view=a.view.slice(0,Xt(t,h)))),a.viewTo=h})(t,j,X),h.viewOffset=Xr(xt(t.doc,h.viewFrom)),t.display.mover.style.top=h.viewOffset+"px";var te=cl(t);if(!$&&0==te&&!n.force&&h.renderedView==h.view&&(null==h.updateLineNumbers||h.updateLineNumbers>=h.viewTo))return!1;var se=function df(t){if(t.hasFocus())return null;var n=ee(Ne(t));if(!n||!fe(t.display.lineDiv,n))return null;var h={activeElt:n};if(window.getSelection){var a=Se(t).getSelection();a.anchorNode&&a.extend&&fe(t.display.lineDiv,a.anchorNode)&&(h.anchorNode=a.anchorNode,h.anchorOffset=a.anchorOffset,h.focusNode=a.focusNode,h.focusOffset=a.focusOffset)}return h}(t);return te>4&&(h.lineDiv.style.display="none"),function wl(t,n,h){var a=t.display,b=t.options.lineNumbers,j=a.lineDiv,X=j.firstChild;function $(Ye){var tt=Ye.nextSibling;return o&&W&&t.display.currentWheelTarget==Ye?Ye.style.display="none":Ye.parentNode.removeChild(Ye),tt}for(var te=a.view,se=a.viewFrom,we=0;we<te.length;we++){var Te=te[we];if(!Te.hidden)if(Te.node&&Te.node.parentNode==j){for(;X!=Te.node;)X=$(X);var Qe=b&&null!=n&&n<=se&&Te.lineNumber;Te.changes&&(M(Te.changes,"gutter")>-1&&(Qe=!1),Za(t,Te,se,h)),Qe&&(ie(Te.lineNumber),Te.lineNumber.appendChild(document.createTextNode(mo(t.options,se)))),X=Te.node.nextSibling}else{var Ue=el(t,Te,se,h);j.insertBefore(Ue,X)}se+=Te.size}for(;X;)X=$(X)}(t,h.updateLineNumbers,n.dims),te>4&&(h.lineDiv.style.display=""),h.renderedView=h.view,function vf(t){if(t&&t.activeElt&&t.activeElt!=ee(t.activeElt.ownerDocument)&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&fe(document.body,t.anchorNode)&&fe(document.body,t.focusNode))){var n=t.activeElt.ownerDocument,h=n.defaultView.getSelection(),a=n.createRange();a.setEnd(t.anchorNode,t.anchorOffset),a.collapse(!1),h.removeAllRanges(),h.addRange(a),h.extend(t.focusNode,t.focusOffset)}}(se),ie(h.cursorDiv),ie(h.selectionDiv),h.gutters.style.height=h.sizer.style.minHeight=0,$&&(h.lastWrapHeight=n.wrapperHeight,h.lastWrapWidth=n.wrapperWidth,zi(t,400)),h.updateLineNumbers=null,!0}function xl(t,n){for(var h=n.viewport,a=!0;;a=!1){if(a&&t.options.lineWrapping&&n.oldDisplayWidth!=an(t))a&&(n.visible=Qo(t.display,t.doc,h));else if(h&&null!=h.top&&(h={top:Math.min(t.doc.height+wn(t.display)-Ds(t),h.top)}),n.visible=Qo(t.display,t.doc,h),n.visible.from>=t.display.viewFrom&&n.visible.to<=t.display.viewTo)break;if(!ea(t,n))break;Gi(t);var b=Cn(t);Ui(t),Jn(t,b),$t(t,b),n.force=!1}n.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(n.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ta(t,n){var h=new Ho(t,n);if(ea(t,h)){Gi(t),xl(t,h);var a=Cn(t);Ui(t),Jn(t,a),$t(t,a),h.finish()}}function Zt(t){var n=t.gutters.offsetWidth;t.sizer.style.marginLeft=n+"px",ir(t,"gutterChanged",t)}function $t(t,n){t.display.sizer.style.minHeight=n.docHeight+"px",t.display.heightForcer.style.top=n.docHeight+"px",t.display.gutters.style.height=n.docHeight+t.display.barHeight+mr(t)+"px"}function kl(t){var n=t.display,h=n.view;if(n.alignWidgets||n.gutters.firstChild&&t.options.fixedGutter){for(var a=zs(n)-n.scroller.scrollLeft+t.doc.scrollLeft,b=n.gutters.offsetWidth,j=a+"px",X=0;X<h.length;X++)if(!h[X].hidden){t.options.fixedGutter&&(h[X].gutter&&(h[X].gutter.style.left=j),h[X].gutterBackground&&(h[X].gutterBackground.style.left=j));var $=h[X].alignable;if($)for(var te=0;te<$.length;te++)$[te].style.left=j}t.options.fixedGutter&&(n.gutters.style.left=a+b+"px")}}function _l(t){if(!t.options.lineNumbers)return!1;var n=t.doc,h=mo(t.options,n.first+n.size-1),a=t.display;if(h.length!=a.lineNumChars){var b=a.measure.appendChild(ce("div",[ce("div",h)],"CodeMirror-linenumber CodeMirror-gutter-elt")),j=b.firstChild.offsetWidth,X=b.offsetWidth-j;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(j,a.lineGutter.offsetWidth-X)+1,a.lineNumWidth=a.lineNumInnerWidth+X,a.lineNumChars=a.lineNumInnerWidth?h.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",Zt(t.display),!0}return!1}function ra(t,n){for(var h=[],a=!1,b=0;b<t.length;b++){var j=t[b],X=null;if("string"!=typeof j&&(X=j.style,j=j.className),"CodeMirror-linenumbers"==j){if(!n)continue;a=!0}h.push({className:j,style:X})}return n&&!a&&h.push({className:"CodeMirror-linenumbers",style:null}),h}function Cl(t){var n=t.gutters,h=t.gutterSpecs;ie(n),t.lineGutter=null;for(var a=0;a<h.length;++a){var b=h[a],j=b.className,X=b.style,$=n.appendChild(ce("div",null,"CodeMirror-gutter "+j));X&&($.style.cssText=X),"CodeMirror-linenumbers"==j&&(t.lineGutter=$,$.style.width=(t.lineNumWidth||1)+"px")}n.style.display=h.length?"":"none",Zt(t)}function qi(t){Cl(t.display),Ut(t),kl(t)}function gf(t,n,h,a){var b=this;this.input=h,b.scrollbarFiller=ce("div",null,"CodeMirror-scrollbar-filler"),b.scrollbarFiller.setAttribute("cm-not-content","true"),b.gutterFiller=ce("div",null,"CodeMirror-gutter-filler"),b.gutterFiller.setAttribute("cm-not-content","true"),b.lineDiv=xe("div",null,"CodeMirror-code"),b.selectionDiv=ce("div",null,null,"position: relative; z-index: 1"),b.cursorDiv=ce("div",null,"CodeMirror-cursors"),b.measure=ce("div",null,"CodeMirror-measure"),b.lineMeasure=ce("div",null,"CodeMirror-measure"),b.lineSpace=xe("div",[b.measure,b.lineMeasure,b.selectionDiv,b.cursorDiv,b.lineDiv],null,"position: relative; outline: none");var j=xe("div",[b.lineSpace],"CodeMirror-lines");b.mover=ce("div",[j],null,"position: relative"),b.sizer=ce("div",[b.mover],"CodeMirror-sizer"),b.sizerWidth=null,b.heightForcer=ce("div",null,null,"position: absolute; height: 50px; width: 1px;"),b.gutters=ce("div",null,"CodeMirror-gutters"),b.lineGutter=null,b.scroller=ce("div",[b.sizer,b.heightForcer,b.gutters],"CodeMirror-scroll"),b.scroller.setAttribute("tabIndex","-1"),b.wrapper=ce("div",[b.scrollbarFiller,b.gutterFiller,b.scroller],"CodeMirror"),b.wrapper.setAttribute("translate","no"),v&&e<8&&(b.gutters.style.zIndex=-1,b.scroller.style.paddingRight=0),!o&&!(le&&I)&&(b.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(b.wrapper):t(b.wrapper)),b.viewFrom=b.viewTo=n.first,b.reportedViewFrom=b.reportedViewTo=n.first,b.view=[],b.renderedView=null,b.externalMeasured=null,b.viewOffset=0,b.lastWrapHeight=b.lastWrapWidth=0,b.updateLineNumbers=null,b.nativeBarWidth=b.barHeight=b.barWidth=0,b.scrollbarsClipped=!1,b.lineNumWidth=b.lineNumInnerWidth=b.lineNumChars=null,b.alignWidgets=!1,b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.maxLine=null,b.maxLineLength=0,b.maxLineChanged=!1,b.wheelDX=b.wheelDY=b.wheelStartX=b.wheelStartY=null,b.shift=!1,b.selForContextMenu=null,b.activeTouch=null,b.gutterSpecs=ra(a.gutters,a.lineNumbers),Cl(b),h.init(b)}Ho.prototype.signal=function(t,n){at(t,n)&&this.events.push(arguments)},Ho.prototype.finish=function(){for(var t=0;t<this.events.length;t++)mt.apply(null,this.events[t])};var Wo=0,fn=null;function Sl(t){var n=t.wheelDeltaX,h=t.wheelDeltaY;return null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==h&&t.detail&&t.axis==t.VERTICAL_AXIS?h=t.detail:null==h&&(h=t.wheelDelta),{x:n,y:h}}function yf(t){var n=Sl(t);return n.x*=fn,n.y*=fn,n}function Al(t,n){d&&102==m&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout(function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""},100));var h=Sl(n),a=h.x,b=h.y,j=fn;0===n.deltaMode&&(a=n.deltaX,b=n.deltaY,j=1);var X=t.display,$=X.scroller,te=$.scrollWidth>$.clientWidth,se=$.scrollHeight>$.clientHeight;if(a&&te||b&&se){if(b&&W&&o)e:for(var we=n.target,Te=X.view;we!=$;we=we.parentNode)for(var Ue=0;Ue<Te.length;Ue++)if(Te[Ue].node==we){t.display.currentWheelTarget=we;break e}if(a&&!le&&!c&&null!=j)return b&&se&&Wi(t,Math.max(0,$.scrollTop+b*j)),qn(t,Math.max(0,$.scrollLeft+a*j)),(!b||b&&se)&&Ct(n),void(X.wheelStartX=null);if(b&&null!=j){var Qe=b*j,Ye=t.doc.scrollTop,tt=Ye+X.wrapper.clientHeight;Qe<0?Ye=Math.max(0,Ye+Qe-50):tt=Math.min(t.doc.height,tt+Qe+50),ta(t,{top:Ye,bottom:tt})}Wo<20&&0!==n.deltaMode&&(null==X.wheelStartX?(X.wheelStartX=$.scrollLeft,X.wheelStartY=$.scrollTop,X.wheelDX=a,X.wheelDY=b,setTimeout(function(){if(null!=X.wheelStartX){var lt=$.scrollLeft-X.wheelStartX,ht=$.scrollTop-X.wheelStartY,dt=ht&&X.wheelDY&&ht/X.wheelDY||lt&&X.wheelDX&&lt/X.wheelDX;X.wheelStartX=X.wheelStartY=null,dt&&(fn=(fn*Wo+dt)/(Wo+1),++Wo)}},200)):(X.wheelDX+=a,X.wheelDY+=b))}}v?fn=-.53:le?fn=15:d?fn=-.7:k&&(fn=-1/3);var Nr=function(t,n){this.ranges=t,this.primIndex=n};Nr.prototype.primary=function(){return this.ranges[this.primIndex]},Nr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var h=this.ranges[n],a=t.ranges[n];if(!ks(h.anchor,a.anchor)||!ks(h.head,a.head))return!1}return!0},Nr.prototype.deepCopy=function(){for(var t=[],n=0;n<this.ranges.length;n++)t[n]=new Pt(bo(this.ranges[n].anchor),bo(this.ranges[n].head));return new Nr(t,this.primIndex)},Nr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Nr.prototype.contains=function(t,n){n||(n=t);for(var h=0;h<this.ranges.length;h++){var a=this.ranges[h];if(St(n,a.from())>=0&&St(t,a.to())<=0)return h}return-1};var Pt=function(t,n){this.anchor=t,this.head=n};function Mr(t,n,h){var a=t&&t.options.selectionsMayTouch,b=n[h];n.sort(function(Ue,Qe){return St(Ue.from(),Qe.from())}),h=M(n,b);for(var j=1;j<n.length;j++){var X=n[j],$=n[j-1],te=St($.to(),X.from());if(a&&!X.empty()?te>0:te>=0){var se=Oi($.from(),X.from()),we=xo($.to(),X.to()),Te=$.empty()?X.from()==X.head:$.from()==$.head;j<=h&&--h,n.splice(--j,2,new Pt(Te?we:se,Te?se:we))}}return new Nr(n,h)}function En(t,n){return new Nr([new Pt(t,n||t)],0)}function Tn(t){return t.text?st(t.from.line+t.text.length-1,ot(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Fl(t,n){if(St(t,n.from)<0)return t;if(St(t,n.to)<=0)return Tn(n);var h=t.line+n.text.length-(n.to.line-n.from.line)-1,a=t.ch;return t.line==n.to.line&&(a+=Tn(n).ch-n.to.ch),st(h,a)}function na(t,n){for(var h=[],a=0;a<t.sel.ranges.length;a++){var b=t.sel.ranges[a];h.push(new Pt(Fl(b.anchor,n),Fl(b.head,n)))}return Mr(t.cm,h,t.sel.primIndex)}function El(t,n,h){return t.line==n.line?st(h.line,t.ch-n.ch+h.ch):st(h.line+(t.line-n.line),t.ch)}function ia(t){t.doc.mode=oi(t.options,t.doc.modeOption),Ji(t)}function Ji(t){t.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,zi(t,100),t.state.modeGen++,t.curOp&&Ut(t)}function Xi(t,n){return 0==n.from.ch&&0==n.to.ch&&""==ot(n.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function vi(t,n,h,a){function b(dt){return h?h[dt]:null}function j(dt,pt,gt){(function qa(t,n,h,a){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Mi(t),Fs(t,h);var b=a?a(t):1;b!=t.height&&Jr(t,b)})(dt,pt,gt,a),ir(dt,"change",dt,n)}function X(dt,pt){for(var gt=[],_t=dt;_t<pt;++_t)gt.push(new si(se[_t],b(_t),a));return gt}var $=n.from,te=n.to,se=n.text,we=xt(t,$.line),Te=xt(t,te.line),Ue=ot(se),Qe=b(se.length-1),Ye=te.line-$.line;if(n.full)t.insert(0,X(0,se.length)),t.remove(se.length,t.size-se.length);else if(Xi(t,n)){var tt=X(0,se.length-1);j(Te,Te.text,Qe),Ye&&t.remove($.line,Ye),tt.length&&t.insert($.line,tt)}else if(we==Te)if(1==se.length)j(we,we.text.slice(0,$.ch)+Ue+we.text.slice(te.ch),Qe);else{var lt=X(1,se.length-1);lt.push(new si(Ue+we.text.slice(te.ch),Qe,a)),j(we,we.text.slice(0,$.ch)+se[0],b(0)),t.insert($.line+1,lt)}else if(1==se.length)j(we,we.text.slice(0,$.ch)+se[0]+Te.text.slice(te.ch),b(0)),t.remove($.line+1,Ye);else{j(we,we.text.slice(0,$.ch)+se[0],b(0)),j(Te,Ue+Te.text.slice(te.ch),Qe);var ht=X(1,se.length-1);Ye>1&&t.remove($.line+1,Ye-1),t.insert($.line+1,ht)}ir(t,"change",t,n)}function cn(t,n,h){!function a(b,j,X){if(b.linked)for(var $=0;$<b.linked.length;++$){var te=b.linked[$];if(te.doc!=j){var se=X&&te.sharedHist;h&&!se||(n(te.doc,se),a(te.doc,b,se))}}}(t,null,!0)}function Tl(t,n){if(n.cm)throw new Error("This document is already in use.");t.doc=n,n.cm=t,Js(t),ia(t),Nl(t),t.options.direction=n.direction,t.options.lineWrapping||Eo(t),t.options.mode=n.modeOption,Ut(t)}function Nl(t){("rtl"==t.doc.direction?de:H)(t.display.lineDiv,"CodeMirror-rtl")}function zo(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function oa(t,n){var h={from:bo(n.from),to:Tn(n),text:Pn(t,n.from,n.to)};return Vi(t,h,n.from.line,n.to.line+1),cn(t,function(a){return Vi(a,h,n.from.line,n.to.line+1)},!0),h}function Ll(t){for(;t.length;){if(!ot(t).ranges)break;t.pop()}}function Il(t,n,h,a){var b=t.history;b.undone.length=0;var X,$,j=+new Date;if((b.lastOp==a||b.lastOrigin==n.origin&&n.origin&&("+"==n.origin.charAt(0)&&b.lastModTime>j-(t.cm?t.cm.options.historyEventDelay:500)||"*"==n.origin.charAt(0)))&&(X=function xf(t,n){return n?(Ll(t.done),ot(t.done)):t.done.length&&!ot(t.done).ranges?ot(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),ot(t.done)):void 0}(b,b.lastOp==a)))$=ot(X.changes),0==St(n.from,n.to)&&0==St(n.from,$.to)?$.to=Tn(n):X.changes.push(oa(t,n));else{var te=ot(b.done);for((!te||!te.ranges)&&qo(t.sel,b.done),X={changes:[oa(t,n)],generation:b.generation},b.done.push(X);b.done.length>b.undoDepth;)b.done.shift(),b.done[0].ranges||b.done.shift()}b.done.push(h),b.generation=++b.maxGeneration,b.lastModTime=b.lastSelTime=j,b.lastOp=b.lastSelOp=a,b.lastOrigin=b.lastSelOrigin=n.origin,$||mt(t,"historyAdded")}function kf(t,n,h,a){var b=t.history,j=a&&a.origin;h==b.lastSelOp||j&&b.lastSelOrigin==j&&(b.lastModTime==b.lastSelTime&&b.lastOrigin==j||function wf(t,n,h,a){var b=n.charAt(0);return"*"==b||"+"==b&&h.ranges.length==a.ranges.length&&h.somethingSelected()==a.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,j,ot(b.done),n))?b.done[b.done.length-1]=n:qo(n,b.done),b.lastSelTime=+new Date,b.lastSelOrigin=j,b.lastSelOp=h,a&&!1!==a.clearRedo&&Ll(b.undone)}function qo(t,n){var h=ot(n);h&&h.ranges&&h.equals(t)||n.push(t)}function Vi(t,n,h,a){var b=n["spans_"+t.id],j=0;t.iter(Math.max(t.first,h),Math.min(t.first+t.size,a),function(X){X.markedSpans&&((b||(b=n["spans_"+t.id]={}))[j]=X.markedSpans),++j})}function Jo(t){if(!t)return null;for(var n,h=0;h<t.length;++h)t[h].marker.explicitlyCleared?n||(n=t.slice(0,h)):n&&n.push(t[h]);return n?n.length?n:null:t}function Ol(t,n){var h=function _f(t,n){var h=n["spans_"+t.id];if(!h)return null;for(var a=[],b=0;b<n.text.length;++b)a.push(Jo(h[b]));return a}(t,n),a=_o(t,n);if(!h)return a;if(!a)return h;for(var b=0;b<h.length;++b){var j=h[b],X=a[b];if(j&&X)e:for(var $=0;$<X.length;++$){for(var te=X[$],se=0;se<j.length;++se)if(j[se].marker==te.marker)continue e;j.push(te)}else X&&(h[b]=X)}return h}function Rr(t,n,h){for(var a=[],b=0;b<t.length;++b){var j=t[b];if(j.ranges)a.push(h?Nr.prototype.deepCopy.call(j):j);else{var X=j.changes,$=[];a.push({changes:$});for(var te=0;te<X.length;++te){var se=X[te],we=void 0;if($.push({from:se.from,to:se.to,text:se.text}),n)for(var Te in se)(we=Te.match(/^spans_(\d+)$/))&&M(n,Number(we[1]))>-1&&(ot($)[Te]=se[Te],delete se[Te])}}}return a}function hn(t,n,h,a){if(a){var b=t.anchor;if(h){var j=St(n,b)<0;j!=St(h,b)<0?(b=n,n=h):j!=St(n,h)<0&&(n=h)}return new Pt(b,n)}return new Pt(h||n,n)}function Xo(t,n,h,a,b){null==b&&(b=t.cm&&(t.cm.display.shift||t.extend)),hr(t,new Nr([hn(t.sel.primary(),n,h,b)],0),a)}function Rl(t,n,h){for(var a=[],b=t.cm&&(t.cm.display.shift||t.extend),j=0;j<t.sel.ranges.length;j++)a[j]=hn(t.sel.ranges[j],n[j],null,b);hr(t,Mr(t.cm,a,t.sel.primIndex),h)}function sa(t,n,h,a){var b=t.sel.ranges.slice(0);b[n]=h,hr(t,Mr(t.cm,b,t.sel.primIndex),a)}function jl(t,n,h,a){hr(t,En(n,h),a)}function aa(t,n,h){var a=t.history.done,b=ot(a);b&&b.ranges?(a[a.length-1]=n,Vo(t,n,h)):hr(t,n,h)}function hr(t,n,h){Vo(t,n,h),kf(t,t.sel,t.cm?t.cm.curOp.id:NaN,h)}function Vo(t,n,h){(at(t,"beforeSelectionChange")||t.cm&&at(t.cm,"beforeSelectionChange"))&&(n=function Dl(t,n,h){var a={ranges:n.ranges,update:function(b){this.ranges=[];for(var j=0;j<b.length;j++)this.ranges[j]=new Pt(At(t,b[j].anchor),At(t,b[j].head))},origin:h&&h.origin};return mt(t,"beforeSelectionChange",t,a),t.cm&&mt(t.cm,"beforeSelectionChange",t.cm,a),a.ranges!=n.ranges?Mr(t.cm,a.ranges,a.ranges.length-1):n}(t,n,h));var a=h&&h.bias||(St(n.primary().head,t.sel.primary().head)<0?-1:1);Ko(t,pn(t,n,a,!0)),(!h||!1!==h.scroll)&&t.cm&&"nocursor"!=t.cm.getOption("readOnly")&&di(t.cm)}function Ko(t,n){n.equals(t.sel)||(t.sel=n,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,yt(t.cm)),ir(t,"cursorActivity",t))}function Yo(t){Ko(t,pn(t,t.sel,null,!1))}function pn(t,n,h,a){for(var b,j=0;j<n.ranges.length;j++){var X=n.ranges[j],$=n.ranges.length==t.sel.ranges.length&&t.sel.ranges[j],te=Zo(t,X.anchor,$&&$.anchor,h,a),se=X.head==X.anchor?te:Zo(t,X.head,$&&$.head,h,a);(b||te!=X.anchor||se!=X.head)&&(b||(b=n.ranges.slice(0,j)),b[j]=new Pt(te,se))}return b?Mr(t.cm,b,n.primIndex):n}function Lr(t,n,h,a,b){var j=xt(t,n.line);if(j.markedSpans)for(var X=0;X<j.markedSpans.length;++X){var $=j.markedSpans[X],te=$.marker,se="selectLeft"in te?!te.selectLeft:te.inclusiveLeft,we="selectRight"in te?!te.selectRight:te.inclusiveRight;if((null==$.from||(se?$.from<=n.ch:$.from<n.ch))&&(null==$.to||(we?$.to>=n.ch:$.to>n.ch))){if(b&&(mt(te,"beforeCursorEnter"),te.explicitlyCleared)){if(j.markedSpans){--X;continue}break}if(!te.atomic)continue;if(h){var Te=te.find(a<0?1:-1),Ue=void 0;if((a<0?we:se)&&(Te=$o(t,Te,-a,Te&&Te.line==n.line?j:null)),Te&&Te.line==n.line&&(Ue=St(Te,h))&&(a<0?Ue<0:Ue>0))return Lr(t,Te,n,a,b)}var Qe=te.find(a<0?-1:1);return(a<0?se:we)&&(Qe=$o(t,Qe,a,Qe.line==n.line?j:null)),Qe?Lr(t,Qe,n,a,b):null}}return n}function Zo(t,n,h,a,b){var j=a||1;return Lr(t,n,h,j,b)||!b&&Lr(t,n,h,j,!0)||Lr(t,n,h,-j,b)||!b&&Lr(t,n,h,-j,!0)||(t.cantEdit=!0,st(t.first,0))}function $o(t,n,h,a){return h<0&&0==n.ch?n.line>t.first?At(t,st(n.line-1)):null:h>0&&n.ch==(a||xt(t,n.line)).text.length?n.line<t.first+t.size-1?st(n.line+1,0):null:new st(n.line,n.ch+h)}function es(t){t.setSelection(st(t.firstLine(),0),st(t.lastLine()),pe)}function Ml(t,n,h){var a={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return a.canceled=!0}};return h&&(a.update=function(b,j,X,$){b&&(a.from=At(t,b)),j&&(a.to=At(t,j)),X&&(a.text=X),void 0!==$&&(a.origin=$)}),mt(t,"beforeChange",t,a),t.cm&&mt(t.cm,"beforeChange",t.cm,a),a.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function gi(t,n,h){if(t.cm){if(!t.cm.curOp)return or(t.cm,gi)(t,n,h);if(t.cm.state.suppressEdits)return}if(!(at(t,"beforeChange")||t.cm&&at(t.cm,"beforeChange"))||(n=Ml(t,n,!0))){var a=As&&!h&&function Pu(t,n,h){var a=null;if(t.iter(n.line,h.line+1,function(Qe){if(Qe.markedSpans)for(var Ye=0;Ye<Qe.markedSpans.length;++Ye){var tt=Qe.markedSpans[Ye].marker;tt.readOnly&&(!a||-1==M(a,tt))&&(a||(a=[])).push(tt)}}),!a)return null;for(var b=[{from:n,to:h}],j=0;j<a.length;++j)for(var X=a[j],$=X.find(0),te=0;te<b.length;++te){var se=b[te];if(!(St(se.to,$.from)<0||St(se.from,$.to)>0)){var we=[te,1],Te=St(se.from,$.from),Ue=St(se.to,$.to);(Te<0||!X.inclusiveLeft&&!Te)&&we.push({from:se.from,to:$.from}),(Ue>0||!X.inclusiveRight&&!Ue)&&we.push({from:$.to,to:se.to}),b.splice.apply(b,we),te+=we.length-3}}return b}(t,n.from,n.to);if(a)for(var b=a.length-1;b>=0;--b)Pl(t,{from:a[b].from,to:a[b].to,text:b?[""]:n.text,origin:n.origin});else Pl(t,n)}}function Pl(t,n){if(1!=n.text.length||""!=n.text[0]||0!=St(n.from,n.to)){var h=na(t,n);Il(t,n,h,t.cm?t.cm.curOp.id:NaN),Ki(t,n,h,_o(t,n));var a=[];cn(t,function(b,j){!j&&-1==M(a,b.history)&&(is(b.history,n),a.push(b.history)),Ki(b,n,null,_o(b,n))})}}function ts(t,n,h){var a=t.cm&&t.cm.state.suppressEdits;if(!a||h){for(var j,b=t.history,X=t.sel,$="undo"==n?b.done:b.undone,te="undo"==n?b.undone:b.done,se=0;se<$.length&&(j=$[se],!(h?j.ranges&&!j.equals(t.sel):!j.ranges));se++);if(se!=$.length){for(b.lastOrigin=b.lastSelOrigin=null;;){if(!(j=$.pop()).ranges){if(a)return void $.push(j);break}if(qo(j,te),h&&!j.equals(t.sel))return void hr(t,j,{clearRedo:!1});X=j}var we=[];qo(X,te),te.push({changes:we,generation:b.generation}),b.generation=j.generation||++b.maxGeneration;for(var Te=at(t,"beforeChange")||t.cm&&at(t.cm,"beforeChange"),Ue=function(tt){var lt=j.changes[tt];if(lt.origin=n,Te&&!Ml(t,lt,!1))return $.length=0,{};we.push(oa(t,lt));var ht=tt?na(t,lt):ot($);Ki(t,lt,ht,Ol(t,lt)),!tt&&t.cm&&t.cm.scrollIntoView({from:lt.from,to:Tn(lt)});var dt=[];cn(t,function(pt,gt){!gt&&-1==M(dt,pt.history)&&(is(pt.history,lt),dt.push(pt.history)),Ki(pt,lt,null,Ol(pt,lt))})},Qe=j.changes.length-1;Qe>=0;--Qe){var Ye=Ue(Qe);if(Ye)return Ye.v}}}}function Bl(t,n){if(0!=n&&(t.first+=n,t.sel=new Nr(ct(t.sel.ranges,function(b){return new Pt(st(b.anchor.line+n,b.anchor.ch),st(b.head.line+n,b.head.ch))}),t.sel.primIndex),t.cm)){Ut(t.cm,t.first,t.first-n,n);for(var h=t.cm.display,a=h.viewFrom;a<h.viewTo;a++)kn(t.cm,a,"gutter")}}function Ki(t,n,h,a){if(t.cm&&!t.cm.curOp)return or(t.cm,Ki)(t,n,h,a);if(n.to.line<t.first)Bl(t,n.text.length-1-(n.to.line-n.from.line));else if(!(n.from.line>t.lastLine())){if(n.from.line<t.first){var b=n.text.length-1-(t.first-n.from.line);Bl(t,b),n={from:st(t.first,0),to:st(n.to.line+b,n.to.ch),text:[ot(n.text)],origin:n.origin}}var j=t.lastLine();n.to.line>j&&(n={from:n.from,to:st(j,xt(t,j).text.length),text:[n.text[0]],origin:n.origin}),n.removed=Pn(t,n.from,n.to),h||(h=na(t,n)),t.cm?function Cf(t,n,h){var a=t.doc,b=t.display,j=n.from,X=n.to,$=!1,te=j.line;t.options.lineWrapping||(te=Qt(nr(xt(a,j.line))),a.iter(te,X.line+1,function(Qe){if(Qe==b.maxLine)return $=!0,!0})),a.sel.contains(n.from,n.to)>-1&&yt(t),vi(a,n,h,qs(t)),t.options.lineWrapping||(a.iter(te,j.line+n.text.length,function(Qe){var Ye=Fo(Qe);Ye>b.maxLineLength&&(b.maxLine=Qe,b.maxLineLength=Ye,b.maxLineChanged=!0,$=!1)}),$&&(t.curOp.updateMaxLine=!0)),function Iu(t,n){if(t.modeFrontier=Math.min(t.modeFrontier,n),!(t.highlightFrontier<n-10)){for(var h=t.first,a=n-1;a>h;a--){var b=xt(t,a).stateAfter;if(b&&(!(b instanceof wo)||a+b.lookAhead<n)){h=a+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,h)}}(a,j.line),zi(t,400);var se=n.text.length-(X.line-j.line)-1;n.full?Ut(t):j.line!=X.line||1!=n.text.length||Xi(t.doc,n)?Ut(t,j.line,X.line+1,se):kn(t,j.line,"text");var we=at(t,"changes"),Te=at(t,"change");if(Te||we){var Ue={from:j,to:X,text:n.text,removed:n.removed,origin:n.origin};Te&&ir(t,"change",t,Ue),we&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(Ue)}t.display.selForContextMenu=null}(t.cm,n,a):vi(t,n,a),Vo(t,h,pe),t.cantEdit&&Zo(t,st(t.firstLine(),0))&&(t.cantEdit=!1)}}function Nn(t,n,h,a,b){var j;a||(a=h),St(a,h)<0&&(h=(j=[a,h])[0],a=j[1]),"string"==typeof n&&(n=t.splitLines(n)),gi(t,{from:h,to:a,text:n,origin:b})}function rs(t,n,h,a){h<t.line?t.line+=a:n<t.line&&(t.line=n,t.ch=0)}function ns(t,n,h,a){for(var b=0;b<t.length;++b){var j=t[b],X=!0;if(j.ranges){j.copied||((j=t[b]=j.deepCopy()).copied=!0);for(var $=0;$<j.ranges.length;$++)rs(j.ranges[$].anchor,n,h,a),rs(j.ranges[$].head,n,h,a)}else{for(var te=0;te<j.changes.length;++te){var se=j.changes[te];if(h<se.from.line)se.from=st(se.from.line+a,se.from.ch),se.to=st(se.to.line+a,se.to.ch);else if(n<=se.to.line){X=!1;break}}X||(t.splice(0,b+1),b=0)}}}function is(t,n){var h=n.from.line,a=n.to.line,b=n.text.length-(a-h)-1;ns(t.done,h,a,b),ns(t.undone,h,a,b)}function Yi(t,n,h,a){var b=n,j=n;return"number"==typeof n?j=xt(t,Ra(t,n)):b=Qt(n),null==b?null:(a(j,b)&&t.cm&&kn(t.cm,b,h),j)}function Zi(t){this.lines=t,this.parent=null;for(var n=0,h=0;h<t.length;++h)t[h].parent=this,n+=t[h].height;this.height=n}function $i(t){this.children=t;for(var n=0,h=0,a=0;a<t.length;++a){var b=t[a];n+=b.chunkSize(),h+=b.height,b.parent=this}this.size=n,this.height=h,this.parent=null}Pt.prototype.from=function(){return Oi(this.anchor,this.head)},Pt.prototype.to=function(){return xo(this.anchor,this.head)},Pt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Zi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,n){for(var h=t,a=t+n;h<a;++h){var b=this.lines[h];this.height-=b.height,Uu(b),ir(b,"delete")}this.lines.splice(t,n)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,n,h){this.height+=h,this.lines=this.lines.slice(0,t).concat(n).concat(this.lines.slice(t));for(var a=0;a<n.length;++a)n[a].parent=this},iterN:function(t,n,h){for(var a=t+n;t<a;++t)if(h(this.lines[t]))return!0}},$i.prototype={chunkSize:function(){return this.size},removeInner:function(t,n){this.size-=n;for(var h=0;h<this.children.length;++h){var a=this.children[h],b=a.chunkSize();if(t<b){var j=Math.min(n,b-t),X=a.height;if(a.removeInner(t,j),this.height-=X-a.height,b==j&&(this.children.splice(h--,1),a.parent=null),0==(n-=j))break;t=0}else t-=b}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof Zi))){var $=[];this.collapse($),this.children=[new Zi($)],this.children[0].parent=this}},collapse:function(t){for(var n=0;n<this.children.length;++n)this.children[n].collapse(t)},insertInner:function(t,n,h){this.size+=n.length,this.height+=h;for(var a=0;a<this.children.length;++a){var b=this.children[a],j=b.chunkSize();if(t<=j){if(b.insertInner(t,n,h),b.lines&&b.lines.length>50){for(var X=b.lines.length%25+25,$=X;$<b.lines.length;){var te=new Zi(b.lines.slice($,$+=25));b.height-=te.height,this.children.splice(++a,0,te),te.parent=this}b.lines=b.lines.slice(0,X),this.maybeSpill()}break}t-=j}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var h=new $i(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=h.size,t.height-=h.height;var b=M(t.parent.children,t);t.parent.children.splice(b+1,0,h)}else{var a=new $i(t.children);a.parent=t,t.children=[a,h],t=a}h.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,n,h){for(var a=0;a<this.children.length;++a){var b=this.children[a],j=b.chunkSize();if(t<j){var X=Math.min(n,j-t);if(b.iterN(t,X,h))return!0;if(0==(n-=X))break;t=0}else t-=j}}};var eo=function(t,n,h){if(h)for(var a in h)h.hasOwnProperty(a)&&(this[a]=h[a]);this.doc=t,this.node=n};function la(t,n,h){Xr(n)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Ys(t,h)}eo.prototype.clear=function(){var t=this.doc.cm,n=this.line.widgets,h=this.line,a=Qt(h);if(null!=a&&n){for(var b=0;b<n.length;++b)n[b]==this&&n.splice(b--,1);n.length||(h.widgets=null);var j=fi(this);Jr(h,Math.max(0,h.height-j)),t&&(Fr(t,function(){la(t,h,-j),kn(t,a,"widget")}),ir(t,"lineWidgetCleared",t,this,a))}},eo.prototype.changed=function(){var t=this,n=this.height,h=this.doc.cm,a=this.line;this.height=null;var b=fi(this)-n;!b||(on(this.doc,a)||Jr(a,a.height+b),h&&Fr(h,function(){h.curOp.forceUpdate=!0,la(h,a,b),ir(h,"lineWidgetChanged",h,t,Qt(a))}))},Tt(eo);var Ql=0,dn=function(t,n){this.lines=[],this.type=n,this.doc=t,this.id=++Ql};function yi(t,n,h,a,b){if(a&&a.shared)return function Af(t,n,h,a,b){(a=Pe(a)).shared=!1;var j=[yi(t,n,h,a,b)],X=j[0],$=a.widgetNode;return cn(t,function(te){$&&(a.widgetNode=$.cloneNode(!0)),j.push(yi(te,At(te,n),At(te,h),a,b));for(var se=0;se<te.linked.length;++se)if(te.linked[se].isParent)return;X=ot(j)}),new to(j,X)}(t,n,h,a,b);if(t.cm&&!t.cm.curOp)return or(t.cm,yi)(t,n,h,a,b);var j=new dn(t,b),X=St(n,h);if(a&&Pe(a,j,!1),X>0||0==X&&!1!==j.clearWhenEmpty)return j;if(j.replacedWith&&(j.collapsed=!0,j.widgetNode=xe("span",[j.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||j.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(j.widgetNode.insertLeft=!0)),j.collapsed){if(Wa(t,n.line,n,h,j)||n.line!=h.line&&Wa(t,h.line,n,h,j))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Ru(){rn=!0}()}j.addToHistory&&Il(t,{from:n,to:h,origin:"markText"},t.sel,NaN);var se,$=n.line,te=t.cm;if(t.iter($,h.line+1,function(Te){te&&j.collapsed&&!te.options.lineWrapping&&nr(Te)==te.display.maxLine&&(se=!0),j.collapsed&&$!=n.line&&Jr(Te,0),function ju(t,n,h){var a=h&&window.WeakSet&&(h.markedSpans||(h.markedSpans=new WeakSet));a&&t.markedSpans&&a.has(t.markedSpans)?t.markedSpans.push(n):(t.markedSpans=t.markedSpans?t.markedSpans.concat([n]):[n],a&&a.add(t.markedSpans)),n.marker.attachLine(t)}(Te,new ji(j,$==n.line?n.ch:null,$==h.line?h.ch:null),t.cm&&t.cm.curOp),++$}),j.collapsed&&t.iter(n.line,h.line+1,function(Te){on(t,Te)&&Jr(Te,0)}),j.clearOnEnter&&et(j,"beforeCursorEnter",function(){return j.clear()}),j.readOnly&&(function Ou(){As=!0}(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),j.collapsed&&(j.id=++Ql,j.atomic=!0),te){if(se&&(te.curOp.updateMaxLine=!0),j.collapsed)Ut(te,n.line,h.line+1);else if(j.className||j.startStyle||j.endStyle||j.css||j.attributes||j.title)for(var we=n.line;we<=h.line;we++)kn(te,we,"text");j.atomic&&Yo(te.doc),ir(te,"markerAdded",te,j)}return j}dn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&Fn(t),at(this,"clear")){var h=this.find();h&&ir(this,"clear",h.from,h.to)}for(var a=null,b=null,j=0;j<this.lines.length;++j){var X=this.lines[j],$=Di(X.markedSpans,this);t&&!this.collapsed?kn(t,Qt(X),"text"):t&&(null!=$.to&&(b=Qt(X)),null!=$.from&&(a=Qt(X))),X.markedSpans=Ga(X.markedSpans,$),null==$.from&&this.collapsed&&!on(this.doc,X)&&t&&Jr(X,Wn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var te=0;te<this.lines.length;++te){var se=nr(this.lines[te]),we=Fo(se);we>t.display.maxLineLength&&(t.display.maxLine=se,t.display.maxLineLength=we,t.display.maxLineChanged=!0)}null!=a&&t&&this.collapsed&&Ut(t,a,b+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Yo(t.doc)),t&&ir(t,"markerCleared",t,this,a,b),n&&Xn(t),this.parent&&this.parent.clear()}},dn.prototype.find=function(t,n){null==t&&"bookmark"==this.type&&(t=1);for(var h,a,b=0;b<this.lines.length;++b){var j=this.lines[b],X=Di(j.markedSpans,this);if(null!=X.from&&(h=st(n?j:Qt(j),X.from),-1==t))return h;if(null!=X.to&&(a=st(n?j:Qt(j),X.to),1==t))return a}return h&&{from:h,to:a}},dn.prototype.changed=function(){var t=this,n=this.find(-1,!0),h=this,a=this.doc.cm;!n||!a||Fr(a,function(){var b=n.line,j=Qt(n.line),X=Ps(a,j);if(X&&(Bs(X),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!on(h.doc,b)&&null!=h.height){var $=h.height;h.height=null;var te=fi(h)-$;te&&Jr(b,b.height+te)}ir(a,"markerChanged",a,t)})},dn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||-1==M(n.maybeHiddenMarkers,this))&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},dn.prototype.detachLine=function(t){if(this.lines.splice(M(this.lines,t),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},Tt(dn);var to=function(t,n){this.markers=t,this.primary=n;for(var h=0;h<t.length;++h)t[h].parent=this};function Ul(t){return t.findMarks(st(t.first,0),t.clipPos(st(t.lastLine())),function(n){return n.parent})}function Ef(t){for(var n=function(a){var b=t[a],j=[b.primary.doc];cn(b.primary.doc,function(te){return j.push(te)});for(var X=0;X<b.markers.length;X++){var $=b.markers[X];-1==M(j,$.doc)&&($.parent=null,b.markers.splice(X--,1))}},h=0;h<t.length;h++)n(h)}to.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ir(this,"clear")}},to.prototype.find=function(t,n){return this.primary.find(t,n)},Tt(to);var Tf=0,br=function(t,n,h,a,b){if(!(this instanceof br))return new br(t,n,h,a,b);null==h&&(h=0),$i.call(this,[new Zi([new si("",null)])]),this.first=h,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=h;var j=st(h,0);this.sel=En(j),this.history=new zo(null),this.id=++Tf,this.modeOption=n,this.lineSep=a,this.direction="rtl"==b?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),vi(this,{from:j,to:j,text:t}),hr(this,En(j),pe)};br.prototype=Ee($i.prototype,{constructor:br,iter:function(t,n,h){h?this.iterN(t-this.first,n-t,h):this.iterN(this.first,this.first+this.size,t)},insert:function(t,n){for(var h=0,a=0;a<n.length;++a)h+=n[a].height;this.insertInner(t-this.first,n,h)},remove:function(t,n){this.removeInner(t-this.first,n)},getValue:function(t){var n=ws(this,this.first,this.first+this.size);return!1===t?n:n.join(t||this.lineSeparator())},setValue:sr(function(t){var n=st(this.first,0),h=this.first+this.size-1;gi(this,{from:n,to:st(h,xt(this,h).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Hi(this.cm,0,0),hr(this,En(n),pe)}),replaceRange:function(t,n,h,a){Nn(this,t,n=At(this,n),h=h?At(this,h):n,a)},getRange:function(t,n,h){var a=Pn(this,At(this,t),At(this,n));return!1===h?a:""===h?a.join(""):a.join(h||this.lineSeparator())},getLine:function(t){var n=this.getLineHandle(t);return n&&n.text},getLineHandle:function(t){if(Ii(this,t))return xt(this,t)},getLineNumber:function(t){return Qt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=xt(this,t)),nr(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return At(this,t)},getCursor:function(t){var n=this.sel.primary();return null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||!1===t?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:sr(function(t,n,h){jl(this,At(this,"number"==typeof t?st(t,n||0):t),null,h)}),setSelection:sr(function(t,n,h){jl(this,At(this,t),At(this,n||t),h)}),extendSelection:sr(function(t,n,h){Xo(this,At(this,t),n&&At(this,n),h)}),extendSelections:sr(function(t,n){Rl(this,_s(this,t),n)}),extendSelectionsBy:sr(function(t,n){Rl(this,_s(this,ct(this.sel.ranges,t)),n)}),setSelections:sr(function(t,n,h){if(t.length){for(var a=[],b=0;b<t.length;b++)a[b]=new Pt(At(this,t[b].anchor),At(this,t[b].head||t[b].anchor));null==n&&(n=Math.min(t.length-1,this.sel.primIndex)),hr(this,Mr(this.cm,a,n),h)}}),addSelection:sr(function(t,n,h){var a=this.sel.ranges.slice(0);a.push(new Pt(At(this,t),At(this,n||t))),hr(this,Mr(this.cm,a,a.length-1),h)}),getSelection:function(t){for(var h,n=this.sel.ranges,a=0;a<n.length;a++){var b=Pn(this,n[a].from(),n[a].to());h=h?h.concat(b):b}return!1===t?h:h.join(t||this.lineSeparator())},getSelections:function(t){for(var n=[],h=this.sel.ranges,a=0;a<h.length;a++){var b=Pn(this,h[a].from(),h[a].to());!1!==t&&(b=b.join(t||this.lineSeparator())),n[a]=b}return n},replaceSelection:function(t,n,h){for(var a=[],b=0;b<this.sel.ranges.length;b++)a[b]=t;this.replaceSelections(a,n,h||"+input")},replaceSelections:sr(function(t,n,h){for(var a=[],b=this.sel,j=0;j<b.ranges.length;j++){var X=b.ranges[j];a[j]={from:X.from(),to:X.to(),text:this.splitLines(t[j]),origin:h}}for(var $=n&&"end"!=n&&function mf(t,n,h){for(var a=[],b=st(t.first,0),j=b,X=0;X<n.length;X++){var $=n[X],te=El($.from,b,j),se=El(Tn($),b,j);if(b=$.to,j=se,"around"==h){var we=t.sel.ranges[X],Te=St(we.head,we.anchor)<0;a[X]=new Pt(Te?se:te,Te?te:se)}else a[X]=new Pt(te,te)}return new Nr(a,t.sel.primIndex)}(this,a,n),te=a.length-1;te>=0;te--)gi(this,a[te]);$?aa(this,$):this.cm&&di(this.cm)}),undo:sr(function(){ts(this,"undo")}),redo:sr(function(){ts(this,"redo")}),undoSelection:sr(function(){ts(this,"undo",!0)}),redoSelection:sr(function(){ts(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,n=0,h=0,a=0;a<t.done.length;a++)t.done[a].ranges||++n;for(var b=0;b<t.undone.length;b++)t.undone[b].ranges||++h;return{undo:n,redo:h}},clearHistory:function(){var t=this;this.history=new zo(this.history),cn(this,function(n){return n.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Rr(this.history.done),undone:Rr(this.history.undone)}},setHistory:function(t){var n=this.history=new zo(this.history);n.done=Rr(t.done.slice(0),null,!0),n.undone=Rr(t.undone.slice(0),null,!0)},setGutterMarker:sr(function(t,n,h){return Yi(this,t,"gutter",function(a){var b=a.gutterMarkers||(a.gutterMarkers={});return b[n]=h,!h&&ne(b)&&(a.gutterMarkers=null),!0})}),clearGutter:sr(function(t){var n=this;this.iter(function(h){h.gutterMarkers&&h.gutterMarkers[t]&&Yi(n,h,"gutter",function(){return h.gutterMarkers[t]=null,ne(h.gutterMarkers)&&(h.gutterMarkers=null),!0})})}),lineInfo:function(t){var n;if("number"==typeof t){if(!Ii(this,t)||(n=t,!(t=xt(this,t))))return null}else if(null==(n=Qt(t)))return null;return{line:n,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:sr(function(t,n,h){return Yi(this,t,"gutter"==n?"gutter":"class",function(a){var b="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(a[b]){if(K(h).test(a[b]))return!1;a[b]+=" "+h}else a[b]=h;return!0})}),removeLineClass:sr(function(t,n,h){return Yi(this,t,"gutter"==n?"gutter":"class",function(a){var b="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",j=a[b];if(!j)return!1;if(null==h)a[b]=null;else{var X=j.match(K(h));if(!X)return!1;var $=X.index+X[0].length;a[b]=j.slice(0,X.index)+(X.index&&$!=j.length?" ":"")+j.slice($)||null}return!0})}),addLineWidget:sr(function(t,n,h){return function Sf(t,n,h,a){var b=new eo(t,h,a),j=t.cm;return j&&b.noHScroll&&(j.display.alignWidgets=!0),Yi(t,n,"widget",function(X){var $=X.widgets||(X.widgets=[]);if(null==b.insertAt?$.push(b):$.splice(Math.min($.length,Math.max(0,b.insertAt)),0,b),b.line=X,j&&!on(t,X)){var te=Xr(X)<t.scrollTop;Jr(X,X.height+fi(b)),te&&Ys(j,b.height),j.curOp.forceUpdate=!0}return!0}),j&&ir(j,"lineWidgetAdded",j,b,"number"==typeof n?n:Qt(n)),b}(this,t,n,h)}),removeLineWidget:function(t){t.clear()},markText:function(t,n,h){return yi(this,At(this,t),At(this,n),h,h&&h.type||"range")},setBookmark:function(t,n){var h={replacedWith:n&&(null==n.nodeType?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return yi(this,t=At(this,t),t,h,"bookmark")},findMarksAt:function(t){var n=[],h=xt(this,(t=At(this,t)).line).markedSpans;if(h)for(var a=0;a<h.length;++a){var b=h[a];(null==b.from||b.from<=t.ch)&&(null==b.to||b.to>=t.ch)&&n.push(b.marker.parent||b.marker)}return n},findMarks:function(t,n,h){t=At(this,t),n=At(this,n);var a=[],b=t.line;return this.iter(t.line,n.line+1,function(j){var X=j.markedSpans;if(X)for(var $=0;$<X.length;$++){var te=X[$];!(null!=te.to&&b==t.line&&t.ch>=te.to||null==te.from&&b!=t.line||null!=te.from&&b==n.line&&te.from>=n.ch)&&(!h||h(te.marker))&&a.push(te.marker.parent||te.marker)}++b}),a},getAllMarks:function(){var t=[];return this.iter(function(n){var h=n.markedSpans;if(h)for(var a=0;a<h.length;++a)null!=h[a].from&&t.push(h[a].marker)}),t},posFromIndex:function(t){var n,h=this.first,a=this.lineSeparator().length;return this.iter(function(b){var j=b.text.length+a;if(j>t)return n=t,!0;t-=j,++h}),At(this,st(h,n))},indexFromPos:function(t){var n=(t=At(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var h=this.lineSeparator().length;return this.iter(this.first,t.line,function(a){n+=a.text.length+h}),n},copy:function(t){var n=new br(ws(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,t&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(t){t||(t={});var n=this.first,h=this.first+this.size;null!=t.from&&t.from>n&&(n=t.from),null!=t.to&&t.to<h&&(h=t.to);var a=new br(ws(this,n,h),t.mode||this.modeOption,n,this.lineSep,this.direction);return t.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:t.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function Ff(t,n){for(var h=0;h<n.length;h++){var a=n[h],b=a.find(),j=t.clipPos(b.from),X=t.clipPos(b.to);if(St(j,X)){var $=yi(t,j,X,a.primary,a.primary.type);a.markers.push($),$.parent=a}}}(a,Ul(this)),a},unlinkDoc:function(t){if(t instanceof Ht&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Ef(Ul(this));break}}if(t.history==this.history){var a=[t.id];cn(t,function(b){return a.push(b.id)},!0),t.history=new zo(null),t.history.done=Rr(this.history.done,a),t.history.undone=Rr(this.history.undone,a)}},iterLinkedDocs:function(t){cn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):jr(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:sr(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(n){return n.order=null}),this.cm&&function bf(t){Fr(t,function(){Nl(t),Ut(t)})}(this.cm))})}),br.prototype.eachLine=br.prototype.iter;var ro=0;function Gl(t){var n=this;if(no(n),!bt(n,t)&&!sn(n.display,t)){Ct(t),v&&(ro=+new Date);var h=zn(n,t,!0),a=t.dataTransfer.files;if(h&&!n.isReadOnly())if(a&&a.length&&window.FileReader&&window.File)for(var b=a.length,j=Array(b),X=0,$=function(){++X==b&&or(n,function(){var Qe={from:h=At(n.doc,h),to:h,text:n.doc.splitLines(j.filter(function(Ye){return null!=Ye}).join(n.doc.lineSeparator())),origin:"paste"};gi(n.doc,Qe),aa(n.doc,En(At(n.doc,h),At(n.doc,Tn(Qe))))})()},te=function(Qe,Ye){if(n.options.allowDropFileTypes&&-1==M(n.options.allowDropFileTypes,Qe.type))$();else{var tt=new FileReader;tt.onerror=function(){return $()},tt.onload=function(){var lt=tt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(lt)||(j[Ye]=lt),$()},tt.readAsText(Qe)}},se=0;se<a.length;se++)te(a[se],se);else{if(n.state.draggingText&&n.doc.sel.contains(h)>-1)return n.state.draggingText(t),void setTimeout(function(){return n.display.input.focus()},20);try{var we=t.dataTransfer.getData("Text");if(we){var Te;if(n.state.draggingText&&!n.state.draggingText.copy&&(Te=n.listSelections()),Vo(n.doc,En(h,h)),Te)for(var Ue=0;Ue<Te.length;++Ue)Nn(n.doc,"",Te[Ue].anchor,Te[Ue].head,"drag");n.replaceSelection(we,"around","paste"),n.display.input.focus()}}catch(Qe){}}}}function no(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function ua(t){if(document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),h=[],a=0;a<n.length;a++){var b=n[a].CodeMirror;b&&h.push(b)}h.length&&h[0].operation(function(){for(var j=0;j<h.length;j++)t(h[j])})}}var Hl=!1;function If(){Hl||(function Of(){var t;et(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,ua(os)},100))}),et(window,"blur",function(){return ua(pi)})}(),Hl=!0)}function os(t){var n=t.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,t.setSize()}for(var Pr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ln=0;Ln<10;Ln++)Pr[Ln+48]=Pr[Ln+96]=String(Ln);for(var io=65;io<=90;io++)Pr[io]=String.fromCharCode(io);for(var Vn=1;Vn<=12;Vn++)Pr[Vn+111]=Pr[Vn+63235]="F"+Vn;var Br={};function fa(t){var n=t.split(/-(?!$)/);t=n[n.length-1];for(var h,a,b,j,X=0;X<n.length-1;X++){var $=n[X];if(/^(cmd|meta|m)$/i.test($))j=!0;else if(/^a(lt)?$/i.test($))h=!0;else if(/^(c|ctrl|control)$/i.test($))a=!0;else{if(!/^s(hift)?$/i.test($))throw new Error("Unrecognized modifier name: "+$);b=!0}}return h&&(t="Alt-"+t),a&&(t="Ctrl-"+t),j&&(t="Cmd-"+t),b&&(t="Shift-"+t),t}function ca(t){var n={};for(var h in t)if(t.hasOwnProperty(h)){var a=t[h];if(/^(name|fallthrough|(de|at)tach)$/.test(h))continue;if("..."==a){delete t[h];continue}for(var b=ct(h.split(" "),fa),j=0;j<b.length;j++){var X=void 0,$=void 0;j==b.length-1?($=b.join(" "),X=a):($=b.slice(0,j+1).join(" "),X="...");var te=n[$];if(te){if(te!=X)throw new Error("Inconsistent bindings for "+$)}else n[$]=X}delete t[h]}for(var se in n)t[se]=n[se];return t}function vn(t,n,h,a){var b=(n=Kn(n)).call?n.call(t,a):n[t];if(!1===b)return"nothing";if("..."===b)return"multi";if(null!=b&&h(b))return"handled";if(n.fallthrough){if("[object Array]"!=Object.prototype.toString.call(n.fallthrough))return vn(t,n.fallthrough,h,a);for(var j=0;j<n.fallthrough.length;j++){var X=vn(t,n.fallthrough[j],h,a);if(X)return X}}}function ha(t){var n="string"==typeof t?t:Pr[t.keyCode];return"Ctrl"==n||"Alt"==n||"Shift"==n||"Mod"==n}function oo(t,n,h){var a=t;return n.altKey&&"Alt"!=a&&(t="Alt-"+t),(D?n.metaKey:n.ctrlKey)&&"Ctrl"!=a&&(t="Ctrl-"+t),(D?n.ctrlKey:n.metaKey)&&"Mod"!=a&&(t="Cmd-"+t),!h&&n.shiftKey&&"Shift"!=a&&(t="Shift-"+t),t}function pa(t,n){if(c&&34==t.keyCode&&t.char)return!1;var h=Pr[t.keyCode];return null!=h&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(h=t.code),oo(h,t,n))}function Kn(t){return"string"==typeof t?Br[t]:t}function gn(t,n){for(var h=t.doc.sel.ranges,a=[],b=0;b<h.length;b++){for(var j=n(h[b]);a.length&&St(j.from,ot(a).to)<=0;){var X=a.pop();if(St(X.from,j.from)<0){j.from=X.from;break}}a.push(j)}Fr(t,function(){for(var $=a.length-1;$>=0;$--)Nn(t.doc,"",a[$].from,a[$].to,"+delete");di(t)})}function mi(t,n,h){var a=Le(t.text,n+h,h);return a<0||a>t.text.length?null:a}function bi(t,n,h){var a=mi(t,n.ch,h);return null==a?null:new st(n.line,a,h<0?"after":"before")}function In(t,n,h,a,b){if(t){"rtl"==n.doc.direction&&(b=-b);var j=rt(h,n.doc.direction);if(j){var se,X=b<0?ot(j):j[0],te=b<0==(1==X.level)?"after":"before";if(X.level>0||"rtl"==n.doc.direction){var we=Gn(n,h);se=b<0?h.text.length-1:0;var Te=Vr(n,we,se).top;se=_e(function(Ue){return Vr(n,we,Ue).top==Te},b<0==(1==X.level)?X.from:X.to-1,se),"before"==te&&(se=mi(h,se,1))}else se=b<0?X.to:X.from;return new st(a,se,te)}}return new st(a,b<0?h.text.length:0,b<0?"before":"after")}Br.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Br.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Br.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Br.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Br.default=W?Br.macDefault:Br.pcDefault;var Kr={selectAll:es,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),pe)},killLine:function(t){return gn(t,function(n){if(n.empty()){var h=xt(t.doc,n.head.line).text.length;return n.head.ch==h&&n.head.line<t.lastLine()?{from:n.head,to:st(n.head.line+1,0)}:{from:n.head,to:st(n.head.line,h)}}return{from:n.from(),to:n.to()}})},deleteLine:function(t){return gn(t,function(n){return{from:st(n.from().line,0),to:At(t.doc,st(n.to().line+1,0))}})},delLineLeft:function(t){return gn(t,function(n){return{from:st(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(t){return gn(t,function(n){var h=t.charCoords(n.head,"div").top+5;return{from:t.coordsChar({left:0,top:h},"div"),to:n.from()}})},delWrappedLineRight:function(t){return gn(t,function(n){var h=t.charCoords(n.head,"div").top+5,a=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:h},"div");return{from:n.from(),to:a}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(st(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(st(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(n){return Yn(t,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(n){return da(t,n.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(n){return function Wl(t,n){var h=xt(t.doc,n),a=function nn(t){for(var n;n=Ao(t);)t=n.find(1,!0).line;return t}(h);return a!=h&&(n=Qt(a)),In(!0,t,h,n,-1)}(t,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(n){var h=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:h},"div")},ye)},goLineLeft:function(t){return t.extendSelectionsBy(function(n){var h=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:0,top:h},"div")},ye)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(n){var h=t.cursorCoords(n.head,"div").top+5,a=t.coordsChar({left:0,top:h},"div");return a.ch<t.getLine(a.line).search(/\S/)?da(t,n.head):a},ye)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var n=[],h=t.listSelections(),a=t.options.tabSize,b=0;b<h.length;b++){var j=h[b].from(),X=He(t.getLine(j.line),j.ch,a);n.push(Xe(a-X%a))}t.replaceSelections(n)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Fr(t,function(){for(var n=t.listSelections(),h=[],a=0;a<n.length;a++)if(n[a].empty()){var b=n[a].head,j=xt(t.doc,b.line).text;if(j)if(b.ch==j.length&&(b=new st(b.line,b.ch-1)),b.ch>0)b=new st(b.line,b.ch+1),t.replaceRange(j.charAt(b.ch-1)+j.charAt(b.ch-2),st(b.line,b.ch-2),b,"+transpose");else if(b.line>t.doc.first){var X=xt(t.doc,b.line-1).text;X&&(b=new st(b.line,1),t.replaceRange(j.charAt(0)+t.doc.lineSeparator()+X.charAt(X.length-1),st(b.line-1,X.length-1),b,"+transpose"))}h.push(new Pt(b,b))}t.setSelections(h)})},newlineAndIndent:function(t){return Fr(t,function(){for(var n=t.listSelections(),h=n.length-1;h>=0;h--)t.replaceRange(t.doc.lineSeparator(),n[h].anchor,n[h].head,"+input");n=t.listSelections();for(var a=0;a<n.length;a++)t.indentLine(n[a].from().line,null,!0);di(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Yn(t,n){var h=xt(t.doc,n),a=nr(h);return a!=h&&(n=Qt(a)),In(!0,t,a,n,1)}function da(t,n){var h=Yn(t,n.line),a=xt(t.doc,h.line),b=rt(a,t.doc.direction);if(!b||0==b[0].level){var j=Math.max(h.ch,a.text.search(/\S/)),X=n.line==h.line&&n.ch<=j&&n.ch;return st(h.line,X?0:j,h.sticky)}return h}function so(t,n,h){if("string"==typeof n&&!(n=Kr[n]))return!1;t.display.input.ensurePolled();var a=t.display.shift,b=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),h&&(t.display.shift=!1),b=n(t)!=Y}finally{t.display.shift=a,t.state.suppressEdits=!1}return b}var ql=new Je;function wi(t,n,h,a){var b=t.state.keySeq;if(b){if(ha(n))return"handled";if(/\'$/.test(n)?t.state.keySeq=null:ql.set(50,function(){t.state.keySeq==b&&(t.state.keySeq=null,t.display.input.reset())}),va(t,b+" "+n,h,a))return!0}return va(t,n,h,a)}function va(t,n,h,a){var b=function zl(t,n,h){for(var a=0;a<t.state.keyMaps.length;a++){var b=vn(n,t.state.keyMaps[a],h,t);if(b)return b}return t.options.extraKeys&&vn(n,t.options.extraKeys,h,t)||vn(n,t.options.keyMap,h,t)}(t,n,a);return"multi"==b&&(t.state.keySeq=n),"handled"==b&&ir(t,"keyHandled",t,n,h),("handled"==b||"multi"==b)&&(Ct(h),Vs(t)),!!b}function ga(t,n){var h=pa(n,!0);return!!h&&(n.shiftKey&&!t.state.keySeq?wi(t,"Shift-"+h,n,function(a){return so(t,a,!0)})||wi(t,h,n,function(a){if("string"==typeof a?/^go[A-Z]/.test(a):a.motion)return so(t,a)}):wi(t,h,n,function(a){return so(t,a)}))}var ya=null;function Jl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||(n.curOp.focus=ee(Ne(n)),bt(n,t)))){v&&e<11&&27==t.keyCode&&(t.returnValue=!1);var h=t.keyCode;n.display.shift=16==h||t.shiftKey;var a=ga(n,t);c&&(ya=a?h:null,!a&&88==h&&!vo&&(W?t.metaKey:t.ctrlKey)&&n.replaceSelection("",null,"cut")),le&&!W&&!a&&46==h&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==h&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&function Yr(t){var n=t.display.lineDiv;function h(a){(18==a.keyCode||!a.altKey)&&(H(n,"CodeMirror-crosshair"),vt(document,"keyup",h),vt(document,"mouseover",h))}de(n,"CodeMirror-crosshair"),et(document,"keyup",h),et(document,"mouseover",h)}(n)}}function Qr(t){16==t.keyCode&&(this.doc.sel.shift=!1),bt(this,t)}function Xl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||sn(n.display,t)||bt(n,t)||t.ctrlKey&&!t.altKey||W&&t.metaKey)){var h=t.keyCode,a=t.charCode;if(c&&h==ya)return ya=null,void Ct(t);if(!c||t.which&&!(t.which<10)||!ga(n,t)){var b=String.fromCharCode(null==a?h:a);"\b"!=b&&(function Rf(t,n,h){return wi(t,"'"+h+"'",n,function(a){return so(t,a,!0)})}(n,t,b)||n.display.input.onKeyPress(t))}}}var ao,lo,ma=function(t,n,h){this.time=t,this.pos=n,this.button=h};function Vl(t){var n=this,h=n.display;if(!(bt(n,t)||h.activeTouch&&h.input.supportsTouch())){if(h.input.ensurePolled(),h.shift=t.shiftKey,sn(h,t))return void(o||(h.scroller.draggable=!1,setTimeout(function(){return h.scroller.draggable=!0},100)));if(!ss(n,t)){var a=zn(n,t),b=po(t),j=a?function Df(t,n){var h=+new Date;return lo&&lo.compare(h,t,n)?(ao=lo=null,"triple"):ao&&ao.compare(h,t,n)?(lo=new ma(h,t,n),ao=null,"double"):(ao=new ma(h,t,n),lo=null,"single")}(a,b):"single";Se(n).focus(),1==b&&n.state.selectingText&&n.state.selectingText(t),(!a||!function Mf(t,n,h,a,b){var j="Click";return"double"==a?j="Double"+j:"triple"==a&&(j="Triple"+j),wi(t,oo(j=(1==n?"Left":2==n?"Middle":"Right")+j,b),b,function(X){if("string"==typeof X&&(X=Kr[X]),!X)return!1;var $=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),$=X(t,h)!=Y}finally{t.state.suppressEdits=!1}return $})}(n,b,a,j,t))&&(1==b?a?function Bf(t,n,h,a){v?setTimeout(be(hl,t),0):t.curOp.focus=ee(Ne(t));var X,b=function Pf(t,n,h){var a=t.getOption("configureMouse"),b=a?a(t,n,h):{};if(null==b.unit){var j=B?h.shiftKey&&h.metaKey:h.altKey;b.unit=j?"rectangle":"single"==n?"char":"double"==n?"word":"line"}return(null==b.extend||t.doc.extend)&&(b.extend=t.doc.extend||h.shiftKey),null==b.addNew&&(b.addNew=W?h.metaKey:h.ctrlKey),null==b.moveOnDrag&&(b.moveOnDrag=!(W?h.altKey:h.ctrlKey)),b}(t,h,a),j=t.doc.sel;t.options.dragDrop&&ys&&!t.isReadOnly()&&"single"==h&&(X=j.contains(n))>-1&&(St((X=j.ranges[X]).from(),n)<0||n.xRel>0)&&(St(X.to(),n)>0||n.xRel<0)?function Qf(t,n,h,a){var b=t.display,j=!1,X=or(t,function(se){o&&(b.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Ks(t)),vt(b.wrapper.ownerDocument,"mouseup",X),vt(b.wrapper.ownerDocument,"mousemove",$),vt(b.scroller,"dragstart",te),vt(b.scroller,"drop",X),j||(Ct(se),a.addNew||Xo(t.doc,h,null,null,a.extend),o&&!k||v&&9==e?setTimeout(function(){b.wrapper.ownerDocument.body.focus({preventScroll:!0}),b.input.focus()},20):b.input.focus())}),$=function(se){j=j||Math.abs(n.clientX-se.clientX)+Math.abs(n.clientY-se.clientY)>=10},te=function(){return j=!0};o&&(b.scroller.draggable=!0),t.state.draggingText=X,X.copy=!a.moveOnDrag,et(b.wrapper.ownerDocument,"mouseup",X),et(b.wrapper.ownerDocument,"mousemove",$),et(b.scroller,"dragstart",te),et(b.scroller,"drop",X),t.state.delayingBlurEvent=!0,setTimeout(function(){return b.input.focus()},20),b.scroller.dragDrop&&b.scroller.dragDrop()}(t,a,n,b):function Uf(t,n,h,a){v&&Ks(t);var b=t.display,j=t.doc;Ct(n);var X,$,te=j.sel,se=te.ranges;if(a.addNew&&!a.extend?X=($=j.sel.contains(h))>-1?se[$]:new Pt(h,h):(X=j.sel.primary(),$=j.sel.primIndex),"rectangle"==a.unit)a.addNew||(X=new Pt(h,h)),h=zn(t,n,!0,!0),$=-1;else{var we=Kl(t,h,a.unit);X=a.extend?hn(X,we.anchor,we.head,a.extend):we}a.addNew?-1==$?($=se.length,hr(j,Mr(t,se.concat([X]),$),{scroll:!1,origin:"*mouse"})):se.length>1&&se[$].empty()&&"char"==a.unit&&!a.extend?(hr(j,Mr(t,se.slice(0,$).concat(se.slice($+1)),0),{scroll:!1,origin:"*mouse"}),te=j.sel):sa(j,$,X,Ae):($=0,hr(j,new Nr([X],0),Ae),te=j.sel);var Te=h;function Ue(pt){if(0!=St(Te,pt))if(Te=pt,"rectangle"==a.unit){for(var gt=[],_t=t.options.tabSize,wt=He(xt(j,h.line).text,h.ch,_t),Nt=He(xt(j,pt.line).text,pt.ch,_t),Gt=Math.min(wt,Nt),ar=Math.max(wt,Nt),Wt=Math.min(h.line,pt.line),xr=Math.min(t.lastLine(),Math.max(h.line,pt.line));Wt<=xr;Wt++){var wr=xt(j,Wt).text,Vt=De(wr,Gt,_t);Gt==ar?gt.push(new Pt(st(Wt,Vt),st(Wt,Vt))):wr.length>Vt&&gt.push(new Pt(st(Wt,Vt),st(Wt,De(wr,ar,_t))))}gt.length||gt.push(new Pt(h,h)),hr(j,Mr(t,te.ranges.slice(0,$).concat(gt),$),{origin:"*mouse",scroll:!1}),t.scrollIntoView(pt)}else{var tr,kr=X,fr=Kl(t,pt,a.unit),er=kr.anchor;St(fr.anchor,er)>0?(tr=fr.head,er=Oi(kr.from(),fr.anchor)):(tr=fr.anchor,er=xo(kr.to(),fr.head));var zt=te.ranges.slice(0);zt[$]=function Gf(t,n){var h=n.anchor,a=n.head,b=xt(t.doc,h.line);if(0==St(h,a)&&h.sticky==a.sticky)return n;var j=rt(b);if(!j)return n;var X=We(j,h.ch,h.sticky),$=j[X];if($.from!=h.ch&&$.to!=h.ch)return n;var se,te=X+($.from==h.ch==(1!=$.level)?0:1);if(0==te||te==j.length)return n;if(a.line!=h.line)se=(a.line-h.line)*("ltr"==t.doc.direction?1:-1)>0;else{var we=We(j,a.ch,a.sticky),Te=we-X||(a.ch-h.ch)*(1==$.level?-1:1);se=we==te-1||we==te?Te<0:Te>0}var Ue=j[te+(se?-1:0)],Qe=se==(1==Ue.level),Ye=Qe?Ue.from:Ue.to,tt=Qe?"after":"before";return h.ch==Ye&&h.sticky==tt?n:new Pt(new st(h.line,Ye,tt),a)}(t,new Pt(At(j,er),tr)),hr(j,Mr(t,zt,$),Ae)}}var Qe=b.wrapper.getBoundingClientRect(),Ye=0;function tt(pt){var gt=++Ye,_t=zn(t,pt,!0,"rectangle"==a.unit);if(_t)if(0!=St(_t,Te)){t.curOp.focus=ee(Ne(t)),Ue(_t);var wt=Qo(b,j);(_t.line>=wt.to||_t.line<wt.from)&&setTimeout(or(t,function(){Ye==gt&&tt(pt)}),150)}else{var Nt=pt.clientY<Qe.top?-20:pt.clientY>Qe.bottom?20:0;Nt&&setTimeout(or(t,function(){Ye==gt&&(b.scroller.scrollTop+=Nt,tt(pt))}),50)}}function lt(pt){t.state.selectingText=!1,Ye=1/0,pt&&(Ct(pt),b.input.focus()),vt(b.wrapper.ownerDocument,"mousemove",ht),vt(b.wrapper.ownerDocument,"mouseup",dt),j.history.lastSelOrigin=null}var ht=or(t,function(pt){0!==pt.buttons&&po(pt)?tt(pt):lt(pt)}),dt=or(t,lt);t.state.selectingText=dt,et(b.wrapper.ownerDocument,"mousemove",ht),et(b.wrapper.ownerDocument,"mouseup",dt)}(t,a,n,b)}(n,a,j,t):Ti(t)==h.scroller&&Ct(t):2==b?(a&&Xo(n.doc,a),setTimeout(function(){return h.input.focus()},20)):3==b&&(G?n.display.input.onContextMenu(t):Ks(n)))}}}function Kl(t,n,h){if("char"==h)return new Pt(n,n);if("word"==h)return t.findWordAt(n);if("line"==h)return new Pt(st(n.line,0),At(t.doc,st(n.line+1,0)));var a=h(t,n);return new Pt(a.from,a.to)}function Yl(t,n,h,a){var b,j;if(n.touches)b=n.touches[0].clientX,j=n.touches[0].clientY;else try{b=n.clientX,j=n.clientY}catch(Ue){return!1}if(b>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;a&&Ct(n);var X=t.display,$=X.lineDiv.getBoundingClientRect();if(j>$.bottom||!at(t,h))return Dn(n);j-=$.top-X.viewOffset;for(var te=0;te<t.display.gutterSpecs.length;++te){var se=X.gutters.childNodes[te];if(se&&se.getBoundingClientRect().right>=b)return mt(t,h,t,xn(t.doc,j),t.display.gutterSpecs[te].className,n),Dn(n)}}function ss(t,n){return Yl(t,n,"gutterClick",!0)}function Zl(t,n){sn(t.display,n)||function $l(t,n){return!!at(t,"gutterContextMenu")&&Yl(t,n,"gutterContextMenu",!1)}(t,n)||bt(t,n,"contextmenu")||G||t.display.input.onContextMenu(n)}function eu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ci(t)}ma.prototype.compare=function(t,n,h){return this.time+400>t&&0==St(n,this.pos)&&h==this.button};var ki={toString:function(){return"CodeMirror.Init"}},ba={},as={};function Hf(t,n,h){if(!n!=!(h&&h!=ki)){var b=t.display.dragFunctions,j=n?et:vt;j(t.display.scroller,"dragstart",b.start),j(t.display.scroller,"dragenter",b.enter),j(t.display.scroller,"dragover",b.over),j(t.display.scroller,"dragleave",b.leave),j(t.display.scroller,"drop",b.drop)}}function Wf(t){t.options.lineWrapping?(de(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(H(t.display.wrapper,"CodeMirror-wrap"),Eo(t)),Js(t),Ut(t),ci(t),setTimeout(function(){return Jn(t)},100)}function Ht(t,n){var h=this;if(!(this instanceof Ht))return new Ht(t,n);this.options=n=n?Pe(n):{},Pe(ba,n,!1);var a=n.value;"string"==typeof a?a=new br(a,n.mode,null,n.lineSeparator,n.direction):n.mode&&(a.modeOption=n.mode),this.doc=a;var b=new Ht.inputStyles[n.inputStyle](this),j=this.display=new gf(t,a,b,n);for(var X in j.wrapper.CodeMirror=this,eu(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$s(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Je,keySeq:null,specialChars:null},n.autofocus&&!I&&j.input.focus(),v&&e<11&&setTimeout(function(){return h.display.input.reset(!0)},20),function zf(t){var n=t.display;et(n.scroller,"mousedown",or(t,Vl)),et(n.scroller,"dblclick",v&&e<11?or(t,function(te){if(!bt(t,te)){var se=zn(t,te);if(se&&!ss(t,te)&&!sn(t.display,te)){Ct(te);var we=t.findWordAt(se);Xo(t.doc,we.anchor,we.head)}}}):function(te){return bt(t,te)||Ct(te)}),et(n.scroller,"contextmenu",function(te){return Zl(t,te)}),et(n.input.getField(),"contextmenu",function(te){n.scroller.contains(te.target)||Zl(t,te)});var h,a={end:0};function b(){n.activeTouch&&(h=setTimeout(function(){return n.activeTouch=null},1e3),(a=n.activeTouch).end=+new Date)}function j(te){if(1!=te.touches.length)return!1;var se=te.touches[0];return se.radiusX<=1&&se.radiusY<=1}function X(te,se){if(null==se.left)return!0;var we=se.left-te.left,Te=se.top-te.top;return we*we+Te*Te>400}et(n.scroller,"touchstart",function(te){if(!bt(t,te)&&!j(te)&&!ss(t,te)){n.input.ensurePolled(),clearTimeout(h);var se=+new Date;n.activeTouch={start:se,moved:!1,prev:se-a.end<=300?a:null},1==te.touches.length&&(n.activeTouch.left=te.touches[0].pageX,n.activeTouch.top=te.touches[0].pageY)}}),et(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),et(n.scroller,"touchend",function(te){var se=n.activeTouch;if(se&&!sn(n,te)&&null!=se.left&&!se.moved&&new Date-se.start<300){var Te,we=t.coordsChar(n.activeTouch,"page");Te=!se.prev||X(se,se.prev)?new Pt(we,we):!se.prev.prev||X(se,se.prev.prev)?t.findWordAt(we):new Pt(st(we.line,0),At(t.doc,st(we.line+1,0))),t.setSelection(Te.anchor,Te.head),t.focus(),Ct(te)}b()}),et(n.scroller,"touchcancel",b),et(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Wi(t,n.scroller.scrollTop),qn(t,n.scroller.scrollLeft,!0),mt(t,"scroll",t))}),et(n.scroller,"mousewheel",function(te){return Al(t,te)}),et(n.scroller,"DOMMouseScroll",function(te){return Al(t,te)}),et(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(te){bt(t,te)||mn(te)},over:function(te){bt(t,te)||(function Lf(t,n){var h=zn(t,n);if(h){var a=document.createDocumentFragment();Xs(t,h,a),t.display.dragCursor||(t.display.dragCursor=ce("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),ue(t.display.dragCursor,a)}}(t,te),mn(te))},start:function(te){return function Nf(t,n){if(v&&(!t.state.draggingText||+new Date-ro<100))mn(n);else if(!bt(t,n)&&!sn(t.display,n)&&(n.dataTransfer.setData("Text",t.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!k)){var h=ce("img",null,null,"position: fixed; left: 0; top: 0;");h.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(h.width=h.height=1,t.display.wrapper.appendChild(h),h._top=h.offsetTop),n.dataTransfer.setDragImage(h,0,0),c&&h.parentNode.removeChild(h)}}(t,te)},drop:or(t,Gl),leave:function(te){bt(t,te)||no(t)}};var $=n.input.getField();et($,"keyup",function(te){return Qr.call(t,te)}),et($,"keydown",or(t,Jl)),et($,"keypress",or(t,Xl)),et($,"focus",function(te){return Bo(t,te)}),et($,"blur",function(te){return pi(t,te)})}(this),If(),Fn(this),this.curOp.forceUpdate=!0,Tl(this,a),n.autofocus&&!I||this.hasFocus()?setTimeout(function(){h.hasFocus()&&!h.state.focused&&Bo(h)},20):pi(this),as)as.hasOwnProperty(X)&&as[X](this,n[X],ki);_l(this),n.finishInit&&n.finishInit(this);for(var $=0;$<ls.length;++$)ls[$](this);Xn(this),o&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(j.lineDiv).textRendering&&(j.lineDiv.style.textRendering="auto")}Ht.defaults=ba,Ht.optionHandlers=as;var ls=[];function uo(t,n,h,a){var j,b=t.doc;null==h&&(h="add"),"smart"==h&&(b.mode.indent?j=Ri(t,n).state:h="prev");var X=t.options.tabSize,$=xt(b,n),te=He($.text,null,X);$.stateAfter&&($.stateAfter=null);var we,se=$.text.match(/^\s*/)[0];if(a||/\S/.test($.text)){if("smart"==h&&((we=b.mode.indent(j,$.text.slice(se.length),$.text))==Y||we>150)){if(!a)return;h="prev"}}else we=0,h="not";"prev"==h?we=n>b.first?He(xt(b,n-1).text,null,X):0:"add"==h?we=te+t.options.indentUnit:"subtract"==h?we=te-t.options.indentUnit:"number"==typeof h&&(we=te+h),we=Math.max(0,we);var Te="",Ue=0;if(t.options.indentWithTabs)for(var Qe=Math.floor(we/X);Qe;--Qe)Ue+=X,Te+="\t";if(Ue<we&&(Te+=Xe(we-Ue)),Te!=se)return Nn(b,Te,st(n,0),st(n,se.length),"+input"),$.stateAfter=null,!0;for(var Ye=0;Ye<b.sel.ranges.length;Ye++){var tt=b.sel.ranges[Ye];if(tt.head.line==n&&tt.head.ch<se.length){var lt=st(n,se.length);sa(b,Ye,new Pt(lt,lt));break}}}Ht.defineInitHook=function(t){return ls.push(t)};var Ur=null;function fo(t){Ur=t}function xa(t,n,h,a,b){var j=t.doc;t.display.shift=!1,a||(a=j.sel);var X=+new Date-200,$="paste"==b||t.state.pasteIncoming>X,te=jr(n),se=null;if($&&a.ranges.length>1)if(Ur&&Ur.text.join("\n")==n){if(a.ranges.length%Ur.text.length==0){se=[];for(var we=0;we<Ur.text.length;we++)se.push(j.splitLines(Ur.text[we]))}}else te.length==a.ranges.length&&t.options.pasteLinesPerSelection&&(se=ct(te,function(ht){return[ht]}));for(var Te=t.curOp.updateInput,Ue=a.ranges.length-1;Ue>=0;Ue--){var Qe=a.ranges[Ue],Ye=Qe.from(),tt=Qe.to();Qe.empty()&&(h&&h>0?Ye=st(Ye.line,Ye.ch-h):t.state.overwrite&&!$?tt=st(tt.line,Math.min(xt(j,tt.line).text.length,tt.ch+ot(te).length)):$&&Ur&&Ur.lineWise&&Ur.text.join("\n")==te.join("\n")&&(Ye=tt=st(Ye.line,0)));var lt={from:Ye,to:tt,text:se?se[Ue%se.length]:te,origin:b||($?"paste":t.state.cutIncoming>X?"cut":"+input")};gi(t.doc,lt),ir(t,"inputRead",t,lt)}n&&!$&&ru(t,n),di(t),t.curOp.updateInput<2&&(t.curOp.updateInput=Te),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function wa(t,n){var h=t.clipboardData&&t.clipboardData.getData("Text");if(h)return t.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&n.hasFocus()&&Fr(n,function(){return xa(n,h,0,null,"paste")}),!0}function ru(t,n){if(t.options.electricChars&&t.options.smartIndent)for(var h=t.doc.sel,a=h.ranges.length-1;a>=0;a--){var b=h.ranges[a];if(!(b.head.ch>100||a&&h.ranges[a-1].head.line==b.head.line)){var j=t.getModeAt(b.head),X=!1;if(j.electricChars){for(var $=0;$<j.electricChars.length;$++)if(n.indexOf(j.electricChars.charAt($))>-1){X=uo(t,b.head.line,"smart");break}}else j.electricInput&&j.electricInput.test(xt(t.doc,b.head.line).text.slice(0,b.head.ch))&&(X=uo(t,b.head.line,"smart"));X&&ir(t,"electricInput",t,b.head.line)}}}function nu(t){for(var n=[],h=[],a=0;a<t.doc.sel.ranges.length;a++){var b=t.doc.sel.ranges[a].head.line,j={anchor:st(b,0),head:st(b+1,0)};h.push(j),n.push(t.getRange(j.anchor,j.head))}return{text:n,ranges:h}}function ka(t,n,h,a){t.setAttribute("autocorrect",h?"":"off"),t.setAttribute("autocapitalize",a?"":"off"),t.setAttribute("spellcheck",!!n)}function iu(){var t=ce("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=ce("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return o?t.style.width="1000px":t.setAttribute("wrap","off"),w&&(t.style.border="1px solid black"),ka(t),n}function _a(t,n,h,a,b){var j=n,X=h,$=xt(t,n.line),te=b&&"rtl"==t.direction?-h:h;function we(dt){var pt;if("codepoint"==a){var gt=$.text.charCodeAt(n.ch+(h>0?0:-1));if(isNaN(gt))pt=null;else{var _t=h>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;pt=new st(n.line,Math.max(0,Math.min($.text.length,n.ch+h*(_t?2:1))),-h)}}else pt=b?function xi(t,n,h,a){var b=rt(n,t.doc.direction);if(!b)return bi(n,h,a);h.ch>=n.text.length?(h.ch=n.text.length,h.sticky="before"):h.ch<=0&&(h.ch=0,h.sticky="after");var j=We(b,h.ch,h.sticky),X=b[j];if("ltr"==t.doc.direction&&X.level%2==0&&(a>0?X.to>h.ch:X.from<h.ch))return bi(n,h,a);var te,$=function(ht,dt){return mi(n,ht instanceof st?ht.ch:ht,dt)},se=function(ht){return t.options.lineWrapping?(te=te||Gn(t,n),Gs(t,n,te,ht)):{begin:0,end:n.text.length}},we=se("before"==h.sticky?$(h,-1):h.ch);if("rtl"==t.doc.direction||1==X.level){var Te=1==X.level==a<0,Ue=$(h,Te?1:-1);if(null!=Ue&&(Te?Ue<=X.to&&Ue<=we.end:Ue>=X.from&&Ue>=we.begin)){var Qe=Te?"before":"after";return new st(h.line,Ue,Qe)}}var Ye=function(ht,dt,pt){for(;ht>=0&&ht<b.length;ht+=dt){var _t=b[ht],wt=dt>0==(1!=_t.level),Nt=wt?pt.begin:$(pt.end,-1);if(_t.from<=Nt&&Nt<_t.to||(Nt=wt?_t.from:$(_t.to,-1),pt.begin<=Nt&&Nt<pt.end))return Gt=Nt,wt?new st(h.line,$(Gt,1),"before"):new st(h.line,Gt,"after")}var Gt},tt=Ye(j+a,a,we);if(tt)return tt;var lt=a>0?we.end:$(we.begin,-1);return null==lt||a>0&&lt==n.text.length||!(tt=Ye(a>0?0:b.length-1,a,se(lt)))?null:tt}(t.cm,$,n,h):bi($,n,h);if(null==pt){if(dt||!function se(){var dt=n.line+te;return!(dt<t.first||dt>=t.first+t.size)&&(n=new st(dt,n.ch,n.sticky),$=xt(t,dt))}())return!1;n=In(b,t.cm,$,n.line,te)}else n=pt;return!0}if("char"==a||"codepoint"==a)we();else if("column"==a)we(!0);else if("word"==a||"group"==a)for(var Te=null,Ue="group"==a,Qe=t.cm&&t.cm.getHelper(n,"wordChars"),Ye=!0;!(h<0)||we(!Ye);Ye=!1){var tt=$.text.charAt(n.ch)||"\n",lt=V(tt,Qe)?"w":Ue&&"\n"==tt?"n":!Ue||/\s/.test(tt)?null:"p";if(Ue&&!Ye&&!lt&&(lt="s"),Te&&Te!=lt){h<0&&(h=1,we(),n.sticky="after");break}if(lt&&(Te=lt),h>0&&!we(!Ye))break}var ht=Zo(t,n,j,X,!0);return ks(j,ht)&&(ht.hitSide=!0),ht}function su(t,n,h,a){var X,se,b=t.doc,j=n.left;if("page"==a){var $=Math.min(t.display.wrapper.clientHeight,Se(t).innerHeight||b(t).documentElement.clientHeight),te=Math.max($-.5*Wn(t.display),3);X=(h>0?n.bottom:n.top)+h*te}else"line"==a&&(X=h>0?n.bottom+3:n.top-3);for(;(se=jo(t,j,X)).outside;){if(h<0?X<=0:X>=b.height){se.hitSide=!0;break}X+=5*h}return se}var Bt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Je,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function au(t,n){var h=Ps(t,n.line);if(!h||h.hidden)return null;var a=xt(t.doc,n.line),b=tl(h,a,n.line),j=rt(a,t.doc.direction),X="left";j&&(X=We(j,n.ch)%2?"right":"left");var te=nl(b.map,n.ch,X);return te.offset="right"==te.collapse?te.end:te.start,te}function _i(t,n){return n&&(t.bad=!0),t}function co(t,n,h){var a;if(n==t.display.lineDiv){if(!(a=t.display.lineDiv.childNodes[h]))return _i(t.clipPos(st(t.display.viewTo-1)),!0);n=null,h=0}else for(a=n;;a=a.parentNode){if(!a||a==t.display.lineDiv)return null;if(a.parentNode&&a.parentNode==t.display.lineDiv)break}for(var b=0;b<t.display.view.length;b++){var j=t.display.view[b];if(j.node==a)return Jf(j,n,h)}}function Jf(t,n,h){var a=t.text.firstChild,b=!1;if(!n||!fe(a,n))return _i(st(Qt(t.line),0),!0);if(n==a&&(b=!0,n=a.childNodes[h],h=0,!n)){var j=t.rest?ot(t.rest):t.line;return _i(st(Qt(j),j.text.length),b)}var X=3==n.nodeType?n:null,$=n;for(!X&&1==n.childNodes.length&&3==n.firstChild.nodeType&&(X=n.firstChild,h&&(h=X.nodeValue.length));$.parentNode!=a;)$=$.parentNode;var te=t.measure,se=te.maps;function we(lt,ht,dt){for(var pt=-1;pt<(se?se.length:0);pt++)for(var gt=pt<0?te.map:se[pt],_t=0;_t<gt.length;_t+=3){var wt=gt[_t+2];if(wt==lt||wt==ht){var Nt=Qt(pt<0?t.line:t.rest[pt]),Gt=gt[_t]+dt;return(dt<0||wt!=lt)&&(Gt=gt[_t+(dt?1:0)]),st(Nt,Gt)}}}var Te=we(X,$,h);if(Te)return _i(Te,b);for(var Ue=$.nextSibling,Qe=X?X.nodeValue.length-h:0;Ue;Ue=Ue.nextSibling){if(Te=we(Ue,Ue.firstChild,0))return _i(st(Te.line,Te.ch-Qe),b);Qe+=Ue.textContent.length}for(var Ye=$.previousSibling,tt=h;Ye;Ye=Ye.previousSibling){if(Te=we(Ye,Ye.firstChild,-1))return _i(st(Te.line,Te.ch+tt),b);tt+=Ye.textContent.length}}Bt.prototype.init=function(t){var n=this,h=this,a=h.cm,b=h.div=t.lineDiv;function j($){for(var te=$.target;te;te=te.parentNode){if(te==b)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(te.className))break}return!1}function X($){if(j($)&&!bt(a,$)){if(a.somethingSelected())fo({lineWise:!1,text:a.getSelections()}),"cut"==$.type&&a.replaceSelection("",null,"cut");else{if(!a.options.lineWiseCopyCut)return;var te=nu(a);fo({lineWise:!0,text:te.text}),"cut"==$.type&&a.operation(function(){a.setSelections(te.ranges,0,pe),a.replaceSelection("",null,"cut")})}if($.clipboardData){$.clipboardData.clearData();var se=Ur.text.join("\n");if($.clipboardData.setData("Text",se),$.clipboardData.getData("Text")==se)return void $.preventDefault()}var we=iu(),Te=we.firstChild;a.display.lineSpace.insertBefore(we,a.display.lineSpace.firstChild),Te.value=Ur.text.join("\n");var Ue=ee(b.ownerDocument);Fe(Te),setTimeout(function(){a.display.lineSpace.removeChild(we),Ue.focus(),Ue==b&&h.showPrimarySelection()},50)}}b.contentEditable=!0,ka(b,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize),et(b,"paste",function($){!j($)||bt(a,$)||wa($,a)||e<=11&&setTimeout(or(a,function(){return n.updateFromDOM()}),20)}),et(b,"compositionstart",function($){n.composing={data:$.data,done:!1}}),et(b,"compositionupdate",function($){n.composing||(n.composing={data:$.data,done:!1})}),et(b,"compositionend",function($){n.composing&&($.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),et(b,"touchstart",function(){return h.forceCompositionEnd()}),et(b,"input",function(){n.composing||n.readFromDOMSoon()}),et(b,"copy",X),et(b,"cut",X)},Bt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Bt.prototype.prepareSelection=function(){var t=Mo(this.cm,!1);return t.focus=ee(this.div.ownerDocument)==this.div,t},Bt.prototype.showSelection=function(t,n){!t||!this.cm.display.view.length||((t.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Bt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Bt.prototype.showPrimarySelection=function(){var t=this.getSelection(),n=this.cm,h=n.doc.sel.primary(),a=h.from(),b=h.to();if(n.display.viewTo==n.display.viewFrom||a.line>=n.display.viewTo||b.line<n.display.viewFrom)t.removeAllRanges();else{var j=co(n,t.anchorNode,t.anchorOffset),X=co(n,t.focusNode,t.focusOffset);if(!j||j.bad||!X||X.bad||0!=St(Oi(j,X),a)||0!=St(xo(j,X),b)){var $=n.display.view,te=a.line>=n.display.viewFrom&&au(n,a)||{node:$[0].measure.map[2],offset:0},se=b.line<n.display.viewTo&&au(n,b);if(!se){var we=$[$.length-1].measure,Te=we.maps?we.maps[we.maps.length-1]:we.map;se={node:Te[Te.length-1],offset:Te[Te.length-2]-Te[Te.length-3]}}if(!te||!se)return void t.removeAllRanges();var Qe,Ue=t.rangeCount&&t.getRangeAt(0);try{Qe=oe(te.node,te.offset,se.offset,se.node)}catch(Ye){}Qe&&(!le&&n.state.focused?(t.collapse(te.node,te.offset),Qe.collapsed||(t.removeAllRanges(),t.addRange(Qe))):(t.removeAllRanges(),t.addRange(Qe)),Ue&&null==t.anchorNode?t.addRange(Ue):le&&this.startGracePeriod()),this.rememberSelection()}}},Bt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Bt.prototype.showMultipleSelections=function(t){ue(this.cm.display.cursorDiv,t.cursors),ue(this.cm.display.selectionDiv,t.selection)},Bt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Bt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var n=t.getRangeAt(0).commonAncestorContainer;return fe(this.div,n)},Bt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ee(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Bt.prototype.blur=function(){this.div.blur()},Bt.prototype.getField=function(){return this.div},Bt.prototype.supportsTouch=function(){return!0},Bt.prototype.receivedFocus=function(){var t=this,n=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):Fr(this.cm,function(){return n.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function h(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,h))})},Bt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Bt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),n=this.cm;if(T&&d&&this.cm.display.gutterSpecs.length&&function lu(t){for(var n=t;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var h=co(n,t.anchorNode,t.anchorOffset),a=co(n,t.focusNode,t.focusOffset);h&&a&&Fr(n,function(){hr(n.doc,En(h,a),pe),(h.bad||a.bad)&&(n.curOp.selectionChanged=!0)})}}},Bt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var j,X,$,t=this.cm,n=t.display,h=t.doc.sel.primary(),a=h.from(),b=h.to();if(0==a.ch&&a.line>t.firstLine()&&(a=st(a.line-1,xt(t.doc,a.line-1).length)),b.ch==xt(t.doc,b.line).text.length&&b.line<t.lastLine()&&(b=st(b.line+1,0)),a.line<n.viewFrom||b.line>n.viewTo-1)return!1;a.line==n.viewFrom||0==(j=Xt(t,a.line))?(X=Qt(n.view[0].line),$=n.view[0].node):(X=Qt(n.view[j].line),$=n.view[j-1].node.nextSibling);var se,we,te=Xt(t,b.line);if(te==n.view.length-1?(se=n.viewTo-1,we=n.lineDiv.lastChild):(se=Qt(n.view[te+1].line)-1,we=n.view[te+1].node.previousSibling),!$)return!1;for(var Te=t.doc.splitLines(function qf(t,n,h,a,b){var j="",X=!1,$=t.doc.lineSeparator(),te=!1;function se(Qe){return function(Ye){return Ye.id==Qe}}function we(){X&&(j+=$,te&&(j+=$),X=te=!1)}function Te(Qe){Qe&&(we(),j+=Qe)}function Ue(Qe){if(1==Qe.nodeType){var Ye=Qe.getAttribute("cm-text");if(Ye)return void Te(Ye);var lt,tt=Qe.getAttribute("cm-marker");if(tt){var ht=t.findMarks(st(a,0),st(b+1,0),se(+tt));return void(ht.length&&(lt=ht[0].find(0))&&Te(Pn(t.doc,lt.from,lt.to).join($)))}if("false"==Qe.getAttribute("contenteditable"))return;var dt=/^(pre|div|p|li|table|br)$/i.test(Qe.nodeName);if(!/^br$/i.test(Qe.nodeName)&&0==Qe.textContent.length)return;dt&&we();for(var pt=0;pt<Qe.childNodes.length;pt++)Ue(Qe.childNodes[pt]);/^(pre|p)$/i.test(Qe.nodeName)&&(te=!0),dt&&(X=!0)}else 3==Qe.nodeType&&Te(Qe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ue(n),n!=h;)n=n.nextSibling,te=!1;return j}(t,$,we,X,se)),Ue=Pn(t.doc,st(X,0),st(se,xt(t.doc,se).text.length));Te.length>1&&Ue.length>1;)if(ot(Te)==ot(Ue))Te.pop(),Ue.pop(),se--;else{if(Te[0]!=Ue[0])break;Te.shift(),Ue.shift(),X++}for(var Qe=0,Ye=0,tt=Te[0],lt=Ue[0],ht=Math.min(tt.length,lt.length);Qe<ht&&tt.charCodeAt(Qe)==lt.charCodeAt(Qe);)++Qe;for(var dt=ot(Te),pt=ot(Ue),gt=Math.min(dt.length-(1==Te.length?Qe:0),pt.length-(1==Ue.length?Qe:0));Ye<gt&&dt.charCodeAt(dt.length-Ye-1)==pt.charCodeAt(pt.length-Ye-1);)++Ye;if(1==Te.length&&1==Ue.length&&X==a.line)for(;Qe&&Qe>a.ch&&dt.charCodeAt(dt.length-Ye-1)==pt.charCodeAt(pt.length-Ye-1);)Qe--,Ye++;Te[Te.length-1]=dt.slice(0,dt.length-Ye).replace(/^\u200b+/,""),Te[0]=Te[0].slice(Qe).replace(/\u200b+$/,"");var _t=st(X,Qe),wt=st(se,Ue.length?ot(Ue).length-Ye:0);return Te.length>1||Te[0]||St(_t,wt)?(Nn(t.doc,Te,_t,wt,"+input"),!0):void 0},Bt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Bt.prototype.reset=function(){this.forceCompositionEnd()},Bt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Bt.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Bt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&Fr(this.cm,function(){return Ut(t.cm)})},Bt.prototype.setUneditable=function(t){t.contentEditable="false"},Bt.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||or(this.cm,xa)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Bt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Bt.prototype.onContextMenu=function(){},Bt.prototype.resetPosition=function(){},Bt.prototype.needsContentAttribute=!0;var qt=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Je,this.hasSelection=!1,this.composing=null};qt.prototype.init=function(t){var n=this,h=this,a=this.cm;this.createField(t);var b=this.textarea;function j(X){if(!bt(a,X)){if(a.somethingSelected())fo({lineWise:!1,text:a.getSelections()});else{if(!a.options.lineWiseCopyCut)return;var $=nu(a);fo({lineWise:!0,text:$.text}),"cut"==X.type?a.setSelections($.ranges,null,pe):(h.prevInput="",b.value=$.text.join("\n"),Fe(b))}"cut"==X.type&&(a.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),w&&(b.style.width="0px"),et(b,"input",function(){v&&e>=9&&n.hasSelection&&(n.hasSelection=null),h.poll()}),et(b,"paste",function(X){bt(a,X)||wa(X,a)||(a.state.pasteIncoming=+new Date,h.fastPoll())}),et(b,"cut",j),et(b,"copy",j),et(t.scroller,"paste",function(X){if(!sn(t,X)&&!bt(a,X)){if(!b.dispatchEvent)return a.state.pasteIncoming=+new Date,void h.focus();var $=new Event("paste");$.clipboardData=X.clipboardData,b.dispatchEvent($)}}),et(t.lineSpace,"selectstart",function(X){sn(t,X)||Ct(X)}),et(b,"compositionstart",function(){var X=a.getCursor("from");h.composing&&h.composing.range.clear(),h.composing={start:X,range:a.markText(X,a.getCursor("to"),{className:"CodeMirror-composing"})}}),et(b,"compositionend",function(){h.composing&&(h.poll(),h.composing.range.clear(),h.composing=null)})},qt.prototype.createField=function(t){this.wrapper=iu(),this.textarea=this.wrapper.firstChild},qt.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},qt.prototype.prepareSelection=function(){var t=this.cm,n=t.display,h=t.doc,a=Mo(t);if(t.options.moveInputWithCursor){var b=Tr(t,h.sel.primary().head,"div"),j=n.wrapper.getBoundingClientRect(),X=n.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,b.top+X.top-j.top)),a.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,b.left+X.left-j.left))}return a},qt.prototype.showSelection=function(t){var h=this.cm.display;ue(h.cursorDiv,t.cursors),ue(h.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},qt.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var n=this.cm;if(n.somethingSelected()){this.prevInput="";var h=n.getSelection();this.textarea.value=h,n.state.focused&&Fe(this.textarea),v&&e>=9&&(this.hasSelection=h)}else t||(this.prevInput=this.textarea.value="",v&&e>=9&&(this.hasSelection=null))}},qt.prototype.getField=function(){return this.textarea},qt.prototype.supportsTouch=function(){return!1},qt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!I||ee(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(t){}},qt.prototype.blur=function(){this.textarea.blur()},qt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qt.prototype.receivedFocus=function(){this.slowPoll()},qt.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},qt.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,function h(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,h))})},qt.prototype.poll=function(){var t=this,n=this.cm,h=this.textarea,a=this.prevInput;if(this.contextMenuPending||!n.state.focused||ii(h)&&!a&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var b=h.value;if(b==a&&!n.somethingSelected())return!1;if(v&&e>=9&&this.hasSelection===b||W&&/[\uf700-\uf7ff]/.test(b))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var j=b.charCodeAt(0);if(8203==j&&!a&&(a="\u200b"),8666==j)return this.reset(),this.cm.execCommand("undo")}for(var X=0,$=Math.min(a.length,b.length);X<$&&a.charCodeAt(X)==b.charCodeAt(X);)++X;return Fr(n,function(){xa(n,b.slice(X),a.length-X,null,t.composing?"*compose":null),b.length>1e3||b.indexOf("\n")>-1?h.value=t.prevInput="":t.prevInput=b,t.composing&&(t.composing.range.clear(),t.composing.range=n.markText(t.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},qt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qt.prototype.onKeyPress=function(){v&&e>=9&&(this.hasSelection=null),this.fastPoll()},qt.prototype.onContextMenu=function(t){var n=this,h=n.cm,a=h.display,b=n.textarea;n.contextMenuPending&&n.contextMenuPending();var j=zn(h,t),X=a.scroller.scrollTop;if(j&&!c){h.options.resetSelectionOnContextMenu&&-1==h.doc.sel.contains(j)&&or(h,hr)(h.doc,En(j),pe);var Te,te=b.style.cssText,se=n.wrapper.style.cssText,we=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",b.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-we.top-5)+"px; left: "+(t.clientX-we.left-5)+"px;\n      z-index: 1000; background: "+(v?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",o&&(Te=b.ownerDocument.defaultView.scrollY),a.input.focus(),o&&b.ownerDocument.defaultView.scrollTo(null,Te),a.input.reset(),h.somethingSelected()||(b.value=n.prevInput=" "),n.contextMenuPending=Qe,a.selForContextMenu=h.doc.sel,clearTimeout(a.detectingSelectAll),v&&e>=9&&Ue(),G){mn(t);var Ye=function(){vt(window,"mouseup",Ye),setTimeout(Qe,20)};et(window,"mouseup",Ye)}else setTimeout(Qe,50)}function Ue(){if(null!=b.selectionStart){var tt=h.somethingSelected(),lt="\u200b"+(tt?b.value:"");b.value="\u21da",b.value=lt,n.prevInput=tt?"":"\u200b",b.selectionStart=1,b.selectionEnd=lt.length,a.selForContextMenu=h.doc.sel}}function Qe(){if(n.contextMenuPending==Qe&&(n.contextMenuPending=!1,n.wrapper.style.cssText=se,b.style.cssText=te,v&&e<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=X),null!=b.selectionStart)){(!v||v&&e<9)&&Ue();var tt=0,lt=function(){a.selForContextMenu==h.doc.sel&&0==b.selectionStart&&b.selectionEnd>0&&"\u200b"==n.prevInput?or(h,es)(h):tt++<10?a.detectingSelectAll=setTimeout(lt,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(lt,200)}}},qt.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},qt.prototype.setUneditable=function(){},qt.prototype.needsContentAttribute=!1,function tu(t){var n=t.optionHandlers;function h(a,b,j,X){t.defaults[a]=b,j&&(n[a]=X?function($,te,se){se!=ki&&j($,te,se)}:j)}t.defineOption=h,t.Init=ki,h("value","",function(a,b){return a.setValue(b)},!0),h("mode",null,function(a,b){a.doc.modeOption=b,ia(a)},!0),h("indentUnit",2,ia,!0),h("indentWithTabs",!1),h("smartIndent",!0),h("tabSize",4,function(a){Ji(a),ci(a),Ut(a)},!0),h("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var j=[],X=a.doc.first;a.doc.iter(function(te){for(var se=0;;){var we=te.text.indexOf(b,se);if(-1==we)break;se=we+b.length,j.push(st(X,we))}X++});for(var $=j.length-1;$>=0;$--)Nn(a.doc,b,j[$],st(j[$].line,j[$].ch+b.length))}}),h("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,b,j){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g"),j!=ki&&a.refresh()}),h("specialCharPlaceholder",Xa,function(a){return a.refresh()},!0),h("electricChars",!0),h("inputStyle",I?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),h("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0),h("autocorrect",!1,function(a,b){return a.getInputField().autocorrect=b},!0),h("autocapitalize",!1,function(a,b){return a.getInputField().autocapitalize=b},!0),h("rtlMoveVisually",!L),h("wholeLineUpdateBefore",!0),h("theme","default",function(a){eu(a),qi(a)},!0),h("keyMap","default",function(a,b,j){var X=Kn(b),$=j!=ki&&Kn(j);$&&$.detach&&$.detach(a,X),X.attach&&X.attach(a,$||null)}),h("extraKeys",null),h("configureMouse",null),h("lineWrapping",!1,Wf,!0),h("gutters",[],function(a,b){a.display.gutterSpecs=ra(b,a.options.lineNumbers),qi(a)},!0),h("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?zs(a.display)+"px":"0",a.refresh()},!0),h("coverGutterNextToScrollbar",!1,function(a){return Jn(a)},!0),h("scrollbarStyle","native",function(a){$s(a),Jn(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),h("lineNumbers",!1,function(a,b){a.display.gutterSpecs=ra(a.options.gutters,b),qi(a)},!0),h("firstLineNumber",1,qi,!0),h("lineNumberFormatter",function(a){return a},qi,!0),h("showCursorWhenSelecting",!1,Ui,!0),h("resetSelectionOnContextMenu",!0),h("lineWiseCopyCut",!0),h("pasteLinesPerSelection",!0),h("selectionsMayTouch",!1),h("readOnly",!1,function(a,b){"nocursor"==b&&(pi(a),a.display.input.blur()),a.display.input.readOnlyChanged(b)}),h("screenReaderLabel",null,function(a,b){b=""===b?null:b,a.display.input.screenReaderLabelChanged(b)}),h("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),h("dragDrop",!0,Hf),h("allowDropFileTypes",null),h("cursorBlinkRate",530),h("cursorScrollMargin",0),h("cursorHeight",1,Ui,!0),h("singleCursorHeightPerLine",!0,Ui,!0),h("workTime",100),h("workDelay",100),h("flattenSpans",!0,Ji,!0),h("addModeClass",!1,Ji,!0),h("pollInterval",100),h("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b}),h("historyEventDelay",1250),h("viewportMargin",10,function(a){return a.refresh()},!0),h("maxHighlightLength",1e4,Ji,!0),h("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),h("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""}),h("autofocus",null),h("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0),h("phrases",null)}(Ht),function ou(t){var n=t.optionHandlers,h=t.helpers={};t.prototype={constructor:t,focus:function(){Se(this).focus(),this.display.input.focus()},setOption:function(a,b){var j=this.options,X=j[a];j[a]==b&&"mode"!=a||(j[a]=b,n.hasOwnProperty(a)&&or(this,n[a])(this,b,X),mt(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Kn(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,j=0;j<b.length;++j)if(b[j]==a||b[j].name==a)return b.splice(j,1),!0},addOverlay:vr(function(a,b){var j=a.token?a:t.getMode(this.options,a);if(j.startState)throw new Error("Overlays may not be stateful.");(function It(t,n,h){for(var a=0,b=h(n);a<t.length&&h(t[a])<=b;)a++;t.splice(a,0,n)})(this.state.overlays,{mode:j,modeSpec:a,opaque:b&&b.opaque,priority:b&&b.priority||0},function(X){return X.priority}),this.state.modeGen++,Ut(this)}),removeOverlay:vr(function(a){for(var b=this.state.overlays,j=0;j<b.length;++j){var X=b[j].modeSpec;if(X==a||"string"==typeof a&&X.name==a)return b.splice(j,1),this.state.modeGen++,void Ut(this)}}),indentLine:vr(function(a,b,j){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),Ii(this.doc,a)&&uo(this,a,b,j)}),indentSelection:vr(function(a){for(var b=this.doc.sel.ranges,j=-1,X=0;X<b.length;X++){var $=b[X];if($.empty())$.head.line>j&&(uo(this,$.head.line,a,!0),j=$.head.line,X==this.doc.sel.primIndex&&di(this));else{var te=$.from(),se=$.to(),we=Math.max(j,te.line);j=Math.min(this.lastLine(),se.line-(se.ch?0:1))+1;for(var Te=we;Te<j;++Te)uo(this,Te,a);var Ue=this.doc.sel.ranges;0==te.ch&&b.length==Ue.length&&Ue[X].from().ch>0&&sa(this.doc,X,new Pt(te,Ue[X].to()),pe)}}}),getTokenAt:function(a,b){return Pa(this,a,b)},getLineTokens:function(a,b){return Pa(this,st(a),b,!0)},getTokenTypeAt:function(a){a=At(this.doc,a);var te,b=Cs(this,xt(this.doc,a.line)),j=0,X=(b.length-1)/2,$=a.ch;if(0==$)te=b[2];else for(;;){var se=j+X>>1;if((se?b[2*se-1]:0)>=$)X=se;else{if(!(b[2*se+1]<$)){te=b[2*se+2];break}j=se+1}}var we=te?te.indexOf("overlay "):-1;return we<0?te:0==we?null:te.slice(0,we-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?t.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var j=[];if(!h.hasOwnProperty(b))return j;var X=h[b],$=this.getModeAt(a);if("string"==typeof $[b])X[$[b]]&&j.push(X[$[b]]);else if($[b])for(var te=0;te<$[b].length;te++){var se=X[$[b][te]];se&&j.push(se)}else $.helperType&&X[$.helperType]?j.push(X[$.helperType]):X[$.name]&&j.push(X[$.name]);for(var we=0;we<X._global.length;we++){var Te=X._global[we];Te.pred($,this)&&-1==M(j,Te.val)&&j.push(Te.val)}return j},getStateAfter:function(a,b){var j=this.doc;return Ri(this,(a=Ra(j,null==a?j.first+j.size-1:a))+1,b).state},cursorCoords:function(a,b){var X=this.doc.sel.primary();return Tr(this,null==a?X.head:"object"==typeof a?At(this.doc,a):a?X.from():X.to(),b||"page")},charCoords:function(a,b){return un(this,At(this.doc,a),b||"page")},coordsChar:function(a,b){return jo(this,(a=Ro(this,a,b||"page")).left,a.top)},lineAtHeight:function(a,b){return a=Ro(this,{top:a,left:0},b||"page").top,xn(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,j){var $,X=!1;if("number"==typeof a){var te=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>te&&(a=te,X=!0),$=xt(this.doc,a)}else $=a;return ln(this,$,{top:0,left:0},b||"page",j||X).top+(X?this.doc.height-Xr($):0)},defaultTextHeight:function(){return Wn(this.display)},defaultCharWidth:function(){return hi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,j,X,$){var te=this.display,se=(a=Tr(this,At(this.doc,a))).bottom,we=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),te.sizer.appendChild(b),"over"==X)se=a.top;else if("above"==X||"near"==X){var Te=Math.max(te.wrapper.clientHeight,this.doc.height),Ue=Math.max(te.sizer.clientWidth,te.lineSpace.clientWidth);("above"==X||a.bottom+b.offsetHeight>Te)&&a.top>b.offsetHeight?se=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=Te&&(se=a.bottom),we+b.offsetWidth>Ue&&(we=Ue-b.offsetWidth)}b.style.top=se+"px",b.style.left=b.style.right="","right"==$?(we=te.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==$?we=0:"middle"==$&&(we=(te.sizer.clientWidth-b.offsetWidth)/2),b.style.left=we+"px"),j&&function sf(t,n){var h=Uo(t,n);null!=h.scrollTop&&Wi(t,h.scrollTop),null!=h.scrollLeft&&qn(t,h.scrollLeft)}(this,{left:we,top:se,right:we+b.offsetWidth,bottom:se+b.offsetHeight})},triggerOnKeyDown:vr(Jl),triggerOnKeyPress:vr(Xl),triggerOnKeyUp:Qr,triggerOnMouseDown:vr(Vl),execCommand:function(a){if(Kr.hasOwnProperty(a))return Kr[a].call(null,this)},triggerElectric:vr(function(a){ru(this,a)}),findPosH:function(a,b,j,X){var $=1;b<0&&($=-1,b=-b);for(var te=At(this.doc,a),se=0;se<b&&!(te=_a(this.doc,te,$,j,X)).hitSide;++se);return te},moveH:vr(function(a,b){var j=this;this.extendSelectionsBy(function(X){return j.display.shift||j.doc.extend||X.empty()?_a(j.doc,X.head,a,b,j.options.rtlMoveVisually):a<0?X.from():X.to()},ye)}),deleteH:vr(function(a,b){var j=this.doc.sel,X=this.doc;j.somethingSelected()?X.replaceSelection("",null,"+delete"):gn(this,function($){var te=_a(X,$.head,a,b,!1);return a<0?{from:te,to:$.head}:{from:$.head,to:te}})}),findPosV:function(a,b,j,X){var $=1,te=X;b<0&&($=-1,b=-b);for(var se=At(this.doc,a),we=0;we<b;++we){var Te=Tr(this,se,"div");if(null==te?te=Te.left:Te.left=te,(se=su(this,Te,$,j)).hitSide)break}return se},moveV:vr(function(a,b){var j=this,X=this.doc,$=[],te=!this.display.shift&&!X.extend&&X.sel.somethingSelected();if(X.extendSelectionsBy(function(we){if(te)return a<0?we.from():we.to();var Te=Tr(j,we.head,"div");null!=we.goalColumn&&(Te.left=we.goalColumn),$.push(Te.left);var Ue=su(j,Te,a,b);return"page"==b&&we==X.sel.primary()&&Ys(j,un(j,Ue,"div").top-Te.top),Ue},ye),$.length)for(var se=0;se<X.sel.ranges.length;se++)X.sel.ranges[se].goalColumn=$[se]}),findWordAt:function(a){var j=xt(this.doc,a.line).text,X=a.ch,$=a.ch;if(j){var te=this.getHelper(a,"wordChars");"before"!=a.sticky&&$!=j.length||!X?++$:--X;for(var se=j.charAt(X),we=V(se,te)?function(Te){return V(Te,te)}:/\s/.test(se)?function(Te){return/\s/.test(Te)}:function(Te){return!/\s/.test(Te)&&!V(Te)};X>0&&we(j.charAt(X-1));)--X;for(;$<j.length&&we(j.charAt($));)++$}return new Pt(st(a.line,X),st(a.line,$))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?de(this.display.cursorDiv,"CodeMirror-overwrite"):H(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ee(Ne(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:vr(function(a,b){Hi(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-mr(this)-this.display.barHeight,width:a.scrollWidth-mr(this)-this.display.barWidth,clientHeight:Ds(this),clientWidth:an(this)}},scrollIntoView:vr(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:st(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line?function dl(t,n){Go(t),t.curOp.scrollToPos=n}(this,a):Zs(this,a.from,a.to,a.margin)}),setSize:vr(function(a,b){var j=this,X=function(te){return"number"==typeof te||/^\d+$/.test(String(te))?te+"px":te};null!=a&&(this.display.wrapper.style.width=X(a)),null!=b&&(this.display.wrapper.style.height=X(b)),this.options.lineWrapping&&ol(this);var $=this.display.viewFrom;this.doc.iter($,this.display.viewTo,function(te){if(te.widgets)for(var se=0;se<te.widgets.length;se++)if(te.widgets[se].noHScroll){kn(j,$,"widget");break}++$}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(a){return Fr(this,a)},startOperation:function(){return Fn(this)},endOperation:function(){return Xn(this)},refresh:vr(function(){var a=this.display.cachedTextHeight;Ut(this),this.curOp.forceUpdate=!0,ci(this),Hi(this,this.doc.scrollLeft,this.doc.scrollTop),Zt(this.display),(null==a||Math.abs(a-Wn(this.display))>.5||this.options.lineWrapping)&&Js(this),mt(this,"refresh",this)}),swapDoc:vr(function(a){var b=this.doc;return b.cm=null,this.state.selectingText&&this.state.selectingText(),Tl(this,a),ci(this),this.display.input.reset(),Hi(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,ir(this,"swapDoc",this,b),b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Tt(t),t.registerHelper=function(a,b,j){h.hasOwnProperty(a)||(h[a]=t[a]={_global:[]}),h[a][b]=j},t.registerGlobalHelper=function(a,b,j,X){t.registerHelper(a,b,X),h[a]._global.push({pred:j,val:X})}}(Ht);var uu="iter insert remove copy getEditor constructor".split(" ");for(var us in br.prototype)br.prototype.hasOwnProperty(us)&&M(uu,us)<0&&(Ht.prototype[us]=function(t){return function(){return t.apply(this.doc,arguments)}}(br.prototype[us]));return Tt(br),Ht.inputStyles={textarea:qt,contenteditable:Bt},Ht.defineMode=function(t){!Ht.defaults.mode&&"null"!=t&&(Ht.defaults.mode=t),qr.apply(this,arguments)},Ht.defineMIME=function bs(t,n){tn[t]=n},Ht.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Ht.defineMIME("text/plain","null"),Ht.defineExtension=function(t,n){Ht.prototype[t]=n},Ht.defineDocExtension=function(t,n){br.prototype[t]=n},Ht.fromTextArea=function Xf(t,n){if((n=n?Pe(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var h=ee(t.ownerDocument);n.autofocus=h==t||null!=t.getAttribute("autofocus")&&h==document.body}function a(){t.value=$.getValue()}var b;if(t.form&&(et(t.form,"submit",a),!n.leaveSubmitMethodAlone)){var j=t.form;b=j.submit;try{var X=j.submit=function(){a(),j.submit=b,j.submit(),j.submit=X}}catch(te){}}n.finishInit=function(te){te.save=a,te.getTextArea=function(){return t},te.toTextArea=function(){te.toTextArea=isNaN,a(),t.parentNode.removeChild(te.getWrapperElement()),t.style.display="",t.form&&(vt(t.form,"submit",a),!n.leaveSubmitMethodAlone&&"function"==typeof t.form.submit&&(t.form.submit=b))}},t.style.display="none";var $=Ht(function(te){return t.parentNode.insertBefore(te,t.nextSibling)},n);return $},function Vf(t){t.off=vt,t.on=et,t.wheelEventPixels=yf,t.Doc=br,t.splitLines=jr,t.countColumn=He,t.findColumn=De,t.isWordChar=je,t.Pass=Y,t.signal=mt,t.Line=si,t.changeEnd=Tn,t.scrollbarModel=yl,t.Pos=st,t.cmpPos=St,t.modes=Mn,t.mimeModes=tn,t.resolveMode=bn,t.getMode=oi,t.modeExtensions=Ir,t.extendMode=xs,t.copyState=Or,t.startState=Li,t.innerMode=yo,t.commands=Kr,t.keyMap=Br,t.keyName=pa,t.isModifierKey=ha,t.lookupKey=vn,t.normalizeKeyMap=ca,t.StringStream=Jt,t.SharedTextMarker=to,t.TextMarker=dn,t.LineWidget=eo,t.e_preventDefault=Ct,t.e_stopPropagation=Et,t.e_stop=mn,t.addClass=de,t.contains=fe,t.rmClass=H,t.keyNames=Pr}(Ht),Ht.version="5.65.7",Ht}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("turtle",function(re){var q,le=re.indentUnit;function u(c){return new RegExp("^(?:"+c.join("|")+")$","i")}u([]);var v=u(["@prefix","@base","a"]),e=/[*+\-<>=&|]/;function o(c,k){var y=c.next();if(q=null,"<"==y&&!c.match(/^[\s\u00a0=]/,!1))return c.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==y||"'"==y)return k.tokenize=function l(c){return function(k,y){for(var w,f=!1;null!=(w=k.next());){if(w==c&&!f){y.tokenize=o;break}f=!f&&"\\"==w}return"string"}}(y),k.tokenize(c,k);if(/[{}\(\),\.;\[\]]/.test(y))return q=y,null;if("#"==y)return c.skipToEnd(),"comment";if(e.test(y))return c.eatWhile(e),null;if(":"==y)return"operator";if(c.eatWhile(/[_\w\d]/),":"==c.peek())return"variable-3";var f=c.current();return v.test(f)?"meta":y>="A"&&y<="Z"?"comment":"keyword"}function d(c,k,y){c.context={prev:c.context,indent:c.indent,col:y,type:k}}function m(c){c.indent=c.context.indent,c.context=c.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(c,k){if(c.sol()&&(k.context&&null==k.context.align&&(k.context.align=!1),k.indent=c.indentation()),c.eatSpace())return null;var y=k.tokenize(c,k);if("comment"!=y&&k.context&&null==k.context.align&&"pattern"!=k.context.type&&(k.context.align=!0),"("==q)d(k,")",c.column());else if("["==q)d(k,"]",c.column());else if("{"==q)d(k,"}",c.column());else if(/[\]\}\)]/.test(q)){for(;k.context&&"pattern"==k.context.type;)m(k);k.context&&q==k.context.type&&m(k)}else"."==q&&k.context&&"pattern"==k.context.type?m(k):/atom|string|variable/.test(y)&&k.context&&(/[\}\]]/.test(k.context.type)?d(k,"pattern",c.column()):"pattern"==k.context.type&&!k.context.align&&(k.context.align=!0,k.context.col=c.column()));return y},indent:function(c,k){var y=k&&k.charAt(0),f=c.context;if(/[\]\}]/.test(y))for(;f&&"pattern"==f.type;)f=f.prev;var w=f&&y==f.type;return f?"pattern"==f.type?f.col:f.align?f.col+(w?0:1):f.indent+(w?0:le):0},lineComment:"#"}}),J.defineMIME("text/turtle","turtle")}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("sparql",function(re){var q,le=re.indentUnit;function u(k){return new RegExp("^(?:"+k.join("|")+")$","i")}var F=u(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),v=u(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load","into"]),e=/[*+\-<>=&|\^\/!\?]/;function o(k,y){var f=k.next();if(q=null,"$"==f||"?"==f)return"?"==f&&k.match(/\s/,!1)?"operator":(k.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"==f&&!k.match(/^[\s\u00a0=]/,!1))return k.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==f||"'"==f)return y.tokenize=function d(k){return function(y,f){for(var T,w=!1;null!=(T=y.next());){if(T==k&&!w){f.tokenize=o;break}w=!w&&"\\"==T}return"string"}}(f),y.tokenize(k,y);if(/[{}\(\),\.;\[\]]/.test(f))return q=f,"bracket";if("#"==f)return k.skipToEnd(),"comment";if(e.test(f))return"operator";if(":"==f)return l(k),"atom";if("@"==f)return k.eatWhile(/[a-z\d\-]/i),"meta";if(k.eatWhile(/[_\w\d]/),k.eat(":"))return l(k),"atom";var w=k.current();return F.test(w)?"builtin":v.test(w)?"keyword":"variable"}function l(k){k.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function m(k,y,f){k.context={prev:k.context,indent:k.indent,col:f,type:y}}function c(k){k.indent=k.context.indent,k.context=k.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(k,y){if(k.sol()&&(y.context&&null==y.context.align&&(y.context.align=!1),y.indent=k.indentation()),k.eatSpace())return null;var f=y.tokenize(k,y);if("comment"!=f&&y.context&&null==y.context.align&&"pattern"!=y.context.type&&(y.context.align=!0),"("==q)m(y,")",k.column());else if("["==q)m(y,"]",k.column());else if("{"==q)m(y,"}",k.column());else if(/[\]\}\)]/.test(q)){for(;y.context&&"pattern"==y.context.type;)c(y);y.context&&q==y.context.type&&(c(y),"}"==q&&y.context&&"pattern"==y.context.type&&c(y))}else"."==q&&y.context&&"pattern"==y.context.type?c(y):/atom|string|variable/.test(f)&&y.context&&(/[\}\]]/.test(y.context.type)?m(y,"pattern",k.column()):"pattern"==y.context.type&&!y.context.align&&(y.context.align=!0,y.context.col=k.column()));return f},indent:function(k,y){var f=y&&y.charAt(0),w=k.context;if(/[\]\}]/.test(f))for(;w&&"pattern"==w.type;)w=w.prev;var T=w&&f==w.type;return w?"pattern"==w.type?w.col:w.align?w.col+(T?0:1):w.indent+(T?0:le):0},lineComment:"#"}}),J.defineMIME("application/sparql-query","sparql")});