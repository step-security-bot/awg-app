function dateConverter(G){const K=1721425.5,M=["So","Mo","Di","Mi","Do","Fr","Sa"],o={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function x(l,f){return l-f*Math.floor(l/f)}function e(l){return(l=parseInt(l))%4==0&&!(l%100==0&&l%400!=0)}function r(l,f,c){return K-1+365*(l-1)+Math.floor((l-1)/4)+-Math.floor((l-1)/100)+Math.floor((l-1)/400)+Math.floor((367*f-362)/12+(f<=2?0:e(l)?-1:-2)+c)}function s(l,f){l=parseInt(l);const c={};let E;switch(f){case"GREGORIAN":case"gregorian":E=function n(l){let f,c,E,_,O,R,A,v,F,j,H,P,X,Y;return f=Math.floor(l-.5)+.5,c=f-K,E=Math.floor(c/146097),_=x(c,146097),O=Math.floor(_/36524),R=x(_,36524),A=Math.floor(R/1461),v=x(R,1461),F=Math.floor(v/365),j=400*E+100*O+4*A+F,4==O||4==F||j++,H=f-r(j,1,1),P=f<r(j,3,1)?0:e(j)?1:2,X=Math.floor((12*(H+P)+373)/367),Y=f-r(j,X,1)+1,j<=0&&j--,new Array(j,X,Y)}(l);break;case"JULIAN":case"julian":E=S.jd_to_julian(l);break;case"JEWISH":case"jewish":E=S.jd_to_hebrew(l);break;case"FRENCH":case"french":E=S.jd_to_french_revolutionary(l)}return c.year=E[0],c.month=E[1],c.day=E[2],c.weekday=function h(l){return l=Number(l),x(Math.floor(l+1.5),7)}(l),c}const d=s(G.dateval1,G.calendar),a=s(G.dateval2,G.calendar);let y="";if(G.dateprecision1==G.dateprecision2)switch(G.dateprecision1){case"DAY":y=d.year===a.year&&d.month===a.month&&d.day===a.day?"["+M[d.weekday]+"] "+d.day+". "+o[G.calendar][d.month]+" "+d.year:"["+M[d.weekday]+"] "+d.day+". "+o[G.calendar][d.month]+" "+d.year+" \u2013 ["+M[a.weekday]+"] "+a.day+". "+o[G.calendar][a.month]+" "+a.year;break;case"MONTH":y=d.year===a.year&&d.month===a.month?o[G.calendar][d.month]+" "+d.year:o[G.calendar][d.month]+" "+d.year+" \u2013 "+o[G.calendar][a.month]+" "+a.year;break;case"YEAR":y=d.year===a.year?d.year:d.year+"\u2013"+a.year}else{switch(G.dateprecision1){case"DAY":y="["+M[d.weekday]+"] "+d.day+". "+o[G.calendar][d.month]+" "+d.year;break;case"MONTH":y=o[G.calendar][d.month]+" "+d.year;break;case"YEAR":y=d.year}switch(y+=" \u2013 ",G.dateprecision2){case"DAY":y+="["+M[a.weekday]+"] "+a.day+". "+o[G.calendar][a.month]+" "+a.year;break;case"MONTH":y+=o[G.calendar][a.month]+" "+a.year;break;case"YEAR":y+=a.year}}return y+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[G.calendar].short+")",y}function htmlConverter(G,K){let M,o,x,h,e,r,n,s,d,a,ee="";const y={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},l={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},f={};for(let E in l.settings.matching)f[l.settings.matching[E]]=E;const c=Object.keys(G);c.sort(function(E,_){return y[f[E]]-y[f[_]]}),M=[];for(let E in c)for(n in r=c[E],G[r])x=G[r][n].start,void 0===M[x]&&(M[x]=[]),M[x].push({propname:r,proptype:"start"}),"_link"==M[x][M[x].length-1].propname?(M[x][M[x].length-1].href=G[r][n].href,void 0!==G[r][n].resid&&(M[x][M[x].length-1].resid=G[r][n].resid)):"style"==M[x][M[x].length-1].propname&&(M[x][M[x].length-1].css=G[r][n].css),x=G[r][n].end,void 0===M[x]&&(M[x]=[]),M[x].push({propname:r,proptype:"end"});for(o=[],s=0;s<=K.length;s++){if(void 0!==M[s]){for(e=[],a=[],d=M[s].length-1;d>=0;d--)if("end"==M[s][d].proptype&&"linebreak"!=M[s][d].propname){for(;void 0!==(h=o.pop())&&(ee+="</"+f[h]+">",h!=M[s][d].propname);)e.push(h);for(;void 0!==(h=e.pop());)o.push(h),ee+="<"+f[h]+">"}for(d in M[s])if("start"==M[s][d].proptype)if("linebreak"==M[s][d].propname)ee+="<br/>";else if("_link"==M[s][d].propname){o.push(M[s][d].propname);let E=M[s][d].href;void 0===E&&void 0!==M[s][d].resid&&(E="https://www.salsah.org/api/resources/"+M[s][d].resid),ee+="<"+f[M[s][d].propname]+' href="'+E,void 0!==M[s][d].resid?ee+='" class="salsah-link">':ee+='">'}else"style"==M[s][d].propname?(o.push(M[s][d].propname),ee+="<"+f[M[s][d].propname]+' style="'+M[s][d].css+'">'):(o.push(M[s][d].propname),ee+="<"+f[M[s][d].propname]+">")}s<K.length&&(ee+=K.charAt(s))}return ee=ee.replace(/\n/g,"<br/>"),ee=ee.replace(/\r/g,""),ee}(function(G){var K,ee,M="0.5.0",o="hasOwnProperty",x=/[\.\/]/,h=/\s*,\s*/,r=function(f,c){return f-c},n={n:{}},s=function(){for(var f=0,c=this.length;c>f;f++)if(typeof this[f]<"u")return this[f]},d=function(){for(var f=this.length;--f;)if(typeof this[f]<"u")return this[f]},a=Object.prototype.toString,y=String,l=Array.isArray||function(f){return f instanceof Array||"[object Array]"==a.call(f)};eve=function(f,c){var E,_=ee,O=Array.prototype.slice.call(arguments,2),R=eve.listeners(f),A=0,v=[],F={},j=[],H=K;j.firstDefined=s,j.lastDefined=d,K=f,ee=0;for(var P=0,X=R.length;X>P;P++)"zIndex"in R[P]&&(v.push(R[P].zIndex),R[P].zIndex<0&&(F[R[P].zIndex]=R[P]));for(v.sort(r);v[A]<0;)if(E=F[v[A++]],j.push(E.apply(c,O)),ee)return ee=_,j;for(P=0;X>P;P++)if("zIndex"in(E=R[P]))if(E.zIndex==v[A]){if(j.push(E.apply(c,O)),ee)break;do{if((E=F[v[++A]])&&j.push(E.apply(c,O)),ee)break}while(E)}else F[E.zIndex]=E;else if(j.push(E.apply(c,O)),ee)break;return ee=_,K=H,j},eve._events=n,eve.listeners=function(f){var c,E,_,O,R,A,v,F,j=l(f)?f:f.split(x),H=n,P=[H],X=[];for(O=0,R=j.length;R>O;O++){for(F=[],A=0,v=P.length;v>A;A++)for(E=[(H=P[A].n)[j[O]],H["*"]],_=2;_--;)(c=E[_])&&(F.push(c),X=X.concat(c.f||[]));P=F}return X},eve.separator=function(f){f?(f="["+(f=y(f).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",x=new RegExp(f)):x=/[\.\/]/},eve.on=function(f,c){if("function"!=typeof c)return function(){};for(var E=l(f)?l(f[0])?f:[f]:y(f).split(h),_=0,O=E.length;O>_;_++)!function(R){for(var A,v=l(R)?R:y(R).split(x),F=n,j=0,H=v.length;H>j;j++)F=(F=F.n).hasOwnProperty(v[j])&&F[v[j]]||(F[v[j]]={n:{}});for(F.f=F.f||[],j=0,H=F.f.length;H>j;j++)if(F.f[j]==c){A=!0;break}!A&&F.f.push(c)}(E[_]);return function(R){+R==+R&&(c.zIndex=+R)}},eve.f=function(f){var c=[].slice.call(arguments,1);return function(){eve.apply(null,[f,null].concat(c).concat([].slice.call(arguments,0)))}},eve.stop=function(){ee=1},eve.nt=function(f){var c=l(K)?K.join("."):K;return f?new RegExp("(?:\\.|\\/|^)"+f+"(?:\\.|\\/|$)").test(c):c},eve.nts=function(){return l(K)?K:K.split(x)},eve.off=eve.unbind=function(f,c){if(f){var E=l(f)?l(f[0])?f:[f]:y(f).split(h);if(E.length>1)for(var _=0,O=E.length;O>_;_++)eve.off(E[_],c);else{E=l(f)?f:y(f).split(x);var R,A,v,F,j,H=[n],P=[];for(_=0,O=E.length;O>_;_++)for(F=0;F<H.length;F+=v.length-2){if(v=[F,1],R=H[F].n,"*"!=E[_])R[E[_]]&&(v.push(R[E[_]]),P.unshift({n:R,name:E[_]}));else for(A in R)R[o](A)&&(v.push(R[A]),P.unshift({n:R,name:A}));H.splice.apply(H,v)}for(_=0,O=H.length;O>_;_++)for(R=H[_];R.n;){if(c){if(R.f){for(F=0,j=R.f.length;j>F;F++)if(R.f[F]==c){R.f.splice(F,1);break}!R.f.length&&delete R.f}for(A in R.n)if(R.n[o](A)&&R.n[A].f){var X=R.n[A].f;for(F=0,j=X.length;j>F;F++)if(X[F]==c){X.splice(F,1);break}!X.length&&delete R.n[A].f}}else for(A in delete R.f,R.n)R.n[o](A)&&R.n[A].f&&delete R.n[A].f;R=R.n}e:for(_=0,O=P.length;O>_;_++){for(A in(R=P[_]).n[R.name].f)continue e;for(A in R.n[R.name].n)continue e;delete R.n[R.name]}}}else eve._events=n={n:{}}},eve.once=function(f,c){var E=function(){return eve.off(f,E),c.apply(this,arguments)};return eve.on(f,E)},eve.version=M,eve.toString=function(){return"You are running Eve "+M},typeof module<"u"&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):G.eve=eve})(this),function(G,K){if("function"==typeof define&&define.amd)define(["eve"],function(M){return K(G,M)});else if(typeof exports<"u"){var ee=require("eve");module.exports=K(G,ee)}else K(G,G.eve)}(window||this,function(G,K){var o,x,h,e,r,n,s,a,y,l,f,c,E,_,O,R,A,ee=(o=typeof K>"u"?function(){}:K,h={},e=G.requestAnimationFrame||G.webkitRequestAnimationFrame||G.mozRequestAnimationFrame||G.oRequestAnimationFrame||G.msRequestAnimationFrame||function(v){return setTimeout(v,16,(new Date).getTime()),!0},r=Array.isArray||function(v){return v instanceof Array||"[object Array]"==Object.prototype.toString.call(v)},n=0,s="M"+(+new Date).toString(36),a=Date.now||function(){return+new Date},y=function(v){var F=this;if(null==v)return F.s;var j=F.s-v;F.b+=F.dur*j,F.B+=F.dur*j,F.s=v},l=function(v){return null==v?this.spd:void(this.spd=v)},f=function(v){var F=this;return null==v?F.dur:(F.s=F.s*v/F.dur,void(F.dur=v))},c=function(){var v=this;delete h[v.id],v.update(),o("mina.stop."+v.id,v)},E=function(){var v=this;v.pdif||(delete h[v.id],v.update(),v.pdif=v.get()-v.b)},_=function(){var v=this;v.pdif&&(v.b=v.get()-v.pdif,delete v.pdif,h[v.id]=v,R())},O=function(){var v,F=this;if(r(F.start)){v=[];for(var j=0,H=F.start.length;H>j;j++)v[j]=+F.start[j]+(F.end[j]-F.start[j])*F.easing(F.s)}else v=+F.start+(F.end-F.start)*F.easing(F.s);F.set(v)},R=function(v){if(v){var F=0;for(var j in h)if(h.hasOwnProperty(j)){var H=h[j],P=H.get();F++,H.s=(P-H.b)/(H.dur/H.spd),H.s>=1&&(delete h[j],H.s=1,F--,function(X){setTimeout(function(){o("mina.finish."+X.id,X)})}(H)),H.update()}x=!!F&&e(R)}else x||(x=e(R))},(A=function(v,F,j,H,P,X,Y){var ie={id:s+(n++).toString(36),start:v,end:F,b:j,s:0,dur:H-j,spd:1,get:P,set:X,easing:Y||A.linear,status:y,speed:l,duration:f,stop:c,pause:E,resume:_,update:O};h[ie.id]=ie;var fe,oe=0;for(fe in h)if(h.hasOwnProperty(fe)&&2==++oe)break;return 1==oe&&R(),ie}).time=a,A.getById=function(v){return h[v]||null},A.linear=function(v){return v},A.easeout=function(v){return Math.pow(v,1.7)},A.easein=function(v){return Math.pow(v,.48)},A.easeinout=function(v){if(1==v)return 1;if(0==v)return 0;var F=.48-v/1.04,j=Math.sqrt(.1734+F*F),H=j-F,X=-j-F,ie=Math.pow(Math.abs(H),1/3)*(0>H?-1:1)+Math.pow(Math.abs(X),1/3)*(0>X?-1:1)+.5;return 3*(1-ie)*ie*ie+ie*ie*ie},A.backin=function(v){if(1==v)return 1;var F=1.70158;return v*v*((F+1)*v-F)},A.backout=function(v){if(0==v)return 0;var F=1.70158;return(v-=1)*v*((F+1)*v+F)+1},A.elastic=function(v){return v==!!v?v:Math.pow(2,-10*v)*Math.sin((v-.075)*(2*Math.PI)/.3)+1},A.bounce=function(v){var j=7.5625,H=2.75;return 1/H>v?j*v*v:2/H>v?j*(v-=1.5/H)*v+.75:2.5/H>v?j*(v-=2.25/H)*v+.9375:j*(v-=2.625/H)*v+.984375},G.mina=A,A),M=function(o){function x(q,Z){if(q){if(q.nodeType)return j(q);if(e(q,"array")&&x.set)return x.set.apply(x,q);if(q instanceof R)return q;if(null==Z)return j(q=P.doc.querySelector(String(q)))}return new F(q=q??"100%",Z=Z??"100%")}function h(q,Z){if(Z){if("#text"==q&&(q=P.doc.createTextNode(Z.text||Z["#text"]||"")),"#comment"==q&&(q=P.doc.createComment(Z.text||Z["#text"]||"")),"string"==typeof q&&(q=h(q)),"string"==typeof Z)return 1==q.nodeType?"xlink:"==Z.substring(0,6)?q.getAttributeNS(he,Z.substring(6)):"xml:"==Z.substring(0,4)?q.getAttributeNS(de,Z.substring(4)):q.getAttribute(Z):"text"==Z?q.nodeValue:null;if(1==q.nodeType){for(var se in Z)if(Z[X](se)){var ye=Y(Z[se]);ye?"xlink:"==se.substring(0,6)?q.setAttributeNS(he,se.substring(6),ye):"xml:"==se.substring(0,4)?q.setAttributeNS(de,se.substring(4),ye):q.setAttribute(se,ye):q.removeAttribute(se)}}else"text"in Z&&(q.nodeValue=Z.text)}else q=P.doc.createElementNS(de,q);return q}function e(q,Z){return"finite"==(Z=Y.prototype.toLowerCase.call(Z))?isFinite(q):!("array"!=Z||!(q instanceof Array||Array.isArray&&Array.isArray(q)))||("null"==Z&&null===q||Z==typeof q&&null!==q||"object"==Z&&q===Object(q)||Fe.call(q).slice(8,-1).toLowerCase()==Z)}function s(q,Z,se){return function ye(){var we=Array.prototype.slice.call(arguments,0),me=we.join("\u2400"),Ee=ye.cache=ye.cache||{},Ie=ye.count=ye.count||[];return Ee[X](me)?(function n(q,Z){for(var se=0,ye=q.length;ye>se;se++)if(q[se]===Z)return q.push(q.splice(se,1)[0])}(Ie,me),se?se(Ee[me]):Ee[me]):(Ie.length>=1e3&&delete Ee[Ie.shift()],Ie.push(me),Ee[me]=q.apply(Z,we),se?se(Ee[me]):Ee[me])}}function a(q){return q%360*ne/180}function E(q){return q.node.ownerSVGElement&&j(q.node.ownerSVGElement)||x.select("svg")}function O(q){e(q,"array")||(q=Array.prototype.slice.call(arguments,0));for(var Z=0,se=0,ye=this.node;this[Z];)delete this[Z++];for(Z=0;Z<q.length;Z++)"set"==q[Z].type?q[Z].forEach(function(me){ye.appendChild(me.node)}):ye.appendChild(q[Z].node);var we=ye.childNodes;for(Z=0;Z<we.length;Z++)this[se++]=j(we[Z]);return this}function R(q){if(q.snap in ge)return ge[q.snap];var Z;try{Z=q.ownerSVGElement}catch{}this.node=q,Z&&(this.paper=new F(Z)),this.type=q.tagName||q.nodeName;var se=this.id=z(this);if(this.anims={},this._={transform:[]},q.snap=se,ge[se]=this,"g"==this.type&&(this.add=O),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var ye in F.prototype)F.prototype[X](ye)&&(this[ye]=F.prototype[ye])}function A(q){this.node=q}function v(q,Z){var se=h(q);return Z.appendChild(se),j(se)}function F(q,Z){var se,ye,we,me=F.prototype;if(q&&q.tagName&&"svg"==q.tagName.toLowerCase()){if(q.snap in ge)return ge[q.snap];var Ee=q.ownerDocument;for(var Ie in se=new R(q),ye=q.getElementsByTagName("desc")[0],we=q.getElementsByTagName("defs")[0],ye||((ye=h("desc")).appendChild(Ee.createTextNode("Created with Snap")),se.node.appendChild(ye)),we||(we=h("defs"),se.node.appendChild(we)),se.defs=we,me)me[X](Ie)&&(se[Ie]=me[Ie]);se.paper=se.root=se}else h((se=v("svg",P.doc.body)).node,{height:Z,version:1.1,width:q,xmlns:de});return se}function j(q){return q&&(q instanceof R||q instanceof A?q:q.tagName&&"svg"==q.tagName.toLowerCase()?new F(q):q.tagName&&"object"==q.tagName.toLowerCase()&&"image/svg+xml"==q.type?new F(q.contentDocument.getElementsByTagName("svg")[0]):new R(q))}function H(q,Z){for(var se=0,ye=q.length;ye>se;se++){var we={type:q[se].type,attr:q[se].attr()},me=q[se].children();Z.push(we),me.length&&H(me,we.childNodes=[])}}x.version="0.5.1",x.toString=function(){return"Snap v"+this.version},x._={};var P={win:o.window,doc:o.window.document};x._.glob=P;var q,Z,X="hasOwnProperty",Y=String,ie=parseFloat,fe=parseInt,oe=Math,le=oe.max,V=oe.min,$=oe.abs,ne=(oe.pow,oe.PI),pe=(oe.round,""),Fe=Object.prototype.toString,ve=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,ce=(x._.separator=/[,\s]+/,/[\s]*,[\s]*/),_e={hs:1,rg:1},Ne=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Qe=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,te=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,k=0,Q="S"+(+new Date).toString(36),z=function(q){return(q&&q.type?q.type:pe)+Q+(k++).toString(36)},he="http://www.w3.org/1999/xlink",de="http://www.w3.org/2000/svg",ge={};x.url=function(q){return"url('#"+q+"')"},x._.$=h,x._.id=z,x.format=(q=/\{([^\}]+)\}/g,Z=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(ye,we){return Y(ye).replace(q,function(me,Ee){return function(ye,we,me){var Ee=me;return we.replace(Z,function(Ie,Be,Ge,ze,Me){Be=Be||ze,Ee&&(Be in Ee&&(Ee=Ee[Be]),"function"==typeof Ee&&Me&&(Ee=Ee()))}),Ee=(null==Ee||Ee==me?ye:Ee)+""}(me,Ee,we)})}),x._.clone=function r(q){if("function"==typeof q||Object(q)!==q)return q;var Z=new q.constructor;for(var se in q)q[X](se)&&(Z[se]=r(q[se]));return Z},x._.cacher=s,x.rad=a,x.deg=function y(q){return 180*q/ne%360},x.sin=function(q){return oe.sin(x.rad(q))},x.tan=function(q){return oe.tan(x.rad(q))},x.cos=function(q){return oe.cos(x.rad(q))},x.asin=function(q){return x.deg(oe.asin(q))},x.acos=function(q){return x.deg(oe.acos(q))},x.atan=function(q){return x.deg(oe.atan(q))},x.atan2=function(q){return x.deg(oe.atan2(q))},x.angle=function d(q,Z,se,ye,we,me){if(null==we){var Ee=q-se,Ie=Z-ye;return Ee||Ie?(180+180*oe.atan2(-Ie,-Ee)/ne+360)%360:0}return d(q,Z,we,me)-d(se,ye,we,me)},x.len=function(q,Z,se,ye){return Math.sqrt(x.len2(q,Z,se,ye))},x.len2=function(q,Z,se,ye){return(q-se)*(q-se)+(Z-ye)*(Z-ye)},x.closestPoint=function(q,Z,se){function ye(at){var ct=at.x-Z,ut=at.y-se;return ct*ct+ut*ut}for(var we,me,Ee,Ie,Be=q.node,Ge=Be.getTotalLength(),ze=Ge/Be.pathSegList.numberOfItems*.125,Me=1/0,Ze=0;Ge>=Ze;Ze+=ze)(Ie=ye(Ee=Be.getPointAtLength(Ze)))<Me&&(we=Ee,me=Ze,Me=Ie);for(ze*=.5;ze>.5;){var rt,tt,it,st,Ye,We;(it=me-ze)>=0&&(Ye=ye(rt=Be.getPointAtLength(it)))<Me?(we=rt,me=it,Me=Ye):(st=me+ze)<=Ge&&(We=ye(tt=Be.getPointAtLength(st)))<Me?(we=tt,me=st,Me=We):ze*=.5}return{x:we.x,y:we.y,length:me,distance:Math.sqrt(Me)}},x.is=e,x.snapTo=function(q,Z,se){if(se=e(se,"finite")?se:10,e(q,"array")){for(var ye=q.length;ye--;)if($(q[ye]-Z)<=se)return q[ye]}else{var we=Z%(q=+q);if(se>we)return Z-we;if(we>q-se)return Z-we+q}return Z},x.getRGB=s(function(q){if(!q||(q=Y(q)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:$e};if("none"==q)return{r:-1,g:-1,b:-1,hex:"none",toString:$e};if(!(_e[X](q.toLowerCase().substring(0,2))||"#"==q.charAt())&&(q=Pe(q)),!q)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:$e};var Z,se,ye,we,me,Ee,Ie=q.match(ve);return Ie?(Ie[2]&&(ye=fe(Ie[2].substring(5),16),se=fe(Ie[2].substring(3,5),16),Z=fe(Ie[2].substring(1,3),16)),Ie[3]&&(ye=fe((me=Ie[3].charAt(3))+me,16),se=fe((me=Ie[3].charAt(2))+me,16),Z=fe((me=Ie[3].charAt(1))+me,16)),Ie[4]&&(Ee=Ie[4].split(ce),Z=ie(Ee[0]),"%"==Ee[0].slice(-1)&&(Z*=2.55),se=ie(Ee[1]),"%"==Ee[1].slice(-1)&&(se*=2.55),ye=ie(Ee[2]),"%"==Ee[2].slice(-1)&&(ye*=2.55),"rgba"==Ie[1].toLowerCase().slice(0,4)&&(we=ie(Ee[3])),Ee[3]&&"%"==Ee[3].slice(-1)&&(we/=100)),Ie[5]?(Ee=Ie[5].split(ce),Z=ie(Ee[0]),"%"==Ee[0].slice(-1)&&(Z/=100),se=ie(Ee[1]),"%"==Ee[1].slice(-1)&&(se/=100),ye=ie(Ee[2]),"%"==Ee[2].slice(-1)&&(ye/=100),("deg"==Ee[0].slice(-3)||"\xb0"==Ee[0].slice(-1))&&(Z/=360),"hsba"==Ie[1].toLowerCase().slice(0,4)&&(we=ie(Ee[3])),Ee[3]&&"%"==Ee[3].slice(-1)&&(we/=100),x.hsb2rgb(Z,se,ye,we)):Ie[6]?(Ee=Ie[6].split(ce),Z=ie(Ee[0]),"%"==Ee[0].slice(-1)&&(Z/=100),se=ie(Ee[1]),"%"==Ee[1].slice(-1)&&(se/=100),ye=ie(Ee[2]),"%"==Ee[2].slice(-1)&&(ye/=100),("deg"==Ee[0].slice(-3)||"\xb0"==Ee[0].slice(-1))&&(Z/=360),"hsla"==Ie[1].toLowerCase().slice(0,4)&&(we=ie(Ee[3])),Ee[3]&&"%"==Ee[3].slice(-1)&&(we/=100),x.hsl2rgb(Z,se,ye,we)):(Z=V(oe.round(Z),255),se=V(oe.round(se),255),ye=V(oe.round(ye),255),we=V(le(we,0),1),(Ie={r:Z,g:se,b:ye,toString:$e}).hex="#"+(16777216|ye|se<<8|Z<<16).toString(16).slice(1),Ie.opacity=e(we,"finite")?we:1,Ie)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:$e}},x),x.hsb=s(function(q,Z,se){return x.hsb2rgb(q,Z,se).hex}),x.hsl=s(function(q,Z,se){return x.hsl2rgb(q,Z,se).hex}),x.rgb=s(function(q,Z,se,ye){if(e(ye,"finite")){var we=oe.round;return"rgba("+[we(q),we(Z),we(se),+ye.toFixed(2)]+")"}return"#"+(16777216|se|Z<<8|q<<16).toString(16).slice(1)});var Pe=function(q){var Z=P.doc.getElementsByTagName("head")[0]||P.doc.getElementsByTagName("svg")[0],se="rgb(255, 0, 0)";return(Pe=s(function(ye){if("red"==ye.toLowerCase())return se;Z.style.color=se,Z.style.color=ye;var we=P.doc.defaultView.getComputedStyle(Z,pe).getPropertyValue("color");return we==se?null:we}))(q)},Oe=function(){return"hsb("+[this.h,this.s,this.b]+")"},Je=function(){return"hsl("+[this.h,this.s,this.l]+")"},$e=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Ke=function(q,Z,se){if(null==Z&&e(q,"object")&&"r"in q&&"g"in q&&"b"in q&&(se=q.b,Z=q.g,q=q.r),null==Z&&e(q,string)){var ye=x.getRGB(q);q=ye.r,Z=ye.g,se=ye.b}return(q>1||Z>1||se>1)&&(q/=255,Z/=255,se/=255),[q,Z,se]},ot=function(q,Z,se,ye){var we={r:q=oe.round(255*q),g:Z=oe.round(255*Z),b:se=oe.round(255*se),opacity:e(ye,"finite")?ye:1,hex:x.rgb(q,Z,se),toString:$e};return e(ye,"finite")&&(we.opacity=ye),we};x.color=function(q){var Z;return e(q,"object")&&"h"in q&&"s"in q&&"b"in q?(Z=x.hsb2rgb(q),q.r=Z.r,q.g=Z.g,q.b=Z.b,q.opacity=1,q.hex=Z.hex):e(q,"object")&&"h"in q&&"s"in q&&"l"in q?(Z=x.hsl2rgb(q),q.r=Z.r,q.g=Z.g,q.b=Z.b,q.opacity=1,q.hex=Z.hex):(e(q,"string")&&(q=x.getRGB(q)),e(q,"object")&&"r"in q&&"g"in q&&"b"in q&&!("error"in q)?(Z=x.rgb2hsl(q),q.h=Z.h,q.s=Z.s,q.l=Z.l,Z=x.rgb2hsb(q),q.v=Z.b):((q={hex:"none"}).r=q.g=q.b=q.h=q.s=q.v=q.l=-1,q.error=1)),q.toString=$e,q},x.hsb2rgb=function(q,Z,se,ye){var we,me,Ee,Ie,Be;return e(q,"object")&&"h"in q&&"s"in q&&"b"in q&&(se=q.b,Z=q.s,ye=q.o,q=q.h),we=me=Ee=se-(Be=se*Z),we+=[Be,Ie=Be*(1-$((q=(q*=360)%360/60)%2-1)),0,0,Ie,Be][q=~~q],me+=[Ie,Be,Be,Ie,0,0][q],Ee+=[0,0,Ie,Be,Be,Ie][q],ot(we,me,Ee,ye)},x.hsl2rgb=function(q,Z,se,ye){var we,me,Ee,Ie,Be;return e(q,"object")&&"h"in q&&"s"in q&&"l"in q&&(se=q.l,Z=q.s,q=q.h),(q>1||Z>1||se>1)&&(q/=360,Z/=100,se/=100),we=me=Ee=se-(Be=2*Z*(.5>se?se:1-se))/2,we+=[Be,Ie=Be*(1-$((q=(q*=360)%360/60)%2-1)),0,0,Ie,Be][q=~~q],me+=[Ie,Be,Be,Ie,0,0][q],Ee+=[0,0,Ie,Be,Be,Ie][q],ot(we,me,Ee,ye)},x.rgb2hsb=function(q,Z,se){var me,Ee;return q=(se=Ke(q,Z,se))[0],Z=se[1],se=se[2],{h:((0==(Ee=(me=le(q,Z,se))-V(q,Z,se))?null:me==q?(Z-se)/Ee:me==Z?(se-q)/Ee+2:(q-Z)/Ee+4)+360)%6*60/360,s:0==Ee?0:Ee/me,b:me,toString:Oe}},x.rgb2hsl=function(q,Z,se){var me,Ee,Ie,Be;return q=(se=Ke(q,Z,se))[0],Z=se[1],se=se[2],me=((Ee=le(q,Z,se))+(Ie=V(q,Z,se)))/2,{h:((0==(Be=Ee-Ie)?null:Ee==q?(Z-se)/Be:Ee==Z?(se-q)/Be+2:(q-Z)/Be+4)+360)%6*60/360,s:0==Be?0:.5>me?Be/(2*me):Be/(2-2*me),l:me,toString:Je}},x.parsePathString=function(q){if(!q)return null;var Z=x.path(q);if(Z.arr)return x.path.clone(Z.arr);var se={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ye=[];return e(q,"array")&&e(q[0],"array")&&(ye=x.path.clone(q)),ye.length||Y(q).replace(Ne,function(we,me,Ee){var Ie=[],Be=me.toLowerCase();if(Ee.replace(te,function(Ge,ze){ze&&Ie.push(+ze)}),"m"==Be&&Ie.length>2&&(ye.push([me].concat(Ie.splice(0,2))),Be="l",me="m"==me?"l":"L"),"o"==Be&&1==Ie.length&&ye.push([me,Ie[0]]),"r"==Be)ye.push([me].concat(Ie));else for(;Ie.length>=se[Be]&&(ye.push([me].concat(Ie.splice(0,se[Be]))),se[Be]););}),ye.toString=x.path.toString,Z.arr=x.path.clone(ye),ye};var be=x.parseTransformString=function(q){if(!q)return null;var Z=[];return e(q,"array")&&e(q[0],"array")&&(Z=x.path.clone(q)),Z.length||Y(q).replace(Qe,function(se,ye,we){var me=[];ye.toLowerCase(),we.replace(te,function(Ee,Ie){Ie&&me.push(+Ie)}),Z.push([ye].concat(me))}),Z.toString=x.path.toString,Z};x._.svgTransform2string=function l(q){var Z=[];return q=q.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(se,ye,we){return we=we.split(/\s*,\s*|\s+/),"rotate"==ye&&1==we.length&&we.push(0,0),"scale"==ye&&(we.length>2?we=we.slice(0,2):2==we.length&&we.push(0,0),1==we.length&&we.push(we[0],0,0)),"skewX"==ye?Z.push(["m",1,0,oe.tan(a(we[0])),1,0,0]):"skewY"==ye?Z.push(["m",1,oe.tan(a(we[0])),0,1,0,0]):Z.push([ye.charAt(0)].concat(we)),se}),Z},x._.rgTransform=/^[a-z][\s]*-?\.?\d/i,x._.transform2matrix=function f(q,Z){var se=be(q),ye=new x.Matrix;if(se)for(var we=0,me=se.length;me>we;we++){var Ee,Ie,Be,Ge,ze,Me=se[we],Ze=Me.length,rt=Y(Me[0]).toLowerCase(),tt=Me[0]!=rt,it=tt?ye.invert():0;"t"==rt&&2==Ze?ye.translate(Me[1],0):"t"==rt&&3==Ze?tt?(Ee=it.x(0,0),Ie=it.y(0,0),Be=it.x(Me[1],Me[2]),Ge=it.y(Me[1],Me[2]),ye.translate(Be-Ee,Ge-Ie)):ye.translate(Me[1],Me[2]):"r"==rt?2==Ze?(ze=ze||Z,ye.rotate(Me[1],ze.x+ze.width/2,ze.y+ze.height/2)):4==Ze&&(tt?(Be=it.x(Me[2],Me[3]),Ge=it.y(Me[2],Me[3]),ye.rotate(Me[1],Be,Ge)):ye.rotate(Me[1],Me[2],Me[3])):"s"==rt?2==Ze||3==Ze?(ze=ze||Z,ye.scale(Me[1],Me[Ze-1],ze.x+ze.width/2,ze.y+ze.height/2)):4==Ze?tt?(Be=it.x(Me[2],Me[3]),Ge=it.y(Me[2],Me[3]),ye.scale(Me[1],Me[1],Be,Ge)):ye.scale(Me[1],Me[1],Me[2],Me[3]):5==Ze&&(tt?(Be=it.x(Me[3],Me[4]),Ge=it.y(Me[3],Me[4]),ye.scale(Me[1],Me[2],Be,Ge)):ye.scale(Me[1],Me[2],Me[3],Me[4])):"m"==rt&&7==Ze&&ye.add(Me[1],Me[2],Me[3],Me[4],Me[5],Me[6])}return ye},x._unit2px=function _(q,Z,se){function ye(Ge){if(null==Ge)return pe;if(Ge==+Ge)return Ge;h(Be,{width:Ge});try{return Be.getBBox().width}catch{return 0}}function we(Ge){if(null==Ge)return pe;if(Ge==+Ge)return Ge;h(Be,{height:Ge});try{return Be.getBBox().height}catch{return 0}}function me(Ge,ze){null==Z?Ie[Ge]=ze(q.attr(Ge)||0):Ge==Z&&(Ie=ze(se??(q.attr(Ge)||0)))}var Ee=E(q).node,Ie={},Be=Ee.querySelector(".svg---mgr");switch(Be||(Be=h("rect"),h(Be,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),Ee.appendChild(Be)),q.type){case"rect":me("rx",ye),me("ry",we);case"image":me("width",ye),me("height",we);case"text":me("x",ye),me("y",we);break;case"circle":me("cx",ye),me("cy",we),me("r",ye);break;case"ellipse":me("cx",ye),me("cy",we),me("rx",ye),me("ry",we);break;case"line":me("x1",ye),me("x2",ye),me("y1",we),me("y2",we);break;case"marker":me("refX",ye),me("markerWidth",ye),me("refY",we),me("markerHeight",we);break;case"radialGradient":me("fx",ye),me("fy",we);break;case"tspan":me("dx",ye),me("dy",we);break;default:me(Z,ye)}return Ee.removeChild(Be),Ie},P.doc.contains||P.doc.compareDocumentPosition,x._.getSomeDefs=function c(q){var Z=q.node.ownerSVGElement&&j(q.node.ownerSVGElement)||q.node.parentNode&&j(q.node.parentNode)||x.select("svg")||x(0,0),se=Z.select("defs"),ye=null!=se&&se.node;return ye||(ye=v("defs",Z.node).node),ye},x._.getSomeSVG=E,x.select=function(q){return q=Y(q).replace(/([^\\]):/g,"$1\\:"),j(P.doc.querySelector(q))},x.selectAll=function(q){for(var Z=P.doc.querySelectorAll(q),se=(x.set||Array)(),ye=0;ye<Z.length;ye++)se.push(j(Z[ye]));return se},setInterval(function(){for(var q in ge)if(ge[X](q)){var Z=ge[q],se=Z.node;("svg"!=Z.type&&!se.ownerSVGElement||"svg"==Z.type&&(!se.parentNode||"ownerSVGElement"in se.parentNode&&!se.ownerSVGElement))&&delete ge[q]}},1e4),R.prototype.attr=function(q,Z){var ye=this.node;if(!q){if(1!=ye.nodeType)return{text:ye.nodeValue};for(var we=ye.attributes,me={},Ee=0,Ie=we.length;Ie>Ee;Ee++)me[we[Ee].nodeName]=we[Ee].nodeValue;return me}if(e(q,"string")){if(!(arguments.length>1))return K("snap.util.getattr."+q,this).firstDefined();var Be={};Be[q]=Z,q=Be}for(var Ge in q)q[X](Ge)&&K("snap.util.attr."+Ge,this,q[Ge]);return this},x.parse=function(q){var Z=P.doc.createDocumentFragment(),se=!0,ye=P.doc.createElement("div");if((q=Y(q)).match(/^\s*<\s*svg(?:\s|>)/)||(q="<svg>"+q+"</svg>",se=!1),ye.innerHTML=q,q=ye.getElementsByTagName("svg")[0])if(se)Z=q;else for(;q.firstChild;)Z.appendChild(q.firstChild);return new A(Z)},x.fragment=function(){for(var q=Array.prototype.slice.call(arguments,0),Z=P.doc.createDocumentFragment(),se=0,ye=q.length;ye>se;se++){var we=q[se];we.node&&we.node.nodeType&&Z.appendChild(we.node),we.nodeType&&Z.appendChild(we),"string"==typeof we&&Z.appendChild(x.parse(we).node)}return new A(Z)},x._.make=v,x._.wrap=j,F.prototype.el=function(q,Z){var se=v(q,this.node);return Z&&se.attr(Z),se},R.prototype.children=function(){for(var q=[],Z=this.node.childNodes,se=0,ye=Z.length;ye>se;se++)q[se]=x(Z[se]);return q},R.prototype.toJSON=function(){var q=[];return H([this],q),q[0]},K.on("snap.util.getattr",function(){var q=K.nt(),Z=(q=q.substring(q.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(se){return"-"+se.toLowerCase()});return ke[X](Z)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(Z):h(this.node,q)});var ke={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};K.on("snap.util.attr",function(q){var Z=K.nt(),se={};se[Z=Z.substring(Z.lastIndexOf(".")+1)]=q;var ye=Z.replace(/-(\w)/gi,function(me,Ee){return Ee.toUpperCase()}),we=Z.replace(/[A-Z]/g,function(me){return"-"+me.toLowerCase()});ke[X](we)?this.node.style[ye]=q??pe:h(this.node,se)}),F.prototype,x.ajax=function(q,Z,se,ye){var we=new XMLHttpRequest,me=z();if(we){if(e(Z,"function"))ye=se,se=Z,Z=null;else if(e(Z,"object")){var Ee=[];for(var Ie in Z)Z.hasOwnProperty(Ie)&&Ee.push(encodeURIComponent(Ie)+"="+encodeURIComponent(Z[Ie]));Z=Ee.join("&")}return we.open(Z?"POST":"GET",q,!0),Z&&(we.setRequestHeader("X-Requested-With","XMLHttpRequest"),we.setRequestHeader("Content-type","application/x-www-form-urlencoded")),se&&(K.once("snap.ajax."+me+".0",se),K.once("snap.ajax."+me+".200",se),K.once("snap.ajax."+me+".304",se)),we.onreadystatechange=function(){4==we.readyState&&K("snap.ajax."+me+"."+we.status,ye,we)},4==we.readyState||we.send(Z),we}},x.load=function(q,Z,se){x.ajax(q,function(ye){var we=x.parse(ye.responseText);se?Z.call(se,we):Z(we)})};return x.getElementByPoint=function(q,Z){var ye=(this.canvas,P.doc.elementFromPoint(q,Z));if(P.win.opera&&"svg"==ye.tagName){var we=function(q){var Z=q.getBoundingClientRect(),se=q.ownerDocument,ye=se.body,we=se.documentElement,me=we.clientTop||ye.clientTop||0,Ee=we.clientLeft||ye.clientLeft||0;return{y:Z.top+(g.win.pageYOffset||we.scrollTop||ye.scrollTop)-me,x:Z.left+(g.win.pageXOffset||we.scrollLeft||ye.scrollLeft)-Ee}}(ye),me=ye.createSVGRect();me.x=q-we.x,me.y=Z-we.y,me.width=me.height=1;var Ee=ye.getIntersectionList(me,null);Ee.length&&(ye=Ee[Ee.length-1])}return ye?j(ye):null},x.plugin=function(q){q(x,R,F,P,A)},P.win.Snap=x,x}(G||this);return M.plugin(function(o,x,h,e,r){function n(F,j){if(null==j){var H=!0;if(!(j="linearGradient"==F.type||"radialGradient"==F.type?F.node.getAttribute("gradientTransform"):"pattern"==F.type?F.node.getAttribute("patternTransform"):F.node.getAttribute("transform")))return new o.Matrix;j=o._.svgTransform2string(j)}else j=o._.rgTransform.test(j)?l(j).replace(/\.{3}|\u2026/g,F._.transform||""):o._.svgTransform2string(j),y(j,"array")&&(j=o.path?o.path.toString.call(j):l(j)),F._.transform=j;var P=o._.transform2matrix(j,F.getBBox(1));return H?P:void(F.matrix=P)}function d(F){return function(){var j=F?"<"+this.type:"",H=this.node.attributes,P=this.node.childNodes;if(F)for(var X=0,Y=H.length;Y>X;X++)j+=" "+H[X].name+'="'+H[X].value.replace(/"/g,'\\"')+'"';if(P.length){for(F&&(j+=">"),X=0,Y=P.length;Y>X;X++)3==P[X].nodeType?j+=P[X].nodeValue:1==P[X].nodeType&&(j+=R(P[X]).toString());F&&(j+="</"+this.type+">")}else F&&(j+="/>");return j}}var a=x.prototype,y=o.is,l=String,f=o._unit2px,c=o._.$,E=o._.make,_=o._.getSomeDefs,R=o._.wrap;a.getBBox=function(F){if("tspan"==this.type)return o._.box(this.node.getClientRects().item(0));if(!o.Matrix||!o.path)return this.node.getBBox();var j=this,H=new o.Matrix;if(j.removed)return o._.box();for(;"use"==j.type;)if(F||(H=H.add(j.transform().localMatrix.translate(j.attr("x")||0,j.attr("y")||0))),j.original)j=j.original;else{var P=j.attr("xlink:href");j=j.original=j.node.ownerDocument.getElementById(P.substring(P.indexOf("#")+1))}var X=j._,Y=o.path.get[j.type]||o.path.get.deflt;try{return F?(X.bboxwt=Y?o.path.getBBox(j.realPath=Y(j)):o._.box(j.node.getBBox()),o._.box(X.bboxwt)):(j.realPath=Y(j),j.matrix=j.transform().localMatrix,X.bbox=o.path.getBBox(o.path.map(j.realPath,H.add(j.matrix))),o._.box(X.bbox))}catch{return o._.box()}};var A=function(){return this.string};a.transform=function(F){var j=this._;if(null==F){for(var H,P=this,X=new o.Matrix(this.node.getCTM()),Y=n(this),ie=[Y],fe=new o.Matrix,oe=Y.toTransformString(),le=l(Y)==l(this.matrix)?l(j.transform):oe;"svg"!=P.type&&(P=P.parent());)ie.push(n(P));for(H=ie.length;H--;)fe.add(ie[H]);return{string:le,globalMatrix:X,totalMatrix:fe,localMatrix:Y,diffMatrix:X.clone().add(Y.invert()),global:X.toTransformString(),total:fe.toTransformString(),local:oe,toString:A}}return F instanceof o.Matrix?(this.matrix=F,this._.transform=F.toTransformString()):n(this,F),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?c(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?c(this.node,{patternTransform:this.matrix}):c(this.node,{transform:this.matrix})),this},a.parent=function(){return R(this.node.parentNode)},a.append=a.add=function(F){if(F){if("set"==F.type){var j=this;return F.forEach(function(H){j.add(H)}),this}F=R(F),this.node.appendChild(F.node),F.paper=this.paper}return this},a.appendTo=function(F){return F&&(F=R(F)).append(this),this},a.prepend=function(F){if(F){if("set"==F.type){var j,H=this;return F.forEach(function(X){j?j.after(X):H.prepend(X),j=X}),this}var P=(F=R(F)).parent();this.node.insertBefore(F.node,this.node.firstChild),this.add&&this.add(),F.paper=this.paper,this.parent()&&this.parent().add(),P&&P.add()}return this},a.prependTo=function(F){return(F=R(F)).prepend(this),this},a.before=function(F){if("set"==F.type){var j=this;return F.forEach(function(P){var X=P.parent();j.node.parentNode.insertBefore(P.node,j.node),X&&X.add()}),this.parent().add(),this}var H=(F=R(F)).parent();return this.node.parentNode.insertBefore(F.node,this.node),this.parent()&&this.parent().add(),H&&H.add(),F.paper=this.paper,this},a.after=function(F){var j=(F=R(F)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(F.node,this.node.nextSibling):this.node.parentNode.appendChild(F.node),this.parent()&&this.parent().add(),j&&j.add(),F.paper=this.paper,this},a.insertBefore=function(F){F=R(F);var j=this.parent();return F.node.parentNode.insertBefore(this.node,F.node),this.paper=F.paper,j&&j.add(),F.parent()&&F.parent().add(),this},a.insertAfter=function(F){F=R(F);var j=this.parent();return F.node.parentNode.insertBefore(this.node,F.node.nextSibling),this.paper=F.paper,j&&j.add(),F.parent()&&F.parent().add(),this},a.remove=function(){var F=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,F&&F.add(),this},a.select=function(F){return R(this.node.querySelector(F))},a.selectAll=function(F){for(var j=this.node.querySelectorAll(F),H=(o.set||Array)(),P=0;P<j.length;P++)H.push(R(j[P]));return H},a.asPX=function(F,j){return null==j&&(j=this.attr(F)),+f(this,F,j)},a.use=function(){var F,j=this.node.id;return j||(j=this.id,c(this.node,{id:j})),F="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?E(this.type,this.node.parentNode):E("use",this.node.parentNode),c(F.node,{"xlink:href":"#"+j}),F.original=this,F},a.clone=function(){var F=R(this.node.cloneNode(!0));return c(F.node,"id")&&c(F.node,{id:F.id}),function s(F){function j(Fe,ve){var ce=c(Fe.node,ve);(ce=(ce=ce&&ce.match(Y))&&ce[2])&&"#"==ce.charAt()&&(ce=ce.substring(1))&&(fe[ce]=(fe[ce]||[]).concat(function(_e){var Ne={};Ne[ve]=o.url(_e),c(Fe.node,Ne)}))}function H(Fe){var ve=c(Fe.node,"xlink:href");ve&&"#"==ve.charAt()&&(ve=ve.substring(1))&&(fe[ve]=(fe[ve]||[]).concat(function(ce){Fe.attr("xlink:href","#"+ce)}))}for(var P,X=F.selectAll("*"),Y=/^\s*url\(("|'|)(.*)\1\)\s*$/,ie=[],fe={},oe=0,le=X.length;le>oe;oe++){j(P=X[oe],"fill"),j(P,"stroke"),j(P,"filter"),j(P,"mask"),j(P,"clip-path"),H(P);var V=c(P.node,"id");V&&(c(P.node,{id:P.id}),ie.push({old:V,id:P.id}))}for(oe=0,le=ie.length;le>oe;oe++){var $=fe[ie[oe].old];if($)for(var ne=0,pe=$.length;pe>ne;ne++)$[ne](ie[oe].id)}}(F),F.insertAfter(this),F},a.toDefs=function(){return _(this).appendChild(this.node),this},a.pattern=a.toPattern=function(F,j,H,P){var X=E("pattern",_(this));return null==F&&(F=this.getBBox()),y(F,"object")&&"x"in F&&(j=F.y,H=F.width,P=F.height,F=F.x),c(X.node,{x:F,y:j,width:H,height:P,patternUnits:"userSpaceOnUse",id:X.id,viewBox:[F,j,H,P].join(" ")}),X.node.appendChild(this.node),X},a.marker=function(F,j,H,P,X,Y){var ie=E("marker",_(this));return null==F&&(F=this.getBBox()),y(F,"object")&&"x"in F&&(j=F.y,H=F.width,P=F.height,X=F.refX||F.cx,Y=F.refY||F.cy,F=F.x),c(ie.node,{viewBox:[F,j,H,P].join(" "),markerWidth:H,markerHeight:P,orient:"auto",refX:X||0,refY:Y||0,id:ie.id}),ie.node.appendChild(this.node),ie};var v={};a.data=function(F,j){var H=v[this.id]=v[this.id]||{};if(0==arguments.length)return K("snap.data.get."+this.id,this,H,null),H;if(1==arguments.length){if(o.is(F,"object")){for(var P in F)F.hasOwnProperty(P)&&this.data(P,F[P]);return this}return K("snap.data.get."+this.id,this,H[F],F),H[F]}return H[F]=j,K("snap.data.set."+this.id,this,j,F),this},a.removeData=function(F){return null==F?v[this.id]={}:v[this.id]&&delete v[this.id][F],this},a.outerSVG=a.toString=d(1),a.innerSVG=d(),a.toDataURL=function(){if(G&&G.btoa){var F=this.getBBox(),j=o.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+F.x.toFixed(3),y:+F.y.toFixed(3),width:+F.width.toFixed(3),height:+F.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(j)))}},r.prototype.select=a.select,r.prototype.selectAll=a.selectAll}),M.plugin(function(o,x,h,e,r){function n(f,c,E){return function(_){var O=_.slice(f,c);return 1==O.length&&(O=O[0]),E?E(O):O}}var s=x.prototype,d=o.is,a=String,y="hasOwnProperty",l=function(f,c,E,_){"function"!=typeof E||E.length||(_=E,E=ee.linear),this.attr=f,this.dur=c,E&&(this.easing=E),_&&(this.callback=_)};o._.Animation=l,o.animation=function(f,c,E,_){return new l(f,c,E,_)},s.inAnim=function(){var f=this,c=[];for(var E in f.anims)f.anims[y](E)&&function(_){c.push({anim:new l(_._attrs,_.dur,_.easing,_._callback),mina:_,curStatus:_.status(),status:function(O){return _.status(O)},stop:function(){_.stop()}})}(f.anims[E]);return c},o.animate=function(f,c,E,_,O,R){"function"!=typeof O||O.length||(R=O,O=ee.linear);var A=ee.time(),v=ee(f,c,A,A+_,ee.time,E,O);return R&&K.once("mina.finish."+v.id,R),v},s.stop=function(){for(var f=this.inAnim(),c=0,E=f.length;E>c;c++)f[c].stop();return this},s.animate=function(f,c,E,_){"function"!=typeof E||E.length||(_=E,E=ee.linear),f instanceof l&&(_=f.callback,E=f.easing,c=f.dur,f=f.attr);var O,R,A,v,F=[],j=[],H={},P=this;for(var X in f)if(f[y](X)){P.equal?(O=(v=P.equal(X,a(f[X]))).from,R=v.to,A=v.f):(O=+P.attr(X),R=+f[X]);var Y=d(O,"array")?O.length:1;H[X]=n(F.length,F.length+Y,A),F=F.concat(O),j=j.concat(R)}var ie=ee.time(),fe=ee(F,j,ie,ie+c,ee.time,function(oe){var le={};for(var V in H)H[y](V)&&(le[V]=H[V](oe));P.attr(le)},E);return P.anims[fe.id]=fe,fe._attrs=f,fe._callback=_,K("snap.animcreated."+P.id,fe),K.once("mina.finish."+fe.id,function(){K.off("mina.*."+fe.id),delete P.anims[fe.id],_&&_.call(P)}),K.once("mina.stop."+fe.id,function(){K.off("mina.*."+fe.id),delete P.anims[fe.id]}),P}}),M.plugin(function(o,x,h,e,r){function n(l,f,c,E,_,O){return null==f&&"[object SVGMatrix]"==s.call(l)?(this.a=l.a,this.b=l.b,this.c=l.c,this.d=l.d,this.e=l.e,void(this.f=l.f)):void(null!=l?(this.a=+l,this.b=+f,this.c=+c,this.d=+E,this.e=+_,this.f=+O):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var s=Object.prototype.toString,d=String,a=Math;(function(l){function f(E){return E[0]*E[0]+E[1]*E[1]}function c(E){var _=a.sqrt(f(E));E[0]&&(E[0]/=_),E[1]&&(E[1]/=_)}l.add=function(E,_,O,R,A,v){if(E&&E instanceof n)return this.add(E.a,E.b,E.c,E.d,E.e,E.f);var F=E*this.a+_*this.c,j=E*this.b+_*this.d;return this.e+=A*this.a+v*this.c,this.f+=A*this.b+v*this.d,this.c=O*this.a+R*this.c,this.d=O*this.b+R*this.d,this.a=F,this.b=j,this},n.prototype.multLeft=function(E,_,O,R,A,v){if(E&&E instanceof n)return this.multLeft(E.a,E.b,E.c,E.d,E.e,E.f);var F=E*this.a+O*this.b,j=E*this.c+O*this.d,H=E*this.e+O*this.f+A;return this.b=_*this.a+R*this.b,this.d=_*this.c+R*this.d,this.f=_*this.e+R*this.f+v,this.a=F,this.c=j,this.e=H,this},l.invert=function(){var E=this,_=E.a*E.d-E.b*E.c;return new n(E.d/_,-E.b/_,-E.c/_,E.a/_,(E.c*E.f-E.d*E.e)/_,(E.b*E.e-E.a*E.f)/_)},l.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},l.translate=function(E,_){return this.e+=E*this.a+_*this.c,this.f+=E*this.b+_*this.d,this},l.scale=function(E,_,O,R){return null==_&&(_=E),(O||R)&&this.translate(O,R),this.a*=E,this.b*=E,this.c*=_,this.d*=_,(O||R)&&this.translate(-O,-R),this},l.rotate=function(E,_,O){E=o.rad(E),_=_||0,O=O||0;var R=+a.cos(E).toFixed(9),A=+a.sin(E).toFixed(9);return this.add(R,A,-A,R,_,O),this.add(1,0,0,1,-_,-O)},l.skewX=function(E){return this.skew(E,0)},l.skewY=function(E){return this.skew(0,E)},l.skew=function(E,_){E=E||0,_=_||0,E=o.rad(E),_=o.rad(_);var O=a.tan(E).toFixed(9),R=a.tan(_).toFixed(9);return this.add(1,R,O,1,0,0)},l.x=function(E,_){return E*this.a+_*this.c+this.e},l.y=function(E,_){return E*this.b+_*this.d+this.f},l.get=function(E){return+this[d.fromCharCode(97+E)].toFixed(4)},l.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},l.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},l.determinant=function(){return this.a*this.d-this.b*this.c},l.split=function(){var E={};E.dx=this.e,E.dy=this.f;var _=[[this.a,this.b],[this.c,this.d]];E.scalex=a.sqrt(f(_[0])),c(_[0]),E.shear=_[0][0]*_[1][0]+_[0][1]*_[1][1],_[1]=[_[1][0]-_[0][0]*E.shear,_[1][1]-_[0][1]*E.shear],E.scaley=a.sqrt(f(_[1])),c(_[1]),E.shear/=E.scaley,this.determinant()<0&&(E.scalex=-E.scalex);var O=_[0][1],R=_[1][1];return 0>R?(E.rotate=o.deg(a.acos(R)),0>O&&(E.rotate=360-E.rotate)):E.rotate=o.deg(a.asin(O)),E.isSimple=!(+E.shear.toFixed(9)||E.scalex.toFixed(9)!=E.scaley.toFixed(9)&&E.rotate),E.isSuperSimple=!+E.shear.toFixed(9)&&E.scalex.toFixed(9)==E.scaley.toFixed(9)&&!E.rotate,E.noRotation=!+E.shear.toFixed(9)&&!E.rotate,E},l.toTransformString=function(E){var _=E||this.split();return+_.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(_.scalex=+_.scalex.toFixed(4),_.scaley=+_.scaley.toFixed(4),_.rotate=+_.rotate.toFixed(4),(_.dx||_.dy?"t"+[+_.dx.toFixed(4),+_.dy.toFixed(4)]:"")+(_.rotate?"r"+[+_.rotate.toFixed(4),0,0]:"")+(1!=_.scalex||1!=_.scaley?"s"+[_.scalex,_.scaley,0,0]:""))}})(n.prototype),o.Matrix=n,o.matrix=function(l,f,c,E,_,O){return new n(l,f,c,E,_,O)}}),M.plugin(function(o,x,h,e,r){function n(j){return function(H){if(K.stop(),H instanceof r&&1==H.node.childNodes.length&&("radialGradient"==H.node.firstChild.tagName||"linearGradient"==H.node.firstChild.tagName||"pattern"==H.node.firstChild.tagName)&&(H=H.node.firstChild,c(this).appendChild(H),H=l(H)),H instanceof x)if("radialGradient"==H.type||"linearGradient"==H.type||"pattern"==H.type){H.node.id||_(H.node,{id:H.id});var P=O(H.node.id)}else P=H.attr(j);else if((P=o.color(H)).error){var X=o(c(this).ownerSVGElement).gradient(H);X?(X.node.id||_(X.node,{id:X.id}),P=O(X.node.id)):P=H}else P=R(P);var Y={};Y[j]=P,_(this.node,Y),this.node.style[j]=v}}function s(j){K.stop(),j==+j&&(j+="px"),this.node.style.fontSize=j}function d(j){for(var H=[],P=j.childNodes,X=0,Y=P.length;Y>X;X++){var ie=P[X];3==ie.nodeType&&H.push(ie.nodeValue),"tspan"==ie.tagName&&(1==ie.childNodes.length&&3==ie.firstChild.nodeType?H.push(ie.firstChild.nodeValue):H.push(d(ie)))}return H}function a(){return K.stop(),this.node.style.fontSize}var j,y=o._.make,l=o._.wrap,f=o.is,c=o._.getSomeDefs,E=/^url\((['"]?)([^)]+)\1\)$/,_=o._.$,O=o.url,R=String,A=o._.separator,v="";o.deurl=function(j){var H=String(j).match(E);return H?H[2]:j},K.on("snap.util.attr.mask",function(j){if(j instanceof x||j instanceof r){if(K.stop(),j instanceof r&&1==j.node.childNodes.length&&(j=j.node.firstChild,c(this).appendChild(j),j=l(j)),"mask"==j.type)var H=j;else(H=y("mask",c(this))).node.appendChild(j.node);!H.node.id&&_(H.node,{id:H.id}),_(this.node,{mask:O(H.id)})}}),j=function(j){if(j instanceof x||j instanceof r){K.stop();for(var H,P=j.node;P;){if("clipPath"===P.nodeName){H=new x(P);break}if("svg"===P.nodeName){H=void 0;break}P=P.parentNode}H||((H=y("clipPath",c(this))).node.appendChild(j.node),!H.node.id&&_(H.node,{id:H.id})),_(this.node,{"clip-path":O(H.node.id||H.id)})}},K.on("snap.util.attr.clip",j),K.on("snap.util.attr.clip-path",j),K.on("snap.util.attr.clipPath",j),K.on("snap.util.attr.fill",n("fill")),K.on("snap.util.attr.stroke",n("stroke"));var F=/^([lr])(?:\(([^)]*)\))?(.*)$/i;K.on("snap.util.grad.parse",function(j){function H($,ne){for(var pe=(ne-oe)/($-le),Fe=le;$>Fe;Fe++)ie[Fe].offset=+(+oe+pe*(Fe-le)).toFixed(2);le=$,oe=ne}var P=(j=R(j)).match(F);if(!P)return null;var X=P[1],Y=P[2],ie=P[3];1==(Y=Y.split(/\s*,\s*/).map(function($){return+$==$?+$:$})).length&&0==Y[0]&&(Y=[]);var fe=(ie=(ie=ie.split("-")).map(function($){var ne={color:($=$.split(":"))[0]};return $[1]&&(ne.offset=parseFloat($[1])),ne})).length,oe=0,le=0;fe--;for(var V=0;fe>V;V++)"offset"in ie[V]&&H(V,ie[V].offset);return ie[fe].offset=ie[fe].offset||100,H(fe,ie[fe].offset),{type:X,params:Y,stops:ie}}),K.on("snap.util.attr.d",function(j){K.stop(),f(j,"array")&&f(j[0],"array")&&(j=o.path.toString.call(j)),(j=R(j)).match(/[ruo]/i)&&(j=o.path.toAbsolute(j)),_(this.node,{d:j})})(-1),K.on("snap.util.attr.#text",function(j){K.stop(),j=R(j);for(var H=e.doc.createTextNode(j);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(H)})(-1),K.on("snap.util.attr.path",function(j){K.stop(),this.attr({d:j})})(-1),K.on("snap.util.attr.class",function(j){K.stop(),this.node.className.baseVal=j})(-1),K.on("snap.util.attr.viewBox",function(j){var H;H=f(j,"object")&&"x"in j?[j.x,j.y,j.width,j.height].join(" "):f(j,"array")?j.join(" "):j,_(this.node,{viewBox:H}),K.stop()})(-1),K.on("snap.util.attr.transform",function(j){this.transform(j),K.stop()})(-1),K.on("snap.util.attr.r",function(j){"rect"==this.type&&(K.stop(),_(this.node,{rx:j,ry:j}))})(-1),K.on("snap.util.attr.textpath",function(j){if(K.stop(),"text"==this.type){var H,P,X;if(!j&&this.textPath){for(P=this.textPath;P.node.firstChild;)this.node.appendChild(P.node.firstChild);return P.remove(),void delete this.textPath}if(f(j,"string")){var Y=c(this),ie=l(Y.parentNode).path(j);Y.appendChild(ie.node),H=ie.id,ie.attr({id:H})}else(j=l(j))instanceof x&&((H=j.attr("id"))||(H=j.id,j.attr({id:H})));if(H)if(P=this.textPath,X=this.node,P)P.attr({"xlink:href":"#"+H});else{for(P=_("textPath",{"xlink:href":"#"+H});X.firstChild;)P.appendChild(X.firstChild);X.appendChild(P),this.textPath=l(P)}}})(-1),K.on("snap.util.attr.text",function(j){if("text"==this.type){for(var H=this.node,P=function(Y){var ie=_("tspan");if(f(Y,"array"))for(var fe=0;fe<Y.length;fe++)ie.appendChild(P(Y[fe]));else ie.appendChild(e.doc.createTextNode(Y));return ie.normalize&&ie.normalize(),ie};H.firstChild;)H.removeChild(H.firstChild);for(var X=P(j);X.firstChild;)H.appendChild(X.firstChild)}K.stop()})(-1),K.on("snap.util.attr.fontSize",s)(-1),K.on("snap.util.attr.font-size",s)(-1),K.on("snap.util.getattr.transform",function(){return K.stop(),this.transform()})(-1),K.on("snap.util.getattr.textpath",function(){return K.stop(),this.textPath})(-1),function(){function j(P){return function(){K.stop();var X=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+P);return"none"==X?X:o(e.doc.getElementById(X.match(E)[1]))}}function H(P){return function(X){K.stop();var Y="marker"+P.charAt(0).toUpperCase()+P.substring(1);if(""!=X&&X){if("marker"==X.type){var ie=X.node.id;return ie||_(X.node,{id:X.id}),void(this.node.style[Y]=O(ie))}}else this.node.style[Y]="none"}}K.on("snap.util.getattr.marker-end",j("end"))(-1),K.on("snap.util.getattr.markerEnd",j("end"))(-1),K.on("snap.util.getattr.marker-start",j("start"))(-1),K.on("snap.util.getattr.markerStart",j("start"))(-1),K.on("snap.util.getattr.marker-mid",j("mid"))(-1),K.on("snap.util.getattr.markerMid",j("mid"))(-1),K.on("snap.util.attr.marker-end",H("end"))(-1),K.on("snap.util.attr.markerEnd",H("end"))(-1),K.on("snap.util.attr.marker-start",H("start"))(-1),K.on("snap.util.attr.markerStart",H("start"))(-1),K.on("snap.util.attr.marker-mid",H("mid"))(-1),K.on("snap.util.attr.markerMid",H("mid"))(-1)}(),K.on("snap.util.getattr.r",function(){return"rect"==this.type&&_(this.node,"rx")==_(this.node,"ry")?(K.stop(),_(this.node,"rx")):void 0})(-1),K.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){K.stop();var j=d(this.node);return 1==j.length?j[0]:j}})(-1),K.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),K.on("snap.util.getattr.fill",function(j){if(!j){K.stop();var H=K("snap.util.getattr.fill",this,!0).firstDefined();return o(o.deurl(H))||H}})(-1),K.on("snap.util.getattr.stroke",function(j){if(!j){K.stop();var H=K("snap.util.getattr.stroke",this,!0).firstDefined();return o(o.deurl(H))||H}})(-1),K.on("snap.util.getattr.viewBox",function(){K.stop();var j=_(this.node,"viewBox");return j?(j=j.split(A),o._.box(+j[0],+j[1],+j[2],+j[3])):void 0})(-1),K.on("snap.util.getattr.points",function(){var j=_(this.node,"points");return K.stop(),j?j.split(A):void 0})(-1),K.on("snap.util.getattr.path",function(){var j=_(this.node,"d");return K.stop(),j})(-1),K.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),K.on("snap.util.getattr.fontSize",a)(-1),K.on("snap.util.getattr.font-size",a)(-1)}),M.plugin(function(o,x,h,e,r){var n=/\S+/g,s=String,d=x.prototype;d.addClass=function(a){var y,f,c,E=s(a||"").match(n)||[],_=this.node,O=_.className.baseVal,R=O.match(n)||[];if(E.length){for(y=0;f=E[y++];)~R.indexOf(f)||R.push(f);O!=(c=R.join(" "))&&(_.className.baseVal=c)}return this},d.removeClass=function(a){var y,l,f,c,E=s(a||"").match(n)||[],_=this.node,O=_.className.baseVal,R=O.match(n)||[];if(R.length){for(y=0;f=E[y++];)~(l=R.indexOf(f))&&R.splice(l,1);O!=(c=R.join(" "))&&(_.className.baseVal=c)}return this},d.hasClass=function(a){return!!~(this.node.className.baseVal.match(n)||[]).indexOf(a)},d.toggleClass=function(a,y){if(null!=y)return y?this.addClass(a):this.removeClass(a);var l,f,c,E,_=(a||"").match(n)||[],O=this.node,R=O.className.baseVal,A=R.match(n)||[];for(l=0;c=_[l++];)~(f=A.indexOf(c))?A.splice(f,1):A.push(c);return R!=(E=A.join(" "))&&(O.className.baseVal=E),this}}),M.plugin(function(o,x,h,e,r){function n(f){return f}function s(f){return function(c){return+c.toFixed(3)+f}}var d={"+":function(f,c){return f+c},"-":function(f,c){return f-c},"/":function(f,c){return f/c},"*":function(f,c){return f*c}},a=String,y=/[a-z]+$/i,l=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;K.on("snap.util.attr",function(f){var c=a(f).match(l);if(c){var E=K.nt(),_=E.substring(E.lastIndexOf(".")+1),O=this.attr(_),R={};K.stop();var A=c[3]||"",v=O.match(y),F=d[c[1]];if(v&&v==A?f=F(parseFloat(O),+c[2]):(O=this.asPX(_),f=F(this.asPX(_),this.asPX(_,c[2]+A))),isNaN(O)||isNaN(f))return;R[_]=f,this.attr(R)}})(-10),K.on("snap.util.equal",function(f,c){var E=a(this.attr(f)||""),_=a(c).match(l);if(_){K.stop();var O=_[3]||"",R=E.match(y),A=d[_[1]];return R&&R==O?{from:parseFloat(E),to:A(parseFloat(E),+_[2]),f:s(R)}:{from:E=this.asPX(f),to:A(E,this.asPX(f,_[2]+O)),f:n}}})(-10)}),M.plugin(function(o,x,h,e,r){var n=h.prototype,s=o.is;n.rect=function(a,y,l,f,c,E){var _;return null==E&&(E=c),s(a,"object")&&"[object Object]"==a?_=a:null!=a&&(_={x:a,y,width:l,height:f},null!=c&&(_.rx=c,_.ry=E)),this.el("rect",_)},n.circle=function(a,y,l){var f;return s(a,"object")&&"[object Object]"==a?f=a:null!=a&&(f={cx:a,cy:y,r:l}),this.el("circle",f)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(y,l){var f=e.doc.createElement("img"),c=e.doc.body;f.style.cssText="position:absolute;left:-9999em;top:-9999em",f.onload=function(){l.call(f),f.onload=f.onerror=null,c.removeChild(f)},f.onerror=a,c.appendChild(f),f.src=y}}();n.image=function(a,y,l,f,c){var E=this.el("image");if(s(a,"object")&&"src"in a)E.attr(a);else if(null!=a){var _={"xlink:href":a,preserveAspectRatio:"none"};null!=y&&null!=l&&(_.x=y,_.y=l),null!=f&&null!=c?(_.width=f,_.height=c):d(a,function(){o._.$(E.node,{width:this.offsetWidth,height:this.offsetHeight})}),o._.$(E.node,_)}return E},n.ellipse=function(a,y,l,f){var c;return s(a,"object")&&"[object Object]"==a?c=a:null!=a&&(c={cx:a,cy:y,rx:l,ry:f}),this.el("ellipse",c)},n.path=function(a){var y;return s(a,"object")&&!s(a,"array")?y=a:a&&(y={d:a}),this.el("path",y)},n.group=n.g=function(a){var y=this.el("g");return 1==arguments.length&&a&&!a.type?y.attr(a):arguments.length&&y.add(Array.prototype.slice.call(arguments,0)),y},n.svg=function(a,y,l,f,c,E,_,O){var R={};return s(a,"object")&&null==y?R=a:(null!=a&&(R.x=a),null!=y&&(R.y=y),null!=l&&(R.width=l),null!=f&&(R.height=f),null!=c&&null!=E&&null!=_&&null!=O&&(R.viewBox=[c,E,_,O])),this.el("svg",R)},n.mask=function(a){var y=this.el("mask");return 1==arguments.length&&a&&!a.type?y.attr(a):arguments.length&&y.add(Array.prototype.slice.call(arguments,0)),y},n.ptrn=function(a,y,l,f,c,E,_,O){if(s(a,"object"))var R=a;else R={patternUnits:"userSpaceOnUse"},a&&(R.x=a),y&&(R.y=y),null!=l&&(R.width=l),null!=f&&(R.height=f),R.viewBox=null!=c&&null!=E&&null!=_&&null!=O?[c,E,_,O]:[a||0,y||0,l||0,f||0];return this.el("pattern",R)},n.use=function(a){return null!=a?(a instanceof x&&(a.attr("id")||a.attr({id:o._.id(a)}),a=a.attr("id")),"#"==String(a).charAt()&&(a=a.substring(1)),this.el("use",{"xlink:href":"#"+a})):x.prototype.use.call(this)},n.symbol=function(a,y,l,f){var c={};return null!=a&&null!=y&&null!=l&&null!=f&&(c.viewBox=[a,y,l,f]),this.el("symbol",c)},n.text=function(a,y,l){var f={};return s(a,"object")?f=a:null!=a&&(f={x:a,y,text:l||""}),this.el("text",f)},n.line=function(a,y,l,f){var c={};return s(a,"object")?c=a:null!=a&&(c={x1:a,x2:l,y1:y,y2:f}),this.el("line",c)},n.polyline=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments,0));var y={};return s(a,"object")&&!s(a,"array")?y=a:null!=a&&(y={points:a}),this.el("polyline",y)},n.polygon=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments,0));var y={};return s(a,"object")&&!s(a,"array")?y=a:null!=a&&(y={points:a}),this.el("polygon",y)},function(){function a(){return this.selectAll("stop")}function y(R,A){var v=O("stop"),F={offset:+A+"%"};R=o.color(R),F["stop-color"]=R.hex,R.opacity<1&&(F["stop-opacity"]=R.opacity),O(v,F);for(var j,H=this.stops(),P=0;P<H.length;P++){if(parseFloat(H[P].attr("offset"))>A){this.node.insertBefore(v,H[P].node),j=!0;break}}return j||this.node.appendChild(v),this}function l(){if("linearGradient"==this.type){var R=O(this.node,"x1")||0,A=O(this.node,"x2")||1,v=O(this.node,"y1")||0,F=O(this.node,"y2")||0;return o._.box(R,v,math.abs(A-R),math.abs(F-v))}var j=this.node.cx||.5,H=this.node.cy||.5,P=this.node.r||0;return o._.box(j-P,H-P,2*P,2*P)}function f(R){var A=R,v=this.stops();if("string"==typeof R&&(A=K("snap.util.grad.parse",null,"l(0,0,0,1)"+R).firstDefined().stops),o.is(A,"array")){for(var F=0;F<v.length;F++)if(A[F]){var j=o.color(A[F].color),H={offset:A[F].offset+"%"};H["stop-color"]=j.hex,j.opacity<1&&(H["stop-opacity"]=j.opacity),v[F].attr(H)}else v[F].remove();for(F=v.length;F<A.length;F++)this.addStop(A[F].color,A[F].offset);return this}}function E(R,A,v,F,j){var H=o._.make("linearGradient",R);return H.stops=a,H.addStop=y,H.getBBox=l,H.setStops=f,null!=A&&O(H.node,{x1:A,y1:v,x2:F,y2:j}),H}function _(R,A,v,F,j,H){var P=o._.make("radialGradient",R);return P.stops=a,P.addStop=y,P.getBBox=l,null!=A&&O(P.node,{cx:A,cy:v,r:F}),null!=j&&null!=H&&O(P.node,{fx:j,fy:H}),P}var O=o._.$;n.gradient=function(R){return function c(R,A){var v,F=K("snap.util.grad.parse",null,A).firstDefined();if(!F)return null;F.params.unshift(R),v="l"==F.type.toLowerCase()?E.apply(0,F.params):_.apply(0,F.params),F.type!=F.type.toLowerCase()&&O(v.node,{gradientUnits:"userSpaceOnUse"});for(var j=F.stops,H=j.length,P=0;H>P;P++){var X=j[P];v.addStop(X.color,X.offset)}return v}(this.defs,R)},n.gradientLinear=function(R,A,v,F){return E(this.defs,R,A,v,F)},n.gradientRadial=function(R,A,v,F,j){return _(this.defs,R,A,v,F,j)},n.toString=function(){var R,A=this.node.ownerDocument,v=A.createDocumentFragment(),F=A.createElement("div"),j=this.node.cloneNode(!0);return v.appendChild(F),F.appendChild(j),o._.$(j,{xmlns:"http://www.w3.org/2000/svg"}),R=F.innerHTML,v.removeChild(v.firstChild),R},n.toDataURL=function(){return G&&G.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},n.clear=function(){for(var R,A=this.node.firstChild;A;)R=A.nextSibling,"defs"!=A.tagName?A.parentNode.removeChild(A):n.clear.call({node:A}),A=R}}()}),M.plugin(function(o,x,h,e){function r(be){var ke=r.ps=r.ps||{};return ke[be]?ke[be].sleep=100:ke[be]={sleep:100},setTimeout(function(){for(var Ce in ke)ke[Qe](Ce)&&Ce!=be&&(ke[Ce].sleep--,!ke[Ce].sleep&&delete ke[Ce])}),ke[be]}function n(be,ke,Ce,q){return null==be&&(be=ke=Ce=q=0),null==ke&&(ke=be.y,Ce=be.width,q=be.height,be=be.x),{x:be,y:ke,width:Ce,w:Ce,height:q,h:q,x2:be+Ce,y2:ke+q,cx:be+Ce/2,cy:ke+q/2,r1:Q.min(Ce,q)/2,r2:Q.max(Ce,q)/2,r0:Q.sqrt(Ce*Ce+q*q)/2,path:Y(be,ke,Ce,q),vb:[be,ke,Ce,q].join(" ")}}function s(){return this.join(",").replace(te,"$1")}function d(be){var ke=Ne(be);return ke.toString=s,ke}function a(be,ke,Ce,q,Z,se,ye,we,me){return null==me?O(be,ke,Ce,q,Z,se,ye,we):l(be,ke,Ce,q,Z,se,ye,we,function R(be,ke,Ce,q,Z,se,ye,we,me){if(!(0>me||O(be,ke,Ce,q,Z,se,ye,we)<me)){var Ee,Ie=1,Be=Ie/2,Ge=Ie-Be,ze=.01;for(Ee=O(be,ke,Ce,q,Z,se,ye,we,Ge);Pe(Ee-me)>ze;)Ee=O(be,ke,Ce,q,Z,se,ye,we,Ge+=(me>Ee?1:-1)*(Be/=2));return Ge}}(be,ke,Ce,q,Z,se,ye,we,me))}function y(be,ke){function Ce(q){return+(+q).toFixed(3)}return o._.cacher(function(q,Z,se){q instanceof x&&(q=q.attr("d"));for(var ye,we,me,Ee,Ie,Be="",Ge={},ze=0,Me=0,Ze=(q=pe(q)).length;Ze>Me;Me++){if("M"==(me=q[Me])[0])ye=+me[1],we=+me[2];else{if(ze+(Ee=a(ye,we,me[1],me[2],me[3],me[4],me[5],me[6]))>Z){if(ke&&!Ge.start){if(Be+=["C"+Ce((Ie=a(ye,we,me[1],me[2],me[3],me[4],me[5],me[6],Z-ze)).start.x),Ce(Ie.start.y),Ce(Ie.m.x),Ce(Ie.m.y),Ce(Ie.x),Ce(Ie.y)],se)return Be;Ge.start=Be,Be=["M"+Ce(Ie.x),Ce(Ie.y)+"C"+Ce(Ie.n.x),Ce(Ie.n.y),Ce(Ie.end.x),Ce(Ie.end.y),Ce(me[5]),Ce(me[6])].join(),ze+=Ee,ye=+me[5],we=+me[6];continue}if(!be&&!ke)return a(ye,we,me[1],me[2],me[3],me[4],me[5],me[6],Z-ze)}ze+=Ee,ye=+me[5],we=+me[6]}Be+=me.shift()+me}return Ge.end=Be,be?ze:ke?Ge:l(ye,we,me[0],me[1],me[2],me[3],me[4],me[5],1)},null,o._.clone)}function l(be,ke,Ce,q,Z,se,ye,we,me){var Ee=1-me,Ie=ge(Ee,3),Be=ge(Ee,2),Ge=me*me,ze=Ge*me,rt=be+2*me*(Ce-be)+Ge*(Z-2*Ce+be),tt=ke+2*me*(q-ke)+Ge*(se-2*q+ke),it=Ce+2*me*(Z-Ce)+Ge*(ye-2*Z+Ce),st=q+2*me*(se-q)+Ge*(we-2*se+q);return{x:Ie*be+3*Be*me*Ce+3*Ee*me*me*Z+ze*ye,y:Ie*ke+3*Be*me*q+3*Ee*me*me*se+ze*we,m:{x:rt,y:tt},n:{x:it,y:st},start:{x:Ee*be+me*Ce,y:Ee*ke+me*q},end:{x:Ee*Z+me*ye,y:Ee*se+me*we},alpha:90-180*Q.atan2(rt-it,tt-st)/z}}function f(be,ke,Ce,q,Z,se,ye,we){o.is(be,"array")||(be=[be,ke,Ce,q,Z,se,ye,we]);var me=ne.apply(null,be);return n(me.min.x,me.min.y,me.max.x-me.min.x,me.max.y-me.min.y)}function c(be,ke,Ce){return ke>=be.x&&ke<=be.x+be.width&&Ce>=be.y&&Ce<=be.y+be.height}function E(be,ke){return be=n(be),c(ke=n(ke),be.x,be.y)||c(ke,be.x2,be.y)||c(ke,be.x,be.y2)||c(ke,be.x2,be.y2)||c(be,ke.x,ke.y)||c(be,ke.x2,ke.y)||c(be,ke.x,ke.y2)||c(be,ke.x2,ke.y2)||(be.x<ke.x2&&be.x>ke.x||ke.x<be.x2&&ke.x>be.x)&&(be.y<ke.y2&&be.y>ke.y||ke.y<be.y2&&ke.y>be.y)}function _(be,ke,Ce,q,Z){return be*(be*(-3*ke+9*Ce-9*q+3*Z)+6*ke-12*Ce+6*q)-3*ke+3*Ce}function O(be,ke,Ce,q,Z,se,ye,we,me){null==me&&(me=1);for(var Ee=(me=me>1?1:0>me?0:me)/2,Be=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ge=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ze=0,Me=0;12>Me;Me++){var Ze=Ee*Be[Me]+Ee,rt=_(Ze,be,Ce,Z,ye),tt=_(Ze,ke,q,se,we),it=rt*rt+tt*tt;ze+=Ge[Me]*Q.sqrt(it)}return Ee*ze}function A(be,ke,Ce,q,Z,se,ye,we){if(!(de(be,Ce)<he(Z,ye)||he(be,Ce)>de(Z,ye)||de(ke,q)<he(se,we)||he(ke,q)>de(se,we))){var Ie=(be-Ce)*(se-we)-(ke-q)*(Z-ye);if(Ie){var Be=((be*q-ke*Ce)*(Z-ye)-(be-Ce)*(Z*we-se*ye))/Ie,Ge=((be*q-ke*Ce)*(se-we)-(ke-q)*(Z*we-se*ye))/Ie,ze=+Be.toFixed(2),Me=+Ge.toFixed(2);if(!(ze<+he(be,Ce).toFixed(2)||ze>+de(be,Ce).toFixed(2)||ze<+he(Z,ye).toFixed(2)||ze>+de(Z,ye).toFixed(2)||Me<+he(ke,q).toFixed(2)||Me>+de(ke,q).toFixed(2)||Me<+he(se,we).toFixed(2)||Me>+de(se,we).toFixed(2)))return{x:Be,y:Ge}}}}function v(be,ke,Ce){if(!E(f(be),f(ke)))return Ce?0:[];for(var we=~~(O.apply(0,be)/8),me=~~(O.apply(0,ke)/8),Ee=[],Ie=[],Be={},Ge=Ce?0:[],ze=0;we+1>ze;ze++){var Me=l.apply(0,be.concat(ze/we));Ee.push({x:Me.x,y:Me.y,t:ze/we})}for(ze=0;me+1>ze;ze++)Me=l.apply(0,ke.concat(ze/me)),Ie.push({x:Me.x,y:Me.y,t:ze/me});for(ze=0;we>ze;ze++)for(var Ze=0;me>Ze;Ze++){var rt=Ee[ze],tt=Ee[ze+1],it=Ie[Ze],st=Ie[Ze+1],Ye=Pe(tt.x-rt.x)<.001?"y":"x",We=Pe(st.x-it.x)<.001?"y":"x",at=A(rt.x,rt.y,tt.x,tt.y,it.x,it.y,st.x,st.y);if(at){if(Be[at.x.toFixed(4)]==at.y.toFixed(4))continue;Be[at.x.toFixed(4)]=at.y.toFixed(4);var ct=rt.t+Pe((at[Ye]-rt[Ye])/(tt[Ye]-rt[Ye]))*(tt.t-rt.t),ut=it.t+Pe((at[We]-it[We])/(st[We]-it[We]))*(st.t-it.t);ct>=0&&1>=ct&&ut>=0&&1>=ut&&(Ce?Ge++:Ge.push({x:at.x,y:at.y,t1:ct,t2:ut}))}}return Ge}function H(be,ke,Ce){be=pe(be),ke=pe(ke);for(var q,Z,se,ye,we,me,Ee,Ie,Be,Ge,ze=Ce?0:[],Me=0,Ze=be.length;Ze>Me;Me++){var rt=be[Me];if("M"==rt[0])q=we=rt[1],Z=me=rt[2];else{"C"==rt[0]?(Be=[q,Z].concat(rt.slice(1)),q=Be[6],Z=Be[7]):(Be=[q,Z,q,Z,we,me,we,me],q=we,Z=me);for(var tt=0,it=ke.length;it>tt;tt++){var st=ke[tt];if("M"==st[0])se=Ee=st[1],ye=Ie=st[2];else{"C"==st[0]?(Ge=[se,ye].concat(st.slice(1)),se=Ge[6],ye=Ge[7]):(Ge=[se,ye,se,ye,Ee,Ie,Ee,Ie],se=Ee,ye=Ie);var Ye=v(Be,Ge,Ce);if(Ce)ze+=Ye;else{for(var We=0,at=Ye.length;at>We;We++)Ye[We].segment1=Me,Ye[We].segment2=tt,Ye[We].bez1=Be,Ye[We].bez2=Ge;ze=ze.concat(Ye)}}}}}return ze}function X(be){var ke=r(be);if(ke.bbox)return Ne(ke.bbox);if(!be)return n();for(var Ce,q=0,Z=0,se=[],ye=[],we=0,me=(be=pe(be)).length;me>we;we++)if("M"==(Ce=be[we])[0])q=Ce[1],Z=Ce[2],se.push(q),ye.push(Z);else{var Ee=ne(q,Z,Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6]);se=se.concat(Ee.min.x,Ee.max.x),ye=ye.concat(Ee.min.y,Ee.max.y),q=Ce[5],Z=Ce[6]}var Ie=he.apply(0,se),Be=he.apply(0,ye),Me=n(Ie,Be,de.apply(0,se)-Ie,de.apply(0,ye)-Be);return ke.bbox=Ne(Me),Me}function Y(be,ke,Ce,q,Z){if(Z)return[["M",+be+ +Z,ke],["l",Ce-2*Z,0],["a",Z,Z,0,0,1,Z,Z],["l",0,q-2*Z],["a",Z,Z,0,0,1,-Z,Z],["l",2*Z-Ce,0],["a",Z,Z,0,0,1,-Z,-Z],["l",0,2*Z-q],["a",Z,Z,0,0,1,Z,-Z],["z"]];var se=[["M",be,ke],["l",Ce,0],["l",0,q],["l",-Ce,0],["z"]];return se.toString=s,se}function ie(be,ke,Ce,q,Z){if(null==Z&&null==q&&(q=Ce),be=+be,ke=+ke,Ce=+Ce,q=+q,null!=Z)var se=Math.PI/180,ye=be+Ce*Math.cos(-q*se),we=be+Ce*Math.cos(-Z*se),Ie=[["M",ye,ke+Ce*Math.sin(-q*se)],["A",Ce,Ce,0,+(Z-q>180),0,we,ke+Ce*Math.sin(-Z*se)]];else Ie=[["M",be,ke],["m",0,-q],["a",Ce,q,0,1,1,0,2*q],["a",Ce,q,0,1,1,0,-2*q],["z"]];return Ie.toString=s,Ie}function oe(be){var ke=r(be);if(ke.abs)return d(ke.abs);if(_e(be,"array")&&_e(be&&be[0],"array")||(be=o.parsePathString(be)),!be||!be.length)return[["M",0,0]];var Ce,q=[],Z=0,se=0,ye=0,we=0,me=0;"M"==be[0][0]&&(ye=Z=+be[0][1],we=se=+be[0][2],me++,q[0]=["M",Z,se]);for(var Ee,Ie,Be=3==be.length&&"M"==be[0][0]&&"R"==be[1][0].toUpperCase()&&"Z"==be[2][0].toUpperCase(),Ge=me,ze=be.length;ze>Ge;Ge++){if(q.push(Ee=[]),(Ce=(Ie=be[Ge])[0])!=Ce.toUpperCase())switch(Ee[0]=Ce.toUpperCase(),Ee[0]){case"A":Ee[1]=Ie[1],Ee[2]=Ie[2],Ee[3]=Ie[3],Ee[4]=Ie[4],Ee[5]=Ie[5],Ee[6]=+Ie[6]+Z,Ee[7]=+Ie[7]+se;break;case"V":Ee[1]=+Ie[1]+se;break;case"H":Ee[1]=+Ie[1]+Z;break;case"R":for(var Me=[Z,se].concat(Ie.slice(1)),Ze=2,rt=Me.length;rt>Ze;Ze++)Me[Ze]=+Me[Ze]+Z,Me[++Ze]=+Me[Ze]+se;q.pop(),q=q.concat(ve(Me,Be));break;case"O":q.pop(),(Me=ie(Z,se,Ie[1],Ie[2])).push(Me[0]),q=q.concat(Me);break;case"U":q.pop(),q=q.concat(ie(Z,se,Ie[1],Ie[2],Ie[3])),Ee=["U"].concat(q[q.length-1].slice(-2));break;case"M":ye=+Ie[1]+Z,we=+Ie[2]+se;default:for(Ze=1,rt=Ie.length;rt>Ze;Ze++)Ee[Ze]=+Ie[Ze]+(Ze%2?Z:se)}else if("R"==Ce)Me=[Z,se].concat(Ie.slice(1)),q.pop(),q=q.concat(ve(Me,Be)),Ee=["R"].concat(Ie.slice(-2));else if("O"==Ce)q.pop(),(Me=ie(Z,se,Ie[1],Ie[2])).push(Me[0]),q=q.concat(Me);else if("U"==Ce)q.pop(),q=q.concat(ie(Z,se,Ie[1],Ie[2],Ie[3])),Ee=["U"].concat(q[q.length-1].slice(-2));else for(var tt=0,it=Ie.length;it>tt;tt++)Ee[tt]=Ie[tt];if("O"!=(Ce=Ce.toUpperCase()))switch(Ee[0]){case"Z":Z=+ye,se=+we;break;case"H":Z=Ee[1];break;case"V":se=Ee[1];break;case"M":ye=Ee[Ee.length-2],we=Ee[Ee.length-1];default:Z=Ee[Ee.length-2],se=Ee[Ee.length-1]}}return q.toString=s,ke.abs=d(q),q}function le(be,ke,Ce,q){return[be,ke,Ce,q,Ce,q]}function V(be,ke,Ce,q,Z,se){var ye=.3333333333333333,we=2/3;return[ye*be+we*Ce,ye*ke+we*q,ye*Z+we*Ce,ye*se+we*q,Z,se]}function $(be,ke,Ce,q,Z,se,ye,we,me,Ee){var Ie,Be=120*z/180,Ge=z/180*(+Z||0),ze=[],Me=o._.cacher(function(Or,mr,$t){return{x:Or*Q.cos($t)-mr*Q.sin($t),y:Or*Q.sin($t)+mr*Q.cos($t)}});if(!Ce||!q)return[be,ke,we,me,we,me];if(Ee)ct=Ee[0],ut=Ee[1],We=Ee[2],at=Ee[3];else{be=(Ie=Me(be,ke,-Ge)).x,ke=Ie.y,we=(Ie=Me(we,me,-Ge)).x,me=Ie.y;var Ze=(Q.cos(z/180*Z),Q.sin(z/180*Z),(be-we)/2),rt=(ke-me)/2,tt=Ze*Ze/(Ce*Ce)+rt*rt/(q*q);tt>1&&(Ce*=tt=Q.sqrt(tt),q*=tt);var it=Ce*Ce,st=q*q,Ye=(se==ye?-1:1)*Q.sqrt(Pe((it*st-it*rt*rt-st*Ze*Ze)/(it*rt*rt+st*Ze*Ze))),We=Ye*Ce*rt/q+(be+we)/2,at=Ye*-q*Ze/Ce+(ke+me)/2,ct=Q.asin(((ke-at)/q).toFixed(9)),ut=Q.asin(((me-at)/q).toFixed(9));0>(ct=We>be?z-ct:ct)&&(ct=2*z+ct),0>(ut=We>we?z-ut:ut)&&(ut=2*z+ut),ye&&ct>ut&&(ct-=2*z),!ye&&ut>ct&&(ut-=2*z)}var dr=ut-ct;if(Pe(dr)>Be){var Fn=ut,Cn=we,Sr=me;ut=ct+Be*(ye&&ut>ct?1:-1),ze=$(we=We+Ce*Q.cos(ut),me=at+q*Q.sin(ut),Ce,q,Z,0,ye,Cn,Sr,[ut,Fn,We,at])}dr=ut-ct;var Sn=Q.cos(ct),Tr=Q.sin(ct),Tn=Q.cos(ut),Wt=Q.sin(ut),yr=Q.tan(dr/4),Ht=4/3*Ce*yr,vr=4/3*q*yr,jr=[be,ke],Mt=[be+Ht*Tr,ke-vr*Sn],gr=[we+Ht*Wt,me-vr*Tn],Ir=[we,me];if(Mt[0]=2*jr[0]-Mt[0],Mt[1]=2*jr[1]-Mt[1],Ee)return[Mt,gr,Ir].concat(ze);for(var Nr=[],Tt=0,Rr=(ze=[Mt,gr,Ir].concat(ze).join().split(",")).length;Rr>Tt;Tt++)Nr[Tt]=Tt%2?Me(ze[Tt-1],ze[Tt],Ge).y:Me(ze[Tt],ze[Tt+1],Ge).x;return Nr}function ne(be,ke,Ce,q,Z,se,ye,we){for(var me,Ee,Ie,Be,Ge,ze,Me,Ze,rt=[],tt=[[],[]],it=0;2>it;++it)if(0==it?(Ee=6*be-12*Ce+6*Z,me=-3*be+9*Ce-9*Z+3*ye,Ie=3*Ce-3*be):(Ee=6*ke-12*q+6*se,me=-3*ke+9*q-9*se+3*we,Ie=3*q-3*ke),Pe(me)<1e-12){if(Pe(Ee)<1e-12)continue;(Be=-Ie/Ee)>0&&1>Be&&rt.push(Be)}else Me=Ee*Ee-4*Ie*me,Ze=Q.sqrt(Me),0>Me||((Ge=(-Ee+Ze)/(2*me))>0&&1>Ge&&rt.push(Ge),(ze=(-Ee-Ze)/(2*me))>0&&1>ze&&rt.push(ze));for(var st,Ye=rt.length,We=Ye;Ye--;)st=1-(Be=rt[Ye]),tt[0][Ye]=st*st*st*be+3*st*st*Be*Ce+3*st*Be*Be*Z+Be*Be*Be*ye,tt[1][Ye]=st*st*st*ke+3*st*st*Be*q+3*st*Be*Be*se+Be*Be*Be*we;return tt[0][We]=be,tt[1][We]=ke,tt[0][We+1]=ye,tt[1][We+1]=we,tt[0].length=tt[1].length=We+2,{min:{x:he.apply(0,tt[0]),y:he.apply(0,tt[1])},max:{x:de.apply(0,tt[0]),y:de.apply(0,tt[1])}}}function pe(be,ke){var Ce=!ke&&r(be);if(!ke&&Ce.curve)return d(Ce.curve);for(var q=oe(be),Z=ke&&oe(ke),se={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ye={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},we=function(Ye,We,at){var ct,ut;if(!Ye)return["C",We.x,We.y,We.x,We.y,We.x,We.y];switch(!(Ye[0]in{T:1,Q:1})&&(We.qx=We.qy=null),Ye[0]){case"M":We.X=Ye[1],We.Y=Ye[2];break;case"A":Ye=["C"].concat($.apply(0,[We.x,We.y].concat(Ye.slice(1))));break;case"S":"C"==at||"S"==at?(ct=2*We.x-We.bx,ut=2*We.y-We.by):(ct=We.x,ut=We.y),Ye=["C",ct,ut].concat(Ye.slice(1));break;case"T":"Q"==at||"T"==at?(We.qx=2*We.x-We.qx,We.qy=2*We.y-We.qy):(We.qx=We.x,We.qy=We.y),Ye=["C"].concat(V(We.x,We.y,We.qx,We.qy,Ye[1],Ye[2]));break;case"Q":We.qx=Ye[1],We.qy=Ye[2],Ye=["C"].concat(V(We.x,We.y,Ye[1],Ye[2],Ye[3],Ye[4]));break;case"L":Ye=["C"].concat(le(We.x,We.y,Ye[1],Ye[2]));break;case"H":Ye=["C"].concat(le(We.x,We.y,Ye[1],We.y));break;case"V":Ye=["C"].concat(le(We.x,We.y,We.x,Ye[1]));break;case"Z":Ye=["C"].concat(le(We.x,We.y,We.X,We.Y))}return Ye},me=function(Ye,We){if(Ye[We].length>7){Ye[We].shift();for(var at=Ye[We];at.length;)Ie[We]="A",Z&&(Be[We]="A"),Ye.splice(We++,0,["C"].concat(at.splice(0,6)));Ye.splice(We,1),Ze=de(q.length,Z&&Z.length||0)}},Ee=function(Ye,We,at,ct,ut){Ye&&We&&"M"==Ye[ut][0]&&"M"!=We[ut][0]&&(We.splice(ut,0,["M",ct.x,ct.y]),at.bx=0,at.by=0,at.x=Ye[ut][1],at.y=Ye[ut][2],Ze=de(q.length,Z&&Z.length||0))},Ie=[],Be=[],Ge="",ze="",Me=0,Ze=de(q.length,Z&&Z.length||0);Ze>Me;Me++){q[Me]&&(Ge=q[Me][0]),"C"!=Ge&&(Ie[Me]=Ge,Me&&(ze=Ie[Me-1])),q[Me]=we(q[Me],se,ze),"A"!=Ie[Me]&&"C"==Ge&&(Ie[Me]="C"),me(q,Me),Z&&(Z[Me]&&(Ge=Z[Me][0]),"C"!=Ge&&(Be[Me]=Ge,Me&&(ze=Be[Me-1])),Z[Me]=we(Z[Me],ye,ze),"A"!=Be[Me]&&"C"==Ge&&(Be[Me]="C"),me(Z,Me)),Ee(q,Z,se,ye,Me),Ee(Z,q,ye,se,Me);var rt=q[Me],tt=Z&&Z[Me],it=rt.length,st=Z&&tt.length;se.x=rt[it-2],se.y=rt[it-1],se.bx=k(rt[it-4])||se.x,se.by=k(rt[it-3])||se.y,ye.bx=Z&&(k(tt[st-4])||ye.x),ye.by=Z&&(k(tt[st-3])||ye.y),ye.x=Z&&tt[st-2],ye.y=Z&&tt[st-1]}return Z||(Ce.curve=d(q)),Z?[q,Z]:q}function ve(be,ke){for(var Ce=[],q=0,Z=be.length;Z-2*!ke>q;q+=2){var se=[{x:+be[q-2],y:+be[q-1]},{x:+be[q],y:+be[q+1]},{x:+be[q+2],y:+be[q+3]},{x:+be[q+4],y:+be[q+5]}];ke?q?Z-4==q?se[3]={x:+be[0],y:+be[1]}:Z-2==q&&(se[2]={x:+be[0],y:+be[1]},se[3]={x:+be[2],y:+be[3]}):se[0]={x:+be[Z-2],y:+be[Z-1]}:Z-4==q?se[3]=se[2]:q||(se[0]={x:+be[q],y:+be[q+1]}),Ce.push(["C",(-se[0].x+6*se[1].x+se[2].x)/6,(-se[0].y+6*se[1].y+se[2].y)/6,(se[1].x+6*se[2].x-se[3].x)/6,(se[1].y+6*se[2].y-se[3].y)/6,se[2].x,se[2].y])}return Ce}var ce=x.prototype,_e=o.is,Ne=o._.clone,Qe="hasOwnProperty",te=/,?([a-z]),?/gi,k=parseFloat,Q=Math,z=Q.PI,he=Q.min,de=Q.max,ge=Q.pow,Pe=Q.abs,Oe=y(1),Je=y(),$e=y(0,1),Ke=o._unit2px,ot={path:function(be){return be.attr("path")},circle:function(be){var ke=Ke(be);return ie(ke.cx,ke.cy,ke.r)},ellipse:function(be){var ke=Ke(be);return ie(ke.cx||0,ke.cy||0,ke.rx,ke.ry)},rect:function(be){var ke=Ke(be);return Y(ke.x||0,ke.y||0,ke.width,ke.height,ke.rx,ke.ry)},image:function(be){var ke=Ke(be);return Y(ke.x||0,ke.y||0,ke.width,ke.height)},line:function(be){return"M"+[be.attr("x1")||0,be.attr("y1")||0,be.attr("x2"),be.attr("y2")]},polyline:function(be){return"M"+be.attr("points")},polygon:function(be){return"M"+be.attr("points")+"z"},deflt:function(be){var ke=be.node.getBBox();return Y(ke.x,ke.y,ke.width,ke.height)}};o.path=r,o.path.getTotalLength=Oe,o.path.getPointAtLength=Je,o.path.getSubpath=function(be,ke,Ce){if(this.getTotalLength(be)-Ce<1e-6)return $e(be,ke).end;var q=$e(be,Ce,1);return ke?$e(q,ke).end:q},ce.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},ce.getPointAtLength=function(be){return Je(this.attr("d"),be)},ce.getSubpath=function(be,ke){return o.path.getSubpath(this.attr("d"),be,ke)},o._.box=n,o.path.findDotsAtSegment=l,o.path.bezierBBox=f,o.path.isPointInsideBBox=c,o.closest=function(be,ke,Ce,q){for(var Z=100,se=n(be-Z/2,ke-Z/2,Z,Z),ye=[],we=Ce[0].hasOwnProperty("x")?function(Ze){return{x:Ce[Ze].x,y:Ce[Ze].y}}:function(Ze){return{x:Ce[Ze],y:q[Ze]}},me=0;1e6>=Z&&!me;){for(var Ee=0,Ie=Ce.length;Ie>Ee;Ee++){var Be=we(Ee);if(c(se,Be.x,Be.y)){me++,ye.push(Be);break}}me||(se=n(be-(Z*=2)/2,ke-Z/2,Z,Z))}if(1e6!=Z){var Ge,ze=1/0;for(Ee=0,Ie=ye.length;Ie>Ee;Ee++){var Me=o.len(be,ke,ye[Ee].x,ye[Ee].y);ze>Me&&(ze=Me,ye[Ee].len=Me,Ge=ye[Ee])}return Ge}},o.path.isBBoxIntersect=E,o.path.intersection=function F(be,ke){return H(be,ke)},o.path.intersectionNumber=function j(be,ke){return H(be,ke,1)},o.path.isPointInside=function P(be,ke,Ce){var q=X(be);return c(q,ke,Ce)&&H(be,[["M",ke,Ce],["H",q.x2+10]],1)%2==1},o.path.getBBox=X,o.path.get=ot,o.path.toRelative=function fe(be){var ke=r(be),Ce=String.prototype.toLowerCase;if(ke.rel)return d(ke.rel);o.is(be,"array")&&o.is(be&&be[0],"array")||(be=o.parsePathString(be));var q=[],Z=0,se=0,ye=0,we=0,me=0;"M"==be[0][0]&&(ye=Z=be[0][1],we=se=be[0][2],me++,q.push(["M",Z,se]));for(var Ee=me,Ie=be.length;Ie>Ee;Ee++){var Be=q[Ee]=[],Ge=be[Ee];if(Ge[0]!=Ce.call(Ge[0]))switch(Be[0]=Ce.call(Ge[0]),Be[0]){case"a":Be[1]=Ge[1],Be[2]=Ge[2],Be[3]=Ge[3],Be[4]=Ge[4],Be[5]=Ge[5],Be[6]=+(Ge[6]-Z).toFixed(3),Be[7]=+(Ge[7]-se).toFixed(3);break;case"v":Be[1]=+(Ge[1]-se).toFixed(3);break;case"m":ye=Ge[1],we=Ge[2];default:for(var ze=1,Me=Ge.length;Me>ze;ze++)Be[ze]=+(Ge[ze]-(ze%2?Z:se)).toFixed(3)}else{Be=q[Ee]=[],"m"==Ge[0]&&(ye=Ge[1]+Z,we=Ge[2]+se);for(var Ze=0,rt=Ge.length;rt>Ze;Ze++)q[Ee][Ze]=Ge[Ze]}var tt=q[Ee].length;switch(q[Ee][0]){case"z":Z=ye,se=we;break;case"h":Z+=+q[Ee][tt-1];break;case"v":se+=+q[Ee][tt-1];break;default:Z+=+q[Ee][tt-2],se+=+q[Ee][tt-1]}}return q.toString=s,ke.rel=d(q),q},o.path.toAbsolute=oe,o.path.toCubic=pe,o.path.map=function Fe(be,ke){if(!ke)return be;var Ce,q,Z,se,ye,we,me;for(Z=0,ye=(be=pe(be)).length;ye>Z;Z++)for(se=1,we=(me=be[Z]).length;we>se;se+=2)Ce=ke.x(me[se],me[se+1]),q=ke.y(me[se],me[se+1]),me[se]=Ce,me[se+1]=q;return be},o.path.toString=s,o.path.clone=d}),M.plugin(function(o,x,h,e){var r=Math.max,n=Math.min,s=function(a){if(this.items=[],this.bindings={},this.length=0,this.type="set",a)for(var y=0,l=a.length;l>y;y++)a[y]&&(this[this.items.length]=this.items[this.items.length]=a[y],this.length++)},d=s.prototype;d.push=function(){for(var a,y,l=0,f=arguments.length;f>l;l++)(a=arguments[l])&&(this[y=this.items.length]=this.items[y]=a,this.length++);return this},d.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},d.forEach=function(a,y){for(var l=0,f=this.items.length;f>l;l++)if(!1===a.call(y,this.items[l],l))return this;return this},d.animate=function(a,y,l,f){"function"!=typeof l||l.length||(f=l,l=ee.linear),a instanceof o._.Animation&&(f=a.callback,l=a.easing,y=l.dur,a=a.attr);var c=arguments;if(o.is(a,"array")&&o.is(c[c.length-1],"array"))var E=!0;var _,O=function(){_?this.b=_:_=this.b},R=0,A=this,v=f&&function(){++R==A.length&&f.call(this)};return this.forEach(function(F,j){K.once("snap.animcreated."+F.id,O),E?c[j]&&F.animate.apply(F,c[j]):F.animate(a,y,l,v)})},d.remove=function(){for(;this.length;)this.pop().remove();return this},d.bind=function(a,y,l){var f={};if("function"==typeof y)this.bindings[a]=y;else{var c=l||a;this.bindings[a]=function(E){f[c]=E,y.attr(f)}}return this},d.attr=function(a){var y={};for(var l in a)this.bindings[l]?this.bindings[l](a[l]):y[l]=a[l];for(var f=0,c=this.items.length;c>f;f++)this.items[f].attr(y);return this},d.clear=function(){for(;this.length;)this.pop()},d.splice=function(a,y,l){a=0>a?r(this.length+a,0):a,y=r(0,n(this.length-a,y));var f,c=[],E=[],_=[];for(f=2;f<arguments.length;f++)_.push(arguments[f]);for(f=0;y>f;f++)E.push(this[a+f]);for(;f<this.length-a;f++)c.push(this[a+f]);var O=_.length;for(f=0;f<O+c.length;f++)this.items[a+f]=this[a+f]=O>f?_[f]:c[f-O];for(f=this.items.length=this.length-=y-O;this[f];)delete this[f++];return new s(E)},d.exclude=function(a){for(var y=0,l=this.length;l>y;y++)if(this[y]==a)return this.splice(y,1),!0;return!1},d.insertAfter=function(a){for(var y=this.items.length;y--;)this.items[y].insertAfter(a);return this},d.getBBox=function(){for(var a=[],y=[],l=[],f=[],c=this.items.length;c--;)if(!this.items[c].removed){var E=this.items[c].getBBox();a.push(E.x),y.push(E.y),l.push(E.x+E.width),f.push(E.y+E.height)}return{x:a=n.apply(0,a),y:y=n.apply(0,y),x2:l=r.apply(0,l),y2:f=r.apply(0,f),width:l-a,height:f-y,cx:a+(l-a)/2,cy:y+(f-y)/2}},d.clone=function(a){a=new s;for(var y=0,l=this.items.length;l>y;y++)a.push(this.items[y].clone());return a},d.toString=function(){return"Snap\u2018s set"},d.type="set",o.Set=s,o.set=function(){var a=new s;return arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0)),a}}),M.plugin(function(o,x,h,e){function r(A){var v=A[0];switch(v.toLowerCase()){case"t":return[v,0,0];case"m":return[v,1,0,0,1,0,0];case"r":return 4==A.length?[v,0,A[2],A[3]]:[v,0];case"s":return 5==A.length?[v,1,1,A[3],A[4]]:3==A.length?[v,1,1]:[v,1]}}function s(A){return A}function d(A){return function(v){return+v.toFixed(3)+A}}function a(A){return A.join(" ")}function y(A){return o.rgb(A[0],A[1],A[2],A[3])}function l(A){var v,F,j,H,P,X,Y=0,ie=[];for(v=0,F=A.length;F>v;v++){for(P="[",X=['"'+A[v][0]+'"'],j=1,H=A[v].length;H>j;j++)X[j]="val["+Y+++"]";P+=X+"]",ie[v]=P}return Function("val","return Snap.path.toString.call(["+ie+"])")}function f(A){for(var v=[],F=0,j=A.length;j>F;F++)for(var H=1,P=A[F].length;P>H;H++)v.push(A[F][H]);return v}function c(A){return isFinite(A)}var _={},O=/[%a-z]+$/i,R=String;_.stroke=_.fill="colour",x.prototype.equal=function(A,v){return K("snap.util.equal",this,A,v).firstDefined()},K.on("snap.util.equal",function(A,v){var F,j,H=R(this.attr(A)||""),P=this;if("colour"==_[A])return F=o.color(H),j=o.color(v),{from:[F.r,F.g,F.b,F.opacity],to:[j.r,j.g,j.b,j.opacity],f:y};if("viewBox"==A)return{from:F=this.attr(A).vb.split(" ").map(Number),to:j=v.split(" ").map(Number),f:a};if("transform"==A||"gradientTransform"==A||"patternTransform"==A)return"string"==typeof v&&(v=R(v).replace(/\.{3}|\u2026/g,H)),function n(A,v,F){A=A||new o.Matrix,v=v||new o.Matrix,A=o.parseTransformString(A.toTransformString())||[],v=o.parseTransformString(v.toTransformString())||[];for(var j,H,P,X,Y=Math.max(A.length,v.length),ie=[],fe=[],oe=0;Y>oe;oe++){if(P=A[oe]||r(v[oe]),X=v[oe]||r(P),P[0]!=X[0]||"r"==P[0].toLowerCase()&&(P[2]!=X[2]||P[3]!=X[3])||"s"==P[0].toLowerCase()&&(P[3]!=X[3]||P[4]!=X[4])){A=o._.transform2matrix(A,F()),v=o._.transform2matrix(v,F()),ie=[["m",A.a,A.b,A.c,A.d,A.e,A.f]],fe=[["m",v.a,v.b,v.c,v.d,v.e,v.f]];break}for(ie[oe]=[],fe[oe]=[],j=0,H=Math.max(P.length,X.length);H>j;j++)j in P&&(ie[oe][j]=P[j]),j in X&&(fe[oe][j]=X[j])}return{from:f(ie),to:f(fe),f:l(ie)}}(H=this.matrix,v=o._.rgTransform.test(v)?o._.transform2matrix(v,this.getBBox()):o._.transform2matrix(o._.svgTransform2string(v),this.getBBox()),function(){return P.getBBox(1)});if("d"==A||"path"==A)return{from:f((F=o.path.toCubic(H,v))[0]),to:f(F[1]),f:l(F[0])};if("points"==A)return{from:F=R(H).split(o._.separator),to:j=R(v).split(o._.separator),f:function(ie){return ie}};if(c(H)&&c(v))return{from:parseFloat(H),to:parseFloat(v),f:s};var X=H.match(O),Y=R(v).match(O);return X&&function E(A,v){return!(!o.is(A,"array")||!o.is(v,"array"))&&A.toString()==v.toString()}(X,Y)?{from:parseFloat(H),to:parseFloat(v),f:d(X)}:{from:this.asPX(A),to:this.asPX(A,v),f:s}})}),M.plugin(function(o,x,h,e){for(var r=x.prototype,s=("createTouch"in e.doc),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],a={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},y=function(v,F){var j="y"==v?"scrollTop":"scrollLeft",H=F&&F.node?F.node.ownerDocument:e.doc;return H[j in H.documentElement?"documentElement":"body"][j]},l=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},c=function(v,F,j,H){var P=s&&a[F]?a[F]:F,X=function(Y){var ie=y("y",H),fe=y("x",H);if(s&&a.hasOwnProperty(F))for(var oe=0,le=Y.targetTouches&&Y.targetTouches.length;le>oe;oe++)if(Y.targetTouches[oe].target==v||v.contains(Y.targetTouches[oe].target)){var V=Y;(Y=Y.targetTouches[oe]).originalEvent=V,Y.preventDefault=l,Y.stopPropagation=f;break}var $=Y.clientX+fe,ne=Y.clientY+ie;return j.call(H,Y,$,ne)};return F!==P&&v.addEventListener(F,X,!1),v.addEventListener(P,X,!1),function(){return F!==P&&v.removeEventListener(F,X,!1),v.removeEventListener(P,X,!1),!0}},E=[],_=function(v){for(var F,j=v.clientX,H=v.clientY,P=y("y"),X=y("x"),Y=E.length;Y--;){if(F=E[Y],s){for(var ie,fe=v.touches&&v.touches.length;fe--;)if((ie=v.touches[fe]).identifier==F.el._drag.id||F.el.node.contains(ie.target)){j=ie.clientX,H=ie.clientY,(v.originalEvent?v.originalEvent:v).preventDefault();break}}else v.preventDefault();var oe=F.el.node;oe.nextSibling,oe.parentNode,oe.style.display,j+=X,H+=P,K("snap.drag.move."+F.el.id,F.move_scope||F.el,j-F.el._drag.x,H-F.el._drag.y,j,H,v)}},O=function(v){o.unmousemove(_).unmouseup(O);for(var F,j=E.length;j--;)(F=E[j]).el._drag={},K("snap.drag.end."+F.el.id,F.end_scope||F.start_scope||F.move_scope||F.el,v),K.off("snap.drag.*."+F.el.id);E=[]},R=d.length;R--;)!function(v){o[v]=r[v]=function(F,j){if(o.is(F,"function"))this.events=this.events||[],this.events.push({name:v,f:F,unbind:c(this.node||document,v,F,j||this)});else for(var H=0,P=this.events.length;P>H;H++)if(this.events[H].name==v)try{this.events[H].f.call(this)}catch{}return this},o["un"+v]=r["un"+v]=function(F){for(var j=this.events||[],H=j.length;H--;)if(j[H].name==v&&(j[H].f==F||!F))return j[H].unbind(),j.splice(H,1),!j.length&&delete this.events,this;return this}}(d[R]);r.hover=function(v,F,j,H){return this.mouseover(v,j).mouseout(F,H||j)},r.unhover=function(v,F){return this.unmouseover(v).unmouseout(F)};var A=[];r.drag=function(v,F,j,H,P,X){function Y(le,V,$){(le.originalEvent||le).preventDefault(),fe._drag.x=V,fe._drag.y=$,fe._drag.id=le.identifier,!E.length&&o.mousemove(_).mouseup(O),E.push({el:fe,move_scope:H,start_scope:P,end_scope:X}),F&&K.on("snap.drag.start."+fe.id,F),v&&K.on("snap.drag.move."+fe.id,v),j&&K.on("snap.drag.end."+fe.id,j),K("snap.drag.start."+fe.id,P||H||fe,V,$,le)}function ie(le,V,$){K("snap.draginit."+fe.id,fe,le,V,$)}var oe,fe=this;return arguments.length?(K.on("snap.draginit."+fe.id,Y),fe._drag={},A.push({el:fe,start:Y,init:ie}),fe.mousedown(ie),fe):fe.drag(function(le,V){this.attr({transform:oe+(oe?"T":"t")+[le,V]})},function(){oe=this.transform().local})},r.undrag=function(){for(var v=A.length;v--;)A[v].el==this&&(this.unmousedown(A[v].init),A.splice(v,1),K.unbind("snap.drag.*."+this.id),K.unbind("snap.draginit."+this.id));return!A.length&&o.unmousemove(_).unmouseup(O),this}}),M.plugin(function(o,x,h,e){var r=(x.prototype,h.prototype),n=/^\s*url\((.+)\)/,s=String,d=o._.$;o.filter={},r.filter=function(a){var y=this;"svg"!=y.type&&(y=y.paper);var l=o.parse(s(a)),f=o._.id(),c=(y.node.offsetWidth,y.node.offsetHeight,d("filter"));return d(c,{id:f,filterUnits:"userSpaceOnUse"}),c.appendChild(l.node),y.defs.appendChild(c),new x(c)},K.on("snap.util.getattr.filter",function(){K.stop();var a=d(this.node,"filter");if(a){var y=s(a).match(n);return y&&o.select(y[1])}}),K.on("snap.util.attr.filter",function(a){if(a instanceof x&&"filter"==a.type){K.stop();var y=a.node.id;y||(d(a.node,{id:a.id}),y=a.id),d(this.node,{filter:o.url(y)})}a&&"none"!=a||(K.stop(),this.node.removeAttribute("filter"))}),o.filter.blur=function(a,y){null==a&&(a=2);var l=null==y?a:[a,y];return o.format('<feGaussianBlur stdDeviation="{def}"/>',{def:l})},o.filter.blur.toString=function(){return this()},o.filter.shadow=function(a,y,l,f,c){return null==c&&(null==f?(c=l,l=4,f="#000"):(c=f,f=l,l=4)),null==l&&(l=4),null==c&&(c=1),null==a&&(a=0,y=2),null==y&&(y=a),f=o.color(f),o.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:f,dx:a,dy:y,blur:l,opacity:c})},o.filter.shadow.toString=function(){return this()},o.filter.grayscale=function(a){return null==a&&(a=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-a),b:.7152-.7152*(1-a),c:.0722-.0722*(1-a),d:.2126-.2126*(1-a),e:.7152+.2848*(1-a),f:.0722-.0722*(1-a),g:.2126-.2126*(1-a),h:.0722+.9278*(1-a)})},o.filter.grayscale.toString=function(){return this()},o.filter.sepia=function(a){return null==a&&(a=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-a),b:.769-.769*(1-a),c:.189-.189*(1-a),d:.349-.349*(1-a),e:.686+.314*(1-a),f:.168-.168*(1-a),g:.272-.272*(1-a),h:.534-.534*(1-a),i:.131+.869*(1-a)})},o.filter.sepia.toString=function(){return this()},o.filter.saturate=function(a){return null==a&&(a=1),o.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-a})},o.filter.saturate.toString=function(){return this()},o.filter.hueRotate=function(a){return a=a||0,o.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:a})},o.filter.hueRotate.toString=function(){return this()},o.filter.invert=function(a){return null==a&&(a=1),o.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:a,amount2:1-a})},o.filter.invert.toString=function(){return this()},o.filter.brightness=function(a){return null==a&&(a=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:a})},o.filter.brightness.toString=function(){return this()},o.filter.contrast=function(a){return null==a&&(a=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:a,amount2:.5-a/2})},o.filter.contrast.toString=function(){return this()}}),M.plugin(function(o,x,h,e,r){var n=o._.box,s=o.is,d=/^[^a-z]*([tbmlrc])/i,a=function(){return"T"+this.dx+","+this.dy};x.prototype.getAlign=function(y,l){null==l&&s(y,"string")&&(l=y,y=null);var f=(y=y||this.paper).getBBox?y.getBBox():n(y),c=this.getBBox(),E={};switch(l=(l=l&&l.match(d))?l[1].toLowerCase():"c"){case"t":E.dx=0,E.dy=f.y-c.y;break;case"b":E.dx=0,E.dy=f.y2-c.y2;break;case"m":E.dx=0,E.dy=f.cy-c.cy;break;case"l":E.dx=f.x-c.x,E.dy=0;break;case"r":E.dx=f.x2-c.x2,E.dy=0;break;default:E.dx=f.cx-c.cx,E.dy=0}return E.toString=a,E},x.prototype.align=function(y,l){return this.transform("..."+this.getAlign(y,l))}}),M.plugin(function(o,x,h,e){function r(Y){Y=Y.split(/(?=#)/);var ie=new String(Y[5]);return ie[50]=Y[0],ie[100]=Y[1],ie[200]=Y[2],ie[300]=Y[3],ie[400]=Y[4],ie[500]=Y[5],ie[600]=Y[6],ie[700]=Y[7],ie[800]=Y[8],ie[900]=Y[9],Y[10]&&(ie.A100=Y[10],ie.A200=Y[11],ie.A400=Y[12],ie.A700=Y[13]),ie}o.mui={},o.flat={},o.mui.red=r("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),o.mui.pink=r("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),o.mui.purple=r("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),o.mui.deeppurple=r("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),o.mui.indigo=r("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),o.mui.blue=r("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),o.mui.lightblue=r("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),o.mui.cyan=r("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),o.mui.teal=r("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),o.mui.green=r("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),o.mui.lightgreen=r("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),o.mui.lime=r("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),o.mui.yellow=r("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),o.mui.amber=r("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),o.mui.orange=r("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),o.mui.deeporange=r("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),o.mui.brown=r("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),o.mui.grey=r("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),o.mui.bluegrey=r("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),o.flat.turquoise="#1abc9c",o.flat.greensea="#16a085",o.flat.sunflower="#f1c40f",o.flat.orange="#f39c12",o.flat.emerland="#2ecc71",o.flat.nephritis="#27ae60",o.flat.carrot="#e67e22",o.flat.pumpkin="#d35400",o.flat.peterriver="#3498db",o.flat.belizehole="#2980b9",o.flat.alizarin="#e74c3c",o.flat.pomegranate="#c0392b",o.flat.amethyst="#9b59b6",o.flat.wisteria="#8e44ad",o.flat.clouds="#ecf0f1",o.flat.silver="#bdc3c7",o.flat.wetasphalt="#34495e",o.flat.midnightblue="#2c3e50",o.flat.concrete="#95a5a6",o.flat.asbestos="#7f8c8d",o.importMUIColors=function(){for(var Y in o.mui)o.mui.hasOwnProperty(Y)&&(G[Y]=o.mui[Y])}}),M}),function(G){"object"==typeof exports&&typeof module<"u"?module.exports=G():"function"==typeof define&&define.amd?define([],G):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).rdfstore=G()}(function(){var define,module,exports;return function G(K,ee,M){function o(e,r){if(!ee[e]){if(!K[e]){var n="function"==typeof require&&require;if(!r&&n)return n(e,!0);if(x)return x(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var d=ee[e]={exports:{}};K[e][0].call(d.exports,function(a){return o(K[e][1][a]||a)},d,d.exports,G,K,ee,M)}return ee[e].exports}for(var x="function"==typeof require&&require,h=0;h<M.length;h++)o(M[h]);return o}({1:[function(G,K,ee){(function(M){(function(){"use strict";var o=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],x=typeof globalThis>"u"?M:globalThis;K.exports=function(){for(var h=[],e=0;e<o.length;e++)"function"==typeof x[o[e]]&&(h[h.length]=o[e]);return h}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(G,K,ee){"use strict";ee.byteLength=function(d){var a=n(d),y=a[0],l=a[1];return 3*(y+l)/4-l},ee.toByteArray=function(d){var a,y,v,l=n(d),f=l[0],c=l[1],E=new x(3*(f+(v=c))/4-v),_=0,O=c>0?f-4:f;for(y=0;y<O;y+=4)a=o[d.charCodeAt(y)]<<18|o[d.charCodeAt(y+1)]<<12|o[d.charCodeAt(y+2)]<<6|o[d.charCodeAt(y+3)],E[_++]=a>>16&255,E[_++]=a>>8&255,E[_++]=255&a;return 2===c&&(a=o[d.charCodeAt(y)]<<2|o[d.charCodeAt(y+1)]>>4,E[_++]=255&a),1===c&&(a=o[d.charCodeAt(y)]<<10|o[d.charCodeAt(y+1)]<<4|o[d.charCodeAt(y+2)]>>2,E[_++]=a>>8&255,E[_++]=255&a),E},ee.fromByteArray=function(d){for(var a,y=d.length,l=y%3,f=[],c=16383,E=0,_=y-l;E<_;E+=c)f.push(s(d,E,E+c>_?_:E+c));return 1===l?(a=d[y-1],f.push(M[a>>2]+M[a<<4&63]+"==")):2===l&&(a=(d[y-2]<<8)+d[y-1],f.push(M[a>>10]+M[a>>4&63]+M[a<<2&63]+"=")),f.join("")};for(var M=[],o=[],x=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)M[e]=h[e],o[h.charCodeAt(e)]=e;function n(d){var a=d.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=d.indexOf("=");return-1===y&&(y=a),[y,y===a?0:4-y%4]}function s(d,a,y){for(var l,f,c=[],E=a;E<y;E+=3)l=(d[E]<<16&16711680)+(d[E+1]<<8&65280)+(255&d[E+2]),c.push(M[(f=l)>>18&63]+M[f>>12&63]+M[f>>6&63]+M[63&f]);return c.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],3:[function(G,K,ee){},{}],4:[function(G,K,ee){arguments[4][3][0].apply(ee,arguments)},{dup:3}],5:[function(G,K,ee){(function(M){(function(){"use strict";var o=G("base64-js"),x=G("ieee754");ee.Buffer=r,ee.SlowBuffer=function(k){return+k!=k&&(k=0),r.alloc(+k)},ee.INSPECT_MAX_BYTES=50;var h=2147483647;function e(k){if(k>h)throw new RangeError('The value "'+k+'" is invalid for option "size"');var Q=new Uint8Array(k);return Q.__proto__=r.prototype,Q}function r(k,Q,z){if("number"==typeof k){if("string"==typeof Q)throw new TypeError('The "string" argument must be of type string. Received type number');return d(k)}return n(k,Q,z)}function n(k,Q,z){if("string"==typeof k)return function(ge,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!r.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var Oe=0|l(ge,Pe),Je=e(Oe),$e=Je.write(ge,Pe);return $e!==Oe&&(Je=Je.slice(0,$e)),Je}(k,Q);if(ArrayBuffer.isView(k))return a(k);if(null==k)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Qe(k,ArrayBuffer)||k&&Qe(k.buffer,ArrayBuffer))return function(ge,Pe,Oe){if(Pe<0||ge.byteLength<Pe)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<Pe+(Oe||0))throw new RangeError('"length" is outside of buffer bounds');var Je;return(Je=void 0===Pe&&void 0===Oe?new Uint8Array(ge):void 0===Oe?new Uint8Array(ge,Pe):new Uint8Array(ge,Pe,Oe)).__proto__=r.prototype,Je}(k,Q,z);if("number"==typeof k)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=k.valueOf&&k.valueOf();if(null!=he&&he!==k)return r.from(he,Q,z);var de=function(ge){if(r.isBuffer(ge)){var Pe=0|y(ge.length),Oe=e(Pe);return 0===Oe.length||ge.copy(Oe,0,0,Pe),Oe}return void 0!==ge.length?"number"!=typeof ge.length||te(ge.length)?e(0):a(ge):"Buffer"===ge.type&&Array.isArray(ge.data)?a(ge.data):void 0}(k);if(de)return de;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof k[Symbol.toPrimitive])return r.from(k[Symbol.toPrimitive]("string"),Q,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}function s(k){if("number"!=typeof k)throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function d(k){return s(k),e(k<0?0:0|y(k))}function a(k){for(var Q=k.length<0?0:0|y(k.length),z=e(Q),he=0;he<Q;he+=1)z[he]=255&k[he];return z}function y(k){if(k>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|k}function l(k,Q){if(r.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||Qe(k,ArrayBuffer))return k.byteLength;if("string"!=typeof k)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var z=k.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===z)return 0;for(var de=!1;;)switch(Q){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return ce(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return _e(k).length;default:if(de)return he?-1:ce(k).length;Q=(""+Q).toLowerCase(),de=!0}}function f(k,Q,z){var he=!1;if((void 0===Q||Q<0)&&(Q=0),Q>this.length||((void 0===z||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(Q>>>=0))return"";for(k||(k="utf8");;)switch(k){case"hex":return fe(this,Q,z);case"utf8":case"utf-8":return P(this,Q,z);case"ascii":return Y(this,Q,z);case"latin1":case"binary":return ie(this,Q,z);case"base64":return H(this,Q,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,Q,z);default:if(he)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),he=!0}}function c(k,Q,z){var he=k[Q];k[Q]=k[z],k[z]=he}function E(k,Q,z,he,de){if(0===k.length)return-1;if("string"==typeof z?(he=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),te(z=+z)&&(z=de?0:k.length-1),z<0&&(z=k.length+z),z>=k.length){if(de)return-1;z=k.length-1}else if(z<0){if(!de)return-1;z=0}if("string"==typeof Q&&(Q=r.from(Q,he)),r.isBuffer(Q))return 0===Q.length?-1:_(k,Q,z,he,de);if("number"==typeof Q)return Q&=255,"function"==typeof Uint8Array.prototype.indexOf?de?Uint8Array.prototype.indexOf.call(k,Q,z):Uint8Array.prototype.lastIndexOf.call(k,Q,z):_(k,[Q],z,he,de);throw new TypeError("val must be string, number or Buffer")}function _(k,Q,z,he,de){var ge,Pe=1,Oe=k.length,Je=Q.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if(k.length<2||Q.length<2)return-1;Pe=2,Oe/=2,Je/=2,z/=2}function $e(ke,Ce){return 1===Pe?ke[Ce]:ke.readUInt16BE(Ce*Pe)}if(de){var Ke=-1;for(ge=z;ge<Oe;ge++)if($e(k,ge)===$e(Q,-1===Ke?0:ge-Ke)){if(-1===Ke&&(Ke=ge),ge-Ke+1===Je)return Ke*Pe}else-1!==Ke&&(ge-=ge-Ke),Ke=-1}else for(z+Je>Oe&&(z=Oe-Je),ge=z;ge>=0;ge--){for(var ot=!0,be=0;be<Je;be++)if($e(k,ge+be)!==$e(Q,be)){ot=!1;break}if(ot)return ge}return-1}function O(k,Q,z,he){z=Number(z)||0;var de=k.length-z;he?(he=Number(he))>de&&(he=de):he=de;var ge=Q.length;he>ge/2&&(he=ge/2);for(var Pe=0;Pe<he;++Pe){var Oe=parseInt(Q.substr(2*Pe,2),16);if(te(Oe))return Pe;k[z+Pe]=Oe}return Pe}function R(k,Q,z,he){return Ne(ce(Q,k.length-z),k,z,he)}function A(k,Q,z,he){return Ne(function(de){for(var ge=[],Pe=0;Pe<de.length;++Pe)ge.push(255&de.charCodeAt(Pe));return ge}(Q),k,z,he)}function v(k,Q,z,he){return A(k,Q,z,he)}function F(k,Q,z,he){return Ne(_e(Q),k,z,he)}function j(k,Q,z,he){return Ne(function(de,ge){for(var Pe,Oe,Je,$e=[],Ke=0;Ke<de.length&&!((ge-=2)<0);++Ke)Oe=(Pe=de.charCodeAt(Ke))>>8,Je=Pe%256,$e.push(Je),$e.push(Oe);return $e}(Q,k.length-z),k,z,he)}function H(k,Q,z){return 0===Q&&z===k.length?o.fromByteArray(k):o.fromByteArray(k.slice(Q,z))}function P(k,Q,z){z=Math.min(k.length,z);for(var he=[],de=Q;de<z;){var ge,Pe,Oe,Je,$e=k[de],Ke=null,ot=$e>239?4:$e>223?3:$e>191?2:1;if(de+ot<=z)switch(ot){case 1:$e<128&&(Ke=$e);break;case 2:128==(192&(ge=k[de+1]))&&(Je=(31&$e)<<6|63&ge)>127&&(Ke=Je);break;case 3:ge=k[de+1],Pe=k[de+2],128==(192&ge)&&128==(192&Pe)&&(Je=(15&$e)<<12|(63&ge)<<6|63&Pe)>2047&&(Je<55296||Je>57343)&&(Ke=Je);break;case 4:ge=k[de+1],Pe=k[de+2],Oe=k[de+3],128==(192&ge)&&128==(192&Pe)&&128==(192&Oe)&&(Je=(15&$e)<<18|(63&ge)<<12|(63&Pe)<<6|63&Oe)>65535&&Je<1114112&&(Ke=Je)}null===Ke?(Ke=65533,ot=1):Ke>65535&&(Ke-=65536,he.push(Ke>>>10&1023|55296),Ke=56320|1023&Ke),he.push(Ke),de+=ot}return function(be){var ke=be.length;if(ke<=X)return String.fromCharCode.apply(String,be);for(var Ce="",q=0;q<ke;)Ce+=String.fromCharCode.apply(String,be.slice(q,q+=X));return Ce}(he)}ee.kMaxLength=h,r.TYPED_ARRAY_SUPPORT=function(){try{var k=new Uint8Array(1);return k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===k.foo()}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(k,Q,z){return n(k,Q,z)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(k,Q,z){return de=Q,ge=z,s(he=k),he<=0?e(he):void 0!==de?"string"==typeof ge?e(he).fill(de,ge):e(he).fill(de):e(he);var he,de,ge},r.allocUnsafe=function(k){return d(k)},r.allocUnsafeSlow=function(k){return d(k)},r.isBuffer=function(k){return null!=k&&!0===k._isBuffer&&k!==r.prototype},r.compare=function(k,Q){if(Qe(k,Uint8Array)&&(k=r.from(k,k.offset,k.byteLength)),Qe(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),!r.isBuffer(k)||!r.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===Q)return 0;for(var z=k.length,he=Q.length,de=0,ge=Math.min(z,he);de<ge;++de)if(k[de]!==Q[de]){z=k[de],he=Q[de];break}return z<he?-1:he<z?1:0},r.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(k,Q){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(0===k.length)return r.alloc(0);var z;if(void 0===Q)for(Q=0,z=0;z<k.length;++z)Q+=k[z].length;var he=r.allocUnsafe(Q),de=0;for(z=0;z<k.length;++z){var ge=k[z];if(Qe(ge,Uint8Array)&&(ge=r.from(ge)),!r.isBuffer(ge))throw new TypeError('"list" argument must be an Array of Buffers');ge.copy(he,de),de+=ge.length}return he},r.byteLength=l,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Q=0;Q<k;Q+=2)c(this,Q,Q+1);return this},r.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Q=0;Q<k;Q+=4)c(this,Q,Q+3),c(this,Q+1,Q+2);return this},r.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Q=0;Q<k;Q+=8)c(this,Q,Q+7),c(this,Q+1,Q+6),c(this,Q+2,Q+5),c(this,Q+3,Q+4);return this},r.prototype.toString=function(){var k=this.length;return 0===k?"":0===arguments.length?P(this,0,k):f.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(k){if(!r.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||0===r.compare(this,k)},r.prototype.inspect=function(){var k="",Q=ee.INSPECT_MAX_BYTES;return k=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(k+=" ... "),"<Buffer "+k+">"},r.prototype.compare=function(k,Q,z,he,de){if(Qe(k,Uint8Array)&&(k=r.from(k,k.offset,k.byteLength)),!r.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(void 0===Q&&(Q=0),void 0===z&&(z=k?k.length:0),void 0===he&&(he=0),void 0===de&&(de=this.length),Q<0||z>k.length||he<0||de>this.length)throw new RangeError("out of range index");if(he>=de&&Q>=z)return 0;if(he>=de)return-1;if(Q>=z)return 1;if(this===k)return 0;for(var ge=(de>>>=0)-(he>>>=0),Pe=(z>>>=0)-(Q>>>=0),Oe=Math.min(ge,Pe),Je=this.slice(he,de),$e=k.slice(Q,z),Ke=0;Ke<Oe;++Ke)if(Je[Ke]!==$e[Ke]){ge=Je[Ke],Pe=$e[Ke];break}return ge<Pe?-1:Pe<ge?1:0},r.prototype.includes=function(k,Q,z){return-1!==this.indexOf(k,Q,z)},r.prototype.indexOf=function(k,Q,z){return E(this,k,Q,z,!0)},r.prototype.lastIndexOf=function(k,Q,z){return E(this,k,Q,z,!1)},r.prototype.write=function(k,Q,z,he){if(void 0===Q)he="utf8",z=this.length,Q=0;else if(void 0===z&&"string"==typeof Q)he=Q,z=this.length,Q=0;else{if(!isFinite(Q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Q>>>=0,isFinite(z)?(z>>>=0,void 0===he&&(he="utf8")):(he=z,z=void 0)}var de=this.length-Q;if((void 0===z||z>de)&&(z=de),k.length>0&&(z<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var ge=!1;;)switch(he){case"hex":return O(this,k,Q,z);case"utf8":case"utf-8":return R(this,k,Q,z);case"ascii":return A(this,k,Q,z);case"latin1":case"binary":return v(this,k,Q,z);case"base64":return F(this,k,Q,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,k,Q,z);default:if(ge)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),ge=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function Y(k,Q,z){var he="";z=Math.min(k.length,z);for(var de=Q;de<z;++de)he+=String.fromCharCode(127&k[de]);return he}function ie(k,Q,z){var he="";z=Math.min(k.length,z);for(var de=Q;de<z;++de)he+=String.fromCharCode(k[de]);return he}function fe(k,Q,z){var he=k.length;(!Q||Q<0)&&(Q=0),(!z||z<0||z>he)&&(z=he);for(var de="",ge=Q;ge<z;++ge)de+=ve(k[ge]);return de}function oe(k,Q,z){for(var he=k.slice(Q,z),de="",ge=0;ge<he.length;ge+=2)de+=String.fromCharCode(he[ge]+256*he[ge+1]);return de}function le(k,Q,z){if(k%1!=0||k<0)throw new RangeError("offset is not uint");if(k+Q>z)throw new RangeError("Trying to access beyond buffer length")}function V(k,Q,z,he,de,ge){if(!r.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>de||Q<ge)throw new RangeError('"value" argument is out of bounds');if(z+he>k.length)throw new RangeError("Index out of range")}function $(k,Q,z,he,de,ge){if(z+he>k.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function ne(k,Q,z,he,de){return Q=+Q,z>>>=0,de||$(k,0,z,4),x.write(k,Q,z,he,23,4),z+4}function pe(k,Q,z,he,de){return Q=+Q,z>>>=0,de||$(k,0,z,8),x.write(k,Q,z,he,52,8),z+8}r.prototype.slice=function(k,Q){var z=this.length;(k=~~k)<0?(k+=z)<0&&(k=0):k>z&&(k=z),(Q=void 0===Q?z:~~Q)<0?(Q+=z)<0&&(Q=0):Q>z&&(Q=z),Q<k&&(Q=k);var he=this.subarray(k,Q);return he.__proto__=r.prototype,he},r.prototype.readUIntLE=function(k,Q,z){k>>>=0,Q>>>=0,z||le(k,Q,this.length);for(var he=this[k],de=1,ge=0;++ge<Q&&(de*=256);)he+=this[k+ge]*de;return he},r.prototype.readUIntBE=function(k,Q,z){k>>>=0,Q>>>=0,z||le(k,Q,this.length);for(var he=this[k+--Q],de=1;Q>0&&(de*=256);)he+=this[k+--Q]*de;return he},r.prototype.readUInt8=function(k,Q){return k>>>=0,Q||le(k,1,this.length),this[k]},r.prototype.readUInt16LE=function(k,Q){return k>>>=0,Q||le(k,2,this.length),this[k]|this[k+1]<<8},r.prototype.readUInt16BE=function(k,Q){return k>>>=0,Q||le(k,2,this.length),this[k]<<8|this[k+1]},r.prototype.readUInt32LE=function(k,Q){return k>>>=0,Q||le(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},r.prototype.readUInt32BE=function(k,Q){return k>>>=0,Q||le(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},r.prototype.readIntLE=function(k,Q,z){k>>>=0,Q>>>=0,z||le(k,Q,this.length);for(var he=this[k],de=1,ge=0;++ge<Q&&(de*=256);)he+=this[k+ge]*de;return he>=(de*=128)&&(he-=Math.pow(2,8*Q)),he},r.prototype.readIntBE=function(k,Q,z){k>>>=0,Q>>>=0,z||le(k,Q,this.length);for(var he=Q,de=1,ge=this[k+--he];he>0&&(de*=256);)ge+=this[k+--he]*de;return ge>=(de*=128)&&(ge-=Math.pow(2,8*Q)),ge},r.prototype.readInt8=function(k,Q){return k>>>=0,Q||le(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},r.prototype.readInt16LE=function(k,Q){k>>>=0,Q||le(k,2,this.length);var z=this[k]|this[k+1]<<8;return 32768&z?4294901760|z:z},r.prototype.readInt16BE=function(k,Q){k>>>=0,Q||le(k,2,this.length);var z=this[k+1]|this[k]<<8;return 32768&z?4294901760|z:z},r.prototype.readInt32LE=function(k,Q){return k>>>=0,Q||le(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},r.prototype.readInt32BE=function(k,Q){return k>>>=0,Q||le(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},r.prototype.readFloatLE=function(k,Q){return k>>>=0,Q||le(k,4,this.length),x.read(this,k,!0,23,4)},r.prototype.readFloatBE=function(k,Q){return k>>>=0,Q||le(k,4,this.length),x.read(this,k,!1,23,4)},r.prototype.readDoubleLE=function(k,Q){return k>>>=0,Q||le(k,8,this.length),x.read(this,k,!0,52,8)},r.prototype.readDoubleBE=function(k,Q){return k>>>=0,Q||le(k,8,this.length),x.read(this,k,!1,52,8)},r.prototype.writeUIntLE=function(k,Q,z,he){k=+k,Q>>>=0,z>>>=0,he||V(this,k,Q,z,Math.pow(2,8*z)-1,0);var de=1,ge=0;for(this[Q]=255&k;++ge<z&&(de*=256);)this[Q+ge]=k/de&255;return Q+z},r.prototype.writeUIntBE=function(k,Q,z,he){k=+k,Q>>>=0,z>>>=0,he||V(this,k,Q,z,Math.pow(2,8*z)-1,0);var de=z-1,ge=1;for(this[Q+de]=255&k;--de>=0&&(ge*=256);)this[Q+de]=k/ge&255;return Q+z},r.prototype.writeUInt8=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,1,255,0),this[Q]=255&k,Q+1},r.prototype.writeUInt16LE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,2,65535,0),this[Q]=255&k,this[Q+1]=k>>>8,Q+2},r.prototype.writeUInt16BE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,2,65535,0),this[Q]=k>>>8,this[Q+1]=255&k,Q+2},r.prototype.writeUInt32LE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,4,4294967295,0),this[Q+3]=k>>>24,this[Q+2]=k>>>16,this[Q+1]=k>>>8,this[Q]=255&k,Q+4},r.prototype.writeUInt32BE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,4,4294967295,0),this[Q]=k>>>24,this[Q+1]=k>>>16,this[Q+2]=k>>>8,this[Q+3]=255&k,Q+4},r.prototype.writeIntLE=function(k,Q,z,he){if(k=+k,Q>>>=0,!he){var de=Math.pow(2,8*z-1);V(this,k,Q,z,de-1,-de)}var ge=0,Pe=1,Oe=0;for(this[Q]=255&k;++ge<z&&(Pe*=256);)k<0&&0===Oe&&0!==this[Q+ge-1]&&(Oe=1),this[Q+ge]=(k/Pe>>0)-Oe&255;return Q+z},r.prototype.writeIntBE=function(k,Q,z,he){if(k=+k,Q>>>=0,!he){var de=Math.pow(2,8*z-1);V(this,k,Q,z,de-1,-de)}var ge=z-1,Pe=1,Oe=0;for(this[Q+ge]=255&k;--ge>=0&&(Pe*=256);)k<0&&0===Oe&&0!==this[Q+ge+1]&&(Oe=1),this[Q+ge]=(k/Pe>>0)-Oe&255;return Q+z},r.prototype.writeInt8=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,1,127,-128),k<0&&(k=255+k+1),this[Q]=255&k,Q+1},r.prototype.writeInt16LE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,2,32767,-32768),this[Q]=255&k,this[Q+1]=k>>>8,Q+2},r.prototype.writeInt16BE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,2,32767,-32768),this[Q]=k>>>8,this[Q+1]=255&k,Q+2},r.prototype.writeInt32LE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,4,2147483647,-2147483648),this[Q]=255&k,this[Q+1]=k>>>8,this[Q+2]=k>>>16,this[Q+3]=k>>>24,Q+4},r.prototype.writeInt32BE=function(k,Q,z){return k=+k,Q>>>=0,z||V(this,k,Q,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[Q]=k>>>24,this[Q+1]=k>>>16,this[Q+2]=k>>>8,this[Q+3]=255&k,Q+4},r.prototype.writeFloatLE=function(k,Q,z){return ne(this,k,Q,!0,z)},r.prototype.writeFloatBE=function(k,Q,z){return ne(this,k,Q,!1,z)},r.prototype.writeDoubleLE=function(k,Q,z){return pe(this,k,Q,!0,z)},r.prototype.writeDoubleBE=function(k,Q,z){return pe(this,k,Q,!1,z)},r.prototype.copy=function(k,Q,z,he){if(!r.isBuffer(k))throw new TypeError("argument should be a Buffer");if(z||(z=0),he||0===he||(he=this.length),Q>=k.length&&(Q=k.length),Q||(Q=0),he>0&&he<z&&(he=z),he===z||0===k.length||0===this.length)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),k.length-Q<he-z&&(he=k.length-Q+z);var de=he-z;if(this===k&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(Q,z,he);else if(this===k&&z<Q&&Q<he)for(var ge=de-1;ge>=0;--ge)k[ge+Q]=this[ge+z];else Uint8Array.prototype.set.call(k,this.subarray(z,he),Q);return de},r.prototype.fill=function(k,Q,z,he){if("string"==typeof k){if("string"==typeof Q?(he=Q,Q=0,z=this.length):"string"==typeof z&&(he=z,z=this.length),void 0!==he&&"string"!=typeof he)throw new TypeError("encoding must be a string");if("string"==typeof he&&!r.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(1===k.length){var de=k.charCodeAt(0);("utf8"===he&&de<128||"latin1"===he)&&(k=de)}}else"number"==typeof k&&(k&=255);if(Q<0||this.length<Q||this.length<z)throw new RangeError("Out of range index");if(z<=Q)return this;var ge;if(Q>>>=0,z=void 0===z?this.length:z>>>0,k||(k=0),"number"==typeof k)for(ge=Q;ge<z;++ge)this[ge]=k;else{var Pe=r.isBuffer(k)?k:r.from(k,he),Oe=Pe.length;if(0===Oe)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(ge=0;ge<z-Q;++ge)this[ge+Q]=Pe[ge%Oe]}return this};var Fe=/[^+/0-9A-Za-z-_]/g;function ve(k){return k<16?"0"+k.toString(16):k.toString(16)}function ce(k,Q){var z;Q=Q||1/0;for(var he=k.length,de=null,ge=[],Pe=0;Pe<he;++Pe){if((z=k.charCodeAt(Pe))>55295&&z<57344){if(!de){if(z>56319){(Q-=3)>-1&&ge.push(239,191,189);continue}if(Pe+1===he){(Q-=3)>-1&&ge.push(239,191,189);continue}de=z;continue}if(z<56320){(Q-=3)>-1&&ge.push(239,191,189),de=z;continue}z=65536+(de-55296<<10|z-56320)}else de&&(Q-=3)>-1&&ge.push(239,191,189);if(de=null,z<128){if((Q-=1)<0)break;ge.push(z)}else if(z<2048){if((Q-=2)<0)break;ge.push(z>>6|192,63&z|128)}else if(z<65536){if((Q-=3)<0)break;ge.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((Q-=4)<0)break;ge.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ge}function _e(k){return o.toByteArray(function(Q){if((Q=(Q=Q.split("=")[0]).trim().replace(Fe,"")).length<2)return"";for(;Q.length%4!=0;)Q+="=";return Q}(k))}function Ne(k,Q,z,he){for(var de=0;de<he&&!(de+z>=Q.length||de>=k.length);++de)Q[de+z]=k[de];return de}function Qe(k,Q){return k instanceof Q||null!=k&&null!=k.constructor&&null!=k.constructor.name&&k.constructor.name===Q.name}function te(k){return k!=k}}).call(this)}).call(this,G("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:21}],6:[function(G,K,ee){K.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],7:[function(G,K,ee){"use strict";var M=G("get-intrinsic"),o=G("./"),x=o(M("String.prototype.indexOf"));K.exports=function(h,e){var r=M(h,!!e);return"function"==typeof r&&x(h,".prototype.")>-1?o(r):r}},{"./":8,"get-intrinsic":15}],8:[function(G,K,ee){"use strict";var M=G("function-bind"),o=G("get-intrinsic"),x=o("%Function.prototype.apply%"),h=o("%Function.prototype.call%"),e=o("%Reflect.apply%",!0)||M.call(h,x),r=o("%Object.getOwnPropertyDescriptor%",!0),n=o("%Object.defineProperty%",!0),s=o("%Math.max%");if(n)try{n({},"a",{value:1})}catch{n=null}K.exports=function(a){var y=e(M,h,arguments);r&&n&&(r(y,"length").configurable&&n(y,"length",{value:1+s(0,a.length-(arguments.length-1))}));return y};var d=function(){return e(M,x,arguments)};n?n(K.exports,"apply",{value:d}):K.exports.apply=d},{"function-bind":14,"get-intrinsic":15}],9:[function(G,K,ee){"use strict";K.exports=function M(o){return null===o||"object"!=typeof o||null!=o.toJSON?JSON.stringify(o):Array.isArray(o)?"["+o.reduce((x,h,e)=>x+(0===e?"":",")+M(void 0===h||"symbol"==typeof h?null:h),"")+"]":"{"+Object.keys(o).sort().reduce((x,h,e)=>void 0===o[h]||"symbol"==typeof o[h]?x:x+(0===x.length?"":",")+M(h)+":"+M(o[h]),"")+"}"}},{}],10:[function(G,K,ee){"use strict";var M=G("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}K.exports=M},{"get-intrinsic":15}],11:[function(G,K,ee){"use strict";var M,o="object"==typeof Reflect?Reflect:null,x=o&&"function"==typeof o.apply?o.apply:function(_,O,R){return Function.prototype.apply.call(_,O,R)};M=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:function(_){return Object.getOwnPropertyNames(_)};var h=Number.isNaN||function(_){return _!=_};function e(){e.init.call(this)}K.exports=e,K.exports.once=function(_,O){return new Promise(function(R,A){function v(j){_.removeListener(O,F),A(j)}function F(){"function"==typeof _.removeListener&&_.removeListener("error",v),R([].slice.call(arguments))}var j,H;E(_,O,F,{once:!0}),"error"!==O&&(H=v,"function"==typeof(j=_).on&&E(j,"error",H,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function n(_){if("function"!=typeof _)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}function s(_){return void 0===_._maxListeners?e.defaultMaxListeners:_._maxListeners}function d(_,O,R,A){var v,F,j,H;if(n(R),void 0===(F=_._events)?(F=_._events=Object.create(null),_._eventsCount=0):(void 0!==F.newListener&&(_.emit("newListener",O,R.listener?R.listener:R),F=_._events),j=F[O]),void 0===j)j=F[O]=R,++_._eventsCount;else if("function"==typeof j?j=F[O]=A?[R,j]:[j,R]:A?j.unshift(R):j.push(R),(v=s(_))>0&&j.length>v&&!j.warned){j.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=_,P.type=O,P.count=j.length,H=P,console&&console.warn&&console.warn(H)}return _}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(_,O,R){var A={fired:!1,wrapFn:void 0,target:_,type:O,listener:R},v=a.bind(A);return v.listener=R,A.wrapFn=v,v}function l(_,O,R){var A=_._events;if(void 0===A)return[];var v=A[O];return void 0===v?[]:"function"==typeof v?R?[v.listener||v]:[v]:R?function(F){for(var j=new Array(F.length),H=0;H<j.length;++H)j[H]=F[H].listener||F[H];return j}(v):c(v,v.length)}function f(_){var O=this._events;if(void 0!==O){var R=O[_];if("function"==typeof R)return 1;if(void 0!==R)return R.length}return 0}function c(_,O){for(var R=new Array(O),A=0;A<O;++A)R[A]=_[A];return R}function E(_,O,R,A){if("function"==typeof _.on)A.once?_.once(O,R):_.on(O,R);else{if("function"!=typeof _.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _);_.addEventListener(O,function v(F){A.once&&_.removeEventListener(O,v),R(F)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(_){if("number"!=typeof _||_<0||h(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");r=_}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(_){if("number"!=typeof _||_<0||h(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},e.prototype.getMaxListeners=function(){return s(this)},e.prototype.emit=function(_){for(var O=[],R=1;R<arguments.length;R++)O.push(arguments[R]);var A="error"===_,v=this._events;if(void 0!==v)A=A&&void 0===v.error;else if(!A)return!1;if(A){var F;if(O.length>0&&(F=O[0]),F instanceof Error)throw F;var j=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw j.context=F,j}var H=v[_];if(void 0===H)return!1;if("function"==typeof H)x(H,this,O);else{var P=H.length,X=c(H,P);for(R=0;R<P;++R)x(X[R],this,O)}return!0},e.prototype.addListener=function(_,O){return d(this,_,O,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(_,O){return d(this,_,O,!0)},e.prototype.once=function(_,O){return n(O),this.on(_,y(this,_,O)),this},e.prototype.prependOnceListener=function(_,O){return n(O),this.prependListener(_,y(this,_,O)),this},e.prototype.removeListener=function(_,O){var R,A,v,F,j;if(n(O),void 0===(A=this._events))return this;if(void 0===(R=A[_]))return this;if(R===O||R.listener===O)0==--this._eventsCount?this._events=Object.create(null):(delete A[_],A.removeListener&&this.emit("removeListener",_,R.listener||O));else if("function"!=typeof R){for(v=-1,F=R.length-1;F>=0;F--)if(R[F]===O||R[F].listener===O){j=R[F].listener,v=F;break}if(v<0)return this;0===v?R.shift():function(H,P){for(;P+1<H.length;P++)H[P]=H[P+1];H.pop()}(R,v),1===R.length&&(A[_]=R[0]),void 0!==A.removeListener&&this.emit("removeListener",_,j||O)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(_){var O,R,A;if(void 0===(R=this._events))return this;if(void 0===R.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==R[_]&&(0==--this._eventsCount?this._events=Object.create(null):delete R[_]),this;if(0===arguments.length){var v,F=Object.keys(R);for(A=0;A<F.length;++A)"removeListener"!==(v=F[A])&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(O=R[_]))this.removeListener(_,O);else if(void 0!==O)for(A=O.length-1;A>=0;A--)this.removeListener(_,O[A]);return this},e.prototype.listeners=function(_){return l(this,_,!0)},e.prototype.rawListeners=function(_){return l(this,_,!1)},e.listenerCount=function(_,O){return"function"==typeof _.listenerCount?_.listenerCount(O):f.call(_,O)},e.prototype.listenerCount=f,e.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},{}],12:[function(G,K,ee){"use strict";var M=G("is-callable"),o=Object.prototype.toString,x=Object.prototype.hasOwnProperty;K.exports=function(n,s,d){if(!M(s))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=d),"[object Array]"===o.call(n)?function(n,s,d){for(var a=0,y=n.length;a<y;a++)x.call(n,a)&&(null==d?s(n[a],a,n):s.call(d,n[a],a,n))}(n,s,a):"string"==typeof n?function(n,s,d){for(var a=0,y=n.length;a<y;a++)null==d?s(n.charAt(a),a,n):s.call(d,n.charAt(a),a,n)}(n,s,a):function(n,s,d){for(var a in n)x.call(n,a)&&(null==d?s(n[a],a,n):s.call(d,n[a],a,n))}(n,s,a)}},{"is-callable":24}],13:[function(G,K,ee){"use strict";var o=Array.prototype.slice,x=Object.prototype.toString;K.exports=function(e){var r=this;if("function"!=typeof r||"[object Function]"!==x.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n,s=o.call(arguments,1),a=Math.max(0,r.length-s.length),y=[],l=0;l<a;l++)y.push("$"+l);if(n=Function("binder","return function ("+y.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var c=r.apply(this,s.concat(o.call(arguments)));return Object(c)===c?c:this}return r.apply(e,s.concat(o.call(arguments)))}),r.prototype){var f=function(){};f.prototype=r.prototype,n.prototype=new f,f.prototype=null}return n}},{}],14:[function(G,K,ee){"use strict";var M=G("./implementation");K.exports=Function.prototype.bind||M},{"./implementation":13}],15:[function(G,K,ee){"use strict";var M,o=SyntaxError,x=Function,h=TypeError,e=function(ie){try{return x('"use strict"; return ('+ie+").constructor;")()}catch{}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch{r=null}var n=function(){throw new h},s=r?function(){try{return n}catch{try{return r(arguments,"callee").get}catch{return n}}}():n,d=G("has-symbols")(),a=Object.getPrototypeOf||function(ie){return ie.__proto__},y={},l=typeof Uint8Array>"u"?M:a(Uint8Array),f={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":d?a([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":y,"%AsyncGenerator%":y,"%AsyncGeneratorFunction%":y,"%AsyncIteratorPrototype%":y,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":y,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?a(a([][Symbol.iterator]())):M,"%JSON%":"object"==typeof JSON?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&d?a((new Map)[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&d?a((new Set)[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?a(""[Symbol.iterator]()):M,"%Symbol%":d?Symbol:M,"%SyntaxError%":o,"%ThrowTypeError%":s,"%TypedArray%":l,"%TypeError%":h,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet},c=function ie(fe){var oe;if("%AsyncFunction%"===fe)oe=e("async function () {}");else if("%GeneratorFunction%"===fe)oe=e("function* () {}");else if("%AsyncGeneratorFunction%"===fe)oe=e("async function* () {}");else if("%AsyncGenerator%"===fe){var le=ie("%AsyncGeneratorFunction%");le&&(oe=le.prototype)}else if("%AsyncIteratorPrototype%"===fe){var V=ie("%AsyncGenerator%");V&&(oe=a(V.prototype))}return f[fe]=oe,oe},E={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=G("function-bind"),O=G("has"),R=_.call(Function.call,Array.prototype.concat),A=_.call(Function.apply,Array.prototype.splice),v=_.call(Function.call,String.prototype.replace),F=_.call(Function.call,String.prototype.slice),j=_.call(Function.call,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,Y=function(ie,fe){var oe,le=ie;if(O(E,le)&&(le="%"+(oe=E[le])[0]+"%"),O(f,le)){var V=f[le];if(V===y&&(V=c(le)),void 0===V&&!fe)throw new h("intrinsic "+ie+" exists, but is not available. Please file an issue!");return{alias:oe,name:le,value:V}}throw new o("intrinsic "+ie+" does not exist!")};K.exports=function(ie,fe){if("string"!=typeof ie||0===ie.length)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof fe)throw new h('"allowMissing" argument must be a boolean');if(null===j(/^%?[^%]*%?$/g,ie))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var oe=function(ie){var fe=F(ie,0,1),oe=F(ie,-1);if("%"===fe&&"%"!==oe)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===oe&&"%"!==fe)throw new o("invalid intrinsic syntax, expected opening `%`");var le=[];return v(ie,H,function(V,$,ne,pe){le[le.length]=ne?v(pe,P,"$1"):$||V}),le}(ie),le=oe.length>0?oe[0]:"",V=Y("%"+le+"%",fe),$=V.name,ne=V.value,pe=!1,Fe=V.alias;Fe&&(le=Fe[0],A(oe,R([0,1],Fe)));for(var ve=1,ce=!0;ve<oe.length;ve+=1){var _e=oe[ve],Ne=F(_e,0,1),Qe=F(_e,-1);if(('"'===Ne||"'"===Ne||"`"===Ne||'"'===Qe||"'"===Qe||"`"===Qe)&&Ne!==Qe)throw new o("property names with quotes must have matching quotes");if("constructor"!==_e&&ce||(pe=!0),O(f,$="%"+(le+="."+_e)+"%"))ne=f[$];else if(null!=ne){if(!(_e in ne)){if(!fe)throw new h("base intrinsic for "+ie+" exists, but the property is not available.");return}if(r&&ve+1>=oe.length){var te=r(ne,_e);ne=(ce=!!te)&&"get"in te&&!("originalValue"in te.get)?te.get:ne[_e]}else ce=O(ne,_e),ne=ne[_e];ce&&!pe&&(f[$]=ne)}}return ne}},{"function-bind":14,has:19,"has-symbols":16}],16:[function(G,K,ee){"use strict";var M=typeof Symbol<"u"&&Symbol,o=G("./shams");K.exports=function(){return"function"==typeof M&&"function"==typeof Symbol&&"symbol"==typeof M("foo")&&"symbol"==typeof Symbol("bar")&&o()}},{"./shams":17}],17:[function(G,K,ee){"use strict";K.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var M={},o=Symbol("test"),x=Object(o);if("string"==typeof o||"[object Symbol]"!==Object.prototype.toString.call(o)||"[object Symbol]"!==Object.prototype.toString.call(x))return!1;for(o in M[o]=42,M)return!1;if("function"==typeof Object.keys&&0!==Object.keys(M).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(M).length)return!1;var h=Object.getOwnPropertySymbols(M);if(1!==h.length||h[0]!==o||!Object.prototype.propertyIsEnumerable.call(M,o))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(M,o);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],18:[function(G,K,ee){"use strict";var M=G("has-symbols/shams");K.exports=function(){return M()&&!!Symbol.toStringTag}},{"has-symbols/shams":17}],19:[function(G,K,ee){"use strict";var M=G("function-bind");K.exports=M.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":14}],20:[function(G,K,ee){var M=G("http"),o=G("url"),x=K.exports;for(var h in M)M.hasOwnProperty(h)&&(x[h]=M[h]);function e(r){if("string"==typeof r&&(r=o.parse(r)),r.protocol||(r.protocol="https:"),"https:"!==r.protocol)throw new Error('Protocol "'+r.protocol+'" not supported. Expected "https:"');return r}x.request=function(r,n){return r=e(r),M.request.call(this,r,n)},x.get=function(r,n){return r=e(r),M.get.call(this,r,n)}},{http:91,url:112}],21:[function(G,K,ee){ee.read=function(M,o,x,h,e){var r,n,s=8*e-h-1,d=(1<<s)-1,a=d>>1,y=-7,l=x?e-1:0,f=x?-1:1,c=M[o+l];for(l+=f,r=c&(1<<-y)-1,c>>=-y,y+=s;y>0;r=256*r+M[o+l],l+=f,y-=8);for(n=r&(1<<-y)-1,r>>=-y,y+=h;y>0;n=256*n+M[o+l],l+=f,y-=8);if(0===r)r=1-a;else{if(r===d)return n?NaN:1/0*(c?-1:1);n+=Math.pow(2,h),r-=a}return(c?-1:1)*n*Math.pow(2,r-h)},ee.write=function(M,o,x,h,e,r){var n,s,d,a=8*r-e-1,y=(1<<a)-1,l=y>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=h?0:r-1,E=h?1:-1,_=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,n=y):(n=Math.floor(Math.log(o)/Math.LN2),o*(d=Math.pow(2,-n))<1&&(n--,d*=2),(o+=n+l>=1?f/d:f*Math.pow(2,1-l))*d>=2&&(n++,d/=2),n+l>=y?(s=0,n=y):n+l>=1?(s=(o*d-1)*Math.pow(2,e),n+=l):(s=o*Math.pow(2,l-1)*Math.pow(2,e),n=0));e>=8;M[x+c]=255&s,c+=E,s/=256,e-=8);for(n=n<<e|s,a+=e;a>0;M[x+c]=255&n,c+=E,n/=256,a-=8);M[x+c-E]|=128*_}},{}],22:[function(G,K,ee){"function"==typeof Object.create?K.exports=function(M,o){o&&(M.super_=o,M.prototype=Object.create(o.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}))}:K.exports=function(M,o){if(o){M.super_=o;var x=function(){};x.prototype=o.prototype,M.prototype=new x,M.prototype.constructor=M}}},{}],23:[function(G,K,ee){"use strict";var M=G("has-tostringtag/shams")(),o=G("call-bind/callBound")("Object.prototype.toString"),x=function(r){return!(M&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===o(r)},h=function(r){return!!x(r)||null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Array]"!==o(r)&&"[object Function]"===o(r.callee)},e=function(){return x(arguments)}();x.isLegacyArguments=h,K.exports=e?x:h},{"call-bind/callBound":7,"has-tostringtag/shams":18}],24:[function(G,K,ee){"use strict";var M,o,x=Function.prototype.toString,h="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof h&&"function"==typeof Object.defineProperty)try{M=Object.defineProperty({},"length",{get:function(){throw o}}),o={},h(function(){throw 42},null,M)}catch(a){a!==o&&(h=null)}else h=null;var e=/^\s*class\b/,r=function(a){try{var y=x.call(a);return e.test(y)}catch{return!1}},n=Object.prototype.toString,s="function"==typeof Symbol&&!!Symbol.toStringTag,d="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};K.exports=h?function(a){if(a===d)return!0;if(!a||"function"!=typeof a&&"object"!=typeof a)return!1;if("function"==typeof a&&!a.prototype)return!0;try{h(a,null,M)}catch(y){if(y!==o)return!1}return!r(a)}:function(a){if(a===d)return!0;if(!a||"function"!=typeof a&&"object"!=typeof a)return!1;if("function"==typeof a&&!a.prototype)return!0;if(s)return function(l){try{return!r(l)&&(x.call(l),!0)}catch{return!1}}(a);if(r(a))return!1;var y=n.call(a);return"[object Function]"===y||"[object GeneratorFunction]"===y}},{}],25:[function(G,K,ee){"use strict";var M,o=Object.prototype.toString,x=Function.prototype.toString,h=/^\s*(?:function)?\*/,e=G("has-tostringtag/shams")(),r=Object.getPrototypeOf;K.exports=function(n){if("function"!=typeof n)return!1;if(h.test(x.call(n)))return!0;if(!e)return"[object GeneratorFunction]"===o.call(n);if(!r)return!1;if(void 0===M){var s=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!s&&r(s)}return r(n)===M}},{"has-tostringtag/shams":18}],26:[function(G,K,ee){(function(M){(function(){"use strict";var o=G("for-each"),x=G("available-typed-arrays"),h=G("call-bind/callBound"),e=h("Object.prototype.toString"),r=G("has-tostringtag/shams")(),n=typeof globalThis>"u"?M:globalThis,s=x(),d=h("Array.prototype.indexOf",!0)||function(c,E){for(var _=0;_<c.length;_+=1)if(c[_]===E)return _;return-1},a=h("String.prototype.slice"),y={},l=G("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;r&&l&&f&&o(s,function(c){var E=new n[c];if(Symbol.toStringTag in E){var _=f(E),O=l(_,Symbol.toStringTag);if(!O){var R=f(_);O=l(R,Symbol.toStringTag)}y[c]=O.get}}),K.exports=function(c){if(!c||"object"!=typeof c)return!1;if(!r||!(Symbol.toStringTag in c)){var E=a(e(c),8,-1);return d(s,E)>-1}return!!l&&(_=c,O=!1,o(y,function(R,A){if(!O)try{O=R.call(_)===A}catch{}}),O);var _,O}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18}],27:[function(G,K,ee){"use strict";const{isArray:M,isObject:o,isString:x}=G("./types"),{asArray:h}=G("./util"),{prependBase:e}=G("./url"),r=G("./JsonLdError"),n=G("./ResolvedContext");function s(a){throw new r("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:a})}function d({context:a,base:y}){if(!a)return;const l=a["@context"];if(x(l))a["@context"]=e(y,l);else if(M(l))for(let f=0;f<l.length;++f){const c=l[f];x(c)?l[f]=e(y,c):o(c)&&d({context:{"@context":c},base:y})}else if(o(l))for(const f in l)d({context:l[f],base:y})}K.exports=class{constructor({sharedCache:a}){this.perOpCache=new Map,this.sharedCache=a}async resolve({activeCtx:a,context:y,documentLoader:l,base:f,cycles:c=new Set}){y&&o(y)&&y["@context"]&&(y=y["@context"]),y=h(y);const E=[];for(const _ of y){if(x(_)){let A=this._get(_);A||(A=await this._resolveRemoteContext({activeCtx:a,url:_,documentLoader:l,base:f,cycles:c})),M(A)?E.push(...A):E.push(A);continue}if(null===_){E.push(new n({document:null}));continue}o(_)||s(y);const O=JSON.stringify(_);let R=this._get(O);R||(R=new n({document:_}),this._cacheResolvedContext({key:O,resolved:R,tag:"static"})),E.push(R)}return E}_get(a){let y=this.perOpCache.get(a);if(!y){const l=this.sharedCache.get(a);l&&(y=l.get("static"),y&&this.perOpCache.set(a,y))}return y}_cacheResolvedContext({key:a,resolved:y,tag:l}){if(this.perOpCache.set(a,y),void 0!==l){let f=this.sharedCache.get(a);f||(f=new Map,this.sharedCache.set(a,f)),f.set(l,y)}return y}async _resolveRemoteContext({activeCtx:a,url:y,documentLoader:l,base:f,cycles:c}){y=e(f,y);const{context:E,remoteDoc:_}=await this._fetchContext({activeCtx:a,url:y,documentLoader:l,cycles:c});d({context:E,base:f=_.documentUrl||y});const O=await this.resolve({activeCtx:a,context:E,documentLoader:l,base:f,cycles:c});return this._cacheResolvedContext({key:y,resolved:O,tag:_.tag}),O}async _fetchContext({activeCtx:a,url:y,documentLoader:l,cycles:f}){if(f.size>10)throw new r("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===a.processingMode?"loading remote context failed":"context overflow",max:10});if(f.has(y))throw new r("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===a.processingMode?"recursive context inclusion":"context overflow",url:y});let c,E;f.add(y);try{E=await l(y),c=E.document||null,x(c)&&(c=JSON.parse(c))}catch(_){throw new r("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:y,cause:_})}if(!o(c))throw new r("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:y});return c="@context"in c?{"@context":c["@context"]}:{"@context":{}},E.contextUrl&&(M(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(E.contextUrl)),{context:c,remoteDoc:E}}}},{"./JsonLdError":28,"./ResolvedContext":32,"./types":47,"./url":48,"./util":49}],28:[function(G,K,ee){"use strict";K.exports=class extends Error{constructor(M="An unspecified JSON-LD error occurred.",o="jsonld.Error",x={}){super(M),this.name=o,this.message=M,this.details=x}}},{}],29:[function(G,K,ee){"use strict";K.exports=M=>{class o{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(o,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(o.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:o}),o.compact=function(x,h){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):M.compact(x,h)},o.expand=function(x){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):M.expand(x)},o.flatten=function(x){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):M.flatten(x)},o}},{}],30:[function(G,K,ee){"use strict";K.exports=G("rdf-canonize").NQuads},{"rdf-canonize":64}],31:[function(G,K,ee){"use strict";K.exports=class{constructor(){this._requests={}}wrapLoader(M){const o=this;return o._loader=M,function(){return o.add.apply(o,arguments)}}async add(M){let o=this._requests[M];if(o)return Promise.resolve(o);o=this._requests[M]=this._loader(M);try{return await o}finally{delete this._requests[M]}}}},{}],32:[function(G,K,ee){"use strict";const M=G("lru-cache");K.exports=class{constructor({document:o}){this.document=o,this.cache=new M({max:10})}getProcessed(o){return this.cache.get(o)}setProcessed(o,x){this.cache.set(o,x)}}},{"lru-cache":50}],33:[function(G,K,ee){"use strict";const M=G("./JsonLdError"),{isArray:o,isObject:x,isString:h,isUndefined:e}=G("./types"),{isList:r,isValue:n,isGraph:s,isSimpleGraph:d,isSubjectReference:a}=G("./graphTypes"),{expandIri:y,getContextValue:l,isKeyword:f,process:c,processingMode:E}=G("./context"),{removeBase:_,prependBase:O}=G("./url"),{REGEX_KEYWORD:R,addValue:A,asArray:v,compareShortestLeast:F}=G("./util"),j={};function H(P,X,Y){if("@nest"!==y(P,X,{vocab:!0},Y))throw new M("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}K.exports=j,j.compact=async({activeCtx:P,activeProperty:X=null,element:Y,options:ie={}})=>{if(o(Y)){let oe=[];for(let le=0;le<Y.length;++le){const V=await j.compact({activeCtx:P,activeProperty:X,element:Y[le],options:ie});null!==V&&oe.push(V)}return ie.compactArrays&&1===oe.length&&0===(l(P,X,"@container")||[]).length&&(oe=oe[0]),oe}const fe=l(P,X,"@context");if(e(fe)||(P=await c({activeCtx:P,localCtx:fe,propagate:!0,overrideProtected:!0,options:ie})),x(Y)){if(ie.link&&"@id"in Y&&ie.link.hasOwnProperty(Y["@id"])){const ve=ie.link[Y["@id"]];for(let ce=0;ce<ve.length;++ce)if(ve[ce].expanded===Y)return ve[ce].compacted}if(n(Y)||a(Y)){const ve=j.compactValue({activeCtx:P,activeProperty:X,value:Y,options:ie});return ie.link&&a(Y)&&(ie.link.hasOwnProperty(Y["@id"])||(ie.link[Y["@id"]]=[]),ie.link[Y["@id"]].push({expanded:Y,compacted:ve})),ve}if(r(Y)&&(l(P,X,"@container")||[]).includes("@list"))return j.compact({activeCtx:P,activeProperty:X,element:Y["@list"],options:ie});const oe="@reverse"===X,le={},V=P;n(Y)||a(Y)||(P=P.revertToPreviousContext());const $=l(V,X,"@context");e($)||(P=await c({activeCtx:P,localCtx:$,propagate:!0,overrideProtected:!0,options:ie})),ie.link&&"@id"in Y&&(ie.link.hasOwnProperty(Y["@id"])||(ie.link[Y["@id"]]=[]),ie.link[Y["@id"]].push({expanded:Y,compacted:le}));let ne=Y["@type"]||[];ne.length>1&&(ne=Array.from(ne).sort());const pe=P;for(const ve of ne){const ce=j.compactIri({activeCtx:pe,iri:ve,relativeTo:{vocab:!0}}),_e=l(V,ce,"@context");e(_e)||(P=await c({activeCtx:P,localCtx:_e,options:ie,propagate:!1}))}const Fe=Object.keys(Y).sort();for(const ve of Fe){const ce=Y[ve];if("@id"!==ve)if("@type"!==ve)if("@reverse"!==ve)if("@preserve"!==ve)if("@index"!==ve)if("@graph"!==ve&&"@list"!==ve&&"@included"!==ve&&f(ve)){const _e=j.compactIri({activeCtx:P,iri:ve,relativeTo:{vocab:!0}});A(le,_e,ce)}else{if(!o(ce))throw new M("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ce.length){const _e=j.compactIri({activeCtx:P,iri:ve,value:ce,relativeTo:{vocab:!0},reverse:oe}),Ne=P.mappings.has(_e)?P.mappings.get(_e)["@nest"]:null;let Qe=le;Ne&&(H(P,Ne,ie),x(le[Ne])||(le[Ne]={}),Qe=le[Ne]),A(Qe,_e,ce,{propertyIsArray:!0})}for(const _e of ce){const Ne=j.compactIri({activeCtx:P,iri:ve,value:_e,relativeTo:{vocab:!0},reverse:oe}),Qe=P.mappings.has(Ne)?P.mappings.get(Ne)["@nest"]:null;let te=le;Qe&&(H(P,Qe,ie),x(le[Qe])||(le[Qe]={}),te=le[Qe]);const k=l(P,Ne,"@container")||[],Q=s(_e),z=r(_e);let he;z?he=_e["@list"]:Q&&(he=_e["@graph"]);let de=await j.compact({activeCtx:P,activeProperty:Ne,element:z||Q?he:_e,options:ie});if(z){if(o(de)||(de=[de]),k.includes("@list")){A(te,Ne,de,{valueIsArray:!0,allowDuplicate:!0});continue}de={[j.compactIri({activeCtx:P,iri:"@list",relativeTo:{vocab:!0}})]:de},"@index"in _e&&(de[j.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=_e["@index"])}if(Q)if(k.includes("@graph")&&(k.includes("@id")||k.includes("@index")&&d(_e))){let ge;te.hasOwnProperty(Ne)?ge=te[Ne]:te[Ne]=ge={};const Pe=(k.includes("@id")?_e["@id"]:_e["@index"])||j.compactIri({activeCtx:P,iri:"@none",relativeTo:{vocab:!0}});A(ge,Pe,de,{propertyIsArray:!ie.compactArrays||k.includes("@set")})}else k.includes("@graph")&&d(_e)?(o(de)&&de.length>1&&(de={"@included":de}),A(te,Ne,de,{propertyIsArray:!ie.compactArrays||k.includes("@set")})):(o(de)&&1===de.length&&ie.compactArrays&&(de=de[0]),de={[j.compactIri({activeCtx:P,iri:"@graph",relativeTo:{vocab:!0}})]:de},"@id"in _e&&(de[j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]=_e["@id"]),"@index"in _e&&(de[j.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=_e["@index"]),A(te,Ne,de,{propertyIsArray:!ie.compactArrays||k.includes("@set")}));else if(k.includes("@language")||k.includes("@index")||k.includes("@id")||k.includes("@type")){let ge,Pe;if(te.hasOwnProperty(Ne)?ge=te[Ne]:te[Ne]=ge={},k.includes("@language"))n(de)&&(de=de["@value"]),Pe=_e["@language"];else if(k.includes("@index")){const Oe=l(P,Ne,"@index")||"@index",Je=j.compactIri({activeCtx:P,iri:Oe,relativeTo:{vocab:!0}});if("@index"===Oe)Pe=_e["@index"],delete de[Je];else{let $e;if([Pe,...$e]=v(de[Oe]||[]),h(Pe))switch($e.length){case 0:delete de[Oe];break;case 1:de[Oe]=$e[0];break;default:de[Oe]=$e}else Pe=null}}else if(k.includes("@id")){const Oe=j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}});Pe=de[Oe],delete de[Oe]}else if(k.includes("@type")){const Oe=j.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}});let Je;switch([Pe,...Je]=v(de[Oe]||[]),Je.length){case 0:delete de[Oe];break;case 1:de[Oe]=Je[0];break;default:de[Oe]=Je}1===Object.keys(de).length&&"@id"in _e&&(de=await j.compact({activeCtx:P,activeProperty:Ne,element:{"@id":_e["@id"]},options:ie}))}Pe||(Pe=j.compactIri({activeCtx:P,iri:"@none",relativeTo:{vocab:!0}})),A(ge,Pe,de,{propertyIsArray:k.includes("@set")})}else{const ge=!ie.compactArrays||k.includes("@set")||k.includes("@list")||o(de)&&0===de.length||"@list"===ve||"@graph"===ve;A(te,Ne,de,{propertyIsArray:ge})}}}else{if((l(P,X,"@container")||[]).includes("@index"))continue;const _e=j.compactIri({activeCtx:P,iri:ve,relativeTo:{vocab:!0}});A(le,_e,ce)}else{const _e=await j.compact({activeCtx:P,activeProperty:X,element:ce,options:ie});o(_e)&&0===_e.length||A(le,ve,_e)}else{const _e=await j.compact({activeCtx:P,activeProperty:"@reverse",element:ce,options:ie});for(const Ne in _e)if(P.mappings.has(Ne)&&P.mappings.get(Ne).reverse){const Qe=_e[Ne],te=(l(P,Ne,"@container")||[]).includes("@set")||!ie.compactArrays;A(le,Ne,Qe,{propertyIsArray:te}),delete _e[Ne]}if(Object.keys(_e).length>0){const Ne=j.compactIri({activeCtx:P,iri:ve,relativeTo:{vocab:!0}});A(le,Ne,_e)}}else{let _e=v(ce).map(te=>j.compactIri({activeCtx:V,iri:te,relativeTo:{vocab:!0}}));1===_e.length&&(_e=_e[0]);const Ne=j.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}}),Qe=(l(P,Ne,"@container")||[]).includes("@set")&&E(P,1.1)||o(_e)&&0===ce.length;A(le,Ne,_e,{propertyIsArray:Qe})}else{let _e=v(ce).map(Ne=>j.compactIri({activeCtx:P,iri:Ne,relativeTo:{vocab:!1},base:ie.base}));1===_e.length&&(_e=_e[0]),le[j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]=_e}}return le}return Y},j.compactIri=({activeCtx:P,iri:X,value:Y=null,relativeTo:ie={vocab:!1},reverse:fe=!1,base:oe=null})=>{if(null===X)return X;P.isPropertyTermScoped&&P.previousContext&&(P=P.previousContext);const le=P.getInverse();if(f(X)&&X in le&&"@none"in le[X]&&"@type"in le[X]["@none"]&&"@none"in le[X]["@none"]["@type"])return le[X]["@none"]["@type"]["@none"];if(ie.vocab&&X in le){const Fe=P["@language"]||"@none",ve=[];x(Y)&&"@index"in Y&&!("@graph"in Y)&&ve.push("@index","@index@set"),x(Y)&&"@preserve"in Y&&(Y=Y["@preserve"][0]),s(Y)?("@index"in Y&&ve.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Y&&ve.push("@graph@id","@graph@id@set"),ve.push("@graph","@graph@set","@set"),"@index"in Y||ve.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Y||ve.push("@graph@id","@graph@id@set")):x(Y)&&!n(Y)&&ve.push("@id","@id@set","@type","@set@type");let ce="@language",_e="@null";if(fe)ce="@type",_e="@reverse",ve.push("@set");else if(r(Y)){"@index"in Y||ve.push("@list");const Qe=Y["@list"];if(0===Qe.length)ce="@any",_e="@none";else{let te=0===Qe.length?Fe:null,k=null;for(let Q=0;Q<Qe.length;++Q){const z=Qe[Q];let he="@none",de="@none";if(n(z)?"@direction"in z?he=`${(z["@language"]||"").toLowerCase()}_${z["@direction"]}`:"@language"in z?he=z["@language"].toLowerCase():"@type"in z?de=z["@type"]:he="@null":de="@id",null===te?te=he:he!==te&&n(z)&&(te="@none"),null===k?k=de:de!==k&&(k="@none"),"@none"===te&&"@none"===k)break}te=te||"@none",k=k||"@none","@none"!==k?(ce="@type",_e=k):_e=te}}else{if(n(Y))if("@language"in Y&&!("@index"in Y)){ve.push("@language","@language@set"),_e=Y["@language"];const Qe=Y["@direction"];Qe&&(_e=`${_e}_${Qe}`)}else"@direction"in Y&&!("@index"in Y)?_e=`_${Y["@direction"]}`:"@type"in Y&&(ce="@type",_e=Y["@type"]);else ce="@type",_e="@id";ve.push("@set")}ve.push("@none"),x(Y)&&!("@index"in Y)&&ve.push("@index","@index@set"),n(Y)&&1===Object.keys(Y).length&&ve.push("@language","@language@set");const Ne=function(Qe,te,k,Q,z,he){null===he&&(he="@null");const de=[];if(("@id"===he||"@reverse"===he)&&x(k)&&"@id"in k){"@reverse"===he&&de.push("@reverse");const Pe=j.compactIri({activeCtx:Qe,iri:k["@id"],relativeTo:{vocab:!0}});Qe.mappings.has(Pe)&&Qe.mappings.get(Pe)&&Qe.mappings.get(Pe)["@id"]===k["@id"]?de.push.apply(de,["@vocab","@id"]):de.push.apply(de,["@id","@vocab"])}else{de.push(he);const Pe=de.find(Oe=>Oe.includes("_"));Pe&&de.push(Pe.replace(/^[^_]+_/,"_"))}de.push("@none");const ge=Qe.inverse[te];for(const Pe of Q){if(!(Pe in ge))continue;const Oe=ge[Pe][z];for(const Je of de)if(Je in Oe)return Oe[Je]}return null}(P,X,Y,ve,ce,_e);if(null!==Ne)return Ne}if(ie.vocab&&"@vocab"in P){const Fe=P["@vocab"];if(0===X.indexOf(Fe)&&X!==Fe){const ve=X.substr(Fe.length);if(!P.mappings.has(ve))return ve}}let V=null;const $=[];let ne=P.fastCurieMap;const pe=X.length-1;for(let Fe=0;Fe<pe&&X[Fe]in ne;++Fe)ne=ne[X[Fe]],""in ne&&$.push(ne[""][0]);for(let Fe=$.length-1;Fe>=0;--Fe){const ve=$[Fe],ce=ve.terms;for(const _e of ce){const Ne=_e+":"+X.substr(ve.iri.length);P.mappings.get(_e)._prefix&&(!P.mappings.has(Ne)||null===Y&&P.mappings.get(Ne)["@id"]===X)&&(null===V||F(Ne,V)<0)&&(V=Ne)}}if(null!==V)return V;for(const[Fe,ve]of P.mappings)if(ve&&ve._prefix&&X.startsWith(Fe+":"))throw new M(`Absolute IRI "${X}" confused with prefix "${Fe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:P});if(!ie.vocab){if("@base"in P){if(P["@base"]){const Fe=_(O(oe,P["@base"]),X);return R.test(Fe)?`./${Fe}`:Fe}return X}return _(oe,X)}return X},j.compactValue=({activeCtx:P,activeProperty:X,value:Y,options:ie})=>{if(n(Y)){const V=l(P,X,"@type"),$=l(P,X,"@language"),ne=l(P,X,"@direction"),pe=l(P,X,"@container")||[],Fe="@index"in Y&&!pe.includes("@index");if(!Fe&&"@none"!==V&&(Y["@type"]===V||"@language"in Y&&Y["@language"]===$&&"@direction"in Y&&Y["@direction"]===ne||"@language"in Y&&Y["@language"]===$||"@direction"in Y&&Y["@direction"]===ne))return Y["@value"];const ve=Object.keys(Y).length,ce=1===ve||2===ve&&"@index"in Y&&!Fe,_e="@language"in P,Ne=h(Y["@value"]),Qe=P.mappings.has(X)&&null===P.mappings.get(X)["@language"];if(ce&&"@none"!==V&&(!_e||!Ne||Qe))return Y["@value"];const te={};return Fe&&(te[j.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=Y["@index"]),"@type"in Y?te[j.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}})]=j.compactIri({activeCtx:P,iri:Y["@type"],relativeTo:{vocab:!0}}):"@language"in Y&&(te[j.compactIri({activeCtx:P,iri:"@language",relativeTo:{vocab:!0}})]=Y["@language"]),"@direction"in Y&&(te[j.compactIri({activeCtx:P,iri:"@direction",relativeTo:{vocab:!0}})]=Y["@direction"]),te[j.compactIri({activeCtx:P,iri:"@value",relativeTo:{vocab:!0}})]=Y["@value"],te}const fe=y(P,X,{vocab:!0},ie),oe=l(P,X,"@type"),le=j.compactIri({activeCtx:P,iri:Y["@id"],relativeTo:{vocab:"@vocab"===oe},base:ie.base});return"@id"===oe||"@vocab"===oe||"@graph"===fe?le:{[j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]:le}}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],34:[function(G,K,ee){"use strict";const M="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o="http://www.w3.org/2001/XMLSchema#";K.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:M,RDF_LIST:M+"List",RDF_FIRST:M+"first",RDF_REST:M+"rest",RDF_NIL:M+"nil",RDF_TYPE:M+"type",RDF_PLAIN_LITERAL:M+"PlainLiteral",RDF_XML_LITERAL:M+"XMLLiteral",RDF_JSON_LITERAL:M+"JSON",RDF_OBJECT:M+"object",RDF_LANGSTRING:M+"langString",XSD:o,XSD_BOOLEAN:o+"boolean",XSD_DOUBLE:o+"double",XSD_INTEGER:o+"integer",XSD_STRING:o+"string"}},{}],35:[function(G,K,ee){"use strict";const M=G("./util"),o=G("./JsonLdError"),{isArray:x,isObject:h,isString:e,isUndefined:r}=G("./types"),{isAbsolute:n,isRelative:s,prependBase:d}=G("./url"),{handleEvent:a}=G("./events"),{REGEX_BCP47:y,REGEX_KEYWORD:l,asArray:f,compareShortestLeast:c}=G("./util"),E=new Map,_={};function O(A,v,F,j,H,P){if(null===v||!e(v)||_.isKeyword(v))return v;if(v.match(l))return null;if(j&&j.hasOwnProperty(v)&&!0!==H.get(v)&&_.createTermDefinition({activeCtx:A,localCtx:j,term:v,defined:H,options:P}),(F=F||{}).vocab){const Y=A.mappings.get(v);if(null===Y)return null;if(h(Y)&&"@id"in Y)return Y["@id"]}const X=v.indexOf(":");if(X>0){const Y=v.substr(0,X),ie=v.substr(X+1);if("_"===Y||0===ie.indexOf("//"))return v;j&&j.hasOwnProperty(Y)&&_.createTermDefinition({activeCtx:A,localCtx:j,term:Y,defined:H,options:P});const fe=A.mappings.get(Y);if(fe&&fe._prefix)return fe["@id"]+ie;if(n(v))return v}if(F.vocab&&"@vocab"in A)v=A["@vocab"]+v;else if(F.base){let Y,ie;"@base"in A?A["@base"]?(ie=d(P.base,A["@base"]),Y=d(ie,v)):(ie=A["@base"],Y=v):(ie=P.base,Y=d(P.base,v)),v=Y}return v}function R(A,v){if(!A||"object"!=typeof A||!v||"object"!=typeof v)return A===v;const F=Array.isArray(A);if(F!==Array.isArray(v))return!1;if(F){if(A.length!==v.length)return!1;for(let P=0;P<A.length;++P)if(!R(A[P],v[P]))return!1;return!0}const j=Object.keys(A),H=Object.keys(v);if(j.length!==H.length)return!1;for(const P in A){let X=A[P],Y=v[P];if("@container"===P&&Array.isArray(X)&&Array.isArray(Y)&&(X=X.slice().sort(),Y=Y.slice().sort()),!R(X,Y))return!1}return!0}K.exports=_,_.process=async({activeCtx:A,localCtx:v,options:F,propagate:j=!0,overrideProtected:H=!1,cycles:P=new Set})=>{if(h(v)&&"@context"in v&&x(v["@context"])&&(v=v["@context"]),0===f(v).length)return A;const X=[],Y=[({event:le,next:V})=>{X.push(le),V()}];F.eventHandler&&Y.push(F.eventHandler);const ie=F;F={...F,eventHandler:Y};const fe=await F.contextResolver.resolve({activeCtx:A,context:v,documentLoader:F.documentLoader,base:F.base});h(fe[0].document)&&"boolean"==typeof fe[0].document["@propagate"]&&(j=fe[0].document["@propagate"]);let oe=A;j||oe.previousContext||(oe=oe.clone(),oe.previousContext=A);for(const le of fe){let{document:V}=le;if(A=oe,null===V){if(!H&&0!==Object.keys(A.protected).length)throw new o("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});oe=A=_.getInitialContext(F).clone();continue}const $=le.getProcessed(A);if($){if(ie.eventHandler)for(const pe of $.events)a({event:pe,options:ie});oe=A=$.context;continue}if(h(V)&&"@context"in V&&(V=V["@context"]),!h(V))throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:V});oe=oe.clone();const ne=new Map;if("@version"in V){if(1.1!==V["@version"])throw new o("Unsupported JSON-LD version: "+V["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:V});if(A.processingMode&&"json-ld-1.0"===A.processingMode)throw new o("@version: "+V["@version"]+" not compatible with "+A.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:V});oe.processingMode="json-ld-1.1",oe["@version"]=V["@version"],ne.set("@version",!0)}if(oe.processingMode=oe.processingMode||A.processingMode,"@base"in V){let pe=V["@base"];if(null!==pe&&!n(pe)){if(!s(pe))throw new o('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:V});pe=d(oe["@base"],pe)}oe["@base"]=pe,ne.set("@base",!0)}if("@vocab"in V){const pe=V["@vocab"];if(null===pe)delete oe["@vocab"];else{if(!e(pe))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:V});if(!n(pe)&&_.processingMode(oe,1))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:V});{const Fe=O(oe,pe,{vocab:!0,base:!0},void 0,void 0,F);n(Fe)||F.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Fe}},options:F}),oe["@vocab"]=Fe}}ne.set("@vocab",!0)}if("@language"in V){const pe=V["@language"];if(null===pe)delete oe["@language"];else{if(!e(pe))throw new o('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:V});pe.match(y)||F.eventHandler&&a({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:pe}},options:F}),oe["@language"]=pe.toLowerCase()}ne.set("@language",!0)}if("@direction"in V){const pe=V["@direction"];if("json-ld-1.0"===A.processingMode)throw new o("Invalid JSON-LD syntax; @direction not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:V});if(null===pe)delete oe["@direction"];else{if("ltr"!==pe&&"rtl"!==pe)throw new o('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:V});oe["@direction"]=pe}ne.set("@direction",!0)}if("@propagate"in V){const pe=V["@propagate"];if("json-ld-1.0"===A.processingMode)throw new o("Invalid JSON-LD syntax; @propagate not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:V});if("boolean"!=typeof pe)throw new o("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:v});ne.set("@propagate",!0)}if("@import"in V){const pe=V["@import"];if("json-ld-1.0"===A.processingMode)throw new o("Invalid JSON-LD syntax; @import not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:V});if(!e(pe))throw new o("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:v});const Fe=await F.contextResolver.resolve({activeCtx:A,context:pe,documentLoader:F.documentLoader,base:F.base});if(1!==Fe.length)throw new o("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:v});const ve=Fe[0].getProcessed(A);if(ve)V=ve;else{const ce=Fe[0].document;if("@import"in ce)throw new o("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:v});for(const _e in ce)V.hasOwnProperty(_e)||(V[_e]=ce[_e]);Fe[0].setProcessed(A,V)}ne.set("@import",!0)}ne.set("@protected",V["@protected"]||!1);for(const pe in V)if(_.createTermDefinition({activeCtx:oe,localCtx:V,term:pe,defined:ne,options:F,overrideProtected:H}),h(V[pe])&&"@context"in V[pe]){const Fe=V[pe]["@context"];let ve=!0;if(e(Fe)){const ce=d(F.base,Fe);P.has(ce)?ve=!1:P.add(ce)}if(ve)try{await _.process({activeCtx:oe.clone(),localCtx:V[pe]["@context"],overrideProtected:!0,options:F,cycles:P})}catch{throw new o("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:V[pe]["@context"],term:pe})}}le.setProcessed(A,{context:oe,events:X})}return oe},_.createTermDefinition=({activeCtx:A,localCtx:v,term:F,defined:j,options:H,overrideProtected:P=!1})=>{if(j.has(F)){if(j.get(F))return;throw new o("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:v,term:F})}let X;if(j.set(F,!1),v.hasOwnProperty(F)&&(X=v[F]),"@type"===F&&h(X)&&"@set"===(X["@container"]||"@set")&&_.processingMode(A,1.1)){const $=["@container","@id","@protected"],ne=Object.keys(X);if(0===ne.length||ne.some(pe=>!$.includes(pe)))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:v,term:F})}else{if(_.isKeyword(F))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:v,term:F});if(F.match(l))return void(H.eventHandler&&a({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:F}},options:H}));if(""===F)throw new o("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:v})}const Y=A.mappings.get(F);A.mappings.has(F)&&A.mappings.delete(F);let ie=!1;if((e(X)||null===X)&&(ie=!0,X={"@id":X}),!h(X))throw new o("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:v});const fe={};A.mappings.set(F,fe),fe.reverse=!1;const oe=["@container","@id","@language","@reverse","@type"];_.processingMode(A,1.1)&&oe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const $ in X)if(!oe.includes($))throw new o("Invalid JSON-LD syntax; a term definition must not contain "+$,"jsonld.SyntaxError",{code:"invalid term definition",context:v});const le=F.indexOf(":");if(fe._termHasColon=le>0,"@reverse"in X){if("@id"in X)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:v});if("@nest"in X)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:v});const $=X["@reverse"];if(!e($))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:v});if($.match(l))return H.eventHandler&&a({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:$}},options:H}),void(Y?A.mappings.set(F,Y):A.mappings.delete(F));const ne=O(A,$,{vocab:!0,base:!1},v,j,H);if(!n(ne))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:v});fe["@id"]=ne,fe.reverse=!0}else if("@id"in X){let $=X["@id"];if($&&!e($))throw new o("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:v});if(null===$)fe["@id"]=null;else{if(!_.isKeyword($)&&$.match(l))return H.eventHandler&&a({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:$}},options:H}),void(Y?A.mappings.set(F,Y):A.mappings.delete(F));if($!==F){if($=O(A,$,{vocab:!0,base:!1},v,j,H),!n($)&&!_.isKeyword($))throw new o("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:v});if(F.match(/(?::[^:])|\//)&&O(A,F,{vocab:!0,base:!1},v,new Map(j).set(F,!0),H)!==$)throw new o("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:v});fe["@id"]=$,fe._prefix=ie&&!fe._termHasColon&&$.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in fe))if(fe._termHasColon){const $=F.substr(0,le);if(v.hasOwnProperty($)&&_.createTermDefinition({activeCtx:A,localCtx:v,term:$,defined:j,options:H}),A.mappings.has($)){const ne=F.substr(le+1);fe["@id"]=A.mappings.get($)["@id"]+ne}else fe["@id"]=F}else if("@type"===F)fe["@id"]=F;else{if(!("@vocab"in A))throw new o("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:v,term:F});fe["@id"]=A["@vocab"]+F}if((!0===X["@protected"]||!0===j.get("@protected")&&!1!==X["@protected"])&&(A.protected[F]=!0,fe.protected=!0),j.set(F,!0),"@type"in X){let $=X["@type"];if(!e($))throw new o("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:v});if("@json"===$||"@none"===$){if(_.processingMode(A,1))throw new o(`Invalid JSON-LD syntax; an @context @type value must not be "${$}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:v})}else if("@id"!==$&&"@vocab"!==$){if($=O(A,$,{vocab:!0,base:!1},v,j,H),!n($))throw new o("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:v});if(0===$.indexOf("_:"))throw new o("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:v})}fe["@type"]=$}if("@container"in X){const $=e(X["@container"])?[X["@container"]]:X["@container"]||[],ne=["@list","@set","@index","@language"];let pe=!0;const Fe=$.includes("@set");if(_.processingMode(A,1.1)){if(ne.push("@graph","@id","@type"),$.includes("@list")){if(1!==$.length)throw new o("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:v})}else if($.includes("@graph")){if($.some(ve=>"@graph"!==ve&&"@id"!==ve&&"@index"!==ve&&"@set"!==ve))throw new o("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:v})}else pe&=$.length<=(Fe?2:1);if($.includes("@type")&&(fe["@type"]=fe["@type"]||"@id",!["@id","@vocab"].includes(fe["@type"])))throw new o("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:v})}else pe&=!x(X["@container"]),pe&=$.length<=1;if(pe&=$.every(ve=>ne.includes(ve)),pe&=!(Fe&&$.includes("@list")),!pe)throw new o("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ne.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:v});if(fe.reverse&&!$.every(ve=>["@index","@set"].includes(ve)))throw new o("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:v});fe["@container"]=$}if("@index"in X){if(!("@container"in X)||!fe["@container"].includes("@index"))throw new o(`Invalid JSON-LD syntax; @index without @index in @container: "${X["@index"]}" on term "${F}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:v});if(!e(X["@index"])||0===X["@index"].indexOf("@"))throw new o(`Invalid JSON-LD syntax; @index must expand to an IRI: "${X["@index"]}" on term "${F}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:v});fe["@index"]=X["@index"]}if("@context"in X&&(fe["@context"]=X["@context"]),"@language"in X&&!("@type"in X)){let $=X["@language"];if(null!==$&&!e($))throw new o("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:v});null!==$&&($=$.toLowerCase()),fe["@language"]=$}if("@prefix"in X){if(F.match(/:|\//))throw new o("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:v});if(_.isKeyword(fe["@id"]))throw new o("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:v});if("boolean"!=typeof X["@prefix"])throw new o("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:v});fe._prefix=!0===X["@prefix"]}if("@direction"in X){const $=X["@direction"];if(null!==$&&"ltr"!==$&&"rtl"!==$)throw new o('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:v});fe["@direction"]=$}if("@nest"in X){const $=X["@nest"];if(!e($)||"@nest"!==$&&0===$.indexOf("@"))throw new o("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:v});fe["@nest"]=$}const V=fe["@id"];if("@context"===V||"@preserve"===V)throw new o("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:v});if(Y&&Y.protected&&!P&&(A.protected[F]=!0,fe.protected=!0,!R(Y,fe)))throw new o("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:v,term:F})},_.expandIri=(A,v,F,j)=>O(A,v,F,void 0,void 0,j),_.getInitialContext=A=>{const v=JSON.stringify({processingMode:A.processingMode}),F=E.get(v);if(F)return F;const j={processingMode:A.processingMode,mappings:new Map,inverse:null,getInverse:function(){const X=this;if(X.inverse)return X.inverse;const Y=X.inverse={},ie=X.fastCurieMap={},fe={},oe=(X["@language"]||"@none").toLowerCase(),le=X["@direction"],V=X.mappings,$=[...V.keys()].sort(c);for(const ne of $){const pe=V.get(ne);if(null===pe)continue;let Fe=pe["@container"]||"@none";if(Fe=[].concat(Fe).sort().join(""),null===pe["@id"])continue;const ve=f(pe["@id"]);for(const ce of ve){let _e=Y[ce];const Ne=_.isKeyword(ce);if(_e)Ne||pe._termHasColon||fe[ce].push(ne);else if(Y[ce]=_e={},!Ne&&!pe._termHasColon){fe[ce]=[ne];const Qe={iri:ce,terms:fe[ce]};ce[0]in ie?ie[ce[0]].push(Qe):ie[ce[0]]=[Qe]}if(_e[Fe]||(_e[Fe]={"@language":{},"@type":{},"@any":{}}),_e=_e[Fe],P(ne,_e["@any"],"@none"),pe.reverse)P(ne,_e["@type"],"@reverse");else if("@none"===pe["@type"])P(ne,_e["@any"],"@none"),P(ne,_e["@language"],"@none"),P(ne,_e["@type"],"@none");else if("@type"in pe)P(ne,_e["@type"],pe["@type"]);else if("@language"in pe&&"@direction"in pe){const Qe=pe["@language"],te=pe["@direction"];P(ne,_e["@language"],Qe&&te?`${Qe}_${te}`.toLowerCase():Qe?Qe.toLowerCase():te?`_${te}`:"@null")}else"@language"in pe?P(ne,_e["@language"],(pe["@language"]||"@null").toLowerCase()):"@direction"in pe?pe["@direction"]?P(ne,_e["@language"],`_${pe["@direction"]}`):P(ne,_e["@language"],"@none"):le?(P(ne,_e["@language"],`_${le}`),P(ne,_e["@language"],"@none"),P(ne,_e["@type"],"@none")):(P(ne,_e["@language"],oe),P(ne,_e["@language"],"@none"),P(ne,_e["@type"],"@none"))}}for(const ne in ie)H(ie,ne,1);return Y},clone:function(){const X={};return X.mappings=M.clone(this.mappings),X.clone=this.clone,X.inverse=null,X.getInverse=this.getInverse,X.protected=M.clone(this.protected),this.previousContext&&(X.previousContext=this.previousContext.clone()),X.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(X["@base"]=this["@base"]),"@language"in this&&(X["@language"]=this["@language"]),"@vocab"in this&&(X["@vocab"]=this["@vocab"]),X},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===E.size&&E.clear(),E.set(v,j),j;function H(X,Y,ie){const fe=X[Y],oe=X[Y]={};let le,V;for(const $ of fe)le=$.iri,V=ie>=le.length?"":le[ie],V in oe?oe[V].push($):oe[V]=[$];for(const $ in oe)""!==$&&H(oe,$,ie+1)}function P(X,Y,ie){Y.hasOwnProperty(ie)||(Y[ie]=X)}},_.getContextValue=(A,v,F)=>{if(null===v)return"@context"===F?void 0:null;if(A.mappings.has(v)){const j=A.mappings.get(v);if(r(F))return j;if(j.hasOwnProperty(F))return j[F]}return"@language"===F&&F in A||"@direction"===F&&F in A?A[F]:"@context"!==F?null:void 0},_.processingMode=(A,v)=>v.toString()>="1.1"?!A.processingMode||A.processingMode>="json-ld-"+v.toString():"json-ld-1.0"===A.processingMode,_.isKeyword=A=>{if(!e(A)||"@"!==A[0])return!1;switch(A){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":28,"./events":37,"./types":47,"./url":48,"./util":49}],36:[function(G,K,ee){"use strict";const{parseLinkHeader:M,buildHeaders:o}=G("../util"),{LINK_HEADER_CONTEXT:x}=G("../constants"),h=G("../JsonLdError"),e=G("../RequestQueue"),{prependBase:r}=G("../url"),n=/(^|(\r\n))link:/i;K.exports=({secure:s,headers:d={},xhr:a}={headers:{}})=>(d=o(d),(new e).wrapLoader(async function y(l){if(0!==l.indexOf("http:")&&0!==l.indexOf("https:"))throw new h('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:l});if(s&&0!==l.indexOf("https"))throw new h('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:l});let f;try{f=await function(R,A,v){const F=new(R=R||XMLHttpRequest);return new Promise((j,H)=>{F.onload=()=>j(F),F.onerror=P=>H(P),F.open("GET",A,!0);for(const P in v)F.setRequestHeader(P,v[P]);F.send()})}(a,l,d)}catch(R){throw new h("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:l,cause:R})}if(f.status>=400)throw new h("URL could not be dereferenced: "+f.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:l,httpStatusCode:f.status});let c={contextUrl:null,documentUrl:l,document:f.response},E=null;const _=f.getResponseHeader("Content-Type");let O;if(n.test(f.getAllResponseHeaders())&&(O=f.getResponseHeader("Link")),O&&"application/ld+json"!==_){const R=M(O),A=R[x];if(Array.isArray(A))throw new h("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:l});A&&(c.contextUrl=A.target),E=R.alternate,E&&"application/ld+json"==E.type&&!(_||"").match(/^application\/(\w*\+)?json$/)&&(c=await y(r(l,E.target)))}return c}))},{"../JsonLdError":28,"../RequestQueue":31,"../constants":34,"../url":48,"../util":49}],37:[function(G,K,ee){"use strict";const M=G("./JsonLdError"),{isArray:o}=G("./types"),{asArray:x}=G("./util"),h={};function e({event:n,handlers:s}){let d=!0;for(let a=0;d&&a<s.length;++a){d=!1;const y=s[a];if(o(y))d=e({event:n,handlers:y});else if("function"==typeof y)y({event:n,next:()=>{d=!0}});else{if("object"!=typeof y)throw new M("Invalid event handler.","jsonld.InvalidEventHandler",{event:n});n.code in y?y[n.code]({event:n,next:()=>{d=!0}}):d=!0}}return d}K.exports=h,h.defaultEventHandler=null,h.setupEventHandler=({options:n={}})=>{const s=[].concat(n.safe?h.safeEventHandler:[],n.eventHandler?x(n.eventHandler):[],h.defaultEventHandler?h.defaultEventHandler:[]);return 0===s.length?null:s},h.handleEvent=({event:n,options:s})=>{e({event:n,handlers:s.eventHandler})};const r=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);h.safeEventHandler=function({event:n,next:s}){if("warning"===n.level&&r.has(n.code))throw new M("Safe mode validation error.","jsonld.ValidationError",{event:n});s()},h.logEventHandler=function({event:n,next:s}){console.log(`EVENT: ${n.message}`,{event:n}),s()},h.logWarningEventHandler=function({event:n,next:s}){"warning"===n.level&&console.warn(`WARNING: ${n.message}`,{event:n}),s()},h.unhandledEventHandler=function({event:n}){throw new M("No handler for event.","jsonld.UnhandledEvent",{event:n})},h.setDefaultEventHandler=function({eventHandler:n}={}){h.defaultEventHandler=n?x(n):null}},{"./JsonLdError":28,"./types":47,"./util":49}],38:[function(G,K,ee){"use strict";const M=G("./JsonLdError"),{isArray:o,isObject:x,isEmptyObject:h,isString:e,isUndefined:r}=G("./types"),{isList:n,isValue:s,isGraph:d,isSubject:a}=G("./graphTypes"),{expandIri:y,getContextValue:l,isKeyword:f,process:c,processingMode:E}=G("./context"),{isAbsolute:_}=G("./url"),{REGEX_BCP47:O,REGEX_KEYWORD:R,addValue:A,asArray:v,getValues:F,validateTypeValue:j}=G("./util"),{handleEvent:H}=G("./events"),P={};async function X({activeCtx:oe,activeProperty:le,expandedActiveProperty:V,element:$,expandedParent:ne,options:pe={},insideList:Fe,typeKey:ve,typeScopedContext:ce}){const _e=Object.keys($).sort(),Ne=[];let Qe;const te=$[ve]&&"@json"===y(oe,o($[ve])?$[ve][0]:$[ve],{vocab:!0},{...pe,typeExpansion:!0});for(const k of _e){let Q,z=$[k];if("@context"===k)continue;const he=y(oe,k,{vocab:!0},pe);if(null===he||!_(he)&&!f(he)){pe.eventHandler&&H({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:k,expandedProperty:he}},options:pe});continue}if(f(he)){if("@reverse"===V)throw new M("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:z});if(he in ne&&"@included"!==he&&"@type"!==he)throw new M("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:he})}if("@id"===he){if(!e(z)){if(!pe.isFrame)throw new M('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:z});if(x(z)){if(!h(z))throw new M('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:z})}else{if(!o(z))throw new M('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:z});if(!z.every(Oe=>e(Oe)))throw new M('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:z})}}A(ne,"@id",v(z).map(Oe=>{if(e(Oe)){const Je=y(oe,Oe,{base:!0},pe);return pe.eventHandler&&(null===Je?H(null===Oe?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:Oe}},options:pe}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Oe}},options:pe}):_(Je)||H({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:Oe,expandedId:Je}},options:pe})),Je}return Oe}),{propertyIsArray:pe.isFrame});continue}if("@type"===he){x(z)&&(z=Object.fromEntries(Object.entries(z).map(([Oe,Je])=>[y(ce,Oe,{vocab:!0}),v(Je).map($e=>y(ce,$e,{base:!0,vocab:!0},{...pe,typeExpansion:!0}))]))),j(z,pe.isFrame),A(ne,"@type",v(z).map(Oe=>{if(e(Oe)){const Je=y(ce,Oe,{base:!0,vocab:!0},{...pe,typeExpansion:!0});return"@json"===Je||_(Je)||pe.eventHandler&&H({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:Oe}},options:pe}),Je}return Oe}),{propertyIsArray:pe.isFrame});continue}if("@included"===he&&E(oe,1.1)){const Oe=v(await P.expand({activeCtx:oe,activeProperty:le,element:z,options:pe}));if(!Oe.every(Je=>a(Je)))throw new M("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:z});A(ne,"@included",Oe,{propertyIsArray:!0});continue}if("@graph"===he&&!x(z)&&!o(z))throw new M('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:z});if("@value"===he){Qe=z,te&&E(oe,1.1)?ne["@value"]=z:A(ne,"@value",z,{propertyIsArray:pe.isFrame});continue}if("@language"===he){if(null===z)continue;if(!e(z)&&!pe.isFrame)throw new M('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:z});z=v(z).map(Oe=>e(Oe)?Oe.toLowerCase():Oe);for(const Oe of z)e(Oe)&&!Oe.match(O)&&pe.eventHandler&&H({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Oe}},options:pe});A(ne,"@language",z,{propertyIsArray:pe.isFrame});continue}if("@direction"===he){if(!e(z)&&!pe.isFrame)throw new M('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:z});z=v(z);for(const Oe of z)if(e(Oe)&&"ltr"!==Oe&&"rtl"!==Oe)throw new M('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:z});A(ne,"@direction",z,{propertyIsArray:pe.isFrame});continue}if("@index"===he){if(!e(z))throw new M('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:z});A(ne,"@index",z);continue}if("@reverse"===he){if(!x(z))throw new M('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:z});if(Q=await P.expand({activeCtx:oe,activeProperty:"@reverse",element:z,options:pe}),"@reverse"in Q)for(const Je in Q["@reverse"])A(ne,Je,Q["@reverse"][Je],{propertyIsArray:!0});let Oe=ne["@reverse"]||null;for(const Je in Q){if("@reverse"===Je)continue;null===Oe&&(Oe=ne["@reverse"]={}),A(Oe,Je,[],{propertyIsArray:!0});const $e=Q[Je];for(let Ke=0;Ke<$e.length;++Ke){const ot=$e[Ke];if(s(ot)||n(ot))throw new M('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Q});A(Oe,Je,ot,{propertyIsArray:!0})}}continue}if("@nest"===he){Ne.push(k);continue}let de=oe;const ge=l(oe,k,"@context");r(ge)||(de=await c({activeCtx:oe,localCtx:ge,propagate:!0,overrideProtected:!0,options:pe}));const Pe=l(de,k,"@container")||[];if(Pe.includes("@language")&&x(z))Q=ie(de,z,l(de,k,"@direction"),pe);else if(Pe.includes("@index")&&x(z)){const Oe=Pe.includes("@graph"),Je=l(de,k,"@index")||"@index",$e="@index"!==Je&&y(oe,Je,{vocab:!0},pe);Q=await fe({activeCtx:de,options:pe,activeProperty:k,value:z,asGraph:Oe,indexKey:Je,propertyIndex:$e})}else if(Pe.includes("@id")&&x(z)){const Oe=Pe.includes("@graph");Q=await fe({activeCtx:de,options:pe,activeProperty:k,value:z,asGraph:Oe,indexKey:"@id"})}else if(Pe.includes("@type")&&x(z))Q=await fe({activeCtx:de.revertToPreviousContext(),options:pe,activeProperty:k,value:z,asGraph:!1,indexKey:"@type"});else{const Oe="@list"===he;if(Oe||"@set"===he){let Je=le;Oe&&"@graph"===V&&(Je=null),Q=await P.expand({activeCtx:de,activeProperty:Je,element:z,options:pe,insideList:Oe})}else Q="@json"===l(oe,k,"@type")?{"@type":"@json","@value":z}:await P.expand({activeCtx:de,activeProperty:k,element:z,options:pe,insideList:!1})}if(null!==Q||"@value"===he)if("@list"!==he&&!n(Q)&&Pe.includes("@list")&&(Q={"@list":v(Q)}),Pe.includes("@graph")&&!Pe.some(Oe=>"@id"===Oe||"@index"===Oe)&&(Q=v(Q).map(Oe=>({"@graph":v(Oe)}))),de.mappings.has(k)&&de.mappings.get(k).reverse){const Oe=ne["@reverse"]=ne["@reverse"]||{};Q=v(Q);for(let Je=0;Je<Q.length;++Je){const $e=Q[Je];if(s($e)||n($e))throw new M('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Q});A(Oe,he,$e,{propertyIsArray:!0})}}else A(ne,he,Q,{propertyIsArray:!0})}if("@value"in ne&&("@json"!==ne["@type"]||!E(oe,1.1))&&(x(Qe)||o(Qe))&&!pe.isFrame)throw new M('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Qe});for(const k of Ne){const Q=o($[k])?$[k]:[$[k]];for(const z of Q){if(!x(z)||Object.keys(z).some(he=>"@value"===y(oe,he,{vocab:!0},pe)))throw new M("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:z});await X({activeCtx:oe,activeProperty:le,expandedActiveProperty:V,element:z,expandedParent:ne,options:pe,insideList:Fe,typeScopedContext:ce,typeKey:ve})}}}function Y({activeCtx:oe,activeProperty:le,value:V,options:$}){if(null==V)return null;const ne=y(oe,le,{vocab:!0},$);if("@id"===ne)return y(oe,V,{base:!0},$);if("@type"===ne)return y(oe,V,{vocab:!0,base:!0},{...$,typeExpansion:!0});const pe=l(oe,le,"@type");if(("@id"===pe||"@graph"===ne)&&e(V)){const ve=y(oe,V,{base:!0},$);return null===ve&&V.match(R)&&$.eventHandler&&H({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:le}},options:$}),{"@id":ve}}if("@vocab"===pe&&e(V))return{"@id":y(oe,V,{vocab:!0,base:!0},$)};if(f(ne))return V;const Fe={};if(pe&&!["@id","@vocab","@none"].includes(pe))Fe["@type"]=pe;else if(e(V)){const ve=l(oe,le,"@language");null!==ve&&(Fe["@language"]=ve);const ce=l(oe,le,"@direction");null!==ce&&(Fe["@direction"]=ce)}return["boolean","number","string"].includes(typeof V)||(V=V.toString()),Fe["@value"]=V,Fe}function ie(oe,le,V,$){const ne=[],pe=Object.keys(le).sort();for(const Fe of pe){const ve=y(oe,Fe,{vocab:!0},$);let ce=le[Fe];o(ce)||(ce=[ce]);for(const _e of ce){if(null===_e)continue;if(!e(_e))throw new M("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:le});const Ne={"@value":_e};"@none"!==ve&&(Fe.match(O)||$.eventHandler&&H({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Fe}},options:$}),Ne["@language"]=Fe.toLowerCase()),V&&(Ne["@direction"]=V),ne.push(Ne)}}return ne}async function fe({activeCtx:oe,options:le,activeProperty:V,value:$,asGraph:ne,indexKey:pe,propertyIndex:Fe}){const ve=[],ce=Object.keys($).sort(),_e="@type"===pe;for(let Ne of ce){if(_e){const k=l(oe,Ne,"@context");r(k)||(oe=await c({activeCtx:oe,localCtx:k,propagate:!1,options:le}))}let Qe,te=$[Ne];o(te)||(te=[te]),te=await P.expand({activeCtx:oe,activeProperty:V,element:te,options:le,insideList:!1,insideIndex:!0}),Qe=Fe?"@none"===Ne?"@none":Y({activeCtx:oe,activeProperty:pe,value:Ne,options:le}):y(oe,Ne,{vocab:!0},le),"@id"===pe?Ne=y(oe,Ne,{base:!0},le):_e&&(Ne=Qe);for(let k of te){if(ne&&!d(k)&&(k={"@graph":[k]}),"@type"===pe)"@none"===Qe||(k["@type"]?k["@type"]=[Ne].concat(k["@type"]):k["@type"]=[Ne]);else{if(s(k)&&!["@language","@type","@index"].includes(pe))throw new M(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${pe}".`,"jsonld.SyntaxError",{code:"invalid value object",value:k});Fe?"@none"!==Qe&&A(k,Fe,Qe,{propertyIsArray:!0,prependValue:!0}):"@none"===Qe||pe in k||(k[pe]=Ne)}ve.push(k)}}return ve}K.exports=P,P.expand=async({activeCtx:oe,activeProperty:le=null,element:V,options:$={},insideList:ne=!1,insideIndex:pe=!1,typeScopedContext:Fe=null})=>{if(null==V)return null;if("@default"===le&&($=Object.assign({},$,{isFrame:!1})),!o(V)&&!x(V))return ne||null!==le&&"@graph"!==y(oe,le,{vocab:!0},$)?Y({activeCtx:oe,activeProperty:le,value:V,options:$}):($.eventHandler&&H({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:V}},options:$}),null);if(o(V)){let Q=[];const z=l(oe,le,"@container")||[];ne=ne||z.includes("@list");for(let he=0;he<V.length;++he){let de=await P.expand({activeCtx:oe,activeProperty:le,element:V[he],options:$,insideIndex:pe,typeScopedContext:Fe});ne&&o(de)&&(de={"@list":de}),null!==de&&(o(de)?Q=Q.concat(de):Q.push(de))}return Q}const ve=y(oe,le,{vocab:!0},$),ce=l(oe,le,"@context");Fe=Fe||(oe.previousContext?oe:null);let _e=Object.keys(V).sort(),Ne=!pe;if(Ne&&Fe&&_e.length<=2&&!_e.includes("@context"))for(const Q of _e){const z=y(Fe,Q,{vocab:!0},$);if("@value"===z){Ne=!1,oe=Fe;break}if("@id"===z&&1===_e.length){Ne=!1;break}}Ne&&(oe=oe.revertToPreviousContext()),r(ce)||(oe=await c({activeCtx:oe,localCtx:ce,propagate:!0,overrideProtected:!0,options:$})),"@context"in V&&(oe=await c({activeCtx:oe,localCtx:V["@context"],options:$})),Fe=oe;let Qe=null;for(const Q of _e)if("@type"===y(oe,Q,{vocab:!0},$)){Qe=Qe||Q;const z=V[Q],he=Array.isArray(z)?z.length>1?z.slice().sort():z:[z];for(const de of he){const ge=l(Fe,de,"@context");r(ge)||(oe=await c({activeCtx:oe,localCtx:ge,options:$,propagate:!1}))}}let te={};await X({activeCtx:oe,activeProperty:le,expandedActiveProperty:ve,element:V,expandedParent:te,options:$,insideList:ne,typeKey:Qe,typeScopedContext:Fe}),_e=Object.keys(te);let k=_e.length;if("@value"in te){if("@type"in te&&("@language"in te||"@direction"in te))throw new M('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:te});let Q=k-1;if("@type"in te&&(Q-=1),"@index"in te&&(Q-=1),"@language"in te&&(Q-=1),"@direction"in te&&(Q-=1),0!==Q)throw new M('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:te});const z=null===te["@value"]?[]:v(te["@value"]),he=F(te,"@type");if(!E(oe,1.1)||!he.includes("@json")||1!==he.length)if(0===z.length)$.eventHandler&&H({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:te}},options:$}),te=null;else{if(!z.every(de=>e(de)||h(de))&&"@language"in te)throw new M("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:te});if(!he.every(de=>_(de)&&!(e(de)&&0===de.indexOf("_:"))||h(de)))throw new M('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:te})}}else if("@type"in te&&!o(te["@type"]))te["@type"]=[te["@type"]];else if("@set"in te||"@list"in te){if(k>1&&(2!==k||!("@index"in te)))throw new M('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:te});"@set"in te&&(te=te["@set"],_e=Object.keys(te),k=_e.length)}else 1===k&&"@language"in te&&($.eventHandler&&H({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:te}},options:$}),te=null);if(x(te)&&!$.keepFreeFloatingNodes&&!ne&&(null===le||"@graph"===ve)&&(0===k||"@value"in te||"@list"in te||1===k&&"@id"in te)){if($.eventHandler){let Q,z;0===k?(Q="empty object",z="Dropping empty object."):"@value"in te?(Q="object with only @value",z="Dropping object with only @value."):"@list"in te?(Q="object with only @list",z="Dropping object with only @list."):1===k&&"@id"in te&&(Q="object with only @id",z="Dropping object with only @id."),H({event:{type:["JsonLdEvent"],code:Q,level:"warning",message:z,details:{value:te}},options:$})}te=null}return te}},{"./JsonLdError":28,"./context":35,"./events":37,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],39:[function(G,K,ee){"use strict";const{isSubjectReference:M}=G("./graphTypes"),{createMergedNodeMap:o}=G("./nodeMap"),x={};K.exports=x,x.flatten=h=>{const e=o(h),r=[],n=Object.keys(e).sort();for(let s=0;s<n.length;++s){const d=e[n[s]];M(d)||r.push(d)}return r}},{"./graphTypes":42,"./nodeMap":44}],40:[function(G,K,ee){"use strict";const{isKeyword:M}=G("./context"),o=G("./graphTypes"),x=G("./types"),h=G("./util"),e=G("./url"),r=G("./JsonLdError"),{createNodeMap:n,mergeNodeMapGraphs:s}=G("./nodeMap"),d={};function a(v){const F={};for(const j in v)void 0!==v[j]&&(F["@"+j]=[v[j]]);return[F]}function y(v,F,j){for(let H=j.length-1;H>=0;--H){const P=j[H];if(P.graph===F&&P.subject["@id"]===v["@id"])return!0}return!1}function l(v,F,j){const H="@"+j;let P=H in v?v[H][0]:F[j];if("embed"===j)if(!0===P)P="@once";else if(!1===P)P="@never";else if("@always"!==P&&"@never"!==P&&"@link"!==P&&"@first"!==P&&"@last"!==P&&"@once"!==P)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:v});return P}function f(v){if(!x.isArray(v)||1!==v.length||!x.isObject(v[0]))throw new r("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:v});if("@id"in v[0])for(const F of h.asArray(v[0]["@id"]))if(!x.isObject(F)&&!e.isAbsolute(F)||x.isString(F)&&0===F.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v});if("@type"in v[0])for(const F of h.asArray(v[0]["@type"]))if(!x.isObject(F)&&!e.isAbsolute(F)||x.isString(F)&&0===F.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v})}function c(v,F,j,H){let P=!0,X=!1;for(const Y in j){let ie=!1;const fe=h.getValues(F,Y),oe=0===h.getValues(j,Y).length;if("@id"===Y){if(x.isEmptyObject(j["@id"][0]||{})?ie=!0:j["@id"].length>=0&&(ie=j["@id"].includes(fe[0])),!H.requireAll)return ie}else if("@type"===Y){if(P=!1,oe){if(fe.length>0)return!1;ie=!0}else if(1===j["@type"].length&&x.isEmptyObject(j["@type"][0]))ie=fe.length>0;else for(const le of j["@type"])ie=!(!x.isObject(le)||!("@default"in le))||ie||fe.some(V=>V===le);if(!H.requireAll)return ie}else{if(M(Y))continue;{const le=h.getValues(j,Y)[0];let V=!1;if(le&&(f([le]),V="@default"in le),P=!1,0===fe.length&&V)continue;if(fe.length>0&&oe)return!1;if(void 0===le){if(fe.length>0)return!1;ie=!0}else if(o.isList(le)){const $=le["@list"][0];if(o.isList(fe[0])){const ne=fe[0]["@list"];o.isValue($)?ie=ne.some(pe=>A($,pe)):(o.isSubject($)||o.isSubjectReference($))&&(ie=ne.some(pe=>R(v,$,pe,H)))}}else ie=o.isValue(le)?fe.some($=>A(le,$)):o.isSubjectReference(le)?fe.some($=>R(v,le,$,H)):!!x.isObject(le)&&fe.length>0}}if(!ie&&H.requireAll)return!1;X=X||ie}return P||X}function E(v,F){const j=v.uniqueEmbeds[v.graph],H=j[F],P=H.parent,X=H.property,Y={"@id":F};if(x.isArray(P)){for(let fe=0;fe<P.length;++fe)if(h.compareValues(P[fe],Y)){P[fe]=Y;break}}else{const fe=x.isArray(P[X]);h.removeValue(P,X,Y,{propertyIsArray:fe}),h.addValue(P,X,Y,{propertyIsArray:fe})}const ie=fe=>{const oe=Object.keys(j);for(const le of oe)le in j&&x.isObject(j[le].parent)&&j[le].parent["@id"]===fe&&(delete j[le],ie(le))};ie(F)}function _(v,F){if(x.isArray(v))return v.map(j=>_(j,F));if(x.isObject(v)){if("@preserve"in v)return v["@preserve"][0];if(o.isValue(v))return v;if(o.isList(v))return v["@list"]=_(v["@list"],F),v;if("@id"in v){const j=v["@id"];if(F.link.hasOwnProperty(j)){const H=F.link[j].indexOf(v);if(-1!==H)return F.link[j][H];F.link[j].push(v)}else F.link[j]=[v]}for(const j in v)"@id"===j&&F.bnodesToClear.includes(v[j])?delete v["@id"]:v[j]=_(v[j],F)}return v}function O(v,F,j){x.isObject(v)?h.addValue(v,F,j,{propertyIsArray:!0}):v.push(j)}function R(v,F,j,H){if(!("@id"in j))return!1;const P=v.subjects[j["@id"]];return P&&c(v,P,F,H)}function A(v,F){const j=F["@value"],H=F["@type"],P=F["@language"],X=v["@value"]?x.isArray(v["@value"])?v["@value"]:[v["@value"]]:[],Y=v["@type"]?x.isArray(v["@type"])?v["@type"]:[v["@type"]]:[],ie=v["@language"]?x.isArray(v["@language"])?v["@language"]:[v["@language"]]:[];return 0===X.length&&0===Y.length&&0===ie.length||!(!X.includes(j)&&!x.isEmptyObject(X[0]))&&!!(!H&&0===Y.length||Y.includes(H)||H&&x.isEmptyObject(Y[0]))&&!!(!P&&0===ie.length||ie.includes(P)||P&&x.isEmptyObject(ie[0]))}K.exports=d,d.frameMergedOrDefault=(v,F,j)=>{const H={options:j,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},P=new h.IdentifierIssuer("_:b");n(v,H.graphMap,"@default",P),j.merged&&(H.graphMap["@merged"]=s(H.graphMap),H.graph="@merged"),H.subjects=H.graphMap[H.graph];const X=[];return d.frame(H,Object.keys(H.subjects).sort(),F,X),j.pruneBlankNodeIdentifiers&&(j.bnodesToClear=Object.keys(H.bnodeMap).filter(Y=>1===H.bnodeMap[Y].length)),// remove @preserve from results
j.link={},_(X,j)},d.frame=(v,F,j,H,P=null)=>{f(j),j=j[0];const X=v.options,Y={embed:l(j,X,"embed"),explicit:l(j,X,"explicit"),requireAll:l(j,X,"requireAll")};v.link.hasOwnProperty(v.graph)||(v.link[v.graph]={});const ie=v.link[v.graph],fe=function(le,V,$,ne){const pe={};for(const Fe of V){const ve=le.graphMap[le.graph][Fe];c(le,ve,$,ne)&&(pe[Fe]=ve)}return pe}(v,F,j,Y),oe=Object.keys(fe).sort();for(const le of oe){const V=fe[le];if(null===P?v.uniqueEmbeds={[v.graph]:{}}:v.uniqueEmbeds[v.graph]=v.uniqueEmbeds[v.graph]||{},"@link"===Y.embed&&le in ie){O(H,P,ie[le]);continue}const $={"@id":le};if(0===le.indexOf("_:")&&h.addValue(v.bnodeMap,le,$,{propertyIsArray:!0}),ie[le]=$,("@first"===Y.embed||"@last"===Y.embed)&&v.is11)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:j});if(v.embedded||!v.uniqueEmbeds[v.graph].hasOwnProperty(le))if(!v.embedded||"@never"!==Y.embed&&!y(V,v.graph,v.subjectStack))if(!v.embedded||"@first"!=Y.embed&&"@once"!=Y.embed||!v.uniqueEmbeds[v.graph].hasOwnProperty(le)){if("@last"===Y.embed&&le in v.uniqueEmbeds[v.graph]&&E(v,le),v.uniqueEmbeds[v.graph][le]={parent:H,property:P},v.subjectStack.push({subject:V,graph:v.graph}),le in v.graphMap){let ne=!1,pe=null;"@graph"in j?(pe=j["@graph"][0],ne=!("@merged"===le||"@default"===le),x.isObject(pe)||(pe={})):(ne="@merged"!==v.graph,pe={}),ne&&d.frame({...v,graph:le,embedded:!1},Object.keys(v.graphMap[le]).sort(),[pe],$,"@graph")}"@included"in j&&d.frame({...v,embedded:!1},F,j["@included"],$,"@included");for(const ne of Object.keys(V).sort())if(M(ne)){if($[ne]=h.clone(V[ne]),"@type"===ne)for(const pe of V["@type"])0===pe.indexOf("_:")&&h.addValue(v.bnodeMap,pe,$,{propertyIsArray:!0})}else if(!Y.explicit||ne in j)for(const pe of V[ne]){const Fe=ne in j?j[ne]:a(Y);if(o.isList(pe)){const ve=j[ne]&&j[ne][0]&&j[ne][0]["@list"]?j[ne][0]["@list"]:a(Y),ce={"@list":[]};O($,ne,ce);const _e=pe["@list"];for(const Ne of _e)o.isSubjectReference(Ne)?d.frame({...v,embedded:!0},[Ne["@id"]],ve,ce,"@list"):O(ce,"@list",h.clone(Ne))}else o.isSubjectReference(pe)?d.frame({...v,embedded:!0},[pe["@id"]],Fe,$,ne):A(Fe[0],pe)&&O($,ne,h.clone(pe))}for(const ne of Object.keys(j).sort()){if("@type"===ne){if(!x.isObject(j[ne][0])||!("@default"in j[ne][0]))continue}else if(M(ne))continue;const pe=j[ne][0]||{};if(!l(pe,X,"omitDefault")&&!(ne in $)){let Fe="@null";"@default"in pe&&(Fe=h.clone(pe["@default"])),x.isArray(Fe)||(Fe=[Fe]),$[ne]=[{"@preserve":Fe}]}}for(const ne of Object.keys(j["@reverse"]||{}).sort()){const pe=j["@reverse"][ne];for(const Fe of Object.keys(v.subjects))h.getValues(v.subjects[Fe],ne).some(ve=>ve["@id"]===le)&&($["@reverse"]=$["@reverse"]||{},h.addValue($["@reverse"],ne,[],{propertyIsArray:!0}),d.frame({...v,embedded:!0},[Fe],pe,$["@reverse"][ne],P))}O(H,P,$),v.subjectStack.pop()}else O(H,P,$);else O(H,P,$)}},d.cleanupNull=(v,F)=>{if(x.isArray(v))return v.map(j=>d.cleanupNull(j,F)).filter(j=>j);if("@null"===v)return null;if(x.isObject(v)){if("@id"in v){const j=v["@id"];if(F.link.hasOwnProperty(j)){const H=F.link[j].indexOf(v);if(-1!==H)return F.link[j][H];F.link[j].push(v)}else F.link[j]=[v]}for(const j in v)v[j]=d.cleanupNull(v[j],F)}return v}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49}],41:[function(G,K,ee){"use strict";const M=G("./JsonLdError"),o=G("./graphTypes"),x=G("./types"),{REGEX_BCP47:h,addValue:e}=G("./util"),{handleEvent:r}=G("./events"),{RDF_LIST:n,RDF_FIRST:s,RDF_REST:d,RDF_NIL:a,RDF_TYPE:y,RDF_JSON_LITERAL:l,XSD_BOOLEAN:f,XSD_DOUBLE:c,XSD_INTEGER:E,XSD_STRING:_}=G("./constants"),O={};function R(A,v,F,j){if(A.termType.endsWith("Node"))return{"@id":A.value};const H={"@value":A.value};if(A.language)A.language.match(h)||j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A.language}},options:j}),H["@language"]=A.language;else{let P=A.datatype.value;if(P||(P=_),P===l){P="@json";try{H["@value"]=JSON.parse(H["@value"])}catch(X){throw new M("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:H["@value"],cause:X})}}if(v){if(P===f)"true"===H["@value"]?H["@value"]=!0:"false"===H["@value"]&&(H["@value"]=!1);else if(x.isNumeric(H["@value"]))if(P===E){const X=parseInt(H["@value"],10);X.toFixed(0)===H["@value"]&&(H["@value"]=X)}else P===c&&(H["@value"]=parseFloat(H["@value"]));[f,E,c,_].includes(P)||(H["@type"]=P)}else if("i18n-datatype"===F&&P.startsWith("https://www.w3.org/ns/i18n#")){const[,X,Y]=P.split(/[#_]/);X.length>0&&(H["@language"]=X,X.match(h)||j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:X}},options:j})),H["@direction"]=Y}else P!==_&&(H["@type"]=P)}return H}K.exports=O,O.fromRDF=async(A,v)=>{const F={},j={"@default":F},H={},{useRdfType:P=!1,useNativeTypes:X=!1,rdfDirection:Y=null}=v;for(const oe of A){const le="DefaultGraph"===oe.graph.termType?"@default":oe.graph.value;le in j||(j[le]={}),"@default"===le||le in F||(F[le]={"@id":le});const V=j[le],$=oe.subject.value,ne=oe.predicate.value,pe=oe.object;$ in V||(V[$]={"@id":$});const Fe=V[$],ve=pe.termType.endsWith("Node");if(ve&&!(pe.value in V)&&(V[pe.value]={"@id":pe.value}),ne===y&&!P&&ve){e(Fe,"@type",pe.value,{propertyIsArray:!0});continue}const ce=R(pe,X,Y,v);if(e(Fe,ne,ce,{propertyIsArray:!0}),ve)if(pe.value===a){const _e=V[pe.value];"usages"in _e||(_e.usages=[]),_e.usages.push({node:Fe,property:ne,value:ce})}else pe.value in H?H[pe.value]=!1:H[pe.value]={node:Fe,property:ne,value:ce}}for(const oe in j){const le=j[oe];if(!(a in le))continue;const V=le[a];if(V.usages){for(let $ of V.usages){let ne=$.node,pe=$.property,Fe=$.value;const ve=[],ce=[];let _e=Object.keys(ne).length;for(;pe===d&&x.isObject(H[ne["@id"]])&&x.isArray(ne[s])&&1===ne[s].length&&x.isArray(ne[d])&&1===ne[d].length&&(3===_e||4===_e&&x.isArray(ne["@type"])&&1===ne["@type"].length&&ne["@type"][0]===n)&&(ve.push(ne[s][0]),ce.push(ne["@id"]),$=H[ne["@id"]],ne=$.node,pe=$.property,Fe=$.value,_e=Object.keys(ne).length,o.isBlankNode(ne)););delete Fe["@id"],Fe["@list"]=ve.reverse();for(const Ne of ce)delete le[Ne]}delete V.usages}}const ie=[],fe=Object.keys(F).sort();for(const oe of fe){const le=F[oe];if(oe in j){const V=le["@graph"]=[],$=j[oe],ne=Object.keys($).sort();for(const pe of ne){const Fe=$[pe];o.isSubjectReference(Fe)||V.push(Fe)}}o.isSubjectReference(le)||ie.push(le)}return ie}},{"./JsonLdError":28,"./constants":34,"./events":37,"./graphTypes":42,"./types":47,"./util":49}],42:[function(G,K,ee){"use strict";const M=G("./types"),o={};K.exports=o,o.isSubject=x=>!(!M.isObject(x)||"@value"in x||"@set"in x||"@list"in x)&&(Object.keys(x).length>1||!("@id"in x)),o.isSubjectReference=x=>M.isObject(x)&&1===Object.keys(x).length&&"@id"in x,o.isValue=x=>M.isObject(x)&&"@value"in x,o.isList=x=>M.isObject(x)&&"@list"in x,o.isGraph=x=>M.isObject(x)&&"@graph"in x&&1===Object.keys(x).filter(h=>"@id"!==h&&"@index"!==h).length,o.isSimpleGraph=x=>o.isGraph(x)&&!("@id"in x),o.isBlankNode=x=>{if(M.isObject(x)){if("@id"in x){const h=x["@id"];return!M.isString(h)||0===h.indexOf("_:")}return 0===Object.keys(x).length||!("@value"in x||"@set"in x||"@list"in x)}return!1}},{"./types":47}],43:[function(G,K,ee){const M=G("rdf-canonize"),o=G("./platform"),x=G("./util"),h=G("./ContextResolver"),e=x.IdentifierIssuer,r=G("./JsonLdError"),n=G("lru-cache"),s=G("./NQuads"),{expand:d}=G("./expand"),{flatten:a}=G("./flatten"),{fromRDF:y}=G("./fromRdf"),{toRDF:l}=G("./toRdf"),{frameMergedOrDefault:f,cleanupNull:c}=G("./frame"),{isArray:E,isObject:_,isString:O}=G("./types"),{isSubjectReference:R}=G("./graphTypes"),{expandIri:A,getInitialContext:v,process:F,processingMode:j}=G("./context"),{compact:H,compactIri:P}=G("./compact"),{createNodeMap:X,createMergedNodeMap:Y,mergeNodeMaps:ie}=G("./nodeMap"),{logEventHandler:fe,logWarningEventHandler:oe,safeEventHandler:le,setDefaultEventHandler:V,setupEventHandler:$,strictEventHandler:ne,unhandledEventHandler:pe}=G("./events"),Fe=function(ce){const _e={},Ne=new n({max:100});function Qe(te,{documentLoader:k=ce.documentLoader,...Q}){if(te&&"compactionMap"in te)throw new r('"compactionMap" not supported.',"jsonld.OptionsError");if(te&&"expansionMap"in te)throw new r('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:k},Q,te,{eventHandler:$({options:te})})}return ce.compact=async function(te,k,Q){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===k)throw new r("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===te)return null;let z;(Q=Qe(Q,{base:O(te)?te:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new h({sharedCache:Ne})})).link&&(Q.skipExpansion=!0),Q.compactToRelative||delete Q.base,z=Q.skipExpansion?te:await ce.expand(te,Q);const he=await ce.processContext(v(Q),k,Q);let de=await H({activeCtx:he,element:z,options:Q});Q.compactArrays&&!Q.graph&&E(de)?1===de.length?de=de[0]:0===de.length&&(de={}):Q.graph&&_(de)&&(de=[de]),_(k)&&"@context"in k&&(k=k["@context"]),k=x.clone(k),E(k)||(k=[k]);const ge=k;k=[];for(let Oe=0;Oe<ge.length;++Oe)(!_(ge[Oe])||Object.keys(ge[Oe]).length>0)&&k.push(ge[Oe]);const Pe=k.length>0;if(1===k.length&&(k=k[0]),E(de)){const Oe=P({activeCtx:he,iri:"@graph",relativeTo:{vocab:!0}}),Je=de;de={},Pe&&(de["@context"]=k),de[Oe]=Je}else if(_(de)&&Pe){const Oe=de;de={"@context":k};for(const Je in Oe)de[Je]=Oe[Je]}return de},ce.expand=async function(te,k){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Q={},z=[];if("expandContext"in(k=Qe(k,{keepFreeFloatingNodes:!1,contextResolver:new h({sharedCache:Ne})}))){const Pe=x.clone(k.expandContext);_(Pe)&&"@context"in Pe?Q.expandContext=Pe:Q.expandContext={"@context":Pe},z.push(Q.expandContext)}let he;if(O(te)){const Pe=await ce.get(te,k);he=Pe.documentUrl,Q.input=Pe.document,Pe.contextUrl&&(Q.remoteContext={"@context":Pe.contextUrl},z.push(Q.remoteContext))}else Q.input=x.clone(te);"base"in k||(k.base=he||"");let de=v(k);for(const Pe of z)de=await F({activeCtx:de,localCtx:Pe,options:k});let ge=await d({activeCtx:de,element:Q.input,options:k});return _(ge)&&"@graph"in ge&&1===Object.keys(ge).length?ge=ge["@graph"]:null===ge&&(ge=[]),E(ge)||(ge=[ge]),ge},ce.flatten=async function(te,k,Q){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");k="function"==typeof k?null:k||null,Q=Qe(Q,{base:O(te)?te:"",contextResolver:new h({sharedCache:Ne})});const z=await ce.expand(te,Q),he=a(z);return null===k?he:(Q.graph=!0,Q.skipExpansion=!0,await ce.compact(he,k,Q))},ce.frame=async function(te,k,Q){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Q=Qe(Q,{base:O(te)?te:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new h({sharedCache:Ne})}),O(k)){const Ke=await ce.get(k,Q);if(k=Ke.document,Ke.contextUrl){let ot=k["@context"];ot?E(ot)?ot.push(Ke.contextUrl):ot=[ot,Ke.contextUrl]:ot=Ke.contextUrl,k["@context"]=ot}}const z=k&&k["@context"]||{},he=await ce.processContext(v(Q),z,Q);Q.hasOwnProperty("omitGraph")||(Q.omitGraph=j(he,1.1)),Q.hasOwnProperty("pruneBlankNodeIdentifiers")||(Q.pruneBlankNodeIdentifiers=j(he,1.1));const de=await ce.expand(te,Q),ge={...Q};ge.isFrame=!0,ge.keepFreeFloatingNodes=!0;const Pe=await ce.expand(k,ge),Oe=Object.keys(k).map(Ke=>A(he,Ke,{vocab:!0}));ge.merged=!Oe.includes("@graph"),ge.is11=j(he,1.1);const Je=f(de,Pe,ge);ge.graph=!Q.omitGraph,ge.skipExpansion=!0,ge.link={},ge.framing=!0;let $e=await ce.compact(Je,z,ge);return ge.link={},$e=c($e,ge),$e},ce.link=async function(te,k,Q){const z={};return k&&(z["@context"]=k),z["@embed"]="@link",ce.frame(te,z,Q)},ce.normalize=ce.canonize=async function(te,k){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(k=Qe(k,{base:O(te)?te:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new h({sharedCache:Ne})}))){if("application/n-quads"!==k.inputFormat&&"application/nquads"!==k.inputFormat)throw new r("Unknown canonicalization input format.","jsonld.CanonizeError");const he=s.parse(te);return M.canonize(he,k)}const Q={...k};delete Q.format,Q.produceGeneralizedRdf=!1;const z=await ce.toRDF(te,Q);return M.canonize(z,k)},ce.fromRDF=async function(te,k){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");k=Qe(k,{format:O(te)?"application/n-quads":void 0});const{format:Q}=k;let{rdfParser:z}=k;if(Q){if(z=z||_e[Q],!z)throw new r("Unknown input format.","jsonld.UnknownFormat",{format:Q})}else z=()=>te;const he=await z(te);return y(he,k)},ce.toRDF=async function(te,k){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Q;Q=(k=Qe(k,{base:O(te)?te:"",skipExpansion:!1,contextResolver:new h({sharedCache:Ne})})).skipExpansion?te:await ce.expand(te,k);const z=l(Q,k);if(k.format){if("application/n-quads"===k.format||"application/nquads"===k.format)return s.serialize(z);throw new r("Unknown output format.","jsonld.UnknownFormat",{format:k.format})}return z},ce.createNodeMap=async function(te,k){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");k=Qe(k,{base:O(te)?te:"",contextResolver:new h({sharedCache:Ne})});const Q=await ce.expand(te,k);return Y(Q,k)},ce.merge=async function(te,k,Q){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!E(te))throw new TypeError('Could not merge, "docs" must be an array.');k="function"==typeof k?null:k||null,Q=Qe(Q,{contextResolver:new h({sharedCache:Ne})});const z=await Promise.all(te.map(Ke=>{const ot={...Q};return ce.expand(Ke,ot)}));let he=!0;"mergeNodes"in Q&&(he=Q.mergeNodes);const de=Q.issuer||new e("_:b"),ge={"@default":{}};for(let Ke=0;Ke<z.length;++Ke){const ot=x.relabelBlankNodes(z[Ke],{issuer:new e("_:b"+Ke+"-")}),be=he||0===Ke?ge:{"@default":{}};if(X(ot,be,"@default",de),be!==ge)for(const ke in be){const Ce=be[ke];if(!(ke in ge)){ge[ke]=Ce;continue}const q=ge[ke];for(const Z in Ce)Z in q||(q[Z]=Ce[Z])}}const Pe=ie(ge),Oe=[],Je=Object.keys(Pe).sort();for(let Ke=0;Ke<Je.length;++Ke){const ot=Pe[Je[Ke]];R(ot)||Oe.push(ot)}return null===k?Oe:(Q.graph=!0,Q.skipExpansion=!0,await ce.compact(Oe,k,Q))},Object.defineProperty(ce,"documentLoader",{get:()=>ce._documentLoader,set:te=>ce._documentLoader=te}),ce.documentLoader=async te=>{throw new r("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:te})},ce.get=async function(te,k){let Q;Q="function"==typeof k.documentLoader?k.documentLoader:ce.documentLoader;const z=await Q(te);try{if(!z.document)throw new r("No remote document found at the given URL.","jsonld.NullRemoteDocument");O(z.document)&&(z.document=JSON.parse(z.document))}catch(he){throw new r("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:he,remoteDoc:z})}return z},ce.processContext=async function(te,k,Q){return Q=Qe(Q,{base:"",contextResolver:new h({sharedCache:Ne})}),null===k?v(Q):(k=x.clone(k),_(k)&&"@context"in k||(k={"@context":k}),F({activeCtx:te,localCtx:k,options:Q}))},ce.getContextValue=G("./context").getContextValue,ce.documentLoaders={},ce.useDocumentLoader=function(te){if(!(te in ce.documentLoaders))throw new r('Unknown document loader type: "'+te+'"',"jsonld.UnknownDocumentLoader",{type:te});ce.documentLoader=ce.documentLoaders[te].apply(ce,Array.prototype.slice.call(arguments,1))},ce.registerRDFParser=function(te,k){_e[te]=k},ce.unregisterRDFParser=function(te){delete _e[te]},ce.registerRDFParser("application/n-quads",s.parse),ce.registerRDFParser("application/nquads",s.parse),ce.url=G("./url"),ce.logEventHandler=fe,ce.logWarningEventHandler=oe,ce.safeEventHandler=le,ce.setDefaultEventHandler=V,ce.strictEventHandler=ne,ce.unhandledEventHandler=pe,ce.util=x,Object.assign(ce,x),ce.promises=ce,ce.RequestQueue=G("./RequestQueue"),ce.JsonLdProcessor=G("./JsonLdProcessor")(ce),o.setupGlobals(ce),o.setupDocumentLoaders(ce),ce},ve=function(){return Fe(function(){return ve()})};Fe(ve),K.exports=ve},{"./ContextResolver":27,"./JsonLdError":28,"./JsonLdProcessor":29,"./NQuads":30,"./RequestQueue":31,"./compact":33,"./context":35,"./events":37,"./expand":38,"./flatten":39,"./frame":40,"./fromRdf":41,"./graphTypes":42,"./nodeMap":44,"./platform":45,"./toRdf":46,"./types":47,"./url":48,"./util":49,"lru-cache":50,"rdf-canonize":64}],44:[function(G,K,ee){"use strict";const{isKeyword:M}=G("./context"),o=G("./graphTypes"),x=G("./types"),h=G("./util"),e=G("./JsonLdError"),r={};K.exports=r,r.createMergedNodeMap=(n,s)=>{const d=(s=s||{}).issuer||new h.IdentifierIssuer("_:b"),a={"@default":{}};return r.createNodeMap(n,a,"@default",d),r.mergeNodeMaps(a)},r.createNodeMap=(n,s,d,a,y,l)=>{if(x.isArray(n)){for(const _ of n)r.createNodeMap(_,s,d,a,void 0,l);return}if(!x.isObject(n))return void(l&&l.push(n));if(o.isValue(n)){if("@type"in n){let _=n["@type"];0===_.indexOf("_:")&&(n["@type"]=_=a.getId(_))}return void(l&&l.push(n))}if(l&&o.isList(n)){const _=[];return r.createNodeMap(n["@list"],s,d,a,y,_),void l.push({"@list":_})}if("@type"in n){const _=n["@type"];for(const O of _)0===O.indexOf("_:")&&a.getId(O)}x.isUndefined(y)&&(y=o.isBlankNode(n)?a.getId(n["@id"]):n["@id"]),l&&l.push({"@id":y});const f=s[d],c=f[y]=f[y]||{};c["@id"]=y;const E=Object.keys(n).sort();for(let _ of E){if("@id"===_)continue;if("@reverse"===_){const R={"@id":y},A=n["@reverse"];for(const v in A){const F=A[v];for(const j of F){let H=j["@id"];o.isBlankNode(j)&&(H=a.getId(H)),r.createNodeMap(j,s,d,a,H),h.addValue(f[H],v,R,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===_){y in s||(s[y]={}),r.createNodeMap(n[_],s,y,a);continue}if("@included"===_){r.createNodeMap(n[_],s,d,a);continue}if("@type"!==_&&M(_)){if("@index"===_&&_ in c&&(n[_]!==c[_]||n[_]["@id"]!==c[_]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:c});c[_]=n[_];continue}const O=n[_];if(0===_.indexOf("_:")&&(_=a.getId(_)),0!==O.length)for(let R of O)if("@type"===_&&(R=0===R.indexOf("_:")?a.getId(R):R),o.isSubject(R)||o.isSubjectReference(R)){if("@id"in R&&!R["@id"])continue;const A=o.isBlankNode(R)?a.getId(R["@id"]):R["@id"];h.addValue(c,_,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),r.createNodeMap(R,s,d,a,A)}else if(o.isValue(R))h.addValue(c,_,R,{propertyIsArray:!0,allowDuplicate:!1});else if(o.isList(R)){const A=[];r.createNodeMap(R["@list"],s,d,a,y,A),R={"@list":A},h.addValue(c,_,R,{propertyIsArray:!0,allowDuplicate:!1})}else r.createNodeMap(R,s,d,a,y),h.addValue(c,_,R,{propertyIsArray:!0,allowDuplicate:!1});else h.addValue(c,_,[],{propertyIsArray:!0})}},r.mergeNodeMapGraphs=n=>{const s={};for(const d of Object.keys(n).sort())for(const a of Object.keys(n[d]).sort()){const y=n[d][a];a in s||(s[a]={"@id":a});const l=s[a];for(const f of Object.keys(y).sort())if(M(f)&&"@type"!==f)l[f]=h.clone(y[f]);else for(const c of y[f])h.addValue(l,f,h.clone(c),{propertyIsArray:!0,allowDuplicate:!1})}return s},r.mergeNodeMaps=n=>{const s=n["@default"],d=Object.keys(n).sort();for(const a of d){if("@default"===a)continue;const y=n[a];let l=s[a];l?"@graph"in l||(l["@graph"]=[]):s[a]=l={"@id":a,"@graph":[]};const f=l["@graph"];for(const c of Object.keys(y).sort()){const E=y[c];o.isSubjectReference(E)||f.push(E)}}return s}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./util":49}],45:[function(G,K,ee){"use strict";const M=G("./documentLoaders/xhr"),o={};K.exports=o,o.setupDocumentLoaders=function(x){typeof XMLHttpRequest<"u"&&(x.documentLoaders.xhr=M,x.useDocumentLoader("xhr"))},o.setupGlobals=function(x){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:x.JsonLdProcessor})}},{"./documentLoaders/xhr":36}],46:[function(G,K,ee){"use strict";const{createNodeMap:M}=G("./nodeMap"),{isKeyword:o}=G("./context"),x=G("./graphTypes"),h=G("canonicalize"),e=G("./types"),r=G("./util"),{handleEvent:n}=G("./events"),{RDF_FIRST:s,RDF_REST:d,RDF_NIL:a,RDF_TYPE:y,RDF_JSON_LITERAL:l,RDF_LANGSTRING:f,XSD_BOOLEAN:c,XSD_DOUBLE:E,XSD_INTEGER:_,XSD_STRING:O}=G("./constants"),{isAbsolute:R}=G("./url"),A={};function v(j,H,P,X,Y){const ie=Object.keys(H).sort();for(const fe of ie){const oe=H[fe],le=Object.keys(oe).sort();for(let V of le){const $=oe[V];if("@type"===V)V=y;else if(o(V))continue;for(const ne of $){const pe={termType:fe.startsWith("_:")?"BlankNode":"NamedNode",value:fe};if(!R(fe)){Y.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:fe}},options:Y});continue}const Fe={termType:V.startsWith("_:")?"BlankNode":"NamedNode",value:V};if(!R(V)){Y.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:V}},options:Y});continue}if("BlankNode"===Fe.termType&&!Y.produceGeneralizedRdf){Y.eventHandler&&n({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:X.getOldIds().find(ce=>X.getId(ce)===V)}},options:Y});continue}const ve=F(ne,X,j,P,Y.rdfDirection,Y);ve&&j.push({subject:pe,predicate:Fe,object:ve,graph:P})}}}}function F(j,H,P,X,Y,ie){const fe={};if(x.isValue(j)){fe.termType="Literal",fe.value=void 0,fe.datatype={termType:"NamedNode"};let oe=j["@value"];const le=j["@type"]||null;if("@json"===le)fe.value=h(oe),fe.datatype.value=l;else if(e.isBoolean(oe))fe.value=oe.toString(),fe.datatype.value=le||c;else if(e.isDouble(oe)||le===E)e.isDouble(oe)||(oe=parseFloat(oe)),fe.value=oe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),fe.datatype.value=le||E;else if(e.isNumber(oe))fe.value=oe.toFixed(0),fe.datatype.value=le||_;else if("i18n-datatype"===Y&&"@direction"in j){const V="https://www.w3.org/ns/i18n#"+(j["@language"]||"")+`_${j["@direction"]}`;fe.datatype.value=V,fe.value=oe}else"@language"in j?(fe.value=oe,fe.datatype.value=le||f,fe.language=j["@language"]):(fe.value=oe,fe.datatype.value=le||O)}else if(x.isList(j)){const oe=function(le,V,$,ne,pe,Fe){const ve={termType:"NamedNode",value:s},ce={termType:"NamedNode",value:d},_e={termType:"NamedNode",value:a},Ne=le.pop(),Qe=Ne?{termType:"BlankNode",value:V.getId()}:_e;let te=Qe;for(const k of le){const Q=F(k,V,$,ne,pe,Fe),z={termType:"BlankNode",value:V.getId()};$.push({subject:te,predicate:ve,object:Q,graph:ne}),$.push({subject:te,predicate:ce,object:z,graph:ne}),te=z}if(Ne){const k=F(Ne,V,$,ne,pe,Fe);$.push({subject:te,predicate:ve,object:k,graph:ne}),$.push({subject:te,predicate:ce,object:_e,graph:ne})}return Qe}(j["@list"],H,P,X,Y,ie);fe.termType=oe.termType,fe.value=oe.value}else{const oe=e.isObject(j)?j["@id"]:j;fe.termType=oe.startsWith("_:")?"BlankNode":"NamedNode",fe.value=oe}return"NamedNode"!==fe.termType||R(fe.value)?fe:(ie.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:fe.value}},options:ie}),null)}K.exports=A,A.toRDF=(j,H)=>{const P=new r.IdentifierIssuer("_:b"),X={"@default":{}};M(j,X,"@default",P);const Y=[],ie=Object.keys(X).sort();for(const fe of ie){let oe;if("@default"===fe)oe={termType:"DefaultGraph",value:""};else{if(!R(fe)){H.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:fe}},options:H});continue}oe=fe.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},oe.value=fe}v(Y,X[fe],oe,P,H)}return Y}},{"./constants":34,"./context":35,"./events":37,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49,canonicalize:9}],47:[function(G,K,ee){"use strict";const M={};K.exports=M,M.isArray=Array.isArray,M.isBoolean=o=>"boolean"==typeof o||"[object Boolean]"===Object.prototype.toString.call(o),M.isDouble=o=>M.isNumber(o)&&(-1!==String(o).indexOf(".")||Math.abs(o)>=1e21),M.isEmptyObject=o=>M.isObject(o)&&0===Object.keys(o).length,M.isNumber=o=>"number"==typeof o||"[object Number]"===Object.prototype.toString.call(o),M.isNumeric=o=>!isNaN(parseFloat(o))&&isFinite(o),M.isObject=o=>"[object Object]"===Object.prototype.toString.call(o),M.isString=o=>"string"==typeof o||"[object String]"===Object.prototype.toString.call(o),M.isUndefined=o=>void 0===o},{}],48:[function(G,K,ee){"use strict";const M=G("./types"),o={};K.exports=o,o.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},o.parse=(h,e)=>{const r={},n=o.parsers[e||"full"],s=n.regex.exec(h);let d=n.keys.length;for(;d--;)r[n.keys[d]]=void 0===s[d]?null:s[d];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=o.removeDotSegments(r.path),r},o.prependBase=(h,e)=>{if(null===h||o.isAbsolute(e))return e;h&&!M.isString(h)||(h=o.parse(h||""));const r=o.parse(e),n={protocol:h.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=h.authority,""===r.path)n.path=h.path,null!==r.query?n.query=r.query:n.query=h.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{let d=h.path;d=d.substr(0,d.lastIndexOf("/")+1),(d.length>0||h.authority)&&"/"!==d.substr(-1)&&(d+="/"),d+=r.path,n.path=d}n.query=r.query}""!==r.path&&(n.path=o.removeDotSegments(n.path));let s=n.protocol;return null!==n.authority&&(s+="//"+n.authority),s+=n.path,null!==n.query&&(s+="?"+n.query),null!==r.fragment&&(s+="#"+r.fragment),""===s&&(s="./"),s},o.removeBase=(h,e)=>{if(null===h)return e;h&&!M.isString(h)||(h=o.parse(h||""));let r="";if(""!==h.href?r+=(h.protocol||"")+"//"+(h.authority||""):e.indexOf("//")&&(r+="//"),0!==e.indexOf(r))return e;const n=o.parse(e.substr(r.length)),s=h.normalizedPath.split("/"),d=n.normalizedPath.split("/"),a=n.fragment||n.query?0:1;for(;s.length>0&&d.length>a&&s[0]===d[0];)s.shift(),d.shift();let y="";if(s.length>0){s.pop();for(let l=0;l<s.length;++l)y+="../"}return y+=d.join("/"),null!==n.query&&(y+="?"+n.query),null!==n.fragment&&(y+="#"+n.fragment),""===y&&(y="./"),y},o.removeDotSegments=h=>{if(0===h.length)return"";const e=h.split("/"),r=[];for(;e.length>0;){const n=e.shift(),s=0===e.length;"."!==n?".."!==n?r.push(n):(r.pop(),s&&r.push("")):s&&r.push("")}return"/"===h[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const x=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;o.isAbsolute=h=>M.isString(h)&&x.test(h),o.isRelative=h=>M.isString(h)},{"./types":47}],49:[function(G,K,ee){"use strict";const M=G("./graphTypes"),o=G("./types"),x=G("rdf-canonize").IdentifierIssuer,h=G("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,n=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,s_accept="application/ld+json, application/json",d={};function a(y,l){if(o.isArray(l))for(let f=0;f<l.length;++f)l[f]=a(y,l[f]);else if(M.isList(l))l["@list"]=a(y,l["@list"]);else if(o.isObject(l)){M.isBlankNode(l)&&(l["@id"]=y.getId(l["@id"]));const f=Object.keys(l).sort();for(let c=0;c<f.length;++c){const E=f[c];"@id"!==E&&(l[E]=a(y,l[E]))}}return l}K.exports=d,d.IdentifierIssuer=x,d.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,d.REGEX_KEYWORD=/^@[a-zA-Z]+$/,d.clone=function(y){if(y&&"object"==typeof y){let l;if(o.isArray(y)){l=[];for(let f=0;f<y.length;++f)l[f]=d.clone(y[f])}else if(y instanceof Map){l=new Map;for(const[f,c]of y)l.set(f,d.clone(c))}else if(y instanceof Set){l=new Set;for(const f of y)l.add(d.clone(f))}else if(o.isObject(y)){l={};for(const f in y)l[f]=d.clone(y[f])}else l=y.toString();return l}return y},d.asArray=function(y){return Array.isArray(y)?y:[y]},d.buildHeaders=(y={})=>{if(Object.keys(y).some(l=>"accept"===l.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+s_accept+'" is supported.');return Object.assign({Accept:s_accept},y)},d.parseLinkHeader=y=>{const l={},f=y.match(e);for(let c=0;c<f.length;++c){let E=f[c].match(r);if(!E)continue;const _={target:E[1]},O=E[2];for(;E=n.exec(O);)_[E[1]]=void 0===E[2]?E[3]:E[2];const R=_.rel||"";Array.isArray(l[R])?l[R].push(_):l.hasOwnProperty(R)?l[R]=[l[R],_]:l[R]=_}return l},d.validateTypeValue=(y,l)=>{if(!(o.isString(y)||o.isArray(y)&&y.every(f=>o.isString(f)))){if(l&&o.isObject(y))switch(Object.keys(y).length){case 0:return;case 1:if("@default"in y&&d.asArray(y["@default"]).every(f=>o.isString(f)))return}throw new h('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:y})}},d.hasProperty=(y,l)=>{if(y.hasOwnProperty(l)){const f=y[l];return!o.isArray(f)||f.length>0}return!1},d.hasValue=(y,l,f)=>{if(d.hasProperty(y,l)){let c=y[l];const E=M.isList(c);if(o.isArray(c)||E){E&&(c=c["@list"]);for(let _=0;_<c.length;++_)if(d.compareValues(f,c[_]))return!0}else if(!o.isArray(f))return d.compareValues(f,c)}return!1},d.addValue=(y,l,f,c)=>{if("propertyIsArray"in(c=c||{})||(c.propertyIsArray=!1),"valueIsArray"in c||(c.valueIsArray=!1),"allowDuplicate"in c||(c.allowDuplicate=!0),"prependValue"in c||(c.prependValue=!1),c.valueIsArray)y[l]=f;else if(o.isArray(f)){0===f.length&&c.propertyIsArray&&!y.hasOwnProperty(l)&&(y[l]=[]),c.prependValue&&(f=f.concat(y[l]),y[l]=[]);for(let E=0;E<f.length;++E)d.addValue(y,l,f[E],c)}else if(y.hasOwnProperty(l)){const E=!c.allowDuplicate&&d.hasValue(y,l,f);o.isArray(y[l])||E&&!c.propertyIsArray||(y[l]=[y[l]]),E||(c.prependValue?y[l].unshift(f):y[l].push(f))}else y[l]=c.propertyIsArray?[f]:f},d.getValues=(y,l)=>[].concat(y[l]||[]),d.removeProperty=(y,l)=>{delete y[l]},d.removeValue=(y,l,f,c)=>{"propertyIsArray"in(c=c||{})||(c.propertyIsArray=!1);const E=d.getValues(y,l).filter(_=>!d.compareValues(_,f));0===E.length?d.removeProperty(y,l):1!==E.length||c.propertyIsArray?y[l]=E:y[l]=E[0]},d.relabelBlankNodes=(y,l)=>a((l=l||{}).issuer||new x("_:b"),y),d.compareValues=(y,l)=>y===l||!(!M.isValue(y)||!M.isValue(l)||y["@value"]!==l["@value"]||y["@type"]!==l["@type"]||y["@language"]!==l["@language"]||y["@index"]!==l["@index"])||!!(o.isObject(y)&&"@id"in y&&o.isObject(l)&&"@id"in l)&&y["@id"]===l["@id"],d.compareShortestLeast=(y,l)=>y.length<l.length?-1:l.length<y.length?1:y===l?0:y<l?-1:1},{"./JsonLdError":28,"./graphTypes":42,"./types":47,"rdf-canonize":64}],50:[function(G,K,ee){"use strict";const M=G("yallist"),o=Symbol("max"),x=Symbol("length"),h=Symbol("lengthCalculator"),e=Symbol("allowStale"),r=Symbol("maxAge"),n=Symbol("dispose"),s=Symbol("noDisposeOnSet"),d=Symbol("lruList"),a=Symbol("cache"),y=Symbol("updateAgeOnGet"),l=()=>1,f=(A,v,F)=>{const j=A[a].get(v);if(j){const H=j.value;if(c(A,H)){if(_(A,j),!A[e])return}else F&&(A[y]&&(j.value.now=Date.now()),A[d].unshiftNode(j));return H.value}},c=(A,v)=>{if(!v||!v.maxAge&&!A[r])return!1;const F=Date.now()-v.now;return v.maxAge?F>v.maxAge:A[r]&&F>A[r]},E=A=>{if(A[x]>A[o])for(let v=A[d].tail;A[x]>A[o]&&null!==v;){const F=v.prev;_(A,v),v=F}},_=(A,v)=>{if(v){const F=v.value;A[n]&&A[n](F.key,F.value),A[x]-=F.length,A[a].delete(F.key),A[d].removeNode(v)}};class O{constructor(v,F,j,H,P){this.key=v,this.value=F,this.length=j,this.now=H,this.maxAge=P||0}}const R=(A,v,F,j)=>{let H=F.value;c(A,H)&&(_(A,F),A[e]||(H=void 0)),H&&v.call(j,H.value,H.key,A)};K.exports=class{constructor(A){if("number"==typeof A&&(A={max:A}),A||(A={}),A.max&&("number"!=typeof A.max||A.max<0))throw new TypeError("max must be a non-negative number");this[o]=A.max||1/0;const v=A.length||l;if(this[h]="function"!=typeof v?l:v,this[e]=A.stale||!1,A.maxAge&&"number"!=typeof A.maxAge)throw new TypeError("maxAge must be a number");this[r]=A.maxAge||0,this[n]=A.dispose,this[s]=A.noDisposeOnSet||!1,this[y]=A.updateAgeOnGet||!1,this.reset()}set max(A){if("number"!=typeof A||A<0)throw new TypeError("max must be a non-negative number");this[o]=A||1/0,E(this)}get max(){return this[o]}set allowStale(A){this[e]=!!A}get allowStale(){return this[e]}set maxAge(A){if("number"!=typeof A)throw new TypeError("maxAge must be a non-negative number");this[r]=A,E(this)}get maxAge(){return this[r]}set lengthCalculator(A){"function"!=typeof A&&(A=l),A!==this[h]&&(this[h]=A,this[x]=0,this[d].forEach(v=>{v.length=this[h](v.value,v.key),this[x]+=v.length})),E(this)}get lengthCalculator(){return this[h]}get length(){return this[x]}get itemCount(){return this[d].length}rforEach(A,v){v=v||this;for(let F=this[d].tail;null!==F;){const j=F.prev;R(this,A,F,v),F=j}}forEach(A,v){v=v||this;for(let F=this[d].head;null!==F;){const j=F.next;R(this,A,F,v),F=j}}keys(){return this[d].toArray().map(A=>A.key)}values(){return this[d].toArray().map(A=>A.value)}reset(){this[n]&&this[d]&&this[d].length&&this[d].forEach(A=>this[n](A.key,A.value)),this[a]=new Map,this[d]=new M,this[x]=0}dump(){return this[d].map(A=>!c(this,A)&&{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[d]}set(A,v,F){if((F=F||this[r])&&"number"!=typeof F)throw new TypeError("maxAge must be a number");const j=F?Date.now():0,H=this[h](v,A);if(this[a].has(A)){if(H>this[o])return _(this,this[a].get(A)),!1;const X=this[a].get(A).value;return this[n]&&(this[s]||this[n](A,X.value)),X.now=j,X.maxAge=F,X.value=v,this[x]+=H-X.length,X.length=H,this.get(A),E(this),!0}const P=new O(A,v,H,j,F);return P.length>this[o]?(this[n]&&this[n](A,v),!1):(this[x]+=P.length,this[d].unshift(P),this[a].set(A,this[d].head),E(this),!0)}has(A){if(!this[a].has(A))return!1;const v=this[a].get(A).value;return!c(this,v)}get(A){return f(this,A,!0)}peek(A){return f(this,A,!1)}pop(){const A=this[d].tail;return A?(_(this,A),A.value):null}del(A){_(this,this[a].get(A))}load(A){this.reset();const v=Date.now();for(let F=A.length-1;F>=0;F--){const j=A[F],H=j.e||0;if(0===H)this.set(j.k,j.v);else{const P=H-v;P>0&&this.set(j.k,j.v,P)}}}prune(){this[a].forEach((A,v)=>f(this,v,!1))}}},{yallist:121}],51:[function(G,K,ee){var M=G;G=function(){},ee=K.exports={Lexer:G("./lib/N3Lexer"),Parser:G("./lib/N3Parser"),Writer:G("./lib/N3Writer"),Store:G("./lib/N3Store"),StreamParser:G("./lib/N3StreamParser"),StreamWriter:G("./lib/N3StreamWriter"),Util:G("./lib/N3Util")},Object.keys(ee).forEach(function(o){Object.defineProperty(ee,o,{configurable:!0,enumerable:!0,get:function(){return delete ee[o],ee[o]=M("./lib/N3"+o)}})})},{"./lib/N3Lexer":52,"./lib/N3Parser":53,"./lib/N3Store":54,"./lib/N3StreamParser":55,"./lib/N3StreamWriter":56,"./lib/N3Util":57,"./lib/N3Writer":58}],52:[function(G,K,ee){(function(M){(function(){var o=String.fromCharCode,x="function"==typeof M?M:function(s){setTimeout(s,0)},h=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},r=/[\x00-\x20<>\\"\{\}\|\^\`]/;function n(s){if(!(this instanceof n))return new n(s);if((s=s||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var d=this;this._tokenize=this.tokenize,this.tokenize=function(a,y){this._tokenize(a,function(l,f){!l&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(f.type)?y&&y(l,f):y&&y(l||d._syntaxError(f.type,y=null))})}}this._n3Mode=!1!==s.n3,this._comments=!!s.comments}n.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(s,d){for(var a=this._input,y=this._comments;;){for(var l,f;l=this._newline.exec(a);)y&&(f=this._comment.exec(l[0]))&&s(null,{line:this._line,type:"comment",value:f[1],prefix:""}),a=a.substr(l[0].length,a.length),this._line++;if((l=this._whitespace.exec(a))&&(a=a.substr(l[0].length,a.length)),this._endOfFile.test(a))return d&&(y&&(f=this._comment.exec(a))&&s(null,{line:this._line,type:"comment",value:f[1],prefix:""}),s(a=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=a;var c,E=this._line,_="",O="",R="",A=a[0],v=null,F=0,j=!1;switch(A){case"^":if(a.length<3)break;if("^"!==a[1]){this._n3Mode&&(F=1,_="^");break}if(this._previousMarker="^^","<"!==(a=a.substr(2))[0]){j=!0;break}case"<":if(v=this._unescapedIri.exec(a))_="IRI",O=v[1];else if(v=this._iri.exec(a)){if(null===(c=this._unescape(v[1]))||r.test(c))return P(this);_="IRI",O=c}else this._n3Mode&&a.length>1&&"="===a[1]&&(_="inverse",F=2,O="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((v=this._blank.exec(a))||d&&(v=this._blank.exec(a+" ")))&&(_="blank",R="_",O=v[1]);break;case'"':case"'":if(v=this._unescapedString.exec(a))_="literal",O=v[0];else if(v=this._singleQuotedString.exec(a)){if(null===(c=this._unescape(v[0])))return P(this);_="literal",O=c.replace(/^'|'$/g,'"')}else if(v=this._tripleQuotedString.exec(a)){if(c=v[1]||v[2],this._line+=c.split(/\r\n|\r|\n/).length-1,null===(c=this._unescape(c)))return P(this);_="literal",O=c.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(v=this._variable.exec(a))&&(_="var",O=v[0]);break;case"@":"literal"===this._previousMarker&&(v=this._langcode.exec(a))?(_="langcode",O=v[1]):(v=this._keyword.exec(a))&&(_=v[0]);break;case".":if(1===a.length?d:a[1]<"0"||a[1]>"9"){_=".",F=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(v=this._number.exec(a)||d&&(v=this._number.exec(a+" ")))&&(_="literal",O='"'+v[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(v[1]?"double":/^[+\-]?\d+$/.test(v[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(v=this._sparqlKeyword.exec(a))?_=v[0].toUpperCase():j=!0;break;case"f":case"t":(v=this._boolean.exec(a))?(_="literal",O='"'+v[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):j=!0;break;case"a":(v=this._shortPredicates.exec(a))?(_="abbreviation",O="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):j=!0;break;case"=":this._n3Mode&&a.length>1&&(_="abbreviation",">"!==a[1]?(F=1,O="http://www.w3.org/2002/07/owl#sameAs"):(F=2,O="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":F=1,_=A;break;default:j=!0}if(j&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(v=this._prefix.exec(a))?((v=this._prefixed.exec(a))||d&&(v=this._prefixed.exec(a+" ")))&&(_="prefixed",R=v[1]||"",O=this._unescape(v[2])):(_="prefix",O=v[1]||"")),"^^"===this._previousMarker)switch(_){case"prefixed":_="type";break;case"IRI":_="typeIRI";break;default:_=""}if(!_)return d||!/^'''|^"""/.test(a)&&/\n|\r/.test(a)?P(this):this._input=a;var H={line:E,type:_,value:O,prefix:R};s(null,H),this.previousToken=H,this._previousMarker=_,a=a.substr(F||v[0].length,a.length)}function P(X){s(X._syntaxError(/^\S*/.exec(a)[0]))}},_unescape:function(s){try{return s.replace(h,function(d,a,y,l){var f;if(a){if(f=parseInt(a,16),isNaN(f))throw new Error;return o(f)}if(y){if(f=parseInt(y,16),isNaN(f))throw new Error;return f<=65535?o(f):o(55296+(f-=65536)/1024,56320+(1023&f))}var c=e[l];if(!c)throw new Error;return c})}catch{return null}},_syntaxError:function(s){this._input=null;var d=new Error('Unexpected "'+s+'" on line '+this._line+".");return d.context={token:void 0,line:this._line,previousToken:this.previousToken},d},tokenize:function(s,d){var a=this;if(this._line=1,"string"==typeof s){if(this._input=s,"function"!=typeof d){var y,l=[];if(this._tokenizeToEnd(function(f,c){f?y=f:l.push(c)},!0),y)throw y;return l}x(function(){a._tokenizeToEnd(d,!0)})}else this._input="","function"==typeof s.setEncoding&&s.setEncoding("utf8"),s.on("data",function(f){null!==a._input&&(a._input+=f,a._tokenizeToEnd(d,!1))}),s.on("end",function(){null!==a._input&&a._tokenizeToEnd(d,!0)}),s.on("error",d)}},K.exports=n}).call(this)}).call(this,G("timers").setImmediate)},{timers:111}],53:[function(G,K,ee){var M=G("./N3Lexer"),o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",x=o+"nil",h=o+"first",e=o+"rest",r="urn:n3:quantifiers",n=/^[a-z][a-z0-9+.-]*:/i,s=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,d=/(?:^|\/)\.\.?(?:$|[\/#?])/,a=0,y=0;function l(c){if(!(this instanceof l))return new l(c);this._contextStack=[],this._graph=null,c=c||{},this._setBase(c.documentIRI);var E="string"==typeof c.format?c.format.match(/\w*$/)[0].toLowerCase():"",_="turtle"===E,O="trig"===E,R=/triple/.test(E),A=/quad/.test(E),v=this._n3Mode=/n3/.test(E),F=R||A;(this._supportsNamedGraphs=!(_||v))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(_||O||R||v),F&&(this._base="",this._resolveIRI=function(j){return this._error("Disallowed relative IRI",j),this._callback=f,this._subject=null}),this._blankNodePrefix="string"!=typeof c.blankNodePrefix?"":"_:"+c.blankNodePrefix.replace(/^_:/,""),this._lexer=c.lexer||new M({lineMode:F,n3:v}),this._explicitQuantifiers=!!c.explicitQuantifiers}function f(){}l._resetBlankNodeIds=function(){a=y=0},l.prototype={_setBase:function(c){if(c){var E=c.indexOf("#");E>=0&&(c=c.substr(0,E)),this._base=c,this._basePath=c.indexOf("/")<0?c:c.replace(/[^\/?]*(?:\?.*)?$/,""),c=c.match(s),this._baseRoot=c[0],this._baseScheme=c[1]}else this._base=null},_saveContext:function(c,E,_,O,R){var A=this._n3Mode;this._contextStack.push({subject:_,predicate:O,object:R,graph:E,type:c,inverse:!!A&&this._inversePredicate,blankPrefix:A?this._prefixes._:"",quantified:A?this._quantified:null}),A&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var c=this._contextStack.pop(),E=this._n3Mode;this._subject=c.subject,this._predicate=c.predicate,this._object=c.object,this._graph=c.graph,E&&(this._inversePredicate=c.inverse,this._prefixes._=c.blankPrefix,this._quantified=c.quantified)},_readInTopContext:function(c){switch(c.type){case"eof":return null!==this._graph?this._error("Unclosed graph",c):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(c)}},_readEntity:function(c,E){var _;switch(c.type){case"IRI":case"typeIRI":_=null===this._base||n.test(c.value)?c.value:this._resolveIRI(c);break;case"type":case"blank":case"prefixed":var O=this._prefixes[c.prefix];if(void 0===O)return this._error('Undefined prefix "'+c.prefix+':"',c);_=O+c.value;break;case"var":return c.value;default:return this._error("Expected entity but got "+c.type,c)}return!E&&this._n3Mode&&_ in this._quantified&&(_=this._quantified[_]),_},_readSubject:function(c){switch(this._predicate=null,c.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+y++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,x,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+y++,null,null),this._readSubject):this._error("Unexpected graph",c);case"}":return this._readPunctuation(c);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',c);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',c);default:if(void 0===(this._subject=this._readEntity(c)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(c){var E=c.type;switch(E){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=c.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+E,c):(this._subject=null,"]"===E?this._readBlankNodeTail(c):this._readPunctuation(c));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",c);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",c);default:if(void 0===(this._predicate=this._readEntity(c)))return}return this._readObject},_readObject:function(c){switch(c.type){case"literal":return this._object=c.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+y++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,x),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+y++),this._readSubject):this._error("Unexpected graph",c);default:if(void 0===(this._object=this._readEntity(c)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(c){return"{"===c.type?this._readGraph(c):this._readPredicate(c)},_readGraph:function(c){return"{"!==c.type?this._error("Expected graph but got "+c.type,c):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(c){return"]"===c.type?(this._subject=null,this._readBlankNodeTail(c)):(this._predicate=null,this._readPredicate(c))},_readBlankNodeTail:function(c){if("]"!==c.type)return this._readBlankNodePunctuation(c);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var E=null===this._predicate;return this._restoreContext(),null===this._object?E?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(c){return"."!==c.type||this._contextStack.length?this._readPredicate(c):(this._subject=null,this._readPunctuation(c))},_readListItem:function(c){var E=null,_=null,O=this._subject,R=this._contextStack,A=R[R.length-1],v=this._readListItem,F=!0;switch(c.type){case"[":this._saveContext("blank",this._graph,_="_:b"+y++,h,this._subject=E="_:b"+y++),v=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,_="_:b"+y++,h,x),this._subject=null;break;case")":if(this._restoreContext(),0!==R.length&&"list"===R[R.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(v=this._readPredicate,this._subject===x)return v}else if(v=this._getContextEndReader(),this._object===x)return v;_=x;break;case"literal":E=c.value,F=!1,v=this._readListItemDataTypeOrLang;break;default:if(void 0===(E=this._readEntity(c)))return}if(null===_&&(this._subject=_="_:b"+y++),null===O?null===A.predicate?A.subject=_:A.object=_:this._triple(O,e,_,this._graph),null!==E){if(this._n3Mode&&("IRI"===c.type||"prefixed"===c.type))return this._saveContext("item",this._graph,_,h,E),this._subject=E,this._predicate=null,this._getPathReader(this._readListItem);F?this._triple(_,h,E,this._graph):this._object=E}return v},_readDataTypeOrLang:function(c){return this._completeLiteral(c,!1)},_readListItemDataTypeOrLang:function(c){return this._completeLiteral(c,!0)},_completeLiteral:function(c,E){var _=!1;switch(c.type){case"type":case"typeIRI":var O=this._readEntity(c);if(void 0===O)return;_=!0,this._object+="^^"+O;break;case"langcode":_=!0,this._object+="@"+c.value.toLowerCase()}return E&&this._triple(this._subject,h,this._object,this._graph),_?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(c))},_readFormulaTail:function(c){return"}"!==c.type?this._readPunctuation(c):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(c){var E,_=this._subject,O=this._graph,R=this._inversePredicate;switch(c.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",c);if(this._n3Mode)return this._readFormulaTail(c);this._graph=null;case".":this._subject=null,E=this._contextStack.length?this._readSubject:this._readInTopContext,R&&(this._inversePredicate=!1);break;case";":E=this._readPredicate;break;case",":E=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(O=this._readEntity(c))){E=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',c)}if(null!==_){var A=this._predicate,v=this._object;R?this._triple(v,A,_,O):this._triple(_,A,v,O)}return E},_readBlankNodePunctuation:function(c){var E;switch(c.type){case";":E=this._readPredicate;break;case",":E=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',c)}return this._triple(this._subject,this._predicate,this._object,this._graph),E},_readQuadPunctuation:function(c){return"."!==c.type?this._error("Expected dot to follow quad",c):this._readInTopContext},_readPrefix:function(c){return"prefix"!==c.type?this._error("Expected prefix to follow @prefix",c):(this._prefix=c.value,this._readPrefixIRI)},_readPrefixIRI:function(c){if("IRI"!==c.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',c);var E=this._readEntity(c);return this._prefixes[this._prefix]=E,this._prefixCallback(this._prefix,E),this._readDeclarationPunctuation},_readBaseIRI:function(c){return"IRI"!==c.type?this._error("Expected IRI to follow base declaration",c):(this._setBase(null===this._base||n.test(c.value)?c.value:this._resolveIRI(c)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(c){switch(c.type){case"IRI":case"blank":case"prefixed":return this._readSubject(c),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",c)}},_readNamedGraphBlankLabel:function(c){return"]"!==c.type?this._error("Invalid graph label",c):(this._subject="_:b"+y++,this._readGraph)},_readDeclarationPunctuation:function(c){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(c)):"."!==c.type?this._error("Expected declaration to end with a dot",c):this._readInTopContext},_readQuantifierList:function(c){var E;switch(c.type){case"IRI":case"prefixed":if(void 0!==(E=this._readEntity(c,!0)))break;default:return this._error("Unexpected "+c.type,c)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+y++,r):this._triple(this._subject,e,this._subject="_:b"+y++,r),this._triple(this._subject,h,E,r)):this._quantified[E]=this._quantifiedPrefix+y++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(c){return","===c.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,x,r),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(c))},_getPathReader:function(c){return this._afterPath=c,this._readPath},_readPath:function(c){switch(c.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var E=this._contextStack,_=E.length&&E[E.length-1];if(_&&"item"===_.type){var O=this._subject;this._restoreContext(),this._triple(this._subject,h,O,this._graph)}return this._afterPath(c)}},_readForwardPath:function(c){var E,_,O="_:b"+y++;if(void 0!==(_=this._readEntity(c)))return null===this._predicate?(E=this._subject,this._subject=O):(E=this._object,this._object=O),this._triple(E,_,O,this._graph),this._readPath},_readBackwardPath:function(c){var E,_,O="_:b"+y++;if(void 0!==(E=this._readEntity(c)))return null===this._predicate?(_=this._subject,this._subject=O):(_=this._object,this._object=O),this._triple(O,E,_,this._graph),this._readPath},_getContextEndReader:function(){var c=this._contextStack;if(!c.length)return this._readPunctuation;switch(c[c.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(c,E,_,O){this._callback(null,{subject:c,predicate:E,object:_,graph:O||""})},_error:function(c,E){var _=new Error(c+" on line "+E.line+".");_.context={token:E,line:E.line,previousToken:this._lexer.previousToken},this._callback(_),this._callback=f},_resolveIRI:function(c){var E=c.value;switch(E[0]){case void 0:return this._base;case"#":return this._base+E;case"?":return this._base.replace(/(?:\?.*)?$/,E);case"/":return("/"===E[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(E);default:return this._removeDotSegments(this._basePath+E)}},_removeDotSegments:function(c){if(!d.test(c))return c;for(var E="",_=c.length,O=-1,R=-1,A=0,v="/";O<_;){switch(v){case":":if(R<0&&"/"===c[++O]&&"/"===c[++O])for(;(R=O+1)<_&&"/"!==c[R];)O=R;break;case"?":case"#":O=_;break;case"/":if("."===c[O+1])switch(v=c[1+ ++O]){case"/":E+=c.substring(A,O-1),A=O+1;break;case void 0:case"?":case"#":return E+c.substring(A,O)+c.substr(O+1);case".":if(void 0===(v=c[1+ ++O])||"/"===v||"?"===v||"#"===v){if((A=(E+=c.substring(A,O-2)).lastIndexOf("/"))>=R&&(E=E.substr(0,A)),"/"!==v)return E+"/"+c.substr(O+1);A=O+1}}}v=c[++O]}return E+c.substring(A)},parse:function(c,E,_){var O=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+a+++"_",this._prefixCallback=_||f,this._inversePredicate=!1,this._quantified=Object.create(null),!E){var R,A=[];if(this._callback=function(v,F){v?R=v:F&&A.push(F)},this._lexer.tokenize(c).every(function(v){return O._readCallback=O._readCallback(v)}),R)throw R;return A}this._callback=E,this._lexer.tokenize(c,function(v,F){null!==v?(O._callback(v),O._callback=f):O._readCallback&&(O._readCallback=O._readCallback(F))})}},K.exports=l},{"./N3Lexer":52}],54:[function(G,K,ee){var M=G("./N3Util").expandPrefixedName;function o(h,e){if(!(this instanceof o))return new o(h,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!h||h[0]||(e=h,h=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),h&&this.addTriples(h)}function x(h){return"string"==typeof h||h instanceof String}o.prototype={get size(){var h=this._size;if(null!==h)return h;h=0;var e,r,n=this._graphs;for(var s in n)for(var d in e=n[s].subjects)for(var a in r=e[d])h+=Object.keys(r[a]).length;return this._size=h},_addToIndex:function(h,e,r,n){var s=h[e]||(h[e]={}),d=s[r]||(s[r]={}),a=n in d;return a||(d[n]=null),!a},_removeFromIndex:function(h,e,r,n){var s,d=h[e],a=d[r];for(s in delete a[n],a)return;for(s in delete d[r],d)return;delete h[e]},_findInIndex:function(h,e,r,n,s,d,a,y,l,f){var c,E,_,O=!e+!r+!n>1?Object.keys(this._ids):this._entities;for(var R in e&&((c=h,h={})[e]=c[e]),h){var A=O[R];if(E=h[R])for(var v in r&&((c=E,E={})[r]=c[r]),E){var F=O[v];if(_=E[v])for(var j=(n?n in _?[n]:[]:Object.keys(_)),H=j.length-1;H>=0;H--){var P={subject:"",predicate:"",object:"",graph:y};if(P[s]=A,P[d]=F,P[a]=O[j[H]],f)f.push(P);else if(l(P))return!0}}}return f},_loop:function(h,e){for(var r in h)e(r)},_loopByKey0:function(h,e,r){var n,s;if(n=h[e])for(s in n)r(s)},_loopByKey1:function(h,e,r){var n;for(n in h)h[n][e]&&r(n)},_loopBy2Keys:function(h,e,r,n){var s,d,a;if((s=h[e])&&(d=s[r]))for(a in d)n(a)},_countInIndex:function(h,e,r,n){var s,d,a,y=0;for(var l in e&&((s=h,h={})[e]=s[e]),h)if(d=h[l])for(var f in r&&((s=d,d={})[r]=s[r]),d)(a=d[f])&&(n?n in a&&y++:y+=Object.keys(a).length);return y},_getGraphs:function(h){if(!x(h))return this._graphs;var e={};return e[h]=this._graphs[h],e},_uniqueEntities:function(h){var e=Object.create(null),r=this._entities;return function(n){n in e||(e[n]=!0,h(r[n]))}},addTriple:function(h,e,r,n){e||(n=h.graph,r=h.object,e=h.predicate,h=h.subject),n=n||"";var s=this._graphs[n];s||(s=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(s));var d=this._ids,a=this._entities;h=d[h]||(d[a[++this._id]=h]=this._id),e=d[e]||(d[a[++this._id]=e]=this._id),r=d[r]||(d[a[++this._id]=r]=this._id);var y=this._addToIndex(s.subjects,h,e,r);return this._addToIndex(s.predicates,e,r,h),this._addToIndex(s.objects,r,h,e),this._size=null,y},addTriples:function(h){for(var e=h.length-1;e>=0;e--)this.addTriple(h[e])},addPrefix:function(h,e){this._prefixes[h]=e},addPrefixes:function(h){for(var e in h)this.addPrefix(e,h[e])},removeTriple:function(h,e,r,n){e||(n=h.graph,r=h.object,e=h.predicate,h=h.subject),n=n||"";var s,d,a,y=this._ids,l=this._graphs;if(!((h=y[h])&&(e=y[e])&&(r=y[r])&&(s=l[n])&&(d=s.subjects[h])&&(a=d[e])&&r in a))return!1;for(h in this._removeFromIndex(s.subjects,h,e,r),this._removeFromIndex(s.predicates,e,r,h),this._removeFromIndex(s.objects,r,h,e),null!==this._size&&this._size--,s.subjects)return!0;return delete l[n],!0},removeTriples:function(h){for(var e=h.length-1;e>=0;e--)this.removeTriple(h[e])},getTriples:function(h,e,r,n){var s=this._prefixes;return this.getTriplesByIRI(M(h,s),M(e,s),M(r,s),M(n,s))},getTriplesByIRI:function(h,e,r,n){var s,d,a,y,l=[],f=this._getGraphs(n),c=this._ids;if(x(h)&&!(d=c[h])||x(e)&&!(a=c[e])||x(r)&&!(y=c[r]))return l;for(var E in f)(s=f[E])&&(d?y?this._findInIndex(s.objects,y,d,a,"object","subject","predicate",E,null,l):this._findInIndex(s.subjects,d,a,null,"subject","predicate","object",E,null,l):a?this._findInIndex(s.predicates,a,y,null,"predicate","object","subject",E,null,l):y?this._findInIndex(s.objects,y,null,null,"object","subject","predicate",E,null,l):this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",E,null,l));return l},countTriples:function(h,e,r,n){var s=this._prefixes;return this.countTriplesByIRI(M(h,s),M(e,s),M(r,s),M(n,s))},countTriplesByIRI:function(h,e,r,n){var s,d,a,y,l=0,f=this._getGraphs(n),c=this._ids;if(x(h)&&!(d=c[h])||x(e)&&!(a=c[e])||x(r)&&!(y=c[r]))return 0;for(var E in f)(s=f[E])&&(l+=h?r?this._countInIndex(s.objects,y,d,a):this._countInIndex(s.subjects,d,a,y):e?this._countInIndex(s.predicates,a,y,d):this._countInIndex(s.objects,y,d,a));return l},forEach:function(h,e,r,n,s){var d=this._prefixes;this.forEachByIRI(h,M(e,d),M(r,d),M(n,d),M(s,d))},forEachByIRI:function(h,e,r,n,s){this.someByIRI(function(d){return h(d),!1},e,r,n,s)},every:function(h,e,r,n,s){var d=this._prefixes;return this.everyByIRI(h,M(e,d),M(r,d),M(n,d),M(s,d))},everyByIRI:function(h,e,r,n,s){var d=!1,a=!this.someByIRI(function(y){return d=!0,!h(y)},e,r,n,s);return d&&a},some:function(h,e,r,n,s){var d=this._prefixes;return this.someByIRI(h,M(e,d),M(r,d),M(n,d),M(s,d))},someByIRI:function(h,e,r,n,s){var d,a,y,l,f=this._getGraphs(s),c=this._ids;if(x(e)&&!(a=c[e])||x(r)&&!(y=c[r])||x(n)&&!(l=c[n]))return!1;for(var E in f)if(d=f[E])if(a){if(l){if(this._findInIndex(d.objects,l,a,y,"object","subject","predicate",E,h,null))return!0}else if(this._findInIndex(d.subjects,a,y,null,"subject","predicate","object",E,h,null))return!0}else if(y){if(this._findInIndex(d.predicates,y,l,null,"predicate","object","subject",E,h,null))return!0}else if(l){if(this._findInIndex(d.objects,l,null,null,"object","subject","predicate",E,h,null))return!0}else if(this._findInIndex(d.subjects,null,null,null,"subject","predicate","object",E,h,null))return!0;return!1},getSubjects:function(h,e,r){var n=this._prefixes;return this.getSubjectsByIRI(M(h,n),M(e,n),M(r,n))},getSubjectsByIRI:function(h,e,r){var n=[];return this.forSubjectsByIRI(function(s){n.push(s)},h,e,r),n},forSubjects:function(h,e,r,n){var s=this._prefixes;this.forSubjectsByIRI(h,M(e,s),M(r,s),M(n,s))},forSubjectsByIRI:function(h,e,r,n){var s,d,a,y=this._ids,l=this._getGraphs(n);if(h=this._uniqueEntities(h),!(x(e)&&!(d=y[e])||x(r)&&!(a=y[r])))for(n in l)(s=l[n])&&(d?a?this._loopBy2Keys(s.predicates,d,a,h):this._loopByKey1(s.subjects,d,h):a?this._loopByKey0(s.objects,a,h):this._loop(s.subjects,h))},getPredicates:function(h,e,r){var n=this._prefixes;return this.getPredicatesByIRI(M(h,n),M(e,n),M(r,n))},getPredicatesByIRI:function(h,e,r){var n=[];return this.forPredicatesByIRI(function(s){n.push(s)},h,e,r),n},forPredicates:function(h,e,r,n){var s=this._prefixes;this.forPredicatesByIRI(h,M(e,s),M(r,s),M(n,s))},forPredicatesByIRI:function(h,e,r,n){var s,d,a,y=this._ids,l=this._getGraphs(n);if(h=this._uniqueEntities(h),!(x(e)&&!(d=y[e])||x(r)&&!(a=y[r])))for(n in l)(s=l[n])&&(d?a?this._loopBy2Keys(s.objects,a,d,h):this._loopByKey0(s.subjects,d,h):a?this._loopByKey1(s.predicates,a,h):this._loop(s.predicates,h))},getObjects:function(h,e,r){var n=this._prefixes;return this.getObjectsByIRI(M(h,n),M(e,n),M(r,n))},getObjectsByIRI:function(h,e,r){var n=[];return this.forObjectsByIRI(function(s){n.push(s)},h,e,r),n},forObjects:function(h,e,r,n){var s=this._prefixes;this.forObjectsByIRI(h,M(e,s),M(r,s),M(n,s))},forObjectsByIRI:function(h,e,r,n){var s,d,a,y=this._ids,l=this._getGraphs(n);if(h=this._uniqueEntities(h),!(x(e)&&!(d=y[e])||x(r)&&!(a=y[r])))for(n in l)(s=l[n])&&(d?a?this._loopBy2Keys(s.subjects,d,a,h):this._loopByKey1(s.objects,d,h):a?this._loopByKey0(s.predicates,a,h):this._loop(s.objects,h))},getGraphs:function(h,e,r){var n=this._prefixes;return this.getGraphsByIRI(M(h,n),M(e,n),M(r,n))},getGraphsByIRI:function(h,e,r){var n=[];return this.forGraphsByIRI(function(s){n.push(s)},h,e,r),n},forGraphs:function(h,e,r,n){var s=this._prefixes;this.forGraphsByIRI(h,M(e,s),M(r,s),M(n,s))},forGraphsByIRI:function(h,e,r,n){for(var s in this._graphs)this.someByIRI(function(d){return h(d.graph),!0},e,r,n,s)},createBlankNode:function(h){var e,r;if(h)for(e=h="_:"+h,r=1;this._ids[e];)e=h+r++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},K.exports=o},{"./N3Util":57}],55:[function(G,K,ee){var M=G("stream").Transform,o=G("util"),x=G("./N3Parser.js");function h(e){if(!(this instanceof h))return new h(e);M.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var r,n,s=this;new x(e).parse({on:function(d,a){switch(d){case"data":r=a;break;case"end":n=a}}},function(d,a){d&&s.emit("error",d)||a&&s.push(a)},function(d,a){s.emit("prefix",d,a)}),this._transform=function(d,a,y){r(d),y()},this._flush=function(d){n(),d()}}o.inherits(h,M),K.exports=h},{"./N3Parser.js":53,stream:76,util:117}],56:[function(G,K,ee){var M=G("stream").Transform,o=G("util"),x=G("./N3Writer.js");function h(e){if(!(this instanceof h))return new h(e);M.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var r=this,n=new x({write:function(s,d,a){r.push(s),a&&a()},end:function(s){r.push(null),s&&s()}},e);this._transform=function(s,d,a){n.addTriple(s,a)},this._flush=function(s){n.end(s)}}o.inherits(h,M),K.exports=h},{"./N3Writer.js":58,stream:76,util:117}],57:[function(G,K,ee){var M="http://www.w3.org/2001/XMLSchema#",o=M+"string",x=M+"integer",h=M+"double",e=M+"boolean",r={isIRI:function(n){if("string"!=typeof n)return!1;if(0===n.length)return!0;var s=n[0];return'"'!==s&&"_"!==s},isLiteral:function(n){return"string"==typeof n&&'"'===n[0]},isBlank:function(n){return"string"==typeof n&&"_:"===n.substr(0,2)},isDefaultGraph:function(n){return!n},inDefaultGraph:function(n){return!n.graph},getLiteralValue:function(n){var s=/^"([^]*)"/.exec(n);if(!s)throw new Error(n+" is not a literal");return s[1]},getLiteralType:function(n){var s=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(n);if(!s)throw new Error(n+" is not a literal");return s[1]||(s[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":o)},getLiteralLanguage:function(n){var s=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(n);if(!s)throw new Error(n+" is not a literal");return s[1]?s[1].toLowerCase():""},isPrefixedName:function(n){return"string"==typeof n&&/^[^:\/"']*:[^:\/"']+$/.test(n)},expandPrefixedName:function(n,s){var d,a,y,l=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(n);return l&&(a=s[d=l[1]],y=l.index),void 0===a?n:0===y?a+n.substr(d.length+1):n.substr(0,y+3)+a+n.substr(y+d.length+4)},createIRI:function(n){return n&&'"'===n[0]?r.getLiteralValue(n):n},createLiteral:function(n,s){if(!s)switch(typeof n){case"boolean":s=e;break;case"number":isFinite(n)?s=n%1==0?x:h:(s=h,isNaN(n)||(n=n>0?"INF":"-INF"));break;default:return'"'+n+'"'}return'"'+n+(/^[a-z]+(-[a-z0-9]+)*$/i.test(s)?'"@'+s.toLowerCase():'"^^'+s)},prefix:function(n){return r.prefixes({"":n})("")},prefixes:function(n){var s=Object.create(null);for(var d in n)a(d,n[d]);function a(y,l){if(l||!(y in s)){var f=Object.create(null);l=l||"",s[y]=function(c){return f[c]||(f[c]=l+c)}}return s[y]}return a}};K.exports=r},{}],58:[function(G,K,ee){var M=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,x=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,h={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(n,s){if(!(this instanceof e))return new e(n,s);if(n&&"function"!=typeof n.write&&(s=n,n=null),s=s||{},n)this._outputStream=n,this._endStream=void 0===s.end||!!s.end;else{var d="";this._outputStream={write:function(a,y,l){d+=a,l&&l()},end:function(a){a&&a(null,d)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(s.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),s.prefixes&&this.addPrefixes(s.prefixes))}function r(n){var s=h[n];return void 0===s&&(1===n.length?(s=n.charCodeAt(0).toString(16),s="\\u0000".substr(0,6-s.length)+s):(s=(1024*(n.charCodeAt(0)-55296)+n.charCodeAt(1)+9216).toString(16),s="\\U00000000".substr(0,10-s.length)+s)),s}e.prototype={_write:function(n,s){this._outputStream.write(n,"utf8",s)},_writeTriple:function(n,s,d,a,y){try{this._graph!==a&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(a?this._encodeIriOrBlankNode(a)+" {\n":"")),this._subject=null,this._graph="["!==a[0]?a:"]"),this._subject===n?this._predicate===s?this._write(", "+this._encodeObject(d),y):this._write(";\n    "+this._encodePredicate(this._predicate=s)+" "+this._encodeObject(d),y):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=n)+" "+this._encodePredicate(this._predicate=s)+" "+this._encodeObject(d),y)}catch(l){y&&y(l)}},_writeTripleLine:function(n,s,d,a,y){delete this._prefixMatch;try{this._write(this.tripleToString(n,s,d,a),y)}catch(l){y&&y(l)}},tripleToString:function(n,s,d,a){return this._encodeIriOrBlankNode(n)+" "+this._encodeIriOrBlankNode(s)+" "+this._encodeObject(d)+(a?" "+this._encodeIriOrBlankNode(a)+".\n":".\n")},triplesToString:function(n){return n.map(function(s){return this.tripleToString(s.subject,s.predicate,s.object,s.graph)},this).join("")},_encodeIriOrBlankNode:function(n){var s=n[0];if("["===s||"("===s||"_"===s&&":"===n[1])return n;o.test(n)&&(n=n.replace(x,r));var d=this._prefixRegex.exec(n);return d?d[1]?this._prefixIRIs[d[1]]+d[2]:n:"<"+n+">"},_encodeLiteral:function(n,s,d){return o.test(n)&&(n=n.replace(x,r)),d?'"'+n+'"@'+d:s?'"'+n+'"^^'+this._encodeIriOrBlankNode(s):'"'+n+'"'},_encodeSubject:function(n){if('"'===n[0])throw new Error("A literal as subject is not allowed: "+n);return"["===n[0]&&(this._subject="]"),this._encodeIriOrBlankNode(n)},_encodePredicate:function(n){if('"'===n[0])throw new Error("A literal as predicate is not allowed: "+n);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===n?"a":this._encodeIriOrBlankNode(n)},_encodeObject:function(n){if('"'!==n[0])return this._encodeIriOrBlankNode(n);var s=M.exec(n);if(!s)throw new Error("Invalid literal: "+n);return this._encodeLiteral(s[1],s[2],s[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(n,s,d,a,y){void 0===d?this._writeTriple(n.subject,n.predicate,n.object,n.graph||"",s):"string"!=typeof a?this._writeTriple(n,s,d,"",a):this._writeTriple(n,s,d,a,y)},addTriples:function(n){for(var s=0;s<n.length;s++)this.addTriple(n[s])},addPrefix:function(n,s,d){var a={};a[n]=s,this.addPrefixes(a,d)},addPrefixes:function(n,s){var d=this._prefixIRIs,a=!1;for(var y in n){var l=n[y];/[#\/]$/.test(l)&&d[l]!==(y+=":")&&(a=!0,d[l]=y,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+y+" <"+l+">.\n"))}if(a){var f="",c="";for(var E in d)f+=f?"|"+E:E,c+=(c?"|":"")+d[E];f=f.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+c+")[^/]*$|^("+f+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(a?"\n":"",s)},blank:function(n,s){var d,a,y=n;switch(void 0===n?y=[]:"string"==typeof n?y=[{predicate:n,object:s}]:"length"in n||(y=[n]),a=y.length){case 0:return"[]";case 1:if("["!==(d=y[0]).object[0])return"[ "+this._encodePredicate(d.predicate)+" "+this._encodeObject(d.object)+" ]";default:for(var l="[",f=0;f<a;f++)(d=y[f]).predicate===n?l+=", "+this._encodeObject(d.object):(l+=(f?";\n  ":"\n  ")+this._encodePredicate(d.predicate)+" "+this._encodeObject(d.object),n=d.predicate);return l+"\n]"}},list:function(n){for(var s=n&&n.length||0,d=new Array(s),a=0;a<s;a++)d[a]=this._encodeObject(n[a]);return"("+d.join(" ")+")"},_prefixRegex:/$0^/,end:function(n){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var s=n&&function(d,a){s=null,n(d,a)};if(this._endStream)try{return this._outputStream.end(s)}catch{}s&&s()}},K.exports=e},{}],59:[function(G,K,ee){var M,o,x=K.exports={};function h(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(E){if(M===setTimeout)return setTimeout(E,0);if((M===h||!M)&&setTimeout)return M=setTimeout,setTimeout(E,0);try{return M(E,0)}catch{try{return M.call(null,E,0)}catch{return M.call(this,E,0)}}}!function(){try{M="function"==typeof setTimeout?setTimeout:h}catch{M=h}try{o="function"==typeof clearTimeout?clearTimeout:e}catch{o=e}}();var n,s=[],d=!1,a=-1;function y(){d&&n&&(d=!1,n.length?s=n.concat(s):a=-1,s.length&&l())}function l(){if(!d){var E=r(y);d=!0;for(var _=s.length;_;){for(n=s,s=[];++a<_;)n&&n[a].run();a=-1,_=s.length}n=null,d=!1,function(O){if(o===clearTimeout)return clearTimeout(O);if((o===e||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(O);try{o(O)}catch{try{return o.call(null,O)}catch{return o.call(this,O)}}}(E)}}function f(E,_){this.fun=E,this.array=_}function c(){}x.nextTick=function(E){var _=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)_[O-1]=arguments[O];s.push(new f(E,_)),1!==s.length||d||r(l)},f.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=c,x.addListener=c,x.once=c,x.off=c,x.removeListener=c,x.removeAllListeners=c,x.emit=c,x.prependListener=c,x.prependOnceListener=c,x.listeners=function(E){return[]},x.binding=function(E){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(E){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],60:[function(G,K,ee){(function(M){(function(){!function(o){var x="object"==typeof ee&&ee&&!ee.nodeType&&ee,h="object"==typeof K&&K&&!K.nodeType&&K,e="object"==typeof M&&M;e.global!==e&&e.window!==e&&e.self!==e||(o=e);var r,n,s=2147483647,d=36,a=/^xn--/,y=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,E=String.fromCharCode;function _(X){throw new RangeError(f[X])}function O(X,Y){for(var ie=X.length,fe=[];ie--;)fe[ie]=Y(X[ie]);return fe}function R(X,Y){var ie=X.split("@"),fe="";return ie.length>1&&(fe=ie[0]+"@",X=ie[1]),fe+O((X=X.replace(l,".")).split("."),Y).join(".")}function A(X){for(var Y,ie,fe=[],oe=0,le=X.length;oe<le;)(Y=X.charCodeAt(oe++))>=55296&&Y<=56319&&oe<le?56320==(64512&(ie=X.charCodeAt(oe++)))?fe.push(((1023&Y)<<10)+(1023&ie)+65536):(fe.push(Y),oe--):fe.push(Y);return fe}function v(X){return O(X,function(Y){var ie="";return Y>65535&&(ie+=E((Y-=65536)>>>10&1023|55296),Y=56320|1023&Y),ie+E(Y)}).join("")}function F(X,Y){return X+22+75*(X<26)-((0!=Y)<<5)}function j(X,Y,ie){var fe=0;for(X=ie?c(X/700):X>>1,X+=c(X/Y);X>455;fe+=d)X=c(X/35);return c(fe+36*X/(X+38))}function H(X){var Y,ie,fe,oe,le,V,$,ne,pe,Fe,ve,ce=[],_e=X.length,Ne=0,Qe=128,te=72;for((ie=X.lastIndexOf("-"))<0&&(ie=0),fe=0;fe<ie;++fe)X.charCodeAt(fe)>=128&&_("not-basic"),ce.push(X.charCodeAt(fe));for(oe=ie>0?ie+1:0;oe<_e;){for(le=Ne,V=1,$=d;oe>=_e&&_("invalid-input"),((ne=(ve=X.charCodeAt(oe++))-48<10?ve-22:ve-65<26?ve-65:ve-97<26?ve-97:d)>=d||ne>c((s-Ne)/V))&&_("overflow"),Ne+=ne*V,!(ne<(pe=$<=te?1:$>=te+26?26:$-te));$+=d)V>c(s/(Fe=d-pe))&&_("overflow"),V*=Fe;te=j(Ne-le,Y=ce.length+1,0==le),c(Ne/Y)>s-Qe&&_("overflow"),Qe+=c(Ne/Y),Ne%=Y,ce.splice(Ne++,0,Qe)}return v(ce)}function P(X){var Y,ie,fe,oe,le,V,$,ne,pe,Fe,ve,ce,_e,Ne,Qe,te=[];for(ce=(X=A(X)).length,Y=128,ie=0,le=72,V=0;V<ce;++V)(ve=X[V])<128&&te.push(E(ve));for(fe=oe=te.length,oe&&te.push("-");fe<ce;){for($=s,V=0;V<ce;++V)(ve=X[V])>=Y&&ve<$&&($=ve);for($-Y>c((s-ie)/(_e=fe+1))&&_("overflow"),ie+=($-Y)*_e,Y=$,V=0;V<ce;++V)if((ve=X[V])<Y&&++ie>s&&_("overflow"),ve==Y){for(ne=ie,pe=d;!(ne<(Fe=pe<=le?1:pe>=le+26?26:pe-le));pe+=d)Qe=ne-Fe,Ne=d-Fe,te.push(E(F(Fe+Qe%Ne,0))),ne=c(Qe/Ne);te.push(E(F(ne,0))),le=j(ie,_e,fe==oe),ie=0,++fe}++ie,++Y}return te.join("")}if(r={version:"1.4.1",ucs2:{decode:A,encode:v},decode:H,encode:P,toASCII:function(X){return R(X,function(Y){return y.test(Y)?"xn--"+P(Y):Y})},toUnicode:function(X){return R(X,function(Y){return a.test(Y)?H(Y.slice(4).toLowerCase()):Y})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(x&&h)if(K.exports==x)h.exports=r;else for(n in r)r.hasOwnProperty(n)&&(x[n]=r[n]);else o.punycode=r}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(G,K,ee){"use strict";function M(x,h){return Object.prototype.hasOwnProperty.call(x,h)}K.exports=function(x,h,e,r){h=h||"&",e=e||"=";var n={};if("string"!=typeof x||0===x.length)return n;var s=/\+/g;x=x.split(h);var d=1e3;r&&"number"==typeof r.maxKeys&&(d=r.maxKeys);var a=x.length;d>0&&a>d&&(a=d);for(var y=0;y<a;++y){var l,f,c,E,_=x[y].replace(s,"%20"),O=_.indexOf(e);O>=0?(l=_.substr(0,O),f=_.substr(O+1)):(l=_,f=""),c=decodeURIComponent(l),E=decodeURIComponent(f),M(n,c)?o(n[c])?n[c].push(E):n[c]=[n[c],E]:n[c]=E}return n};var o=Array.isArray||function(x){return"[object Array]"===Object.prototype.toString.call(x)}},{}],62:[function(G,K,ee){"use strict";var M=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};K.exports=function(e,r,n,s){return r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?x(h(e),function(d){var a=encodeURIComponent(M(d))+n;return o(e[d])?x(e[d],function(y){return a+encodeURIComponent(M(y))}).join(r):a+encodeURIComponent(M(e[d]))}).join(r):s?encodeURIComponent(M(s))+n+encodeURIComponent(M(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function x(e,r){if(e.map)return e.map(r);for(var n=[],s=0;s<e.length;s++)n.push(r(e[s],s));return n}var h=Object.keys||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(n);return r}},{}],63:[function(G,K,ee){"use strict";ee.decode=ee.parse=G("./decode"),ee.encode=ee.stringify=G("./encode")},{"./decode":61,"./encode":62}],64:[function(G,K,ee){K.exports=G("./lib")},{"./lib":73}],65:[function(G,K,ee){"use strict";K.exports=class Ga{constructor(o,x=new Map,h=0){this.prefix=o,this._existing=x,this.counter=h}clone(){const{prefix:o,_existing:x,counter:h}=this;return new Ga(o,new Map(x),h)}getId(o){const x=o&&this._existing.get(o);if(x)return x;const h=this.prefix+this.counter;return this.counter++,o&&this._existing.set(o,h),h}hasId(o){return this._existing.has(o)}getOldIds(){return[...this._existing.keys()]}}},{}],66:[function(G,K,ee){"use strict";G("setimmediate");const M=self.crypto||self.msCrypto;K.exports=class{constructor(o){if(!M||!M.subtle)throw new Error("crypto.subtle not found.");if("sha256"===o)this.algorithm={name:"SHA-256"};else{if("sha1"!==o)throw new Error(`Unsupported algorithm "${o}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(o){this._content+=o}async digest(){const o=(new TextEncoder).encode(this._content),x=new Uint8Array(await M.subtle.digest(this.algorithm,o));let h="";for(let e=0;e<x.length;++e)h+=x[e].toString(16).padStart(2,"0");return h}}},{setimmediate:75}],67:[function(G,K,ee){"use strict";const M="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",o="http://www.w3.org/2001/XMLSchema#string",x="NamedNode",h="BlankNode",e="Literal",r="DefaultGraph",n={};function s(y,l){return y.subject.termType===l.subject.termType&&y.object.termType===l.object.termType&&y.subject.value===l.subject.value&&y.predicate.value===l.predicate.value&&y.object.value===l.object.value&&(y.object.termType!==e||y.object.datatype.termType===l.object.datatype.termType&&y.object.language===l.object.language&&y.object.datatype.value===l.object.datatype.value)}(()=>{const y="(?:<([^:]+:[^>]*)>)",l="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",f=l+"0-9-\xb7\u0300-\u036f\u203f-\u2040",c="(_:(?:["+l+"0-9])(?:(?:["+f+".])*(?:["+f+"]))?)",E="[ \\t]+",_="[ \\t]*",O="(?:"+y+"|"+c+")"+E,R=y+E,A="(?:"+y+"|"+c+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+y+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+_,v="(?:\\.|(?:(?:"+y+"|"+c+")"+_+"\\.))";n.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,n.empty=new RegExp("^"+_+"$"),n.quad=new RegExp("^"+_+O+R+A+v+_+"$")})(),K.exports=class An{static parse(l){const f=[],c={},E=l.split(n.eoln);let _=0;for(const O of E){if(_++,n.empty.test(O))continue;const R=O.match(n.quad);if(null===R)throw new Error("N-Quads parse error on line "+_+".");const A={subject:null,predicate:null,object:null,graph:null};if(void 0!==R[1]?A.subject={termType:x,value:R[1]}:A.subject={termType:h,value:R[2]},A.predicate={termType:x,value:R[3]},void 0!==R[4]?A.object={termType:x,value:R[4]}:void 0!==R[5]?A.object={termType:h,value:R[5]}:(A.object={termType:e,value:void 0,datatype:{termType:x}},void 0!==R[7]?A.object.datatype.value=R[7]:void 0!==R[8]?(A.object.datatype.value=M,A.object.language=R[8]):A.object.datatype.value=o,A.object.value=R[6].replace(a,function(v,F,j,H){if(F)switch(F){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(j)return String.fromCharCode(parseInt(j,16));if(H)throw new Error("Unsupported U escape")})),void 0!==R[9]?A.graph={termType:x,value:R[9]}:void 0!==R[10]?A.graph={termType:h,value:R[10]}:A.graph={termType:r,value:""},A.graph.value in c){let v=!0;const F=c[A.graph.value];for(const j of F)if(s(j,A)){v=!1;break}v&&(F.push(A),f.push(A))}else c[A.graph.value]=[A],f.push(A)}return f}static serialize(l){Array.isArray(l)||(l=An.legacyDatasetToQuads(l));const f=[];for(const c of l)f.push(An.serializeQuad(c));return f.sort().join("")}static serializeQuadComponents(l,f,c,E){let _="";return l.termType===x?_+=`<${l.value}>`:_+=`${l.value}`,_+=` <${f.value}> `,c.termType===x?_+=`<${c.value}>`:c.termType===h?_+=c.value:(_+=`"${O=c.value,O.replace(d,function(R){switch(R){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,c.datatype.value===M?c.language&&(_+=`@${c.language}`):c.datatype.value!==o&&(_+=`^^<${c.datatype.value}>`)),E.termType===x?_+=` <${E.value}>`:E.termType===h&&(_+=` ${E.value}`),_+=" .\n",_;var O}static serializeQuad(l){return An.serializeQuadComponents(l.subject,l.predicate,l.object,l.graph)}static legacyDatasetToQuads(l){const f=[],c={"blank node":h,IRI:x,literal:e};for(const E in l)l[E].forEach(_=>{const O={};for(const R in _){const A=_[R],v={termType:c[A.type],value:A.value};v.termType===e&&(v.datatype={termType:x},"datatype"in A&&(v.datatype.value=A.datatype),"language"in A?("datatype"in A||(v.datatype.value=M),v.language=A.language):"datatype"in A||(v.datatype.value=o)),O[R]=v}O.graph="@default"===E?{termType:r,value:""}:{termType:E.startsWith("_:")?h:x,value:E},f.push(O)});return f}};const d=/["\\\n\r]/g,a=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],68:[function(G,K,ee){"use strict";K.exports=class{constructor(M){this.current=M.sort(),this.done=!1,this.dir=new Map;for(let o=0;o<M.length;++o)this.dir.set(M[o],!0)}hasNext(){return!this.done}next(){const{current:M,dir:o}=this,x=M.slice();let h=null,e=0;const r=M.length;for(let n=0;n<r;++n){const s=M[n],d=o.get(s);(null===h||s>h)&&(d&&n>0&&s>M[n-1]||!d&&n<r-1&&s>M[n+1])&&(h=s,e=n)}if(null===h)this.done=!0;else{const n=o.get(h)?e-1:e+1;M[e]=M[n],M[n]=h;for(const s of M)s>h&&o.set(s,!o.get(s))}return x}}},{}],69:[function(G,K,ee){(function(M){(function(){"use strict";const o=G("./IdentifierIssuer"),x=G("./MessageDigest"),h=G("./Permuter"),e=G("./NQuads");function r(n,s){return n.hash<s.hash?-1:n.hash>s.hash?1:0}K.exports=class{constructor({createMessageDigest:n=(()=>new x("sha256")),maxDeepIterations:s=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new o("_:c14n"),this.createMessageDigest=n,this.maxDeepIterations=s,this.quads=null,this.deepIterations=null}async main(n){this.deepIterations=new Map,this.quads=n;for(const c of n)this._addBlankNodeQuadInfo({quad:c,component:c.subject}),this._addBlankNodeQuadInfo({quad:c,component:c.object}),this._addBlankNodeQuadInfo({quad:c,component:c.graph});const s=new Map,d=[...this.blankNodeInfo.keys()];let a=0;for(const c of d)++a%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:c,hashToBlankNodes:s});const y=[...s.keys()].sort(),l=[];for(const c of y){const E=s.get(c);if(E.length>1){l.push(E);continue}const _=E[0];this.canonicalIssuer.getId(_)}for(const c of l){const E=[];for(const _ of c){if(this.canonicalIssuer.hasId(_))continue;const O=new o("_:b");O.getId(_);const R=await this.hashNDegreeQuads(_,O);E.push(R)}E.sort(r);for(const _ of E){const O=_.issuer.getOldIds();for(const R of O)this.canonicalIssuer.getId(R)}}const f=[];for(const c of this.quads){const E=e.serializeQuadComponents(this._componentWithCanonicalId(c.subject),c.predicate,this._componentWithCanonicalId(c.object),this._componentWithCanonicalId(c.graph));f.push(E)}return f.sort(),f.join("")}async hashFirstDegreeQuads(n){const s=[],d=this.blankNodeInfo.get(n),a=d.quads;for(const l of a){const f={subject:null,predicate:l.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(n,l.subject,"subject"),f.object=this.modifyFirstDegreeComponent(n,l.object,"object"),f.graph=this.modifyFirstDegreeComponent(n,l.graph,"graph"),s.push(e.serializeQuad(f))}s.sort();const y=this.createMessageDigest();for(const l of s)y.update(l);return d.hash=await y.digest(),d.hash}async hashRelatedBlankNode(n,s,d,a){let y;y=this.canonicalIssuer.hasId(n)?this.canonicalIssuer.getId(n):d.hasId(n)?d.getId(n):this.blankNodeInfo.get(n).hash;const l=this.createMessageDigest();return l.update(a),"g"!==a&&l.update(this.getRelatedPredicate(s)),l.update(y),l.digest()}async hashNDegreeQuads(n,s){const d=this.deepIterations.get(n)||0;if(d>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(n,d+1);const a=this.createMessageDigest(),y=await this.createHashToRelated(n,s),l=[...y.keys()].sort();for(const f of l){a.update(f);let c,E="";const _=new h(y.get(f));let O=0;for(;_.hasNext();){const R=_.next();++O%3==0&&await this._yield();let A=s.clone(),v="";const F=[];let j=!1;for(const H of R)if(this.canonicalIssuer.hasId(H)?v+=this.canonicalIssuer.getId(H):(A.hasId(H)||F.push(H),v+=A.getId(H)),0!==E.length&&v>E){j=!0;break}if(!j){for(const H of F){const P=await this.hashNDegreeQuads(H,A);if(v+=A.getId(H),v+=`<${P.hash}>`,A=P.issuer,0!==E.length&&v>E){j=!0;break}}j||(0===E.length||v<E)&&(E=v,c=A)}}a.update(E),s=c}return{hash:await a.digest(),issuer:s}}modifyFirstDegreeComponent(n,s){return"BlankNode"!==s.termType?s:{termType:"BlankNode",value:s.value===n?"_:a":"_:z"}}getRelatedPredicate(n){return`<${n.predicate.value}>`}async createHashToRelated(n,s){const d=new Map,a=this.blankNodeInfo.get(n).quads;let y=0;for(const l of a)++y%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:l,component:l.subject,position:"s",id:n,issuer:s,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:l,component:l.object,position:"o",id:n,issuer:s,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:l,component:l.graph,position:"g",id:n,issuer:s,hashToRelated:d})]);return d}async _hashAndTrackBlankNode({id:n,hashToBlankNodes:s}){const d=await this.hashFirstDegreeQuads(n),a=s.get(d);a?a.push(n):s.set(d,[n])}_addBlankNodeQuadInfo({quad:n,component:s}){if("BlankNode"!==s.termType)return;const d=s.value,a=this.blankNodeInfo.get(d);a?a.quads.add(n):this.blankNodeInfo.set(d,{quads:new Set([n]),hash:null})}async _addRelatedBlankNodeHash({quad:n,component:s,position:d,id:a,issuer:y,hashToRelated:l}){if("BlankNode"!==s.termType||s.value===a)return;const f=s.value,c=await this.hashRelatedBlankNode(f,n,y,d),E=l.get(c);E?E.push(f):l.set(c,[f])}_componentWithCanonicalId(n){return"BlankNode"!==n.termType||n.value.startsWith(this.canonicalIssuer.prefix)?n:{termType:"BlankNode",value:this.canonicalIssuer.getId(n.value)}}async _yield(){return new Promise(n=>M(n))}}}).call(this)}).call(this,G("timers").setImmediate)},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68,timers:111}],70:[function(G,K,ee){"use strict";const M=G("./IdentifierIssuer"),o=G("./MessageDigest"),x=G("./Permuter"),h=G("./NQuads");function e(r,n){return r.hash<n.hash?-1:r.hash>n.hash?1:0}K.exports=class{constructor({createMessageDigest:r=(()=>new o("sha256")),maxDeepIterations:n=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new M("_:c14n"),this.createMessageDigest=r,this.maxDeepIterations=n,this.quads=null,this.deepIterations=null}main(r){this.deepIterations=new Map,this.quads=r;for(const l of r)this._addBlankNodeQuadInfo({quad:l,component:l.subject}),this._addBlankNodeQuadInfo({quad:l,component:l.object}),this._addBlankNodeQuadInfo({quad:l,component:l.graph});const n=new Map,s=[...this.blankNodeInfo.keys()];for(const l of s)this._hashAndTrackBlankNode({id:l,hashToBlankNodes:n});const d=[...n.keys()].sort(),a=[];for(const l of d){const f=n.get(l);if(f.length>1){a.push(f);continue}const c=f[0];this.canonicalIssuer.getId(c)}for(const l of a){const f=[];for(const c of l){if(this.canonicalIssuer.hasId(c))continue;const E=new M("_:b");E.getId(c);const _=this.hashNDegreeQuads(c,E);f.push(_)}f.sort(e);for(const c of f){const E=c.issuer.getOldIds();for(const _ of E)this.canonicalIssuer.getId(_)}}const y=[];for(const l of this.quads){const f=h.serializeQuadComponents(this._componentWithCanonicalId({component:l.subject}),l.predicate,this._componentWithCanonicalId({component:l.object}),this._componentWithCanonicalId({component:l.graph}));y.push(f)}return y.sort(),y.join("")}hashFirstDegreeQuads(r){const n=[],s=this.blankNodeInfo.get(r),d=s.quads;for(const y of d){const l={subject:null,predicate:y.predicate,object:null,graph:null};l.subject=this.modifyFirstDegreeComponent(r,y.subject,"subject"),l.object=this.modifyFirstDegreeComponent(r,y.object,"object"),l.graph=this.modifyFirstDegreeComponent(r,y.graph,"graph"),n.push(h.serializeQuad(l))}n.sort();const a=this.createMessageDigest();for(const y of n)a.update(y);return s.hash=a.digest(),s.hash}hashRelatedBlankNode(r,n,s,d){let a;a=this.canonicalIssuer.hasId(r)?this.canonicalIssuer.getId(r):s.hasId(r)?s.getId(r):this.blankNodeInfo.get(r).hash;const y=this.createMessageDigest();return y.update(d),"g"!==d&&y.update(this.getRelatedPredicate(n)),y.update(a),y.digest()}hashNDegreeQuads(r,n){const s=this.deepIterations.get(r)||0;if(s>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(r,s+1);const d=this.createMessageDigest(),a=this.createHashToRelated(r,n),y=[...a.keys()].sort();for(const l of y){d.update(l);let f,c="";const E=new x(a.get(l));for(;E.hasNext();){const _=E.next();let O=n.clone(),R="";const A=[];let v=!1;for(const F of _)if(this.canonicalIssuer.hasId(F)?R+=this.canonicalIssuer.getId(F):(O.hasId(F)||A.push(F),R+=O.getId(F)),0!==c.length&&R>c){v=!0;break}if(!v){for(const F of A){const j=this.hashNDegreeQuads(F,O);if(R+=O.getId(F),R+=`<${j.hash}>`,O=j.issuer,0!==c.length&&R>c){v=!0;break}}v||(0===c.length||R<c)&&(c=R,f=O)}}d.update(c),n=f}return{hash:d.digest(),issuer:n}}modifyFirstDegreeComponent(r,n){return"BlankNode"!==n.termType?n:{termType:"BlankNode",value:n.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return`<${r.predicate.value}>`}createHashToRelated(r,n){const s=new Map,d=this.blankNodeInfo.get(r).quads;for(const a of d)this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:r,issuer:n,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:r,issuer:n,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:r,issuer:n,hashToRelated:s});return s}_hashAndTrackBlankNode({id:r,hashToBlankNodes:n}){const s=this.hashFirstDegreeQuads(r),d=n.get(s);d?d.push(r):n.set(s,[r])}_addBlankNodeQuadInfo({quad:r,component:n}){if("BlankNode"!==n.termType)return;const s=n.value,d=this.blankNodeInfo.get(s);d?d.quads.add(r):this.blankNodeInfo.set(s,{quads:new Set([r]),hash:null})}_addRelatedBlankNodeHash({quad:r,component:n,position:s,id:d,issuer:a,hashToRelated:y}){if("BlankNode"!==n.termType||n.value===d)return;const l=n.value,f=this.hashRelatedBlankNode(l,r,a,s),c=y.get(f);c?c.push(l):y.set(f,[l])}_componentWithCanonicalId({component:r}){return"BlankNode"!==r.termType||r.value.startsWith(this.canonicalIssuer.prefix)?r:{termType:"BlankNode",value:this.canonicalIssuer.getId(r.value)}}}},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68}],71:[function(G,K,ee){"use strict";const M=G("./MessageDigest"),o=G("./URDNA2015");K.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new M("sha1")}modifyFirstDegreeComponent(x,h,e){return"BlankNode"!==h.termType?h:"graph"===e?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:h.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return x.predicate.value}async createHashToRelated(x,h){const e=new Map,r=this.blankNodeInfo.get(x).quads;let n=0;for(const s of r){let d,a;if("BlankNode"===s.subject.termType&&s.subject.value!==x)a=s.subject.value,d="p";else{if("BlankNode"!==s.object.termType||s.object.value===x)continue;a=s.object.value,d="r"}++n%100==0&&await this._yield();const y=await this.hashRelatedBlankNode(a,s,h,d),l=e.get(y);l?l.push(a):e.set(y,[a])}return e}}},{"./MessageDigest":66,"./URDNA2015":69}],72:[function(G,K,ee){"use strict";const M=G("./MessageDigest"),o=G("./URDNA2015Sync");K.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new M("sha1")}modifyFirstDegreeComponent(x,h,e){return"BlankNode"!==h.termType?h:"graph"===e?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:h.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return x.predicate.value}createHashToRelated(x,h){const e=new Map,r=this.blankNodeInfo.get(x).quads;for(const n of r){let s,d;if("BlankNode"===n.subject.termType&&n.subject.value!==x)d=n.subject.value,s="p";else{if("BlankNode"!==n.object.termType||n.object.value===x)continue;d=n.object.value,s="r"}const a=this.hashRelatedBlankNode(d,n,h,s),y=e.get(a);y?y.push(d):e.set(a,[d])}return e}}},{"./MessageDigest":66,"./URDNA2015Sync":70}],73:[function(G,K,ee){"use strict";const M=G("./URDNA2015"),o=G("./URGNA2012"),x=G("./URDNA2015Sync"),h=G("./URGNA2012Sync");let e;try{e=G("rdf-canonize-native")}catch{}ee.NQuads=G("./NQuads"),ee.IdentifierIssuer=G("./IdentifierIssuer"),ee._rdfCanonizeNative=function(r){return r&&(e=r),e},ee.canonize=async function(r,n){if(Array.isArray(r)||(r=ee.NQuads.legacyDatasetToQuads(r)),n.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((s,d)=>e.canonize(r,n,(a,y)=>a?d(a):s(y)))}if("URDNA2015"===n.algorithm)return new M(n).main(r);if("URGNA2012"===n.algorithm){if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new o(n).main(r)}throw"algorithm"in n?new Error("Invalid RDF Dataset Canonicalization algorithm: "+n.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},ee._canonizeSync=function(r,n){if(Array.isArray(r)||(r=ee.NQuads.legacyDatasetToQuads(r)),n.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return e.canonizeSync(r,n)}if("URDNA2015"===n.algorithm)return new x(n).main(r);if("URGNA2012"===n.algorithm){if(n.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new h(n).main(r)}throw"algorithm"in n?new Error("Invalid RDF Dataset Canonicalization algorithm: "+n.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":65,"./NQuads":67,"./URDNA2015":69,"./URDNA2015Sync":70,"./URGNA2012":71,"./URGNA2012Sync":72,"rdf-canonize-native":3}],74:[function(G,K,ee){var M=G("buffer"),o=M.Buffer;function x(e,r){for(var n in e)r[n]=e[n]}function h(e,r,n){return o(e,r,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?K.exports=M:(x(M,ee),ee.Buffer=h),h.prototype=Object.create(o.prototype),x(o,h),h.from=function(e,r,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,r,n)},h.alloc=function(e,r,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var s=o(e);return void 0!==r?"string"==typeof n?s.fill(r,n):s.fill(r):s.fill(0),s},h.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},h.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return M.SlowBuffer(e)}},{buffer:5}],75:[function(G,K,ee){(function(M,o){(function(){!function(x,h){"use strict";if(!x.setImmediate){var e,r,n,s,d,a=1,y={},l=!1,f=x.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(x);c=c&&c.setTimeout?c:x,"[object process]"==={}.toString.call(x.process)?e=function(O){M.nextTick(function(){_(O)})}:function(){if(x.postMessage&&!x.importScripts){var O=!0,R=x.onmessage;return x.onmessage=function(){O=!1},x.postMessage("","*"),x.onmessage=R,O}}()?(s="setImmediate$"+Math.random()+"$",d=function(O){O.source===x&&"string"==typeof O.data&&0===O.data.indexOf(s)&&_(+O.data.slice(s.length))},x.addEventListener?x.addEventListener("message",d,!1):x.attachEvent("onmessage",d),e=function(O){x.postMessage(s+O,"*")}):x.MessageChannel?((n=new MessageChannel).port1.onmessage=function(O){_(O.data)},e=function(O){n.port2.postMessage(O)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,e=function(O){var R=f.createElement("script");R.onreadystatechange=function(){_(O),R.onreadystatechange=null,r.removeChild(R),R=null},r.appendChild(R)}):e=function(O){setTimeout(_,0,O)},c.setImmediate=function(O){"function"!=typeof O&&(O=new Function(""+O));for(var R=new Array(arguments.length-1),A=0;A<R.length;A++)R[A]=arguments[A+1];var v={callback:O,args:R};return y[a]=v,e(a),a++},c.clearImmediate=E}function E(O){delete y[O]}function _(O){if(l)setTimeout(_,0,O);else{var R=y[O];if(R){l=!0;try{!function(A){var v=A.callback,F=A.args;switch(F.length){case 0:v();break;case 1:v(F[0]);break;case 2:v(F[0],F[1]);break;case 3:v(F[0],F[1],F[2]);break;default:v.apply(void 0,F)}}(R)}finally{E(O),l=!1}}}}}(typeof self>"u"?void 0===o?this:o:self)}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:59}],76:[function(G,K,ee){K.exports=o;var M=G("events").EventEmitter;function o(){M.call(this)}G("inherits")(o,M),o.Readable=G("readable-stream/lib/_stream_readable.js"),o.Writable=G("readable-stream/lib/_stream_writable.js"),o.Duplex=G("readable-stream/lib/_stream_duplex.js"),o.Transform=G("readable-stream/lib/_stream_transform.js"),o.PassThrough=G("readable-stream/lib/_stream_passthrough.js"),o.finished=G("readable-stream/lib/internal/streams/end-of-stream.js"),o.pipeline=G("readable-stream/lib/internal/streams/pipeline.js"),o.Stream=o,o.prototype.pipe=function(x,h){var e=this;function r(f){x.writable&&!1===x.write(f)&&e.pause&&e.pause()}function n(){e.readable&&e.resume&&e.resume()}e.on("data",r),x.on("drain",n),x._isStdio||h&&!1===h.end||(e.on("end",d),e.on("close",a));var s=!1;function d(){s||(s=!0,x.end())}function a(){s||(s=!0,"function"==typeof x.destroy&&x.destroy())}function y(f){if(l(),0===M.listenerCount(this,"error"))throw f}function l(){e.removeListener("data",r),x.removeListener("drain",n),e.removeListener("end",d),e.removeListener("close",a),e.removeListener("error",y),x.removeListener("error",y),e.removeListener("end",l),e.removeListener("close",l),x.removeListener("close",l)}return e.on("error",y),x.on("error",y),e.on("end",l),e.on("close",l),x.on("close",l),x.emit("pipe",e),x}},{events:11,inherits:22,"readable-stream/lib/_stream_duplex.js":78,"readable-stream/lib/_stream_passthrough.js":79,"readable-stream/lib/_stream_readable.js":80,"readable-stream/lib/_stream_transform.js":81,"readable-stream/lib/_stream_writable.js":82,"readable-stream/lib/internal/streams/end-of-stream.js":86,"readable-stream/lib/internal/streams/pipeline.js":88}],77:[function(G,K,ee){"use strict";var M={};function o(h,e,r){r||(r=Error);var n=function(s){var d,a;function y(l,f,c){return s.call(this,(E=l,_=f,O=c,"string"==typeof e?e:e(E,_,O)))||this;var E,_,O}return a=s,(d=y).prototype=Object.create(a.prototype),d.prototype.constructor=d,d.__proto__=a,y}(r);n.prototype.name=r.name,n.prototype.code=h,M[h]=n}function x(h,e){if(Array.isArray(h)){var r=h.length;return h=h.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(h.slice(0,r-1).join(", "),", or ")+h[r-1]:2===r?"one of ".concat(e," ").concat(h[0]," or ").concat(h[1]):"of ".concat(e," ").concat(h[0])}return"of ".concat(e," ").concat(String(h))}o("ERR_INVALID_OPT_VALUE",function(h,e){return'The value "'+e+'" is invalid for option "'+h+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(h,e,r){var n,s,a,l,f,c;if("string"==typeof e&&(s="not ",e.substr(0,4)===s)?(n="must not be",e=e.replace(/^not /,"")):n="must be",l=h,f=" argument",(void 0===c||c>l.length)&&(c=l.length),l.substring(c-9,c)===f)a="The ".concat(h," ").concat(n," ").concat(x(e,"type"));else{var y=function(l,f,c){return"number"!=typeof c&&(c=0),!(c+1>l.length)&&-1!==l.indexOf(".",c)}(h)?"property":"argument";a='The "'.concat(h,'" ').concat(y," ").concat(n," ").concat(x(e,"type"))}return a+". Received type ".concat(typeof r)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),K.exports.codes=M},{}],78:[function(G,K,ee){(function(M){(function(){"use strict";var o=Object.keys||function(y){var l=[];for(var f in y)l.push(f);return l};K.exports=s;var x=G("./_stream_readable"),h=G("./_stream_writable");G("inherits")(s,x);for(var e=o(h.prototype),r=0;r<e.length;r++){var n=e[r];s.prototype[n]||(s.prototype[n]=h.prototype[n])}function s(y){if(!(this instanceof s))return new s(y);x.call(this,y),h.call(this,y),this.allowHalfOpen=!0,y&&(!1===y.readable&&(this.readable=!1),!1===y.writable&&(this.writable=!1),!1===y.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||M.nextTick(a,this)}function a(y){y.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}})}).call(this)}).call(this,G("_process"))},{"./_stream_readable":80,"./_stream_writable":82,_process:59,inherits:22}],79:[function(G,K,ee){"use strict";K.exports=o;var M=G("./_stream_transform");function o(x){if(!(this instanceof o))return new o(x);M.call(this,x)}G("inherits")(o,M),o.prototype._transform=function(x,h,e){e(null,x)}},{"./_stream_transform":81,inherits:22}],80:[function(G,K,ee){(function(M,o){(function(){"use strict";var x;K.exports=P,P.ReadableState=H,G("events").EventEmitter;var s,h=function(te,k){return te.listeners(k).length},e=G("./internal/streams/stream"),r=G("buffer").Buffer,n=o.Uint8Array||function(){},d=G("util");s=d&&d.debuglog?d.debuglog("stream"):function(){};var a,y,l,f=G("./internal/streams/buffer_list"),c=G("./internal/streams/destroy"),E=G("./internal/streams/state").getHighWaterMark,_=G("../errors").codes,O=_.ERR_INVALID_ARG_TYPE,R=_.ERR_STREAM_PUSH_AFTER_EOF,A=_.ERR_METHOD_NOT_IMPLEMENTED,v=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;G("inherits")(P,e);var F=c.errorOrDestroy,j=["error","close","destroy","pause","resume"];function H(te,k,Q){x=x||G("./_stream_duplex"),te=te||{},"boolean"!=typeof Q&&(Q=k instanceof x),this.objectMode=!!te.objectMode,Q&&(this.objectMode=this.objectMode||!!te.readableObjectMode),this.highWaterMark=E(this,te,"readableHighWaterMark",Q),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==te.emitClose,this.autoDestroy=!!te.autoDestroy,this.destroyed=!1,this.defaultEncoding=te.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,te.encoding&&(a||(a=G("string_decoder/").StringDecoder),this.decoder=new a(te.encoding),this.encoding=te.encoding)}function P(te){if(x=x||G("./_stream_duplex"),!(this instanceof P))return new P(te);var k=this instanceof x;this._readableState=new H(te,this,k),this.readable=!0,te&&("function"==typeof te.read&&(this._read=te.read),"function"==typeof te.destroy&&(this._destroy=te.destroy)),e.call(this)}function X(te,k,Q,z,he){s("readableAddChunk",k);var de,Pe,Oe,Je,$e,ge=te._readableState;if(null===k)ge.reading=!1,function(Pe,Oe){if(s("onEofChunk"),!Oe.ended){if(Oe.decoder){var Je=Oe.decoder.end();Je&&Je.length&&(Oe.buffer.push(Je),Oe.length+=Oe.objectMode?1:Je.length)}Oe.ended=!0,Oe.sync?oe(Pe):(Oe.needReadable=!1,Oe.emittedReadable||(Oe.emittedReadable=!0,le(Pe)))}}(te,ge);else if(he||(Pe=ge,$e=Oe=k,r.isBuffer($e)||$e instanceof n||"string"==typeof Oe||void 0===Oe||Pe.objectMode||(Je=new O("chunk",["string","Buffer","Uint8Array"],Oe)),de=Je),de)F(te,de);else if(ge.objectMode||k&&k.length>0)if("string"==typeof k||ge.objectMode||Object.getPrototypeOf(k)===r.prototype||(k=function(Pe){return r.from(Pe)}(k)),z)ge.endEmitted?F(te,new v):Y(te,ge,k,!0);else if(ge.ended)F(te,new R);else{if(ge.destroyed)return!1;ge.reading=!1,ge.decoder&&!Q?(k=ge.decoder.write(k),ge.objectMode||0!==k.length?Y(te,ge,k,!1):V(te,ge)):Y(te,ge,k,!1)}else z||(ge.reading=!1,V(te,ge));return!ge.ended&&(ge.length<ge.highWaterMark||0===ge.length)}function Y(te,k,Q,z){k.flowing&&0===k.length&&!k.sync?(k.awaitDrain=0,te.emit("data",Q)):(k.length+=k.objectMode?1:Q.length,z?k.buffer.unshift(Q):k.buffer.push(Q),k.needReadable&&oe(te)),V(te,k)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),P.prototype.destroy=c.destroy,P.prototype._undestroy=c.undestroy,P.prototype._destroy=function(te,k){k(te)},P.prototype.push=function(te,k){var Q,z=this._readableState;return z.objectMode?Q=!0:"string"==typeof te&&((k=k||z.defaultEncoding)!==z.encoding&&(te=r.from(te,k),k=""),Q=!0),X(this,te,k,!1,Q)},P.prototype.unshift=function(te){return X(this,te,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(te){a||(a=G("string_decoder/").StringDecoder);var k=new a(te);this._readableState.decoder=k,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,z="";null!==Q;)z+=k.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),""!==z&&this._readableState.buffer.push(z),this._readableState.length=z.length,this};var ie=1073741824;function fe(te,k){return te<=0||0===k.length&&k.ended?0:k.objectMode?1:te!=te?k.flowing&&k.length?k.buffer.head.data.length:k.length:(te>k.highWaterMark&&(k.highWaterMark=((Q=te)>=ie?Q=ie:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q)),te<=k.length?te:k.ended?k.length:(k.needReadable=!0,0));var Q}function oe(te){var k=te._readableState;s("emitReadable",k.needReadable,k.emittedReadable),k.needReadable=!1,k.emittedReadable||(s("emitReadable",k.flowing),k.emittedReadable=!0,M.nextTick(le,te))}function le(te){var k=te._readableState;s("emitReadable_",k.destroyed,k.length,k.ended),k.destroyed||!k.length&&!k.ended||(te.emit("readable"),k.emittedReadable=!1),k.needReadable=!k.flowing&&!k.ended&&k.length<=k.highWaterMark,ve(te)}function V(te,k){k.readingMore||(k.readingMore=!0,M.nextTick($,te,k))}function $(te,k){for(;!k.reading&&!k.ended&&(k.length<k.highWaterMark||k.flowing&&0===k.length);){var Q=k.length;if(s("maybeReadMore read 0"),te.read(0),Q===k.length)break}k.readingMore=!1}function ne(te){var k=te._readableState;k.readableListening=te.listenerCount("readable")>0,k.resumeScheduled&&!k.paused?k.flowing=!0:te.listenerCount("data")>0&&te.resume()}function pe(te){s("readable nexttick read 0"),te.read(0)}function Fe(te,k){s("resume",k.reading),k.reading||te.read(0),k.resumeScheduled=!1,te.emit("resume"),ve(te),k.flowing&&!k.reading&&te.read(0)}function ve(te){var k=te._readableState;for(s("flow",k.flowing);k.flowing&&null!==te.read(););}function ce(te,k){return 0===k.length?null:(k.objectMode?Q=k.buffer.shift():!te||te>=k.length?(Q=k.decoder?k.buffer.join(""):1===k.buffer.length?k.buffer.first():k.buffer.concat(k.length),k.buffer.clear()):Q=k.buffer.consume(te,k.decoder),Q);var Q}function _e(te){var k=te._readableState;s("endReadable",k.endEmitted),k.endEmitted||(k.ended=!0,M.nextTick(Ne,k,te))}function Ne(te,k){if(s("endReadableNT",te.endEmitted,te.length),!te.endEmitted&&0===te.length&&(te.endEmitted=!0,k.readable=!1,k.emit("end"),te.autoDestroy)){var Q=k._writableState;(!Q||Q.autoDestroy&&Q.finished)&&k.destroy()}}function Qe(te,k){for(var Q=0,z=te.length;Q<z;Q++)if(te[Q]===k)return Q;return-1}P.prototype.read=function(te){s("read",te),te=parseInt(te,10);var k=this._readableState,Q=te;if(0!==te&&(k.emittedReadable=!1),0===te&&k.needReadable&&((0!==k.highWaterMark?k.length>=k.highWaterMark:k.length>0)||k.ended))return s("read: emitReadable",k.length,k.ended),0===k.length&&k.ended?_e(this):oe(this),null;if(0===(te=fe(te,k))&&k.ended)return 0===k.length&&_e(this),null;var z,he=k.needReadable;return s("need readable",he),(0===k.length||k.length-te<k.highWaterMark)&&s("length less than watermark",he=!0),k.ended||k.reading?s("reading or ended",he=!1):he&&(s("do read"),k.reading=!0,k.sync=!0,0===k.length&&(k.needReadable=!0),this._read(k.highWaterMark),k.sync=!1,k.reading||(te=fe(Q,k))),null===(z=te>0?ce(te,k):null)?(k.needReadable=k.length<=k.highWaterMark,te=0):(k.length-=te,k.awaitDrain=0),0===k.length&&(k.ended||(k.needReadable=!0),Q!==te&&k.ended&&_e(this)),null!==z&&this.emit("data",z),z},P.prototype._read=function(te){F(this,new A("_read()"))},P.prototype.pipe=function(te,k){var Q=this,z=this._readableState;switch(z.pipesCount){case 0:z.pipes=te;break;case 1:z.pipes=[z.pipes,te];break;default:z.pipes.push(te)}z.pipesCount+=1,s("pipe count=%d opts=%j",z.pipesCount,k);var he=k&&!1===k.end||te===M.stdout||te===M.stderr?be:ge;function ge(){s("onend"),te.end()}z.endEmitted?M.nextTick(he):Q.once("end",he),te.on("unpipe",function de(ke,Ce){s("onunpipe"),ke===Q&&Ce&&!1===Ce.hasUnpiped&&(Ce.hasUnpiped=!0,s("cleanup"),te.removeListener("close",Ke),te.removeListener("finish",ot),te.removeListener("drain",Pe),te.removeListener("error",$e),te.removeListener("unpipe",de),Q.removeListener("end",ge),Q.removeListener("end",be),Q.removeListener("data",Je),Oe=!0,!z.awaitDrain||te._writableState&&!te._writableState.needDrain||Pe())});var ke,Pe=(ke=Q,function(){var Ce=ke._readableState;s("pipeOnDrain",Ce.awaitDrain),Ce.awaitDrain&&Ce.awaitDrain--,0===Ce.awaitDrain&&h(ke,"data")&&(Ce.flowing=!0,ve(ke))});te.on("drain",Pe);var Oe=!1;function Je(ke){s("ondata");var Ce=te.write(ke);s("dest.write",Ce),!1===Ce&&((1===z.pipesCount&&z.pipes===te||z.pipesCount>1&&-1!==Qe(z.pipes,te))&&!Oe&&(s("false write response, pause",z.awaitDrain),z.awaitDrain++),Q.pause())}function $e(ke){s("onerror",ke),be(),te.removeListener("error",$e),0===h(te,"error")&&F(te,ke)}function Ke(){te.removeListener("finish",ot),be()}function ot(){s("onfinish"),te.removeListener("close",Ke),be()}function be(){s("unpipe"),Q.unpipe(te)}return Q.on("data",Je),function(ke,Ce,q){if("function"==typeof ke.prependListener)return ke.prependListener(Ce,q);ke._events&&ke._events[Ce]?Array.isArray(ke._events[Ce])?ke._events[Ce].unshift(q):ke._events[Ce]=[q,ke._events[Ce]]:ke.on(Ce,q)}(te,"error",$e),te.once("close",Ke),te.once("finish",ot),te.emit("pipe",Q),z.flowing||(s("pipe resume"),Q.resume()),te},P.prototype.unpipe=function(te){var k=this._readableState,Q={hasUnpiped:!1};if(0===k.pipesCount)return this;if(1===k.pipesCount)return te&&te!==k.pipes||(te||(te=k.pipes),k.pipes=null,k.pipesCount=0,k.flowing=!1,te&&te.emit("unpipe",this,Q)),this;if(!te){var z=k.pipes,he=k.pipesCount;k.pipes=null,k.pipesCount=0,k.flowing=!1;for(var de=0;de<he;de++)z[de].emit("unpipe",this,{hasUnpiped:!1});return this}var ge=Qe(k.pipes,te);return-1===ge||(k.pipes.splice(ge,1),k.pipesCount-=1,1===k.pipesCount&&(k.pipes=k.pipes[0]),te.emit("unpipe",this,Q)),this},P.prototype.on=function(te,k){var Q=e.prototype.on.call(this,te,k),z=this._readableState;return"data"===te?(z.readableListening=this.listenerCount("readable")>0,!1!==z.flowing&&this.resume()):"readable"===te&&(z.endEmitted||z.readableListening||(z.readableListening=z.needReadable=!0,z.flowing=!1,z.emittedReadable=!1,s("on readable",z.length,z.reading),z.length?oe(this):z.reading||M.nextTick(pe,this))),Q},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(te,k){var Q=e.prototype.removeListener.call(this,te,k);return"readable"===te&&M.nextTick(ne,this),Q},P.prototype.removeAllListeners=function(te){var k=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==te&&void 0!==te||M.nextTick(ne,this),k},P.prototype.resume=function(){var k,Q,te=this._readableState;return te.flowing||(s("resume"),te.flowing=!te.readableListening,k=this,(Q=te).resumeScheduled||(Q.resumeScheduled=!0,M.nextTick(Fe,k,Q))),te.paused=!1,this},P.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(te){var k=this,Q=this._readableState,z=!1;for(var he in te.on("end",function(){if(s("wrapped end"),Q.decoder&&!Q.ended){var ge=Q.decoder.end();ge&&ge.length&&k.push(ge)}k.push(null)}),te.on("data",function(ge){s("wrapped data"),Q.decoder&&(ge=Q.decoder.write(ge)),Q.objectMode&&null==ge||(Q.objectMode||ge&&ge.length)&&(k.push(ge)||(z=!0,te.pause()))}),te)void 0===this[he]&&"function"==typeof te[he]&&(this[he]=function(ge){return function(){return te[ge].apply(te,arguments)}}(he));for(var de=0;de<j.length;de++)te.on(j[de],this.emit.bind(this,j[de]));return this._read=function(ge){s("wrapped _read",ge),z&&(z=!1,te.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===y&&(y=G("./internal/streams/async_iterator")),y(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),P._fromList=ce,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(te,k){return void 0===l&&(l=G("./internal/streams/from")),l(P,te,k)})}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/async_iterator":83,"./internal/streams/buffer_list":84,"./internal/streams/destroy":85,"./internal/streams/from":87,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,events:11,inherits:22,"string_decoder/":110,util:3}],81:[function(G,K,ee){"use strict";K.exports=s;var M=G("../errors").codes,o=M.ERR_METHOD_NOT_IMPLEMENTED,x=M.ERR_MULTIPLE_CALLBACK,h=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=M.ERR_TRANSFORM_WITH_LENGTH_0,r=G("./_stream_duplex");function n(y,l){var f=this._transformState;f.transforming=!1;var c=f.writecb;if(null===c)return this.emit("error",new x);f.writechunk=null,f.writecb=null,null!=l&&this.push(l),c(y);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function s(y){if(!(this instanceof s))return new s(y);r.call(this,y),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&("function"==typeof y.transform&&(this._transform=y.transform),"function"==typeof y.flush&&(this._flush=y.flush)),this.on("prefinish",d)}function d(){var y=this;"function"!=typeof this._flush||this._readableState.destroyed?a(this,null,null):this._flush(function(l,f){a(y,l,f)})}function a(y,l,f){if(l)return y.emit("error",l);if(null!=f&&y.push(f),y._writableState.length)throw new e;if(y._transformState.transforming)throw new h;return y.push(null)}G("inherits")(s,r),s.prototype.push=function(y,l){return this._transformState.needTransform=!1,r.prototype.push.call(this,y,l)},s.prototype._transform=function(y,l,f){f(new o("_transform()"))},s.prototype._write=function(y,l,f){var c=this._transformState;if(c.writecb=f,c.writechunk=y,c.writeencoding=l,!c.transforming){var E=this._readableState;(c.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},s.prototype._read=function(y){var l=this._transformState;null===l.writechunk||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))},s.prototype._destroy=function(y,l){r.prototype._destroy.call(this,y,function(f){l(f)})}},{"../errors":77,"./_stream_duplex":78,inherits:22}],82:[function(G,K,ee){(function(M,o){(function(){"use strict";function x(V){var $=this;this.next=null,this.entry=null,this.finish=function(){!function(ne,pe,Fe){var ve=ne.entry;for(ne.entry=null;ve;){var ce=ve.callback;pe.pendingcb--,ce(undefined),ve=ve.next}pe.corkedRequestsFree.next=ne}($,V)}}var h;K.exports=P,P.WritableState=H;var d,e={deprecate:G("util-deprecate")},r=G("./internal/streams/stream"),n=G("buffer").Buffer,s=o.Uint8Array||function(){},a=G("./internal/streams/destroy"),y=G("./internal/streams/state").getHighWaterMark,l=G("../errors").codes,f=l.ERR_INVALID_ARG_TYPE,c=l.ERR_METHOD_NOT_IMPLEMENTED,E=l.ERR_MULTIPLE_CALLBACK,_=l.ERR_STREAM_CANNOT_PIPE,O=l.ERR_STREAM_DESTROYED,R=l.ERR_STREAM_NULL_VALUES,A=l.ERR_STREAM_WRITE_AFTER_END,v=l.ERR_UNKNOWN_ENCODING,F=a.errorOrDestroy;function j(){}function H(V,$,ne){h=h||G("./_stream_duplex"),V=V||{},"boolean"!=typeof ne&&(ne=$ instanceof h),this.objectMode=!!V.objectMode,ne&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=y(this,V,"writableHighWaterMark",ne),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var pe=!1===V.decodeStrings;this.decodeStrings=!pe,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Fe){!function(ve,ce){var k,_e=ve._writableState,Ne=_e.sync,Qe=_e.writecb;if("function"!=typeof Qe)throw new E;if((k=_e).writing=!1,k.writecb=null,k.length-=k.writelen,k.writelen=0,ce)!function(k,Q,z,he,de){--Q.pendingcb,z?(M.nextTick(de,he),M.nextTick(le,k,Q),k._writableState.errorEmitted=!0,F(k,he)):(de(he),k._writableState.errorEmitted=!0,F(k,he),le(k,Q))}(ve,_e,Ne,ce,Qe);else{var te=fe(_e)||ve.destroyed;te||_e.corked||_e.bufferProcessing||!_e.bufferedRequest||ie(ve,_e),Ne?M.nextTick(Y,ve,_e,te,Qe):Y(ve,_e,te,Qe)}}($,Fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==V.emitClose,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function P(V){var $=this instanceof(h=h||G("./_stream_duplex"));if(!$&&!d.call(P,this))return new P(V);this._writableState=new H(V,this,$),this.writable=!0,V&&("function"==typeof V.write&&(this._write=V.write),"function"==typeof V.writev&&(this._writev=V.writev),"function"==typeof V.destroy&&(this._destroy=V.destroy),"function"==typeof V.final&&(this._final=V.final)),r.call(this)}function X(V,$,ne,pe,Fe,ve,ce){$.writelen=pe,$.writecb=ce,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new O("write")):ne?V._writev(Fe,$.onwrite):V._write(Fe,ve,$.onwrite),$.sync=!1}function Y(V,$,ne,pe){var Fe,ve;ne||(Fe=V,0===(ve=$).length&&ve.needDrain&&(ve.needDrain=!1,Fe.emit("drain"))),$.pendingcb--,pe(),le(V,$)}function ie(V,$){$.bufferProcessing=!0;var ne=$.bufferedRequest;if(V._writev&&ne&&ne.next){var pe=$.bufferedRequestCount,Fe=new Array(pe),ve=$.corkedRequestsFree;ve.entry=ne;for(var ce=0,_e=!0;ne;)Fe[ce]=ne,ne.isBuf||(_e=!1),ne=ne.next,ce+=1;Fe.allBuffers=_e,X(V,$,!0,$.length,Fe,"",ve.finish),$.pendingcb++,$.lastBufferedRequest=null,ve.next?($.corkedRequestsFree=ve.next,ve.next=null):$.corkedRequestsFree=new x($),$.bufferedRequestCount=0}else{for(;ne;){var Ne=ne.chunk,Qe=ne.encoding,te=ne.callback;if(X(V,$,!1,$.objectMode?1:Ne.length,Ne,Qe,te),ne=ne.next,$.bufferedRequestCount--,$.writing)break}null===ne&&($.lastBufferedRequest=null)}$.bufferedRequest=ne,$.bufferProcessing=!1}function fe(V){return V.ending&&0===V.length&&null===V.bufferedRequest&&!V.finished&&!V.writing}function oe(V,$){V._final(function(ne){$.pendingcb--,ne&&F(V,ne),$.prefinished=!0,V.emit("prefinish"),le(V,$)})}function le(V,$){var Fe,ve,ne=fe($);if(ne&&(Fe=V,(ve=$).prefinished||ve.finalCalled||("function"!=typeof Fe._final||ve.destroyed?(ve.prefinished=!0,Fe.emit("prefinish")):(ve.pendingcb++,ve.finalCalled=!0,M.nextTick(oe,Fe,ve))),0===$.pendingcb&&($.finished=!0,V.emit("finish"),$.autoDestroy))){var pe=V._readableState;(!pe||pe.autoDestroy&&pe.endEmitted)&&V.destroy()}return ne}G("inherits")(P,r),H.prototype.getBuffer=function(){for(var V=this.bufferedRequest,$=[];V;)$.push(V),V=V.next;return $},function(){try{Object.defineProperty(H.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(V){return!!d.call(this,V)||this===P&&V&&V._writableState instanceof H}})):d=function(V){return V instanceof this},P.prototype.pipe=function(){F(this,new _)},P.prototype.write=function(V,$,ne){var pe,_e,Fe=this._writableState,ve=!1,ce=!Fe.objectMode&&(pe=V,n.isBuffer(pe)||pe instanceof s);return ce&&!n.isBuffer(V)&&(_e=V,V=n.from(_e)),"function"==typeof $&&(ne=$,$=null),ce?$="buffer":$||($=Fe.defaultEncoding),"function"!=typeof ne&&(ne=j),Fe.ending?function(_e,Ne){var Qe=new A;F(_e,Qe),M.nextTick(Ne,Qe)}(this,ne):(ce||function(_e,Ne,Qe,te){var k;return null===Qe?k=new R:"string"==typeof Qe||Ne.objectMode||(k=new f("chunk",["string","Buffer"],Qe)),!k||(F(_e,k),M.nextTick(te,k),!1)}(this,Fe,V,ne))&&(Fe.pendingcb++,ve=function(_e,Ne,Qe,te,k,Q){if(!Qe){var z=(Oe=te,Je=k,(Pe=Ne).objectMode||!1===Pe.decodeStrings||"string"!=typeof Oe||(Oe=n.from(Oe,Je)),Oe);te!==z&&(Qe=!0,k="buffer",te=z)}var Pe,Oe,Je,he=Ne.objectMode?1:te.length;Ne.length+=he;var de=Ne.length<Ne.highWaterMark;if(de||(Ne.needDrain=!0),Ne.writing||Ne.corked){var ge=Ne.lastBufferedRequest;Ne.lastBufferedRequest={chunk:te,encoding:k,isBuf:Qe,callback:Q,next:null},ge?ge.next=Ne.lastBufferedRequest:Ne.bufferedRequest=Ne.lastBufferedRequest,Ne.bufferedRequestCount+=1}else X(_e,Ne,!1,he,te,k,Q);return de}(this,Fe,ce,V,$,ne)),ve},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,V.writing||V.corked||V.bufferProcessing||!V.bufferedRequest||ie(this,V))},P.prototype.setDefaultEncoding=function(V){if("string"==typeof V&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new v(V);return this._writableState.defaultEncoding=V,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(V,$,ne){ne(new c("_write()"))},P.prototype._writev=null,P.prototype.end=function(V,$,ne){var Fe,ve,ce,pe=this._writableState;return"function"==typeof V?(ne=V,V=null,$=null):"function"==typeof $&&(ne=$,$=null),null!=V&&this.write(V,$),pe.corked&&(pe.corked=1,this.uncork()),pe.ending||(Fe=this,ce=ne,(ve=pe).ending=!0,le(Fe,ve),ce&&(ve.finished?M.nextTick(ce):Fe.once("finish",ce)),ve.ended=!0,Fe.writable=!1),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(V){this._writableState&&(this._writableState.destroyed=V)}}),P.prototype.destroy=a.destroy,P.prototype._undestroy=a.undestroy,P.prototype._destroy=function(V,$){$(V)}}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/destroy":85,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,inherits:22,"util-deprecate":114}],83:[function(G,K,ee){(function(M){(function(){"use strict";var o;function x(O,R,A){return R in O?Object.defineProperty(O,R,{value:A,enumerable:!0,configurable:!0,writable:!0}):O[R]=A,O}var h=G("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),n=Symbol("error"),s=Symbol("ended"),d=Symbol("lastPromise"),a=Symbol("handlePromise"),y=Symbol("stream");function l(O,R){return{value:O,done:R}}function f(O){var R=O[e];if(null!==R){var A=O[y].read();null!==A&&(O[d]=null,O[e]=null,O[r]=null,R(l(A,!1)))}}function c(O){M.nextTick(f,O)}var E=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((x(o={get stream(){return this[y]},next:function(){var O=this,R=this[n];if(null!==R)return Promise.reject(R);if(this[s])return Promise.resolve(l(void 0,!0));if(this[y].destroyed)return new Promise(function(j,H){M.nextTick(function(){O[n]?H(O[n]):j(l(void 0,!0))})});var A,j,H,v=this[d];if(v)A=new Promise((j=v,H=this,function(P,X){j.then(function(){H[s]?P(l(void 0,!0)):H[a](P,X)},X)}));else{var F=this[y].read();if(null!==F)return Promise.resolve(l(F,!1));A=new Promise(this[a])}return this[d]=A,A}},Symbol.asyncIterator,function(){return this}),x(o,"return",function(){var O=this;return new Promise(function(R,A){O[y].destroy(null,function(v){v?A(v):R(l(void 0,!0))})})}),o),E);K.exports=function(O){var R,A=Object.create(_,(x(R={},y,{value:O,writable:!0}),x(R,e,{value:null,writable:!0}),x(R,r,{value:null,writable:!0}),x(R,n,{value:null,writable:!0}),x(R,s,{value:O._readableState.endEmitted,writable:!0}),x(R,a,{value:function(v,F){var j=A[y].read();j?(A[d]=null,A[e]=null,A[r]=null,v(l(j,!1))):(A[e]=v,A[r]=F)},writable:!0}),R));return A[d]=null,h(O,function(v){if(v&&"ERR_STREAM_PREMATURE_CLOSE"!==v.code){var F=A[r];return null!==F&&(A[d]=null,A[e]=null,A[r]=null,F(v)),void(A[n]=v)}var j=A[e];null!==j&&(A[d]=null,A[e]=null,A[r]=null,j(l(void 0,!0))),A[s]=!0}),O.on("readable",c.bind(null,A)),A}}).call(this)}).call(this,G("_process"))},{"./end-of-stream":86,_process:59}],84:[function(G,K,ee){"use strict";function M(n,s){var d=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);s&&(a=a.filter(function(y){return Object.getOwnPropertyDescriptor(n,y).enumerable})),d.push.apply(d,a)}return d}function o(n,s,d){return s in n?Object.defineProperty(n,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[s]=d,n}function x(n,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}var h=G("buffer").Buffer,e=G("util").inspect,r=e&&e.custom||"inspect";K.exports=function(){function n(){(function(y,l){if(!(y instanceof l))throw new TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}var s,d;return s=n,d=[{key:"push",value:function(y){var l={data:y,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(y){var l={data:y,next:this.head};0===this.length&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(0!==this.length){var y=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(0===this.length)return"";for(var l=this.head,f=""+l.data;l=l.next;)f+=y+l.data;return f}},{key:"concat",value:function(y){if(0===this.length)return h.alloc(0);for(var l,f,c,E=h.allocUnsafe(y>>>0),_=this.head,O=0;_;)l=_.data,f=E,c=O,h.prototype.copy.call(l,f,c),O+=_.data.length,_=_.next;return E}},{key:"consume",value:function(y,l){var f;return y<this.head.data.length?(f=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):f=y===this.head.data.length?this.shift():l?this._getString(y):this._getBuffer(y),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var l=this.head,f=1,c=l.data;for(y-=c.length;l=l.next;){var E=l.data,_=y>E.length?E.length:y;if(_===E.length?c+=E:c+=E.slice(0,y),0==(y-=_)){_===E.length?(++f,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=E.slice(_));break}++f}return this.length-=f,c}},{key:"_getBuffer",value:function(y){var l=h.allocUnsafe(y),f=this.head,c=1;for(f.data.copy(l),y-=f.data.length;f=f.next;){var E=f.data,_=y>E.length?E.length:y;if(E.copy(l,l.length-y,0,_),0==(y-=_)){_===E.length?(++c,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=E.slice(_));break}++c}return this.length-=c,l}},{key:r,value:function(y,l){return e(this,function(f){for(var c=1;c<arguments.length;c++){var E=null!=arguments[c]?arguments[c]:{};c%2?M(Object(E),!0).forEach(function(_){o(f,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(E)):M(Object(E)).forEach(function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(E,_))})}return f}({},l,{depth:0,customInspect:!1}))}}],d&&x(s.prototype,d),n}()},{buffer:5,util:3}],85:[function(G,K,ee){(function(M){(function(){"use strict";function o(e,r){h(e,r),x(e)}function x(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function h(e,r){e.emit("error",r)}K.exports={destroy:function(e,r){var n=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(h,this,e)):M.nextTick(h,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!r&&a?n._writableState?n._writableState.errorEmitted?M.nextTick(x,n):(n._writableState.errorEmitted=!0,M.nextTick(o,n,a)):M.nextTick(o,n,a):r?(M.nextTick(x,n),r(a)):M.nextTick(x,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var n=e._readableState,s=e._writableState;n&&n.autoDestroy||s&&s.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,G("_process"))},{_process:59}],86:[function(G,K,ee){"use strict";var M=G("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}K.exports=function x(h,e,r){if("function"==typeof e)return x(h,null,e);var O,R;e||(e={}),O=r||o,R=!1,r=function(){if(!R){R=!0;for(var A=arguments.length,v=new Array(A),F=0;F<A;F++)v[F]=arguments[F];O.apply(this,v)}};var n=e.readable||!1!==e.readable&&h.readable,s=e.writable||!1!==e.writable&&h.writable,d=function(){h.writable||y()},a=h._writableState&&h._writableState.finished,y=function(){s=!1,a=!0,n||r.call(h)},l=h._readableState&&h._readableState.endEmitted,f=function(){n=!1,l=!0,s||r.call(h)},c=function(O){r.call(h,O)},E=function(){var O;return n&&!l?(h._readableState&&h._readableState.ended||(O=new M),r.call(h,O)):s&&!a?(h._writableState&&h._writableState.ended||(O=new M),r.call(h,O)):void 0},_=function(){h.req.on("finish",y)};return function(O){return O.setHeader&&"function"==typeof O.abort}(h)?(h.on("complete",y),h.on("abort",E),h.req?_():h.on("request",_)):s&&!h._writableState&&(h.on("end",d),h.on("close",d)),h.on("end",f),h.on("finish",y),!1!==e.error&&h.on("error",c),h.on("close",E),function(){h.removeListener("complete",y),h.removeListener("abort",E),h.removeListener("request",_),h.req&&h.req.removeListener("finish",y),h.removeListener("end",d),h.removeListener("close",d),h.removeListener("finish",y),h.removeListener("end",f),h.removeListener("error",c),h.removeListener("close",E)}}},{"../../../errors":77}],87:[function(G,K,ee){K.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],88:[function(G,K,ee){"use strict";var M,o=G("../../../errors").codes,x=o.ERR_MISSING_ARGS,h=o.ERR_STREAM_DESTROYED;function e(a){if(a)throw a}function n(a){a()}function s(a,y){return a.pipe(y)}K.exports=function(){for(var a=arguments.length,y=new Array(a),l=0;l<a;l++)y[l]=arguments[l];var f,c=function d(a){return a.length?"function"!=typeof a[a.length-1]?e:a.pop():e}(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new x("streams");var E=y.map(function(_,O){var R=O<y.length-1;return function r(a,y,l,f){var _,O;_=f,O=!1,f=function(){O||(O=!0,_.apply(void 0,arguments))};var c=!1;a.on("close",function(){c=!0}),void 0===M&&(M=G("./end-of-stream")),M(a,{readable:y,writable:l},function(_){if(_)return f(_);c=!0,f()});var E=!1;return function(_){if(!c&&!E)return E=!0,function(O){return O.setHeader&&"function"==typeof O.abort}(a)?a.abort():"function"==typeof a.destroy?a.destroy():void f(_||new h("pipe"))}}(_,R,O>0,function(A){f||(f=A),A&&E.forEach(n),R||(E.forEach(n),c(f))})});return y.reduce(s)}},{"../../../errors":77,"./end-of-stream":86}],89:[function(G,K,ee){"use strict";var M=G("../../../errors").codes.ERR_INVALID_OPT_VALUE;K.exports={getHighWaterMark:function(o,x,h,e){var n,s,d,r=(s=e,d=h,null!=(n=x).highWaterMark?n.highWaterMark:s?n[d]:null);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new M(e?h:"highWaterMark",r);return Math.floor(r)}return o.objectMode?16:16384}}},{"../../../errors":77}],90:[function(G,K,ee){K.exports=G("events").EventEmitter},{events:11}],91:[function(G,K,ee){(function(M){(function(){var o=G("./lib/request"),x=G("./lib/response"),h=G("xtend"),e=G("builtin-status-codes"),r=G("url"),n=ee;n.request=function(s,d){s="string"==typeof s?r.parse(s):h(s);var a=-1===M.location.protocol.search(/^https?:$/)?"http:":"",y=s.protocol||a,l=s.hostname||s.host,f=s.port,c=s.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),s.url=(l?y+"//"+l:"")+(f?":"+f:"")+c,s.method=(s.method||"GET").toUpperCase(),s.headers=s.headers||{};var E=new o(s);return d&&E.on("response",d),E},n.get=function(s,d){var a=n.request(s,d);return a.end(),a},n.ClientRequest=o,n.IncomingMessage=x.IncomingMessage,n.Agent=function(){},n.Agent.defaultMaxSockets=4,n.globalAgent=new n.Agent,n.STATUS_CODES=e,n.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/request":93,"./lib/response":94,"builtin-status-codes":6,url:112,xtend:119}],92:[function(G,K,ee){(function(M){(function(){var o;function x(){if(void 0!==o)return o;if(M.XMLHttpRequest){o=new M.XMLHttpRequest;try{o.open("GET",M.XDomainRequest?"/":"https://example.com")}catch{o=null}}else o=null;return o}function h(r){var n=x();if(!n)return!1;try{return n.responseType=r,n.responseType===r}catch{}return!1}function e(r){return"function"==typeof r}ee.fetch=e(M.fetch)&&e(M.ReadableStream),ee.writableStream=e(M.WritableStream),ee.abortController=e(M.AbortController),ee.arraybuffer=ee.fetch||h("arraybuffer"),ee.msstream=!ee.fetch&&h("ms-stream"),ee.mozchunkedarraybuffer=!ee.fetch&&h("moz-chunked-arraybuffer"),ee.overrideMimeType=ee.fetch||!!x()&&e(x().overrideMimeType),o=null}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],93:[function(G,K,ee){(function(M,o,x){(function(){var h=G("./capability"),e=G("inherits"),r=G("./response"),n=G("readable-stream"),s=r.IncomingMessage,d=r.readyStates,a=K.exports=function(l){var f,c=this;n.Writable.call(c),c._opts=l,c._body=[],c._headers={},l.auth&&c.setHeader("Authorization","Basic "+x.from(l.auth).toString("base64")),Object.keys(l.headers).forEach(function(_){c.setHeader(_,l.headers[_])});var _,O,E=!0;if("disable-fetch"===l.mode||"requestTimeout"in l&&!h.abortController)E=!1,f=!0;else if("prefer-streaming"===l.mode)f=!1;else if("allow-wrong-content-type"===l.mode)f=!h.overrideMimeType;else{if(l.mode&&"default"!==l.mode&&"prefer-fast"!==l.mode)throw new Error("Invalid value for opts.mode");f=!0}c._mode=(_=f,O=E,h.fetch&&O?"fetch":h.mozchunkedarraybuffer?"moz-chunked-arraybuffer":h.msstream?"ms-stream":h.arraybuffer&&_?"arraybuffer":"text"),c._fetchTimer=null,c._socketTimeout=null,c._socketTimer=null,c.on("finish",function(){c._onFinish()})};e(a,n.Writable),a.prototype.setHeader=function(l,f){var c=l.toLowerCase();-1===y.indexOf(c)&&(this._headers[c]={name:l,value:f})},a.prototype.getHeader=function(l){var f=this._headers[l.toLowerCase()];return f?f.value:null},a.prototype.removeHeader=function(l){delete this._headers[l.toLowerCase()]},a.prototype._onFinish=function(){var l=this;if(!l._destroyed){var f=l._opts;"timeout"in f&&0!==f.timeout&&l.setTimeout(f.timeout);var c=l._headers,E=null;"GET"!==f.method&&"HEAD"!==f.method&&(E=new Blob(l._body,{type:(c["content-type"]||{}).value||""}));var _=[];if(Object.keys(c).forEach(function(v){var F=c[v].name,j=c[v].value;Array.isArray(j)?j.forEach(function(H){_.push([F,H])}):_.push([F,j])}),"fetch"===l._mode){var O=null;if(h.abortController){var R=new AbortController;O=R.signal,l._fetchAbortController=R,"requestTimeout"in f&&0!==f.requestTimeout&&(l._fetchTimer=o.setTimeout(function(){l.emit("requestTimeout"),l._fetchAbortController&&l._fetchAbortController.abort()},f.requestTimeout))}o.fetch(l._opts.url,{method:l._opts.method,headers:_,body:E||void 0,mode:"cors",credentials:f.withCredentials?"include":"same-origin",signal:O}).then(function(v){l._fetchResponse=v,l._resetTimers(!1),l._connect()},function(v){l._resetTimers(!0),l._destroyed||l.emit("error",v)})}else{var A=l._xhr=new o.XMLHttpRequest;try{A.open(l._opts.method,l._opts.url,!0)}catch(v){return void M.nextTick(function(){l.emit("error",v)})}"responseType"in A&&(A.responseType=l._mode),"withCredentials"in A&&(A.withCredentials=!!f.withCredentials),"text"===l._mode&&"overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in f&&(A.timeout=f.requestTimeout,A.ontimeout=function(){l.emit("requestTimeout")}),_.forEach(function(v){A.setRequestHeader(v[0],v[1])}),l._response=null,A.onreadystatechange=function(){switch(A.readyState){case d.LOADING:case d.DONE:l._onXHRProgress()}},"moz-chunked-arraybuffer"===l._mode&&(A.onprogress=function(){l._onXHRProgress()}),A.onerror=function(){l._destroyed||(l._resetTimers(!0),l.emit("error",new Error("XHR error")))};try{A.send(E)}catch(v){return void M.nextTick(function(){l.emit("error",v)})}}}},a.prototype._onXHRProgress=function(){var l=this;l._resetTimers(!1),function(f){try{var c=f.status;return null!==c&&0!==c}catch{return!1}}(l._xhr)&&!l._destroyed&&(l._response||l._connect(),l._response._onXHRProgress(l._resetTimers.bind(l)))},a.prototype._connect=function(){var l=this;l._destroyed||(l._response=new s(l._xhr,l._fetchResponse,l._mode,l._resetTimers.bind(l)),l._response.on("error",function(f){l.emit("error",f)}),l.emit("response",l._response))},a.prototype._write=function(l,f,c){this._body.push(l),c()},a.prototype._resetTimers=function(l){var f=this;o.clearTimeout(f._socketTimer),f._socketTimer=null,l?(o.clearTimeout(f._fetchTimer),f._fetchTimer=null):f._socketTimeout&&(f._socketTimer=o.setTimeout(function(){f.emit("timeout")},f._socketTimeout))},a.prototype.abort=a.prototype.destroy=function(l){var f=this;f._destroyed=!0,f._resetTimers(!0),f._response&&(f._response._destroyed=!0),f._xhr?f._xhr.abort():f._fetchAbortController&&f._fetchAbortController.abort(),l&&f.emit("error",l)},a.prototype.end=function(l,f,c){"function"==typeof l&&(c=l,l=void 0),n.Writable.prototype.end.call(this,l,f,c)},a.prototype.setTimeout=function(l,f){var c=this;f&&c.once("timeout",f),c._socketTimeout=l,c._resetTimers(!1)},a.prototype.flushHeaders=function(){},a.prototype.setNoDelay=function(){},a.prototype.setSocketKeepAlive=function(){};var y=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},G("buffer").Buffer)},{"./capability":92,"./response":94,_process:59,buffer:5,inherits:22,"readable-stream":109}],94:[function(G,K,ee){(function(M,o,x){(function(){var h=G("./capability"),e=G("inherits"),r=G("readable-stream"),n=ee.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s=ee.IncomingMessage=function(d,a,y,l){var f=this;if(r.Readable.call(f),f._mode=y,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",function(){M.nextTick(function(){f.emit("close")})}),"fetch"===y){if(f._fetchResponse=a,f.url=a.url,f.statusCode=a.status,f.statusMessage=a.statusText,a.headers.forEach(function(R,A){f.headers[A.toLowerCase()]=R,f.rawHeaders.push(A,R)}),h.writableStream){var c=new WritableStream({write:function(R){return l(!1),new Promise(function(A,v){f._destroyed?v():f.push(x.from(R))?A():f._resumeFetch=A})},close:function(){l(!0),f._destroyed||f.push(null)},abort:function(R){l(!0),f._destroyed||f.emit("error",R)}});try{return void a.body.pipeTo(c).catch(function(R){l(!0),f._destroyed||f.emit("error",R)})}catch{}}var E=a.body.getReader();!function R(){E.read().then(function(A){f._destroyed||(l(A.done),A.done?f.push(null):(f.push(x.from(A.value)),R()))}).catch(function(A){l(!0),f._destroyed||f.emit("error",A)})}()}else if(f._xhr=d,f._pos=0,f.url=d.responseURL,f.statusCode=d.status,f.statusMessage=d.statusText,d.getAllResponseHeaders().split(/\r?\n/).forEach(function(R){var A=R.match(/^([^:]+):\s*(.*)/);if(A){var v=A[1].toLowerCase();"set-cookie"===v?(void 0===f.headers[v]&&(f.headers[v]=[]),f.headers[v].push(A[2])):void 0!==f.headers[v]?f.headers[v]+=", "+A[2]:f.headers[v]=A[2],f.rawHeaders.push(A[1],A[2])}}),f._charset="x-user-defined",!h.overrideMimeType){var _=f.rawHeaders["mime-type"];if(_){var O=_.match(/;\s*charset=([^;])(;|$)/);O&&(f._charset=O[1].toLowerCase())}f._charset||(f._charset="utf-8")}};e(s,r.Readable),s.prototype._read=function(){var d=this._resumeFetch;d&&(this._resumeFetch=null,d())},s.prototype._onXHRProgress=function(d){var a=this,y=a._xhr,l=null;switch(a._mode){case"text":if((l=y.responseText).length>a._pos){var f=l.substr(a._pos);if("x-user-defined"===a._charset){for(var c=x.alloc(f.length),E=0;E<f.length;E++)c[E]=255&f.charCodeAt(E);a.push(c)}else a.push(f,a._charset);a._pos=l.length}break;case"arraybuffer":if(y.readyState!==n.DONE||!y.response)break;l=y.response,a.push(x.from(new Uint8Array(l)));break;case"moz-chunked-arraybuffer":if(l=y.response,y.readyState!==n.LOADING||!l)break;a.push(x.from(new Uint8Array(l)));break;case"ms-stream":if(l=y.response,y.readyState!==n.LOADING)break;var _=new o.MSStreamReader;_.onprogress=function(){_.result.byteLength>a._pos&&(a.push(x.from(new Uint8Array(_.result.slice(a._pos)))),a._pos=_.result.byteLength)},_.onload=function(){d(!0),a.push(null)},_.readAsArrayBuffer(l)}a._xhr.readyState===n.DONE&&"ms-stream"!==a._mode&&(d(!0),a.push(null))}}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},G("buffer").Buffer)},{"./capability":92,_process:59,buffer:5,inherits:22,"readable-stream":109}],95:[function(G,K,ee){arguments[4][77][0].apply(ee,arguments)},{dup:77}],96:[function(G,K,ee){arguments[4][78][0].apply(ee,arguments)},{"./_stream_readable":98,"./_stream_writable":100,_process:59,dup:78,inherits:22}],97:[function(G,K,ee){arguments[4][79][0].apply(ee,arguments)},{"./_stream_transform":99,dup:79,inherits:22}],98:[function(G,K,ee){arguments[4][80][0].apply(ee,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/async_iterator":101,"./internal/streams/buffer_list":102,"./internal/streams/destroy":103,"./internal/streams/from":105,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:80,events:11,inherits:22,"string_decoder/":110,util:3}],99:[function(G,K,ee){arguments[4][81][0].apply(ee,arguments)},{"../errors":95,"./_stream_duplex":96,dup:81,inherits:22}],100:[function(G,K,ee){arguments[4][82][0].apply(ee,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/destroy":103,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:82,inherits:22,"util-deprecate":114}],101:[function(G,K,ee){arguments[4][83][0].apply(ee,arguments)},{"./end-of-stream":104,_process:59,dup:83}],102:[function(G,K,ee){arguments[4][84][0].apply(ee,arguments)},{buffer:5,dup:84,util:3}],103:[function(G,K,ee){arguments[4][85][0].apply(ee,arguments)},{_process:59,dup:85}],104:[function(G,K,ee){arguments[4][86][0].apply(ee,arguments)},{"../../../errors":95,dup:86}],105:[function(G,K,ee){arguments[4][87][0].apply(ee,arguments)},{dup:87}],106:[function(G,K,ee){arguments[4][88][0].apply(ee,arguments)},{"../../../errors":95,"./end-of-stream":104,dup:88}],107:[function(G,K,ee){arguments[4][89][0].apply(ee,arguments)},{"../../../errors":95,dup:89}],108:[function(G,K,ee){arguments[4][90][0].apply(ee,arguments)},{dup:90,events:11}],109:[function(G,K,ee){(ee=K.exports=G("./lib/_stream_readable.js")).Stream=ee,ee.Readable=ee,ee.Writable=G("./lib/_stream_writable.js"),ee.Duplex=G("./lib/_stream_duplex.js"),ee.Transform=G("./lib/_stream_transform.js"),ee.PassThrough=G("./lib/_stream_passthrough.js"),ee.finished=G("./lib/internal/streams/end-of-stream.js"),ee.pipeline=G("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":96,"./lib/_stream_passthrough.js":97,"./lib/_stream_readable.js":98,"./lib/_stream_transform.js":99,"./lib/_stream_writable.js":100,"./lib/internal/streams/end-of-stream.js":104,"./lib/internal/streams/pipeline.js":106}],110:[function(G,K,ee){"use strict";var M=G("safe-buffer").Buffer,o=M.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function x(l){var f;switch(this.encoding=function(c){var E=function(_){if(!_)return"utf8";for(var O;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(O)return;_=(""+_).toLowerCase(),O=!0}}(c);if("string"!=typeof E&&(M.isEncoding===o||!o(c)))throw new Error("Unknown encoding: "+c);return E||c}(l),this.encoding){case"utf16le":this.text=r,this.end=n,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=s,this.end=d,f=3;break;default:return this.write=a,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(f)}function h(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function e(l){var f=this.lastTotal-this.lastNeed,c=function(E,_,O){if(128!=(192&_[0]))return E.lastNeed=0,"\ufffd";if(E.lastNeed>1&&_.length>1){if(128!=(192&_[1]))return E.lastNeed=1,"\ufffd";if(E.lastNeed>2&&_.length>2&&128!=(192&_[2]))return E.lastNeed=2,"\ufffd"}}(this,l);return void 0!==c?c:this.lastNeed<=l.length?(l.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,f,0,l.length),void(this.lastNeed-=l.length))}function r(l,f){if((l.length-f)%2==0){var c=l.toString("utf16le",f);if(c){var E=c.charCodeAt(c.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",f,l.length-1)}function n(l){var f=l&&l.length?this.write(l):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return f+this.lastChar.toString("utf16le",0,c)}return f}function s(l,f){var c=(l.length-f)%3;return 0===c?l.toString("base64",f):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",f,l.length-c))}function d(l){var f=l&&l.length?this.write(l):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function a(l){return l.toString(this.encoding)}function y(l){return l&&l.length?this.write(l):""}ee.StringDecoder=x,x.prototype.write=function(l){if(0===l.length)return"";var f,c;if(this.lastNeed){if(void 0===(f=this.fillLast(l)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<l.length?f?f+this.text(l,c):this.text(l,c):f||""},x.prototype.end=function(l){var f=l&&l.length?this.write(l):"";return this.lastNeed?f+"\ufffd":f},x.prototype.text=function(l,f){var c=function(_,O,R){var A=O.length-1;if(A<R)return 0;var v=h(O[A]);return v>=0?(v>0&&(_.lastNeed=v-1),v):--A<R||-2===v?0:(v=h(O[A]))>=0?(v>0&&(_.lastNeed=v-2),v):--A<R||-2===v?0:(v=h(O[A]))>=0?(v>0&&(2===v?v=0:_.lastNeed=v-3),v):0}(this,l,f);if(!this.lastNeed)return l.toString("utf8",f);this.lastTotal=c;var E=l.length-(c-this.lastNeed);return l.copy(this.lastChar,0,E),l.toString("utf8",f,E)},x.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},{"safe-buffer":74}],111:[function(G,K,ee){(function(M,o){(function(){var x=G("process/browser.js").nextTick,h=Function.prototype.apply,e=Array.prototype.slice,r={},n=0;function s(d,a){this._id=d,this._clearFn=a}ee.setTimeout=function(){return new s(h.call(setTimeout,window,arguments),clearTimeout)},ee.setInterval=function(){return new s(h.call(setInterval,window,arguments),clearInterval)},ee.clearTimeout=ee.clearInterval=function(d){d.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},ee.enroll=function(d,a){clearTimeout(d._idleTimeoutId),d._idleTimeout=a},ee.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},ee._unrefActive=ee.active=function(d){clearTimeout(d._idleTimeoutId);var a=d._idleTimeout;a>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},a))},ee.setImmediate="function"==typeof M?M:function(d){var a=n++,y=!(arguments.length<2)&&e.call(arguments,1);return r[a]=!0,x(function(){r[a]&&(y?d.apply(null,y):d.call(null),ee.clearImmediate(a))}),a},ee.clearImmediate="function"==typeof o?o:function(d){delete r[d]}}).call(this)}).call(this,G("timers").setImmediate,G("timers").clearImmediate)},{"process/browser.js":59,timers:111}],112:[function(G,K,ee){"use strict";var M=G("punycode"),o=G("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ee.parse=O,ee.resolve=function(R,A){return O(R,!1,!0).resolve(A)},ee.resolveObject=function(R,A){return R?O(R,!1,!0).resolveObject(A):A},ee.format=function(R){return o.isString(R)&&(R=O(R)),R instanceof x?R.format():x.prototype.format.call(R)},ee.Url=x;var h=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),s=["'"].concat(n),d=["%","/","?",";","#"].concat(s),a=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,l=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},c={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=G("querystring");function O(R,A,v){if(R&&o.isObject(R)&&R instanceof x)return R;var F=new x;return F.parse(R,A,v),F}x.prototype.parse=function(R,A,v){if(!o.isString(R))throw new TypeError("Parameter 'url' must be a string, not "+typeof R);var F=R.indexOf("?"),j=-1!==F&&F<R.indexOf("#")?"?":"#",H=R.split(j);H[0]=H[0].replace(/\\/g,"/");var P=R=H.join(j);if(P=P.trim(),!v&&1===R.split("#").length){var X=r.exec(P);if(X)return this.path=P,this.href=P,this.pathname=X[1],X[2]?(this.search=X[2],this.query=A?_.parse(this.search.substr(1)):this.search.substr(1)):A&&(this.search="",this.query={}),this}var Y=h.exec(P);if(Y){var ie=(Y=Y[0]).toLowerCase();this.protocol=ie,P=P.substr(Y.length)}if(v||Y||P.match(/^\/\/[^@\/]+@[^@\/]+/)){var fe="//"===P.substr(0,2);!fe||Y&&c[Y]||(P=P.substr(2),this.slashes=!0)}if(!c[Y]&&(fe||Y&&!E[Y])){for(var oe,le,V=-1,$=0;$<a.length;$++)-1!==(ne=P.indexOf(a[$]))&&(-1===V||ne<V)&&(V=ne);for(-1!==(le=-1===V?P.lastIndexOf("@"):P.lastIndexOf("@",V))&&(oe=P.slice(0,le),P=P.slice(le+1),this.auth=decodeURIComponent(oe)),V=-1,$=0;$<d.length;$++){var ne;-1!==(ne=P.indexOf(d[$]))&&(-1===V||ne<V)&&(V=ne)}-1===V&&(V=P.length),this.host=P.slice(0,V),P=P.slice(V),this.parseHost(),this.hostname=this.hostname||"";var pe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!pe)for(var Fe=this.hostname.split(/\./),ve=($=0,Fe.length);$<ve;$++){var ce=Fe[$];if(ce&&!ce.match(y)){for(var _e="",Ne=0,Qe=ce.length;Ne<Qe;Ne++)ce.charCodeAt(Ne)>127?_e+="x":_e+=ce[Ne];if(!_e.match(y)){var te=Fe.slice(0,$),k=Fe.slice($+1),Q=ce.match(l);Q&&(te.push(Q[1]),k.unshift(Q[2])),k.length&&(P="/"+k.join(".")+P),this.hostname=te.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),pe||(this.hostname=M.toASCII(this.hostname));var z=this.port?":"+this.port:"",he=this.hostname||"";this.host=he+z,this.href+=this.host,pe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==P[0]&&(P="/"+P))}if(!f[ie])for($=0,ve=s.length;$<ve;$++){var de=s[$];if(-1!==P.indexOf(de)){var ge=encodeURIComponent(de);ge===de&&(ge=escape(de)),P=P.split(de).join(ge)}}var Pe=P.indexOf("#");-1!==Pe&&(this.hash=P.substr(Pe),P=P.slice(0,Pe));var Oe=P.indexOf("?");if(-1!==Oe?(this.search=P.substr(Oe),this.query=P.substr(Oe+1),A&&(this.query=_.parse(this.query)),P=P.slice(0,Oe)):A&&(this.search="",this.query={}),P&&(this.pathname=P),E[ie]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var Je=this.search||"";this.path=z+Je}return this.href=this.format(),this},x.prototype.format=function(){var R=this.auth||"";R&&(R=(R=encodeURIComponent(R)).replace(/%3A/i,":"),R+="@");var A=this.protocol||"",v=this.pathname||"",F=this.hash||"",j=!1,H="";this.host?j=R+this.host:this.hostname&&(j=R+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(H=_.stringify(this.query));var P=this.search||H&&"?"+H||"";return A&&":"!==A.substr(-1)&&(A+=":"),this.slashes||(!A||E[A])&&!1!==j?(j="//"+(j||""),v&&"/"!==v.charAt(0)&&(v="/"+v)):j||(j=""),F&&"#"!==F.charAt(0)&&(F="#"+F),P&&"?"!==P.charAt(0)&&(P="?"+P),A+j+(v=v.replace(/[?#]/g,function(X){return encodeURIComponent(X)}))+(P=P.replace("#","%23"))+F},x.prototype.resolve=function(R){return this.resolveObject(O(R,!1,!0)).format()},x.prototype.resolveObject=function(R){if(o.isString(R)){var A=new x;A.parse(R,!1,!0),R=A}for(var v=new x,F=Object.keys(this),j=0;j<F.length;j++){var H=F[j];v[H]=this[H]}if(v.hash=R.hash,""===R.href)return v.href=v.format(),v;if(R.slashes&&!R.protocol){for(var P=Object.keys(R),X=0;X<P.length;X++){var Y=P[X];"protocol"!==Y&&(v[Y]=R[Y])}return E[v.protocol]&&v.hostname&&!v.pathname&&(v.path=v.pathname="/"),v.href=v.format(),v}if(R.protocol&&R.protocol!==v.protocol){if(!E[R.protocol]){for(var ie=Object.keys(R),fe=0;fe<ie.length;fe++){var oe=ie[fe];v[oe]=R[oe]}return v.href=v.format(),v}if(v.protocol=R.protocol,R.host||c[R.protocol])v.pathname=R.pathname;else{for(var le=(R.pathname||"").split("/");le.length&&!(R.host=le.shift()););R.host||(R.host=""),R.hostname||(R.hostname=""),""!==le[0]&&le.unshift(""),le.length<2&&le.unshift(""),v.pathname=le.join("/")}if(v.search=R.search,v.query=R.query,v.host=R.host||"",v.auth=R.auth,v.hostname=R.hostname||R.host,v.port=R.port,v.pathname||v.search){var V=v.pathname||"",$=v.search||"";v.path=V+$}return v.slashes=v.slashes||R.slashes,v.href=v.format(),v}var ne=v.pathname&&"/"===v.pathname.charAt(0),pe=R.host||R.pathname&&"/"===R.pathname.charAt(0),Fe=pe||ne||v.host&&R.pathname,ve=Fe,ce=v.pathname&&v.pathname.split("/")||[],_e=(le=R.pathname&&R.pathname.split("/")||[],v.protocol&&!E[v.protocol]);if(_e&&(v.hostname="",v.port=null,v.host&&(""===ce[0]?ce[0]=v.host:ce.unshift(v.host)),v.host="",R.protocol&&(R.hostname=null,R.port=null,R.host&&(""===le[0]?le[0]=R.host:le.unshift(R.host)),R.host=null),Fe=Fe&&(""===le[0]||""===ce[0])),pe)v.host=R.host||""===R.host?R.host:v.host,v.hostname=R.hostname||""===R.hostname?R.hostname:v.hostname,v.search=R.search,v.query=R.query,ce=le;else if(le.length)ce||(ce=[]),ce.pop(),ce=ce.concat(le),v.search=R.search,v.query=R.query;else if(!o.isNullOrUndefined(R.search))return _e&&(v.hostname=v.host=ce.shift(),(Q=!!(v.host&&v.host.indexOf("@")>0)&&v.host.split("@"))&&(v.auth=Q.shift(),v.host=v.hostname=Q.shift())),v.search=R.search,v.query=R.query,o.isNull(v.pathname)&&o.isNull(v.search)||(v.path=(v.pathname?v.pathname:"")+(v.search?v.search:"")),v.href=v.format(),v;if(!ce.length)return v.pathname=null,v.search?v.path="/"+v.search:v.path=null,v.href=v.format(),v;for(var Ne=ce.slice(-1)[0],Qe=(v.host||R.host||ce.length>1)&&("."===Ne||".."===Ne)||""===Ne,te=0,k=ce.length;k>=0;k--)"."===(Ne=ce[k])?ce.splice(k,1):".."===Ne?(ce.splice(k,1),te++):te&&(ce.splice(k,1),te--);if(!Fe&&!ve)for(;te--;te)ce.unshift("..");!Fe||""===ce[0]||ce[0]&&"/"===ce[0].charAt(0)||ce.unshift(""),Qe&&"/"!==ce.join("/").substr(-1)&&ce.push("");var Q,z=""===ce[0]||ce[0]&&"/"===ce[0].charAt(0);return _e&&(v.hostname=v.host=z?"":ce.length?ce.shift():"",(Q=!!(v.host&&v.host.indexOf("@")>0)&&v.host.split("@"))&&(v.auth=Q.shift(),v.host=v.hostname=Q.shift())),(Fe=Fe||v.host&&ce.length)&&!z&&ce.unshift(""),ce.length?v.pathname=ce.join("/"):(v.pathname=null,v.path=null),o.isNull(v.pathname)&&o.isNull(v.search)||(v.path=(v.pathname?v.pathname:"")+(v.search?v.search:"")),v.auth=R.auth||v.auth,v.slashes=v.slashes||R.slashes,v.href=v.format(),v},x.prototype.parseHost=function(){var R=this.host,A=e.exec(R);A&&(":"!==(A=A[0])&&(this.port=A.substr(1)),R=R.substr(0,R.length-A.length)),R&&(this.hostname=R)}},{"./util":113,punycode:60,querystring:63}],113:[function(G,K,ee){"use strict";K.exports={isString:function(M){return"string"==typeof M},isObject:function(M){return"object"==typeof M&&null!==M},isNull:function(M){return null===M},isNullOrUndefined:function(M){return null==M}}},{}],114:[function(G,K,ee){(function(M){(function(){function o(x){try{if(!M.localStorage)return!1}catch{return!1}var h=M.localStorage[x];return null!=h&&"true"===String(h).toLowerCase()}K.exports=function(x,h){if(o("noDeprecation"))return x;var e=!1;return function(){if(!e){if(o("throwDeprecation"))throw new Error(h);o("traceDeprecation")?console.trace(h):console.warn(h),e=!0}return x.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],115:[function(G,K,ee){K.exports=function(M){return M&&"object"==typeof M&&"function"==typeof M.copy&&"function"==typeof M.fill&&"function"==typeof M.readUInt8}},{}],116:[function(G,K,ee){"use strict";var M=G("is-arguments"),o=G("is-generator-function"),x=G("which-typed-array"),h=G("is-typed-array");function e(V){return V.call.bind(V)}var r=typeof BigInt<"u",n=typeof Symbol<"u",s=e(Object.prototype.toString),d=e(Number.prototype.valueOf),a=e(String.prototype.valueOf),y=e(Boolean.prototype.valueOf);if(r)var l=e(BigInt.prototype.valueOf);if(n)var f=e(Symbol.prototype.valueOf);function c(V,$){if("object"!=typeof V)return!1;try{return $(V),!0}catch{return!1}}function E(V){return"[object Map]"===s(V)}function _(V){return"[object Set]"===s(V)}function O(V){return"[object WeakMap]"===s(V)}function R(V){return"[object WeakSet]"===s(V)}function A(V){return"[object ArrayBuffer]"===s(V)}function v(V){return typeof ArrayBuffer<"u"&&(A.working?A(V):V instanceof ArrayBuffer)}function F(V){return"[object DataView]"===s(V)}function j(V){return typeof DataView<"u"&&(F.working?F(V):V instanceof DataView)}ee.isArgumentsObject=M,ee.isGeneratorFunction=o,ee.isTypedArray=h,ee.isPromise=function(V){return typeof Promise<"u"&&V instanceof Promise||null!==V&&"object"==typeof V&&"function"==typeof V.then&&"function"==typeof V.catch},ee.isArrayBufferView=function(V){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(V):h(V)||j(V)},ee.isUint8Array=function(V){return"Uint8Array"===x(V)},ee.isUint8ClampedArray=function(V){return"Uint8ClampedArray"===x(V)},ee.isUint16Array=function(V){return"Uint16Array"===x(V)},ee.isUint32Array=function(V){return"Uint32Array"===x(V)},ee.isInt8Array=function(V){return"Int8Array"===x(V)},ee.isInt16Array=function(V){return"Int16Array"===x(V)},ee.isInt32Array=function(V){return"Int32Array"===x(V)},ee.isFloat32Array=function(V){return"Float32Array"===x(V)},ee.isFloat64Array=function(V){return"Float64Array"===x(V)},ee.isBigInt64Array=function(V){return"BigInt64Array"===x(V)},ee.isBigUint64Array=function(V){return"BigUint64Array"===x(V)},E.working=typeof Map<"u"&&E(new Map),ee.isMap=function(V){return typeof Map<"u"&&(E.working?E(V):V instanceof Map)},_.working=typeof Set<"u"&&_(new Set),ee.isSet=function(V){return typeof Set<"u"&&(_.working?_(V):V instanceof Set)},O.working=typeof WeakMap<"u"&&O(new WeakMap),ee.isWeakMap=function(V){return typeof WeakMap<"u"&&(O.working?O(V):V instanceof WeakMap)},R.working=typeof WeakSet<"u"&&R(new WeakSet),ee.isWeakSet=function(V){return R(V)},A.working=typeof ArrayBuffer<"u"&&A(new ArrayBuffer),ee.isArrayBuffer=v,F.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&F(new DataView(new ArrayBuffer(1),0,1)),ee.isDataView=j;var H=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function P(V){return"[object SharedArrayBuffer]"===s(V)}function X(V){return void 0!==H&&(void 0===P.working&&(P.working=P(new H)),P.working?P(V):V instanceof H)}function Y(V){return c(V,d)}function ie(V){return c(V,a)}function fe(V){return c(V,y)}function oe(V){return r&&c(V,l)}function le(V){return n&&c(V,f)}ee.isSharedArrayBuffer=X,ee.isAsyncFunction=function(V){return"[object AsyncFunction]"===s(V)},ee.isMapIterator=function(V){return"[object Map Iterator]"===s(V)},ee.isSetIterator=function(V){return"[object Set Iterator]"===s(V)},ee.isGeneratorObject=function(V){return"[object Generator]"===s(V)},ee.isWebAssemblyCompiledModule=function(V){return"[object WebAssembly.Module]"===s(V)},ee.isNumberObject=Y,ee.isStringObject=ie,ee.isBooleanObject=fe,ee.isBigIntObject=oe,ee.isSymbolObject=le,ee.isBoxedPrimitive=function(V){return Y(V)||ie(V)||fe(V)||oe(V)||le(V)},ee.isAnyArrayBuffer=function(V){return typeof Uint8Array<"u"&&(v(V)||X(V))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(V){Object.defineProperty(ee,V,{enumerable:!1,value:function(){throw new Error(V+" is not supported in userland")}})})},{"is-arguments":23,"is-generator-function":25,"is-typed-array":26,"which-typed-array":118}],117:[function(G,K,ee){(function(M){(function(){var o=Object.getOwnPropertyDescriptors||function(V){for(var $=Object.keys(V),ne={},pe=0;pe<$.length;pe++)ne[$[pe]]=Object.getOwnPropertyDescriptor(V,$[pe]);return ne},x=/%[sdj%]/g;ee.format=function(V){if(!O(V)){for(var $=[],ne=0;ne<arguments.length;ne++)$.push(n(arguments[ne]));return $.join(" ")}ne=1;for(var pe=arguments,Fe=pe.length,ve=String(V).replace(x,function(_e){if("%%"===_e)return"%";if(ne>=Fe)return _e;switch(_e){case"%s":return String(pe[ne++]);case"%d":return Number(pe[ne++]);case"%j":try{return JSON.stringify(pe[ne++])}catch{return"[Circular]"}default:return _e}}),ce=pe[ne];ne<Fe;ce=pe[++ne])E(ce)||!v(ce)?ve+=" "+ce:ve+=" "+n(ce);return ve},ee.deprecate=function(V,$){if(void 0!==M&&!0===M.noDeprecation)return V;if(void 0===M)return function(){return ee.deprecate(V,$).apply(this,arguments)};var ne=!1;return function(){if(!ne){if(M.throwDeprecation)throw new Error($);M.traceDeprecation?console.trace($):console.error($),ne=!0}return V.apply(this,arguments)}};var h={},e=/^$/;if(M.env.NODE_DEBUG){var r=M.env.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+r+"$","i")}function n(V,$){var ne={seen:[],stylize:d};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),c($)?ne.showHidden=$:$&&ee._extend(ne,$),R(ne.showHidden)&&(ne.showHidden=!1),R(ne.depth)&&(ne.depth=2),R(ne.colors)&&(ne.colors=!1),R(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=s),a(ne,V,ne.depth)}function s(V,$){var ne=n.styles[$];return ne?"\x1b["+n.colors[ne][0]+"m"+V+"\x1b["+n.colors[ne][1]+"m":V}function d(V,$){return V}function a(V,$,ne){if(V.customInspect&&$&&H($.inspect)&&$.inspect!==ee.inspect&&(!$.constructor||$.constructor.prototype!==$)){var pe=$.inspect(ne,V);return O(pe)||(pe=a(V,pe,ne)),pe}var Fe=function(Q,z){if(R(z))return Q.stylize("undefined","undefined");if(O(z)){var he="'"+JSON.stringify(z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Q.stylize(he,"string")}return _(z)?Q.stylize(""+z,"number"):c(z)?Q.stylize(""+z,"boolean"):E(z)?Q.stylize("null","null"):void 0}(V,$);if(Fe)return Fe;var z,ve=Object.keys($),ce=(z={},ve.forEach(function(he,de){z[he]=!0}),z);if(V.showHidden&&(ve=Object.getOwnPropertyNames($)),j($)&&(ve.indexOf("message")>=0||ve.indexOf("description")>=0))return y($);if(0===ve.length){if(H($)){var _e=$.name?": "+$.name:"";return V.stylize("[Function"+_e+"]","special")}if(A($))return V.stylize(RegExp.prototype.toString.call($),"regexp");if(F($))return V.stylize(Date.prototype.toString.call($),"date");if(j($))return y($)}var Ne,Qe="",te=!1,k=["{","}"];return f($)&&(te=!0,k=["[","]"]),H($)&&(Qe=" [Function"+($.name?": "+$.name:"")+"]"),A($)&&(Qe=" "+RegExp.prototype.toString.call($)),F($)&&(Qe=" "+Date.prototype.toUTCString.call($)),j($)&&(Qe=" "+y($)),0!==ve.length||te&&0!=$.length?ne<0?A($)?V.stylize(RegExp.prototype.toString.call($),"regexp"):V.stylize("[Object]","special"):(V.seen.push($),Ne=te?function(Q,z,he,de,ge){for(var Pe=[],Oe=0,Je=z.length;Oe<Je;++Oe)fe(z,String(Oe))?Pe.push(l(Q,z,he,de,String(Oe),!0)):Pe.push("");return ge.forEach(function($e){$e.match(/^\d+$/)||Pe.push(l(Q,z,he,de,$e,!0))}),Pe}(V,$,ne,ce,ve):ve.map(function(Q){return l(V,$,ne,ce,Q,te)}),V.seen.pop(),function(Q,z,he){return Q.reduce(function(ge,Pe){return Pe.indexOf("\n"),ge+Pe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?he[0]+(""===z?"":z+"\n ")+" "+Q.join(",\n  ")+" "+he[1]:he[0]+z+" "+Q.join(", ")+" "+he[1]}(Ne,Qe,k)):k[0]+Qe+k[1]}function y(V){return"["+Error.prototype.toString.call(V)+"]"}function l(V,$,ne,pe,Fe,ve){var ce,_e,Ne;if((Ne=Object.getOwnPropertyDescriptor($,Fe)||{value:$[Fe]}).get?_e=Ne.set?V.stylize("[Getter/Setter]","special"):V.stylize("[Getter]","special"):Ne.set&&(_e=V.stylize("[Setter]","special")),fe(pe,Fe)||(ce="["+Fe+"]"),_e||(V.seen.indexOf(Ne.value)<0?(_e=E(ne)?a(V,Ne.value,null):a(V,Ne.value,ne-1)).indexOf("\n")>-1&&(_e=ve?_e.split("\n").map(function(Qe){return"  "+Qe}).join("\n").substr(2):"\n"+_e.split("\n").map(function(Qe){return"   "+Qe}).join("\n")):_e=V.stylize("[Circular]","special")),R(ce)){if(ve&&Fe.match(/^\d+$/))return _e;(ce=JSON.stringify(""+Fe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ce=ce.substr(1,ce.length-2),ce=V.stylize(ce,"name")):(ce=ce.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ce=V.stylize(ce,"string"))}return ce+": "+_e}function f(V){return Array.isArray(V)}function c(V){return"boolean"==typeof V}function E(V){return null===V}function _(V){return"number"==typeof V}function O(V){return"string"==typeof V}function R(V){return void 0===V}function A(V){return v(V)&&"[object RegExp]"===P(V)}function v(V){return"object"==typeof V&&null!==V}function F(V){return v(V)&&"[object Date]"===P(V)}function j(V){return v(V)&&("[object Error]"===P(V)||V instanceof Error)}function H(V){return"function"==typeof V}function P(V){return Object.prototype.toString.call(V)}function X(V){return V<10?"0"+V.toString(10):V.toString(10)}ee.debuglog=function(V){if(V=V.toUpperCase(),!h[V])if(e.test(V)){var $=M.pid;h[V]=function(){var ne=ee.format.apply(ee,arguments);console.error("%s %d: %s",V,$,ne)}}else h[V]=function(){};return h[V]},ee.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ee.types=G("./support/types"),ee.isArray=f,ee.isBoolean=c,ee.isNull=E,ee.isNullOrUndefined=function(V){return null==V},ee.isNumber=_,ee.isString=O,ee.isSymbol=function(V){return"symbol"==typeof V},ee.isUndefined=R,ee.isRegExp=A,ee.types.isRegExp=A,ee.isObject=v,ee.isDate=F,ee.types.isDate=F,ee.isError=j,ee.types.isNativeError=j,ee.isFunction=H,ee.isPrimitive=function(V){return null===V||"boolean"==typeof V||"number"==typeof V||"string"==typeof V||"symbol"==typeof V||void 0===V},ee.isBuffer=G("./support/isBuffer");var Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fe(V,$){return Object.prototype.hasOwnProperty.call(V,$)}ee.log=function(){console.log("%s - %s",function ie(){var V=new Date,$=[X(V.getHours()),X(V.getMinutes()),X(V.getSeconds())].join(":");return[V.getDate(),Y[V.getMonth()],$].join(" ")}(),ee.format.apply(ee,arguments))},ee.inherits=G("inherits"),ee._extend=function(V,$){if(!$||!v($))return V;for(var ne=Object.keys($),pe=ne.length;pe--;)V[ne[pe]]=$[ne[pe]];return V};var oe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function le(V,$){if(!V){var ne=new Error("Promise was rejected with a falsy value");ne.reason=V,V=ne}return $(V)}ee.promisify=function(V){if("function"!=typeof V)throw new TypeError('The "original" argument must be of type Function');if(oe&&V[oe]){var $;if("function"!=typeof($=V[oe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty($,oe,{value:$,enumerable:!1,writable:!1,configurable:!0}),$}function $(){for(var ne,pe,Fe=new Promise(function(_e,Ne){ne=_e,pe=Ne}),ve=[],ce=0;ce<arguments.length;ce++)ve.push(arguments[ce]);ve.push(function(_e,Ne){_e?pe(_e):ne(Ne)});try{V.apply(this,ve)}catch(_e){pe(_e)}return Fe}return Object.setPrototypeOf($,Object.getPrototypeOf(V)),oe&&Object.defineProperty($,oe,{value:$,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties($,o(V))},ee.promisify.custom=oe,ee.callbackify=function(V){if("function"!=typeof V)throw new TypeError('The "original" argument must be of type Function');function $(){for(var ne=[],pe=0;pe<arguments.length;pe++)ne.push(arguments[pe]);var Fe=ne.pop();if("function"!=typeof Fe)throw new TypeError("The last argument must be of type Function");var ve=this,ce=function(){return Fe.apply(ve,arguments)};V.apply(this,ne).then(function(_e){M.nextTick(ce.bind(null,null,_e))},function(_e){M.nextTick(le.bind(null,_e,ce))})}return Object.setPrototypeOf($,Object.getPrototypeOf(V)),Object.defineProperties($,o(V)),$}}).call(this)}).call(this,G("_process"))},{"./support/isBuffer":115,"./support/types":116,_process:59,inherits:22}],118:[function(G,K,ee){(function(M){(function(){"use strict";var o=G("for-each"),x=G("available-typed-arrays"),h=G("call-bind/callBound"),e=h("Object.prototype.toString"),r=G("has-tostringtag/shams")(),n=typeof globalThis>"u"?M:globalThis,s=x(),d=h("String.prototype.slice"),a={},y=G("es-abstract/helpers/getOwnPropertyDescriptor"),l=Object.getPrototypeOf;r&&y&&l&&o(s,function(c){if("function"==typeof n[c]){var E=new n[c];if(Symbol.toStringTag in E){var _=l(E),O=y(_,Symbol.toStringTag);if(!O){var R=l(_);O=y(R,Symbol.toStringTag)}a[c]=O.get}}});var f=G("is-typed-array");K.exports=function(c){return!!f(c)&&(r&&Symbol.toStringTag in c?(E=c,_=!1,o(a,function(O,R){if(!_)try{var A=O.call(E);A===R&&(_=A)}catch{}}),_):d(e(c),8,-1));var E,_}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18,"is-typed-array":26}],119:[function(G,K,ee){K.exports=function(){for(var o={},x=0;x<arguments.length;x++){var h=arguments[x];for(var e in h)M.call(h,e)&&(o[e]=h[e])}return o};var M=Object.prototype.hasOwnProperty},{}],120:[function(G,K,ee){"use strict";K.exports=function(M){M.prototype[Symbol.iterator]=function*(){for(let o=this.head;o;o=o.next)yield o.value}}},{}],121:[function(G,K,ee){"use strict";function M(r){var n=this;if(n instanceof M||(n=new M),n.tail=null,n.head=null,n.length=0,r&&"function"==typeof r.forEach)r.forEach(function(a){n.push(a)});else if(arguments.length>0)for(var s=0,d=arguments.length;s<d;s++)n.push(arguments[s]);return n}function o(r,n,s){var d=n===r.head?new e(s,null,n,r):new e(s,n,n.next,r);return null===d.next&&(r.tail=d),null===d.prev&&(r.head=d),r.length++,d}function x(r,n){r.tail=new e(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function h(r,n){r.head=new e(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function e(r,n,s,d){if(!(this instanceof e))return new e(r,n,s,d);this.list=d,this.value=r,n?(n.next=this,this.prev=n):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}K.exports=M,M.Node=e,M.create=M,M.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var n=r.next,s=r.prev;return n&&(n.prev=s),s&&(s.next=n),r===this.head&&(this.head=n),r===this.tail&&(this.tail=s),r.list.length--,r.next=null,r.prev=null,r.list=null,n},M.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var n=this.head;r.list=this,r.next=n,n&&(n.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},M.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var n=this.tail;r.list=this,r.prev=n,n&&(n.next=r),this.tail=r,this.head||(this.head=r),this.length++}},M.prototype.push=function(){for(var r=0,n=arguments.length;r<n;r++)x(this,arguments[r]);return this.length},M.prototype.unshift=function(){for(var r=0,n=arguments.length;r<n;r++)h(this,arguments[r]);return this.length},M.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},M.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},M.prototype.forEach=function(r,n){n=n||this;for(var s=this.head,d=0;null!==s;d++)r.call(n,s.value,d,this),s=s.next},M.prototype.forEachReverse=function(r,n){n=n||this;for(var s=this.tail,d=this.length-1;null!==s;d--)r.call(n,s.value,d,this),s=s.prev},M.prototype.get=function(r){for(var n=0,s=this.head;null!==s&&n<r;n++)s=s.next;if(n===r&&null!==s)return s.value},M.prototype.getReverse=function(r){for(var n=0,s=this.tail;null!==s&&n<r;n++)s=s.prev;if(n===r&&null!==s)return s.value},M.prototype.map=function(r,n){n=n||this;for(var s=new M,d=this.head;null!==d;)s.push(r.call(n,d.value,this)),d=d.next;return s},M.prototype.mapReverse=function(r,n){n=n||this;for(var s=new M,d=this.tail;null!==d;)s.push(r.call(n,d.value,this)),d=d.prev;return s},M.prototype.reduce=function(r,n){var s,d=this.head;if(arguments.length>1)s=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");d=this.head.next,s=this.head.value}for(var a=0;null!==d;a++)s=r(s,d.value,a),d=d.next;return s},M.prototype.reduceReverse=function(r,n){var s,d=this.tail;if(arguments.length>1)s=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");d=this.tail.prev,s=this.tail.value}for(var a=this.length-1;null!==d;a--)s=r(s,d.value,a),d=d.prev;return s},M.prototype.toArray=function(){for(var r=new Array(this.length),n=0,s=this.head;null!==s;n++)r[n]=s.value,s=s.next;return r},M.prototype.toArrayReverse=function(){for(var r=new Array(this.length),n=0,s=this.tail;null!==s;n++)r[n]=s.value,s=s.prev;return r},M.prototype.slice=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var s=new M;if(n<r||n<0)return s;r<0&&(r=0),n>this.length&&(n=this.length);for(var d=0,a=this.head;null!==a&&d<r;d++)a=a.next;for(;null!==a&&d<n;d++,a=a.next)s.push(a.value);return s},M.prototype.sliceReverse=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var s=new M;if(n<r||n<0)return s;r<0&&(r=0),n>this.length&&(n=this.length);for(var d=this.length,a=this.tail;null!==a&&d>n;d--)a=a.prev;for(;null!==a&&d>r;d--,a=a.prev)s.push(a.value);return s},M.prototype.splice=function(r,n,...s){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var d=0,a=this.head;null!==a&&d<r;d++)a=a.next;var y=[];for(d=0;a&&d<n;d++)y.push(a.value),a=this.removeNode(a);for(null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev),d=0;d<s.length;d++)a=o(this,a,s[d]);return y},M.prototype.reverse=function(){for(var r=this.head,n=this.tail,s=r;null!==s;s=s.prev){var d=s.prev;s.prev=s.next,s.next=d}return this.head=n,this.tail=r,this};try{G("./iterator.js")(M)}catch{}},{"./iterator.js":120}],122:[function(G,K,ee){var M=G("./parser"),o=G("./utils"),x=o;function h(r,n){this.name="NonSupportedSparqlFeatureError",this.feature=r,this.message=n||"SPARQL feature "+r+" non supported"}function e(r){this.name=ParserError,this.message=r||"Error parsing SPARQL query"}h.prototype=new Error,h.constructor=h,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(r){return M.parse(r)},AbstractQueryTree.prototype.parseExecutableUnit=function(r){if("select"===r.kind)return this.parseSelect(r);if("ask"===r.kind)return this.parseSelect(r);if("modify"===r.kind)return this.parseSelect(r);if("construct"===r.kind)return this.parseSelect(r);if("insertdata"===r.kind)return this.parseInsertData(r);if("deletedata"===r.kind)return this.parseInsertData(r);if("load"===r.kind||"clear"===r.kind||"drop"===r.kind||"create"===r.kind)return r;throw new Error("unknown executable unit: "+r.kind)},AbstractQueryTree.prototype.parseSelect=function(r){return null==r?(console.log("error parsing query"),null):(r.pattern=this.build(r.pattern,{freshCounter:0}),r)},AbstractQueryTree.prototype.parseInsertData=function(r){return r??(console.log("error parsing query"),null)},AbstractQueryTree.prototype.build=function(r,n){if("groupgraphpattern"===r.token)return this._buildGroupGraphPattern(r,n);if("basicgraphpattern"===r.token){var s={kind:"BGP",value:r.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(s,n)}if("graphunionpattern"===r.token)return{kind:"UNION",value:[this.build(r.value[0],n),this.build(r.value[1],n)]};if("graphgraphpattern"===r.token)return{kind:"GRAPH",value:this.build(r.value,n),graph:r.graph};throw null!=r.token?new h(r.token,"Non implemented SPARQL graph pattern: '"+r.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(r)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(r,n){for(var s,d,a,y=[],l=0;l<r.value.length;l++)if(r.value[l].predicate&&"path"===r.value[l].predicate.token){s=r.value[l],d=r.value.slice(l+1);var f=AbstractQueryTree.translatePathExpression(s,n),c=null;if("BGP"!==f.kind){if("ZERO_OR_MORE_PATH"===f.kind||"ONE_OR_MORE_PATH"===f.kind){if(a=y.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:y},rvalue:f}:f,"ZERO_OR_MORE_PATH"===f.kind)if("var"===f.y.token&&0===f.y.value.indexOf("fresh:")&&"var"===f.x.token&&0===f.x.value.indexOf("fresh:"))for(var E=0;E<r.value.length;E++)r.value[E].object&&"var"===r.value[E].object.token&&r.value[E].object.value===f.x.value&&((c=x.clone(r.value[E],!0)).object=f.y);else if("var"===f.y.token&&0===f.y.value.indexOf("fresh:"))for(E=0;E<r.value.length;E++)r.value[E].subject&&"var"===r.value[E].subject.token&&r.value[E].subject.value===f.y.value&&((c=x.clone(r.value[E],!0)).subject=f.x);if(d.length>0){var _=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:d},n);return null!=c?{kind:"UNION",value:[{kind:"JOIN",lvalue:a,rvalue:_},{kind:"BGP",value:y.concat([c]).concat(d)}]}:{kind:"JOIN",lvalue:a,rvalue:_}}return a}return f}y=y.concat(f.value)}else y.push(r.value[l]);return r.value=y,r},AbstractQueryTree.translatePathExpression=function(r,n){if("element"===r.predicate.kind)return"+"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,n),x:r.subject,y:r.object}):"*"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,n),x:r.subject,y:r.object}):(r.predicate=r.predicate.value,{kind:"BGP",value:[r]});if("sequence"===r.predicate.kind){for(var s,d,a=r.subject,y=r.object,l=r.graph,f=[],c=0;c<r.predicate.value.length;c++)c!=r.predicate.value.length-1?(s={token:"var",value:"fresh:"+n.freshCounter},n.freshCounter++):s=y,d={subject:a,predicate:r.predicate.value[c],object:s},null!=l&&(d.graph=x.clone(l,!0)),f.push(d),c!=r.predicate.value.length-1&&(a=x.clone(s,!0));var E={kind:"BGP",value:f};return AbstractQueryTree.translatePathExpressionsInBGP(E,n)}throw new h("Non supported path expression "+r.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(r,n){for(var s=r.filters||[],d=r.binds||[],a={kind:"EMPTY_PATTERN"},y=0;y<r.patterns.length;y++){var l=r.patterns[y];if("optionalgraphpattern"===l.token)a="FILTER"===(f=this.build(l.value,n)).kind?{kind:"LEFT_JOIN",lvalue:a,rvalue:f.value,filter:f.filter}:{kind:"LEFT_JOIN",lvalue:a,rvalue:f,filter:!0};else{var f=this.build(l,n);a="EMPTY_PATTERN"==a.kind?f:{kind:"JOIN",lvalue:a,rvalue:f}}}if(a.binds=d,0!=s.length){if("EMPTY_PATTERN"===a.kind)return{kind:"FILTER",filter:s,value:a};if("LEFT_JOIN"===a.kind&&!0===a.filter)return{kind:"FILTER",filter:s,value:a};if("LEFT_JOIN"===a.kind)return{kind:"FILTER",filter:s,value:a};if("JOIN"===a.kind)return{kind:"FILTER",filter:s,value:a};if("UNION"===a.kind)return{kind:"FILTER",filter:s,value:a};if("GRAPH"===a.kind)return{kind:"FILTER",filter:s,value:a};if("BGP"===a.kind)return{kind:"FILTER",filter:s,value:a};throw new Error("Unknow kind of algebra expression: "+a.kind)}return a},AbstractQueryTree.prototype.collectBasicTriples=function(r,n){if(null==n&&(n=[]),"select"===r.kind)n=this.collectBasicTriples(r.pattern,n);else if("BGP"===r.kind)n=n.concat(r.value);else if("ZERO_OR_MORE_PATH"===r.kind)n=this.collectBasicTriples(r.path);else if("UNION"===r.kind)n=this.collectBasicTriples(r.value[0],n),n=this.collectBasicTriples(r.value[1],n);else if("GRAPH"===r.kind)n=this.collectBasicTriples(r.value,n);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)n=this.collectBasicTriples(r.lvalue,n),n=this.collectBasicTriples(r.rvalue,n);else if("FILTER"===r.kind)n=this.collectBasicTriples(r.value,n);else if("construct"===r.kind)n=this.collectBasicTriples(r.pattern,n);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return n},AbstractQueryTree.prototype.bind=function(r,n){if(null!=r.graph&&r.graph.token&&"var"===r.graph.token&&null!=n[r.graph.value]&&(r.graph=n[r.graph.value]),null!=r.filter){for(var s=[],d=0;d<r.filter.length;d++)r.filter[d].value=this._bindFilter(r.filter[d].value,n),s.push(r.filter[d]);r.filter=s}if("select"===r.kind)r.pattern=this.bind(r.pattern,n);else if("BGP"===r.kind)r.value=this._bindTripleContext(r.value,n);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._bindTripleContext(r.path,n),r.x&&"var"===r.x.token&&null!=n[r.x.value]&&(r.x=n[r.x.value]),r.y&&"var"===r.y.token&&null!=n[r.y.value]&&(r.y=n[r.y.value]);else if("UNION"===r.kind)r.value[0]=this.bind(r.value[0],n),r.value[1]=this.bind(r.value[1],n);else if("GRAPH"===r.kind)r.value=this.bind(r.value,n);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.bind(r.lvalue,n),r.rvalue=this.bind(r.rvalue,n);else if("FILTER"===r.kind){var a=this;r.value=this.bind(r.value,n),r.filter=r.filter.map(function(y){return{token:"filter",value:a._bindFilter(y.value,n)}})}else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._bindTripleContext=function(r,n){for(var s=0;s<r.length;s++)for(var d in delete r[s].graph,delete r[s].variables,r[s]){var a=r[s][d];"var"===a.token&&null!=n[a.value]&&(r[s][d]=n[a.value])}return r},AbstractQueryTree.prototype._bindFilter=function(r,n){if(null!=r.expressionType){var s=r.expressionType;if("relationalexpression"==s)r.op1=this._bindFilter(r.op1,n),r.op2=this._bindFilter(r.op2,n);else if("conditionalor"==s||"conditionaland"==s)for(var d=0;d<r.operands.length;d++)r.operands[d]=this._bindFilter(r.operands[d],n);else if("additiveexpression"==s)for(r.summand=this._bindFilter(r.summand,n),d=0;d<r.summands.length;d++)r.summands[d].expression=this._bindFilter(r.summands[d].expression,n);else if("builtincall"==s)for(d=0;d<r.args.length;d++)r.args[d]=this._bindFilter(r.args[d],n);else if("multiplicativeexpression"==s)for(r.factor=this._bindFilter(r.factor,n),d=0;d<r.factors.length;d++)r.factors[d].expression=this._bindFilter(r.factors[d].expression,n);else if("unaryexpression"==s)r.expression=this._bindFilter(r.expression,n);else if("irireforfunction"==s)for(d=0;d<r.factors.args;d++)r.args[d]=this._bindFilter(r.args[d],n);else if("atomic"==s&&"var"==r.primaryexpression&&null!=n[r.value.value]){var a=n[r.value.value];"uri"===a.token?r.primaryexpression="iri":r.primaryexpression="literal",r.value=a}}return r},AbstractQueryTree.prototype.replace=function(r,n,s,d){if(null!=r.graph&&r.graph.token&&r.graph.token===n.token&&r.graph.value==n.value&&(r.graph=x.clone(s,!0)),null!=r.filter){for(var a=[],y=0;y<r.filter.length;y++)r.filter[y].value=this._replaceFilter(r.filter[y].value,n,s,d),a.push(r.filter[y]);r.filter=a}if("select"===r.kind)r.pattern=this.replace(r.pattern,n,s,d);else if("BGP"===r.kind)r.value=this._replaceTripleContext(r.value,n,s,d);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._replaceTripleContext(r.path,n,s,d),r.x&&r.x.token===n.token&&r.value===n.value&&(r.x=x.clone(s,!0)),r.y&&r.y.token===n.token&&r.value===n.value&&(r.y=x.clone(s,!0));else if("UNION"===r.kind)r.value[0]=this.replace(r.value[0],n,s,d),r.value[1]=this.replace(r.value[1],n,s,d);else if("GRAPH"===r.kind)r.value=this.replace(r.value,n,s);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.replace(r.lvalue,n,s,d),r.rvalue=this.replace(r.rvalue,n,s,d);else if("FILTER"===r.kind)r.value=this._replaceFilter(r.value,n,s,d);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._replaceTripleContext=function(r,n,s,d){for(var a=0;a<r.length;a++)for(var y in r[a]){var l=r[a][y];"var"===l.token&&"var"===n.token&&l.value===n.value||"blank"===l.token&&"blank"===n.token&&l.value===n.value?r[a][y]=s:"literal"!==l.token&&"uri"!==l.token||"literal"!==n.token&&"uri"!==n.token||l.token!==n.token||o.lexicalFormTerm(l,d)[l.token]!==o.lexicalFormTerm(n,d)[l.token]||(r[a][y]=s)}return r},AbstractQueryTree.prototype._replaceFilter=function(r,n,s,d){if(null!=r.expressionType){var a=r.expressionType;if("relationalexpression"==a)r.op1=this._replaceFilter(r.op1,n,s,d),r.op2=this._replaceFilter(r.op2,n,s,d);else if("conditionalor"==a||"conditionaland"==a)for(var y=0;y<r.operands.length;y++)r.operands[y]=this._replaceFilter(r.operands[y],n,s,d);else if("additiveexpression"==a)for(r.summand=this._replaceFilter(r.summand,n,s,d),y=0;y<r.summands.length;y++)r.summands[y].expression=this._replaceFilter(r.summands[y].expression,n,s,d);else if("builtincall"==a)for(y=0;y<r.args.length;y++)r.args[y]=this._replaceFilter(r.args[y],n,s,d);else if("multiplicativeexpression"==a)for(r.factor=this._replaceFilter(r.factor,n,s,d),y=0;y<r.factors.length;y++)r.factors[y].expression=this._replaceFilter(r.factors[y].expression,n,s,d);else if("unaryexpression"==a)r.expression=this._replaceFilter(r.expression,n,s,d);else if("irireforfunction"==a)for(y=0;y<r.factors.args;y++)r.args[y]=this._replaceFilter(r.args[y],n,s,d);else if("atomic"==a){var l=null;(r.primaryexpression==n.token&&r.value==n.value||"iri"==r.primaryexpression&&"uri"==n.token&&r.value==n.value)&&(l=s.value),null!=l&&("uri"===s.token?r.primaryexpression="iri":r.primaryexpression=s.token,r.value=l)}}return r},AbstractQueryTree.prototype.treeWithUnion=function(r){if(null==r||null==r.kind)return!1;if("select"===r.kind)return this.treeWithUnion(r.pattern);if("BGP"===r.kind)return this.treeWithUnion(r.value);if("ZERO_OR_MORE_PATH"===r.kind)return!1;if("UNION"===r.kind){if(null==r.value[0].value||null==r.value[0].value.variables||null==r.value[1].value||null==r.value[1].value.variables)return!0;if(r.value[0].variables.join("/")===r.values[1].variables.join("/"))return!!this.treeWithUnion(r.value[0])||this.treeWithUnion(r.value[1])}else{if("GRAPH"===r.kind)return!1;if("LEFT_JOIN"!==r.kind&&"JOIN"!==r.kind)return"FILTER"===r.kind||r.kind,!1;if(this.treeWithUnion(r.lvalue))return!0;this.treeWithUnion(r.rvalue)}},K.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:h,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(G,K,ee){"use strict";var M=G("./utils"),o=M,x=M.nextTick,h=function(r,n){if(0!=arguments.length){this.order=r,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var s=this;this._diskWrite(this.root,function(d){s.root=d,s._updateRootNode(s.root,function(a){s.comparator=function(y,l){return y<l?-1:y>l?1:0},s.merger=null,n?.(s)})})}};h.prototype._allocateNode=function(){return new e},h.prototype._diskWrite=function(r,n){x(function(){n(r)})},h.prototype._diskRead=function(r,n){x(function(){n(r)})},h.prototype._diskDelete=function(r,n){x(function(){n()})},h.prototype._updateRootNode=function(r,n){n(r)},h.prototype.search=function(r,n,s){var d=this.root;this.__search(this,r,d,n,s)},h.prototype.__search=function(r,n,s,d,a){for(var y=0;y<s.numberActives&&1===r.comparator(n,s.keys[y].key);)y++;y<s.numberActives&&0===r.comparator(s.keys[y].key,n)?d(null!=a&&1==a||s.keys[y].data):!0===s.isLeaf?d(null):r._diskRead(s.children[y],function(l){r.__search(r,n,l,d,a)})},h.prototype.walk=function(r,n){this.__walk(this,this.root,r,n)},h.prototype.__walk=function(r,n,s,d){var a=n.numberActives,y=0;if(n.isLeaf){for(y=0;y<n.numberActives;y++)s(n.keys[y]);return d()}o.whilst(function(){return y<a},function(l){r._diskRead(n.children[y],function(f){r.__walk(r,f,s,function(){r._diskRead(n.keys[y],function(c){s(c),y++,l()})})})},function(){r._diskRead(n.children[a],function(l){r.__walk(r,l,s,function(){d()})})})},h.prototype.walkNodes=function(r){this.__walkNodes(this,root,r,function(){})},h.prototype.__walkNodes=function(r,n,s,d){if(n.isLeaf)return s(n),d();s(n);var a=n.numberActives,y=0;o.whilst(function(){return y<a},function(l){r._diskRead(n.children[y],function(f){r.__walkNodes(r,f,s,function(){y++,l()})})},function(){r._diskRead(n.children[a],function(l){r.__walkNodes(r,l,s,function(){})})})},h.prototype._splitChild=function(r,n,s,d){var a=this._allocateNode();a.isLeaf=s.isLeaf,a.level=s.level,a.numberActives=this.order-1;var y=s.keys[this.order-1];s.keys[this.order-1]=null;for(var l=0;l<this.order-1;l++)a.keys[l]=s.keys[l+this.order],s.keys[l+this.order]=null,s.isLeaf||(a.children[l]=s.children[l+this.order],s.children[l+this.order]=null);for(s.isLeaf||(a.children[l]=s.children[l+this.order],s.children[l+this.order]=null),s.numberActives=this.order-1,l=r.numberActives+1;l>n+1;l--)r.children[l]=r.children[l-1];for(r.children[n+1]=a,l=r.numberActives;l>n;l--)r.keys[l]=r.keys[l-1];r.keys[n]=y,r.numberActives++;var f=this;this._diskWrite(a,function(c){f._diskWrite(r,function(E){E.children[n+1]=c,f._diskWrite(s,function(_){return d(E)})})})},h.prototype.insert=function(r,n,s){if(this.root.numberActives===2*this.order-1){var d=this._allocateNode();d.isLeaf=!1,d.level=this.root.level+1,d.numberActives=0,d.children[0]=this.root;var a=this;this._splitChild(d,0,this.root,function(y){d=y,a.root=d,a._updateRootNode(d,function(l){a._insertNonFull(l,r,n,s)})})}else this._insertNonFull(this.root,r,n,s)},h.prototype._insertNonFull=function(r,n,s,d){var a=r.numberActives-1;this.__insertNonFull(this,r,a,n,s,d)},h.prototype.__insertNonFull=function(r,n,s,d,a,y){if(n.isLeaf){for(;s>=0&&-1===r.comparator(d,n.keys[s].key);)n.keys[s+1]=n.keys[s],s--;s>=0&&0===r.comparator(d,n.keys[s].key)?n.keys[s]={key:d,data:a}:(n.keys[s+1]={key:d,data:a},n.numberActives++),r._diskWrite(n,function(f){return y(f)})}else{for(;s>=0&&-1===r.comparator(d,n.keys[s].key);)s--;s++;var l=r;r._diskRead(n.children[s],function(f){f.numberActives===2*l.order-1?l._splitChild(n,s,f,function(){1===l.comparator(d,n.keys[s].key)&&s++,l._diskRead(n.children[s],function(c){s=c.numberActives-1,l.__insertNonFull(r,c,s,d,a,y)})}):l._diskRead(n.children[s],function(c){s=c.numberActives-1,l.__insertNonFull(r,c,s,d,a,y)})})}},h.prototype.delete=function(r,n){var s=this.root;h.prototype.__deleteSearchNode(this,r,s,n)},h.prototype.__deleteSearchNode=function(r,n,s,d){var a=0;if(0===s.numberActives)return d(!1);for(;a<s.numberActives&&1===r.comparator(n,s.keys[a].key);)a++;var y=a;if(a<s.numberActives&&0===r.comparator(n,s.keys[a].key))return r.__deleteNodeFound(r,y,n,s,d);if(!0===s.isLeaf)return d(!1);var l=s;r._diskRead(s.children[a],function(f){if(null===f)return d(!1);var c=!1,E=!1,_=null,O=null;y===l.numberActives?(E=!0,O=l.children[y-1],_=l.children[y-1]):0===y?(c=!0,_=l.children[1],O=l.children[1]):(O=l.children[y-1],_=l.children[y+1]),r._diskRead(O,function(R){r._diskRead(_,function(A){!0===E&&(A=null),!0===c&&(R=null),f.numberActives===r.order-1&&null!=l?null!=A&&A.numberActives>r.order-1?r._moveKey(l,a,-1,function(v){r.__deleteSearchNode(r,n,f,d)}):null!=R&&R.numberActives>r.order-1?r._moveKey(l,a,1,function(v){r.__deleteSearchNode(r,n,f,d)}):null!=R&&R.numberActives===r.order-1?r._mergeSiblings(l,a,-1,function(v){r.__deleteSearchNode(r,n,v,d)}):null!=A&&A.numberActives===r.order-1&&r._mergeSiblings(l,a,1,function(v){r.__deleteSearchNode(r,n,v,d)}):r.__deleteSearchNode(r,n,f,d)})})})},h.prototype.__deleteNodeFound=function(r,n,s,d,a){return d.isLeaf&&d.numberActives>r.order-1||d.isLeaf&&d===r.root?(r._deleteKeyFromNode(d,n,function(){a(!0)}),!0):(!1===d.isLeaf&&r._diskRead(d.children[n],function(y){y.numberActives>r.order-1?r._getMaxKeyPos(r,y,function(l){s=l.node.keys[l.index],d.keys[n]=s,r._diskWrite(d,function(f){f=y,s=s.key,r.__deleteSearchNode(r,s,f,a)})}):r._diskRead(d.children[n+1],function(l){l.numberActives>r.order-1?r._getMinKeyPos(r,l,function(f){s=f.node.keys[f.index],d.keys[n]=s,r._diskWrite(d,function(c){c=l,s=s.key,r.__deleteSearchNode(r,s,c,a)})}):y.numberActives===r.order-1&&l.numberActives===r.order-1&&r._mergeNodes(y,d.keys[n],l,function(f){d.children[n]=f;for(var c=++n;c<d.numberActives;c++)d.children[c]=d.children[c+1],d.keys[c-1]=d.keys[c];d.children[c]=null,d.keys[c-1]=null,d.numberActives--,0===d.numberActives&&r.root===d&&(r.root=f),r._diskWrite(d,function(E){r.__deleteSearchNode(r,s,f,a)})})})}),void(d.isLeaf&&d.numberActives>r.order-1&&r._deleteKeyFromNode(d,n,function(y){r.__deleteSearchNode(r,s,y,a)})))},h.prototype._moveKey=function(r,n,s,d){1===s&&n--;var a=this;a._diskRead(r.children[n],function(y){a._diskRead(r.children[n+1],function(l){if(-1==s){y.keys[y.numberActives]=r.keys[n],y.children[y.numberActives+1]=l.children[0],l.children[0]=null,y.numberActives++,r.keys[n]=l.keys[0];for(var f=1;f<l.numberActives;f++)l.keys[f-1]=l.keys[f],l.children[f-1]=l.children[f];l.children[l.numberActives-1]=l.children[l.numberActives],l.numberActives--}else{for(l.children[l.numberActives+1]=l.children[l.numberActives],f=l.numberActives;f>0;f--)l.children[f]=l.children[f-1],l.keys[f]=l.keys[f-1];l.keys[0]=null,l.children[0]=null,l.children[0]=y.children[y.numberActives],l.keys[0]=r.keys[n],l.numberActives++,y.children[y.numberActives]=null,r.keys[n]=y.keys[y.numberActives-1],y.keys[y.numberActives-1]=null,y.numberActives--}a._diskWrite(y,function(c){a._diskWrite(l,function(E){a._diskWrite(r,function(_){return d(_)})})})})})},h.prototype._mergeSiblings=function(r,n,s,d){var a,y,l,f;n===r.numberActives?(n--,l=r.children[r.numberActives-1],f=r.children[r.numberActives]):(l=r.children[n],f=r.children[n+1]);var c=this;c._diskRead(l,function(E){c._diskRead(f,function(_){var O=c._allocateNode();for(O.isLeaf=E.isLeaf,O.level=E.level,y=0;y<c.order-1;y++)O.keys[y]=E.keys[y],O.children[y]=E.children[y];for(O.keys[c.order-1]=r.keys[n],O.children[c.order-1]=E.children[c.order-1],y=0;y<c.order-1;y++)O.keys[y+c.order]=_.keys[y],O.children[y+c.order]=_.children[y];for(O.children[2*c.order-1]=_.children[c.order-1],r.children[n]=O,y=n;y<r.numberActives;y++)r.keys[y]=r.keys[y+1],r.children[y+1]=r.children[y+2];for(O.numberActives=E.numberActives+_.numberActives+1,r.numberActives--,a=r.numberActives;a<2*c.order-1;a++)r.keys[a]=null;0===r.numberActives&&c.root===r&&(c.root=O,O.level?O.isLeaf=!1:O.isLeaf=!0),c._diskWrite(O,function(R){c._diskWrite(r,function(A){c._diskDelete(E,function(){c._diskDelete(_,function(){if(c.root!==R)return d(R);c._updateRootNode(c.root,function(){return d(R)})})})})})})})},h.prototype._deleteKeyFromNode=function(r,n,s){var d,a=2*this.order-1;if(r.numberActives<a&&(a=r.numberActives),!1===r.isLeaf)return!1;for(r.keys[n],d=n;d<a-1;d++)r.keys[d]=r.keys[d+1];r.keys.pop(),r.numberActives--,this._diskWrite(r,function(y){return s(y)})},h.prototype._mergeNodes=function(r,n,s,d){var a,y;for((a=this._allocateNode()).isLeaf=!0,y=0;y<r.numberActives;y++)a.keys[y]=r.keys[y],a.children[y]=r.children[y];for(a.children[r.numberActives]=r.children[r.numberActives],a.keys[r.numberActives]=n,y=0;y<s.numberActives;y++)a.keys[y+r.numberActives+1]=s.keys[y],a.children[y+r.numberActives+1]=s.children[y];a.children[2*this.order-1]=s.children[s.numberActives],a.numberActives=r.numberActives+s.numberActives+1,a.isLeaf=r.isLeaf,a.level=r.level;var l=this;this._diskWrite(a,function(f){l._diskDelete(r,function(){l._diskDelete(s,function(){return d(f)})})})},h.prototype.audit=function(r){var n=[],s=[],d=this,a=function(l){for(var f=0;f<s.length;f++)if(0===d.comparator(s[f],l)){var c=" !!! duplicated key "+l;!0===r&&console.log(c),n.push(c)}},y=null;return d=this,this.walkNodes(function(l){!0===r&&(console.log("--- Node at "+l.level+" level"),console.log(" - leaf? "+l.isLeaf),console.log(" - num actives? "+l.numberActives),console.log(" - keys: "));for(var f=l.numberActives;f<l.keys.length;f++)null!=l.keys[f]&&!0===r&&(console.log(" * warning : redundant key data"),n.push(" * warning : redundant key data"));for(f=l.numberActives+1;f<l.children.length;f++)null!=l.children[f]&&!0===r&&(console.log(" * warning : redundant children data"),n.push(" * warning : redundant key data"));if(!1===l.isLeaf)for(f=0;f<l.numberActives;f++){var c=this._diskRead(l.children[f]).keys[this._diskRead(l.children[f]).numberActives-1].key,E=this._diskRead(l.children[f+1]).keys[0].key;if(!0===r&&console.log("   "+l.keys[f].key+"("+c+","+E+")"),-1===d.comparator(l.keys[f].key,c)){var _=" !!! value max left "+c+" > key "+l.keys[f].key;!0===r&&console.log(_),n.push(_)}1===d.comparator(l.keys[f].key,E)&&(_=" !!! value min right "+E+" < key "+l.keys[f].key,!0===r&&console.log(_),n.push(_)),a(l.keys[f].key),s.push(l.keys[f].key)}else for(null===y?y=l.level:y!=l.level&&(_=" !!! Leaf node with wrong level value",!0===r&&console.log(_),n.push(_)),f=0;f<l.numberActives;f++)!0===r&&console.log(" "+l.keys[f].key),a(l.keys[f].key),s.push(l.keys[f].key);l!=d.root&&(l.numberActives>2*d.order-1&&(!0===r&&(_=" !!!! MAX num keys restriction violated "),console.log(_),n.push(_)),l.numberActives<d.order-1&&(!0===r&&(_=" !!!! MIN num keys restriction violated "),console.log(_),n.push(_)))}),n},h.prototype._getMaxKeyPos=function(r,n,s){var d={};return null===n?s(null):!0===n.isLeaf?(d.node=n,d.index=n.numberActives-1,s(d)):(d.node=n,d.index=n.numberActives-1,void r._diskRead(n.children[n.numberActives],function(a){return r._getMaxKeyPos(r,a,s)}))},h.prototype._getMinKeyPos=function(r,n,s){var d={};if(null===n&&s(null),!0===n.isLeaf)return d.node=n,d.index=0,s(d);d.node=n,d.index=0,r._diskRead(n.children[0],function(a){return r._getMinKeyPos(r,a,s)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};K.exports={Tree:h,Node:e}},{"./utils":140}],124:[function(G,K,ee){var M=G("./utils"),o=G("./utils"),x=(G("./quad_index").QuadIndex,G("./quad_index").Pattern),h=G("./rdf_model"),e=G("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var r=0;r<this.indices.length;r++){var n=this.indices[r];this.indexMap[n]={},this.queriesIndexMap[n]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(r,n){this.updateInProgress[r].push(n)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(r){if(!0!==this.ongoingModification){var n=this;if(null!=this.updateInProgress){var s=n.updateInProgress;n.updateInProgress=null,this.sendNotification(Callbacks.deleted,s[Callbacks.deleted],function(){n.sendNotification(Callbacks.added,s[Callbacks.added],function(){n.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){n.dispatchQueries(function(){r(!0)})})})})}else r(!0)}else r(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(r,n,s){for(var d={},a=0;a<n.length;a++){var y=n[a];for(var l in this.indexMap){var f=this.indexMap[l],c=this.componentOrders[l];this._searchCallbacksInIndex(f,c,r,y,d),0!=this.pendingQueries.length&&(f=this.queriesIndexMap[l],this._searchQueriesInIndex(f,c,y))}}this.dispatchNotifications(d),s?.(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(r,n,s){for(var d=this.emptyNotificationsMap[r]||[],a=0;a<d.length;a++)d[a](r,n);s()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(r){for(var n in r){var s=this.callbacksMap[n],d=r[n][Callbacks.deleted];if(null!=d)try{s(Callbacks.deleted,d)}catch{}for(var a in r[n])if(a!=Callbacks.deleted)try{s(a,r[n][a])}catch{}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(r,n,s,d,a){for(var y=d[1],l=(d=d[0],0);l<n.length+1;l++){for(var f=r._||[],c=[],E=0;E<f.length;E++){var _=f[E];null!=this.callbacksMap[_]&&(a[_]=a[_]||{},a[_][s]=a[_][s]||[],a[_][s].push(d),c.push(_))}r._=c;var O=n[l];if(null==r[""+y[O]])break;r=r[""+y[O]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(r,n){var s=this.emptyNotificationsMap[r]||[];s.push(n),this.emptyNotificationsMap[r]=s},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(r,n){var s=this.emptyNotificationsMap[r];null!=s&&(s=M.reject(s,function(d){return d===n})),this.emptyNotificationsMap[r]=s},Callbacks.CallbacksBackend.prototype.subscribe=function(r,n,s,d,a,y){var l=this._tokenizeComponents(r,n,s,d),f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var c=this;this.engine.normalizeQuad(l,f,!0,function(E){for(var _=new x(E),O=c._indexForPattern(_),R=c.componentOrders[O],A=c.indexMap[O],v=0;v<R.length;v++){var F=E[R[v]];if("_"===F){null==A._&&(A._=[]),c.callbackCounter++,A._.push(c.callbackCounter),c.callbacksMap[c.callbackCounter]=a,c.callbacksInverseMap[a]=c.callbackCounter;break}v===R.length-1?(A[F]=A[F]||{_:[]},c.callbackCounter++,A[F]._.push(c.callbackCounter),c.callbacksMap[c.callbackCounter]=a,c.callbacksInverseMap[a]=c.callbackCounter):(A[F]=A[F]||{},A=A[F])}y?.(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(r){var n=this.callbacksInverseMap[r];null!=n&&(delete this.callbacksInverseMap[r],delete this.callbacksMap[n])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(r,n,s,d){var a={};return null==r?a.subject=Callbacks.ANYTHING:0==r.indexOf("_:")?a.subject={token:"blank",value:r}:a.subject={token:"uri",value:r},a.predicate=null==n?Callbacks.ANYTHING:{token:"uri",value:n},a.object=null==s?Callbacks.ANYTHING:{token:"uri",value:s},a.graph=null==d?Callbacks.ANYTHING:{token:"uri",value:d},a},Callbacks.CallbacksBackend.prototype._indexForPattern=function(r){for(var n=r.indexKey,s=this.indices,d=0;d<s.length;d++)for(var a=s[d],y=this.componentOrders[a],l=0;l<y.length&&!1!==M.include(n,y[l]);l++)if(l==n.length-1)return a;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var r,n,s,d;4===arguments.length?(r=arguments[0],n=arguments[1],s=arguments[2],d=arguments[3]):(r=arguments[0],n=this.engine.lexicon.defaultGraphUri,s=arguments[1],d=arguments[2]);var a="CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+n+"> { <"+r+"> ?p ?o } }",y=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var f=[];this.engine.execute(a,function(c,E){if(c)d&&d(!1);else{var _=E,O=!1,R=function(A,v){if("eventsFlushed"===A&&O){O=!1;try{s(_)}catch{}}else if("eventsFlushed"!==A){O=!0;for(var F=0;F<v.length;F++){var j=v[F],H=h.buildRDFResource(j.subject,f,y.engine,l),P=h.buildRDFResource(j.predicate,f,y.engine,l),X=h.buildRDFResource(j.object,f,y.engine,l);null!=H&&null!=P&&null!=X&&(j=new h.Triple(H,P,X),A===Callbacks.added?_.add(j):A===Callbacks.deleted&&_.remove(j))}}};y.observersMap[s]=R,y.subscribeEmpty(Callbacks.eventsFlushed,R),y.subscribe(r,null,null,null,R,function(){try{s(_)}catch{}d&&d(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(r){var n=this.observersMap[r];return!!n&&(this.unsubscribe(n),this.unsubscribeEmpty(Callbacks.eventsFlushed,n),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(r,n,s){var d=this.aqt.parseQueryString(r),a=this.aqt.parseSelect(d.units[0]),y=this.aqt.collectBasicTriples(a),l=this,f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=r,this.queriesInverseMap[r]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=n,o.eachSeries(y,function(E,_){null==E.graph&&(E.graph=l.engine.lexicon.defaultGraphUriTerm),l.engine.normalizeQuad(E,f,!0,function(O){for(var R=new x(O),A=l._indexForPattern(R),v=l.componentOrders[A],F=l.queriesIndexMap[A],j=0;j<v.length;j++){var H=O[v[j]];if("string"==typeof H){null==F._&&(F._=[]),F._.push(c);break}j===v.length-1?(F[H]=F[H]||{_:[]},F[H]._.push(c)):(F[H]=F[H]||{},F=F[H])}_()})},function(){l.engine.execute(r,function(E,_){E?console.log("ERROR in query callback "+_):n(_)}),s?.()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(r){var n=this.queriesInverseMap[r];null!=n&&(delete this.queriesInverseMap[r],delete this.queriesMap[n],this.queriesList=M.reject(this.queriesList,function(s){return s===n}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(r,n,s){for(var d=s[1],a=(s=s[0],0);a<n.length+1;a++){for(var y=r._||[],l=[],f=0;f<y.length;f++){var c=y[f];M.include(this.pendingQueries,c)&&(M.remove(this.pendingQueries,function(_){return _===c}),this.matchedQueries.push(c)),null!=this.queriesMap[c]&&l.push(c)}r._=l;var E=n[a];if(null==r[""+d[E]])break;r=r[""+d[E]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(r){var n,s,d=this,a={};o.eachSeries(this.matchedQueries,function(y,l){null==a[y]?(a[y]=!0,n=d.queriesMap[y],s=d.queriesCallbacksMap[y],d.engine.execute(n,function(f,c){if(!f)try{s(c)}catch{}l()})):l()},function(){r()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,K.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(G,K,ee){var M=G("jsonld");ee.JSONLDParser={};var o=ee.JSONLDParser;o.parser={async:!0,parse:function(x,h,e,r){try{"string"==typeof x&&(x=JSON.parse(x)),async function(n,s,d){var a=null;const y=await M.toRDF(n,{});var O,R,A,l=function(O){return"BlankNode"===O.termType?{blank:O.value}:"NamedNode"===O.termType?{token:"uri",value:O.value}:"Literal"===O.termType?null!=O.language?{literal:'"'+O.value+'"@'+O.language}:null!==O.datatype?{literal:'"'+O.value+'"^^<'+O.datatype.value+">"}:{literal:'"'+O.value+'"'}:void 0};a=[];for(var c=y,E=0;E<c.length;E++){var _=c[E];O=_.subject,R=_.predicate,A=_.object,a.push({subject:l(O),predicate:l(R),object:l(A),graph:s})}d(null,a)}(x,h,r)}catch(n){r(n)}}},K.exports={JSONLDParser:o}},{jsonld:43}],126:[function(G,K,ee){var M=G("./utils"),o=G("./btree").Tree;Lexicon=function(x){var h=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,M.seq(function(e){new o(2,function(r){h.uris=r,e()})},function(e){new o(2,function(r){h.literals=r,e()})},function(e){new o(2,function(r){h.knownGraphs=r,e()})},function(e){new o(2,function(r){h.oidUris=r,e()})},function(e){new o(2,function(r){h.oidLiterals=r,e()})},function(e){new o(2,function(r){h.oidBlanks=r,e()})})(function(){x?.(h)})},Lexicon.prototype.registerGraph=function(x,h,e){x!=this.defaultGraphOid?this.knownGraphs.insert(x,h,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(x,h){var e=[];this.knownGraphs.walk(function(r){!0===x?e.push(r.data):e.push(r.key)},function(){h(e)})},Lexicon.prototype.registerUri=function(x,h){var e=this;x===this.defaultGraphUri?h(this.defaultGraphOid):this.uris.search(x,function(r){if(null==r){var n=e.oidCounter,s="u"+n;e.oidCounter++,M.seq(function(d){e.uris.insert(x,[n,0],function(){d()})},function(d){e.oidUris.insert(s,x,function(){d()})})(function(){h(n)})}else n=r[0],r[1]=r[1]+1,h(n)})},Lexicon.prototype.resolveUri=function(x,h){x===this.defaultGraphUri?h(this.defaultGraphOid):this.uris.search(x,function(e){h(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(x,h){x===this.defaultGraphUri?h(0):this.uris.search(x,function(e){h(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(x){var h=this.oidCounter;this.oidCounter++;var e=""+h;this.oidBlanks.insert(e,e,function(){x(h)})},Lexicon.prototype.resolveBlank=function(x,h){var e=this;this.oidBlanks.search(x,function(r){if(null!=r)h(r);else{var n=e.oidCounter;this.oidCounter++,h(""+n)}})},Lexicon.prototype.resolveBlankCost=function(x,h){h(0)},Lexicon.prototype.registerLiteral=function(x,h){var e=this;this.literals.search(x,function(r){if(null==r){var n="l"+(s=e.oidCounter);e.oidCounter++,M.seq(function(d){e.literals.insert(x,[s,0],function(){d()})},function(d){e.oidLiterals.insert(n,x,function(){d()})})(function(){h(s)})}else{var s=r[0];r[1]=r[1]+1,h(s)}})},Lexicon.prototype.resolveLiteral=function(x,h){this.literals.search(x,function(e){h(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(x,h){this.literals.search(x,function(e){h(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(x){var h;return-1!=(h=x.lastIndexOf("@"))&&'"'===x[h-1]&&null!=x.substring(h,x.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:x.substring(1,h-1),lang:x.substring(h+1,x.length)}:-1!=(h=x.lastIndexOf("^^"))&&'"'===x[h-1]&&"<"===x[h+2]&&">"===x[x.length-1]?{token:"literal",value:x.substring(1,h-1),type:x.substring(h+3,x.length-1)}:{token:"literal",value:x.substring(1,x.length-1)}},Lexicon.prototype.parseUri=function(x){return{token:"uri",value:x}},Lexicon.prototype.retrieve=function(x,h){var e=this;x===this.defaultGraphOid?h({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):M.seq(function(r,n){e.oidUris.search("u"+x,function(s){n(null,null!=s?e.parseUri(s):null)})},function(r,n){null==r?e.oidLiterals.search("l"+x,function(s){n(null,null!=s?e.parseLiteral(s):null)}):n(null,r)},function(r,n){null==r?e.oidBlanks.search(""+x,function(s){n(null,null!=s?{token:"blank",value:"_:"+x}:null)}):n(null,r)})(null,function(r,n){h(n)})},Lexicon.prototype.clear=function(x){var h=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,M.seq(function(e){new o(2,function(r){h.uris=r,e()})},function(e){new o(2,function(r){h.literals=r,e()})},function(e){new o(2,function(r){h.knownGraphs=r,e()})},function(e){new o(2,function(r){h.oidUris=r,e()})},function(e){new o(2,function(r){h.oidLiterals=r,e()})},function(e){new o(2,function(r){h.oidBlanks=r,e()})})(function(){x?.()})},Lexicon.prototype.unregister=function(x,h,e){var r=this;M.seq(function(n){r._unregisterTerm(x.subject.token,h.subject,n)},function(n){r._unregisterTerm(x.predicate.token,h.predicate,n)},function(n){r._unregisterTerm(x.object.token,h.object,n)},function(n){null!=x.graph?r._unregisterTerm(x.graph.token,h.graph,n):n()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(x,h,e){var r=this;if("uri"===x)if(h!=this.defaultGraphOid){var n="u"+h;r.oidUris.search(n,function(s){r.uris.search(s,function(d){var a=d[1];""+d[0]==""+h?0===a?M.seq(function(y){r.oidUris.delete(n,function(){y()})},function(y){r.uris.delete(s,function(){y()})},function(y){r.knownGraphs.delete(h,function(){y()})})(function(){e()}):r.uris.insert(s,[h,a-1],function(){e()}):e()})})}else e();else"literal"===x?(this.oidCounter++,n="l"+h,r.oidLiterals.search(n,function(s){r.literals.search(s,function(d){var a=d[1];""+d[0]==""+h?0===a?M.seq(function(y){r.oidLiterals.delete(n,function(){y()})},function(y){r.literals.delete(s,function(){y()})})(function(){e()}):r.literals.insert(s,[h,a-1],function(){e()}):e()})})):"blank"===x?r.oidBlanks.delete(""+h,function(){e()}):e()},K.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(G,K,ee){if(!G("./utils").isWorker()){var M=G("http"),o=G("https"),x=G("url");NetworkTransport={load:function(h,e,r,n){var s=n??3,d=x.parse(h,!0,!0),a={host:d.host,hostname:d.hostname,method:"GET",path:d.path,headers:{host:d.hostname,Accept:e}},y=null;"http:"===d.protocol?(a.port=d.port||80,y=M):"https:"===d.protocol&&(a.port=d.port||443,y=o);var l=y.request(a,function(f){var c=f.headers,E="";if("2"==(""+f.statusCode)[0])f.on("end",function(){r(null,{headers:c,data:E})}),f.on("data",function(O){E+=O});else if("3"==(""+f.statusCode)[0])if(0==s)r(new Error("Too many redirections"));else{var _=c.Location||c.location;null!=_?NetworkTransport.load(_,e,r,s-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+f.statusCode))});l.on("error",r),l.end()}},K.exports={NetworkTransport}}},{"./utils":140,http:91,https:20,url:112}],128:[function(G,K,ee){K.exports=function(){"use strict";function M(o,x,h,e){this.message=o,this.expected=x,this.found=h,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,M)}return function(o,x){function h(){this.constructor=o}h.prototype=x.prototype,o.prototype=new h}(M,Error),M.buildMessage=function(o,x){var s,h={literal:function(s){return'"'+r(s.text)+'"'},class:function(s){var d,a="";for(d=0;d<s.parts.length;d++)a+=s.parts[d]instanceof Array?n(s.parts[d][0])+"-"+n(s.parts[d][1]):n(s.parts[d]);return"["+(s.inverted?"^":"")+a+"]"},any:function(s){return"any character"},end:function(s){return"end of input"},other:function(s){return s.description}};function e(s){return s.charCodeAt(0).toString(16).toUpperCase()}function r(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+e(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+e(d)})}function n(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+e(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+e(d)})}return"Expected "+function(s){var d,a,y,l=new Array(s.length);for(d=0;d<s.length;d++)l[d]=(y=s[d],h[y.type](y));if(l.sort(),l.length>0){for(d=1,a=1;d<l.length;d++)l[d-1]!==l[d]&&(l[a]=l[d],a++);l.length=a}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}(o)+" but "+(((s=x)?'"'+r(s)+'"':"end of input")+" found.")},{SyntaxError:M,parse:function(o,x){x=void 0!==x?x:{};var h,e={},r={DOCUMENT:ia},n=ia,s=Le("[1] QueryUnit"),d=Le("[2] Query"),a=Le("[3] Prologue"),y=Le("[4] BaseDecl"),l="BASE",f=Te("BASE",!1),c="base",E=Te("base",!1),_=Le("[5] PrefixDecl"),O="PREFIX",R=Te("PREFIX",!1),A="prefix",v=Te("prefix",!1),F=Le("[6] SelectQuery"),j=Le("[7] SubSelect"),H=Le("[8] SelectClause"),P="SELECT",X=Te("SELECT",!1),Y="select",ie=Te("select",!1),fe="DISTINCT",oe=Te("DISTINCT",!1),le="distinct",V=Te("distinct",!1),$="REDUCED",ne=Te("REDUCED",!1),pe="reduced",Fe=Te("reduced",!1),ve="(",ce=Te("(",!1),_e="AS",Ne=Te("AS",!1),Qe="as",te=Te("as",!1),k=")",Q=Te(")",!1),z="*",he=Te("*",!1),de=Le("[9] ConstructQuery"),ge="CONSTRUCT",Pe=Te("CONSTRUCT",!1),Oe="construct",Je=Te("construct",!1),$e="WHERE",Ke=Te("WHERE",!1),ot="where",be=Te("where",!1),ke="{",Ce=Te("{",!1),q="}",Z=Te("}",!1),se=Le("[10] DescribeQuery"),ye="DESCRIBE",we=Te("DESCRIBE",!1),me=Le("[11] AskQuery"),Ee="ASK",Ie=Te("ASK",!1),Be="ask",Ge=Te("ask",!1),ze=Le("[12] DatasetClause"),Me="FROM",Ze=Te("FROM",!1),rt="from",tt=Te("from",!1),it=Le("[13] DefaultGraphClause"),st=Le("[14] NamedGraphClause"),Ye="NAMED",We=Te("NAMED",!1),at="named",ct=Te("named",!1),ut=Le("[15] SourceSelector"),dr=Le("[16] WhereClause"),Fn=Le("[17] SolutionModifier"),Cn=Le("[18] GroupClause"),Sr="GROUP",Sn=Te("GROUP",!1),Tr="group",Tn=Te("group",!1),Wt="BY",yr=Te("BY",!1),Ht="by",vr=Te("by",!1),jr=Le("[19] GroupCondition"),Mt=Le("[20] HavingClause"),gr="HAVING",Ir=Te("HAVING",!1),Nr=Le("[21] HavingCondition"),Tt=Le("[22] OrderClause"),Rr="ORDER",Or=Te("ORDER",!1),mr="order",$t=Te("order",!1),jn=Le("[23] OrderCondition"),In=Te("ASC",!1),qa=Te("asc",!1),Fi="DESC",Ha=Te("DESC",!1),Ci="desc",Va=Te("desc",!1),Ja=Le("[24] LimitOffsetClauses"),za=Le("[25] LimitClause"),Si="LIMIT",Xa=Te("LIMIT",!1),Ti="limit",Wa=Te("limit",!1),$a=Le("[26] OffsetClause"),ji="OFFSET",Ka=Te("OFFSET",!1),Ii="offset",Ya=Te("offset",!1),Za=Le("[27] BindingsClause"),Ni="BINDINGS",eu=Te("BINDINGS",!1),tu=Le("[28] BindingValue"),Lr="UNDEF",Ri=Te("UNDEF",!1),ru=Le("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Dr="VALUES",Oi=Te("VALUES",!1),Pr="values",Li=Te("values",!1),nu=Le("[29] UpdateUnit"),iu=Le("[30] Update"),Ot=";",Lt=Te(";",!1),ou=Le("[31] Update1"),su=Le("[32] Load"),Di="LOAD",au=Te("LOAD",!1),Pi="load",uu=Te("load",!1),Bi="INTO",lu=Te("INTO",!1),Mi="into",cu=Te("into",!1),fu=Le("[33] Clear"),Qi="CLEAR",pu=Te("CLEAR",!1),Ui="clear",hu=Te("clear",!1),Kt="SILENT",Nn=Te("SILENT",!1),Yt="silent",Rn=Te("silent",!1),du=Le("[34] Drop"),Gi="DROP",yu=Te("DROP",!1),qi="drop",vu=Te("drop",!1),gu=Le("[35] Create"),Hi="CREATE",mu=Te("CREATE",!1),Vi="create",bu=Te("create",!1),xu=Le("[36] InsertData"),Br="INSERT",Ji=Te("INSERT",!1),Mr="insert",zi=Te("insert",!1),Qr="DATA",Xi=Te("DATA",!1),Ur="data",Wi=Te("data",!1),wu=Le("[37] DeleteData"),Zt="DELETE",On=Te("DELETE",!1),er="delete",Ln=Te("delete",!1),_u=Le("[38] DeleteWhere"),ku=Le("[39] Modify"),$i="WITH",Eu=Te("WITH",!1),Ki="with",Au=Te("with",!1),Fu=Le("[40] DeleteClause"),Cu=Le("[41] InsertClause"),Su=Le("[42] UsingClause"),Yi="USING",Tu=Te("USING",!1),Zi="using",ju=Te("using",!1),Iu=Le("[43] GraphRef"),tr="GRAPH",Dn=Te("GRAPH",!1),rr="graph",Pn=Te("graph",!1),Nu=Le("[44] GraphRefAll"),eo="DEFAULT",Ru=Te("DEFAULT",!1),to="default",Ou=Te("default",!1),Lu=Te("ALL",!1),Du=Te("all",!1),Pu=Le("[45] QuadPattern"),ro=function(u){return u.quadsContext},Bu=Le("[46] QuadData"),Mu=Le("[47] Quads"),wt=".",_t=Te(".",!1),Qu=Le("[48] QuadsNotTriples"),Uu=Le("[49] TriplesTemplate"),Gu=Le("[50] GroupGraphPattern"),qu=Le("[51] GroupGraphPatternSub"),Hu=Le("[54] TriplesBlock"),Vu=Le("[53] GraphPatternNotTriples"),Ju=Le("[54] OptionalGraphPattern"),no="OPTIONAL",zu=Te("OPTIONAL",!1),io="optional",Xu=Te("optional",!1),Wu=Le("[55] GraphGraphPattern"),$u=Le("[56] ServiceGraphPattern"),oo="SERVICE",Ku=Te("SERVICE",!1),Yu=Le("[57] MinusGraphPattern"),so="MINUS",Zu=Te("MINUS",!1),ao="minus",el=Te("minus",!1),tl=Le("[58] GroupOrUnionGraphPattern"),Gr="UNION",uo=Te("UNION",!1),qr="union",lo=Te("union",!1),rl=Le("[59] Filter"),co="FILTER",nl=Te("FILTER",!1),fo="filter",il=Te("filter",!1),ol=Le("[60] Bind"),po="BIND",sl=Te("BIND",!1),ho="bind",al=Te("bind",!1),ul=Le("[60] Constraint"),ll=Le("[61] InlineData"),cl=Le("[62] DataBlock"),fl=Le("[63] InlineDataOneVar"),pl=Le("[64] InlineDataFull"),hl=Le("[65] DataBlockValue"),dl=Le("[61] FunctionCall"),yl=Le("[62] ArgList"),yo=function(){return{token:"args",value:[]}},vt=",",gt=Te(",",!1),vl=Le("[63] ExpressionList"),gl=Le("[64] ConstructTemplate"),ml=Le("[65] ConstructTriples"),bl=Le("[66] TriplesSameSubject"),xl=Le("[83] PropertyListPathNotEmpty"),wl=Le("[67] PropertyListNotEmpty"),_l=Le("[68] PropertyList"),kl=Le("[86] ObjectListPath"),El=Le("[69] ObjectList"),Al=Le("[87] ObjectPath"),Fl=Le("[70] Object"),Cl=Le("[71] Verb"),Hr="a",Vr=Te("a",!1),Sl=Le("[72] TriplesSameSubjectPath"),Tl=Le("[73] PropertyListNotEmptyPath"),jl=Le("[74] PropertyListPath"),Il=Le("[75]"),Nl=Le("[76] VerbSimple"),Rl=Le("[77] Path"),Ol=Le("[78] PathAlternative"),Jr="|",zr=Te("|",!1),Ll=Le("[79] PathSequence"),Vt="/",Jt=Te("/",!1),Dl=Le("[88] PathElt"),Pl=Le("[81] PathEltOrInverse"),vo=Te("^",!1),Bl=Le("[82] PathMod"),Bn="?",Mn=Te("?",!1),Qt="+",Ut=Te("+",!1),Ml=Le("[83] PathPrimary"),Qn="!",Un=Te("!",!1),Ql=Le("[85] PathOneInPropertySet"),Ul=Le("[86] Integer"),Gl=Le("[100] TriplesNodePath"),ql=Le("[87] TriplesNode"),Hl=Le("[101] BlankNodePropertyListPath"),Gn="[",qn=Te("[",!1),Hn="]",Vn=Te("]",!1),Vl=Le("[88] BlankNodePropertyList"),Jl=Le("[103] CollectionPath"),zl=Le("[89] Collection"),Xl=Le("[105] GraphNodePath"),go=function(u){return u[1]},Wl=Le("[90] GraphNode"),$l=Le("[91] VarOrTerm"),Kl=Le("[92] VarOrIRIref"),Yl=Le("[93] Var"),Zl=Le("[94] GraphTerm"),ec=Le("[95] Expression"),tc=Le("[96] ConditionalOrExpression"),Xr="||",mo=Te("||",!1),rc=Le("[97] ConditionalAndExpression"),Wr="&&",bo=Te("&&",!1),nc=Le("[98] ValueLogical"),ic=Le("[99] RelationalExpression"),$r="=",Kr=Te("=",!1),Yr="!=",xo=Te("!=",!1),Jn="<",zn=Te("<",!1),Xn=">",Wn=Te(">",!1),Zr="<=",wo=Te("<=",!1),en=">=",_o=Te(">=",!1),tn="I",rn=Te("I",!1),nn="i",on=Te("i",!1),nr="N",ir=Te("N",!1),or="n",sr=Te("n",!1),ko="O",Eo=Te("O",!1),Ao="o",Fo=Te("o",!1),Co="T",So=Te("T",!1),To="t",jo=Te("t",!1),oc=Le("[100] NumericExpression"),sc=Le("[101] AdditiveExpression"),jt="-",It=Te("-",!1),ac=Le("[102] MultiplicativeExpression"),uc=Le("[103] UnaryExpression"),lc=Le("[104] PrimaryExpression"),cc=Le("[105] BrackettedExpression"),fc=Le("[106] BuiltInCall"),pc=Te("STR",!1),hc=Te("str",!1),Io="LANG",dc=Te("LANG",!1),No="lang",yc=Te("lang",!1),Ro="LANGMATCHES",vc=Te("LANGMATCHES",!1),Oo="langmatches",gc=Te("langmatches",!1),Lo="DATATYPE",mc=Te("DATATYPE",!1),Do="datatype",bc=Te("datatype",!1),Po="BOUND",xc=Te("BOUND",!1),Bo="bound",wc=Te("bound",!1),_c=Te("IRI",!1),kc=Te("iri",!1),Ec=Te("URI",!1),Ac=Te("uri",!1),Mo="BNODE",Fc=Te("BNODE",!1),Qo="bnode",Cc=Te("bnode",!1),Uo="COALESCE",Sc=Te("COALESCE",!1),Go="coalesce",Tc=Te("coalesce",!1),jc=Te("IF",!1),Ic=Te("if",!1),qo="ISLITERAL",Nc=Te("ISLITERAL",!1),Ho="isliteral",Rc=Te("isliteral",!1),Vo="isLITERAL",Oc=Te("isLITERAL",!1),Jo="ISBLANK",Lc=Te("ISBLANK",!1),zo="isblank",Dc=Te("isblank",!1),Xo="isBLANK",Pc=Te("isBLANK",!1),Wo="SAMETERM",Bc=Te("SAMETERM",!1),$o="sameterm",Mc=Te("sameterm",!1),Ko="ISURI",Qc=Te("ISURI",!1),Yo="isuri",Uc=Te("isuri",!1),Zo="isURI",Gc=Te("isURI",!1),es="ISIRI",qc=Te("ISIRI",!1),ts="isiri",Hc=Te("isiri",!1),rs="isIRI",Vc=Te("isIRI",!1),ns="custom:",Jc=Te("custom:",!1),is="CUSTOM:",zc=Te("CUSTOM:",!1),os=/^[a-zA-Z0-9_]/,ss=ft([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Xc=Le("[107] RegexExpression"),as="REGEX",Wc=Te("REGEX",!1),us="regex",$c=Te("regex",!1),Kc=Le("[108] ExistsFunc"),sn="EXISTS",ls=Te("EXISTS",!1),an="exists",cs=Te("exists",!1),Yc=Le("[109] NotExistsFunc"),fs="NOT",Zc=Te("NOT",!1),ps="not",ef=Te("not",!1),tf=Le("[110] Aggregate"),hs="COUNT",rf=Te("COUNT",!1),ds="count",nf=Te("count",!1),ys="GROUP_CONCAT",of=Te("GROUP_CONCAT",!1),vs="group_concat",sf=Te("group_concat",!1),gs="SEPARATOR",af=Te("SEPARATOR",!1),ms="SUM",uf=Te("SUM",!1),bs="sum",lf=Te("sum",!1),xs="MIN",cf=Te("MIN",!1),ws="min",ff=Te("min",!1),_s="MAX",pf=Te("MAX",!1),ks="max",hf=Te("max",!1),Es="AVG",df=Te("AVG",!1),As="avg",yf=Te("avg",!1),vf=Le("[117] IRIrefOrFunction"),gf=Le("[112] RDFLiteral"),mf=Te("^^",!1),bf=Le("[113] NumericLiteral"),xf=Le("[114] NumericLiteralUnsigned"),wf=Le("[115] NumericLiteralPositive"),_f=Le("[116] NumericLiteralNegative"),kf=Le("[117] BooleanLiteral"),Fs="TRUE",Ef=Te("TRUE",!1),Cs="true",Af=Te("true",!1),Ss="FALSE",Ff=Te("FALSE",!1),Ts="false",Cf=Te("false",!1),Sf=Le("[118] String"),un=function(u){return{token:"string",value:u}},Tf=Le("[119] IRIref"),jf=Le("[120] PrefixedName"),If=Le("[121] BlankNode"),Nf=Le("[122] IRI_REF"),js=/^[^<>"{}|\^`\\]/,Is=ft(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Rf=Le("[123] PNAME_NS"),br=":",xr=Te(":",!1),Of=Le("[124] PNAME_LN"),Lf=Le("[125] BLANK_NODE_LABEL"),Ns="_:",Df=Te("_:",!1),Pf=Le("[126] VAR1"),Bf=Le("[127] VAR2"),Mf="$",Rs=Te("$",!1),Qf=Le("[128] LANGTAG"),Uf="@",Os=Te("@",!1),Ls=/^[a-zA-Z]/,Ds=ft([["a","z"],["A","Z"]],!1,!1),ln=/^[a-zA-Z0-9]/,cn=ft([["a","z"],["A","Z"],["0","9"]],!1,!1),Gf=Le("[129] INTEGER"),ht=/^[0-9]/,dt=ft([["0","9"]],!1,!1),qf=Le("[130] DECIMAL"),Hf=Le("[131] DOUBLE"),Vf=Le("[132] INTEGER_POSITIVE"),Jf=Le("[133] DECIMAL_POSITIVE"),Ps=function(u){return u.value="+"+u.value,u},zf=Le("[134] DOUBLE_POSITIVE"),Xf=Le("[135] INTEGER_NEGATIVE"),$n=function(u){return u.value="-"+u.value,u},Wf=Le("[136] DECIMAL_NEGATIVE"),$f=Le("[137] DOUBLE_NEGATIVE"),Kf=Le("[138] EXPONENT"),Yf=/^[eE]/,Zf=ft(["e","E"],!1,!1),ep=/^[+\-]/,tp=ft(["+","-"],!1,!1),rp=Le("[139] STRING_LITERAL1"),Kn="'",Yn=Te("'",!1),Bs=/^[^'\\\n\r]/,Ms=ft(["'","\\","\n","\r"],!0,!1),fn=function(u){return qt(u)},np=Le("[140] STRING_LITERAL2"),Qs='"',Us=Te('"',!1),Gs=/^[^"\\\n\r]/,qs=ft(['"',"\\","\n","\r"],!0,!1),ip=Le("[141] STRING_LITERAL_LONG1"),pn="'''",Hs=Te("'''",!1),Vs=/^[^'\\]/,Js=ft(["'","\\"],!0,!1),op=Le("[142] STRING_LITERAL_LONG2"),hn='"""',zs=Te('"""',!1),Xs=/^[^"\\]/,Ws=ft(['"',"\\"],!0,!1),sp=Le("[143] ECHAR"),$s=Te("\\",!1),ap=/^[tbnrf"']/,up=ft(["t","b","n","r","f",'"',"'"],!1,!1),lp=Le("[144] NIL"),cp=Le("[145] WS"),fp=/^[ ]/,pp=ft([" "],!1,!1),hp=/^[\t]/,dp=ft(["\t"],!1,!1),yp=/^[\r]/,vp=ft(["\r"],!1,!1),gp=/^[\n]/,mp=ft(["\n"],!1,!1),bp=Le(" COMMENT"),xp="#",Ks=Te("#",!1),Ys=/^[^\n\r]/,Zs=ft(["\n","\r"],!0,!1),wp=Le("[146] ANON"),_p=Le("[147] PN_CHARS_BASE"),kp=/^[A-Z]/,Ep=ft([["A","Z"]],!1,!1),Ap=/^[a-z]/,Fp=ft([["a","z"]],!1,!1),Cp=/^[\xC0-\xD6]/,Sp=ft([["\xc0","\xd6"]],!1,!1),Tp=/^[\xD8-\xF6]/,jp=ft([["\xd8","\xf6"]],!1,!1),Ip=/^[\xF8-\u02FF]/,Np=ft([["\xf8","\u02ff"]],!1,!1),Rp=/^[\u0370-\u037D]/,Op=ft([["\u0370","\u037d"]],!1,!1),Lp=/^[\u037F-\u1FFF]/,Dp=ft([["\u037f","\u1fff"]],!1,!1),Pp=/^[\u200C-\u200D]/,Bp=ft([["\u200c","\u200d"]],!1,!1),Mp=/^[\u2070-\u218F]/,Qp=ft([["\u2070","\u218f"]],!1,!1),Up=/^[\u2C00-\u2FEF]/,Gp=ft([["\u2c00","\u2fef"]],!1,!1),qp=/^[\u3001-\uD7FF]/,Hp=ft([["\u3001","\ud7ff"]],!1,!1),Vp=/^[\uF900-\uFDCF]/,Jp=ft([["\uf900","\ufdcf"]],!1,!1),zp=/^[\uFDF0-\uFFFD]/,Xp=ft([["\ufdf0","\ufffd"]],!1,!1),Wp=/^[\u1000-\uEFFF]/,$p=ft([["\u1000","\uefff"]],!1,!1),Kp=Le("[148] PN_CHARS_U"),ea=Te("_",!1),Yp=Le("[149] VARNAME"),Zn=/^[\xB7]/,ei=ft(["\xb7"],!1,!1),ti=/^[\u0300-\u036F]/,ri=ft([["\u0300","\u036f"]],!1,!1),ni=/^[\u203F-\u2040]/,ii=ft([["\u203f","\u2040"]],!1,!1),Zp=Le("[150] PN_CHARS"),eh=Le("[151] PN_PREFIX"),th=Le("[152] PN_LOCAL"),rh=Le("[170] PLX"),nh=Le("[171] PERCENT"),ih="%",ta=Te("%",!1),oh=Le("[172] HEX"),sh=/^[A-F]/,ah=ft([["A","F"]],!1,!1),uh=/^[a-f]/,lh=ft([["a","f"]],!1,!1),ch=Le("[173] PN_LOCAL_ESC"),fh=Te("~",!1),ph=Te("&",!1),t=0,dn=[{line:1,column:1}],Nt=0,oi=[],b=0;if("startRule"in x){if(!(x.startRule in r))throw new Error("Can't start parsing from rule \""+x.startRule+'".');n=r[x.startRule]}function Te(u,w){return{type:"literal",text:u,ignoreCase:w}}function ft(u,w,N){return{type:"class",parts:u,inverted:w,ignoreCase:N}}function Le(u){return{type:"other",description:u}}function ra(u){var w,N=dn[u];if(N)return N;for(w=u-1;!dn[w];)w--;for(N={line:(N=dn[w]).line,column:N.column};w<u;)10===o.charCodeAt(w)?(N.line++,N.column=1):N.column++,w++;return dn[u]=N,N}function na(u,w){var N=ra(u),m=ra(w);return{start:{offset:u,line:N.line,column:N.column},end:{offset:w,line:m.line,column:m.column}}}function B(u){t<Nt||(t>Nt&&(Nt=t,oi=[]),oi.push(u))}function ia(){return b++,b++,N=t,(m=oa())!==e?(C=function(){var T,D,U,W,J,re,ae,ue,xe,Ae;if(b++,T=t,(D=aa())!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){for(W=[],J=Rt();J!==e;)W.push(J),J=Rt();if(W!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();if(J!==e)if((re=wr())!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if((ue=_r())!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e&&(Ae=function(){var je,Se,Re,De,qe,Ue,Ve,He,Xe;if(b++,je=t,o.substr(t,8)===Ni?(Se=Ni,t+=8):(Se=e,0===b&&B(eu)),Se!==e){for(Re=[],De=mt();De!==e;)Re.push(De),De=mt();if(Re!==e)if(123===o.charCodeAt(t)?(De=ke,t++):(De=e,0===b&&B(Ce)),De!==e){if(qe=[],Ue=t,40===o.charCodeAt(t)?(Ve=ve,t++):(Ve=e,0===b&&B(ce)),Ve!==e){if(He=[],(Xe=yn())!==e)for(;Xe!==e;)He.push(Xe),Xe=yn();else He=e;He!==e?(41===o.charCodeAt(t)?(Xe=k,t++):(Xe=e,0===b&&B(Q)),Xe!==e?Ue=Ve=[Ve,He,Xe]:(t=Ue,Ue=e)):(t=Ue,Ue=e)}else t=Ue,Ue=e;for(Ue===e&&(Ue=Pt());Ue!==e;){if(qe.push(Ue),Ue=t,40===o.charCodeAt(t)?(Ve=ve,t++):(Ve=e,0===b&&B(ce)),Ve!==e){if(He=[],(Xe=yn())!==e)for(;Xe!==e;)He.push(Xe),Xe=yn();else He=e;He!==e?(41===o.charCodeAt(t)?(Xe=k,t++):(Xe=e,0===b&&B(Q)),Xe!==e?Ue=Ve=[Ve,He,Xe]:(t=Ue,Ue=e)):(t=Ue,Ue=e)}else t=Ue,Ue=e;Ue===e&&(Ue=Pt())}qe!==e?(125===o.charCodeAt(t)?(Ue=q,t++):(Ue=e,0===b&&B(Z)),Ue!==e?je=Se=[Se,Re,De,qe,Ue]:(t=je,je=e)):(t=je,je=e)}else t=je,je=e;else t=je,je=e}else t=je,je=e;return je===e&&(je=null),b--,je===e&&(Se=e,0===b&&B(Za)),je}())!==e?T=D=function(je,Se,Re,De){for(var qe={named:[],implicit:[]},Ue=0;Ue<Se.length;Ue++){var Ve=Se[Ue];"default"===Ve.kind?qe.implicit.push(Ve.graph):qe.named.push(Ve.graph)}0===qe.named.length&&0===qe.implicit.length&&qe.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var He={kind:"select",token:"executableunit"};return He.dataset=qe,He.projection=je.vars,He.modifier=je.modifier,He.pattern=Re,null!=De&&null!=De.limit&&(He.limit=De.limit),null!=De&&null!=De.offset&&(He.offset=De.offset),null!=De&&null!=De.order&&""!=De.order&&(He.order=De.order),null!=De&&null!=De.group&&(He.group=De.group),He}(D,W,re,ue):(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e}else t=T,T=e}else t=T,T=e;return b--,T===e&&(D=e,0===b&&B(F)),T}(),C===e&&(C=function(){var T,D,U,W,J,re,ae,ue,xe,Ae,je,Se,Re,De,qe;for(b++,T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,9)===ge?(U=ge,t+=9):(U=e,0===b&&B(Pe)),U===e&&(o.substr(t,9)===Oe?(U=Oe,t+=9):(U=e,0===b&&B(Je))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=function(){var Ue,Ve,He,Xe,nt,et;if(b++,Ue=t,123===o.charCodeAt(t)?(Ve=ke,t++):(Ve=e,0===b&&B(Ce)),Ve!==e){for(He=[],Xe=I();Xe!==e;)He.push(Xe),Xe=I();if(He!==e)if((Xe=Fa())===e&&(Xe=null),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();nt!==e?(125===o.charCodeAt(t)?(et=q,t++):(et=e,0===b&&B(Z)),et!==e?Ue=Ve=Xe:(t=Ue,Ue=e)):(t=Ue,Ue=e)}else t=Ue,Ue=e;else t=Ue,Ue=e}else t=Ue,Ue=e;return b--,Ue===e&&(Ve=e,0===b&&B(gl)),Ue}())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e){for(ae=[],ue=Rt();ue!==e;)ae.push(ue),ue=Rt();if(ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e)if((xe=wr())!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();Ae!==e&&(je=_r())!==e?T=D=function(Ue,Ve,He,Xe){for(var nt={named:[],implicit:[]},et=0;et<Ve.length;et++){var yt=Ve[et];"default"===yt.kind?nt.implicit.push(yt.graph):nt.named.push(yt.graph)}0===nt.named.length&&0===nt.implicit.length&&nt.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var pt={kind:"construct",token:"executableunit"};return pt.dataset=nt,pt.template=Ue,pt.pattern=He,null!=Xe&&null!=Xe.limit&&(pt.limit=Xe.limit),null!=Xe&&null!=Xe.offset&&(pt.offset=Xe.offset),null!=Xe&&null!=Xe.order&&""!=Xe.order&&(pt.order=Xe.order),pt}(J,ae,xe,je):(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,9)===ge?(U=ge,t+=9):(U=e,0===b&&B(Pe)),U===e&&(o.substr(t,9)===Oe?(U=Oe,t+=9):(U=e,0===b&&B(Je))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e){for(J=[],re=Rt();re!==e;)J.push(re),re=Rt();if(J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(o.substr(t,5)===$e?(ae=$e,t+=5):(ae=e,0===b&&B(Ke)),ae===e&&(o.substr(t,5)===ot?(ae=ot,t+=5):(ae=e,0===b&&B(be))),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e)if(123===o.charCodeAt(t)?(xe=ke,t++):(xe=e,0===b&&B(Ce)),xe!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();if(Ae!==e)if((je=ar())===e&&(je=null),je!==e){for(Se=[],Re=I();Re!==e;)Se.push(Re),Re=I();if(Se!==e)if(125===o.charCodeAt(t)?(Re=q,t++):(Re=e,0===b&&B(Z)),Re!==e){for(De=[],qe=I();qe!==e;)De.push(qe),qe=I();De!==e&&(qe=_r())!==e?T=D=function(Ue,Ve,He){for(var Xe={named:[],implicit:[]},nt=0;nt<Ue.length;nt++){var et=Ue[nt];"default"===et.kind?Xe.implicit.push(et.graph):Xe.named.push(et.graph)}0===Xe.named.length&&0===Xe.implicit.length&&Xe.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var yt={kind:"construct",token:"executableunit"};return yt.dataset=Xe,yt.template=Ve,yt.pattern={token:"basicgraphpattern",triplesContext:Ve.triplesContext},null!=He&&null!=He.limit&&(yt.limit=He.limit),null!=He&&null!=He.offset&&(yt.offset=He.offset),null!=He&&null!=He.order&&""!=He.order&&(yt.order=He.order),yt}(J,je,qe):(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e}return b--,T===e&&(D=e,0===b&&B(de)),T}(),C===e&&(C=function(){var T,D,U,W,J,re;if(b++,T=t,o.substr(t,8)===ye?(D=ye,t+=8):(D=e,0===b&&B(we)),D!==e){if(U=[],(W=fr())!==e)for(;W!==e;)U.push(W),W=fr();else U=e;if(U===e&&(42===o.charCodeAt(t)?(U=z,t++):(U=e,0===b&&B(he))),U!==e){for(W=[],J=Rt();J!==e;)W.push(J),J=Rt();W!==e?((J=wr())===e&&(J=null),J!==e&&(re=_r())!==e?T=D=[D,U,W,J,re]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e}else t=T,T=e;return b--,T===e&&(D=e,0===b&&B(se)),T}(),C===e&&(C=function(){var T,D,U,W,J,re,ae;for(b++,T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,3)===Ee?(U=Ee,t+=3):(U=e,0===b&&B(Ie)),U===e&&(o.substr(t,3)===Be?(U=Be,t+=3):(U=e,0===b&&B(Ge))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e){for(J=[],re=Rt();re!==e;)J.push(re),re=Rt();if(J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();re!==e&&(ae=wr())!==e?T=D=function(ue,xe){for(var Ae={named:[],implicit:[]},je=0;je<ue.length;je++){var Se=ue[je];"implicit"===Se.kind?Ae.implicit.push(Se.graph):Ae.named.push(Se.graph)}0===Ae.named.length&&0===Ae.implicit.length&&Ae.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Re={kind:"ask",token:"executableunit"};return Re.dataset=Ae,Re.pattern=xe,Re}(J,ae):(t=T,T=e)}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e;return b--,T===e&&(D=e,0===b&&B(me)),T}()))),C!==e?(b++,D=t,o.substr(t,6)===Dr?(U=Dr,t+=6):(U=e,0===b&&B(Oi)),U===e&&(o.substr(t,6)===Pr?(U=Pr,t+=6):(U=e,0===b&&B(Li))),U!==e&&(W=ka())!==e?D=U=[U,W]:(t=D,D=e),D===e&&(D=null),D!==e&&(D=null!=(J=D)?J[1]:null),b--,(T=D)===e&&(D=e,0===b&&B(ru)),(L=T)!==e?N=m=function(T,D,U){return{token:"query",kind:"query",prologue:T,units:[D],inlineData:U}}(m,C,L):(t=N,N=e)):(t=N,N=e)):(t=N,N=e),b--,N===e&&(m=e,0===b&&B(d)),b--,(w=N)===e&&0===b&&B(s),(u=w)===e&&(u=function(){var w;return b++,w=da(),b--,w===e&&0===b&&B(nu),w}()),u;var u,w,N,m,C,L,T,D,U,W,J}function oa(){var u,w,N,m,C;if(b++,u=t,(w=function(){var L,T,D,U,W;for(b++,L=t,T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(o.substr(t,4)===l?(D=l,t+=4):(D=e,0===b&&B(f)),D===e&&(o.substr(t,4)===c?(D=c,t+=4):(D=e,0===b&&B(E))),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=kn())!==e?L=T=function(J){yh(J);var re={token:"base"};return re.value=J,re}(W):(t=L,L=e)}else t=L,L=e;else t=L,L=e;return b--,L===e&&(T=e,0===b&&B(y)),L}())===e&&(w=null),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e){for(m=[],C=sa();C!==e;)m.push(C),C=sa();m!==e?u=w={token:"prologue",base:w,prefixes:m}:(t=u,u=e)}else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(a)),u}function sa(){var u,w,N,m,C,L,T;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(o.substr(t,6)===O?(N=O,t+=6):(N=e,0===b&&B(R)),N===e&&(o.substr(t,6)===A?(N=A,t+=6):(N=e,0===b&&B(v))),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=wi())!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();L!==e&&(T=kn())!==e?u=w=function(D,U){dh(D,U);var W={token:"prefix"};return W.prefix=D,W.local=U,W}(C,T):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(_)),u}function aa(){var u,w,N,m,C,L,T,D,U,W,J,re,ae,ue,xe,Ae,je,Se,Re,De;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(o.substr(t,6)===P?(N=P,t+=6):(N=e,0===b&&B(X)),N===e&&(o.substr(t,6)===Y?(N=Y,t+=6):(N=e,0===b&&B(ie))),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(o.substr(t,8)===fe?(C=fe,t+=8):(C=e,0===b&&B(oe)),C===e&&(o.substr(t,8)===le?(C=le,t+=8):(C=e,0===b&&B(V))),C===e&&(o.substr(t,7)===$?(C=$,t+=7):(C=e,0===b&&B(ne)),C===e&&(o.substr(t,7)===pe?(C=pe,t+=7):(C=e,0===b&&B(Fe)))),C===e&&(C=null),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e){for(T=[],D=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=mt())!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();J!==e?D=U=[U,W,J]:(t=D,D=e)}else t=D,D=e;else t=D,D=e;if(D===e){for(D=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if(40===o.charCodeAt(t)?(W=ve,t++):(W=e,0===b&&B(ce)),W!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();if(J!==e)if((re=lt())!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,2)===_e?(ue=_e,t+=2):(ue=e,0===b&&B(Ne)),ue===e&&(o.substr(t,2)===Qe?(ue=Qe,t+=2):(ue=e,0===b&&B(te))),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();if(xe!==e)if((Ae=mt())!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if(41===o.charCodeAt(t)?(Se=k,t++):(Se=e,0===b&&B(Q)),Se!==e){for(Re=[],De=I();De!==e;)Re.push(De),De=I();Re!==e?D=U=[U,W,J,re,ae,ue,xe,Ae,je,Se,Re]:(t=D,D=e)}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}if(D!==e)for(;D!==e;){for(T.push(D),D=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=mt())!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();J!==e?D=U=[U,W,J]:(t=D,D=e)}else t=D,D=e;else t=D,D=e;if(D===e){for(D=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if(40===o.charCodeAt(t)?(W=ve,t++):(W=e,0===b&&B(ce)),W!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();if(J!==e)if((re=lt())!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,2)===_e?(ue=_e,t+=2):(ue=e,0===b&&B(Ne)),ue===e&&(o.substr(t,2)===Qe?(ue=Qe,t+=2):(ue=e,0===b&&B(te))),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();if(xe!==e)if((Ae=mt())!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if(41===o.charCodeAt(t)?(Se=k,t++):(Se=e,0===b&&B(Q)),Se!==e){for(Re=[],De=I();De!==e;)Re.push(De),De=I();Re!==e?D=U=[U,W,J,re,ae,ue,xe,Ae,je,Se,Re]:(t=D,D=e)}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}else t=D,D=e;else t=D,D=e}}else T=e;if(T===e){for(T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(42===o.charCodeAt(t)?(U=z,t++):(U=e,0===b&&B(he)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?T=D=[D,U,W]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}T!==e?u=w=function(qe,Ue){var Ve=[];if(3===Ue.length&&"*"===Ue[1])return{vars:[{token:"variable",kind:"*"}],modifier:Qa(qe)};for(var He=0;He<Ue.length;He++){var Xe=Ue[He];3===Xe.length?Ve.push({token:"variable",kind:"var",value:Xe[1]}):Ve.push({token:"variable",kind:"aliased",expression:Xe[3],alias:Xe[7]})}return{vars:Ve,modifier:Qa(qe)}}(C,T):(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(H)),u}function Rt(){var u,w,N,m,C,L;if(b++,u=t,o.substr(t,4)===Me?(w=Me,t+=4):(w=e,0===b&&B(Ze)),w===e&&(o.substr(t,4)===rt?(w=rt,t+=4):(w=e,0===b&&B(tt))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=function(){var T,D,U;for(b++,T=t,D=[],U=I();U!==e;)D.push(U),U=I();return D!==e&&(U=ua())!==e?T=D={graph:U,kind:"default",token:"graphClause"}:(t=T,T=e),b--,T===e&&(D=e,0===b&&B(it)),T}())===e&&(m=function(){var T,D,U,W;if(b++,T=t,o.substr(t,5)===Ye?(D=Ye,t+=5):(D=e,0===b&&B(We)),D===e&&(o.substr(t,5)===at?(D=at,t+=5):(D=e,0===b&&B(ct))),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=ua())!==e?T=D={graph:W,kind:"named",token:"graphCluase"}:(t=T,T=e)}else t=T,T=e;return b--,T===e&&(D=e,0===b&&B(st)),T}()),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?u=w=m:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(ze)),u}function ua(){var u;return b++,u=bt(),b--,u===e&&0===b&&B(ut),u}function wr(){var u,w,N,m,C,L;if(b++,u=t,o.substr(t,5)===$e?(w=$e,t+=5):(w=e,0===b&&B(Ke)),w===e&&(o.substr(t,5)===ot?(w=ot,t+=5):(w=e,0===b&&B(be))),w===e&&(w=null),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=Ft())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?u=w=m:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(dr)),u}function _r(){var u,w,N,m,C,L,T,D,U,W,J,re,ae;return b++,u=t,w=function(){var W,J,re,ae,ue,xe,Ae;if(b++,W=t,o.substr(t,5)===Sr?(J=Sr,t+=5):(J=e,0===b&&B(Sn)),J===e&&(o.substr(t,5)===Tr?(J=Tr,t+=5):(J=e,0===b&&B(Tn))),J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(o.substr(t,2)===Wt?(ae=Wt,t+=2):(ae=e,0===b&&B(yr)),ae===e&&(o.substr(t,2)===Ht?(ae=Ht,t+=2):(ae=e,0===b&&B(vr))),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e){if(xe=[],(Ae=la())!==e)for(;Ae!==e;)xe.push(Ae),Ae=la();else xe=e;xe!==e?W=J=xe:(t=W,W=e)}else t=W,W=e}else t=W,W=e;else t=W,W=e}else t=W,W=e;return b--,W===e&&(J=e,0===b&&B(Cn)),W}(),w===e&&(w=null),w!==e?(N=function(){var W,J,re,ae;if(b++,W=t,o.substr(t,6)===gr?(J=gr,t+=6):(J=e,0===b&&B(Ir)),J!==e){if(re=[],(ae=ca())!==e)for(;ae!==e;)re.push(ae),ae=ca();else re=e;re!==e?W=J=[J,re]:(t=W,W=e)}else t=W,W=e;return b--,W===e&&(J=e,0===b&&B(Mt)),W}(),N===e&&(N=null),N!==e?(m=function(){var W,J,re,ae,ue,xe,Ae,je;if(b++,W=t,o.substr(t,5)===Rr?(J=Rr,t+=5):(J=e,0===b&&B(Or)),J===e&&(o.substr(t,5)===mr?(J=mr,t+=5):(J=e,0===b&&B($t))),J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(o.substr(t,2)===Wt?(ae=Wt,t+=2):(ae=e,0===b&&B(yr)),ae===e&&(o.substr(t,2)===Ht?(ae=Ht,t+=2):(ae=e,0===b&&B(vr))),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e){if(xe=[],(Ae=fa())!==e)for(;Ae!==e;)xe.push(Ae),Ae=fa();else xe=e;if(xe!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();Ae!==e?W=J=xe:(t=W,W=e)}else t=W,W=e}else t=W,W=e}else t=W,W=e;else t=W,W=e}else t=W,W=e;return b--,W===e&&(J=e,0===b&&B(Tt)),W}(),m===e&&(m=null),m!==e?(b++,J=t,(re=pa())!==e?((ae=ha())===e&&(ae=null),ae!==e?J=re=[re,ae]:(t=J,J=e)):(t=J,J=e),J===e&&(J=t,(re=ha())!==e?((ae=pa())===e&&(ae=null),ae!==e?J=re=[re,ae]:(t=J,J=e)):(t=J,J=e)),J!==e&&(J=function(ue){for(var xe={},Ae=0;Ae<ue.length;Ae++){var je=ue[Ae];null!=je&&null!=je.limit?xe.limit=je.limit:null!=je&&null!=je.offset&&(xe.offset=je.offset)}return xe}(J)),b--,(W=J)===e&&(J=e,0===b&&B(Ja)),(C=W)===e&&(C=null),C!==e?(L=w,T=m,U={},null!=(D=C)&&(null!=D.limit&&(U.limit=D.limit),null!=D.offset&&(U.offset=D.offset)),null!=L&&(U.group=L),U.order=T,u=w=U):(t=u,u=e)):(t=u,u=e)):(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Fn)),u}function la(){var u,w,N,m,C,L,T,D,U,W,J,re,ae;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if((N=xi())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=N:(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if((N=Ea())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=N:(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(40===o.charCodeAt(t)?(N=ve,t++):(N=e,0===b&&B(ce)),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=lt())!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e){if(T=t,o.substr(t,2)===_e?(D=_e,t+=2):(D=e,0===b&&B(Ne)),D===e&&(o.substr(t,2)===Qe?(D=Qe,t+=2):(D=e,0===b&&B(te))),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=mt())!==e?T=D=[D,U,W]:(t=T,T=e)}else t=T,T=e;if(T===e&&(T=null),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?(re=C,u=w=0!=(ae=T).length?{token:"aliased_expression",expression:re,alias:ae[2]}:re):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if((N=mt())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=N:(t=u,u=e)}else t=u,u=e;else t=u,u=e}}}return b--,u===e&&(w=e,0===b&&B(jr)),u}function ca(){var u;return b++,u=ai(),b--,u===e&&0===b&&B(Nr),u}function fa(){var u,w,N,m,C,L,T,D;if(b++,u=t,"ASC"===o.substr(t,3)?(w="ASC",t+=3):(w=e,0===b&&B(In)),w===e&&("asc"===o.substr(t,3)?(w="asc",t+=3):(w=e,0===b&&B(qa)),w===e&&(o.substr(t,4)===Fi?(w=Fi,t+=4):(w=e,0===b&&B(Ha)),w===e&&(o.substr(t,4)===Ci?(w=Ci,t+=4):(w=e,0===b&&B(Va))))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=bi())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?(T=m,u=w={direction:w.toUpperCase(),expression:T}):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e)if(u=t,(w=ai())===e&&(w=mt()),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e?("var"===(D=w).token&&(D={token:"expression",expressionType:"atomic",primaryexpression:"var",value:D}),u=w={direction:"ASC",expression:D}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(jn)),u}function pa(){var u,w,N,m,C,L;if(b++,u=t,o.substr(t,5)===Si?(w=Si,t+=5):(w=e,0===b&&B(Xa)),w===e&&(o.substr(t,5)===Ti?(w=Ti,t+=5):(w=e,0===b&&B(Wa))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=pr())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?u=w={limit:parseInt(m.value)}:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(za)),u}function ha(){var u,w,N,m,C,L;if(b++,u=t,o.substr(t,6)===ji?(w=ji,t+=6):(w=e,0===b&&B(Ka)),w===e&&(o.substr(t,6)===Ii?(w=Ii,t+=6):(w=e,0===b&&B(Ya))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=pr())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?u=w={offset:parseInt(m.value)}:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B($a)),u}function yn(){var u;return b++,(u=bt())===e&&(u=xn())===e&&(u=wn())===e&&(u=_n())===e&&(o.substr(t,5)===Lr?(u=Lr,t+=5):(u=e,0===b&&B(Ri))),b--,u===e&&0===b&&B(tu),u}function da(){var u,w,N,m,C,L,T,D,U,W;if(b++,u=t,(w=oa())!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(b++,(W=function(){var J,re,ae,ue,xe,Ae,je,Se,Re,De,qe;if(b++,J=t,o.substr(t,4)===Di?(re=Di,t+=4):(re=e,0===b&&B(au)),re===e&&(o.substr(t,4)===Pi?(re=Pi,t+=4):(re=e,0===b&&B(uu))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if((ue=bt())!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();if(xe!==e){if(Ae=t,o.substr(t,4)===Bi?(je=Bi,t+=4):(je=e,0===b&&B(lu)),je===e&&(o.substr(t,4)===Mi?(je=Mi,t+=4):(je=e,0===b&&B(cu))),je!==e){for(Se=[],Re=I();Re!==e;)Se.push(Re),Re=I();Se!==e&&(Re=si())!==e?Ae=je=[je,Se,Re]:(t=Ae,Ae=e)}else t=Ae,Ae=e;Ae===e&&(Ae=null),Ae!==e?(De=Ae,(qe={kind:"load",token:"executableunit"}).sourceGraph=ue,null!=De&&(qe.destinyGraph=De[2]),J=re=qe):(t=J,J=e)}else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(su)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae,je;if(b++,J=t,o.substr(t,5)===Qi?(re=Qi,t+=5):(re=e,0===b&&B(pu)),re===e&&(o.substr(t,5)===Ui?(re=Ui,t+=5):(re=e,0===b&&B(hu))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,6)===Kt?(ue=Kt,t+=6):(ue=e,0===b&&B(Nn)),ue===e&&(o.substr(t,6)===Yt?(ue=Yt,t+=6):(ue=e,0===b&&B(Rn))),ue===e&&(ue=null),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e&&(Ae=ga())!==e?((je={kind:"clear",token:"executableunit"}).destinyGraph=Ae,J=re=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(fu)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae,je;if(b++,J=t,o.substr(t,4)===Gi?(re=Gi,t+=4):(re=e,0===b&&B(yu)),re===e&&(o.substr(t,4)===qi?(re=qi,t+=4):(re=e,0===b&&B(vu))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,6)===Kt?(ue=Kt,t+=6):(ue=e,0===b&&B(Nn)),ue===e&&(o.substr(t,6)===Yt?(ue=Yt,t+=6):(ue=e,0===b&&B(Rn))),ue===e&&(ue=null),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e&&(Ae=ga())!==e?((je={kind:"drop",token:"executableunit"}).destinyGraph=Ae,J=re=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(du)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae,je;if(b++,J=t,o.substr(t,6)===Hi?(re=Hi,t+=6):(re=e,0===b&&B(mu)),re===e&&(o.substr(t,6)===Vi?(re=Vi,t+=6):(re=e,0===b&&B(bu))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,6)===Kt?(ue=Kt,t+=6):(ue=e,0===b&&B(Nn)),ue===e&&(o.substr(t,6)===Yt?(ue=Yt,t+=6):(ue=e,0===b&&B(Rn))),ue===e&&(ue=null),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e&&(Ae=si())!==e?((je={kind:"create",token:"executableunit"}).destinyGraph=Ae,J=re=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(gu)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae,je;if(b++,J=t,o.substr(t,6)===Br?(re=Br,t+=6):(re=e,0===b&&B(Ji)),re===e&&(o.substr(t,6)===Mr?(re=Mr,t+=6):(re=e,0===b&&B(zi))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,4)===Qr?(ue=Qr,t+=4):(ue=e,0===b&&B(Xi)),ue===e&&(o.substr(t,4)===Ur?(ue=Ur,t+=4):(ue=e,0===b&&B(Wi))),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e&&(Ae=ba())!==e?((je={kind:"insertdata",token:"executableunit"}).quads=Ae,J=re=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(xu)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae;if(b++,J=t,o.substr(t,6)===Zt?(re=Zt,t+=6):(re=e,0===b&&B(On)),re===e&&(o.substr(t,6)===er?(re=er,t+=6):(re=e,0===b&&B(Ln))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();ae!==e?(o.substr(t,4)===Qr?(ue=Qr,t+=4):(ue=e,0===b&&B(Xi)),ue===e&&(o.substr(t,4)===Ur?(ue=Ur,t+=4):(ue=e,0===b&&B(Wi))),ue!==e&&(xe=ba())!==e?((Ae={kind:"deletedata",token:"executableunit"}).quads=xe,J=re=Ae):(t=J,J=e)):(t=J,J=e)}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(wu)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae;if(b++,J=t,o.substr(t,6)===Zt?(re=Zt,t+=6):(re=e,0===b&&B(On)),re===e&&(o.substr(t,6)===er?(re=er,t+=6):(re=e,0===b&&B(Ln))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(o.substr(t,5)===$e?(ue=$e,t+=5):(ue=e,0===b&&B(Ke)),ue===e&&(o.substr(t,5)===ot?(ue=ot,t+=5):(ue=e,0===b&&B(be))),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e&&(Ae=Ft())!==e?J=re=function(je){var Se={kind:"modify"};Se.pattern=je,Se.with=null,Se.using=null;var Re=[],De=je.patterns[0];De=null==De.triplesContext&&null!=De.patterns?De.patterns[0].triplesContext:De.triplesContext;for(var qe=0;qe<De.length;qe++){var Ue={},Ve=De[qe];Ue.subject=Ve.subject,Ue.predicate=Ve.predicate,Ue.object=Ve.object,Ue.graph=Ve.graph,Re.push(Ue)}return Se.delete=Re,Se}(Ae):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(_u)),J}())===e&&(W=function(){var J,re,ae,ue,xe,Ae,je,Se,Re,De,qe,Ue,Ve,He,Xe;if(b++,J=t,re=t,o.substr(t,4)===$i?(ae=$i,t+=4):(ae=e,0===b&&B(Eu)),ae===e&&(o.substr(t,4)===Ki?(ae=Ki,t+=4):(ae=e,0===b&&B(Au))),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e&&(xe=bt())!==e?re=ae=[ae,ue,xe]:(t=re,re=e)}else t=re,re=e;if(re===e&&(re=null),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e){if(ue=t,b++,Ve=t,o.substr(t,6)===Zt?(He=Zt,t+=6):(He=e,0===b&&B(On)),He===e&&(o.substr(t,6)===er?(He=er,t+=6):(He=e,0===b&&B(Ln))),He!==e&&(Xe=ma())!==e?Ve=He=Xe:(t=Ve,Ve=e),b--,Ve===e&&(He=e,0===b&&B(Fu)),(xe=Ve)!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();Ae!==e?((je=ya())===e&&(je=null),je!==e?ue=xe=[xe,Ae,je]:(t=ue,ue=e)):(t=ue,ue=e)}else t=ue,ue=e;if(ue===e&&(ue=ya()),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();if(xe!==e){for(Ae=[],je=va();je!==e;)Ae.push(je),je=va();if(Ae!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if(o.substr(t,5)===$e?(Se=$e,t+=5):(Se=e,0===b&&B(Ke)),Se===e&&(o.substr(t,5)===ot?(Se=ot,t+=5):(Se=e,0===b&&B(be))),Se!==e){for(Re=[],De=I();De!==e;)Re.push(De),De=I();if(Re!==e)if((De=Ft())!==e){for(qe=[],Ue=I();Ue!==e;)qe.push(Ue),Ue=I();qe!==e?J=re=function(Ve,He,Xe,nt){var et={kind:"modify"};return et.with=""!=Ve&&null!=Ve?Ve[2]:null,3!==He.length||""!==He[2]&&null!=He[2]?3===He.length&&null!=He[0].length&&null!=He[1].length&&null!=He[2].length?(et.delete=He[0],et.insert=He[2]):(et.insert=He,et.delete=null):(et.delete=He[0],et.insert=null),""!=Xe&&(et.using=Xe),et.pattern=nt,et}(re,ue,Ae,De):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e;return b--,J===e&&(re=e,0===b&&B(ku)),J}()),b--,W===e&&0===b&&B(ou),(m=W)!==e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(59===o.charCodeAt(t)?(T=Ot,t++):(T=e,0===b&&B(Lt)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e?((U=da())===e&&(U=null),U!==e?C=L=[L,T,D,U]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e;else t=C,C=e;C===e&&(C=null),C!==e?u=w=function(W,J,re){var ae={token:"query",kind:"update"};ae.prologue=W;var ue=[J];return null!=re&&null!=re.length&&null!=re[3]&&null!=re[3].units&&(ue=ue.concat(re[3].units)),ae.units=ue,ae}(w,m,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(iu)),u}function ya(){var u,w,N;return b++,u=t,o.substr(t,6)===Br?(w=Br,t+=6):(w=e,0===b&&B(Ji)),w===e&&(o.substr(t,6)===Mr?(w=Mr,t+=6):(w=e,0===b&&B(zi))),w!==e&&(N=ma())!==e?u=w=N:(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Cu)),u}function va(){var u,w,N,m,C,L,T,D,U;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(o.substr(t,5)===Yi?(N=Yi,t+=5):(N=e,0===b&&B(Tu)),N===e&&(o.substr(t,5)===Zi?(N=Zi,t+=5):(N=e,0===b&&B(ju))),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e){if((C=bt())===e)if(C=t,o.substr(t,5)===Ye?(L=Ye,t+=5):(L=e,0===b&&B(We)),L===e&&(o.substr(t,5)===at?(L=at,t+=5):(L=e,0===b&&B(ct))),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=bt())!==e?C=L=[L,T,D]:(t=C,C=e)}else t=C,C=e;C!==e?u=w=null!=(U=C).length?{kind:"named",uri:U[2]}:{kind:"default",uri:U}:(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Su)),u}function si(){var u,w,N,m;if(b++,u=t,o.substr(t,5)===tr?(w=tr,t+=5):(w=e,0===b&&B(Dn)),w===e&&(o.substr(t,5)===rr?(w=rr,t+=5):(w=e,0===b&&B(Pn))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e&&(m=bt())!==e?u=w=m:(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Iu)),u}function ga(){var u,w;return b++,u=t,(u=w=si())===e&&(u=t,o.substr(t,7)===eo?(w=eo,t+=7):(w=e,0===b&&B(Ru)),w===e&&(o.substr(t,7)===to?(w=to,t+=7):(w=e,0===b&&B(Ou))),w!==e&&(w="default"),(u=w)===e&&(u=t,o.substr(t,5)===Ye?(w=Ye,t+=5):(w=e,0===b&&B(We)),w===e&&(o.substr(t,5)===at?(w=at,t+=5):(w=e,0===b&&B(ct))),w!==e&&(w="named"),(u=w)===e&&(u=t,"ALL"===o.substr(t,3)?(w="ALL",t+=3):(w=e,0===b&&B(Lu)),w===e&&("all"===o.substr(t,3)?(w="all",t+=3):(w=e,0===b&&B(Du))),w!==e&&(w="all"),u=w))),b--,u===e&&(w=e,0===b&&B(Nu)),u}function ma(){var u,w,N,m,C,L,T,D,U;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(123===o.charCodeAt(t)?(N=ke,t++):(N=e,0===b&&B(Ce)),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=xa())!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(125===o.charCodeAt(t)?(T=q,t++):(T=e,0===b&&B(Z)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e?u=w=ro(C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Pu)),u}function ba(){var u,w,N,m,C,L,T,D,U;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(123===o.charCodeAt(t)?(N=ke,t++):(N=e,0===b&&B(Ce)),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=xa())!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(125===o.charCodeAt(t)?(T=q,t++):(T=e,0===b&&B(Z)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e?u=w=ro(C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Bu)),u}function xa(){var u,w,N,m,C,L,T;if(b++,u=t,(w=ar())===e&&(w=null),w!==e){for(N=[],m=t,(C=wa())!==e?(46===o.charCodeAt(t)?(L=wt,t++):(L=e,0===b&&B(_t)),L===e&&(L=null),L!==e?((T=ar())===e&&(T=null),T!==e?m=C=[C,L,T]:(t=m,m=e)):(t=m,m=e)):(t=m,m=e);m!==e;)N.push(m),m=t,(C=wa())!==e?(46===o.charCodeAt(t)?(L=wt,t++):(L=e,0===b&&B(_t)),L===e&&(L=null),L!==e?((T=ar())===e&&(T=null),T!==e?m=C=[C,L,T]:(t=m,m=e)):(t=m,m=e)):(t=m,m=e);N!==e?u=w=function(D,U){var W=[];if(null!=D&&null!=D.triplesContext)for(var J=0;J<D.triplesContext.length;J++)(re=D.triplesContext[J]).graph=null,W.push(re);if(U&&U.length>0&&U[0].length>0&&(W=W.concat(U[0][0].quadsContext),null!=U[0][2]&&null!=U[0][2].triplesContext))for(J=0;J<U[0][2].triplesContext.length;J++){var re;(re=U[0][2].triplesContext[J]).graph=null,W.push(re)}return{token:"quads",quadsContext:W}}(w,N):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Mu)),u}function wa(){var u,w,N,m,C,L,T,D,U,W,J,re,ae;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(o.substr(t,5)===tr?(N=tr,t+=5):(N=e,0===b&&B(Dn)),N===e&&(o.substr(t,5)===rr?(N=rr,t+=5):(N=e,0===b&&B(Pn))),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=fr())!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(123===o.charCodeAt(t)?(T=ke,t++):(T=e,0===b&&B(Ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if((U=ar())===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(125===o.charCodeAt(t)?(J=q,t++):(J=e,0===b&&B(Z)),J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();re!==e?u=w=function(ue,xe){var Ae=[];if(null!=xe)for(var je=0;je<xe.triplesContext.length;je++){var Se=xe.triplesContext[je];Se.graph=ue,Ae.push(Se)}return{token:"quadsnottriples",quadsContext:Ae}}(C,U):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Qu)),u}function ar(){var u,w,N,m,C,L,T,D,U;if(b++,u=t,(w=Ca())!==e){for(N=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(46===o.charCodeAt(t)?(C=wt,t++):(C=e,0===b&&B(_t)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();L!==e?((T=ar())===e&&(T=null),T!==e?N=m=[m,C,L,T]:(t=N,N=e)):(t=N,N=e)}else t=N,N=e;else t=N,N=e;N===e&&(N=null),N!==e?(D=N,U=w.triplesContext,null!=D&&"object"==typeof D&&null!=D.length&&null!=D[3]&&null!=D[3].triplesContext&&(U=U.concat(D[3].triplesContext)),u=w={token:"triplestemplate",triplesContext:U}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Uu)),u}function Ft(){var u,w,N,m,C,L,T,D,U,W,J,re,ae,ue;if(b++,u=t,123===o.charCodeAt(t)?(w=ke,t++):(w=e,0===b&&B(Ce)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(b++,T=t,(D=aa())!==e&&(U=wr())!==e&&(W=_r())!==e?(re=U,ae=W,(ue={kind:"select",token:"subselect"}).projection=(J=D).vars,ue.modifier=J.modifier,ue.pattern=re,null!=ae&&null!=ae.limit&&(ue.limit=ae.limit),null!=ae&&null!=ae.offset&&(ue.offset=ae.offset),null!=ae&&null!=ae.order&&""!=ae.order&&(ue.order=ae.order),null!=ae&&null!=ae.group&&(ue.group=ae.group),T=D=ue):(t=T,T=e),b--,T===e&&(D=e,0===b&&B(j)),(m=T)!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?(125===o.charCodeAt(t)?(L=q,t++):(L=e,0===b&&B(Z)),L!==e?u=w=m:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e)if(u=t,123===o.charCodeAt(t)?(w=ke,t++):(w=e,0===b&&B(Ce)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(m=function(){var T,D,U,W,J,re,ae,ue,xe,Ae;if(b++,T=t,(D=vn())===e&&(D=null),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){if(W=[],J=t,(re=_a())!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(46===o.charCodeAt(t)?(ue=wt,t++):(ue=e,0===b&&B(_t)),ue===e&&(ue=null),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e?((Ae=vn())===e&&(Ae=null),Ae!==e?J=re=[re,ae,ue,xe,Ae]:(t=J,J=e)):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;for(;J!==e;)if(W.push(J),J=t,(re=_a())!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if(46===o.charCodeAt(t)?(ue=wt,t++):(ue=e,0===b&&B(_t)),ue===e&&(ue=null),ue!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e?((Ae=vn())===e&&(Ae=null),Ae!==e?J=re=[re,ae,ue,xe,Ae]:(t=J,J=e)):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;W!==e?T=D=function(je,Se){var Re=[];null!=je&&je!=[]&&Re.push(je);for(var De=0;De<Se.length;De++)for(var qe=0;qe<Se[De].length;qe++)null!=Se[De][qe]&&null!=Se[De][qe].token&&Re.push(Se[De][qe]);var Ue=[],Ve=[],He=[],Xe=[];for(De=0;De<Re.length;De++)if("triplespattern"!==Re[De].token&&"filter"!==Re[De].token&&"bind"!==Re[De].token){if(0!=Ve.length||0!=He.length){var nt=[];for(qe=0;qe<Ve.length;qe++)nt=nt.concat(Ve[qe].triplesContext);nt.length>0&&Ue.push({token:"basicgraphpattern",triplesContext:nt}),Ve=[]}Ue.push(Re[De])}else"triplespattern"===Re[De].token?Ve.push(Re[De]):"bind"===Re[De].token?Xe.push(Re[De]):He.push(Re[De]);if(0!=Ve.length||0!=He.length){for(nt=[],qe=0;qe<Ve.length;qe++)nt=nt.concat(Ve[qe].triplesContext);nt.length>0&&Ue.push({token:"basicgraphpattern",triplesContext:nt})}return{token:"groupgraphpattern",patterns:Ue,filters:He,binds:Xe}}(D,W):(t=T,T=e)}else t=T,T=e}else t=T,T=e;return b--,T===e&&(D=e,0===b&&B(qu)),T}(),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?(125===o.charCodeAt(t)?(L=q,t++):(L=e,0===b&&B(Z)),L!==e?u=w=m:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Gu)),u}function vn(){var u,w,N,m,C,L,T,D;if(b++,u=t,(w=function(){var U,W,J,re,ae,ue;for(b++,U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=mn())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();re!==e&&(ae=Ta())!==e?U=W=function(ue,xe){var Ae=xe.triplesContext,je=ue;if(xe.pairs)for(var Se=0;Se<xe.pairs.length;Se++){var Re=xe.pairs[Se],De=null;null!=Re[1].length&&(Re[1]=Re[1][0]),je.token&&"triplesnodecollection"===je.token?("path"===(De={subject:je.chainSubject[0],predicate:Re[0],object:Re[1]}).predicate.token&&"element"===De.predicate.kind&&(De.predicate=De.predicate.value),Ae.push(De),Ae=Ae.concat(je.triplesContext)):("path"===(De={subject:je,predicate:Re[0],object:Re[1]}).predicate.token&&"element"===De.predicate.kind&&(De.predicate=De.predicate.value),Ae.push(De))}var qe={token:"triplessamesubject"};return qe.triplesContext=Ae,qe.chainSubject=je,qe}(J,ae):(t=U,U=e)}else t=U,U=e;else t=U,U=e;if(U===e){for(U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=Na())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();re!==e?(b++,(ue=function(){var xe,Ae,je,Se,Re,De,qe,Ue,Ve,He,Xe,nt,et;if(b++,xe=t,(Ae=lr())===e&&(Ae=cr()),Ae!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if((Se=Sa())!==e){for(Re=[],De=t,qe=[],Ue=I();Ue!==e;)qe.push(Ue),Ue=I();if(qe!==e)if(59===o.charCodeAt(t)?(Ue=Ot,t++):(Ue=e,0===b&&B(Lt)),Ue!==e){for(Ve=[],He=I();He!==e;)Ve.push(He),He=I();if(Ve!==e){if(He=t,(Xe=lr())===e&&(Xe=cr()),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();nt!==e&&(et=zt())!==e?He=Xe=[Xe,nt,et]:(t=He,He=e)}else t=He,He=e;He===e&&(He=null),He!==e?De=qe=[qe,Ue,Ve,He]:(t=De,De=e)}else t=De,De=e}else t=De,De=e;else t=De,De=e;for(;De!==e;){for(Re.push(De),De=t,qe=[],Ue=I();Ue!==e;)qe.push(Ue),Ue=I();if(qe!==e)if(59===o.charCodeAt(t)?(Ue=Ot,t++):(Ue=e,0===b&&B(Lt)),Ue!==e){for(Ve=[],He=I();He!==e;)Ve.push(He),He=I();if(Ve!==e){if(He=t,(Xe=lr())===e&&(Xe=cr()),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();nt!==e&&(et=zt())!==e?He=Xe=[Xe,nt,et]:(t=He,He=e)}else t=He,He=e;He===e&&(He=null),He!==e?De=qe=[qe,Ue,Ve,He]:(t=De,De=e)}else t=De,De=e}else t=De,De=e;else t=De,De=e}Re!==e?xe=Ae=function(yt,pt,St){for(var kt={token:"propertylist"},Ct=[],Bt=[],xt=0;xt<pt.length;xt++)null!=pt[xt].triplesContext?(Ct=Ct.concat(pt[xt].triplesContext),"triplesnodecollection"===pt[xt].token&&null!=pt[xt].chainSubject.length?Bt.push([yt,pt[xt].chainSubject[0]]):Bt.push([yt,pt[xt].chainSubject])):Bt.push([yt,pt[xt]]);for(xt=0;xt<St.length;xt++)for(var Xt=St[xt][3],Ua=Xt[0],Cr=Xt[2]||[],hr=0;hr<Cr.length;hr++)null!=Cr[hr].triplesContext?(Ct=Ct.concat(Cr[hr].triplesContext),Bt.push([Ua,Cr[hr].chainSubject])):Bt.push([Ua,Cr[hr]]);return kt.pairs=Bt,kt.triplesContext=Ct,kt}(Ae,Se,Re):(t=xe,xe=e)}else t=xe,xe=e;else t=xe,xe=e}else t=xe,xe=e;return b--,xe===e&&(Ae=e,0===b&&B(xl)),xe}())===e&&(ue=null),b--,ue===e&&0===b&&B(jl),(ae=ue)!==e?U=W=function(ue,xe){var Ae=ue.triplesContext,je=ue.chainSubject;if(null!=xe&&null!=xe.pairs)for(var Se=0;Se<xe.pairs.length;Se++){var Re=xe.pairs[Se];if(null!=Re[1].length&&(Re[1]=Re[1][0]),"triplesnodecollection"===ue.token)for(var De=0;De<je.length;De++){var qe=je[De];if(null!=qe.triplesContext){var Ue={subject:qe.chainSubject,predicate:Re[0],object:Re[1]};Ae.concat(qe.triplesContext)}else Ue={subject:je[De],predicate:Re[0],object:Re[1]},Ae.push(Ue)}else Ue={subject:je,predicate:Re[0],object:Re[1]},Ae.push(Ue)}var Ve={token:"triplessamesubject"};return Ve.triplesContext=Ae,Ve.chainSubject=je,Ve}(J,ae):(t=U,U=e)):(t=U,U=e)}else t=U,U=e;else t=U,U=e}return b--,U===e&&(W=e,0===b&&B(Sl)),U}())!==e){for(N=t,m=[],C=I();C!==e;)m.push(C),C=I();m!==e?(46===o.charCodeAt(t)?(C=wt,t++):(C=e,0===b&&B(_t)),C!==e?((L=vn())===e&&(L=null),L!==e?N=m=[m,C,L]:(t=N,N=e)):(t=N,N=e)):(t=N,N=e),N===e&&(N=null),N!==e?(T=N,D=w.triplesContext,null!=T&&"object"==typeof T&&null!=T&&null!=T.length&&null!=T[2]&&null!=T[2].triplesContext&&(D=D.concat(T[2].triplesContext)),u=w={token:"triplespattern",triplesContext:D}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Hu)),u}function _a(){var u,w,N,m,C;return b++,u=function(){var w,N,m,C,L,T,D,U;if(b++,w=t,(N=Ft())!==e){for(m=[],C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,5)===Gr?(T=Gr,t+=5):(T=e,0===b&&B(uo)),T===e&&(o.substr(t,5)===qr?(T=qr,t+=5):(T=e,0===b&&B(lo))),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Ft())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;for(;C!==e;){for(m.push(C),C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,5)===Gr?(T=Gr,t+=5):(T=e,0===b&&B(uo)),T===e&&(o.substr(t,5)===qr?(T=qr,t+=5):(T=e,0===b&&B(lo))),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Ft())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}m!==e?w=N=function(W,J){if(0===J.length)return W;for(var re={token:"graphunionpattern",value:[W]},ae=0;ae<J.length;ae++)ae==J.length-1?re.value.push(J[ae][3]):(re.value.push(J[ae][3]),re={token:"graphunionpattern",value:[re]});return re}(N,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(tl)),w}(),u===e&&(u=function(){var w,N,m,C,L;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(o.substr(t,8)===no?(m=no,t+=8):(m=e,0===b&&B(zu)),m===e&&(o.substr(t,8)===io?(m=io,t+=8):(m=e,0===b&&B(Xu))),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e&&(L=Ft())!==e?w=N={token:"optionalgraphpattern",value:L}:(t=w,w=e)}else t=w,w=e;else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(Ju)),w}(),u===e&&(u=function(){var w,N,m,C;if(b++,w=t,o.substr(t,5)===so?(N=so,t+=5):(N=e,0===b&&B(Zu)),N===e&&(o.substr(t,5)===ao?(N=ao,t+=5):(N=e,0===b&&B(el))),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e&&(C=Ft())!==e?w=N={token:"minusgraphpattern",status:"todo",value:C}:(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(Yu)),w}(),u===e&&(u=function(){var w,N,m,C,L,T,D;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(o.substr(t,5)===tr?(m=tr,t+=5):(m=e,0===b&&B(Dn)),m===e&&(o.substr(t,5)===rr?(m=rr,t+=5):(m=e,0===b&&B(Pn))),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=fr())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=Ft())!==e?w=N=function(U,W){for(var J=0;J<W.patterns.length;J++)for(var re=W.patterns[J],ae=0;ae<re.triplesContext.length;ae++)re.triplesContext[ae].graph=U;return W.token="groupgraphpattern",W}(L,D):(t=w,w=e)}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(Wu)),w}(),u===e&&(b++,w=t,o.substr(t,7)===oo?(N=oo,t+=7):(N=e,0===b&&B(Ku)),N!==e&&(m=fr())!==e&&(C=Ft())!==e?w=N={token:"servicegraphpattern",status:"todo",value:[m,C]}:(t=w,w=e),b--,w===e&&(N=e,0===b&&B($u)),(u=w)===e&&(u=function(){var w,N,m,C,L;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(o.substr(t,6)===co?(m=co,t+=6):(m=e,0===b&&B(nl)),m===e&&(o.substr(t,6)===fo?(m=fo,t+=6):(m=e,0===b&&B(il))),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e&&(L=ai())!==e?w=N={token:"filter",value:L}:(t=w,w=e)}else t=w,w=e;else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(rl)),w}(),u===e&&(u=function(){var w,N,m,C,L,T,D,U,W,J,re,ae,ue;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(o.substr(t,4)===po?(m=po,t+=4):(m=e,0===b&&B(sl)),m===e&&(o.substr(t,4)===ho?(m=ho,t+=4):(m=e,0===b&&B(al))),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(40===o.charCodeAt(t)?(L=ve,t++):(L=e,0===b&&B(ce)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if((D=lt())!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if(o.substr(t,2)===Qe?(W=Qe,t+=2):(W=e,0===b&&B(te)),W===e&&(o.substr(t,2)===_e?(W=_e,t+=2):(W=e,0===b&&B(Ne))),W!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();if(J!==e)if((re=mt())!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();ae!==e?(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e?w=N={token:"bind",expression:D,as:re}:(t=w,w=e)):(t=w,w=e)}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(ol)),w}(),u===e&&(u=function(){var w,N,m,C,L;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(o.substr(t,6)===Dr?(m=Dr,t+=6):(m=e,0===b&&B(Oi)),m===e&&(o.substr(t,6)===Pr?(m=Pr,t+=6):(m=e,0===b&&B(Li))),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e&&(L=ka())!==e?w=N=L:(t=w,w=e)}else t=w,w=e;else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(ll)),w}()))))))),b--,u===e&&0===b&&B(Vu),u}function ai(){var u;return b++,(u=bi())===e&&(u=xi())===e&&(u=Ea()),b--,u===e&&0===b&&B(ul),u}function ka(){var u;return b++,(u=function(){var w,N,m,C,L,T,D,U;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=mt())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(123===o.charCodeAt(t)?(L=ke,t++):(L=e,0===b&&B(Ce)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e){for(D=[],U=ur();U!==e;)D.push(U),U=ur();D!==e?(125===o.charCodeAt(t)?(U=q,t++):(U=e,0===b&&B(Z)),U!==e?w=N={token:"inlineData",values:[{var:m,value:D}]}:(t=w,w=e)):(t=w,w=e)}else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(fl)),w}())===e&&(u=function(){var w,N,m,C,L,T,D,U,W,J,re,ae,ue,xe,Ae,je;for(b++,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e){if((m=Pt())===e)if(m=t,40===o.charCodeAt(t)?(C=ve,t++):(C=e,0===b&&B(ce)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e){for(T=[],D=mt();D!==e;)T.push(D),D=mt();if(T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e?(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e?m=C=[C,L,T,D,U]:(t=m,m=e)):(t=m,m=e)}else t=m,m=e}else t=m,m=e}else t=m,m=e;if(m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(123===o.charCodeAt(t)?(L=ke,t++):(L=e,0===b&&B(Ce)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e){for(D=[],U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(40===o.charCodeAt(t)?(J=ve,t++):(J=e,0===b&&B(ce)),J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e){for(ae=[],ue=ur();ue!==e;)ae.push(ue),ue=ur();if(ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e)if(41===o.charCodeAt(t)?(xe=k,t++):(xe=e,0===b&&B(Q)),xe!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();Ae!==e?U=W=[W,J,re,ae,ue,xe,Ae]:(t=U,U=e)}else t=U,U=e;else t=U,U=e}else t=U,U=e}else t=U,U=e}else t=U,U=e;else t=U,U=e;for(U===e&&(U=Pt());U!==e;){for(D.push(U),U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(40===o.charCodeAt(t)?(J=ve,t++):(J=e,0===b&&B(ce)),J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e){for(ae=[],ue=ur();ue!==e;)ae.push(ue),ue=ur();if(ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e)if(41===o.charCodeAt(t)?(xe=k,t++):(xe=e,0===b&&B(Q)),xe!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();Ae!==e?U=W=[W,J,re,ae,ue,xe,Ae]:(t=U,U=e)}else t=U,U=e;else t=U,U=e}else t=U,U=e}else t=U,U=e}else t=U,U=e;else t=U,U=e;U===e&&(U=Pt())}if(D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(125===o.charCodeAt(t)?(W=q,t++):(W=e,0===b&&B(Z)),W!==e?w=N={token:"inlineData",values:[],todo:!0}:(t=w,w=e)):(t=w,w=e)}else t=w,w=e}else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(pl)),w}()),b--,u===e&&0===b&&B(cl),u}function ur(){var u,w,N,m,C;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if((N=kn())===e&&(N=xn())===e&&(N=wn())===e&&(N=_n())===e&&(o.substr(t,5)===Lr?(N=Lr,t+=5):(N=e,0===b&&B(Ri))),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=N:(t=u,u=e)}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(hl)),u}function Ea(){var u,w,N,m,C,L;if(b++,u=t,(w=bt())!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e&&(m=Aa())!==e?(C=m,(L={token:"expression",expressionType:"irireforfunction"}).iriref=w,L.args=C.value,u=w=L):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(dl)),u}function Aa(){var u,w,N,m,C,L,T,D,U,W,J,re;if(b++,u=t,(w=Pt())!==e&&(w=yo()),(u=w)===e)if(u=t,40===o.charCodeAt(t)?(w=ve,t++):(w=e,0===b&&B(ce)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(o.substr(t,8)===fe?(m=fe,t+=8):(m=e,0===b&&B(oe)),m===e&&(o.substr(t,8)===le?(m=le,t+=8):(m=e,0===b&&B(V))),m===e&&(m=null),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e){if(D=[],U=t,44===o.charCodeAt(t)?(W=vt,t++):(W=e,0===b&&B(gt)),W!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();J!==e&&(re=lt())!==e?U=W=[W,J,re]:(t=U,U=e)}else t=U,U=e;for(;U!==e;)if(D.push(U),U=t,44===o.charCodeAt(t)?(W=vt,t++):(W=e,0===b&&B(gt)),W!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();J!==e&&(re=lt())!==e?U=W=[W,J,re]:(t=U,U=e)}else t=U,U=e;D!==e?(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e?u=w=function(ae,ue,xe){for(var Ae=[],je=0;je<xe.length;je++)Ae.push(xe[je][2]);var Se={token:"args"};return Se.value=[ue].concat(Ae),null!=ae&&"DISTINCT"===ae.toUpperCase()?Se.distinct=!0:Se.distinct=!1,Se}(m,L,D):(t=u,u=e)):(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(yl)),u}function kr(){var u,w,N,m,C,L,T,D,U,W;if(b++,u=t,(w=Pt())!==e&&(w=yo()),(u=w)===e)if(u=t,40===o.charCodeAt(t)?(w=ve,t++):(w=e,0===b&&B(ce)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=bt())===e&&(m=lt()),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e){if(L=[],T=t,44===o.charCodeAt(t)?(D=vt,t++):(D=e,0===b&&B(gt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?((W=bt())===e&&(W=lt()),W!==e?T=D=[D,U,W]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;for(;T!==e;)if(L.push(T),T=t,44===o.charCodeAt(t)?(D=vt,t++):(D=e,0===b&&B(gt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?((W=bt())===e&&(W=lt()),W!==e?T=D=[D,U,W]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;L!==e?(41===o.charCodeAt(t)?(T=k,t++):(T=e,0===b&&B(Q)),T!==e?u=w=function(J,re){for(var ae=[],ue=0;ue<re.length;ue++)ae.push(re[ue][2]);var xe={token:"args"};return xe.value=[J].concat(ae),xe}(m,L):(t=u,u=e)):(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(vl)),u}function Fa(){var u,w,N,m,C,L,T,D,U;if(b++,u=t,(w=Ca())!==e){for(N=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(46===o.charCodeAt(t)?(C=wt,t++):(C=e,0===b&&B(_t)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();L!==e?((T=Fa())===e&&(T=null),T!==e?N=m=[m,C,L,T]:(t=N,N=e)):(t=N,N=e)}else t=N,N=e;else t=N,N=e;N===e&&(N=null),N!==e?(D=N,U=w.triplesContext,null!=D&&"object"==typeof D&&null!=D.length&&null!=D[3]&&null!=D[3].triplesContext&&(U=U.concat(D[3].triplesContext)),u=w={token:"triplestemplate",triplesContext:U}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(ml)),u}function Ca(){var u,w,N,m,C,L;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if((N=mn())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e&&(C=ui())!==e?u=w=function(L,T){var D=T.triplesContext,U=L;if(T.pairs)for(var W=0;W<T.pairs.length;W++){var J=T.pairs[W],re=null;null!=J[1].length&&(J[1]=J[1][0]),U.token&&"triplesnodecollection"===U.token?(re={subject:U.chainSubject[0],predicate:J[0],object:J[1]},D.push(re),D=D.concat(U.triplesContext)):(re={subject:U,predicate:J[0],object:J[1]},D.push(re))}var ae={token:"triplessamesubject"};return ae.triplesContext=D,ae.chainSubject=U,ae}(N,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if((N=Ra())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?(b++,(L=ui())===e&&(L=null),b--,L===e&&0===b&&B(_l),(C=L)!==e?u=w=function(L,T){var D=L.triplesContext,U=L.chainSubject;if(T.pairs)for(var W=0;W<T.pairs.length;W++){var J=T.pairs[W];if(null!=J[1].length&&(J[1]=J[1][0]),"triplesnodecollection"===L.token)for(var re=0;re<U.length;re++){var ae=U[re];if(null!=ae.triplesContext){var ue={subject:ae.chainSubject,predicate:J[0],object:J[1]};D.concat(ae.triplesContext)}else ue={subject:U[re],predicate:J[0],object:J[1]},D.push(ue)}else ue={subject:U,predicate:J[0],object:J[1]},D.push(ue)}var xe={token:"triplessamesubject"};return xe.triplesContext=D,xe.chainSubject=U,xe}(N,C):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}return b--,u===e&&(w=e,0===b&&B(bl)),u}function ui(){var u,w,N,m,C,L,T,D,U,W,J,re,ae;if(b++,u=t,(w=fi())!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=zt())!==e){for(C=[],L=t,T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(59===o.charCodeAt(t)?(D=Ot,t++):(D=e,0===b&&B(Lt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){if(W=t,(J=fi())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();re!==e&&(ae=zt())!==e?W=J=[J,re,ae]:(t=W,W=e)}else t=W,W=e;W===e&&(W=null),W!==e?L=T=[T,D,U,W]:(t=L,L=e)}else t=L,L=e}else t=L,L=e;else t=L,L=e;for(;L!==e;){for(C.push(L),L=t,T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(59===o.charCodeAt(t)?(D=Ot,t++):(D=e,0===b&&B(Lt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){if(W=t,(J=fi())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();re!==e&&(ae=zt())!==e?W=J=[J,re,ae]:(t=W,W=e)}else t=W,W=e;W===e&&(W=null),W!==e?L=T=[T,D,U,W]:(t=L,L=e)}else t=L,L=e}else t=L,L=e;else t=L,L=e}C!==e?u=w=function(ue,xe,Ae){for(var je={token:"propertylist"},Se=[],Re=[],De=0;De<xe.length;De++)null!=xe[De].triplesContext?(Se=Se.concat(xe[De].triplesContext),"triplesnodecollection"===xe[De].token&&null!=xe[De].chainSubject.length?Re.push([ue,xe[De].chainSubject[0]]):Re.push([ue,xe[De].chainSubject])):Re.push([ue,xe[De]]);for(De=0;De<Ae.length;De++)for(var qe=Ae[De][3],Ue=qe[0],Ve=qe[2]||[],He=0;He<Ve.length;He++)null!=Ve[He].triplesContext?(Se=Se.concat(Ve[He].triplesContext),Re.push([Ue,Ve[He].chainSubject])):Re.push([Ue,Ve[He]]);return je.pairs=Re,je.triplesContext=Se,je}(w,m,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(wl)),u}function Sa(){var u,w,N,m,C,L,T,D;if(b++,u=t,(w=li())!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e){if(m=[],C=t,44===o.charCodeAt(t)?(L=vt,t++):(L=e,0===b&&B(gt)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=li())!==e?C=L=[L,T,D]:(t=C,C=e)}else t=C,C=e;for(;C!==e;)if(m.push(C),C=t,44===o.charCodeAt(t)?(L=vt,t++):(L=e,0===b&&B(gt)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=li())!==e?C=L=[L,T,D]:(t=C,C=e)}else t=C,C=e;m!==e?u=w=function(U,W){var J=[];J.push(U);for(var re=0;re<W.length;re++)for(var ae=0;ae<W[re].length;ae++)"object"==typeof W[re][ae]&&null!=W[re][ae].token&&J.push(W[re][ae]);return J}(w,m):(t=u,u=e)}else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(kl)),u}function zt(){var u,w,N,m,C,L,T,D;if(b++,u=t,(w=ci())!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e){if(m=[],C=t,44===o.charCodeAt(t)?(L=vt,t++):(L=e,0===b&&B(gt)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=ci())!==e?C=L=[L,T,D]:(t=C,C=e)}else t=C,C=e;for(;C!==e;)if(m.push(C),C=t,44===o.charCodeAt(t)?(L=vt,t++):(L=e,0===b&&B(gt)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=ci())!==e?C=L=[L,T,D]:(t=C,C=e)}else t=C,C=e;m!==e?u=w=function(U,W){var J=[];J.push(U);for(var re=0;re<W.length;re++)for(var ae=0;ae<W[re].length;ae++)"object"==typeof W[re][ae]&&null!=W[re][ae].token&&J.push(W[re][ae]);return J}(w,m):(t=u,u=e)}else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(El)),u}function li(){var u;return b++,u=yi(),b--,u===e&&0===b&&B(Al),u}function ci(){var u;return b++,u=vi(),b--,u===e&&0===b&&B(Fl),u}function fi(){var u,w;return b++,(u=fr())===e&&(u=t,97===o.charCodeAt(t)?(w=Hr,t++):(w=e,0===b&&B(Vr)),w!==e&&(w={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),u=w),b--,u===e&&(w=e,0===b&&B(Cl)),u}function Ta(){var u,w,N,m,C,L,T,D,U,W,J,re;if(b++,u=t,(w=lr())===e&&(w=cr()),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=Sa())!==e){for(C=[],L=t,T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(59===o.charCodeAt(t)?(D=Ot,t++):(D=e,0===b&&B(Lt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(W=t,(J=lr())===e&&(J=cr()),J!==e&&(re=zt())!==e?W=J=[J,re]:(t=W,W=e),W===e&&(W=null),W!==e?L=T=[T,D,U,W]:(t=L,L=e)):(t=L,L=e)}else t=L,L=e;else t=L,L=e;for(;L!==e;){for(C.push(L),L=t,T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(59===o.charCodeAt(t)?(D=Ot,t++):(D=e,0===b&&B(Lt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(W=t,(J=lr())===e&&(J=cr()),J!==e&&(re=zt())!==e?W=J=[J,re]:(t=W,W=e),W===e&&(W=null),W!==e?L=T=[T,D,U,W]:(t=L,L=e)):(t=L,L=e)}else t=L,L=e;else t=L,L=e}C!==e?u=w=function(ae,ue,xe){for(var Ae={token:"propertylist"},je=[],Se=[],Re=0;Re<ue.length;Re++)null!=ue[Re].triplesContext?(je=je.concat(ue[Re].triplesContext),"triplesnodecollection"===ue[Re].token&&null!=ue[Re].chainSubject.length?Se.push([ae,ue[Re].chainSubject[0]]):Se.push([ae,ue[Re].chainSubject])):Se.push([ae,ue[Re]]);for(Re=0;Re<xe.length;Re++)for(var De=xe[Re][3],qe=De[0],Ue=De[1]||[],Ve=0;Ve<Ue.length;Ve++)null!=Ue[Ve].triplesContext?(je=je.concat(Ue[Ve].triplesContext),Se.push([qe,Ue[Ve].chainSubject])):Se.push([qe,Ue[Ve]]);return Ae.pairs=Se,Ae.triplesContext=je,Ae}(w,m,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Tl)),u}function lr(){var u,w;return b++,t,w=ja(),b--,(u=w)===e&&(w=e,0===b&&B(Il)),u}function cr(){var u;return b++,u=mt(),b--,u===e&&0===b&&B(Nl),u}function ja(){var u;return b++,u=function(){var w,N,m,C,L,T;if(b++,w=t,(N=pi())!==e){for(m=[],C=t,124===o.charCodeAt(t)?(L=Jr,t++):(L=e,0===b&&B(zr)),L!==e&&(T=pi())!==e?C=L=[L,T]:(t=C,C=e);C!==e;)m.push(C),C=t,124===o.charCodeAt(t)?(L=Jr,t++):(L=e,0===b&&B(zr)),L!==e&&(T=pi())!==e?C=L=[L,T]:(t=C,C=e);m!==e?w=N=function(D,U){if(null==U||0===U.length)return D;for(var W=[],J=0;J<U.length;J++)W.push(U[1]);var re={token:"path",kind:"alternative"};return re.value=W,re}(N,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(Ol)),w}(),b--,u===e&&0===b&&B(Rl),u}function pi(){var u,w,N,m,C,L;if(b++,u=t,(w=hi())!==e){for(N=[],m=t,47===o.charCodeAt(t)?(C=Vt,t++):(C=e,0===b&&B(Jt)),C!==e&&(L=hi())!==e?m=C=[C,L]:(t=m,m=e);m!==e;)N.push(m),m=t,47===o.charCodeAt(t)?(C=Vt,t++):(C=e,0===b&&B(Jt)),C!==e&&(L=hi())!==e?m=C=[C,L]:(t=m,m=e);N!==e?u=w=function(T,D){if(null==D||0===D.length)return T;for(var U=[T],W=0;W<D.length;W++)U.push(D[W][1]);var J={token:"path",kind:"sequence"};return J.value=U,J}(w,N):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Ll)),u}function Ia(){var u,w,N,m,C,L,T;return b++,u=t,b++,(m=bt())===e&&(m=t,97===o.charCodeAt(t)?(C=Hr,t++):(C=e,0===b&&B(Vr)),C!==e&&(C={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(m=C)===e&&(m=t,33===o.charCodeAt(t)?(C=Qn,t++):(C=e,0===b&&B(Un)),C!==e&&(L=function(){var D,U,W,J,re,ae,ue,xe;if((D=gn())===e)if(D=t,40===o.charCodeAt(t)?(U=ve,t++):(U=e,0===b&&B(ce)),U!==e){if(W=t,(J=gn())!==e){for(re=[],ae=t,124===o.charCodeAt(t)?(ue=Jr,t++):(ue=e,0===b&&B(zr)),ue!==e&&(xe=gn())!==e?ae=ue=[ue,xe]:(t=ae,ae=e);ae!==e;)re.push(ae),ae=t,124===o.charCodeAt(t)?(ue=Jr,t++):(ue=e,0===b&&B(zr)),ue!==e&&(xe=gn())!==e?ae=ue=[ue,xe]:(t=ae,ae=e);re!==e?W=J=[J,re]:(t=W,W=e)}else t=W,W=e;W===e&&(W=null),W!==e?(41===o.charCodeAt(t)?(J=k,t++):(J=e,0===b&&B(Q)),J!==e?D=U=[U,W,J]:(t=D,D=e)):(t=D,D=e)}else t=D,D=e;return D}())!==e?m=C=[C,L]:(t=m,m=e),m===e&&(m=t,40===o.charCodeAt(t)?(C=ve,t++):(C=e,0===b&&B(ce)),C!==e&&(L=ja())!==e?(41===o.charCodeAt(t)?(T=k,t++):(T=e,0===b&&B(Q)),T!==e?m=C=L:(t=m,m=e)):(t=m,m=e)))),b--,m===e&&(C=e,0===b&&B(Ml)),(w=m)!==e?(N=function(){var m,C,L,T,D,U,W,J,re;return b++,42===o.charCodeAt(t)?(m=z,t++):(m=e,0===b&&B(he)),m===e&&(63===o.charCodeAt(t)?(m=Bn,t++):(m=e,0===b&&B(Mn)),m===e&&(43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m===e&&(m=t,123===o.charCodeAt(t)?(C=ke,t++):(C=e,0===b&&B(Ce)),C!==e?(L=t,(T=di())!==e?(D=t,44===o.charCodeAt(t)?(U=vt,t++):(U=e,0===b&&B(gt)),U!==e?(125===o.charCodeAt(t)?(W=q,t++):(W=e,0===b&&B(Z)),W===e&&(W=t,(J=di())!==e?(125===o.charCodeAt(t)?(re=q,t++):(re=e,0===b&&B(Z)),re!==e?W=J=[J,re]:(t=W,W=e)):(t=W,W=e)),W!==e?D=U=[U,W]:(t=D,D=e)):(t=D,D=e),D===e&&(125===o.charCodeAt(t)?(D=q,t++):(D=e,0===b&&B(Z))),D!==e?L=T=[T,D]:(t=L,L=e)):(t=L,L=e),L===e&&(L=t,44===o.charCodeAt(t)?(T=vt,t++):(T=e,0===b&&B(gt)),T!==e&&(D=di())!==e?(125===o.charCodeAt(t)?(U=q,t++):(U=e,0===b&&B(Z)),U!==e?L=T=[T,D,U]:(t=L,L=e)):(t=L,L=e)),L!==e?m=C=[C,L]:(t=m,m=e)):(t=m,m=e)))),b--,m===e&&(C=e,0===b&&B(Bl)),m}(),N===e&&(N=null),N!==e?u=w=function(m,C){if(m.token&&"path"!=m.token&&""==C)return m;if(m.token&&m.token!=L&&""!=C){var L={token:"path",kind:"element"};return L.value=m,L.modifier=C,L}return m.modifier=C,m}(w,N):(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Dl)),u}function hi(){var u,w,N,m;return b++,(u=Ia())===e&&(u=t,94===o.charCodeAt(t)?(w="^",t++):(w=e,0===b&&B(vo)),w!==e&&(N=Ia())!==e?((m={token:"path",kind:"inversePath"}).value=N,u=w=m):(t=u,u=e)),b--,u===e&&(w=e,0===b&&B(Pl)),u}function gn(){var u,w,N;return b++,(u=bt())===e&&(97===o.charCodeAt(t)?(u=Hr,t++):(u=e,0===b&&B(Vr)),u===e&&(u=t,94===o.charCodeAt(t)?(w="^",t++):(w=e,0===b&&B(vo)),w!==e?((N=bt())===e&&(97===o.charCodeAt(t)?(N=Hr,t++):(N=e,0===b&&B(Vr))),N!==e?u=w=[w,N]:(t=u,u=e)):(t=u,u=e))),b--,u===e&&(w=e,0===b&&B(Ql)),u}function di(){var u;return b++,u=pr(),b--,u===e&&0===b&&B(Ul),u}function Na(){var u,w;return b++,u=t,(w=function(){var N,m,C,L,T,D,U,W,J;for(b++,N=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(40===o.charCodeAt(t)?(C=ve,t++):(C=e,0===b&&B(ce)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e){if(T=[],(D=yi())!==e)for(;D!==e;)T.push(D),D=yi();else T=e;if(T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?N=m=T:(t=N,N=e)}else t=N,N=e;else t=N,N=e}else t=N,N=e}else t=N,N=e}else t=N,N=e;else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(Jl)),N}())!==e&&(w=function(N){for(var m=[],C=[],L=null,T=0;T<N.length;T++){At++;var D=null;null==N[T].chainSubject&&null==N[T].triplesContext?D=N[T]:(D=N[T].chainSubject,m=m.concat(N[T].triplesContext)),L={subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:D},0==T&&C.push(L.subject),m.push(L),L=T===N.length-1?{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(At+1)}},m.push(L)}return{token:"triplesnodecollection",triplesContext:m,chainSubject:C}}(w)),(u=w)===e&&(u=function(){var N,m,C,L,T,D,U,W;for(b++,N=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(91===o.charCodeAt(t)?(C=Gn,t++):(C=e,0===b&&B(qn)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if((T=Ta())!==e)if(93===o.charCodeAt(t)?(D=Hn,t++):(D=e,0===b&&B(Vn)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?N=m=function(J){for(var re={token:"blank",value:"_:"+ ++At},ae=[],ue=0;ue<J.pairs.length;ue++){var xe=J.pairs[ue],Ae={};Ae.subject=re,Ae.predicate=xe[0],null!=xe[1].length&&(xe[1]=xe[1][0]),Ae.object=xe[1],ae.push(Ae)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:J.triplesContext.concat(ae),chainSubject:re}}(T):(t=N,N=e)}else t=N,N=e;else t=N,N=e;else t=N,N=e}else t=N,N=e;else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(Hl)),N}()),b--,u===e&&(w=e,0===b&&B(Gl)),u}function Ra(){var u,w;return b++,u=t,(w=function(){var N,m,C,L,T,D,U,W,J;for(b++,N=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(40===o.charCodeAt(t)?(C=ve,t++):(C=e,0===b&&B(ce)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e){if(T=[],(D=vi())!==e)for(;D!==e;)T.push(D),D=vi();else T=e;if(T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?N=m=T:(t=N,N=e)}else t=N,N=e;else t=N,N=e}else t=N,N=e}else t=N,N=e}else t=N,N=e;else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(zl)),N}())!==e&&(w=function(N){for(var m=[],C=[],L=null,T=0;T<N.length;T++){At++;var D=null;null==N[T].chainSubject&&null==N[T].triplesContext?D=N[T]:(D=N[T].chainSubject,m=m.concat(D.triplesContext)),L={subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:D},0==T&&C.push(L.subject),m.push(L),L=T===N.length-1?{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(At+1)}},m.push(L)}return{token:"triplesnodecollection",triplesContext:m,chainSubject:C}}(w)),(u=w)===e&&(u=function(){var N,m,C,L,T,D,U,W,J;for(b++,N=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(91===o.charCodeAt(t)?(C=Gn,t++):(C=e,0===b&&B(qn)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if((T=ui())!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(93===o.charCodeAt(t)?(U=Hn,t++):(U=e,0===b&&B(Vn)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?N=m=function(re){for(var ae={token:"blank",value:"_:"+ ++At},ue=[],xe=0;xe<re.pairs.length;xe++){var Ae=re.pairs[xe],je={};je.subject=ae,je.predicate=Ae[0],null!=Ae[1].length&&(Ae[1]=Ae[1][0]),je.object=Ae[1],ue.push(je)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:re.triplesContext.concat(ue),chainSubject:ae}}(T):(t=N,N=e)}else t=N,N=e;else t=N,N=e}else t=N,N=e;else t=N,N=e}else t=N,N=e;else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(Vl)),N}()),b--,u===e&&(w=e,0===b&&B(ql)),u}function yi(){var u,w,N,m,C,L;for(b++,t,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=mn())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?w=N=[N,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=Na())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?w=N=[N,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e}return w!==e&&(w=go(w)),b--,(u=w)===e&&(w=e,0===b&&B(Xl)),u}function vi(){var u,w,N,m,C,L;for(b++,t,w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=mn())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?w=N=[N,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=Ra())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?w=N=[N,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e}return w!==e&&(w=go(w)),b--,(u=w)===e&&(w=e,0===b&&B(Wl)),u}function mn(){var u,w,N,m,C,L,T;return b++,(u=mt())===e&&(b++,(w=bt())===e&&(w=xn())===e&&(w=wn())===e&&(w=_n())===e&&(b++,N=t,b++,C=t,o.substr(t,2)===Ns?(L=Ns,t+=2):(L=e,0===b&&B(Df)),L!==e&&(T=Pa())!==e?C=L=T:(t=C,C=e),b--,C===e&&(L=e,0===b&&B(Lf)),(m=C)!==e&&(m={token:"blank",value:m}),(N=m)===e&&(N=t,m=function(){var C,L,T,D;if(b++,C=t,91===o.charCodeAt(t)?(L=Gn,t++):(L=e,0===b&&B(qn)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(93===o.charCodeAt(t)?(D=Hn,t++):(D=e,0===b&&B(Vn)),D!==e?C=L=[L,T,D]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e;return b--,C===e&&(L=e,0===b&&B(wp)),C}(),m!==e&&(m={token:"blank",value:"_:"+ ++At}),N=m),b--,N===e&&(m=e,0===b&&B(If)),(w=N)===e&&(w=Pt())),b--,w===e&&0===b&&B(Zl),u=w),b--,u===e&&0===b&&B($l),u}function fr(){var u;return b++,(u=mt())===e&&(u=bt()),b--,u===e&&0===b&&B(Kl),u}function mt(){var u,w,N,m,C,L,T,D,U;for(b++,u=t,w=[],N=I();N!==e;)w.push(N),N=I();if(w!==e)if(b++,T=t,63===o.charCodeAt(t)?(D=Bn,t++):(D=e,0===b&&B(Mn)),D!==e&&(U=Da())!==e?T=D=U:(t=T,T=e),b--,T===e&&(D=e,0===b&&B(Pf)),(N=T)===e&&(N=function(){var T,D,U;return b++,T=t,36===o.charCodeAt(t)?(D="$",t++):(D=e,0===b&&B(Rs)),D!==e&&(U=Da())!==e?T=D=U:(t=T,T=e),b--,T===e&&(D=e,0===b&&B(Bf)),T}()),N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?((L={token:"var"}).value=N,u=w=L):(t=u,u=e)}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Yl)),u}function lt(){var u;return b++,u=function(){var w,N,m,C,L,T,D,U;if(b++,w=t,(N=gi())!==e){for(m=[],C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===Xr?(T=Xr,t+=2):(T=e,0===b&&B(mo)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=gi())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;for(;C!==e;){for(m.push(C),C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===Xr?(T=Xr,t+=2):(T=e,0===b&&B(mo)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=gi())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}m!==e?w=N=function(W,J){if(0===J.length)return W;for(var re={token:"expression",expressionType:"conditionalor"},ae=[W],ue=0;ue<J.length;ue++)ae.push(J[ue][3]);return re.operands=ae,re}(N,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(tc)),w}(),b--,u===e&&0===b&&B(ec),u}function gi(){var u,w,N,m,C,L,T,D;if(b++,u=t,(w=mi())!==e){for(N=[],m=t,C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(o.substr(t,2)===Wr?(L=Wr,t+=2):(L=e,0===b&&B(bo)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=mi())!==e?m=C=[C,L,T,D]:(t=m,m=e)}else t=m,m=e;else t=m,m=e;for(;m!==e;){for(N.push(m),m=t,C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(o.substr(t,2)===Wr?(L=Wr,t+=2):(L=e,0===b&&B(bo)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=mi())!==e?m=C=[C,L,T,D]:(t=m,m=e)}else t=m,m=e;else t=m,m=e}N!==e?u=w=function(U,W){if(0===W.length)return U;for(var J={token:"expression",expressionType:"conditionaland"},re=[U],ae=0;ae<W.length;ae++)re.push(W[ae][3]);return J.operands=re,J}(w,N):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(rc)),u}function mi(){var u;return b++,u=function(){var w,N,m,C,L,T,D,U,W,J,re,ae,ue;if(b++,w=t,(N=Et())!==e){for(m=[],C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(61===o.charCodeAt(t)?(T=$r,t++):(T=e,0===b&&B(Kr)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===Yr?(T=Yr,t+=2):(T=e,0===b&&B(xo)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(60===o.charCodeAt(t)?(T=Jn,t++):(T=e,0===b&&B(zn)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(62===o.charCodeAt(t)?(T=Xn,t++):(T=e,0===b&&B(Wn)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===Zr?(T=Zr,t+=2):(T=e,0===b&&B(wo)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===en?(T=en,t+=2):(T=e,0===b&&B(_o)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(73===o.charCodeAt(t)?(T=tn,t++):(T=e,0===b&&B(rn)),T===e&&(105===o.charCodeAt(t)?(T=nn,t++):(T=e,0===b&&B(on))),T!==e)if(78===o.charCodeAt(t)?(D=nr,t++):(D=e,0===b&&B(ir)),D===e&&(110===o.charCodeAt(t)?(D=or,t++):(D=e,0===b&&B(sr))),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=kr())!==e?C=L=[L,T,D,U,W]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(78===o.charCodeAt(t)?(T=nr,t++):(T=e,0===b&&B(ir)),T===e&&(110===o.charCodeAt(t)?(T=or,t++):(T=e,0===b&&B(sr))),T!==e)if(79===o.charCodeAt(t)?(D=ko,t++):(D=e,0===b&&B(Eo)),D===e&&(111===o.charCodeAt(t)?(D=Ao,t++):(D=e,0===b&&B(Fo))),D!==e)if(84===o.charCodeAt(t)?(U=Co,t++):(U=e,0===b&&B(So)),U===e&&(116===o.charCodeAt(t)?(U=To,t++):(U=e,0===b&&B(jo))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(73===o.charCodeAt(t)?(J=tn,t++):(J=e,0===b&&B(rn)),J===e&&(105===o.charCodeAt(t)?(J=nn,t++):(J=e,0===b&&B(on))),J!==e)if(78===o.charCodeAt(t)?(re=nr,t++):(re=e,0===b&&B(ir)),re===e&&(110===o.charCodeAt(t)?(re=or,t++):(re=e,0===b&&B(sr))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();ae!==e&&(ue=kr())!==e?C=L=[L,T,D,U,W,J,re,ae,ue]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e;else t=C,C=e;else t=C,C=e}}}}}}}for(;C!==e;){for(m.push(C),C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(61===o.charCodeAt(t)?(T=$r,t++):(T=e,0===b&&B(Kr)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===Yr?(T=Yr,t+=2):(T=e,0===b&&B(xo)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(60===o.charCodeAt(t)?(T=Jn,t++):(T=e,0===b&&B(zn)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(62===o.charCodeAt(t)?(T=Xn,t++):(T=e,0===b&&B(Wn)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===Zr?(T=Zr,t+=2):(T=e,0===b&&B(wo)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(o.substr(t,2)===en?(T=en,t+=2):(T=e,0===b&&B(_o)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Et())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(73===o.charCodeAt(t)?(T=tn,t++):(T=e,0===b&&B(rn)),T===e&&(105===o.charCodeAt(t)?(T=nn,t++):(T=e,0===b&&B(on))),T!==e)if(78===o.charCodeAt(t)?(D=nr,t++):(D=e,0===b&&B(ir)),D===e&&(110===o.charCodeAt(t)?(D=or,t++):(D=e,0===b&&B(sr))),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=kr())!==e?C=L=[L,T,D,U,W]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(78===o.charCodeAt(t)?(T=nr,t++):(T=e,0===b&&B(ir)),T===e&&(110===o.charCodeAt(t)?(T=or,t++):(T=e,0===b&&B(sr))),T!==e)if(79===o.charCodeAt(t)?(D=ko,t++):(D=e,0===b&&B(Eo)),D===e&&(111===o.charCodeAt(t)?(D=Ao,t++):(D=e,0===b&&B(Fo))),D!==e)if(84===o.charCodeAt(t)?(U=Co,t++):(U=e,0===b&&B(So)),U===e&&(116===o.charCodeAt(t)?(U=To,t++):(U=e,0===b&&B(jo))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(73===o.charCodeAt(t)?(J=tn,t++):(J=e,0===b&&B(rn)),J===e&&(105===o.charCodeAt(t)?(J=nn,t++):(J=e,0===b&&B(on))),J!==e)if(78===o.charCodeAt(t)?(re=nr,t++):(re=e,0===b&&B(ir)),re===e&&(110===o.charCodeAt(t)?(re=or,t++):(re=e,0===b&&B(sr))),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();ae!==e&&(ue=kr())!==e?C=L=[L,T,D,U,W,J,re,ae,ue]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e;else t=C,C=e;else t=C,C=e}}}}}}}}m!==e?w=N=function(xe,Ae){if(0===Ae.length)return xe;if("i"===Ae[0][1]||"I"===Ae[0][1]||"n"===Ae[0][1]||"N"===Ae[0][1]){var je={};if("i"===Ae[0][1]||"I"===Ae[0][1]){var Se="=";je.expressionType="conditionalor"}else Se="!=",je.expressionType="conditionaland";for(var Re=xe,De=[],qe=0;qe<Ae[0].length;qe++)if("args"===Ae[0][qe].token){De=Ae[0][qe].value;break}je.token="expression",je.operands=[];for(var Ue=0;Ue<De.length;Ue++){var Ve={token:"expression",expressionType:"relationalexpression"};Ve.operator=Se,Ve.op1=Re,Ve.op2=De[Ue],je.operands.push(Ve)}return je}return(je={expressionType:"relationalexpression"}).operator=Ae[0][1],je.op1=xe,je.op2=Ae[0][3],je.token="expression",je}(N,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(ic)),w}(),b--,u===e&&0===b&&B(nc),u}function Et(){var u;return b++,u=function(){var w,N,m,C,L,T,D,U,W,J;if(b++,w=t,(N=Er())!==e){for(m=[],C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(43===o.charCodeAt(t)?(T=Qt,t++):(T=e,0===b&&B(Ut)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Er())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(45===o.charCodeAt(t)?(T=jt,t++):(T=e,0===b&&B(It)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Er())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e)if(C=t,(L=Ar())===e&&(L=Ar()),L!==e){for(T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(42===o.charCodeAt(t)?(U=z,t++):(U=e,0===b&&B(he)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Dt())!==e?T=D=[D,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(47===o.charCodeAt(t)?(U=Vt,t++):(U=e,0===b&&B(Jt)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Dt())!==e?T=D=[D,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}T===e&&(T=null),T!==e?C=L=[L,T]:(t=C,C=e)}else t=C,C=e}for(;C!==e;){for(m.push(C),C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(43===o.charCodeAt(t)?(T=Qt,t++):(T=e,0===b&&B(Ut)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Er())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(45===o.charCodeAt(t)?(T=jt,t++):(T=e,0===b&&B(It)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=Er())!==e?C=L=[L,T,D,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e)if(C=t,(L=Ar())===e&&(L=Ar()),L!==e){for(T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(42===o.charCodeAt(t)?(U=z,t++):(U=e,0===b&&B(he)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Dt())!==e?T=D=[D,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(47===o.charCodeAt(t)?(U=Vt,t++):(U=e,0===b&&B(Jt)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Dt())!==e?T=D=[D,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}T===e&&(T=null),T!==e?C=L=[L,T]:(t=C,C=e)}else t=C,C=e}}m!==e?w=N=function(re,ae){if(0===ae.length)return re;var ue={token:"expression",expressionType:"additiveexpression"};ue.summand=re,ue.summands=[];for(var xe=0;xe<ae.length;xe++){var Ae=ae[xe],je={};if(4==Ae.length&&"string"==typeof Ae[1])je.operator=Ae[1],je.expression=Ae[3];else{var Se={},Re=je[0],De=(je[1][1],je[1][3]);Re.value<0?(je.operator="-",Re.value=-Re.value):je.operator="+",Se.token="expression",Se.expressionType="multiplicativeexpression",Se.operator=Re,Se.factors=[{operator:null,expression:De}],je.expression=Se}ue.summands.push(je)}return ue}(N,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(sc)),w}(),b--,u===e&&0===b&&B(oc),u}function Er(){var u,w,N,m,C,L,T,D;if(b++,u=t,(w=Dt())!==e){for(N=[],m=t,C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(42===o.charCodeAt(t)?(L=z,t++):(L=e,0===b&&B(he)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=Dt())!==e?m=C=[C,L,T,D]:(t=m,m=e)}else t=m,m=e;else t=m,m=e;if(m===e){for(m=t,C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(47===o.charCodeAt(t)?(L=Vt,t++):(L=e,0===b&&B(Jt)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=Dt())!==e?m=C=[C,L,T,D]:(t=m,m=e)}else t=m,m=e;else t=m,m=e}for(;m!==e;){for(N.push(m),m=t,C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(42===o.charCodeAt(t)?(L=z,t++):(L=e,0===b&&B(he)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=Dt())!==e?m=C=[C,L,T,D]:(t=m,m=e)}else t=m,m=e;else t=m,m=e;if(m===e){for(m=t,C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if(47===o.charCodeAt(t)?(L=Vt,t++):(L=e,0===b&&B(Jt)),L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e&&(D=Dt())!==e?m=C=[C,L,T,D]:(t=m,m=e)}else t=m,m=e;else t=m,m=e}}N!==e?u=w=function(U,W){if(0===W.length)return U;var J={token:"expression",expressionType:"multiplicativeexpression"};J.factor=U,J.factors=[];for(var re=0;re<W.length;re++){var ae=W[re],ue={};ue.operator=ae[1],ue.expression=ae[3],J.factors.push(ue)}return J}(w,N):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(ac)),u}function Dt(){var u,w,N,m,C,L,T;if(b++,u=t,33===o.charCodeAt(t)?(w=Qn,t++):(w=e,0===b&&B(Un)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e&&(m=bn())!==e?((C={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"}).expression=m,u=w=C):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,43===o.charCodeAt(t)?(w=Qt,t++):(w=e,0===b&&B(Ut)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e&&(m=bn())!==e?(L=m,(T={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"}).expression=L,u=w=T):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,45===o.charCodeAt(t)?(w=jt,t++):(w=e,0===b&&B(It)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e&&(m=bn())!==e?(w=function(L){var T={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return T.expression=L,T}(m),u=w):(t=u,u=e)}else t=u,u=e;u===e&&(u=bn())}}return b--,u===e&&(w=e,0===b&&B(uc)),u}function bn(){var u,w,N,m,C;return b++,(u=bi())===e&&(u=xi())===e&&(u=function(){var m,C,L,T,D,U;if(b++,m=t,(C=bt())!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();L!==e?((T=Aa())===e&&(T=null),T!==e?(D=T,(U={token:"expression",expressionType:"irireforfunction"}).iriref=C,U.args=null!=D?D.value:D,m=C=U):(t=m,m=e)):(t=m,m=e)}else t=m,m=e;return b--,m===e&&(C=e,0===b&&B(vf)),m}(),u===e&&(u=t,(w=xn())!==e&&((N={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"}).value=w,w=N),(u=w)===e&&(u=t,(w=wn())!==e&&(m=w,(C={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"}).value=m,w=C),(u=w)===e&&(u=t,(w=_n())!==e&&(w=function(m){var C={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return C.value=m,C}(w)),(u=w)===e&&(u=function(){var m,C,L,T,D,U,W,J,re,ae,ue,xe,Ae,je,Se,Re,De,qe,Ue,Ve,He,Xe,nt,et,yt;if(b++,m=t,o.substr(t,5)===hs?(C=hs,t+=5):(C=e,0===b&&B(rf)),C===e&&(o.substr(t,5)===ds?(C=ds,t+=5):(C=e,0===b&&B(nf))),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(40===o.charCodeAt(t)?(T=ve,t++):(T=e,0===b&&B(ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,8)===fe?(U=fe,t+=8):(U=e,0===b&&B(oe)),U===e&&(o.substr(t,8)===le?(U=le,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(42===o.charCodeAt(t)?(J=z,t++):(J=e,0===b&&B(he)),J===e&&(J=lt()),J!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(41===o.charCodeAt(t)?(ae=k,t++):(ae=e,0===b&&B(Q)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e?(Ve=J,(He={token:"expression",expressionType:"aggregate",aggregateType:"count"}).distinct=""!=(Ue=U)&&null!=Ue?"DISTINCT":Ue,He.expression=Ve,m=C=He):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,12)===ys?(C=ys,t+=12):(C=e,0===b&&B(of)),C===e&&(o.substr(t,12)===vs?(C=vs,t+=12):(C=e,0===b&&B(sf))),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(40===o.charCodeAt(t)?(T=ve,t++):(T=e,0===b&&B(ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,8)===fe?(U=fe,t+=8):(U=e,0===b&&B(oe)),U===e&&(o.substr(t,8)===le?(U=le,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){if(re=t,59===o.charCodeAt(t)?(ae=Ot,t++):(ae=e,0===b&&B(Lt)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();if(ue!==e)if(o.substr(t,9)===gs?(xe=gs,t+=9):(xe=e,0===b&&B(af)),xe!==e){for(Ae=[],je=I();je!==e;)Ae.push(je),je=I();if(Ae!==e)if(61===o.charCodeAt(t)?(je=$r,t++):(je=e,0===b&&B(Kr)),je!==e){for(Se=[],Re=I();Re!==e;)Se.push(Re),Re=I();if(Se!==e)if((Re=Oa())!==e){for(De=[],qe=I();qe!==e;)De.push(qe),qe=I();De!==e?re=ae=[ae,ue,xe,Ae,je,Se,Re,De]:(t=re,re=e)}else t=re,re=e;else t=re,re=e}else t=re,re=e;else t=re,re=e}else t=re,re=e;else t=re,re=e}else t=re,re=e;if(re===e&&(re=null),re!==e)if(41===o.charCodeAt(t)?(ae=k,t++):(ae=e,0===b&&B(Q)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e?(Xe=U,nt=J,et=re,(yt={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"}).distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,yt.expression=nt,yt.separator=et,m=C=yt):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,3)===ms?(C=ms,t+=3):(C=e,0===b&&B(uf)),C===e&&(o.substr(t,3)===bs?(C=bs,t+=3):(C=e,0===b&&B(lf))),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(40===o.charCodeAt(t)?(T=ve,t++):(T=e,0===b&&B(ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,8)===fe?(U=fe,t+=8):(U=e,0===b&&B(oe)),U===e&&(o.substr(t,8)===le?(U=le,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(41===o.charCodeAt(t)?(ae=k,t++):(ae=e,0===b&&B(Q)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,3)===xs?(C=xs,t+=3):(C=e,0===b&&B(cf)),C===e&&(o.substr(t,3)===ws?(C=ws,t+=3):(C=e,0===b&&B(ff))),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(40===o.charCodeAt(t)?(T=ve,t++):(T=e,0===b&&B(ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,8)===fe?(U=fe,t+=8):(U=e,0===b&&B(oe)),U===e&&(o.substr(t,8)===le?(U=le,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(41===o.charCodeAt(t)?(ae=k,t++):(ae=e,0===b&&B(Q)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"min"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,3)===_s?(C=_s,t+=3):(C=e,0===b&&B(pf)),C===e&&(o.substr(t,3)===ks?(C=ks,t+=3):(C=e,0===b&&B(hf))),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(40===o.charCodeAt(t)?(T=ve,t++):(T=e,0===b&&B(ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,8)===fe?(U=fe,t+=8):(U=e,0===b&&B(oe)),U===e&&(o.substr(t,8)===le?(U=le,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(41===o.charCodeAt(t)?(ae=k,t++):(ae=e,0===b&&B(Q)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"max"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e)if(m=t,o.substr(t,3)===Es?(C=Es,t+=3):(C=e,0===b&&B(df)),C===e&&(o.substr(t,3)===As?(C=As,t+=3):(C=e,0===b&&B(yf))),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if(40===o.charCodeAt(t)?(T=ve,t++):(T=e,0===b&&B(ce)),T!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();if(D!==e)if(o.substr(t,8)===fe?(U=fe,t+=8):(U=e,0===b&&B(oe)),U===e&&(o.substr(t,8)===le?(U=le,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(re=[],ae=I();ae!==e;)re.push(ae),ae=I();if(re!==e)if(41===o.charCodeAt(t)?(ae=k,t++):(ae=e,0===b&&B(Q)),ae!==e){for(ue=[],xe=I();xe!==e;)ue.push(xe),xe=I();ue!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e}}}}return b--,m===e&&(C=e,0===b&&B(tf)),m}(),u===e&&(u=t,(w=mt())!==e&&(w=function(m){var C={token:"expression",expressionType:"atomic",primaryexpression:"var"};return C.value=m,C}(w)),u=w)))))),b--,u===e&&(w=e,0===b&&B(lc)),u}function bi(){var u,w,N,m,C,L;if(b++,u=t,40===o.charCodeAt(t)?(w=ve,t++):(w=e,0===b&&B(ce)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if((m=lt())!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();C!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?u=w=m:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(cc)),u}function xi(){var u,w,N,m,C,L,T,D,U,W,J,re,ae,ue,xe,Ae,je,Se,Re;if(b++,u=t,"STR"===o.substr(t,3)?(w="STR",t+=3):(w=e,0===b&&B(pc)),w===e&&("str"===o.substr(t,3)?(w="str",t+=3):(w=e,0===b&&B(hc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?((je={token:"expression",expressionType:"builtincall",builtincall:"str"}).args=[L],u=w=je):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,4)===Io?(w=Io,t+=4):(w=e,0===b&&B(dc)),w===e&&(o.substr(t,4)===No?(w=No,t+=4):(w=e,0===b&&B(yc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(Se=L,(Re={token:"expression",expressionType:"builtincall",builtincall:"lang"}).args=[Se],u=w=Re):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,11)===Ro?(w=Ro,t+=11):(w=e,0===b&&B(vc)),w===e&&(o.substr(t,11)===Oo?(w=Oo,t+=11):(w=e,0===b&&B(gc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(44===o.charCodeAt(t)?(D=vt,t++):(D=e,0===b&&B(gt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=lt())!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();J!==e?(41===o.charCodeAt(t)?(re=k,t++):(re=e,0===b&&B(Q)),re!==e?(w=function(Se,Re){var De={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return De.args=[Se,Re],De}(L,W),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,8)===Lo?(w=Lo,t+=8):(w=e,0===b&&B(mc)),w===e&&(o.substr(t,8)===Do?(w=Do,t+=8):(w=e,0===b&&B(bc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,5)===Po?(w=Po,t+=5):(w=e,0===b&&B(xc)),w===e&&(o.substr(t,5)===Bo?(w=Bo,t+=5):(w=e,0===b&&B(wc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=mt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"bound"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,"IRI"===o.substr(t,3)?(w="IRI",t+=3):(w=e,0===b&&B(_c)),w===e&&("iri"===o.substr(t,3)?(w="iri",t+=3):(w=e,0===b&&B(kc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"iri"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,"URI"===o.substr(t,3)?(w="URI",t+=3):(w=e,0===b&&B(Ec)),w===e&&("uri"===o.substr(t,3)?(w="uri",t+=3):(w=e,0===b&&B(Ac))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"uri"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,5)===Mo?(w=Mo,t+=5):(w=e,0===b&&B(Fc)),w===e&&(o.substr(t,5)===Qo?(w=Qo,t+=5):(w=e,0===b&&B(Cc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e){if(m=t,40===o.charCodeAt(t)?(C=ve,t++):(C=e,0===b&&B(ce)),C!==e){for(L=[],T=I();T!==e;)L.push(T),T=I();if(L!==e)if((T=lt())!==e){for(D=[],U=I();U!==e;)D.push(U),U=I();D!==e?(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e?m=C=[C,L,T,D,U]:(t=m,m=e)):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;m===e&&(m=Pt()),m!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===Se.length?Re.args=[Se[2]]:Re.args=null,Re}(m),u=w):(t=u,u=e)}else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,8)===Uo?(w=Uo,t+=8):(w=e,0===b&&B(Sc)),w===e&&(o.substr(t,8)===Go?(w=Go,t+=8):(w=e,0===b&&B(Tc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e&&(m=kr())!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return Re.args=Se,Re}(m),u=w):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,"IF"===o.substr(t,2)?(w="IF",t+=2):(w=e,0===b&&B(jc)),w===e&&("if"===o.substr(t,2)?(w="if",t+=2):(w=e,0===b&&B(Ic))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(44===o.charCodeAt(t)?(D=vt,t++):(D=e,0===b&&B(gt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=lt())!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();if(J!==e)if(44===o.charCodeAt(t)?(re=vt,t++):(re=e,0===b&&B(gt)),re!==e){for(ae=[],ue=I();ue!==e;)ae.push(ue),ue=I();if(ae!==e)if((ue=lt())!==e){for(xe=[],Ae=I();Ae!==e;)xe.push(Ae),Ae=I();xe!==e?(41===o.charCodeAt(t)?(Ae=k,t++):(Ae=e,0===b&&B(Q)),Ae!==e?(w=function(Se,Re,De){var qe={token:"expression",expressionType:"builtincall",builtincall:"if"};return qe.args=[Se,Re,De],qe}(L,W,ue),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,9)===qo?(w=qo,t+=9):(w=e,0===b&&B(Nc)),w===e&&(o.substr(t,9)===Ho?(w=Ho,t+=9):(w=e,0===b&&B(Rc)),w===e&&(o.substr(t,9)===Vo?(w=Vo,t+=9):(w=e,0===b&&B(Oc)))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,7)===Jo?(w=Jo,t+=7):(w=e,0===b&&B(Lc)),w===e&&(o.substr(t,7)===zo?(w=zo,t+=7):(w=e,0===b&&B(Dc)),w===e&&(o.substr(t,7)===Xo?(w=Xo,t+=7):(w=e,0===b&&B(Pc)))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,8)===Wo?(w=Wo,t+=8):(w=e,0===b&&B(Bc)),w===e&&(o.substr(t,8)===$o?(w=$o,t+=8):(w=e,0===b&&B(Mc))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if(44===o.charCodeAt(t)?(D=vt,t++):(D=e,0===b&&B(gt)),D!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=lt())!==e){for(J=[],re=I();re!==e;)J.push(re),re=I();J!==e?(41===o.charCodeAt(t)?(re=k,t++):(re=e,0===b&&B(Q)),re!==e?(w=function(Se,Re){var De={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return De.args=[Se,Re],De}(L,W),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,5)===Ko?(w=Ko,t+=5):(w=e,0===b&&B(Qc)),w===e&&(o.substr(t,5)===Yo?(w=Yo,t+=5):(w=e,0===b&&B(Uc)),w===e&&(o.substr(t,5)===Zo?(w=Zo,t+=5):(w=e,0===b&&B(Gc)),w===e&&(o.substr(t,5)===es?(w=es,t+=5):(w=e,0===b&&B(qc)),w===e&&(o.substr(t,5)===ts?(w=ts,t+=5):(w=e,0===b&&B(Hc)),w===e&&(o.substr(t,5)===rs?(w=rs,t+=5):(w=e,0===b&&B(Vc))))))),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();if(N!==e)if(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],L=I();L!==e;)C.push(L),L=I();if(C!==e)if((L=lt())!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();T!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return Re.args=[Se],Re}(L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,7)===ns?(w=ns,t+=7):(w=e,0===b&&B(Jc)),w===e&&(o.substr(t,7)===is?(w=is,t+=7):(w=e,0===b&&B(zc))),w!==e){if(N=[],os.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ss)),m!==e)for(;m!==e;)N.push(m),os.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ss));else N=e;if(N!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(40===o.charCodeAt(t)?(C=ve,t++):(C=e,0===b&&B(ce)),C!==e){for(L=[],T=t,D=[],U=I();U!==e;)D.push(U),U=I();for(D!==e&&(U=lt())!==e?(44===o.charCodeAt(t)?(W=vt,t++):(W=e,0===b&&B(gt)),W!==e?T=D=[D,U,W]:(t=T,T=e)):(t=T,T=e);T!==e;){for(L.push(T),T=t,D=[],U=I();U!==e;)D.push(U),U=I();D!==e&&(U=lt())!==e?(44===o.charCodeAt(t)?(W=vt,t++):(W=e,0===b&&B(gt)),W!==e?T=D=[D,U,W]:(t=T,T=e)):(t=T,T=e)}if(L!==e){for(T=[],D=I();D!==e;)T.push(D),D=I();if(T!==e)if((D=lt())!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(41===o.charCodeAt(t)?(W=k,t++):(W=e,0===b&&B(Q)),W!==e?(w=function(Se,Re,De){var qe={token:"expression",expressionType:"custom"};qe.name=Se.join("");for(var Ue=[],Ve=0;Ve<Re.length;Ve++)Ue.push(Re[Ve][1]);return Ue.push(De),qe.args=Ue,qe}(N,L,D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e}else t=u,u=e;u===e&&(u=function(){var Se,Re,De,qe,Ue,Ve,He,Xe,nt,et,yt,pt,St,kt,Ct,Bt,xt,Xt;if(b++,Se=t,o.substr(t,5)===as?(Re=as,t+=5):(Re=e,0===b&&B(Wc)),Re===e&&(o.substr(t,5)===us?(Re=us,t+=5):(Re=e,0===b&&B($c))),Re!==e){for(De=[],qe=I();qe!==e;)De.push(qe),qe=I();if(De!==e)if(40===o.charCodeAt(t)?(qe=ve,t++):(qe=e,0===b&&B(ce)),qe!==e){for(Ue=[],Ve=I();Ve!==e;)Ue.push(Ve),Ve=I();if(Ue!==e)if((Ve=lt())!==e){for(He=[],Xe=I();Xe!==e;)He.push(Xe),Xe=I();if(He!==e)if(44===o.charCodeAt(t)?(Xe=vt,t++):(Xe=e,0===b&&B(gt)),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();if(nt!==e)if((et=lt())!==e){for(yt=[],pt=I();pt!==e;)yt.push(pt),pt=I();if(yt!==e){if(pt=t,44===o.charCodeAt(t)?(St=vt,t++):(St=e,0===b&&B(gt)),St!==e){for(kt=[],Ct=I();Ct!==e;)kt.push(Ct),Ct=I();kt!==e&&(Ct=lt())!==e?pt=St=[St,kt,Ct]:(t=pt,pt=e)}else t=pt,pt=e;if(pt===e&&(pt=null),pt!==e){for(St=[],kt=I();kt!==e;)St.push(kt),kt=I();St!==e?(41===o.charCodeAt(t)?(kt=k,t++):(kt=e,0===b&&B(Q)),kt!==e?(Bt=et,xt=pt,(Xt={token:"expression",expressionType:"regex"}).text=Ve,Xt.pattern=Bt,null!=xt&&(Xt.flags=xt[2]),Se=Re=Xt):(t=Se,Se=e)):(t=Se,Se=e)}else t=Se,Se=e}else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;return b--,Se===e&&(Re=e,0===b&&B(Xc)),Se}(),u===e&&(u=function(){var Se,Re,De,qe,Ue,Ve;if(b++,Se=t,o.substr(t,6)===sn?(Re=sn,t+=6):(Re=e,0===b&&B(ls)),Re===e&&(o.substr(t,6)===an?(Re=an,t+=6):(Re=e,0===b&&B(cs))),Re!==e){for(De=[],qe=I();qe!==e;)De.push(qe),qe=I();De!==e&&(qe=Ft())!==e?(Ue=qe,(Ve={token:"expression",expressionType:"builtincall",builtincall:"exists"}).args=[Ue],Se=Re=Ve):(t=Se,Se=e)}else t=Se,Se=e;return b--,Se===e&&(Re=e,0===b&&B(Kc)),Se}(),u===e&&(u=function(){var Se,Re,De,qe,Ue,Ve,He,Xe;if(b++,Se=t,o.substr(t,3)===fs?(Re=fs,t+=3):(Re=e,0===b&&B(Zc)),Re===e&&(o.substr(t,3)===ps?(Re=ps,t+=3):(Re=e,0===b&&B(ef))),Re!==e){for(De=[],qe=I();qe!==e;)De.push(qe),qe=I();if(De!==e)if(o.substr(t,6)===sn?(qe=sn,t+=6):(qe=e,0===b&&B(ls)),qe===e&&(o.substr(t,6)===an?(qe=an,t+=6):(qe=e,0===b&&B(cs))),qe!==e){for(Ue=[],Ve=I();Ve!==e;)Ue.push(Ve),Ve=I();Ue!==e&&(Ve=Ft())!==e?(He=Ve,(Xe={token:"expression",expressionType:"builtincall",builtincall:"notexists"}).args=[He],Se=Re=Xe):(t=Se,Se=e)}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;return b--,Se===e&&(Re=e,0===b&&B(Yc)),Se}())))}}}}}}}}}}}}}}return b--,u===e&&(w=e,0===b&&B(fc)),u}function xn(){var u,w,N,m,C,L,T;return b++,u=t,(w=Oa())!==e?((N=function(){var D,U,W,J,re,ae,ue,xe,Ae,je;if(b++,D=t,64===o.charCodeAt(t)?(U="@",t++):(U=e,0===b&&B(Os)),U!==e){if(W=[],Ls.test(o.charAt(t))?(J=o.charAt(t),t++):(J=e,0===b&&B(Ds)),J!==e)for(;J!==e;)W.push(J),Ls.test(o.charAt(t))?(J=o.charAt(t),t++):(J=e,0===b&&B(Ds));else W=e;if(W!==e){if(J=[],re=t,45===o.charCodeAt(t)?(ae=jt,t++):(ae=e,0===b&&B(It)),ae!==e){if(ue=[],ln.test(o.charAt(t))?(xe=o.charAt(t),t++):(xe=e,0===b&&B(cn)),xe!==e)for(;xe!==e;)ue.push(xe),ln.test(o.charAt(t))?(xe=o.charAt(t),t++):(xe=e,0===b&&B(cn));else ue=e;ue!==e?re=ae=[ae,ue]:(t=re,re=e)}else t=re,re=e;for(;re!==e;)if(J.push(re),re=t,45===o.charCodeAt(t)?(ae=jt,t++):(ae=e,0===b&&B(It)),ae!==e){if(ue=[],ln.test(o.charAt(t))?(xe=o.charAt(t),t++):(xe=e,0===b&&B(cn)),xe!==e)for(;xe!==e;)ue.push(xe),ln.test(o.charAt(t))?(xe=o.charAt(t),t++):(xe=e,0===b&&B(cn));else ue=e;ue!==e?re=ae=[ae,ue]:(t=re,re=e)}else t=re,re=e;J!==e?(Ae=W,D=U=0===(je=J).length?("@"+Ae.join("")).toLowerCase():("@"+Ae.join("")+"-"+je[0][1].join("")).toLowerCase()):(t=D,D=e)}else t=D,D=e}else t=D,D=e;return b--,D===e&&(U=e,0===b&&B(Qf)),D}())===e&&(N=t,"^^"===o.substr(t,2)?(m="^^",t+=2):(m=e,0===b&&B(mf)),m!==e&&(C=bt())!==e?N=m=[m,C]:(t=N,N=e)),N===e&&(N=null),N!==e?(L=w,u=w="string"==typeof(T=N)&&T.length>0?{token:"literal",value:L.value,lang:T.slice(1),type:null}:null!=T&&"object"==typeof T?(T.shift(),{token:"literal",value:L.value,lang:null,type:T[0]}):{token:"literal",value:L.value,lang:null,type:null}):(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(gf)),u}function wn(){var u,w;return b++,b++,(w=ki())===e&&(w=_i())===e&&(w=pr()),b--,w===e&&0===b&&B(xf),(u=w)===e&&(u=function(){var w,N,m,C;return b++,b++,N=t,43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m!==e&&(C=ki())!==e?N=m=Ps(C):(t=N,N=e),b--,N===e&&(m=e,0===b&&B(zf)),(w=N)===e&&(w=function(){var N,m,C;return b++,N=t,43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m!==e&&(C=_i())!==e?N=m=Ps(C):(t=N,N=e),b--,N===e&&(m=e,0===b&&B(Jf)),N}(),w===e&&(w=function(){var N,m,C,L;return b++,N=t,43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m!==e&&(C=pr())!==e?((L=C).value="+"+L.value,N=m=L):(t=N,N=e),b--,N===e&&(m=e,0===b&&B(Vf)),N}())),b--,w===e&&0===b&&B(wf),w}(),u===e&&(u=Ar())),b--,u===e&&0===b&&B(bf),u}function Ar(){var u,w,N,m;return b++,b++,w=t,45===o.charCodeAt(t)?(N=jt,t++):(N=e,0===b&&B(It)),N!==e&&(m=ki())!==e?w=N=$n(m):(t=w,w=e),b--,w===e&&(N=e,0===b&&B($f)),(u=w)===e&&(u=function(){var w,N,m;return b++,w=t,45===o.charCodeAt(t)?(N=jt,t++):(N=e,0===b&&B(It)),N!==e&&(m=_i())!==e?w=N=$n(m):(t=w,w=e),b--,w===e&&(N=e,0===b&&B(Wf)),w}(),u===e&&(u=function(){var w,N,m;return b++,w=t,45===o.charCodeAt(t)?(N=jt,t++):(N=e,0===b&&B(It)),N!==e&&(m=pr())!==e?w=N=$n(m):(t=w,w=e),b--,w===e&&(N=e,0===b&&B(Xf)),w}())),b--,u===e&&0===b&&B(_f),u}function _n(){var u,w;return b++,u=t,o.substr(t,4)===Fs?(w=Fs,t+=4):(w=e,0===b&&B(Ef)),w===e&&(o.substr(t,4)===Cs?(w=Cs,t+=4):(w=e,0===b&&B(Af))),w!==e&&(w={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(u=w)===e&&(u=t,o.substr(t,5)===Ss?(w=Ss,t+=5):(w=e,0===b&&B(Ff)),w===e&&(o.substr(t,5)===Ts?(w=Ts,t+=5):(w=e,0===b&&B(Cf))),w!==e&&(w={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),u=w),b--,u===e&&(w=e,0===b&&B(kf)),u}function Oa(){var u,w;return b++,u=t,(w=function(){var N,m,C,L;if(b++,N=t,o.substr(t,3)===pn?(m=pn,t+=3):(m=e,0===b&&B(Hs)),m!==e){for(C=[],Vs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(Js)),L===e&&(L=Gt());L!==e;)C.push(L),Vs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(Js)),L===e&&(L=Gt());C!==e?(o.substr(t,3)===pn?(L=pn,t+=3):(L=e,0===b&&B(Hs)),L!==e?N=m=fn(C):(t=N,N=e)):(t=N,N=e)}else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(ip)),N}())!==e&&(w=un(w)),(u=w)===e&&(u=t,(w=function(){var N,m,C,L;if(b++,N=t,o.substr(t,3)===hn?(m=hn,t+=3):(m=e,0===b&&B(zs)),m!==e){for(C=[],Xs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(Ws)),L===e&&(L=Gt());L!==e;)C.push(L),Xs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(Ws)),L===e&&(L=Gt());C!==e?(o.substr(t,3)===hn?(L=hn,t+=3):(L=e,0===b&&B(zs)),L!==e?N=m=fn(C):(t=N,N=e)):(t=N,N=e)}else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(op)),N}())!==e&&(w=un(w)),(u=w)===e&&(u=t,(w=function(){var N,m,C,L;if(b++,N=t,39===o.charCodeAt(t)?(m=Kn,t++):(m=e,0===b&&B(Yn)),m!==e){for(C=[],Bs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(Ms)),L===e&&(L=Gt());L!==e;)C.push(L),Bs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(Ms)),L===e&&(L=Gt());C!==e?(39===o.charCodeAt(t)?(L=Kn,t++):(L=e,0===b&&B(Yn)),L!==e?N=m=fn(C):(t=N,N=e)):(t=N,N=e)}else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(rp)),N}())!==e&&(w=un(w)),(u=w)===e&&(u=t,(w=function(){var N,m,C,L;if(b++,N=t,34===o.charCodeAt(t)?(m=Qs,t++):(m=e,0===b&&B(Us)),m!==e){for(C=[],Gs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(qs)),L===e&&(L=Gt());L!==e;)C.push(L),Gs.test(o.charAt(t))?(L=o.charAt(t),t++):(L=e,0===b&&B(qs)),L===e&&(L=Gt());C!==e?(34===o.charCodeAt(t)?(L=Qs,t++):(L=e,0===b&&B(Us)),L!==e?N=m=fn(C):(t=N,N=e)):(t=N,N=e)}else t=N,N=e;return b--,N===e&&(m=e,0===b&&B(np)),N}())!==e&&(w=un(w)),u=w))),b--,u===e&&(w=e,0===b&&B(Sf)),u}function bt(){var u,w,N,m,C,L,T;return b++,u=t,(w=kn())!==e&&(w={token:"uri",prefix:null,suffix:null,value:w}),(u=w)===e&&(u=t,b++,N=t,b++,C=t,(L=wi())!==e&&(T=Pa())!==e?C=L=[L,T]:(t=C,C=e),b--,C===e&&(L=e,0===b&&B(Of)),(m=C)!==e&&(m=function(C){return{token:"uri",prefix:C[0],suffix:C[1],value:null}}(m)),(N=m)===e&&(N=t,(m=wi())!==e&&(m=function(C){return{token:"uri",prefix:C,suffix:"",value:null}}(m)),N=m),b--,N===e&&(m=e,0===b&&B(jf)),u=w=N),b--,u===e&&(w=e,0===b&&B(Tf)),u}function kn(){var u,w,N,m;if(b++,u=t,60===o.charCodeAt(t)?(w=Jn,t++):(w=e,0===b&&B(zn)),w!==e){for(N=[],js.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(Is));m!==e;)N.push(m),js.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(Is));N!==e?(62===o.charCodeAt(t)?(m=Xn,t++):(m=e,0===b&&B(Wn)),m!==e?u=w=N.join(""):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Nf)),u}function wi(){var u,w,N;return b++,u=t,(w=function(){var m,C,L,T;if(b++,m=t,(C=La())!==e){for(L=[],(T=En())===e&&(46===o.charCodeAt(t)?(T=wt,t++):(T=e,0===b&&B(_t)));T!==e;)L.push(T),(T=En())===e&&(46===o.charCodeAt(t)?(T=wt,t++):(T=e,0===b&&B(_t)));L!==e?m=C=function(D,U){if("."==U[U.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return D+U.join("")}(C,L):(t=m,m=e)}else t=m,m=e;return b--,m===e&&(C=e,0===b&&B(eh)),m}())===e&&(w=null),w!==e?(58===o.charCodeAt(t)?(N=br,t++):(N=e,0===b&&B(xr)),N!==e?u=w:(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Rf)),u}function pr(){var u,w,N,m;if(b++,t,w=[],ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt)),N!==e)for(;N!==e;)w.push(N),ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt));else w=e;return w!==e&&((m={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"}).value=qt(w),w=m),b--,(u=w)===e&&(w=e,0===b&&B(Gf)),u}function _i(){var u,w,N,m,C,L,T,D,U;if(b++,u=t,w=[],ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt)),N!==e)for(;N!==e;)w.push(N),ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt));else w=e;if(w!==e)if(46===o.charCodeAt(t)?(N=wt,t++):(N=e,0===b&&B(_t)),N!==e){for(m=[],ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));C!==e;)m.push(C),ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));m!==e?((L={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=qt([w,N,m]),u=w=L):(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e)if(u=t,46===o.charCodeAt(t)?(w=wt,t++):(w=e,0===b&&B(_t)),w!==e){if(N=[],ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m!==e)for(;m!==e;)N.push(m),ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt));else N=e;N!==e?(T=w,D=N,(U={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=qt([T,D]),u=w=U):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(qf)),u}function ki(){var u,w,N,m,C,L,T,D,U,W;if(b++,u=t,w=[],ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt)),N!==e)for(;N!==e;)w.push(N),ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt));else w=e;if(w!==e)if(46===o.charCodeAt(t)?(N=wt,t++):(N=e,0===b&&B(_t)),N!==e){for(m=[],ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));C!==e;)m.push(C),ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));m!==e&&(C=Ei())!==e?((L={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=qt([w,N,m,C]),u=w=L):(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){if(u=t,46===o.charCodeAt(t)?(w=wt,t++):(w=e,0===b&&B(_t)),w!==e){if(N=[],ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m!==e)for(;m!==e;)N.push(m),ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt));else N=e;N!==e&&(m=Ei())!==e?(T=w,D=N,U=m,(W={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=qt([T,D,U]),u=w=W):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,w=[],ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt)),N!==e)for(;N!==e;)w.push(N),ht.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(dt));else w=e;w!==e&&(N=Ei())!==e?(w=function(T,D){var U={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return U.value=qt([T,D]),U}(w,N),u=w):(t=u,u=e)}}return b--,u===e&&(w=e,0===b&&B(Hf)),u}function Ei(){var u,w,N,m,C;if(b++,u=t,Yf.test(o.charAt(t))?(w=o.charAt(t),t++):(w=e,0===b&&B(Zf)),w!==e)if(ep.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(tp)),N===e&&(N=null),N!==e){if(m=[],ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt)),C!==e)for(;C!==e;)m.push(C),ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));else m=e;m!==e?u=w=qt([w,N,m]):(t=u,u=e)}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Kf)),u}function Gt(){var u,w,N;return b++,u=t,92===o.charCodeAt(t)?(w="\\",t++):(w=e,0===b&&B($s)),w!==e?(ap.test(o.charAt(t))?(N=o.charAt(t),t++):(N=e,0===b&&B(up)),N!==e?u=w=[w,N]:(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(sp)),u}function Pt(){var u,w,N,m;if(b++,u=t,40===o.charCodeAt(t)?(w=ve,t++):(w=e,0===b&&B(ce)),w!==e){for(N=[],m=I();m!==e;)N.push(m),m=I();N!==e?(41===o.charCodeAt(t)?(m=k,t++):(m=e,0===b&&B(Q)),m!==e?u=w={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(lp)),u}function I(){var u;return b++,fp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(pp)),u===e&&(hp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(dp)),u===e&&(yp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(vp)),u===e&&(gp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(mp)),u===e&&(u=function(){var w,N,m,C;if(b++,w=t,35===o.charCodeAt(t)?(N="#",t++):(N=e,0===b&&B(Ks)),N!==e){for(m=[],Ys.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(Zs));C!==e;)m.push(C),Ys.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(Zs));m!==e?w=N=[N,m]:(t=w,w=e)}else t=w,w=e;return b--,w===e&&(N=e,0===b&&B(bp)),w}())))),b--,u===e&&0===b&&B(cp),u}function La(){var u;return b++,kp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Ep)),u===e&&(Ap.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Fp)),u===e&&(Cp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Sp)),u===e&&(Tp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(jp)),u===e&&(Ip.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Np)),u===e&&(Rp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Op)),u===e&&(Lp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Dp)),u===e&&(Pp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Bp)),u===e&&(Mp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Qp)),u===e&&(Up.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Gp)),u===e&&(qp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Hp)),u===e&&(Vp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Jp)),u===e&&(zp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Xp)),u===e&&(Wp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B($p))))))))))))))),b--,u===e&&0===b&&B(_p),u}function Fr(){var u;return b++,(u=La())===e&&(95===o.charCodeAt(t)?(u="_",t++):(u=e,0===b&&B(ea))),b--,u===e&&0===b&&B(Kp),u}function Da(){var u,w,N,m;if(b++,u=t,(w=Fr())===e&&(ht.test(o.charAt(t))?(w=o.charAt(t),t++):(w=e,0===b&&B(dt))),w!==e){for(N=[],(m=Fr())===e&&(ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m===e&&(Zn.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ei)),m===e&&(ti.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ri)),m===e&&(ni.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ii))))));m!==e;)N.push(m),(m=Fr())===e&&(ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m===e&&(Zn.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ei)),m===e&&(ti.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ri)),m===e&&(ni.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ii))))));N!==e?u=w+=N.join(""):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Yp)),u}function En(){var u;return b++,(u=Fr())===e&&(45===o.charCodeAt(t)?(u=jt,t++):(u=e,0===b&&B(It)),u===e&&(ht.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(dt)),u===e&&(Zn.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ei)),u===e&&(ti.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ri)),u===e&&(ni.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ii))))))),b--,u===e&&0===b&&B(Zp),u}function Pa(){var u,w,N,m;if(b++,u=t,(w=Fr())===e&&(ht.test(o.charAt(t))?(w=o.charAt(t),t++):(w=e,0===b&&B(dt)),w===e&&(58===o.charCodeAt(t)?(w=br,t++):(w=e,0===b&&B(xr)),w===e&&(w=Ai()))),w!==e){for(N=[],(m=En())===e&&(46===o.charCodeAt(t)?(m=wt,t++):(m=e,0===b&&B(_t)),m===e&&(58===o.charCodeAt(t)?(m=br,t++):(m=e,0===b&&B(xr)),m===e&&(m=Ai())));m!==e;)N.push(m),(m=En())===e&&(46===o.charCodeAt(t)?(m=wt,t++):(m=e,0===b&&B(_t)),m===e&&(58===o.charCodeAt(t)?(m=br,t++):(m=e,0===b&&B(xr)),m===e&&(m=Ai())));N!==e?u=w+=(N||[]).join(""):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(th)),u}function Ai(){var u,w,N,m,C,L;return b++,b++,N=t,37===o.charCodeAt(t)?(m="%",t++):(m=e,0===b&&B(ta)),m!==e&&(C=Ba())!==e&&(L=Ba())!==e?N=m=[m,C,L]:(t=N,N=e),N!==e&&(N=N.join("")),b--,(w=N)===e&&(N=e,0===b&&B(nh)),(u=w)===e&&(u=function(){var w,N,m;return b++,w=t,92===o.charCodeAt(t)?(N="\\",t++):(N=e,0===b&&B($s)),N!==e?(95===o.charCodeAt(t)?(m="_",t++):(m=e,0===b&&B(ea)),m===e&&(126===o.charCodeAt(t)?(m="~",t++):(m=e,0===b&&B(fh)),m===e&&(46===o.charCodeAt(t)?(m=wt,t++):(m=e,0===b&&B(_t)),m===e&&(45===o.charCodeAt(t)?(m=jt,t++):(m=e,0===b&&B(It)),m===e&&(33===o.charCodeAt(t)?(m=Qn,t++):(m=e,0===b&&B(Un)),m===e&&(36===o.charCodeAt(t)?(m=Mf,t++):(m=e,0===b&&B(Rs)),m===e&&(38===o.charCodeAt(t)?(m="&",t++):(m=e,0===b&&B(ph)),m===e&&(39===o.charCodeAt(t)?(m=Kn,t++):(m=e,0===b&&B(Yn)),m===e&&(40===o.charCodeAt(t)?(m=ve,t++):(m=e,0===b&&B(ce)),m===e&&(41===o.charCodeAt(t)?(m=k,t++):(m=e,0===b&&B(Q)),m===e&&(42===o.charCodeAt(t)?(m=z,t++):(m=e,0===b&&B(he)),m===e&&(43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m===e&&(44===o.charCodeAt(t)?(m=vt,t++):(m=e,0===b&&B(gt)),m===e&&(59===o.charCodeAt(t)?(m=Ot,t++):(m=e,0===b&&B(Lt)),m===e&&(58===o.charCodeAt(t)?(m=br,t++):(m=e,0===b&&B(xr)),m===e&&(61===o.charCodeAt(t)?(m=$r,t++):(m=e,0===b&&B(Kr)),m===e&&(47===o.charCodeAt(t)?(m=Vt,t++):(m=e,0===b&&B(Jt)),m===e&&(63===o.charCodeAt(t)?(m=Bn,t++):(m=e,0===b&&B(Mn)),m===e&&(35===o.charCodeAt(t)?(m=xp,t++):(m=e,0===b&&B(Ks)),m===e&&(64===o.charCodeAt(t)?(m=Uf,t++):(m=e,0===b&&B(Os)),m===e&&(37===o.charCodeAt(t)?(m=ih,t++):(m=e,0===b&&B(ta)))))))))))))))))))))),m!==e?w=N="\\"+m:(t=w,w=e)):(t=w,w=e),b--,w===e&&(N=e,0===b&&B(ch)),w}()),b--,u===e&&0===b&&B(rh),u}function Ba(){var u;return b++,ht.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(dt)),u===e&&(sh.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ah)),u===e&&(uh.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(lh)))),b--,u===e&&0===b&&B(oh),u}var qt=function(u){for(var w="",N=0;N<u.length;N++)"string"==typeof u[N]?w+=u[N]:w+=u[N].join("");return w},At=0,Ma={},dh=function(u,w){Ma[u]=w},yh=function(u){Ma.null=u},Qa=function(u){var w="";if(null==u)return null;for(var N=0;N<u.length;N++)w+=u[N];return w.toUpperCase()};if((h=n())!==e&&t===o.length)return h;throw h!==e&&t<o.length&&B({type:"end"}),function hh(u,w,N){return new M(M.buildMessage(u,w),u,w,N)}(oi,Nt<o.length?o.charAt(Nt):null,Nt<o.length?na(Nt,Nt+1):na(Nt,Nt))}}}()},{}],129:[function(G,K,ee){G("./btree").Tree;var M=G("./utils"),o=M,x=G("./lexicon").Lexicon;PersistentLexicon=function(h,e){var r=this;M.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=e||"rdfstorejs";var n=r.indexedDB.open(this.dbName+"_lexicon",1);n.onerror=function(s){h(null,new Error("Error opening IndexedDB: "+s.target.errorCode))},n.onsuccess=function(s){r.db=s.target.result,h(r)},n.onupgradeneeded=function(s){r.db=s.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(h,e,r){if(h!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(d){r(null,new Error(d.target.statusCode))};var s=n.objectStore("knownGraphs");s.get(e).onsuccess=function(d){d.target.result?r(!0):s.add({oid:h,uriToken:e}).onsuccess=function(a){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(h,e){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();n.onsuccess=function(s){var d=s.target.result;d?(!0===h?r.push(d.value.uriToken):r.push(d.value.oid),d.continue()):e(r)},n.onerror=function(s){e(null,new Error("Error retrieving data from the cursor: "+s.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(h,e){if(h===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"],"readwrite").objectStore("components"),n=r.index("value").get("_u:"+h);n.onsuccess=function(s){var d=s.target.result;if(d){d.counter++;var a=d.id,y=r.put(d);y.onsuccess=function(f){e(a)},y.onerror=function(f){e(null,new Error("Error updating the URI data"+f.target.errorCode))}}else{var l=r.add({value:"_u:"+h,counter:0,uri:!0});l.onsuccess=function(f){e(f.target.result)},l.onerror=function(f){e(null,new Error("Error inserting the URI data"+f.target.errorCode))}}},n.onerror=function(s){e(null,new Error("Error retrieving the URI data"+s.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(h,e){if(h===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+h);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.id):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving uri data "+n.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(h,e){if(h===this.defaultGraphUri)e(0);else{var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+h);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.cost):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving uri data "+n.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(h){var e=guid(),r=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});r.onsuccess=function(n){h(n.target.result)},r.onerror=function(n){h(null,new Error("Error inserting the URI data"+n.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(h,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(h,e){var r=this.db.transaction(["components"],"readwrite").objectStore("components"),n=r.index("value").get("_l:"+h);n.onsuccess=function(s){var d=s.target.result;if(d){d.counter++;var a=d.id,y=r.put(d);y.onsuccess=function(f){e(a)},y.onerror=function(f){e(null,new Error("Error updating the literal data"+f.target.errorCode))}}else{var l=r.add({value:"_l:"+h,counter:0,literal:!0});l.onsuccess=function(f){e(f.target.result)},l.onerror=function(f){e(null,new Error("Error inserting the literal data"+f.target.errorCode))}}},n.onerror=function(s){e(null,new Error("Error retrieving the literal data"+s.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(h,e){var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+h);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.id):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving literal data "+n.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(h,e){var r=that.db.transaction(["components"]).objectStore("components").index("components").get(h);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.cost):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving literal data "+n.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(h){return x.prototype.parseLiteral(h)},PersistentLexicon.prototype.parseUri=function(h){return x.prototype.parseUri(h)},PersistentLexicon.prototype.retrieve=function(h,e){var r,n=this;h===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((r=n.db.transaction(["components"]).objectStore("components").get(h)).onsuccess=function(s){if(null!=s.target.result)if(null!=s.target.result.label){var d="_:"+s.target.result.id;e({token:"blank",value:d})}else null!=s.target.result.uri?e(n.parseUri(s.target.result.value.slice(3,s.target.result.value.length))):null!=s.target.result.literal?e(n.parseLiteral(s.target.result.value.slice(3,s.target.result.value.length))):(console.log(s.target.result),e(null,new Error("Unknown type of component "+s.target.result)));else e(null,null)},r.onerror=function(s){e(null,new Error("Error searching in blanks data "+s.target.errorCode))})},PersistentLexicon.prototype.clear=function(h){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,r=function(){h?.()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=r,e.onerror=r},PersistentLexicon.prototype.unregister=function(h,e,r){var n=this;o.seq(function(s){n._unregisterTerm(h.subject.token,e.subject,s)},function(s){n._unregisterTerm(h.predicate.token,e.predicate,s)},function(s){n._unregisterTerm(h.object.token,e.object,s)},function(s){null!=h.graph?n._unregisterTerm(h.graph.token,e.graph,s):s()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(h,e,r){var n=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===h?e!=this.defaultGraphOid?n.objectStore("components").delete(e).onsuccess=void(n.objectStore("knownGraphs").delete(e).onsuccess=function(){r()}):r():n.objectStore("components").delete(e).onsuccess=function(){r()}},K.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(G,K,ee){var M=G("./utils");PersistentQuadBackend=function(o,x){var h=this;if(0!==arguments){for(var e in M.registerIndexedDB(h),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var n=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[n]=e}h.dbName=o.name||"rdfstorejs";var s=h.indexedDB.open(this.dbName+"_db",1);s.onerror=function(d){x(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},s.onsuccess=function(d){h.db=d.target.result,x(h)},s.onupgradeneeded=function(d){var a=d.target.result.createObjectStore(h.dbName,{keyPath:"SPOG"});M.each(h.indices,function(y){"SPOG"!==y&&a.createIndex(y,y,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(o,x){var h=this;M.each(this.indices,function(r){o[r]=h._genMinIndexKey(o,r)});var e=h.db.transaction([h.dbName],"readwrite");e.oncomplete=function(r){},e.onerror=function(r){x(null,new Error(r.target.statusCode))},e.objectStore(h.dbName).add(o).onsuccess=function(r){x(!0)}},PersistentQuadBackend.prototype.range=function(o,x){var h=this,e=h.db.transaction([h.dbName]).objectStore(h.dbName),r=this._indexForPattern(o),n=this._genMinIndexKey(o,r),s=this._genMaxIndexKey(o,r),d=h.IDBKeyRange.bound(n,s,!1,!1),a=[];("SPOG"===r?e:e.index(r)).openCursor(d).onsuccess=function(y){var l=y.target.result;l?(a.push(l.value),l.continue()):x(a)}},PersistentQuadBackend.prototype.search=function(o,x){var h=this,e=h.db.transaction([h.dbName]).objectStore(h.dbName),r=this._genMinIndexKey(o,"SPOG"),n=e.get(r);n.onerror=function(s){x(null,new Error(s.target.statusCode))},n.onsuccess=function(s){x(null!=s.target.result)}},PersistentQuadBackend.prototype.delete=function(o,x){var h=this,e=h._genMinIndexKey(o,"SPOG"),r=h.db.transaction([h.dbName],"readwrite").objectStore(h.dbName).delete(e);r.onsuccess=function(){x(!0)},r.onerror=function(n){x(null,new Error(n.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(o,x){var h=this.componentOrders[x];return M.map(h,function(e){return"string"==typeof o[e]||null==o[e]?"0":o[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(o,x){for(var h=this.componentOrders[x],e=[],r=0;r<h.length;r++){var n=o[h[r]];e[r]="string"==typeof n?"z":n}return M.map(e,function(s){return""+s}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(o){var x=o.indexKey.sort().join("."),h=this.componentOrdersMap[x];if(null==h)throw new Error("Error, cannot find index for indexKey "+x);return h},PersistentQuadBackend.prototype.clear=function(o){var x,h=this;(x=h.db.transaction([h.dbName],"readwrite").objectStore(h.dbName).clear()).onsuccess=function(){o()},x.onerror=function(){o()}},K.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(G,K,ee){var M=G("./quad_index").QuadIndex,o=G("./utils");QuadBackend=function(x,h){this.indexMap={},this.treeOrder=x.treeOrder,this.indices=x.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;o.eachSeries(this.indices,function(r,n){new M({order:e.treeOrder,componentOrder:e.componentOrders[r]},function(s){e.indexMap[r]=s,n()})},function(){h(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(x){for(var h=x.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var r=QuadBackend.allIndices[e],n=QuadBackend.componentOrders[r],s=0;s<n.length&&!1!==o.include(h,n[s]);s++)if(s==h.length-1)return r;return"SPOG"},QuadBackend.prototype.index=function(x,h){var e=this;o.eachSeries(this.indices,function(r,n){e.indexMap[r].insert(x,function(){n()})},function(){h(!0)})},QuadBackend.prototype.range=function(x,h){var e=this._indexForPattern(x),r=this.indexMap[e];r?.range(x,function(n){h(n)})},QuadBackend.prototype.search=function(x,h){var e=this.indexMap.SPOG;e?.search(x,function(r){h(null!=r)})},QuadBackend.prototype.delete=function(x,h){var e=this;o.eachSeries(this.indices,function(r,n){e.indexMap[r].delete(x,function(){n()})},function(){h(!0)})},QuadBackend.prototype.clear=function(x){var h=this;o.eachSeries(this.indices,function(e,r){new M({order:h.treeOrder,componentOrder:h.componentOrders[e]},function(n){h.indexMap[e]=n,r()})},function(){x(!0)})},K.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(G,K,ee){var M=G("./btree").Tree,o=G("./utils"),x=G("./utils");NodeKey=function(h,e){this.subject=h.subject,this.predicate=h.predicate,this.object=h.object,this.graph=h.graph,this.order=e},NodeKey.prototype.comparator=function(h){for(var e=0;e<this.order.length;e++){var r=this.order[e];if(null==h[r])return 0;if(this[r]<h[r])return-1;if(this[r]>h[r])return 1}return 0},Pattern=function(h){this.subject=h.subject,this.predicate=h.predicate,this.object=h.object,this.graph=h.graph,this.indexKey=[],this.keyComponents={};var e=[],r=[],n=this;o.forEach(["subject","predicate","object","graph"],function(s){"string"==typeof n[s]?(r.push(s),n.keyComponents[s]=null):(e.push(s),n.keyComponents[s]=n[s],n.indexKey.push(s))}),this.order=e.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(h,e){0!=arguments&&(this.componentOrder=h.componentOrder,M.call(this,h.order,function(r){r.comparator=function(n,s){for(var d=0;d<r.componentOrder.length;d++){var a=r.componentOrder[d],y=n[a],l=s[a];if(y<l)return-1;if(y>l)return 1}return 0},r.rangeComparator=function(n,s){for(var d=0;d<r.componentOrder.length;d++){var a=r.componentOrder[d];if(null==s[a]||null==n[a])return 0;if(n[a]<s[a])return-1;if(n[a]>s[a])return 1}return 0},e(r)}))},QuadIndex.prototype=o.create(M.prototype,{constructor:M}),QuadIndex.prototype.insert=function(h,e){M.prototype.insert.call(this,h,null,function(r){e(r)})},QuadIndex.prototype.search=function(h,e){M.prototype.search.call(this,h,function(r){e(r)},!0)},QuadIndex.prototype.range=function(h,e){this._rangeTraverse(this,this.root,h,e)},QuadIndex.prototype._rangeTraverse=function(h,e,r,n){var s=r.key,d=[],a=[e];x.whilst(function(){return a.length>0},function(y){for(var l=a.shift(),f=0;f<l.numberActives&&-1===h.rangeComparator(l.keys[f].key,s);)f++;if(!0===l.isLeaf){for(var c=f;c<l.numberActives&&0===h.rangeComparator(l.keys[c].key,s);)d.push(l.keys[c].key),c++;y()}else h._diskRead(l.children[f],function(E){a.push(E);var _=f;x.whilst(function(){return _<l.numberActives&&0===h.rangeComparator(l.keys[_].key,s)},function(O){d.push(l.keys[_].key),_++,h._diskRead(l.children[_],function(R){a.push(R),O()})},function(){y()})})},function(){n(d)})},K.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(G,K,ee){var M=G("./abstract_query_tree").AbstractQueryTree,o=G("./abstract_query_tree").NonSupportedSparqlFeatureError,x=G("./utils"),h=G("./quad_index"),e=G("./query_plan").QueryPlan,r=G("./query_filters").QueryFilters,n=G("./rdf_model"),s=G("./rdf_loader").RDFLoader,d=G("./graph_callbacks").CallbacksBackend,a=G("./utils"),y=G("./utils");function l(f,c,E){this.name="BindExpressionError",this.bind=c,this.error=E,this.message=f}l.prototype=new Error,l.constructor=l,QueryEngine=function(f){0!=arguments.length&&(this.backend=f.backend,this.lexicon=f.lexicon,this.eventsOnBatchLoad=f.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new M,this.rdfLoader=new s(f.communication),this.callbacksBackend=new d(this),this.customFns=f.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(f){this.customFns=f},QueryEngine.prototype.registerNsInEnvironment=function(f,c){var E=[];null!=f&&null!=f.prefixes&&(E=f.prefixes);var _={};for(var O in this.defaultPrefixes)_[O]=this.defaultPrefixes[O];for(var R=0;R<E.length;R++){var A=E[R];"prefix"===A.token&&(_[A.prefix]=A.local)}c.namespaces=_,null!=f&&f.base&&"object"==typeof f.base?c.base=f.base.value:c.base=null},QueryEngine.prototype.applyModifier=function(f,c){if("DISTINCT"==f){for(var E={},_=[],O=0;O<c.length;O++){var R=c[O],A="";for(var v in R){var F=R[v];null==F?A=A+v+"null":"literal"==F.token?(null!=F.value&&(A+=F.value),null!=F.lang&&(A+=F.lang),null!=F.type&&(A+=F.type)):A=F.value?A+v+F.value:A+v+F}null==E[A]&&(_.push(R),E[A]=!0)}return _}return c},QueryEngine.prototype.applyLimitOffset=function(f,c,E){return null==c&&null==f?E:(null==f&&(f=0),c=null==c?E.length:f+c,E.slice(f,c))},QueryEngine.prototype.applySingleOrderBy=function(f,c,E,_,O){var R=[],A=this;a.eachSeries(f,function(v,F){r.collect(v.expression,[c],E,_,A,function(j){R.push(j[0].value),F()})},function(){O({binding:c,value:R})})},QueryEngine.prototype.applyOrderBy=function(f,c,E,_,O){var R=this,A=[];null!=f&&f.length>0?a.eachSeries(c,function(v,F){R.applySingleOrderBy(f,v,E,_,function(j){A.push(j),F()})},function(){A.sort(function(j,H){return R.compareFilteredBindings(j,H,f,_)});for(var v=[],F=0;F<A.length;F++)v.push(A[F].binding);O(v)}):O(c)},QueryEngine.prototype.compareFilteredBindings=function(f,c,E,_){for(var O=0;;){if(O==f.value.length)return 0;var R,A=E[O].direction;if(null!=f.value[O]||null!=c.value[O]){if(null==f.value[O])R={value:!1};else if(null==c.value[O])R={value:!0};else{if("blank"===f.value[O].token&&"blank"===c.value[O].token){O++;continue}if("blank"===f.value[O].token)R={value:!1};else if("blank"===c.value[O].token)R={value:!0};else if("uri"===f.value[O].token&&"uri"===c.value[O].token){if(1==r.runEqualityFunction(f.value[O],c.value[O],[],this,_).value){O++;continue}R=r.runTotalGtFunction(f.value[O],c.value[O],[])}else if("uri"===f.value[O].token)R={value:!1};else if("uri"===c.value[O].token)R={value:!0};else if("literal"===f.value[O].token&&"literal"===c.value[O].token&&null==f.value[O].type&&null==c.value[O].type){if(1==r.runEqualityFunction(f.value[O],c.value[O],[],this,_).value){O++;continue}R=r.runTotalGtFunction(f.value[O],c.value[O],[])}else if("literal"===f.value[O].token&&null==f.value[O].type)R={value:!1};else if("literal"===c.value[O].token&&null==c.value[O].type)R={value:!0};else{if(1==r.runEqualityFunction(f.value[O],c.value[O],[],this,_).value){O++;continue}R=r.runTotalGtFunction(f.value[O],c.value[O],[])}}return 1==R.value?"ASC"===A?1:-1:"ASC"===A?-1:1}O++}},QueryEngine.prototype.removeDefaultGraphBindings=function(f,c){for(var E=[],_={},O=0;O<c.named.length;O++)_[c.named[O].oid]=!0;for(O=0;O<c.implicit.length;O++)null==_[c.implicit[O].oid]&&E.push(c.implicit[O].oid);var R=[];for(O=0;O<f.length;O++){var A=f[O],v=!1;for(var F in A){for(var j=0;j<_.length;j++)if(A[F]===_[j]){v=!0;break}if(v)break}v||R.push(A)}return R},QueryEngine.prototype.aggregateBindings=function(f,c,E,_,O){this.copyDenormalizedBindings(c,_.outCache,function(R){for(var A={},v=0;v<f.length;v++){var F=r.runAggregator(f[v],R,this,E,_);f[v].alias?A[f[v].alias.value]=F:A[f[v].value.value]=F}O(A)})},QueryEngine.prototype.projectBindings=function(f,c,E){if("*"===f[0].kind)return c;for(var _=[],O=0;O<c.length;O++){for(var R=c[O],A={},v=!0,F=0;F<f.length;F++)if("variable"==f[F].token&&"aliased"!=f[F].kind)A[f[F].value.value]=R[f[F].value.value];else if("variable"==f[F].token&&"aliased"==f[F].kind){var j=r.runFilter(f[F].expression,R,this,E,{blanks:{},outCache:{}});if(r.isEbvError(j)){v=!1;break}A[f[F].alias.value]=j}!0===v&&_.push(A)}return _},QueryEngine.prototype.resolveNsInEnvironment=function(f,c){return c.namespaces[f]},QueryEngine.prototype.normalizeTerm=function(f,c,E,_){if("uri"===f.token){var O=x.lexicalFormBaseUri(f,c);null==O?_(null):E?this.lexicon.registerUri(O,_):this.lexicon.resolveUri(O,_)}else if("literal"===f.token){var R=x.lexicalFormLiteral(f,c);E?this.lexicon.registerLiteral(R,_):this.lexicon.resolveLiteral(R,_)}else if("blank"===f.token){var A=f.value,v=c.blanks[A];null!=v?_(v):E?this.lexicon.registerBlank(function(F){c.blanks[A]=F,_(F)}):this.lexicon.resolveBlank(function(F){c.blanks[A]=F,_(F)})}else"var"===f.token?_(f.value):_(null)},QueryEngine.prototype.normalizeDatasets=function(f,c,E){var _=this;a.eachSeries(f,function(O,R){O.value===_.lexicon.defaultGraphUri?(O.oid=_.lexicon.defaultGraphOid,R()):_.normalizeTerm(O,c,!1,function(A){null!=A&&(O.oid=A),R()})},function(){E(!0)})},QueryEngine.prototype.normalizeQuad=function(f,c,E,_){var O=null,R=null,A=null,v=null,F=this,j=!1;a.seq(function(H){if(null==f.graph||f.graph.value===F.lexicon.defaultGraphUri)v=0,H();else{var P=x.lexicalFormBaseUri(f.graph,c);F.normalizeTerm(f.graph,c,E,function(X){null!=X?(v=X,!0===E&&"var"!=f.graph.token?F.lexicon.registerGraph(X,P,function(){H()}):H()):(j=!0,H())})}},function(H){!1===j?F.normalizeTerm(f.subject,c,E,function(P){null!=P?(O=P,H()):(j=!0,H())}):H()},function(H){!1===j?F.normalizeTerm(f.predicate,c,E,function(P){null!=P?(R=P,H()):(j=!0,H())}):H()},function(H){!1===j?F.normalizeTerm(f.object,c,E,function(P){null!=P?(A=P,H()):(j=!0,H())}):H()})(function(){_(!0===j?null:{subject:O,predicate:R,object:A,graph:v})})},QueryEngine.prototype.denormalizeBindingsList=function(f,c,E){var _=this,O=[];a.eachSeries(f,function(R,A){_.denormalizeBindings(R,c,function(v){O.push(v),A()})},function(){E(O)})},QueryEngine.prototype.copyDenormalizedBindings=function(f,c,E){var _=this,O=[];a.eachSeries(f,function(R,A){var v={},F=y.keys(R);a.eachSeries(F,function(j,H){var P=R[j];if(null==P)v[j]=null,H();else if("object"==typeof P)v[j]=P,H();else{var X=c[P];null!=X?(v[j]=X,H()):_.lexicon.retrieve(P,function(Y){c[P]=Y,v[j]=Y,H()})}},function(){O.push(v),A()})},function(){E(O)})},QueryEngine.prototype.denormalizeBindings=function(f,c,E){var _=y.keys(f),O=c.outCache,R=this;a.eachSeries(_,function(A,v){var F=f[A];null==F?(f[A]=null,v()):"object"==typeof F?v():null!=O[F]?(f[A]=O[F],v()):R.lexicon.retrieve(F,function(j){f[A]=j,"blank"===j.token&&(c.blanks[j.value]=F),v()})},function(){E(f)})},QueryEngine.prototype.execute=function(f,c,E,_){f=x.normalizeUnicodeLiterals(f);var O=this.abstractQueryTree.parseQueryString(f);if(null==O)c(!1,"Error parsing query string");else if("query"===O.token&&"update"==O.kind){this.callbacksBackend.startGraphModification();var R=this;this.executeUpdate(O,function(A,v){R.lexicon.updateAfterWrite&&R.lexicon.updateAfterWrite(),A?(R.callbacksBackend.cancelGraphModification(),c(A,v)):R.callbacksBackend.endGraphModification(function(){c(A,v)})})}else"query"===O.token&&"query"==O.kind&&this.executeQuery(O,c,E,_)},QueryEngine.prototype.executeQuery=function(f,c,E,_){var O=f.prologue,R=f.units,A=this,v={blanks:{},outCache:{}};this.registerNsInEnvironment(O,v);var F=A.abstractQueryTree.parseExecutableUnit(R[0]);"select"===F.kind?this.executeSelect(F,v,E,_,function(j,H){null==j?"object"==typeof H&&!0===H.denorm?c(null,H.bindings):A.denormalizeBindingsList(H,v,function(P){c(null,P)}):c(j)}):"ask"===F.kind?(F.projection=[{token:"variable",kind:"*"}],this.executeSelect(F,v,E,_,function(j,H){null==j?H.length>0?c(null,!0):c(null,!1):c(j)})):"construct"===F.kind&&(F.projection=[{token:"variable",kind:"*"}],A=this,this.executeSelect(F,v,E,_,function(j,H){null==j?A.denormalizeBindingsList(H,v,function(P){if(null!=P){var X=new n.Graph;null==F.template&&(F.template={triplesContext:F.pattern});for(var Y=1,ie=[],fe=0;fe<P.length;fe++){for(var oe=P[fe],le=0;le<ie.length;le++)delete ie[le].valuetmp;for(le=0;le<F.template.triplesContext.length;le++){for(var V=["subject","predicate","object"],$=F.template.triplesContext[le],ne=0;ne<V.length;ne++){var pe=V[ne];if("blank"===$[pe].token&&(!$[pe].valuetmp||null==$[pe].valuetmp)){var Fe="_:b"+Y;Y++,$[pe].valuetmp=Fe,ie.push($[pe])}}var ve=n.buildRDFResource($.subject,oe,A,v),ce=(ne=n.buildRDFResource($.predicate,oe,A,v),n.buildRDFResource($.object,oe,A,v));if(null!=ve&&null!=ne&&null!=ce){var _e=new n.Triple(ve,ne,ce);X.add(_e)}}}c(null,X)}else c(new Error("Error denormalizing bindings."))}):c(j)}))},QueryEngine.prototype.executeSelect=function(f,c,E,_,O){if("select"===f.kind||"ask"===f.kind||"construct"===f.kind||"modify"===f.kind){var R=f.projection,A=f.dataset,v=f.modifier,F=f.limit,j=f.offset,H=f.order,P=this;null==E&&null==_||(A.implicit=E||[],A.named=_||[]),null!=A.implicit&&0===A.implicit.length&&null!=A.named&&0===A.named.length&&A.implicit.push(this.lexicon.defaultGraphUriTerm),P.normalizeDatasets(A.implicit.concat(A.named),c,function(){try{P.executeSelectUnit(R,A,f.pattern,c,function(X){if(null!=X){if(null!=f.group&&""===f.group){for(var Y=!1,ie=0;ie<f.projection.length;ie++)if(null!=f.projection[ie].expression&&"aggregate"===f.projection[ie].expression.expressionType){Y=!0;break}!0===Y&&(f.group="singleGroup")}f.group&&""!=f.group?P.checkGroupSemantics(f.group,R)?P.groupSolution(X,f.group,A,c,function(fe){var oe=[];a.eachSeries(fe,function(le,V){P.aggregateBindings(R,le,A,c,function($){oe.push($),V()})},function(){O(null,{bindings:oe,denorm:!0})})}):O(new Error("Incompatible Group and Projection variables")):P.applyOrderBy(H,X,A,c,function(fe){var oe=P.projectBindings(R,fe,A),le=P.applyModifier(v,oe),V=P.applyLimitOffset(j,F,le),$=P.removeDefaultGraphBindings(V,A);O(null,$)})}else O(new Error("Error executing SELECT query."))})}catch(X){O(X)}})}else O(new Error("Cannot execute "+f.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(f,c,E,_,O){var R=[],A=[],v=!1,F=this;"singleGroup"===c?O([f]):a.eachSeries(f,function(j,H){var P=!0;a.eachSeries(c,function(X,Y){var ie=null;if("var"===X.token)ie=X.value,0==v&&R.push(ie),Y();else if("aliased_expression"===X.token){if(ie=X.alias.value,0==v&&R.push(ie),"var"===X.expression.primaryexpression)j[X.alias.value]=j[X.expression.value.value];else{var fe=F.copyDenormalizedBindings([j],_.outCache),oe=r.runFilter(X.expression,fe[0],F,E,_);r.isEbvError(oe)?P=!1:(null!=oe.value&&(oe.value=""+oe.value),j[X.alias.value]=oe)}Y()}else F.copyDenormalizedBindings([j],_.outCache,function(le){var V=r.runFilter(X,le[0],F,_);r.isEbvError(V)?P=!1:(j["groupCondition"+env._i]=V,ie="groupCondition"+env._i,0==v&&R.push(ie)),Y()})},function(){0==v&&(v=!0),!0===P&&A.push(j),H()})},function(){for(var j={},H={},P=0;P<A.length;P++){for(var X=A[P],Y="",ie=0;ie<R.length;ie++){var fe=X[R[ie]];Y+="object"==typeof fe?fe.value:fe}null==j[Y]?(H[Y]=0,j[Y]=[X]):j[Y].push(X)}var oe=[];for(var le in j)oe.push(j[le]);O(oe)})},QueryEngine.prototype.executeSelectUnit=function(f,c,E,_,O){if("BGP"===E.kind)this.executeAndBGP(f,c,E,_,O);else if("UNION"===E.kind)this.executeUNION(f,c,E.value,_,O);else if("JOIN"===E.kind)this.executeJOIN(f,c,E,_,O);else if("LEFT_JOIN"===E.kind)this.executeLEFT_JOIN(f,c,E,_,O);else if("FILTER"===E.kind){var R=this;this.executeSelectUnit(f,c,E.value,_,function(A){null!=A?r.checkFilters(E,A,!1,c,_,R,O):O([])})}else{if("EMPTY_PATTERN"!==E.kind)throw new o(E.kind);O([])}},QueryEngine.prototype.executeUNION=function(f,c,E,_,O){var R,A,v=E[0],F=E[1],j=null;if(2!=E.length)throw"SPARQL algebra UNION with more than two components";var H=this;a.seq(function(P){try{H.executeSelectUnit(f,c,v,_,function(X){R=X,P()})}catch(X){j=X,P()}},function(P){if(null==j)try{H.executeSelectUnit(f,c,F,_,function(X){A=X,P()})}catch(X){j=X,P()}else P()})(function(){if(null!=j)O(j);else{var P=e.unionBindings(R,A);H.runBinds(E.binds,P,c,_,function(X,Y){if(null!=X)throw new l("Error processing bind expressions",E.binds,X);r.checkFilters(E,Y,!1,c,_,H,O)})}})},QueryEngine.prototype.executeAndBGP=function(f,c,E,_,O){var R=this;e.executeAndBGPsDPSize(E.value,c,this,_,function(A){null!=A?R.runBinds(E.binds,A,c,_,function(v,F){if(null!=v)throw new l("Error processing bind expressions",E.binds,v);r.checkFilters(E,F,!1,c,_,R,O)}):O(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(f,c,E,_,O){var R=E.lvalue,A=E.rvalue;if("EMPTY_PATTERN"===R.kind)this.executeSelectUnit(f,c,A,_,O);else{var v,F,j=null,H=null,P=null,X=this;a.seq(function(Y){try{X.executeSelectUnit(f,c,R,_,function(ie){j=ie,Y()})}catch(ie){P=ie,Y()}},function(Y){if(null!=P)Y();else try{X.executeSelectUnit(f,c,A,_,function(ie){H=ie,Y()})}catch(ie){P=ie,Y()}})(function(){if(null!=P)O(P);else{var Y=e.leftOuterJoinBindings(j,H);X.runBinds(E.binds,Y,c,_,function(ie,fe){if(null!=ie)throw new l("Error processing bind expressions",E.binds,ie);r.checkFilters(E,Y,!0,c,_,X,function(oe){if(j.length>1&&H.length>1){var le=[],V={};for(var $ in j[0])V[$]=!0;for($ in H[0])1!=V[$]&&le.push($);v=[],F={};for(var ne=0;ne<oe.length;ne++)if(!0===oe[ne].__nullify__){for(var pe=0;pe<le.length;pe++)oe[ne].bindings[le[pe]]=null;var Fe=[],ve=[];for(var $ in oe[ne].bindings)null!=oe[ne].bindings[$]&&(Fe.push($+oe[ne].bindings[$]),Fe.sort(),ve.push(Fe.join("")));if(null==F[Fe.join("")]){for(pe=0;pe<ve.length;pe++)F[ve[pe]]=!0;v.push(oe[ne].bindings)}}else for(var $ in v.push(oe[ne]),Fe=[],ve=[],oe[ne])Fe.push($+oe[ne][$]),Fe.sort(),F[Fe.join("")]=!0;O(v)}else O(oe)})})}})}},QueryEngine.prototype.executeJOIN=function(f,c,E,_,O){var R=E.lvalue,A=E.rvalue,v=null,F=null,j=null,H=this;a.seq(function(P){try{H.executeSelectUnit(f,c,R,_,function(X){v=X,P()})}catch(X){j=X,P()}},function(P){if(null!=j)P();else try{H.executeSelectUnit(f,c,A,_,function(X){F=X,P()})}catch(X){j=X,P()}})(function(){var P=null;if(null!=j)O(j);else if(0===v.length||0===F.length)O([]);else{var X={},Y=[];for(var ie in v[0])X[ie]=!1;for(var ie in F[0])!1===X[ie]&&Y.push(ie);P=0==Y.length||H.abstractQueryTree.treeWithUnion(R)||H.abstractQueryTree.treeWithUnion(A)?e.joinBindings(v,F):e.joinBindings2(Y,v,F),H.runBinds(E.binds,P,c,_,function(fe,oe){if(null!=fe)throw new l("Error processing bind expressions",E.binds,fe);r.checkFilters(E,oe,!1,c,_,H,O)})}})},QueryEngine.prototype.rangeQuery=function(f,c,E){var _=this;_.normalizeQuad(f,c,!1,function(O){null!=O?_.backend.range(new h.Pattern(O),function(R){null==R||0==R.length?E([]):E(R)}):E(null)})},QueryEngine.prototype.executeUpdate=function(f,c){var E=f.prologue,_=f.units,O=this,R={blanks:{},outCache:{}};this.registerNsInEnvironment(E,R);for(var A=0;A<_.length;A++){var v=O.abstractQueryTree.parseExecutableUnit(_[A]);if("insertdata"===v.kind){var F=null;a.eachSeries(v.quads,function(H,P){null===F?O._executeQuadInsert(H,R,function(X){null!=X&&(F=X),P()}):P()},function(){null===F?c(null,!0):c(F)})}else if("deletedata"===v.kind)F=null,a.eachSeries(v.quads,function(H,P){null===F?O._executeQuadDelete(H,R,function(X){null!=X&&(F=X),P()}):P()},function(){null===F?c(null,!0):c(F)});else if("modify"===v.kind)this._executeModifyQuery(v,R,c);else if("create"===v.kind)c(!0);else if("load"===v.kind){var j={uri:x.lexicalFormBaseUri(v.sourceGraph,R)};null!=v.destinyGraph&&(j={uri:x.lexicalFormBaseUri(v.destinyGraph,R)}),O=this,this.rdfLoader.load(v.sourceGraph.value,j,function(H,P){H?c(new Error("error batch loading quads")):O.batchLoad(P,function(X){null!==X?c(null,X):c(new Error("Error batch loading quads"))})})}else if("drop"===v.kind)this._executeClearGraph(v.destinyGraph,R,c);else{if("clear"!==v.kind)throw new Error("not supported execution unit");this._executeClearGraph(v.destinyGraph,R,c)}}},QueryEngine.prototype.batchLoad=function(f,c){var E=0,_={},O=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),a.eachSeries(f,function(R,A){var v={};a.eachSeries(["subject","predicate","object","graph"],function(F,j){!function(H,P,X,Y){var ie;if(H[P].uri||"uri"===H[P].token){var fe=H[P].uri||H[P].value;O.lexicon.registerUri(fe,function(oe){var le=function(){null!=H[P].uri&&(H[P]={token:"uri",value:H[P].uri},delete H[P].uri),X[P]=oe,Y()};"graph"===P?O.lexicon.registerGraph(oe,fe,function(){le()}):le()})}else H[P].literal||"literal"===H[P].token?O.lexicon.registerLiteral(H[P].literal||H[P].value,function(oe){null!=H[P].literal&&(H[P]=O.lexicon.parseLiteral(H[P].literal),delete H[P].literal),X[P]=oe,Y()}):null==(ie=_[H[P].blank||H[P].value])?O.lexicon.registerBlank(function(oe){_[H[P].blank||H[P].value]=oe,null==H[P].token&&(H[P].token="blank",H[P].value=H[P].blank,delete H[P].blank),X[P]=oe,Y()}):(null==H[P].token&&(H[P].token="blank",H[P].value=H[P].blank,delete H[P].blank),X[P]=ie,Y())}(R,F,v,j)},function(){var F=R;R=v;var j=new h.NodeKey(R);O.backend.search(j,function(H){H?A():O.backend.index(j,function(P){P&&(O.eventsOnBatchLoad&&O.callbacksBackend.nextGraphModification(d.added,[F,R]),E+=1),A()})})})},function(){null!=O.lexicon.updateAfterWrite&&O.lexicon.updateAfterWrite();var R=function(){c(E)};O.eventsOnBatchLoad?O.callbacksBackend.endGraphModification(R()):R()})},QueryEngine.prototype._executeModifyQuery=function(f,c,E){var _=this,O=!0,R=new Error("Error executing modify query"),A=null,v=["subject","predicate","object","graph"];f.insert=null==f.insert?[]:f.insert,f.delete=null==f.delete?[]:f.delete,a.seq(function(F){var j=[],H=[];if(null!=f.with&&j.push(f.with),null!=f.using){H=[];for(var P=0;P<f.using.length;P++){var X=f.using[P];"named"===X.kind?H.push(X.uri):j.push(X.uri)}}f.dataset={},f.projection=[{token:"variable",kind:"*"}],_.executeSelect(f,c,j,H,function(Y,ie){if(Y)return R=Y,O=!1,F();_.denormalizeBindingsList(ie,c,function(fe){null!=fe?A=fe:(R=new Error("Error denormalizing bindings list"),O=!1),F()})})},function(F){var j=f.with;if(O){for(var H=[],P=0;P<f.delete.length;P++)for(var X=f.delete[P],Y=0;Y<A.length;Y++){for(var ie={},fe=A[Y],oe=0;oe<v.length;oe++){var le=v[oe];"graph"==le&&null==X[le]?ie.graph=j:"var"===X[le].token?ie[le]=fe[X[le].value]:ie[le]=X[le]}H.push(ie)}a.eachSeries(H,function(V,$){_._executeQuadDelete(V,c,function(){$()})},function(){F()})}else F()},function(F){var j=f.with;if(O){for(var H=[],P=0;P<f.insert.length;P++)for(var X=f.insert[P],Y=0;Y<A.length;Y++){for(var ie={},fe=A[Y],oe=0;oe<v.length;oe++){var le=v[oe];"graph"==le&&null==X[le]?ie.graph=j:"var"===X[le].token?ie[le]=fe[X[le].value]:ie[le]=X[le]}H.push(ie)}a.eachSeries(H,function(V,$){_._executeQuadInsert(V,c,function(){$()})},function(){F()})}else F()})(function(){E(O?null:R)})},QueryEngine.prototype._executeQuadInsert=function(f,c,E){var _,O=this,R=!1,A=null;a.seq(function(v){O.normalizeQuad(f,c,!0,function(F){null!=F?_=F:(R=!0,A="Error normalizing quad."),v()})},function(v){if(!1===R){var F=new h.NodeKey(_);O.backend.search(F,function(j){!0===j?v():O.backend.index(F,function(){O.callbacksBackend.nextGraphModification(d.added,[f,_]),v()})})}else v()})(function(){R?E(new Error(A)):E(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(f,c,E){var _,O,R,A=this,v=!1;a.seq(function(F){A.normalizeQuad(f,c,!0,function(j){null!=j?_=j:(v=!0,O="Error normalizing quad."),F()})},function(F){!1===v?(R=new h.NodeKey(_),A.backend.delete(R,function(){F()})):F()},function(F){!1===v?A.lexicon.unregister(f,R,function(){A.callbacksBackend.nextGraphModification(d.deleted,[f,_]),F()}):F()})(function(){v?E(new Error(O)):E(null,!0)})},QueryEngine.prototype._executeClearGraph=function(f,c,E){var _=this;if("default"===f)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",E);else if("named"===f)_.lexicon.registeredGraphs(!0,function(R){if(null!=R){var A=!1;a.eachSeries(R,function(v,F){A?F():_.execute("DELETE { GRAPH <"+v+"> { ?s ?p ?o } } WHERE { GRAPH <"+v+"> { ?s ?p ?o } }",function(j,H){j?(A=j,F()):_.lexicon.resolveUri(v,function(P){-1!=P?_.lexicon.knownGraphs.delete(P,function(){F()}):(A="Cannot find graph "+v+" to clear it",F())})})},function(){E(!A)})}else E(!1,"Error deleting named graphs")});else if("all"===f)_=this,this.execute("CLEAR DEFAULT",function(R,A){R?E(!1,A):_.execute("CLEAR NAMED",E)});else if("uri"==f.token){var O=x.lexicalFormBaseUri(f,c);null!=O?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+O+"> { ?s ?p ?o } } WHERE { GRAPH <"+O+"> { ?s ?p ?o } }",function(R){_.callbacksBackend.ongoingModification=!1,E(R)})):E(!1,"wrong graph URI")}else E(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(f,c){if("singleGroup"===f)return!0;for(var E={},_=0;_<f.length;_++){var O=f[_];"var"===O.token?E[O.value]=!0:"aliased_expression"===O.token&&(E[O.alias.value]=!0)}for(_=0;_<c.length;_++){var R=c[_];if("var"===R.kind){if(null==E[R.value.value])return!1}else if("aliased"===R.kind&&R.expression&&"var"===R.expression.primaryexpression&&null==E[R.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(f,c,E,_,O){var R=this,A=c;null!=f&&f.length>0?R.copyDenormalizedBindings(c,_.outCache,function(v){for(var F=0;F<c.length;F++)for(var j=0;j<f.length;j++){var H=f[j],P=v[F],X=r.runFilter(H.expression,P,R,E,_);r.isEbvError(X)?O(X):A[F][H.as.value]=X}O(null,c)}):O(null,c)},QueryEngine.prototype.computeCosts=function(f,c,E){for(var _=0;_<f.length;_++)f[_]._cost=this.quadCost(f[_],c);E(f)},QueryEngine.prototype.quadCost=function(f,c){return 1},QueryEngine.prototype.registerDefaultNamespace=function(f,c){this.defaultPrefixes[f]=c},K.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(G,K,ee){var M=G("./utils"),o=M,x=G("./utils");QueryFilters={};var h="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,r,n,s,d,a,y){var l=[];e.filter&&"function"!=typeof e.filter&&(l=e.filter);var f=[];if(null==l||0===l.length||null!=e.length)return y(r);QueryFilters.preprocessExistentialFilters(l,r,a,s,d,function(c){x.eachSeries(c,function(E,_){QueryFilters.run(E.value,r,n,s,d,a,function(O){for(var R=[],A=0;A<O.length;A++){var v=O[A];null!=v.__nullify__?f.push(v):R.push(v)}r=R,_()})},function(){y(r.concat(f))})})},QueryFilters.preprocessExistentialFilters=function(e,r,n,s,d,a){var y=[];x.eachSeries(e,function(l,f){if("builtincall"!==l.value.expressionType||"exists"!==l.value.builtincall&&"notexists"!==l.value.builtincall)if("conditionalor"===l.value.expressionType||"conditionaland"===l.value.expressionType){var c=o.map(l.value.operands,function(R){return{value:R}});QueryFilters.preprocessExistentialFilters(c,r,n,s,d,function(R){l.value.operands=R.map(function(A){return A.value}),y.push(l),f()})}else"multiplicativeexpression"===l.value.expressionType?(c=o.map(l.value.factors,function(R){return{value:R}}),QueryFilters.preprocessExistentialFilters(c,r,n,s,d,function(R){l.value.factors=R.map(function(A){return A.value}),y.push(l),f()})):"additiveexpression"===l.value.expressionType?(c=o.map(l.value.summands,function(R){return{value:R}}),QueryFilters.preprocessExistentialFilters(c,r,n,s,d,function(R){l.value.summands=R.map(function(A){return A.value}),y.push(l),f()})):"relationalexpression"===l.value.expressionType?(c=[{value:l.value.op1},{value:l.value.op2}],QueryFilters.preprocessExistentialFilters(c,r,n,s,d,function(R){l.value.op1=R[0].value,l.value.op2=R[1].value,y.push(l),f()})):"irireforfunction"!==l.value.expressionType&&"custom"!==l.value.expressionType||null==l.value.args?(y.push(l),f()):(c=o.map(l.value.args,function(R){return{value:R}}),QueryFilters.preprocessExistentialFilters(c,r,n,s,d,function(R){l.value.args=R.map(function(A){return A.value}),y.push(l),f()}));else{var E=l.value.builtincall,_=l.value.args,O={};n.copyDenormalizedBindings(r,d.outCache,function(R){x.eachSeries(R,function(A,v){var F=o.clone(_[0],!0),j=n.abstractQueryTree.parseSelect({pattern:F},A);j=n.abstractQueryTree.bind(j.pattern,A),n.executeSelectUnit([{kind:"*"}],s,j,d,function(H){var P;P="exists"===E?QueryFilters.ebvBoolean(0!==H.length):QueryFilters.ebvBoolean(0===H.length);var X=[];for(var Y in A)X.push(JSON.stringify(A[Y]));X=X.sort().join(""),O[X]=P,v()})},function(){l.value.origArgs=l.value.args,l.value.args=O,y.push(l),f()})})}},function(){a(y)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var r=e.expressionType;if("relationalexpression"==r){var n=e.op1,s=e.op2;return QueryFilters.boundVars(n)+QueryFilters.boundVars(s)}if("conditionalor"==r||"conditionaland"==r){for(var d=[],a=0;a<e.operands;a++)d=d.concat(QueryFilters.boundVars(e.operands[a]));return d}if("builtincall"==r){if(null==e.args)return[];var y=[];for(a=0;a<e.args.length;a++)y=y.concat(QueryFilters.boundVars(e.args[a]));return y}if("multiplicativeexpression"==r){y=QueryFilters.boundVars(e.factor);for(a=0;a<e.factors.length;a++)y=y.concat(QueryFilters.boundVars(e.factors[a].expression));return y}if("additiveexpression"==r){for(y=QueryFilters.boundVars(e.summand),a=0;a<e.summands.length;a++)y=y.concat(QueryFilters.boundVars(e.summands[a].expression));return y}return"regex"==r?(y=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==r?QueryFilters.boundVars(e.expression):"atomic"==r?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,r,n,s,d,a,y){a.copyDenormalizedBindings(r,d.outCache,function(l){for(var f=[],c=0;c<r.length;c++){var E=l[c],_=QueryFilters.runFilter(e,E,a,s,d);if(_=QueryFilters.ebv(_),QueryFilters.isEbvError(_)){if(n){var O={__nullify__:!0,bindings:r[c]};f.push(O)}}else!0===_?f.push(r[c]):n&&(O={__nullify__:!0,bindings:r[c]},f.push(O))}y(f)})},QueryFilters.collect=function(e,r,n,s,d,a){d.copyDenormalizedBindings(r,s.outCache,function(y){for(var l=[],f=0;f<y.length;f++){var c=y[f],E=QueryFilters.runFilter(e,c,d,n,s);l.push({binding:r[f],value:E})}return a(l)})},QueryFilters.runDistinct=function(e,r){},QueryFilters.runAggregator=function(e,r,n,s,d){if(null==r||0===r.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return r[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return r[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var a=null,y=0;y<r.length;y++){var l=r[y],f=QueryFilters.runFilter(e.expression.expression,l,n,s,d);QueryFilters.isEbvError(f)||(null===a||!0===QueryFilters.runLtFunction(a,f).value)&&(a=f)}return null===a?QueryFilters.ebvError():a}if("min"===e.expression.aggregateType){var c=null;for(y=0;y<r.length;y++)l=r[y],f=QueryFilters.runFilter(e.expression.expression,l,n,s,d),QueryFilters.isEbvError(f)||(null===c||!0===QueryFilters.runGtFunction(c,f).value)&&(c=f);return null===c?QueryFilters.ebvError():c}if("count"===e.expression.aggregateType){var E={},_=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(y=0;y<r.length;y++)l=r[y],null==E[A=M.hashTerm(l)]&&(E[A]=!0,_++);else _=r.length;else for(y=0;y<r.length;y++)l=r[y],f=QueryFilters.runFilter(e.expression.expression,l,n,s,d),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=M.hashTerm(f)]&&(E[A]=!0,_++):_++);return{token:"literal",type:h+"integer",value:""+_}}if("avg"===e.expression.aggregateType){E={};var O={token:"literal",type:h+"integer",value:"0"};for(_=0,y=0;y<r.length;y++)l=r[y],f=QueryFilters.runFilter(e.expression.expression,l,n,s,d),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=M.hashTerm(f)]&&(E[A]=!0,QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f),_++)):QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f),_++));var R=QueryFilters.runDivFunction(O,{token:"literal",type:h+"integer",value:""+_});return R.value=""+R.value,R}if("sum"===e.expression.aggregateType){for(E={},O={token:"literal",type:h+"integer",value:"0"},y=0;y<r.length;y++){var A;l=r[y],f=QueryFilters.runFilter(e.expression.expression,l,n,s,d),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=M.hashTerm(f)]&&(E[A]=!0,QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f))):QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f)))}return O.value=""+O.value,O}return QueryFilters.runFilter(aggregate.expression,r[0],s,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,r,n,s,d){if(null!=e.expressionType){var a=e.expressionType;if("relationalexpression"==a){var y=QueryFilters.runFilter(e.op1,r,n,s,d),l=QueryFilters.runFilter(e.op2,r,n,s,d);return QueryFilters.runRelationalFilter(e,y,l,r,n,s,d)}if("conditionalor"==a)return QueryFilters.runOrFunction(e,r,n,s,d);if("conditionaland"==a)return QueryFilters.runAndFunction(e,r,n,s,d);if("additiveexpression"==a)return QueryFilters.runAddition(e.summand,e.summands,r,n,s,d);if("builtincall"==a)return QueryFilters.runBuiltInCall(e.builtincall,e.args,r,n,s,d);if("multiplicativeexpression"==a)return QueryFilters.runMultiplication(e.factor,e.factors,r,n,s,d);if("unaryexpression"==a)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,r,n,s,d);if("irireforfunction"==a)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,r,n,s,d);if("regex"==a)return QueryFilters.runRegex(e.text,e.pattern,e.flags,r,n,s,d);if("custom"==a)return QueryFilters.runBuiltInCall(e.name,e.args,r,n,s,d);if("atomic"==a)return"var"==e.primaryexpression?r[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=M.lexicalFormBaseUri(e.value.type,d)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,r,n,s){return"literal"===e.token&&"literal"===r.token?e.lang==r.lang&&e.type==r.type&&e.value==r.value||(null!=e.type&&null!=r.type||QueryFilters.isSimpleLiteral(e)&&null!=r.type||!(!QueryFilters.isSimpleLiteral(r)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===r.token?M.lexicalFormBaseUri(e,s)==M.lexicalFormBaseUri(r,s):"blank"===e.token&&"blank"===r.token&&e.value==r.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==h+"integer"||e.type==h+"decimal"||e.type==h+"double"||e.type==h+"nonPositiveInteger"||e.type==h+"negativeInteger"||e.type==h+"long"||e.type==h+"int"||e.type==h+"short"||e.type==h+"byte"||e.type==h+"nonNegativeInteger"||e.type==h+"unsignedLong"||e.type==h+"unsignedInt"||e.type==h+"unsignedShort"||e.type==h+"unsignedByte"||e.type==h+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==h+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==h+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==h+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==h+"integer"||e.type==h+"decimal"||e.type==h+"float"||e.type==h+"double"||e.type==h+"nonPositiveInteger"||e.type==h+"negativeInteger"||e.type==h+"long"||e.type==h+"int"||e.type==h+"short"||e.type==h+"byte"||e.type==h+"nonNegativeInteger"||e.type==h+"unsignedLong"||e.type==h+"unsignedInt"||e.type==h+"unsignedShort"||e.type==h+"unsignedByte"||e.type==h+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,r){return!(!r||"literal"!=r.token)&&r.type==h+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==h+"integer"||e.type==h+"decimal"||e.type==h+"double"||e.type==h+"nonPositiveInteger"||e.type==h+"negativeInteger"||e.type==h+"long"||e.type==h+"int"||e.type==h+"short"||e.type==h+"byte"||e.type==h+"nonNegativeInteger"||e.type==h+"unsignedLong"||e.type==h+"unsignedInt"||e.type==h+"unsignedShort"||e.type==h+"unsignedByte"||e.type==h+"positiveInteger"){var r=parseFloat(e.value);return!isNaN(r)&&0!=parseFloat(e.value)}return e.type===h+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===h+"string"?""!=e.value:e.type===h+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:h+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:h+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,r,n,s,d,a,y){var l=e.operator;if("="===l)return QueryFilters.runEqualityFunction(r,n,s,d,a,y);if("!="===l){var f=QueryFilters.runEqualityFunction(r,n,s,d,a,y);return QueryFilters.isEbvError(f)||(f.value=!f.value),f}if("<"===l)return QueryFilters.runLtFunction(r,n,s);if(">"===l)return QueryFilters.runGtFunction(r,n,s);if("<="===l)return QueryFilters.runLtEqFunction(r,n,s);if(">="===l)return QueryFilters.runGtEqFunction(r,n,s);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==h+"integer")return parseInt(e.value);if(e.type==h+"decimal"||e.type==h+"float"||e.type==h+"double"||e.type==h+"nonPositiveInteger")return parseFloat(e.value);if(e.type==h+"negativeInteger"||e.type==h+"long"||e.type==h+"int"||e.type==h+"short"||e.type==h+"byte"||e.type==h+"nonNegativeInteger"||e.type==h+"unsignedLong"||e.type==h+"unsignedInt"||e.type==h+"unsignedShort"||e.type==h+"unsignedByte"||e.type==h+"positiveInteger")return parseInt(e.value);if(e.type!=h+"date"&&e.type!=h+"dateTime")return e.type==h+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==h+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return M.parseISO8601(e.value)}catch{return null}},QueryFilters.runOrFunction=function(e,r,n,s,d){for(var a=null,y=0;y<e.operands.length;y++){var l=QueryFilters.runFilter(e.operands[y],r,n,s,d);0==QueryFilters.isEbvError(l)&&(l=QueryFilters.ebv(l)),null==a?a=l:QueryFilters.isEbvError(l)?a=QueryFilters.isEbvError(a)?QueryFilters.ebvError():!0===a||QueryFilters.ebvError():!0===l?a=!0:QueryFilters.isEbvError(a)&&(a=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(a)},QueryFilters.runAndFunction=function(e,r,n,s,d){for(var a=null,y=0;y<e.operands.length;y++){var l=QueryFilters.runFilter(e.operands[y],r,n,s,d);0==QueryFilters.isEbvError(l)&&(l=QueryFilters.ebv(l)),null==a?a=l:QueryFilters.isEbvError(l)?a=(QueryFilters.isEbvError(a)||!0===a)&&QueryFilters.ebvError():!0===l?QueryFilters.isEbvError(a)&&(a=QueryFilters.ebvError()):a=!1}return QueryFilters.ebvBoolean(a)},QueryFilters.runEqualityFunction=function(e,r,n,s,d,a){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)){var y=QueryFilters.effectiveTypeValue(e),l=QueryFilters.effectiveTypeValue(r);return isNaN(y)||isNaN(l)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,s,a)):QueryFilters.ebvBoolean(y==l)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",r))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var f=M.compareDateComponents(e.value,r.value);return null!=f?0==f?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(r)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,s,a)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?1==s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,r){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",r)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",r)?QueryFilters.runGtFunction(e,r,[]):e.token&&"uri"===e.token&&r.token&&"uri"===r.token?QueryFilters.ebvBoolean(e.value>r.value):e.token&&"literal"===e.token&&r.token&&"literal"===r.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+r.value+r.type+r.lang):e.token&&"blank"===e.token&&r.token&&"blank"===r.token||e.value&&r.value?QueryFilters.ebvBoolean(e.value>r.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?-1==s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?-1!=s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?1!=s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,r,n,s,d,a){var y=QueryFilters.runFilter(e,n,s,d,a);if(QueryFilters.isEbvError(y))return QueryFilters.ebvError();var l=y;if(QueryFilters.isNumeric(y)){for(var f=0;f<r.length;f++){var c=QueryFilters.runFilter(r[f].expression,n,s,d,a);if(!QueryFilters.isNumeric(c))return QueryFilters.ebvFalse();"+"===r[f].operator?l=QueryFilters.runSumFunction(l,c):"-"===r[f].operator&&(l=QueryFilters.runSubFunction(l,c))}return l}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:h+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:h+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:h+"decimal",value:n}:{token:"literal",type:h+"integer",value:n}},QueryFilters.runSubFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:h+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:h+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:h+"decimal",value:n}:{token:"literal",type:h+"integer",value:n}},QueryFilters.runMultiplication=function(e,r,n,s,d,a){var y=QueryFilters.runFilter(e,n,s,d,a);if(QueryFilters.isEbvError(y))return y;var l=y;if(QueryFilters.isNumeric(y)){for(var f=0;f<r.length;f++){var c=QueryFilters.runFilter(r[f].expression,n,s,d,a);if(QueryFilters.isEbvError(c))return y;if(!QueryFilters.isNumeric(c))return QueryFilters.ebvFalse();"*"===r[f].operator?l=QueryFilters.runMulFunction(l,c):"/"===r[f].operator&&(l=QueryFilters.runDivFunction(l,c))}return l}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:h+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:h+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:h+"decimal",value:n}:{token:"literal",type:h+"integer",value:n}},QueryFilters.runDivFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:h+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:h+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:h+"decimal",value:n}:{token:"literal",type:h+"integer",value:n}},QueryFilters.runBuiltInCall=function(e,r,n,s,d,a){if("notexists"===e||"exists"===e){var y=[];for(var l in n)y.push(JSON.stringify(n[l]));return r[y=y.sort().join("")]}for(var f=[],c=0;c<r.length;c++)if("var"===r[c].token)f.push(r[c]);else{var E=QueryFilters.runFilter(r[c],n,s,d,a);if(QueryFilters.isEbvError(E))return E;f.push(E)}if("str"===e)return"literal"===f[0].token?{token:"literal",type:null,value:""+f[0].value}:"uri"===f[0].token?{token:"literal",type:null,value:f[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===f[0].token?null!=f[0].lang?{token:"literal",value:""+f[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===f[0].token){var _=f[0];return null!=_.type?"string"==typeof _.type?{token:"uri",value:_.type,prefix:null,suffix:null}:_.type:null==_.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var O=f[0],R=f[1],A=QueryFilters.RDFTermEquality(O,R,s,a);return QueryFilters.isEbvError(A)&&(A=!1),QueryFilters.ebvBoolean(A)}if("langmatches"===e){var v=f[0],F=f[1];return"literal"===v.token&&"literal"===F.token?"*"===F.value&&""!=v.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===v.value.toLowerCase().indexOf(F.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var j=f[0].value;return null==j?QueryFilters.ebvError():null!=n[j]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=s.customFns[e])return s.customFns[e](QueryFilters,f);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,r,n,s,d,a){var y=QueryFilters.runFilter(r,n,s,d,a);if(QueryFilters.isEbvError(y))return y;if("!"===e){var l=QueryFilters.ebv(y);return QueryFilters.isEbvError(l)?QueryFilters.ebvFalse():(l=!l,QueryFilters.ebvBoolean(l))}if("+"===e)return QueryFilters.isNumeric(y)?y:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(y)){var f={};for(var c in y)f[c]=y[c];return f.value=-f.value,f}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,r,n,s,d,a,y){if(null==e||(e=QueryFilters.runFilter(e,s,d,a,y),null==r)||(r=QueryFilters.runFilter(r,s,d,a,y),null!=n&&(n=QueryFilters.runFilter(n,s,d,a,y)),null==r||"literal"!==r.token||null!=n&&"literal"!==n.token))return QueryFilters.ebvError();if(r=r.value,n=null==n?null:n.value,null!=e&&"var"==e.token){if(null==s[e.value])return QueryFilters.ebvError();e=s[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==n?new RegExp(r):new RegExp(r,n.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,r,n){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=M.lexicalFormBaseUri(e.value.type,n)),e},QueryFilters.runIriRefOrFunction=function(e,r,n,s,d,a){if(null==r)return e;for(var y=[],l=0;l<r.length;l++)y.push(QueryFilters.runFilter(r[l],n,s,d,a));var f=M.lexicalFormBaseUri(e,a);if(f==h+"integer"||f==h+"decimal"||f==h+"double"||f==h+"nonPositiveInteger"||f==h+"negativeInteger"||f==h+"long"||f==h+"int"||f==h+"short"||f==h+"byte"||f==h+"nonNegativeInteger"||f==h+"unsignedLong"||f==h+"unsignedInt"||f==h+"unsignedShort"||f==h+"unsignedByte"||f==h+"positiveInteger"){if("literal"!==(c=y[0]).token)return QueryFilters.ebvError();if((c=QueryFilters.normalizeLiteralDatatype(c,s,a)).type==h+"integer"||c.type==h+"decimal"||c.type==h+"double"||c.type==h+"nonPositiveInteger"||c.type==h+"negativeInteger"||c.type==h+"long"||c.type==h+"int"||c.type==h+"short"||c.type==h+"byte"||c.type==h+"nonNegativeInteger"||c.type==h+"unsignedLong"||c.type==h+"unsignedInt"||c.type==h+"unsignedShort"||c.type==h+"unsignedByte"||c.type==h+"positiveInteger")return c.type=f,c;if("http://www.w3.org/2001/XMLSchema#boolean"==c.type)return 1==QueryFilters.ebv(c)?(c.type=f,c.value=1):(c.type=f,c.value=0),c;if("http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type)return c.type=f,c.value=parseInt(c.value),c;if("http://www.w3.org/2001/XMLSchema#string"!=c.type&&null!=c.type||c.value.split(".").length>2||c.value.split("-").length>2||c.value.split("/").length>2||c.value.split("+").length>2||f==h+"decimal"&&(-1!=c.value.indexOf("e")||-1!=c.value.indexOf("E"))||!(f!=h+"int"&&f!=h+"integer"||-1==c.value.indexOf("e")&&-1==c.value.indexOf("E")&&-1==c.value.indexOf(".")))return QueryFilters.ebvError();try{return c.value=parseInt(parseFloat(c.value)),isNaN(c.value)?QueryFilters.ebvError():(c.type=f,c)}catch{return QueryFilters.ebvError()}}else{if(f==h+"boolean")return"literal"===(c=y[0]).token&&null==c.type?"true"===c.value||"1"===c.value?QueryFilters.ebvTrue():"false"===c.value||"0"===c.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===c.token?QueryFilters.isEbvError(c)?c:QueryFilters.ebvBoolean(c):QueryFilters.ebvError();if(f==h+"string")return"literal"===(c=y[0]).token?(c=QueryFilters.normalizeLiteralDatatype(c,s,a)).type==h+"integer"||c.type==h+"decimal"||c.type==h+"double"||c.type==h+"nonPositiveInteger"||c.type==h+"negativeInteger"||c.type==h+"long"||c.type==h+"int"||c.type==h+"short"||c.type==h+"byte"||c.type==h+"nonNegativeInteger"||c.type==h+"unsignedLong"||c.type==h+"unsignedInt"||c.type==h+"unsignedShort"||c.type==h+"unsignedByte"||c.type==h+"positiveInteger"||c.type==h+"float"?(c.type=f,c.value=""+c.value,c):c.type==h+"string"?c:c.type==h+"boolean"?(QueryFilters.ebv(c)?(c.type=f,c.value="true"):(c.type=f,c.value="false"),c):c.type==h+"dateTime"||c.type==h+"date"?(c.type=f,"string"!=typeof c.value&&(c.value=M.iso8601(c.value)),c):null==c.type?(c.value=""+c.value,c.type=f,c):QueryFilters.ebvError():"uri"===c.token?{token:"literal",value:M.lexicalFormBaseUri(c,a),type:f,lang:null}:QueryFilters.ebvError();if(f==h+"dateTime"||f==h+"date"){if((c=y[0]).type==h+"dateTime"||c.type==h+"date")return c;if(c.type!=h+"string"&&null!=c.type)return QueryFilters.ebvError();try{return c.value=M.iso8601(M.parseISO8601(c.value)),c.type=f,c}catch{return QueryFilters.ebvError()}}else{if(f!=h+"float")return null!=s.customFns[f]?s.customFns[f](QueryFilters,y):QueryFilters.ebvError();var c;if("literal"!==(c=y[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(c=QueryFilters.normalizeLiteralDatatype(c,s,a)).type||"http://www.w3.org/2001/XMLSchema#int"==c.type)return c.type=f,c.value=parseFloat(c.value),c;if("http://www.w3.org/2001/XMLSchema#boolean"==c.type)return 1==QueryFilters.ebv(c)?(c.type=f,c.value=1):(c.type=f,c.value=0),c;if("http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type)return c.type=f,c.value=parseFloat(c.value),c;if("http://www.w3.org/2001/XMLSchema#string"==c.type)try{return c.value=parseFloat(c.value),isNaN(c.value)?QueryFilters.ebvError():(c.type=f,c)}catch{return QueryFilters.ebvError()}else{if(null!=c.type||c.value.split(".").length>2||c.value.split("-").length>2||c.value.split("/").length>2||c.value.split("+").length>2)return QueryFilters.ebvError();try{return c.value=parseFloat(c.value),isNaN(c.value)?QueryFilters.ebvError():(c.type=f,c)}catch{return QueryFilters.ebvError()}}}}},K.exports={QueryFilters}},{"./utils":140}],135:[function(G,K,ee){var M=G("./utils"),o=G("./utils"),x={variablesInBGP:function(h){var e=h.variables;if(e)return e;var r=h.value||h;for(var n in e=[],r)r[n]&&"var"===r[n].token?e.push(r[n].value):r[n]&&"blank"===r[n].token&&e.push("blank:"+r[n].value);return h.variables=e,e},connected:function(h,e){for(var r="/"+h.vars.join("/")+"/",n=0;n<e.vars.length;n++)if(-1!=r.indexOf("/"+e.vars[n]+"/"))return!0;return!1},variablesIntersectionBGP:function(h,e){return function(r,n){for(var s={},d=0;d<r.lenght;d++)s[r[d]]=1;for(d=0;d<n.length;d++){var a=s[n[d]]||0;a++,s[n[d]]=a}var y=[];for(var l in s)2==s[l]&&y.push(s[l]);return y}(x.variablesInBGP(h),x.variablesInBGP(e))},executeAndBGPsGroups:function(h){for(var e={},r={},n=0,s=function(O,R){for(var A=0;A<O.length;A++){var v="/"+O[A]+"/";if(-1!=R.indexOf(v))return!0}return!1},d=function(O,R,A,v){var F=[],j="",H="";for(var P in R)j+=P,F=F.concat(e[P]),H+=r[P];H=H+c.join("/")+"/",F.push(O),A[j]=F,v[j]=H},a=0;a<h.length;a++){var y=h[a],l={},f={},c=x.variablesInBGP(y),E={};for(var _ in r)s(c,r[_])?E[_]=!0:(l[_]=e[_],f[_]=r[_]);0===M.size(E)?(l["g"+n]=[y],f["g"+n]="/"+c.join("/")+"/",n++):d(y,E,l,f),e=l,r=f}return M.values(e)},intersectionSize:function(h,e){for(var r=e.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=h.i.indexOf("_"+r[n]+"_"))return 1;return 0},createJoinTree:function(h,e){for(var r="/"+h.vars.join("/")+"/",n=h.vars.concat([]),s=[],d=0;d<e.vars.length;d++)-1!=r.indexOf("/"+e.vars[d]+"/")?0==e.vars[d].indexOf("_:")?s.push("blank:"+e.vars[d]):s.push(e.vars[d]):n.push(e.vars[d]);var a=e.i.split("_"),y=h.i.split("_"),l={};for(d=0;d<a.length;d++)""!=a[d]&&(l[a[d]]=!0);for(d=0;d<y.length;d++)""!=y[d]&&(l[y[d]]=!0);var f=M.keys(l);return{left:h,right:e,cost:h.cost+e.cost,i:"_"+f.sort().join("_")+"_",vars:n,join:s}},executeBushyTree:function(h,e,r,n,s){null==h.left?x.executeEmptyJoinBGP(h.right,e,r,n,s):null==h.right?x.executeEmptyJoinBGP(h.left,e,r,n,s):x.executeBushyTree(h.left,e,r,n,function(d){null!=d?x.executeBushyTree(h.right,e,r,n,function(a){s(null!=a?x.joinBindings2(h.join,d,a):null)}):s(null)})},executeAndBGPsDPSize:function(h,e,r,n,s){var d=x.executeAndBGPsGroups(h),a=[];o.eachSeries(d,function(y,l){r.computeCosts(y,n,function(f){var c={},E={},_={},O=1,R=null,A={};_[1]=[];for(var v=0;v<f.length;v++){var F=[];for(var j in delete f[v].variables,f[v])"_cost"!=j&&("var"===f[v][j].token||"blank"===f[v][j].token)&&F.push(f[v][j].value);E["_"+v+"_"]={left:f[v],right:null,cost:f[v]._cost,i:"_"+v+"_",vars:F};var H={left:f[v],right:null,cost:f[v]._cost,i:"_"+v+"_",vars:F};c["_"+v+"_"]=H,delete f[v]._cost,A["_"+v+"_"]=!0,_[1].push("_"+v+"_"),(null==R||R.cost>H.cost)&&(R=H)}for(var P=2;P<=f.length;P++)for(var X=1;X<P;X++){var Y=P-X,ie=_[""+X]||[],fe=_[""+Y]||[];for(v=0;v<ie.length;v++)for(var oe=0;oe<fe.length;oe++)if(ie[v]!==fe[oe]){var le=E[ie[v]],V=E[fe[oe]];if(0==x.intersectionSize(le,V)&&x.connected(le,V)){O=P;var $=c[le.i],ne=c[V.i],pe=x.createJoinTree($,ne);if(!A[pe.i]){A[pe.i]=!0;var Fe=pe.cost+1;null!=c[pe.i]&&(Fe=c[pe.i].cost);var ve=_[P]||[];ve.push(pe.i),E[pe.i]=pe,_[P]=ve,Fe>pe.cost&&(O===P&&(R=pe),c[pe.i]=pe)}}}}a.push(R),l()})},function(){var y=null;o.eachSeries(a,function(l,f){x.executeBushyTree(l,e,r,n,function(c){c?null==y?(y=c,f()):(y=x.crossProductBindings(y,c),f()):f("Error executing bushy tree")})},function(l){l?s(null,l):s(y)})})},executeEmptyJoinBGP:function(h,e,r,n,s){return x.executeBGPDatasets(h,e,r,n,s)},executeBGPDatasets:function(h,e,r,n,s){var d={};if(null==h.graph){var a=[];o.eachSeries(e.implicit,function(l,f){null==d[l.oid]?(d[l.oid]=!0,h.graph=l,r.rangeQuery(h,n,function(c){c=x.buildBindingsFromRange(c,h),a.push(c),f()})):f()},function(){var l=x.unionManyBindings(a);s(l)})}else if("var"===h.graph.token){var y=h.graph.value;a=[],o.eachSeries(e.named,function(l,f){null==d[l.oid]?(d[l.oid]=!0,h.graph=l,null!=a?r.rangeQuery(h,n,function(c){if(null!=c){c=x.buildBindingsFromRange(c,h);for(var E=0;E<c.length;E++)c[E][y]=l.oid;a.push(c)}else a=null;f()}):f()):f()},function(){if(null==a)s(null);else{var l=x.unionManyBindings(a);s(l)}})}else r.rangeQuery(h,n,function(l){null!=l?(l=x.buildBindingsFromRange(l,h),s(l)):s(null)})},buildBindingsFromRange:function(h,e){x.variablesInBGP(e);var r=e.value||e,n={};for(f in r)r[f]&&"var"===r[f].token?n[f]=r[f].value:r[f]&&"blank"===r[f].token&&(n[f]="blank:"+r[f].value);var s=[];if(null!=h)for(var d=0;d<h.length;d++){var a={},y=h[d],l=!1;for(var f in n){var c=y[f];if(null!=a[n[f]]&&a[n[f]]!==c){l=!0;break}a[n[f]]=c}l||s.push(a)}return s},areCompatibleBindings:function(h,e){for(var r in h)if(null!=e[r]&&e[r]!=h[r])return!1;return!0},mergeBindings:function(h,e){var r={};for(var n in h)r[n]=h[n];for(var n in e)r[n]=e[n];return r},joinBindings2:function(h,e,r){for(var n,s,d,a,y={},l=[],f=0;f<e.length;f++){n=e[f],a=y;for(var c=0;c<h.length;c++)s=n[h[c]],c==h.length-1?((d=a[s]||[]).push(n),a[s]=d):(d=a[s]||{},a[s]=d,a=d)}for(f=0;f<r.length;f++)for(n=r[f],a=y,c=0;c<h.length;c++)if(null!=a[s=n[h[c]]])if(c==h.length-1)for(var E=0;E<a[s].length;E++)l.push(x.mergeBindings(a[s][E],n));else a=a[s];return l},joinBindings:function(h,e){for(var r=[],n=0;n<h.length;n++)for(var s=h[n],d=0;d<e.length;d++){var a=e[d];x.areCompatibleBindings(s,a)&&r.push(x.mergeBindings(s,a))}return r},augmentMissingBindings:function(h,e){for(var r in e)null==h[r]&&(h[r]=null);return h},leftOuterJoinBindings:function(h,e){for(var r=[],n=0;n<h.length;n++){for(var s=h[n],d=!1,a=0;a<e.length;a++){var y=e[a];x.areCompatibleBindings(s,y)&&(d=!0,r.push(x.mergeBindings(s,y)))}!1===d&&(x.augmentMissingBindings(s,y),r.push(s))}return r},crossProductBindings:function(h,e){for(var r=[],n=0;n<h.length;n++)for(var s=h[n],d=0;d<e.length;d++){var a=e[d];r.push(x.mergeBindings(s,a))}return r},unionBindings:function(h,e){return h.concat(e)},unionManyBindings:function(h){for(var e=[],r=0;r<h.length;r++){var n=h[r];e=x.unionBindings(e,n)}return e}};K.exports={QueryPlan:x}},{"./utils":140}],136:[function(G,K,ee){var M=G("./network_transport").NetworkTransport,o=G("./rvn3_parser").RVN3Parser,x=G("./jsonld_parser").JSONLDParser,h=G("./utils"),e=function(r){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":o.parser,"text/n3":o.parser,"application/ld+json":x.parser,"application/json":x.parser},typeof RDFXMLParser<"u"&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=r)for(var n in r.parsers)this.parsers[n]=r.parsers[n];if(r&&null!=r.precedences)for(var n in this.precedences=r.precedences,r.parsers)h.include(this.precedences,n)||this.precedences.push(n);this.acceptHeaderValue="";for(var s=0;s<this.precedences.length;s++)this.acceptHeaderValue=0!=s?this.acceptHeaderValue+","+this.precedences[s]:this.acceptHeaderValue+this.precedences[s]};e.prototype.registerParser=function(r,n){this.parsers[r]=n,this.precedences.push(r)},e.prototype.unregisterParser=function(r){delete this.parsers[r];for(var n=[],s=0;s<this.precedences.length;s++)this.precedences[s]!=r&&n.push(this.precedences[s]);this.precedences=n},e.prototype.setAcceptHeaderPrecedence=function(r){this.precedences=r},e.prototype.load=function(r,n,s){var d=this;M.load(r,this.acceptHeaderValue,function(a,y){if(a)s(a);else{var l=y.headers["Content-Type"]||y.headers["content-type"],f=y.data;if(null!=l){for(var c in l=l.split(";")[0],d.parsers)if(-1!=c.indexOf("/")){var E=c.split("/");if("*"===E[1]){if(-1!=l.indexOf(E[0]))return d.tryToParse(d.parsers[c],n,f,{documentURI:r},s)}else{if(-1!=l.indexOf(c))return d.tryToParse(d.parsers[c],n,f,{documentURI:r},s);if(-1!=l.indexOf(E[1]))return d.tryToParse(d.parsers[c],n,f,{documentURI:r},s)}}else if(-1!=l.indexOf(c))return d.tryToParse(d.parsers[c],n,f,{documentURI:r},s);s(new Error("Unknown media type : "+l))}else s(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(r,n,s,d){try{var a=this;G("fs").readFile(s.split("file:/")[1],function(y,l){y?d(y):(l=l.toString("utf8"),a.tryToParse(r,n,l,{documentURI:s},d))})}catch(y){d(y)}},e.prototype.tryToParse=function(r,n,s,d,a){try{"string"==typeof s&&(s=h.normalizeUnicodeLiterals(s)),r.parse(s,n,d,a)}catch(y){console.log(y.message),console.log(y.stack),a(y)}},K.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:4}],137:[function(G,K,ee){var M=G("./utils"),o=G("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var x={};for(var h in this)M.include(this.interfaceProperties,h)||"function"==typeof this[h]||"defaultNs"===h||"interfaceProperties"===h||(x[h]=this[h]);return x},RDFModel.UrisMap.prototype.get=function(x){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[x]},RDFModel.UrisMap.prototype.remove=function(x){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[x],null},RDFModel.UrisMap.prototype.set=function(x,h){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";this[x]=h},RDFModel.UrisMap.prototype.setDefault=function(x){this.defaultNs=x},RDFModel.UrisMap.prototype.addAll=function(x,h){for(var e in x)M.include(this.interfaceProperties,e)||(null!=this[e]?!0===h&&(this[e]=x[e]):this[e]=x[e]);return this},RDFModel.UrisMap.prototype.resolve=function(x){var h=x.split(":"),e=h[0],r=h[1];return""===e?null==this.defaultNs?null:this.defaultNs+r:null!=this[e]?this[e]+r:null},RDFModel.UrisMap.prototype.shrink=function(x){for(var h in this){var e=this[h];if(0===x.indexOf(e)&&""!==e&&"defaultNs"!=h)return h+":"+x.split(e)[1]}return x},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(x,h){this.prefixes.addAll(x.prefixes,h),this.terms.addAll(x.terms,h)},RDFModel.Profile.prototype.resolve=function(x){return-1!=x.indexOf(":")?this.prefixes.resolve(x):null!=this.terms[x]?this.terms.resolve(x):null},RDFModel.Profile.prototype.setDefaultPrefix=function(x){this.prefixes.setDefault(x)},RDFModel.Profile.prototype.setDefaultVocabulary=function(x){this.terms.setDefault(x)},RDFModel.Profile.prototype.setPrefix=function(x,h){this.prefixes.set(x,h)},RDFModel.Profile.prototype.setTerm=function(x,h){this.terms.set(x,h)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var x=this;for(var h in this.filters={s:function(e){return function(r){return r.subject.equals(e)}},p:function(e){return function(r){return r.predicate.equals(e)}},o:function(e){return function(r){return r.object.equals(e)}},sp:function(e,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(r)}},so:function(e,r){return function(n){return n.subject.equals(e)&&n.object.equals(r)}},po:function(e,r){return function(n){return n.predicate.equals(e)&&n.object.equals(r)}},spo:function(e,r,n){return function(s){return s.subject.equals(e)&&s.predicate.equals(r)&&s.object.equals(n)}},describes:function(e){return function(r){return r.subject.equals(e)||r.object.equals(e)}},type:function(e){var r=x.resolve("rdf:type");return function(n){return n.predicate.equals(r)&&n.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(h,RDFModel.defaultContext[h])},RDFModel.RDFEnvironment.prototype=M.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var x=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,x},RDFModel.RDFEnvironment.prototype.createNamedNode=function(x){var h=this.resolve(x);return null!=h?new RDFModel.NamedNode(h):new RDFModel.NamedNode(x)},RDFModel.RDFEnvironment.prototype.createLiteral=function(x,h,e){return null!=e?new RDFModel.Literal(x,h,e.toString()):new RDFModel.Literal(x,h,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(x,h,e){return new RDFModel.Triple(x,h,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(x){var h=new RDFModel.Graph;if(null!=x)for(var e=0;e<x.length;e++)h.add(x[e]);return h},RDFModel.RDFEnvironment.prototype.createAction=function(x,h){return function(e){return x(e)?h(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(x){if(!0===x)return new RDFModel.RDFEnvironment.Profile;var h=new RDFModel.RDFEnvironment.Profile;return h.importProfile(this),h},RDFModel.RDFEnvironment.prototype.createTermMap=function(x){if(!0===x)return new RDFModel.UrisMap;var h=this.terms.values(),e=new RDFModel.UrisMap;for(var r in h)e[r]=h[r];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(x){if(!0===x)return new RDFModel.UrisMap;var h=this.prefixes.values(),e=new RDFModel.UrisMap;for(var r in h)e[r]=h[r];return e},RDFModel.RDFNode=function(x){this.interfaceName=x,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(x){if(null==x.interfaceName)return this.valueOf()==x;for(var h in this.attributes){var e=this.attributes[h];if(this[e]!=x[e])return!1}return!0},RDFModel.BlankNode=function(x){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+x,this.bnodeId=x},RDFModel.BlankNode.prototype=M.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(x,h,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=x,null!=h?this.language=h:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=M.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var x='"'+this.nominalValue+'"';return null!=this.language?x=x+"@"+this.language:(null!=this.datatype||this.type)&&(x=x+"^^<"+(this.datatype||this.type)+">"),x},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return o.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(x){RDFModel.RDFNode.call(this,"NamedNode"),null!=x.value?this.nominalValue=x.value:this.nominalValue=x},RDFModel.NamedNode.prototype=M.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(x,h,e){this.subject=x,this.predicate=h,this.object=e},RDFModel.Triple.prototype.equals=function(x){return this.subject.equals(x.subject)&&this.predicate.equals(x.predicate)&&this.object.equals(x.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(x){for(var h=0;h<this.actions.length;h++)x=this.actions[h](x);var e=x.subject.toString()+x.predicate.toString()+x.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(x)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(x,h){if(this.actions.push(x),1==h)for(var e=0;e<this.triples.length;e++)this.triples[e]=x(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(x){for(var h=x.toArray(),e=0;e<h.length;e++)this.add(h[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(x){for(var h=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(x)){var r=x.subject.toString()+x.predicate.toString()+x.object.toString();delete this.duplicates[r],h=e;break}return null!=h&&this.triples.splice(h,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(x){for(var h=0;h<this.triples.length;h++)if(!0===x(this.triples[h],this))return!0;return!1},RDFModel.Graph.prototype.every=function(x){for(var h=0;h<this.triples.length;h++)if(!1===x(this.triples[h],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(x){for(var h=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===x(this.triples[e],this)&&h.add(this.triples[e]);return h},RDFModel.Graph.prototype.forEach=function(x){for(var h=0;h<this.triples.length;h++)x(this.triples[h],this)},RDFModel.Graph.prototype.merge=function(x){for(var h=new RDFModel.Graph,e=0;e<this.triples.length;e++)h.add(this.triples[e]);return h},RDFModel.Graph.prototype.match=function(x,h,e,r){for(var n=new RDFModel.Graph,s=0,d=0;d<this.triples.length;d++){var a=this.triples[d];if((null==x||a.subject.equals(x))&&(null==h||a.predicate.equals(h))&&(null==e||a.object.equals(e))){if(!(null==r||s<r))return n;s++,n.add(a)}}return n},RDFModel.Graph.prototype.removeMatches=function(x,h,e){for(var r=[],n=0;n<this.triples.length;n++){var s=this.triples[n];(null==x||s.subject.equals(x))&&(null==h||s.predicate.equals(h))&&(null==e||s.object.equals(e))&&r.push(s)}for(n=0;n<r.length;n++)this.remove(r[n]);return this},RDFModel.Graph.prototype.toNT=function(){var x="";return this.forEach(function(h){x+=h.toString()}),x},RDFModel.buildRDFResource=function(x,h,e,r){if("blank"===x.token)return RDFModel.buildBlankNode(x,h,e,r);if("literal"===x.token)return RDFModel.buildLiteral(x,h,e,r);if("uri"===x.token)return RDFModel.buildNamedNode(x,h,e,r);if("var"===x.token){var n=h[x.value];return null!=n?RDFModel.buildRDFResource(n,h,e,r):null}return null},RDFModel.buildBlankNode=function(x,h,e,r){return null!=x.valuetmp&&(x.value=x.valuetmp),0===x.value.indexOf("_:")&&(x.value=x.value.split("_:")[1]),new RDFModel.BlankNode(x.value)},RDFModel.buildLiteral=function(x,h,e,r){return new RDFModel.Literal(x.value,x.lang,x.type)},RDFModel.buildNamedNode=function(x,h,e,r){if(null!=x.value)return new RDFModel.NamedNode(x);if(null!=x.prefix){var n=e.resolveNsInEnvironment(x.prefix,r);return x.value=n+x.suffix,new RDFModel.NamedNode(x)}return new RDFModel.NamedNode(x)},RDFModel.rdf=new RDFModel.RDFEnvironment,K.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(G,K,ee){var M=G("n3").Parser,o={};function x(h){switch(h[0]){case'"':if(h.indexOf("^^")>0){var e=h.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:h};case"_":return{blank:h.replace("b","")};default:return{token:"uri",value:h,prefix:null,suffix:null}}}o.parser={async:!0,parse:function(h,e,r,n){n||(n=r,r=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var s=[];new M(r).parse(h,function(d,a){d?n(d):a?s.push({subject:x(a.subject),predicate:x(a.predicate),object:x(a.object),graph:e}):n(!1,s)})},resetBlankNodeIds:function(){M._resetBlankNodeIds()}},K.exports={RVN3Parser:o}},{n3:51}],139:[function(G,K,ee){var M=G("./query_engine").QueryEngine,o=G("./quad_backend").QuadBackend,x=G("./persistent_quad_backend").PersistentQuadBackend,h=G("./lexicon").Lexicon,e=G("./persistent_lexicon").PersistentLexicon,r=G("./rdf_model"),n=G("./utils");Store=function(s,d){var a=null,y=null;if(0==arguments.length)y={};else if(1==arguments.length)y={},a=s;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";y=s,a=d}null==y.treeOrder&&(y.treeOrder=15);var l=h,f=o;!0===y.persistent&&(l=e,f=x),this.functionMap={};var c=this;this.customFns={},new l(function(E){var _=function(){new f(y,function(O){var R=function(){y.backend=O,y.lexicon=E,c.engine=new M(y),a(null,c)};y.overwrite?O.clear(R):R()})};!0===y.overwrite?E.clear(_):_()},y.name)},Store.prototype.rdf=r.rdf,Store.prototype.rdf.api=r,Store.prototype.registerCustomFunction=function(s,d){this.customFns[s]=d,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var s;if(1===arguments.length){s=arguments[0];var d=function(){}}else 2===arguments.length&&(s=arguments[0],d=arguments[1]);this.engine.execute(s,d)}},Store.prototype.executeWithEnvironment=function(){var s,d,a;if(3===arguments.length){s=arguments[0];var y=function(){};d=arguments[1],a=arguments[2]}else 4===arguments.length&&(s=arguments[0],y=arguments[3],d=arguments[1],a=arguments[2]);d=n.map(d,function(l){return{token:"uri",value:l}}),a=n.map(a,function(l){return{token:"uri",value:l}}),this.engine.execute(s,y,d,a)},Store.prototype.graph=function(){var s=null,d=null;if(1===arguments.length)d=arguments[0]||function(){},s=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";d=arguments[1]||function(){},s=arguments[0]}null!=this.rdf.resolve(s)&&(s=this.rdf.resolve(s)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+s+"> { ?s ?p ?o } }",d)},Store.prototype.node=function(){var s=null,d=null,a=null;if(2===arguments.length)a=arguments[0],d=arguments[1]||function(){},s=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";a=arguments[0],s=arguments[1],d=arguments[2]||function(){}}null!=this.rdf.resolve(s)&&(s=this.rdf.resolve(s)),null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a)),this.engine.execute("CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+s+"> { <"+a+"> ?p ?o } }",d)},Store.prototype.startObservingNode=function(){var s,d,a;2===arguments.length?(s=arguments[0],a=arguments[1],this.engine.callbacksBackend.observeNode(s,a,function(){})):3===arguments.length&&(s=arguments[0],d=arguments[1],a=arguments[2],this.engine.callbacksBackend.observeNode(s,d,a,function(){}))},Store.prototype.stopObservingNode=function(s){this.engine.callbacksBackend.stopObservingNode(s)},Store.prototype.startObservingQuery=function(){var s=arguments[0],d=arguments[1],a=arguments[2];null!=a?this.engine.callbacksBackend.observeQuery(s,d,a):this.engine.callbacksBackend.observeQuery(s,d,function(){})},Store.prototype.stopObservingQuery=function(s){this.engine.callbacksBackend.stopObservingQuery(s)},Store.prototype.subscribe=function(s,d,a,y,l){var f=this,c=function(E,_){var O=[],R={blanks:{},outCache:{}},A=[];n.each(_,function(v){var F=r.buildRDFResource(v.subject,A,f.engine,R),j=r.buildRDFResource(v.predicate,A,f.engine,R),H=r.buildRDFResource(v.object,A,f.engine,R);null!=F&&null!=j&&null!=H&&(v=new r.Triple(F,j,H),O.push(v))}),l(E,O)};this.functionMap[l]=c,this.engine.callbacksBackend.subscribe(s,d,a,y,c,function(){})},Store.prototype.unsubscribe=function(s){var d=this.functionMap[s];this.engine.callbacksBackend.unsubscribe(d),delete this.functionMap[s]},Store.prototype.setPrefix=function(s,d){this.rdf.setPrefix(s,d)},Store.prototype.setDefaultPrefix=function(s){this.rdf.setDefaultPrefix(s)},Store.prototype.insert=function(){var s,d,a;if(1===arguments.length)d=arguments[0],a=function(){};else if(2===arguments.length)d=arguments[0],a=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";d=arguments[0],s=this.rdf.createNamedNode(arguments[1]),a=arguments[2]||function(){}}var y="",l=this;d.forEach(function(f){y=y+l._nodeToQuery(f.subject)+l._nodeToQuery(f.predicate)+l._nodeToQuery(f.object)+"."}),y=null!=s?"INSERT DATA { GRAPH "+this._nodeToQuery(s)+" { "+y+" } }":"INSERT DATA { "+y+" }",this.engine.execute(y,a)},Store.prototype._nodeToQuery=function(s){if("NamedNode"===s.interfaceName){var d=this.rdf.resolve(s.valueOf());return null!=d?"<"+d+">":"<"+s.valueOf()+">"}return s.toString()},Store.prototype.delete=function(){var s,d,a;if(1===arguments.length)d=arguments[0],a=function(){};else if(2===arguments.length)d=arguments[0],a=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";d=arguments[0],s=this.rdf.createNamedNode(arguments[1]),a=arguments[2]||function(){}}var y="",l=this;d.forEach(function(f){y=y+l._nodeToQuery(f.subject)+l._nodeToQuery(f.predicate)+l._nodeToQuery(f.object)+"."}),y=null!=s?"DELETE DATA { GRAPH "+this._nodeToQuery(s)+" { "+y+" } }":"DELETE DATA { "+y+" }",this.engine.execute(y,a)},Store.prototype.clear=function(){var s;if(0===arguments.length){s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var d=function(){}}else if(1===arguments.length)s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";s=this.rdf.createNamedNode(arguments[0]),d=arguments[1]||function(){}}var a="CLEAR GRAPH "+this._nodeToQuery(s);this.engine.execute(a,d)},Store.prototype.setBatchLoadEvents=function(s){this.engine.eventsOnBatchLoad=s},Store.prototype.registerDefaultNamespace=function(s,d){this.rdf.prefixes.set(s,d),this.engine.registerDefaultNamespace(s,d)},Store.prototype.registerDefaultProfileNamespaces=function(){var s=this.rdf.prefixes.values();for(var d in s)this.registerDefaultNamespace(d,s[d])},Store.prototype.load=function(){var s,d,a,y,l={};if(3===arguments.length)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=arguments[0],d=arguments[1],y=arguments[2]||function(){};else if(4===arguments.length)s=arguments[0],d=arguments[1],"string"==typeof(l=arguments[2])?(a=this.rdf.createNamedNode(l),l={}):(a=this.rdf.createNamedNode(l.graph||this.engine.lexicon.defaultGraphUri),delete l.graph),y=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===s){var f="LOAD <"+(d=this.rdf.createNamedNode(d)).valueOf()+"> INTO GRAPH <"+a.valueOf()+">";this.engine.execute(f,y)}else{var c=this,E=this.engine.rdfLoader.parsers[s];if(!E)return y(new Error("Cannot find parser for the provided media type:"+s));var O=[E,{token:"uri",value:a.valueOf()},d,l,function(R,A){R?y(R,A):c.engine.batchLoad(A,function(v){null!=v?y(null,v):y(new Error("Error batch-loading triples."))})}];d&&"string"==typeof d&&0===d.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,O):this.engine.rdfLoader.tryToParse.apply(null,O)}},Store.prototype.registerParser=function(s,d){this.engine.rdfLoader.registerParser(s,d)},Store.prototype.registeredGraphs=function(s){this.engine.lexicon.registeredGraphs(!0,function(d){var a=n.map(d,function(y){return new r.NamedNode(y)});s(null,a)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(s){NetworkTransport=s},Store.prototype.close=function(s){null==s&&(s=function(){}),this.engine.close?this.engine.close(s):s()},Store.VERSION="0.9.18-alpha.12",Store.yieldFrequency=function(s){n.yieldFrequency(s)},K.exports.Store=Store,K.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},K.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:typeof window<"u"&&window.setImmediate?window.setImmediate:function(G){setTimeout(G,0)},spin=0,yieldFrequency=100,nextTick=function(G){++spin<yieldFrequency?G():(spin=0,slowNextTick(G))},hashTerm=function(G){try{if(null==G)return"";if("uri"===G.token)return"u"+G.value;if("blank"===G.token)return"b"+G.value;if("literal"===G.token){var K="l"+G.value;return K+=G.type||"",K+=G.lang||""}}catch{if("object"==typeof G){var ee="";for(p in G)ee=ee+p+G[p];return ee}return G}},lexicalFormBaseUri=function(G,K){var ee=null;if(K=K||{},null==G.value){var M=G.prefix,o=G.suffix,x=K.namespaces[M];ee=null!=x?x+o:M+":"+o}else ee=G.value;return null===ee?null:(-1==ee.indexOf(":")&&(ee=(K.base||"")+ee),ee)};parseISO8601=function(G){return Date.parse(G)},Date.prototype.toISOString||function(){function G(K){return K<10?"0"+K:K}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+G(this.getUTCMonth()+1)+"-"+G(this.getUTCDate())+"T"+G(this.getUTCHours())+":"+G(this.getUTCMinutes())+":"+G(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(G){return G.toISOString()},compareDateComponents=function(G,K){var ee=parseISO8601(G),M=parseISO8601(K);return ee==M?0:ee<M?-1:1},lexicalFormLiteral=function(G,K){var ee=G.value,M=G.lang,o=G.type,x=null;if(null!=ee&&null!=o&&"string"!=typeof o){var h=o.value;if(null==h){var e=o.prefix,r=o.suffix,n=K.namespaces[e];G.type=n+r,h=n+r}x=-1!=h.indexOf("hexBinary")?'"'+G.value.toLowerCase()+'"^^<'+h+">":'"'+G.value+'"^^<'+h+">"}else x=null==M&&null==o?'"'+ee+'"':null==o?'"'+ee+'"@'+M:-1!=o.indexOf("hexBinary")?'"'+G.value.toLowerCase()+'"^^<'+o+">":'"'+G.value+'"^^<'+o+">";return x},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(G){if(typeof window>"u"&&void 0!==process&&!1===process.browser){var K=_dereq_("sqlite3"),ee=_dereq_("indexeddb-js"),M=new K.Database(":memory:"),o=ee.makeScope("sqlite3",M);G.indexedDB=o.indexedDB,G.IDBKeyRange=o.IDBKeyRange}else{var x;(x=typeof window>"u"?self:window).indexedDB=x.indexedDB||x.mozIndexedDB||x.webkitIndexedDB||x.msIndexedDB,x.IDBKeyRange=x.IDBKeyRange||x.webkitIDBKeyRange||x.msIDBKeyRange,x.indexedDB?(G.indexedDB=x.indexedDB,G.IDBKeyRange=x.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function G(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return G()+G()+"-"+G()+"-"+G()+"-"+G()+"-"+G()+G()+G()},hashTerm=function(G){try{if(null==G)return"";if("uri"===G.token)return"u"+G.value;if("blank"===G.token)return"b"+G.value;if("literal"===G.token){var K="l"+G.value;return K+=G.type||"",K+=G.lang||""}}catch{if("object"==typeof G){var ee="";for(p in G)ee=ee+p+G[p];return ee}return G}};var reject=function(G,K){for(var ee=[],M=0;M<G.length;M++)K(G[M])&&ee.push(G[M]);return ee},include=function(G,K){for(var ee=0;ee<G.length;ee++)if(G[ee]===K)return!0;return!1},each=function(G,K){if(G.forEach)G.forEach(K);else for(var ee=0;ee<G.length;ee++)K(G[ee])},map=function(G,K){if(G.map)return G.map(K);for(var ee=[],M=0;M<G.length;M++)ee[M]=K(G[M]);return ee},keys=function(G){var K=[];for(var ee in G)K.push(ee);return K},values=function(G){var K=[];for(var ee in G)K.push(G[ee]);return K},size=function(G){if(G.length)return G.length;var K=0;for(var ee in G)K++;return K};clone=function(G){return JSON.parse(JSON.stringify(G))};var isObject=function(G){var K=typeof G;return"function"==K||G&&"object"==K||!1},create=function(){function G(){}return function(K){if(isObject(K)){G.prototype=K;var ee=new G;G.prototype=null}return ee||void 0}}(),whilst=function(G,K,ee){G()?K(function(M){if(M)return ee(M);whilst(G,K,ee)}):ee()},eachSeries=function(G,K,ee){if(ee=ee||function(){},!G.length)return ee();var M=0,o=function(){K(G[M],function(x){x?(ee(x),ee=function(){}):(M+=1)>=G.length?ee():nextTick(o)})};o()},eachParallel=function(G,K,ee){if(ee=ee||function(){},!G.length)return ee();for(var M=!1,o=0,x=function(e){if(e)throw M=!0,new Error(e);M||++o===G.length&&ee()},h=0;h<G.length;h++)!function(e,r,n,s){nextTick(function(){try{s(e[r],function(){n()})}catch(d){n(d)}})}(G,h,x,K)},reduce=function(G,K,ee,M){eachSeries(G,function(o,x){ee(K,o,function(h,e){K=e,x(h)})},function(o){M(o,K)})},seq=function(){var G=arguments;return function(){var K=this,ee=Array.prototype.slice.call(arguments),M=ee.pop();reduce(G,ee,function(o,x,h){x.apply(K,o.concat([function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1);h(e,r)}]))},function(o,x){M.apply(K,[o].concat(x))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&typeof window>"u"};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(G){yieldFrequency=G}}}).call(this)}).call(this,require("_process"))},{_process:59}]},{},[139])(139)});