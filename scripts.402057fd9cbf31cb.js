function dateConverter(q){const K=1721425.5,M=["So","Mo","Di","Mi","Do","Fr","Sa"],o={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function x(l,f){return l-f*Math.floor(l/f)}function e(l){return(l=parseInt(l))%4==0&&!(l%100==0&&l%400!=0)}function r(l,f,c){return K-1+365*(l-1)+Math.floor((l-1)/4)+-Math.floor((l-1)/100)+Math.floor((l-1)/400)+Math.floor((367*f-362)/12+(f<=2?0:e(l)?-1:-2)+c)}function s(l,f){l=parseInt(l);const c={};let E;switch(f){case"GREGORIAN":case"gregorian":E=function n(l){let f,c,E,_,O,N,A,y,F,j,G,P,z,Y;return f=Math.floor(l-.5)+.5,c=f-K,E=Math.floor(c/146097),_=x(c,146097),O=Math.floor(_/36524),N=x(_,36524),A=Math.floor(N/1461),y=x(N,1461),F=Math.floor(y/365),j=400*E+100*O+4*A+F,4==O||4==F||j++,G=f-r(j,1,1),P=f<r(j,3,1)?0:e(j)?1:2,z=Math.floor((12*(G+P)+373)/367),Y=f-r(j,z,1)+1,j<=0&&j--,new Array(j,z,Y)}(l);break;case"JULIAN":case"julian":E=S.jd_to_julian(l);break;case"JEWISH":case"jewish":E=S.jd_to_hebrew(l);break;case"FRENCH":case"french":E=S.jd_to_french_revolutionary(l)}return c.year=E[0],c.month=E[1],c.day=E[2],c.weekday=function d(l){return l=Number(l),x(Math.floor(l+1.5),7)}(l),c}const h=s(q.dateval1,q.calendar),a=s(q.dateval2,q.calendar);let v="";if(q.dateprecision1==q.dateprecision2)switch(q.dateprecision1){case"DAY":v=h.year===a.year&&h.month===a.month&&h.day===a.day?"["+M[h.weekday]+"] "+h.day+". "+o[q.calendar][h.month]+" "+h.year:"["+M[h.weekday]+"] "+h.day+". "+o[q.calendar][h.month]+" "+h.year+" \u2013 ["+M[a.weekday]+"] "+a.day+". "+o[q.calendar][a.month]+" "+a.year;break;case"MONTH":v=h.year===a.year&&h.month===a.month?o[q.calendar][h.month]+" "+h.year:o[q.calendar][h.month]+" "+h.year+" \u2013 "+o[q.calendar][a.month]+" "+a.year;break;case"YEAR":v=h.year===a.year?h.year:h.year+"\u2013"+a.year}else{switch(q.dateprecision1){case"DAY":v="["+M[h.weekday]+"] "+h.day+". "+o[q.calendar][h.month]+" "+h.year;break;case"MONTH":v=o[q.calendar][h.month]+" "+h.year;break;case"YEAR":v=h.year}switch(v+=" \u2013 ",q.dateprecision2){case"DAY":v+="["+M[a.weekday]+"] "+a.day+". "+o[q.calendar][a.month]+" "+a.year;break;case"MONTH":v+=o[q.calendar][a.month]+" "+a.year;break;case"YEAR":v+=a.year}}return v+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[q.calendar].short+")",v}function htmlConverter(q,K){let M,o,x,d,e,r,n,s,h,a,ee="";const v={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},l={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},f={};for(let E in l.settings.matching)f[l.settings.matching[E]]=E;const c=Object.keys(q);c.sort(function(E,_){return v[f[E]]-v[f[_]]}),M=[];for(let E in c)for(n in r=c[E],q[r])x=q[r][n].start,void 0===M[x]&&(M[x]=[]),M[x].push({propname:r,proptype:"start"}),"_link"==M[x][M[x].length-1].propname?(M[x][M[x].length-1].href=q[r][n].href,void 0!==q[r][n].resid&&(M[x][M[x].length-1].resid=q[r][n].resid)):"style"==M[x][M[x].length-1].propname&&(M[x][M[x].length-1].css=q[r][n].css),x=q[r][n].end,void 0===M[x]&&(M[x]=[]),M[x].push({propname:r,proptype:"end"});for(o=[],s=0;s<=K.length;s++){if(void 0!==M[s]){for(e=[],a=[],h=M[s].length-1;h>=0;h--)if("end"==M[s][h].proptype&&"linebreak"!=M[s][h].propname){for(;void 0!==(d=o.pop())&&(ee+="</"+f[d]+">",d!=M[s][h].propname);)e.push(d);for(;void 0!==(d=e.pop());)o.push(d),ee+="<"+f[d]+">"}for(h in M[s])if("start"==M[s][h].proptype)if("linebreak"==M[s][h].propname)ee+="<br/>";else if("_link"==M[s][h].propname){o.push(M[s][h].propname);let E=M[s][h].href;void 0===E&&void 0!==M[s][h].resid&&(E="https://www.salsah.org/api/resources/"+M[s][h].resid),ee+="<"+f[M[s][h].propname]+' href="'+E,void 0!==M[s][h].resid?ee+='" class="salsah-link">':ee+='">'}else"style"==M[s][h].propname?(o.push(M[s][h].propname),ee+="<"+f[M[s][h].propname]+' style="'+M[s][h].css+'">'):(o.push(M[s][h].propname),ee+="<"+f[M[s][h].propname]+">")}s<K.length&&(ee+=K.charAt(s))}return ee=ee.replace(/\n/g,"<br/>"),ee=ee.replace(/\r/g,""),ee}(function(q){var K,ee,M="0.5.0",o="hasOwnProperty",x=/[\.\/]/,d=/\s*,\s*/,r=function(f,c){return f-c},n={n:{}},s=function(){for(var f=0,c=this.length;c>f;f++)if(typeof this[f]<"u")return this[f]},h=function(){for(var f=this.length;--f;)if(typeof this[f]<"u")return this[f]},a=Object.prototype.toString,v=String,l=Array.isArray||function(f){return f instanceof Array||"[object Array]"==a.call(f)};eve=function(f,c){var E,_=ee,O=Array.prototype.slice.call(arguments,2),N=eve.listeners(f),A=0,y=[],F={},j=[],G=K;j.firstDefined=s,j.lastDefined=h,K=f,ee=0;for(var P=0,z=N.length;z>P;P++)"zIndex"in N[P]&&(y.push(N[P].zIndex),N[P].zIndex<0&&(F[N[P].zIndex]=N[P]));for(y.sort(r);y[A]<0;)if(E=F[y[A++]],j.push(E.apply(c,O)),ee)return ee=_,j;for(P=0;z>P;P++)if("zIndex"in(E=N[P]))if(E.zIndex==y[A]){if(j.push(E.apply(c,O)),ee)break;do{if((E=F[y[++A]])&&j.push(E.apply(c,O)),ee)break}while(E)}else F[E.zIndex]=E;else if(j.push(E.apply(c,O)),ee)break;return ee=_,K=G,j},eve._events=n,eve.listeners=function(f){var c,E,_,O,N,A,y,F,j=l(f)?f:f.split(x),G=n,P=[G],z=[];for(O=0,N=j.length;N>O;O++){for(F=[],A=0,y=P.length;y>A;A++)for(E=[(G=P[A].n)[j[O]],G["*"]],_=2;_--;)(c=E[_])&&(F.push(c),z=z.concat(c.f||[]));P=F}return z},eve.separator=function(f){f?(f="["+(f=v(f).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",x=new RegExp(f)):x=/[\.\/]/},eve.on=function(f,c){if("function"!=typeof c)return function(){};for(var E=l(f)?l(f[0])?f:[f]:v(f).split(d),_=0,O=E.length;O>_;_++)!function(N){for(var A,y=l(N)?N:v(N).split(x),F=n,j=0,G=y.length;G>j;j++)F=(F=F.n).hasOwnProperty(y[j])&&F[y[j]]||(F[y[j]]={n:{}});for(F.f=F.f||[],j=0,G=F.f.length;G>j;j++)if(F.f[j]==c){A=!0;break}!A&&F.f.push(c)}(E[_]);return function(N){+N==+N&&(c.zIndex=+N)}},eve.f=function(f){var c=[].slice.call(arguments,1);return function(){eve.apply(null,[f,null].concat(c).concat([].slice.call(arguments,0)))}},eve.stop=function(){ee=1},eve.nt=function(f){var c=l(K)?K.join("."):K;return f?new RegExp("(?:\\.|\\/|^)"+f+"(?:\\.|\\/|$)").test(c):c},eve.nts=function(){return l(K)?K:K.split(x)},eve.off=eve.unbind=function(f,c){if(f){var E=l(f)?l(f[0])?f:[f]:v(f).split(d);if(E.length>1)for(var _=0,O=E.length;O>_;_++)eve.off(E[_],c);else{E=l(f)?f:v(f).split(x);var N,A,y,F,j,G=[n],P=[];for(_=0,O=E.length;O>_;_++)for(F=0;F<G.length;F+=y.length-2){if(y=[F,1],N=G[F].n,"*"!=E[_])N[E[_]]&&(y.push(N[E[_]]),P.unshift({n:N,name:E[_]}));else for(A in N)N[o](A)&&(y.push(N[A]),P.unshift({n:N,name:A}));G.splice.apply(G,y)}for(_=0,O=G.length;O>_;_++)for(N=G[_];N.n;){if(c){if(N.f){for(F=0,j=N.f.length;j>F;F++)if(N.f[F]==c){N.f.splice(F,1);break}!N.f.length&&delete N.f}for(A in N.n)if(N.n[o](A)&&N.n[A].f){var z=N.n[A].f;for(F=0,j=z.length;j>F;F++)if(z[F]==c){z.splice(F,1);break}!z.length&&delete N.n[A].f}}else for(A in delete N.f,N.n)N.n[o](A)&&N.n[A].f&&delete N.n[A].f;N=N.n}e:for(_=0,O=P.length;O>_;_++){for(A in(N=P[_]).n[N.name].f)continue e;for(A in N.n[N.name].n)continue e;delete N.n[N.name]}}}else eve._events=n={n:{}}},eve.once=function(f,c){var E=function(){return eve.off(f,E),c.apply(this,arguments)};return eve.on(f,E)},eve.version=M,eve.toString=function(){return"You are running Eve "+M},typeof module<"u"&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):q.eve=eve})(this),function(q,K){if("function"==typeof define&&define.amd)define(["eve"],function(M){return K(q,M)});else if(typeof exports<"u"){var ee=require("eve");module.exports=K(q,ee)}else K(q,q.eve)}(window||this,function(q,K){var o,x,d,e,r,n,s,a,v,l,f,c,E,_,O,N,A,ee=(o=typeof K>"u"?function(){}:K,d={},e=q.requestAnimationFrame||q.webkitRequestAnimationFrame||q.mozRequestAnimationFrame||q.oRequestAnimationFrame||q.msRequestAnimationFrame||function(y){return setTimeout(y,16,(new Date).getTime()),!0},r=Array.isArray||function(y){return y instanceof Array||"[object Array]"==Object.prototype.toString.call(y)},n=0,s="M"+(+new Date).toString(36),a=Date.now||function(){return+new Date},v=function(y){var F=this;if(null==y)return F.s;var j=F.s-y;F.b+=F.dur*j,F.B+=F.dur*j,F.s=y},l=function(y){return null==y?this.spd:void(this.spd=y)},f=function(y){var F=this;return null==y?F.dur:(F.s=F.s*y/F.dur,void(F.dur=y))},c=function(){var y=this;delete d[y.id],y.update(),o("mina.stop."+y.id,y)},E=function(){var y=this;y.pdif||(delete d[y.id],y.update(),y.pdif=y.get()-y.b)},_=function(){var y=this;y.pdif&&(y.b=y.get()-y.pdif,delete y.pdif,d[y.id]=y,N())},O=function(){var y,F=this;if(r(F.start)){y=[];for(var j=0,G=F.start.length;G>j;j++)y[j]=+F.start[j]+(F.end[j]-F.start[j])*F.easing(F.s)}else y=+F.start+(F.end-F.start)*F.easing(F.s);F.set(y)},N=function(y){if(y){var F=0;for(var j in d)if(d.hasOwnProperty(j)){var G=d[j],P=G.get();F++,G.s=(P-G.b)/(G.dur/G.spd),G.s>=1&&(delete d[j],G.s=1,F--,function(z){setTimeout(function(){o("mina.finish."+z.id,z)})}(G)),G.update()}x=!!F&&e(N)}else x||(x=e(N))},(A=function(y,F,j,G,P,z,Y){var ie={id:s+(n++).toString(36),start:y,end:F,b:j,s:0,dur:G-j,spd:1,get:P,set:z,easing:Y||A.linear,status:v,speed:l,duration:f,stop:c,pause:E,resume:_,update:O};d[ie.id]=ie;var ye,fe=0;for(ye in d)if(d.hasOwnProperty(ye)&&2==++fe)break;return 1==fe&&N(),ie}).time=a,A.getById=function(y){return d[y]||null},A.linear=function(y){return y},A.easeout=function(y){return Math.pow(y,1.7)},A.easein=function(y){return Math.pow(y,.48)},A.easeinout=function(y){if(1==y)return 1;if(0==y)return 0;var F=.48-y/1.04,j=Math.sqrt(.1734+F*F),G=j-F,z=-j-F,ie=Math.pow(Math.abs(G),1/3)*(0>G?-1:1)+Math.pow(Math.abs(z),1/3)*(0>z?-1:1)+.5;return 3*(1-ie)*ie*ie+ie*ie*ie},A.backin=function(y){if(1==y)return 1;var F=1.70158;return y*y*((F+1)*y-F)},A.backout=function(y){if(0==y)return 0;var F=1.70158;return(y-=1)*y*((F+1)*y+F)+1},A.elastic=function(y){return y==!!y?y:Math.pow(2,-10*y)*Math.sin((y-.075)*(2*Math.PI)/.3)+1},A.bounce=function(y){var j=7.5625,G=2.75;return 1/G>y?j*y*y:2/G>y?j*(y-=1.5/G)*y+.75:2.5/G>y?j*(y-=2.25/G)*y+.9375:j*(y-=2.625/G)*y+.984375},q.mina=A,A),M=function(o){function x(H,Z){if(H){if(H.nodeType)return j(H);if(e(H,"array")&&x.set)return x.set.apply(x,H);if(H instanceof N)return H;if(null==Z)return j(H=P.doc.querySelector(String(H)))}return new F(H=H??"100%",Z=Z??"100%")}function d(H,Z){if(Z){if("#text"==H&&(H=P.doc.createTextNode(Z.text||Z["#text"]||"")),"#comment"==H&&(H=P.doc.createComment(Z.text||Z["#text"]||"")),"string"==typeof H&&(H=d(H)),"string"==typeof Z)return 1==H.nodeType?"xlink:"==Z.substring(0,6)?H.getAttributeNS(se,Z.substring(6)):"xml:"==Z.substring(0,4)?H.getAttributeNS(pe,Z.substring(4)):H.getAttribute(Z):"text"==Z?H.nodeValue:null;if(1==H.nodeType){for(var ae in Z)if(Z[z](ae)){var de=Y(Z[ae]);de?"xlink:"==ae.substring(0,6)?H.setAttributeNS(se,ae.substring(6),de):"xml:"==ae.substring(0,4)?H.setAttributeNS(pe,ae.substring(4),de):H.setAttribute(ae,de):H.removeAttribute(ae)}}else"text"in Z&&(H.nodeValue=Z.text)}else H=P.doc.createElementNS(pe,H);return H}function e(H,Z){return"finite"==(Z=Y.prototype.toLowerCase.call(Z))?isFinite(H):!("array"!=Z||!(H instanceof Array||Array.isArray&&Array.isArray(H)))||("null"==Z&&null===H||Z==typeof H&&null!==H||"object"==Z&&H===Object(H)||xe.call(H).slice(8,-1).toLowerCase()==Z)}function s(H,Z,ae){return function de(){var _e=Array.prototype.slice.call(arguments,0),be=_e.join("\u2400"),Ae=de.cache=de.cache||{},Ie=de.count=de.count||[];return Ae[z](be)?(function n(H,Z){for(var ae=0,de=H.length;de>ae;ae++)if(H[ae]===Z)return H.push(H.splice(ae,1)[0])}(Ie,be),ae?ae(Ae[be]):Ae[be]):(Ie.length>=1e3&&delete Ae[Ie.shift()],Ie.push(be),Ae[be]=H.apply(Z,_e),ae?ae(Ae[be]):Ae[be])}}function a(H){return H%360*ne/180}function E(H){return H.node.ownerSVGElement&&j(H.node.ownerSVGElement)||x.select("svg")}function O(H){e(H,"array")||(H=Array.prototype.slice.call(arguments,0));for(var Z=0,ae=0,de=this.node;this[Z];)delete this[Z++];for(Z=0;Z<H.length;Z++)"set"==H[Z].type?H[Z].forEach(function(be){de.appendChild(be.node)}):de.appendChild(H[Z].node);var _e=de.childNodes;for(Z=0;Z<_e.length;Z++)this[ae++]=j(_e[Z]);return this}function N(H){if(H.snap in ve)return ve[H.snap];var Z;try{Z=H.ownerSVGElement}catch{}this.node=H,Z&&(this.paper=new F(Z)),this.type=H.tagName||H.nodeName;var ae=this.id=X(this);if(this.anims={},this._={transform:[]},H.snap=ae,ve[ae]=this,"g"==this.type&&(this.add=O),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var de in F.prototype)F.prototype[z](de)&&(this[de]=F.prototype[de])}function A(H){this.node=H}function y(H,Z){var ae=d(H);return Z.appendChild(ae),j(ae)}function F(H,Z){var ae,de,_e,be=F.prototype;if(H&&H.tagName&&"svg"==H.tagName.toLowerCase()){if(H.snap in ve)return ve[H.snap];var Ae=H.ownerDocument;for(var Ie in ae=new N(H),de=H.getElementsByTagName("desc")[0],_e=H.getElementsByTagName("defs")[0],de||((de=d("desc")).appendChild(Ae.createTextNode("Created with Snap")),ae.node.appendChild(de)),_e||(_e=d("defs"),ae.node.appendChild(_e)),ae.defs=_e,be)be[z](Ie)&&(ae[Ie]=be[Ie]);ae.paper=ae.root=ae}else d((ae=y("svg",P.doc.body)).node,{height:Z,version:1.1,width:H,xmlns:pe});return ae}function j(H){return H&&(H instanceof N||H instanceof A?H:H.tagName&&"svg"==H.tagName.toLowerCase()?new F(H):H.tagName&&"object"==H.tagName.toLowerCase()&&"image/svg+xml"==H.type?new F(H.contentDocument.getElementsByTagName("svg")[0]):new N(H))}function G(H,Z){for(var ae=0,de=H.length;de>ae;ae++){var _e={type:H[ae].type,attr:H[ae].attr()},be=H[ae].children();Z.push(_e),be.length&&G(be,_e.childNodes=[])}}x.version="0.5.1",x.toString=function(){return"Snap v"+this.version},x._={};var P={win:o.window,doc:o.window.document};x._.glob=P;var z="hasOwnProperty",Y=String,ie=parseFloat,ye=parseInt,fe=Math,re=fe.max,V=fe.min,$=fe.abs,ne=(fe.pow,fe.PI),he=(fe.round,""),xe=Object.prototype.toString,ge=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,ce=(x._.separator=/[,\s]+/,/[\s]*,[\s]*/),ke={hs:1,rg:1},Ne=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Me=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,oe=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,k=0,Q="S"+(+new Date).toString(36),X=function(H){return(H&&H.type?H.type:he)+Q+(k++).toString(36)},se="http://www.w3.org/1999/xlink",pe="http://www.w3.org/2000/svg",ve={};x.url=function(H){return"url('#"+H+"')"},x._.$=d,x._.id=X,x.format=function(){var H=/\{([^\}]+)\}/g,Z=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return function(de,_e){return Y(de).replace(H,function(be,Ae){return function(de,_e,be){var Ae=be;return _e.replace(Z,function(Ie,Le,qe,ze,Be){Le=Le||ze,Ae&&(Le in Ae&&(Ae=Ae[Le]),"function"==typeof Ae&&Be&&(Ae=Ae()))}),Ae=(null==Ae||Ae==be?de:Ae)+""}(be,Ae,_e)})}}(),x._.clone=function r(H){if("function"==typeof H||Object(H)!==H)return H;var Z=new H.constructor;for(var ae in H)H[z](ae)&&(Z[ae]=r(H[ae]));return Z},x._.cacher=s,x.rad=a,x.deg=function v(H){return 180*H/ne%360},x.sin=function(H){return fe.sin(x.rad(H))},x.tan=function(H){return fe.tan(x.rad(H))},x.cos=function(H){return fe.cos(x.rad(H))},x.asin=function(H){return x.deg(fe.asin(H))},x.acos=function(H){return x.deg(fe.acos(H))},x.atan=function(H){return x.deg(fe.atan(H))},x.atan2=function(H){return x.deg(fe.atan2(H))},x.angle=function h(H,Z,ae,de,_e,be){if(null==_e){var Ae=H-ae,Ie=Z-de;return Ae||Ie?(180+180*fe.atan2(-Ie,-Ae)/ne+360)%360:0}return h(H,Z,_e,be)-h(ae,de,_e,be)},x.len=function(H,Z,ae,de){return Math.sqrt(x.len2(H,Z,ae,de))},x.len2=function(H,Z,ae,de){return(H-ae)*(H-ae)+(Z-de)*(Z-de)},x.closestPoint=function(H,Z,ae){function de(at){var ct=at.x-Z,ut=at.y-ae;return ct*ct+ut*ut}for(var _e,be,Ae,Ie,Le=H.node,qe=Le.getTotalLength(),ze=qe/Le.pathSegList.numberOfItems*.125,Be=1/0,Ze=0;qe>=Ze;Ze+=ze)(Ie=de(Ae=Le.getPointAtLength(Ze)))<Be&&(_e=Ae,be=Ze,Be=Ie);for(ze*=.5;ze>.5;){var rt,tt,it,st,Ye,$e;(it=be-ze)>=0&&(Ye=de(rt=Le.getPointAtLength(it)))<Be?(_e=rt,be=it,Be=Ye):(st=be+ze)<=qe&&($e=de(tt=Le.getPointAtLength(st)))<Be?(_e=tt,be=st,Be=$e):ze*=.5}return{x:_e.x,y:_e.y,length:be,distance:Math.sqrt(Be)}},x.is=e,x.snapTo=function(H,Z,ae){if(ae=e(ae,"finite")?ae:10,e(H,"array")){for(var de=H.length;de--;)if($(H[de]-Z)<=ae)return H[de]}else{var _e=Z%(H=+H);if(ae>_e)return Z-_e;if(_e>H-ae)return Z-_e+H}return Z},x.getRGB=s(function(H){if(!H||(H=Y(H)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:We};if("none"==H)return{r:-1,g:-1,b:-1,hex:"none",toString:We};if(!(ke[z](H.toLowerCase().substring(0,2))||"#"==H.charAt())&&(H=Pe(H)),!H)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:We};var Z,ae,de,_e,be,Ae,Ie=H.match(ge);return Ie?(Ie[2]&&(de=ye(Ie[2].substring(5),16),ae=ye(Ie[2].substring(3,5),16),Z=ye(Ie[2].substring(1,3),16)),Ie[3]&&(de=ye((be=Ie[3].charAt(3))+be,16),ae=ye((be=Ie[3].charAt(2))+be,16),Z=ye((be=Ie[3].charAt(1))+be,16)),Ie[4]&&(Ae=Ie[4].split(ce),Z=ie(Ae[0]),"%"==Ae[0].slice(-1)&&(Z*=2.55),ae=ie(Ae[1]),"%"==Ae[1].slice(-1)&&(ae*=2.55),de=ie(Ae[2]),"%"==Ae[2].slice(-1)&&(de*=2.55),"rgba"==Ie[1].toLowerCase().slice(0,4)&&(_e=ie(Ae[3])),Ae[3]&&"%"==Ae[3].slice(-1)&&(_e/=100)),Ie[5]?(Ae=Ie[5].split(ce),Z=ie(Ae[0]),"%"==Ae[0].slice(-1)&&(Z/=100),ae=ie(Ae[1]),"%"==Ae[1].slice(-1)&&(ae/=100),de=ie(Ae[2]),"%"==Ae[2].slice(-1)&&(de/=100),("deg"==Ae[0].slice(-3)||"\xb0"==Ae[0].slice(-1))&&(Z/=360),"hsba"==Ie[1].toLowerCase().slice(0,4)&&(_e=ie(Ae[3])),Ae[3]&&"%"==Ae[3].slice(-1)&&(_e/=100),x.hsb2rgb(Z,ae,de,_e)):Ie[6]?(Ae=Ie[6].split(ce),Z=ie(Ae[0]),"%"==Ae[0].slice(-1)&&(Z/=100),ae=ie(Ae[1]),"%"==Ae[1].slice(-1)&&(ae/=100),de=ie(Ae[2]),"%"==Ae[2].slice(-1)&&(de/=100),("deg"==Ae[0].slice(-3)||"\xb0"==Ae[0].slice(-1))&&(Z/=360),"hsla"==Ie[1].toLowerCase().slice(0,4)&&(_e=ie(Ae[3])),Ae[3]&&"%"==Ae[3].slice(-1)&&(_e/=100),x.hsl2rgb(Z,ae,de,_e)):(Z=V(fe.round(Z),255),ae=V(fe.round(ae),255),de=V(fe.round(de),255),_e=V(re(_e,0),1),(Ie={r:Z,g:ae,b:de,toString:We}).hex="#"+(16777216|de|ae<<8|Z<<16).toString(16).slice(1),Ie.opacity=e(_e,"finite")?_e:1,Ie)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:We}},x),x.hsb=s(function(H,Z,ae){return x.hsb2rgb(H,Z,ae).hex}),x.hsl=s(function(H,Z,ae){return x.hsl2rgb(H,Z,ae).hex}),x.rgb=s(function(H,Z,ae,de){if(e(de,"finite")){var _e=fe.round;return"rgba("+[_e(H),_e(Z),_e(ae),+de.toFixed(2)]+")"}return"#"+(16777216|ae|Z<<8|H<<16).toString(16).slice(1)});var Pe=function(H){var Z=P.doc.getElementsByTagName("head")[0]||P.doc.getElementsByTagName("svg")[0],ae="rgb(255, 0, 0)";return(Pe=s(function(de){if("red"==de.toLowerCase())return ae;Z.style.color=ae,Z.style.color=de;var _e=P.doc.defaultView.getComputedStyle(Z,he).getPropertyValue("color");return _e==ae?null:_e}))(H)},Qe=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ue=function(){return"hsl("+[this.h,this.s,this.l]+")"},We=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Ke=function(H,Z,ae){if(null==Z&&e(H,"object")&&"r"in H&&"g"in H&&"b"in H&&(ae=H.b,Z=H.g,H=H.r),null==Z&&e(H,string)){var de=x.getRGB(H);H=de.r,Z=de.g,ae=de.b}return(H>1||Z>1||ae>1)&&(H/=255,Z/=255,ae/=255),[H,Z,ae]},ot=function(H,Z,ae,de){var _e={r:H=fe.round(255*H),g:Z=fe.round(255*Z),b:ae=fe.round(255*ae),opacity:e(de,"finite")?de:1,hex:x.rgb(H,Z,ae),toString:We};return e(de,"finite")&&(_e.opacity=de),_e};x.color=function(H){var Z;return e(H,"object")&&"h"in H&&"s"in H&&"b"in H?(Z=x.hsb2rgb(H),H.r=Z.r,H.g=Z.g,H.b=Z.b,H.opacity=1,H.hex=Z.hex):e(H,"object")&&"h"in H&&"s"in H&&"l"in H?(Z=x.hsl2rgb(H),H.r=Z.r,H.g=Z.g,H.b=Z.b,H.opacity=1,H.hex=Z.hex):(e(H,"string")&&(H=x.getRGB(H)),e(H,"object")&&"r"in H&&"g"in H&&"b"in H&&!("error"in H)?(Z=x.rgb2hsl(H),H.h=Z.h,H.s=Z.s,H.l=Z.l,Z=x.rgb2hsb(H),H.v=Z.b):((H={hex:"none"}).r=H.g=H.b=H.h=H.s=H.v=H.l=-1,H.error=1)),H.toString=We,H},x.hsb2rgb=function(H,Z,ae,de){var _e,be,Ae,Ie,Le;return e(H,"object")&&"h"in H&&"s"in H&&"b"in H&&(ae=H.b,Z=H.s,de=H.o,H=H.h),_e=be=Ae=ae-(Le=ae*Z),_e+=[Le,Ie=Le*(1-$((H=(H*=360)%360/60)%2-1)),0,0,Ie,Le][H=~~H],be+=[Ie,Le,Le,Ie,0,0][H],Ae+=[0,0,Ie,Le,Le,Ie][H],ot(_e,be,Ae,de)},x.hsl2rgb=function(H,Z,ae,de){var _e,be,Ae,Ie,Le;return e(H,"object")&&"h"in H&&"s"in H&&"l"in H&&(ae=H.l,Z=H.s,H=H.h),(H>1||Z>1||ae>1)&&(H/=360,Z/=100,ae/=100),_e=be=Ae=ae-(Le=2*Z*(.5>ae?ae:1-ae))/2,_e+=[Le,Ie=Le*(1-$((H=(H*=360)%360/60)%2-1)),0,0,Ie,Le][H=~~H],be+=[Ie,Le,Le,Ie,0,0][H],Ae+=[0,0,Ie,Le,Le,Ie][H],ot(_e,be,Ae,de)},x.rgb2hsb=function(H,Z,ae){var be,Ae;return H=(ae=Ke(H,Z,ae))[0],Z=ae[1],ae=ae[2],{h:((0==(Ae=(be=re(H,Z,ae))-V(H,Z,ae))?null:be==H?(Z-ae)/Ae:be==Z?(ae-H)/Ae+2:(H-Z)/Ae+4)+360)%6*60/360,s:0==Ae?0:Ae/be,b:be,toString:Qe}},x.rgb2hsl=function(H,Z,ae){var be,Ae,Ie,Le;return H=(ae=Ke(H,Z,ae))[0],Z=ae[1],ae=ae[2],be=((Ae=re(H,Z,ae))+(Ie=V(H,Z,ae)))/2,{h:((0==(Le=Ae-Ie)?null:Ae==H?(Z-ae)/Le:Ae==Z?(ae-H)/Le+2:(H-Z)/Le+4)+360)%6*60/360,s:0==Le?0:.5>be?Le/(2*be):Le/(2-2*be),l:be,toString:Ue}},x.parsePathString=function(H){if(!H)return null;var Z=x.path(H);if(Z.arr)return x.path.clone(Z.arr);var ae={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},de=[];return e(H,"array")&&e(H[0],"array")&&(de=x.path.clone(H)),de.length||Y(H).replace(Ne,function(_e,be,Ae){var Ie=[],Le=be.toLowerCase();if(Ae.replace(oe,function(qe,ze){ze&&Ie.push(+ze)}),"m"==Le&&Ie.length>2&&(de.push([be].concat(Ie.splice(0,2))),Le="l",be="m"==be?"l":"L"),"o"==Le&&1==Ie.length&&de.push([be,Ie[0]]),"r"==Le)de.push([be].concat(Ie));else for(;Ie.length>=ae[Le]&&(de.push([be].concat(Ie.splice(0,ae[Le]))),ae[Le]););}),de.toString=x.path.toString,Z.arr=x.path.clone(de),de};var me=x.parseTransformString=function(H){if(!H)return null;var Z=[];return e(H,"array")&&e(H[0],"array")&&(Z=x.path.clone(H)),Z.length||Y(H).replace(Me,function(ae,de,_e){var be=[];de.toLowerCase(),_e.replace(oe,function(Ae,Ie){Ie&&be.push(+Ie)}),Z.push([de].concat(be))}),Z.toString=x.path.toString,Z};x._.svgTransform2string=function l(H){var Z=[];return H=H.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(ae,de,_e){return _e=_e.split(/\s*,\s*|\s+/),"rotate"==de&&1==_e.length&&_e.push(0,0),"scale"==de&&(_e.length>2?_e=_e.slice(0,2):2==_e.length&&_e.push(0,0),1==_e.length&&_e.push(_e[0],0,0)),"skewX"==de?Z.push(["m",1,0,fe.tan(a(_e[0])),1,0,0]):"skewY"==de?Z.push(["m",1,fe.tan(a(_e[0])),0,1,0,0]):Z.push([de.charAt(0)].concat(_e)),ae}),Z},x._.rgTransform=/^[a-z][\s]*-?\.?\d/i,x._.transform2matrix=function f(H,Z){var ae=me(H),de=new x.Matrix;if(ae)for(var _e=0,be=ae.length;be>_e;_e++){var Ae,Ie,Le,qe,ze,Be=ae[_e],Ze=Be.length,rt=Y(Be[0]).toLowerCase(),tt=Be[0]!=rt,it=tt?de.invert():0;"t"==rt&&2==Ze?de.translate(Be[1],0):"t"==rt&&3==Ze?tt?(Ae=it.x(0,0),Ie=it.y(0,0),Le=it.x(Be[1],Be[2]),qe=it.y(Be[1],Be[2]),de.translate(Le-Ae,qe-Ie)):de.translate(Be[1],Be[2]):"r"==rt?2==Ze?(ze=ze||Z,de.rotate(Be[1],ze.x+ze.width/2,ze.y+ze.height/2)):4==Ze&&(tt?(Le=it.x(Be[2],Be[3]),qe=it.y(Be[2],Be[3]),de.rotate(Be[1],Le,qe)):de.rotate(Be[1],Be[2],Be[3])):"s"==rt?2==Ze||3==Ze?(ze=ze||Z,de.scale(Be[1],Be[Ze-1],ze.x+ze.width/2,ze.y+ze.height/2)):4==Ze?tt?(Le=it.x(Be[2],Be[3]),qe=it.y(Be[2],Be[3]),de.scale(Be[1],Be[1],Le,qe)):de.scale(Be[1],Be[1],Be[2],Be[3]):5==Ze&&(tt?(Le=it.x(Be[3],Be[4]),qe=it.y(Be[3],Be[4]),de.scale(Be[1],Be[2],Le,qe)):de.scale(Be[1],Be[2],Be[3],Be[4])):"m"==rt&&7==Ze&&de.add(Be[1],Be[2],Be[3],Be[4],Be[5],Be[6])}return de},x._unit2px=function _(H,Z,ae){function de(qe){if(null==qe)return he;if(qe==+qe)return qe;d(Le,{width:qe});try{return Le.getBBox().width}catch{return 0}}function _e(qe){if(null==qe)return he;if(qe==+qe)return qe;d(Le,{height:qe});try{return Le.getBBox().height}catch{return 0}}function be(qe,ze){null==Z?Ie[qe]=ze(H.attr(qe)||0):qe==Z&&(Ie=ze(ae??(H.attr(qe)||0)))}var Ae=E(H).node,Ie={},Le=Ae.querySelector(".svg---mgr");switch(Le||(Le=d("rect"),d(Le,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),Ae.appendChild(Le)),H.type){case"rect":be("rx",de),be("ry",_e);case"image":be("width",de),be("height",_e);case"text":be("x",de),be("y",_e);break;case"circle":be("cx",de),be("cy",_e),be("r",de);break;case"ellipse":be("cx",de),be("cy",_e),be("rx",de),be("ry",_e);break;case"line":be("x1",de),be("x2",de),be("y1",_e),be("y2",_e);break;case"marker":be("refX",de),be("markerWidth",de),be("refY",_e),be("markerHeight",_e);break;case"radialGradient":be("fx",de),be("fy",_e);break;case"tspan":be("dx",de),be("dy",_e);break;default:be(Z,de)}return Ae.removeChild(Le),Ie},P.doc.contains||P.doc.compareDocumentPosition,x._.getSomeDefs=function c(H){var Z=H.node.ownerSVGElement&&j(H.node.ownerSVGElement)||H.node.parentNode&&j(H.node.parentNode)||x.select("svg")||x(0,0),ae=Z.select("defs"),de=null!=ae&&ae.node;return de||(de=y("defs",Z.node).node),de},x._.getSomeSVG=E,x.select=function(H){return H=Y(H).replace(/([^\\]):/g,"$1\\:"),j(P.doc.querySelector(H))},x.selectAll=function(H){for(var Z=P.doc.querySelectorAll(H),ae=(x.set||Array)(),de=0;de<Z.length;de++)ae.push(j(Z[de]));return ae},setInterval(function(){for(var H in ve)if(ve[z](H)){var Z=ve[H],ae=Z.node;("svg"!=Z.type&&!ae.ownerSVGElement||"svg"==Z.type&&(!ae.parentNode||"ownerSVGElement"in ae.parentNode&&!ae.ownerSVGElement))&&delete ve[H]}},1e4),N.prototype.attr=function(H,Z){var de=this.node;if(!H){if(1!=de.nodeType)return{text:de.nodeValue};for(var _e=de.attributes,be={},Ae=0,Ie=_e.length;Ie>Ae;Ae++)be[_e[Ae].nodeName]=_e[Ae].nodeValue;return be}if(e(H,"string")){if(!(arguments.length>1))return K("snap.util.getattr."+H,this).firstDefined();var Le={};Le[H]=Z,H=Le}for(var qe in H)H[z](qe)&&K("snap.util.attr."+qe,this,H[qe]);return this},x.parse=function(H){var Z=P.doc.createDocumentFragment(),ae=!0,de=P.doc.createElement("div");if((H=Y(H)).match(/^\s*<\s*svg(?:\s|>)/)||(H="<svg>"+H+"</svg>",ae=!1),de.innerHTML=H,H=de.getElementsByTagName("svg")[0])if(ae)Z=H;else for(;H.firstChild;)Z.appendChild(H.firstChild);return new A(Z)},x.fragment=function(){for(var H=Array.prototype.slice.call(arguments,0),Z=P.doc.createDocumentFragment(),ae=0,de=H.length;de>ae;ae++){var _e=H[ae];_e.node&&_e.node.nodeType&&Z.appendChild(_e.node),_e.nodeType&&Z.appendChild(_e),"string"==typeof _e&&Z.appendChild(x.parse(_e).node)}return new A(Z)},x._.make=y,x._.wrap=j,F.prototype.el=function(H,Z){var ae=y(H,this.node);return Z&&ae.attr(Z),ae},N.prototype.children=function(){for(var H=[],Z=this.node.childNodes,ae=0,de=Z.length;de>ae;ae++)H[ae]=x(Z[ae]);return H},N.prototype.toJSON=function(){var H=[];return G([this],H),H[0]},K.on("snap.util.getattr",function(){var H=K.nt(),Z=(H=H.substring(H.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(ae){return"-"+ae.toLowerCase()});return Ee[z](Z)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(Z):d(this.node,H)});var Ee={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};K.on("snap.util.attr",function(H){var Z=K.nt(),ae={};ae[Z=Z.substring(Z.lastIndexOf(".")+1)]=H;var de=Z.replace(/-(\w)/gi,function(be,Ae){return Ae.toUpperCase()}),_e=Z.replace(/[A-Z]/g,function(be){return"-"+be.toLowerCase()});Ee[z](_e)?this.node.style[de]=H??he:d(this.node,ae)}),F.prototype,x.ajax=function(H,Z,ae,de){var _e=new XMLHttpRequest,be=X();if(_e){if(e(Z,"function"))de=ae,ae=Z,Z=null;else if(e(Z,"object")){var Ae=[];for(var Ie in Z)Z.hasOwnProperty(Ie)&&Ae.push(encodeURIComponent(Ie)+"="+encodeURIComponent(Z[Ie]));Z=Ae.join("&")}return _e.open(Z?"POST":"GET",H,!0),Z&&(_e.setRequestHeader("X-Requested-With","XMLHttpRequest"),_e.setRequestHeader("Content-type","application/x-www-form-urlencoded")),ae&&(K.once("snap.ajax."+be+".0",ae),K.once("snap.ajax."+be+".200",ae),K.once("snap.ajax."+be+".304",ae)),_e.onreadystatechange=function(){4==_e.readyState&&K("snap.ajax."+be+"."+_e.status,de,_e)},4==_e.readyState||_e.send(Z),_e}},x.load=function(H,Z,ae){x.ajax(H,function(de){var _e=x.parse(de.responseText);ae?Z.call(ae,_e):Z(_e)})};return x.getElementByPoint=function(H,Z){var de=(this.canvas,P.doc.elementFromPoint(H,Z));if(P.win.opera&&"svg"==de.tagName){var _e=function(H){var Z=H.getBoundingClientRect(),ae=H.ownerDocument,de=ae.body,_e=ae.documentElement,be=_e.clientTop||de.clientTop||0,Ae=_e.clientLeft||de.clientLeft||0;return{y:Z.top+(g.win.pageYOffset||_e.scrollTop||de.scrollTop)-be,x:Z.left+(g.win.pageXOffset||_e.scrollLeft||de.scrollLeft)-Ae}}(de),be=de.createSVGRect();be.x=H-_e.x,be.y=Z-_e.y,be.width=be.height=1;var Ae=de.getIntersectionList(be,null);Ae.length&&(de=Ae[Ae.length-1])}return de?j(de):null},x.plugin=function(H){H(x,N,F,P,A)},P.win.Snap=x,x}(q||this);return M.plugin(function(o,x,d,e,r){function n(F,j){if(null==j){var G=!0;if(!(j="linearGradient"==F.type||"radialGradient"==F.type?F.node.getAttribute("gradientTransform"):"pattern"==F.type?F.node.getAttribute("patternTransform"):F.node.getAttribute("transform")))return new o.Matrix;j=o._.svgTransform2string(j)}else j=o._.rgTransform.test(j)?l(j).replace(/\.{3}|\u2026/g,F._.transform||""):o._.svgTransform2string(j),v(j,"array")&&(j=o.path?o.path.toString.call(j):l(j)),F._.transform=j;var P=o._.transform2matrix(j,F.getBBox(1));return G?P:void(F.matrix=P)}function h(F){return function(){var j=F?"<"+this.type:"",G=this.node.attributes,P=this.node.childNodes;if(F)for(var z=0,Y=G.length;Y>z;z++)j+=" "+G[z].name+'="'+G[z].value.replace(/"/g,'\\"')+'"';if(P.length){for(F&&(j+=">"),z=0,Y=P.length;Y>z;z++)3==P[z].nodeType?j+=P[z].nodeValue:1==P[z].nodeType&&(j+=N(P[z]).toString());F&&(j+="</"+this.type+">")}else F&&(j+="/>");return j}}var a=x.prototype,v=o.is,l=String,f=o._unit2px,c=o._.$,E=o._.make,_=o._.getSomeDefs,N=o._.wrap;a.getBBox=function(F){if("tspan"==this.type)return o._.box(this.node.getClientRects().item(0));if(!o.Matrix||!o.path)return this.node.getBBox();var j=this,G=new o.Matrix;if(j.removed)return o._.box();for(;"use"==j.type;)if(F||(G=G.add(j.transform().localMatrix.translate(j.attr("x")||0,j.attr("y")||0))),j.original)j=j.original;else{var P=j.attr("xlink:href");j=j.original=j.node.ownerDocument.getElementById(P.substring(P.indexOf("#")+1))}var z=j._,Y=o.path.get[j.type]||o.path.get.deflt;try{return F?(z.bboxwt=Y?o.path.getBBox(j.realPath=Y(j)):o._.box(j.node.getBBox()),o._.box(z.bboxwt)):(j.realPath=Y(j),j.matrix=j.transform().localMatrix,z.bbox=o.path.getBBox(o.path.map(j.realPath,G.add(j.matrix))),o._.box(z.bbox))}catch{return o._.box()}};var A=function(){return this.string};a.transform=function(F){var j=this._;if(null==F){for(var G,P=this,z=new o.Matrix(this.node.getCTM()),Y=n(this),ie=[Y],ye=new o.Matrix,fe=Y.toTransformString(),re=l(Y)==l(this.matrix)?l(j.transform):fe;"svg"!=P.type&&(P=P.parent());)ie.push(n(P));for(G=ie.length;G--;)ye.add(ie[G]);return{string:re,globalMatrix:z,totalMatrix:ye,localMatrix:Y,diffMatrix:z.clone().add(Y.invert()),global:z.toTransformString(),total:ye.toTransformString(),local:fe,toString:A}}return F instanceof o.Matrix?(this.matrix=F,this._.transform=F.toTransformString()):n(this,F),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?c(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?c(this.node,{patternTransform:this.matrix}):c(this.node,{transform:this.matrix})),this},a.parent=function(){return N(this.node.parentNode)},a.append=a.add=function(F){if(F){if("set"==F.type){var j=this;return F.forEach(function(G){j.add(G)}),this}F=N(F),this.node.appendChild(F.node),F.paper=this.paper}return this},a.appendTo=function(F){return F&&(F=N(F)).append(this),this},a.prepend=function(F){if(F){if("set"==F.type){var j,G=this;return F.forEach(function(z){j?j.after(z):G.prepend(z),j=z}),this}var P=(F=N(F)).parent();this.node.insertBefore(F.node,this.node.firstChild),this.add&&this.add(),F.paper=this.paper,this.parent()&&this.parent().add(),P&&P.add()}return this},a.prependTo=function(F){return(F=N(F)).prepend(this),this},a.before=function(F){if("set"==F.type){var j=this;return F.forEach(function(P){var z=P.parent();j.node.parentNode.insertBefore(P.node,j.node),z&&z.add()}),this.parent().add(),this}var G=(F=N(F)).parent();return this.node.parentNode.insertBefore(F.node,this.node),this.parent()&&this.parent().add(),G&&G.add(),F.paper=this.paper,this},a.after=function(F){var j=(F=N(F)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(F.node,this.node.nextSibling):this.node.parentNode.appendChild(F.node),this.parent()&&this.parent().add(),j&&j.add(),F.paper=this.paper,this},a.insertBefore=function(F){F=N(F);var j=this.parent();return F.node.parentNode.insertBefore(this.node,F.node),this.paper=F.paper,j&&j.add(),F.parent()&&F.parent().add(),this},a.insertAfter=function(F){F=N(F);var j=this.parent();return F.node.parentNode.insertBefore(this.node,F.node.nextSibling),this.paper=F.paper,j&&j.add(),F.parent()&&F.parent().add(),this},a.remove=function(){var F=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,F&&F.add(),this},a.select=function(F){return N(this.node.querySelector(F))},a.selectAll=function(F){for(var j=this.node.querySelectorAll(F),G=(o.set||Array)(),P=0;P<j.length;P++)G.push(N(j[P]));return G},a.asPX=function(F,j){return null==j&&(j=this.attr(F)),+f(this,F,j)},a.use=function(){var F,j=this.node.id;return j||(j=this.id,c(this.node,{id:j})),F="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?E(this.type,this.node.parentNode):E("use",this.node.parentNode),c(F.node,{"xlink:href":"#"+j}),F.original=this,F},a.clone=function(){var F=N(this.node.cloneNode(!0));return c(F.node,"id")&&c(F.node,{id:F.id}),function s(F){function j(xe,ge){var ce=c(xe.node,ge);(ce=(ce=ce&&ce.match(Y))&&ce[2])&&"#"==ce.charAt()&&(ce=ce.substring(1))&&(ye[ce]=(ye[ce]||[]).concat(function(ke){var Ne={};Ne[ge]=o.url(ke),c(xe.node,Ne)}))}function G(xe){var ge=c(xe.node,"xlink:href");ge&&"#"==ge.charAt()&&(ge=ge.substring(1))&&(ye[ge]=(ye[ge]||[]).concat(function(ce){xe.attr("xlink:href","#"+ce)}))}for(var P,z=F.selectAll("*"),Y=/^\s*url\(("|'|)(.*)\1\)\s*$/,ie=[],ye={},fe=0,re=z.length;re>fe;fe++){j(P=z[fe],"fill"),j(P,"stroke"),j(P,"filter"),j(P,"mask"),j(P,"clip-path"),G(P);var V=c(P.node,"id");V&&(c(P.node,{id:P.id}),ie.push({old:V,id:P.id}))}for(fe=0,re=ie.length;re>fe;fe++){var $=ye[ie[fe].old];if($)for(var ne=0,he=$.length;he>ne;ne++)$[ne](ie[fe].id)}}(F),F.insertAfter(this),F},a.toDefs=function(){return _(this).appendChild(this.node),this},a.pattern=a.toPattern=function(F,j,G,P){var z=E("pattern",_(this));return null==F&&(F=this.getBBox()),v(F,"object")&&"x"in F&&(j=F.y,G=F.width,P=F.height,F=F.x),c(z.node,{x:F,y:j,width:G,height:P,patternUnits:"userSpaceOnUse",id:z.id,viewBox:[F,j,G,P].join(" ")}),z.node.appendChild(this.node),z},a.marker=function(F,j,G,P,z,Y){var ie=E("marker",_(this));return null==F&&(F=this.getBBox()),v(F,"object")&&"x"in F&&(j=F.y,G=F.width,P=F.height,z=F.refX||F.cx,Y=F.refY||F.cy,F=F.x),c(ie.node,{viewBox:[F,j,G,P].join(" "),markerWidth:G,markerHeight:P,orient:"auto",refX:z||0,refY:Y||0,id:ie.id}),ie.node.appendChild(this.node),ie};var y={};a.data=function(F,j){var G=y[this.id]=y[this.id]||{};if(0==arguments.length)return K("snap.data.get."+this.id,this,G,null),G;if(1==arguments.length){if(o.is(F,"object")){for(var P in F)F.hasOwnProperty(P)&&this.data(P,F[P]);return this}return K("snap.data.get."+this.id,this,G[F],F),G[F]}return G[F]=j,K("snap.data.set."+this.id,this,j,F),this},a.removeData=function(F){return null==F?y[this.id]={}:y[this.id]&&delete y[this.id][F],this},a.outerSVG=a.toString=h(1),a.innerSVG=h(),a.toDataURL=function(){if(q&&q.btoa){var F=this.getBBox(),j=o.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+F.x.toFixed(3),y:+F.y.toFixed(3),width:+F.width.toFixed(3),height:+F.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(j)))}},r.prototype.select=a.select,r.prototype.selectAll=a.selectAll}),M.plugin(function(o,x,d,e,r){function n(f,c,E){return function(_){var O=_.slice(f,c);return 1==O.length&&(O=O[0]),E?E(O):O}}var s=x.prototype,h=o.is,a=String,v="hasOwnProperty",l=function(f,c,E,_){"function"!=typeof E||E.length||(_=E,E=ee.linear),this.attr=f,this.dur=c,E&&(this.easing=E),_&&(this.callback=_)};o._.Animation=l,o.animation=function(f,c,E,_){return new l(f,c,E,_)},s.inAnim=function(){var f=this,c=[];for(var E in f.anims)f.anims[v](E)&&function(_){c.push({anim:new l(_._attrs,_.dur,_.easing,_._callback),mina:_,curStatus:_.status(),status:function(O){return _.status(O)},stop:function(){_.stop()}})}(f.anims[E]);return c},o.animate=function(f,c,E,_,O,N){"function"!=typeof O||O.length||(N=O,O=ee.linear);var A=ee.time(),y=ee(f,c,A,A+_,ee.time,E,O);return N&&K.once("mina.finish."+y.id,N),y},s.stop=function(){for(var f=this.inAnim(),c=0,E=f.length;E>c;c++)f[c].stop();return this},s.animate=function(f,c,E,_){"function"!=typeof E||E.length||(_=E,E=ee.linear),f instanceof l&&(_=f.callback,E=f.easing,c=f.dur,f=f.attr);var O,N,A,y,F=[],j=[],G={},P=this;for(var z in f)if(f[v](z)){P.equal?(O=(y=P.equal(z,a(f[z]))).from,N=y.to,A=y.f):(O=+P.attr(z),N=+f[z]);var Y=h(O,"array")?O.length:1;G[z]=n(F.length,F.length+Y,A),F=F.concat(O),j=j.concat(N)}var ie=ee.time(),ye=ee(F,j,ie,ie+c,ee.time,function(fe){var re={};for(var V in G)G[v](V)&&(re[V]=G[V](fe));P.attr(re)},E);return P.anims[ye.id]=ye,ye._attrs=f,ye._callback=_,K("snap.animcreated."+P.id,ye),K.once("mina.finish."+ye.id,function(){K.off("mina.*."+ye.id),delete P.anims[ye.id],_&&_.call(P)}),K.once("mina.stop."+ye.id,function(){K.off("mina.*."+ye.id),delete P.anims[ye.id]}),P}}),M.plugin(function(o,x,d,e,r){function n(l,f,c,E,_,O){return null==f&&"[object SVGMatrix]"==s.call(l)?(this.a=l.a,this.b=l.b,this.c=l.c,this.d=l.d,this.e=l.e,void(this.f=l.f)):void(null!=l?(this.a=+l,this.b=+f,this.c=+c,this.d=+E,this.e=+_,this.f=+O):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var s=Object.prototype.toString,h=String,a=Math;(function(l){function f(E){return E[0]*E[0]+E[1]*E[1]}function c(E){var _=a.sqrt(f(E));E[0]&&(E[0]/=_),E[1]&&(E[1]/=_)}l.add=function(E,_,O,N,A,y){if(E&&E instanceof n)return this.add(E.a,E.b,E.c,E.d,E.e,E.f);var F=E*this.a+_*this.c,j=E*this.b+_*this.d;return this.e+=A*this.a+y*this.c,this.f+=A*this.b+y*this.d,this.c=O*this.a+N*this.c,this.d=O*this.b+N*this.d,this.a=F,this.b=j,this},n.prototype.multLeft=function(E,_,O,N,A,y){if(E&&E instanceof n)return this.multLeft(E.a,E.b,E.c,E.d,E.e,E.f);var F=E*this.a+O*this.b,j=E*this.c+O*this.d,G=E*this.e+O*this.f+A;return this.b=_*this.a+N*this.b,this.d=_*this.c+N*this.d,this.f=_*this.e+N*this.f+y,this.a=F,this.c=j,this.e=G,this},l.invert=function(){var E=this,_=E.a*E.d-E.b*E.c;return new n(E.d/_,-E.b/_,-E.c/_,E.a/_,(E.c*E.f-E.d*E.e)/_,(E.b*E.e-E.a*E.f)/_)},l.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},l.translate=function(E,_){return this.e+=E*this.a+_*this.c,this.f+=E*this.b+_*this.d,this},l.scale=function(E,_,O,N){return null==_&&(_=E),(O||N)&&this.translate(O,N),this.a*=E,this.b*=E,this.c*=_,this.d*=_,(O||N)&&this.translate(-O,-N),this},l.rotate=function(E,_,O){E=o.rad(E),_=_||0,O=O||0;var N=+a.cos(E).toFixed(9),A=+a.sin(E).toFixed(9);return this.add(N,A,-A,N,_,O),this.add(1,0,0,1,-_,-O)},l.skewX=function(E){return this.skew(E,0)},l.skewY=function(E){return this.skew(0,E)},l.skew=function(E,_){E=E||0,_=_||0,E=o.rad(E),_=o.rad(_);var O=a.tan(E).toFixed(9),N=a.tan(_).toFixed(9);return this.add(1,N,O,1,0,0)},l.x=function(E,_){return E*this.a+_*this.c+this.e},l.y=function(E,_){return E*this.b+_*this.d+this.f},l.get=function(E){return+this[h.fromCharCode(97+E)].toFixed(4)},l.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},l.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},l.determinant=function(){return this.a*this.d-this.b*this.c},l.split=function(){var E={};E.dx=this.e,E.dy=this.f;var _=[[this.a,this.b],[this.c,this.d]];E.scalex=a.sqrt(f(_[0])),c(_[0]),E.shear=_[0][0]*_[1][0]+_[0][1]*_[1][1],_[1]=[_[1][0]-_[0][0]*E.shear,_[1][1]-_[0][1]*E.shear],E.scaley=a.sqrt(f(_[1])),c(_[1]),E.shear/=E.scaley,this.determinant()<0&&(E.scalex=-E.scalex);var O=_[0][1],N=_[1][1];return 0>N?(E.rotate=o.deg(a.acos(N)),0>O&&(E.rotate=360-E.rotate)):E.rotate=o.deg(a.asin(O)),E.isSimple=!(+E.shear.toFixed(9)||E.scalex.toFixed(9)!=E.scaley.toFixed(9)&&E.rotate),E.isSuperSimple=!+E.shear.toFixed(9)&&E.scalex.toFixed(9)==E.scaley.toFixed(9)&&!E.rotate,E.noRotation=!+E.shear.toFixed(9)&&!E.rotate,E},l.toTransformString=function(E){var _=E||this.split();return+_.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(_.scalex=+_.scalex.toFixed(4),_.scaley=+_.scaley.toFixed(4),_.rotate=+_.rotate.toFixed(4),(_.dx||_.dy?"t"+[+_.dx.toFixed(4),+_.dy.toFixed(4)]:"")+(_.rotate?"r"+[+_.rotate.toFixed(4),0,0]:"")+(1!=_.scalex||1!=_.scaley?"s"+[_.scalex,_.scaley,0,0]:""))}})(n.prototype),o.Matrix=n,o.matrix=function(l,f,c,E,_,O){return new n(l,f,c,E,_,O)}}),M.plugin(function(o,x,d,e,r){function n(j){return function(G){if(K.stop(),G instanceof r&&1==G.node.childNodes.length&&("radialGradient"==G.node.firstChild.tagName||"linearGradient"==G.node.firstChild.tagName||"pattern"==G.node.firstChild.tagName)&&(G=G.node.firstChild,c(this).appendChild(G),G=l(G)),G instanceof x)if("radialGradient"==G.type||"linearGradient"==G.type||"pattern"==G.type){G.node.id||_(G.node,{id:G.id});var P=O(G.node.id)}else P=G.attr(j);else if((P=o.color(G)).error){var z=o(c(this).ownerSVGElement).gradient(G);z?(z.node.id||_(z.node,{id:z.id}),P=O(z.node.id)):P=G}else P=N(P);var Y={};Y[j]=P,_(this.node,Y),this.node.style[j]=y}}function s(j){K.stop(),j==+j&&(j+="px"),this.node.style.fontSize=j}function h(j){for(var G=[],P=j.childNodes,z=0,Y=P.length;Y>z;z++){var ie=P[z];3==ie.nodeType&&G.push(ie.nodeValue),"tspan"==ie.tagName&&(1==ie.childNodes.length&&3==ie.firstChild.nodeType?G.push(ie.firstChild.nodeValue):G.push(h(ie)))}return G}function a(){return K.stop(),this.node.style.fontSize}var j,v=o._.make,l=o._.wrap,f=o.is,c=o._.getSomeDefs,E=/^url\((['"]?)([^)]+)\1\)$/,_=o._.$,O=o.url,N=String,A=o._.separator,y="";o.deurl=function(j){var G=String(j).match(E);return G?G[2]:j},K.on("snap.util.attr.mask",function(j){if(j instanceof x||j instanceof r){if(K.stop(),j instanceof r&&1==j.node.childNodes.length&&(j=j.node.firstChild,c(this).appendChild(j),j=l(j)),"mask"==j.type)var G=j;else(G=v("mask",c(this))).node.appendChild(j.node);!G.node.id&&_(G.node,{id:G.id}),_(this.node,{mask:O(G.id)})}}),j=function(j){if(j instanceof x||j instanceof r){K.stop();for(var G,P=j.node;P;){if("clipPath"===P.nodeName){G=new x(P);break}if("svg"===P.nodeName){G=void 0;break}P=P.parentNode}G||((G=v("clipPath",c(this))).node.appendChild(j.node),!G.node.id&&_(G.node,{id:G.id})),_(this.node,{"clip-path":O(G.node.id||G.id)})}},K.on("snap.util.attr.clip",j),K.on("snap.util.attr.clip-path",j),K.on("snap.util.attr.clipPath",j),K.on("snap.util.attr.fill",n("fill")),K.on("snap.util.attr.stroke",n("stroke"));var F=/^([lr])(?:\(([^)]*)\))?(.*)$/i;K.on("snap.util.grad.parse",function(j){function G($,ne){for(var he=(ne-fe)/($-re),xe=re;$>xe;xe++)ie[xe].offset=+(+fe+he*(xe-re)).toFixed(2);re=$,fe=ne}var P=(j=N(j)).match(F);if(!P)return null;var z=P[1],Y=P[2],ie=P[3];1==(Y=Y.split(/\s*,\s*/).map(function($){return+$==$?+$:$})).length&&0==Y[0]&&(Y=[]);var ye=(ie=(ie=ie.split("-")).map(function($){var ne={color:($=$.split(":"))[0]};return $[1]&&(ne.offset=parseFloat($[1])),ne})).length,fe=0,re=0;ye--;for(var V=0;ye>V;V++)"offset"in ie[V]&&G(V,ie[V].offset);return ie[ye].offset=ie[ye].offset||100,G(ye,ie[ye].offset),{type:z,params:Y,stops:ie}}),K.on("snap.util.attr.d",function(j){K.stop(),f(j,"array")&&f(j[0],"array")&&(j=o.path.toString.call(j)),(j=N(j)).match(/[ruo]/i)&&(j=o.path.toAbsolute(j)),_(this.node,{d:j})})(-1),K.on("snap.util.attr.#text",function(j){K.stop(),j=N(j);for(var G=e.doc.createTextNode(j);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(G)})(-1),K.on("snap.util.attr.path",function(j){K.stop(),this.attr({d:j})})(-1),K.on("snap.util.attr.class",function(j){K.stop(),this.node.className.baseVal=j})(-1),K.on("snap.util.attr.viewBox",function(j){var G;G=f(j,"object")&&"x"in j?[j.x,j.y,j.width,j.height].join(" "):f(j,"array")?j.join(" "):j,_(this.node,{viewBox:G}),K.stop()})(-1),K.on("snap.util.attr.transform",function(j){this.transform(j),K.stop()})(-1),K.on("snap.util.attr.r",function(j){"rect"==this.type&&(K.stop(),_(this.node,{rx:j,ry:j}))})(-1),K.on("snap.util.attr.textpath",function(j){if(K.stop(),"text"==this.type){var G,P,z;if(!j&&this.textPath){for(P=this.textPath;P.node.firstChild;)this.node.appendChild(P.node.firstChild);return P.remove(),void delete this.textPath}if(f(j,"string")){var Y=c(this),ie=l(Y.parentNode).path(j);Y.appendChild(ie.node),G=ie.id,ie.attr({id:G})}else(j=l(j))instanceof x&&((G=j.attr("id"))||(G=j.id,j.attr({id:G})));if(G)if(P=this.textPath,z=this.node,P)P.attr({"xlink:href":"#"+G});else{for(P=_("textPath",{"xlink:href":"#"+G});z.firstChild;)P.appendChild(z.firstChild);z.appendChild(P),this.textPath=l(P)}}})(-1),K.on("snap.util.attr.text",function(j){if("text"==this.type){for(var G=this.node,P=function(Y){var ie=_("tspan");if(f(Y,"array"))for(var ye=0;ye<Y.length;ye++)ie.appendChild(P(Y[ye]));else ie.appendChild(e.doc.createTextNode(Y));return ie.normalize&&ie.normalize(),ie};G.firstChild;)G.removeChild(G.firstChild);for(var z=P(j);z.firstChild;)G.appendChild(z.firstChild)}K.stop()})(-1),K.on("snap.util.attr.fontSize",s)(-1),K.on("snap.util.attr.font-size",s)(-1),K.on("snap.util.getattr.transform",function(){return K.stop(),this.transform()})(-1),K.on("snap.util.getattr.textpath",function(){return K.stop(),this.textPath})(-1),function(){function j(P){return function(){K.stop();var z=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+P);return"none"==z?z:o(e.doc.getElementById(z.match(E)[1]))}}function G(P){return function(z){K.stop();var Y="marker"+P.charAt(0).toUpperCase()+P.substring(1);if(""!=z&&z){if("marker"==z.type){var ie=z.node.id;return ie||_(z.node,{id:z.id}),void(this.node.style[Y]=O(ie))}}else this.node.style[Y]="none"}}K.on("snap.util.getattr.marker-end",j("end"))(-1),K.on("snap.util.getattr.markerEnd",j("end"))(-1),K.on("snap.util.getattr.marker-start",j("start"))(-1),K.on("snap.util.getattr.markerStart",j("start"))(-1),K.on("snap.util.getattr.marker-mid",j("mid"))(-1),K.on("snap.util.getattr.markerMid",j("mid"))(-1),K.on("snap.util.attr.marker-end",G("end"))(-1),K.on("snap.util.attr.markerEnd",G("end"))(-1),K.on("snap.util.attr.marker-start",G("start"))(-1),K.on("snap.util.attr.markerStart",G("start"))(-1),K.on("snap.util.attr.marker-mid",G("mid"))(-1),K.on("snap.util.attr.markerMid",G("mid"))(-1)}(),K.on("snap.util.getattr.r",function(){return"rect"==this.type&&_(this.node,"rx")==_(this.node,"ry")?(K.stop(),_(this.node,"rx")):void 0})(-1),K.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){K.stop();var j=h(this.node);return 1==j.length?j[0]:j}})(-1),K.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),K.on("snap.util.getattr.fill",function(j){if(!j){K.stop();var G=K("snap.util.getattr.fill",this,!0).firstDefined();return o(o.deurl(G))||G}})(-1),K.on("snap.util.getattr.stroke",function(j){if(!j){K.stop();var G=K("snap.util.getattr.stroke",this,!0).firstDefined();return o(o.deurl(G))||G}})(-1),K.on("snap.util.getattr.viewBox",function(){K.stop();var j=_(this.node,"viewBox");return j?(j=j.split(A),o._.box(+j[0],+j[1],+j[2],+j[3])):void 0})(-1),K.on("snap.util.getattr.points",function(){var j=_(this.node,"points");return K.stop(),j?j.split(A):void 0})(-1),K.on("snap.util.getattr.path",function(){var j=_(this.node,"d");return K.stop(),j})(-1),K.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),K.on("snap.util.getattr.fontSize",a)(-1),K.on("snap.util.getattr.font-size",a)(-1)}),M.plugin(function(o,x,d,e,r){var n=/\S+/g,s=String,h=x.prototype;h.addClass=function(a){var v,f,c,E=s(a||"").match(n)||[],_=this.node,O=_.className.baseVal,N=O.match(n)||[];if(E.length){for(v=0;f=E[v++];)~N.indexOf(f)||N.push(f);O!=(c=N.join(" "))&&(_.className.baseVal=c)}return this},h.removeClass=function(a){var v,l,f,c,E=s(a||"").match(n)||[],_=this.node,O=_.className.baseVal,N=O.match(n)||[];if(N.length){for(v=0;f=E[v++];)~(l=N.indexOf(f))&&N.splice(l,1);O!=(c=N.join(" "))&&(_.className.baseVal=c)}return this},h.hasClass=function(a){return!!~(this.node.className.baseVal.match(n)||[]).indexOf(a)},h.toggleClass=function(a,v){if(null!=v)return v?this.addClass(a):this.removeClass(a);var l,f,c,E,_=(a||"").match(n)||[],O=this.node,N=O.className.baseVal,A=N.match(n)||[];for(l=0;c=_[l++];)~(f=A.indexOf(c))?A.splice(f,1):A.push(c);return N!=(E=A.join(" "))&&(O.className.baseVal=E),this}}),M.plugin(function(o,x,d,e,r){function n(f){return f}function s(f){return function(c){return+c.toFixed(3)+f}}var h={"+":function(f,c){return f+c},"-":function(f,c){return f-c},"/":function(f,c){return f/c},"*":function(f,c){return f*c}},a=String,v=/[a-z]+$/i,l=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;K.on("snap.util.attr",function(f){var c=a(f).match(l);if(c){var E=K.nt(),_=E.substring(E.lastIndexOf(".")+1),O=this.attr(_),N={};K.stop();var A=c[3]||"",y=O.match(v),F=h[c[1]];if(y&&y==A?f=F(parseFloat(O),+c[2]):(O=this.asPX(_),f=F(this.asPX(_),this.asPX(_,c[2]+A))),isNaN(O)||isNaN(f))return;N[_]=f,this.attr(N)}})(-10),K.on("snap.util.equal",function(f,c){var E=a(this.attr(f)||""),_=a(c).match(l);if(_){K.stop();var O=_[3]||"",N=E.match(v),A=h[_[1]];return N&&N==O?{from:parseFloat(E),to:A(parseFloat(E),+_[2]),f:s(N)}:{from:E=this.asPX(f),to:A(E,this.asPX(f,_[2]+O)),f:n}}})(-10)}),M.plugin(function(o,x,d,e,r){var n=d.prototype,s=o.is;n.rect=function(a,v,l,f,c,E){var _;return null==E&&(E=c),s(a,"object")&&"[object Object]"==a?_=a:null!=a&&(_={x:a,y:v,width:l,height:f},null!=c&&(_.rx=c,_.ry=E)),this.el("rect",_)},n.circle=function(a,v,l){var f;return s(a,"object")&&"[object Object]"==a?f=a:null!=a&&(f={cx:a,cy:v,r:l}),this.el("circle",f)};var h=function(){function a(){this.parentNode.removeChild(this)}return function(v,l){var f=e.doc.createElement("img"),c=e.doc.body;f.style.cssText="position:absolute;left:-9999em;top:-9999em",f.onload=function(){l.call(f),f.onload=f.onerror=null,c.removeChild(f)},f.onerror=a,c.appendChild(f),f.src=v}}();n.image=function(a,v,l,f,c){var E=this.el("image");if(s(a,"object")&&"src"in a)E.attr(a);else if(null!=a){var _={"xlink:href":a,preserveAspectRatio:"none"};null!=v&&null!=l&&(_.x=v,_.y=l),null!=f&&null!=c?(_.width=f,_.height=c):h(a,function(){o._.$(E.node,{width:this.offsetWidth,height:this.offsetHeight})}),o._.$(E.node,_)}return E},n.ellipse=function(a,v,l,f){var c;return s(a,"object")&&"[object Object]"==a?c=a:null!=a&&(c={cx:a,cy:v,rx:l,ry:f}),this.el("ellipse",c)},n.path=function(a){var v;return s(a,"object")&&!s(a,"array")?v=a:a&&(v={d:a}),this.el("path",v)},n.group=n.g=function(a){var v=this.el("g");return 1==arguments.length&&a&&!a.type?v.attr(a):arguments.length&&v.add(Array.prototype.slice.call(arguments,0)),v},n.svg=function(a,v,l,f,c,E,_,O){var N={};return s(a,"object")&&null==v?N=a:(null!=a&&(N.x=a),null!=v&&(N.y=v),null!=l&&(N.width=l),null!=f&&(N.height=f),null!=c&&null!=E&&null!=_&&null!=O&&(N.viewBox=[c,E,_,O])),this.el("svg",N)},n.mask=function(a){var v=this.el("mask");return 1==arguments.length&&a&&!a.type?v.attr(a):arguments.length&&v.add(Array.prototype.slice.call(arguments,0)),v},n.ptrn=function(a,v,l,f,c,E,_,O){if(s(a,"object"))var N=a;else N={patternUnits:"userSpaceOnUse"},a&&(N.x=a),v&&(N.y=v),null!=l&&(N.width=l),null!=f&&(N.height=f),N.viewBox=null!=c&&null!=E&&null!=_&&null!=O?[c,E,_,O]:[a||0,v||0,l||0,f||0];return this.el("pattern",N)},n.use=function(a){return null!=a?(a instanceof x&&(a.attr("id")||a.attr({id:o._.id(a)}),a=a.attr("id")),"#"==String(a).charAt()&&(a=a.substring(1)),this.el("use",{"xlink:href":"#"+a})):x.prototype.use.call(this)},n.symbol=function(a,v,l,f){var c={};return null!=a&&null!=v&&null!=l&&null!=f&&(c.viewBox=[a,v,l,f]),this.el("symbol",c)},n.text=function(a,v,l){var f={};return s(a,"object")?f=a:null!=a&&(f={x:a,y:v,text:l||""}),this.el("text",f)},n.line=function(a,v,l,f){var c={};return s(a,"object")?c=a:null!=a&&(c={x1:a,x2:l,y1:v,y2:f}),this.el("line",c)},n.polyline=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments,0));var v={};return s(a,"object")&&!s(a,"array")?v=a:null!=a&&(v={points:a}),this.el("polyline",v)},n.polygon=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments,0));var v={};return s(a,"object")&&!s(a,"array")?v=a:null!=a&&(v={points:a}),this.el("polygon",v)},function(){function a(){return this.selectAll("stop")}function v(N,A){var y=O("stop"),F={offset:+A+"%"};N=o.color(N),F["stop-color"]=N.hex,N.opacity<1&&(F["stop-opacity"]=N.opacity),O(y,F);for(var j,G=this.stops(),P=0;P<G.length;P++){if(parseFloat(G[P].attr("offset"))>A){this.node.insertBefore(y,G[P].node),j=!0;break}}return j||this.node.appendChild(y),this}function l(){if("linearGradient"==this.type){var N=O(this.node,"x1")||0,A=O(this.node,"x2")||1,y=O(this.node,"y1")||0,F=O(this.node,"y2")||0;return o._.box(N,y,math.abs(A-N),math.abs(F-y))}var j=this.node.cx||.5,G=this.node.cy||.5,P=this.node.r||0;return o._.box(j-P,G-P,2*P,2*P)}function f(N){var A=N,y=this.stops();if("string"==typeof N&&(A=K("snap.util.grad.parse",null,"l(0,0,0,1)"+N).firstDefined().stops),o.is(A,"array")){for(var F=0;F<y.length;F++)if(A[F]){var j=o.color(A[F].color),G={offset:A[F].offset+"%"};G["stop-color"]=j.hex,j.opacity<1&&(G["stop-opacity"]=j.opacity),y[F].attr(G)}else y[F].remove();for(F=y.length;F<A.length;F++)this.addStop(A[F].color,A[F].offset);return this}}function E(N,A,y,F,j){var G=o._.make("linearGradient",N);return G.stops=a,G.addStop=v,G.getBBox=l,G.setStops=f,null!=A&&O(G.node,{x1:A,y1:y,x2:F,y2:j}),G}function _(N,A,y,F,j,G){var P=o._.make("radialGradient",N);return P.stops=a,P.addStop=v,P.getBBox=l,null!=A&&O(P.node,{cx:A,cy:y,r:F}),null!=j&&null!=G&&O(P.node,{fx:j,fy:G}),P}var O=o._.$;n.gradient=function(N){return function c(N,A){var y,F=K("snap.util.grad.parse",null,A).firstDefined();if(!F)return null;F.params.unshift(N),y="l"==F.type.toLowerCase()?E.apply(0,F.params):_.apply(0,F.params),F.type!=F.type.toLowerCase()&&O(y.node,{gradientUnits:"userSpaceOnUse"});for(var j=F.stops,G=j.length,P=0;G>P;P++){var z=j[P];y.addStop(z.color,z.offset)}return y}(this.defs,N)},n.gradientLinear=function(N,A,y,F){return E(this.defs,N,A,y,F)},n.gradientRadial=function(N,A,y,F,j){return _(this.defs,N,A,y,F,j)},n.toString=function(){var N,A=this.node.ownerDocument,y=A.createDocumentFragment(),F=A.createElement("div"),j=this.node.cloneNode(!0);return y.appendChild(F),F.appendChild(j),o._.$(j,{xmlns:"http://www.w3.org/2000/svg"}),N=F.innerHTML,y.removeChild(y.firstChild),N},n.toDataURL=function(){return q&&q.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},n.clear=function(){for(var N,A=this.node.firstChild;A;)N=A.nextSibling,"defs"!=A.tagName?A.parentNode.removeChild(A):n.clear.call({node:A}),A=N}}()}),M.plugin(function(o,x,d,e){function r(me){var Ee=r.ps=r.ps||{};return Ee[me]?Ee[me].sleep=100:Ee[me]={sleep:100},setTimeout(function(){for(var Ce in Ee)Ee[Me](Ce)&&Ce!=me&&(Ee[Ce].sleep--,!Ee[Ce].sleep&&delete Ee[Ce])}),Ee[me]}function n(me,Ee,Ce,H){return null==me&&(me=Ee=Ce=H=0),null==Ee&&(Ee=me.y,Ce=me.width,H=me.height,me=me.x),{x:me,y:Ee,width:Ce,w:Ce,height:H,h:H,x2:me+Ce,y2:Ee+H,cx:me+Ce/2,cy:Ee+H/2,r1:Q.min(Ce,H)/2,r2:Q.max(Ce,H)/2,r0:Q.sqrt(Ce*Ce+H*H)/2,path:Y(me,Ee,Ce,H),vb:[me,Ee,Ce,H].join(" ")}}function s(){return this.join(",").replace(oe,"$1")}function h(me){var Ee=Ne(me);return Ee.toString=s,Ee}function a(me,Ee,Ce,H,Z,ae,de,_e,be){return null==be?O(me,Ee,Ce,H,Z,ae,de,_e):l(me,Ee,Ce,H,Z,ae,de,_e,function N(me,Ee,Ce,H,Z,ae,de,_e,be){if(!(0>be||O(me,Ee,Ce,H,Z,ae,de,_e)<be)){var Ae,Ie=1,Le=Ie/2,qe=Ie-Le,ze=.01;for(Ae=O(me,Ee,Ce,H,Z,ae,de,_e,qe);Pe(Ae-be)>ze;)Ae=O(me,Ee,Ce,H,Z,ae,de,_e,qe+=(be>Ae?1:-1)*(Le/=2));return qe}}(me,Ee,Ce,H,Z,ae,de,_e,be))}function v(me,Ee){function Ce(H){return+(+H).toFixed(3)}return o._.cacher(function(H,Z,ae){H instanceof x&&(H=H.attr("d"));for(var de,_e,be,Ae,Ie,Le="",qe={},ze=0,Be=0,Ze=(H=he(H)).length;Ze>Be;Be++){if("M"==(be=H[Be])[0])de=+be[1],_e=+be[2];else{if(ze+(Ae=a(de,_e,be[1],be[2],be[3],be[4],be[5],be[6]))>Z){if(Ee&&!qe.start){if(Le+=["C"+Ce((Ie=a(de,_e,be[1],be[2],be[3],be[4],be[5],be[6],Z-ze)).start.x),Ce(Ie.start.y),Ce(Ie.m.x),Ce(Ie.m.y),Ce(Ie.x),Ce(Ie.y)],ae)return Le;qe.start=Le,Le=["M"+Ce(Ie.x),Ce(Ie.y)+"C"+Ce(Ie.n.x),Ce(Ie.n.y),Ce(Ie.end.x),Ce(Ie.end.y),Ce(be[5]),Ce(be[6])].join(),ze+=Ae,de=+be[5],_e=+be[6];continue}if(!me&&!Ee)return a(de,_e,be[1],be[2],be[3],be[4],be[5],be[6],Z-ze)}ze+=Ae,de=+be[5],_e=+be[6]}Le+=be.shift()+be}return qe.end=Le,me?ze:Ee?qe:l(de,_e,be[0],be[1],be[2],be[3],be[4],be[5],1)},null,o._.clone)}function l(me,Ee,Ce,H,Z,ae,de,_e,be){var Ae=1-be,Ie=ve(Ae,3),Le=ve(Ae,2),qe=be*be,ze=qe*be,rt=me+2*be*(Ce-me)+qe*(Z-2*Ce+me),tt=Ee+2*be*(H-Ee)+qe*(ae-2*H+Ee),it=Ce+2*be*(Z-Ce)+qe*(de-2*Z+Ce),st=H+2*be*(ae-H)+qe*(_e-2*ae+H);return{x:Ie*me+3*Le*be*Ce+3*Ae*be*be*Z+ze*de,y:Ie*Ee+3*Le*be*H+3*Ae*be*be*ae+ze*_e,m:{x:rt,y:tt},n:{x:it,y:st},start:{x:Ae*me+be*Ce,y:Ae*Ee+be*H},end:{x:Ae*Z+be*de,y:Ae*ae+be*_e},alpha:90-180*Q.atan2(rt-it,tt-st)/X}}function f(me,Ee,Ce,H,Z,ae,de,_e){o.is(me,"array")||(me=[me,Ee,Ce,H,Z,ae,de,_e]);var be=ne.apply(null,me);return n(be.min.x,be.min.y,be.max.x-be.min.x,be.max.y-be.min.y)}function c(me,Ee,Ce){return Ee>=me.x&&Ee<=me.x+me.width&&Ce>=me.y&&Ce<=me.y+me.height}function E(me,Ee){return me=n(me),c(Ee=n(Ee),me.x,me.y)||c(Ee,me.x2,me.y)||c(Ee,me.x,me.y2)||c(Ee,me.x2,me.y2)||c(me,Ee.x,Ee.y)||c(me,Ee.x2,Ee.y)||c(me,Ee.x,Ee.y2)||c(me,Ee.x2,Ee.y2)||(me.x<Ee.x2&&me.x>Ee.x||Ee.x<me.x2&&Ee.x>me.x)&&(me.y<Ee.y2&&me.y>Ee.y||Ee.y<me.y2&&Ee.y>me.y)}function _(me,Ee,Ce,H,Z){return me*(me*(-3*Ee+9*Ce-9*H+3*Z)+6*Ee-12*Ce+6*H)-3*Ee+3*Ce}function O(me,Ee,Ce,H,Z,ae,de,_e,be){null==be&&(be=1);for(var Ae=(be=be>1?1:0>be?0:be)/2,Le=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],qe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ze=0,Be=0;12>Be;Be++){var Ze=Ae*Le[Be]+Ae,rt=_(Ze,me,Ce,Z,de),tt=_(Ze,Ee,H,ae,_e),it=rt*rt+tt*tt;ze+=qe[Be]*Q.sqrt(it)}return Ae*ze}function A(me,Ee,Ce,H,Z,ae,de,_e){if(!(pe(me,Ce)<se(Z,de)||se(me,Ce)>pe(Z,de)||pe(Ee,H)<se(ae,_e)||se(Ee,H)>pe(ae,_e))){var Ie=(me-Ce)*(ae-_e)-(Ee-H)*(Z-de);if(Ie){var Le=((me*H-Ee*Ce)*(Z-de)-(me-Ce)*(Z*_e-ae*de))/Ie,qe=((me*H-Ee*Ce)*(ae-_e)-(Ee-H)*(Z*_e-ae*de))/Ie,ze=+Le.toFixed(2),Be=+qe.toFixed(2);if(!(ze<+se(me,Ce).toFixed(2)||ze>+pe(me,Ce).toFixed(2)||ze<+se(Z,de).toFixed(2)||ze>+pe(Z,de).toFixed(2)||Be<+se(Ee,H).toFixed(2)||Be>+pe(Ee,H).toFixed(2)||Be<+se(ae,_e).toFixed(2)||Be>+pe(ae,_e).toFixed(2)))return{x:Le,y:qe}}}}function y(me,Ee,Ce){if(!E(f(me),f(Ee)))return Ce?0:[];for(var _e=~~(O.apply(0,me)/8),be=~~(O.apply(0,Ee)/8),Ae=[],Ie=[],Le={},qe=Ce?0:[],ze=0;_e+1>ze;ze++){var Be=l.apply(0,me.concat(ze/_e));Ae.push({x:Be.x,y:Be.y,t:ze/_e})}for(ze=0;be+1>ze;ze++)Be=l.apply(0,Ee.concat(ze/be)),Ie.push({x:Be.x,y:Be.y,t:ze/be});for(ze=0;_e>ze;ze++)for(var Ze=0;be>Ze;Ze++){var rt=Ae[ze],tt=Ae[ze+1],it=Ie[Ze],st=Ie[Ze+1],Ye=Pe(tt.x-rt.x)<.001?"y":"x",$e=Pe(st.x-it.x)<.001?"y":"x",at=A(rt.x,rt.y,tt.x,tt.y,it.x,it.y,st.x,st.y);if(at){if(Le[at.x.toFixed(4)]==at.y.toFixed(4))continue;Le[at.x.toFixed(4)]=at.y.toFixed(4);var ct=rt.t+Pe((at[Ye]-rt[Ye])/(tt[Ye]-rt[Ye]))*(tt.t-rt.t),ut=it.t+Pe((at[$e]-it[$e])/(st[$e]-it[$e]))*(st.t-it.t);ct>=0&&1>=ct&&ut>=0&&1>=ut&&(Ce?qe++:qe.push({x:at.x,y:at.y,t1:ct,t2:ut}))}}return qe}function G(me,Ee,Ce){me=he(me),Ee=he(Ee);for(var H,Z,ae,de,_e,be,Ae,Ie,Le,qe,ze=Ce?0:[],Be=0,Ze=me.length;Ze>Be;Be++){var rt=me[Be];if("M"==rt[0])H=_e=rt[1],Z=be=rt[2];else{"C"==rt[0]?(Le=[H,Z].concat(rt.slice(1)),H=Le[6],Z=Le[7]):(Le=[H,Z,H,Z,_e,be,_e,be],H=_e,Z=be);for(var tt=0,it=Ee.length;it>tt;tt++){var st=Ee[tt];if("M"==st[0])ae=Ae=st[1],de=Ie=st[2];else{"C"==st[0]?(qe=[ae,de].concat(st.slice(1)),ae=qe[6],de=qe[7]):(qe=[ae,de,ae,de,Ae,Ie,Ae,Ie],ae=Ae,de=Ie);var Ye=y(Le,qe,Ce);if(Ce)ze+=Ye;else{for(var $e=0,at=Ye.length;at>$e;$e++)Ye[$e].segment1=Be,Ye[$e].segment2=tt,Ye[$e].bez1=Le,Ye[$e].bez2=qe;ze=ze.concat(Ye)}}}}}return ze}function z(me){var Ee=r(me);if(Ee.bbox)return Ne(Ee.bbox);if(!me)return n();for(var Ce,H=0,Z=0,ae=[],de=[],_e=0,be=(me=he(me)).length;be>_e;_e++)if("M"==(Ce=me[_e])[0])H=Ce[1],Z=Ce[2],ae.push(H),de.push(Z);else{var Ae=ne(H,Z,Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6]);ae=ae.concat(Ae.min.x,Ae.max.x),de=de.concat(Ae.min.y,Ae.max.y),H=Ce[5],Z=Ce[6]}var Ie=se.apply(0,ae),Le=se.apply(0,de),Be=n(Ie,Le,pe.apply(0,ae)-Ie,pe.apply(0,de)-Le);return Ee.bbox=Ne(Be),Be}function Y(me,Ee,Ce,H,Z){if(Z)return[["M",+me+ +Z,Ee],["l",Ce-2*Z,0],["a",Z,Z,0,0,1,Z,Z],["l",0,H-2*Z],["a",Z,Z,0,0,1,-Z,Z],["l",2*Z-Ce,0],["a",Z,Z,0,0,1,-Z,-Z],["l",0,2*Z-H],["a",Z,Z,0,0,1,Z,-Z],["z"]];var ae=[["M",me,Ee],["l",Ce,0],["l",0,H],["l",-Ce,0],["z"]];return ae.toString=s,ae}function ie(me,Ee,Ce,H,Z){if(null==Z&&null==H&&(H=Ce),me=+me,Ee=+Ee,Ce=+Ce,H=+H,null!=Z)var ae=Math.PI/180,de=me+Ce*Math.cos(-H*ae),_e=me+Ce*Math.cos(-Z*ae),Ie=[["M",de,Ee+Ce*Math.sin(-H*ae)],["A",Ce,Ce,0,+(Z-H>180),0,_e,Ee+Ce*Math.sin(-Z*ae)]];else Ie=[["M",me,Ee],["m",0,-H],["a",Ce,H,0,1,1,0,2*H],["a",Ce,H,0,1,1,0,-2*H],["z"]];return Ie.toString=s,Ie}function fe(me){var Ee=r(me);if(Ee.abs)return h(Ee.abs);if(ke(me,"array")&&ke(me&&me[0],"array")||(me=o.parsePathString(me)),!me||!me.length)return[["M",0,0]];var Ce,H=[],Z=0,ae=0,de=0,_e=0,be=0;"M"==me[0][0]&&(de=Z=+me[0][1],_e=ae=+me[0][2],be++,H[0]=["M",Z,ae]);for(var Ae,Ie,Le=3==me.length&&"M"==me[0][0]&&"R"==me[1][0].toUpperCase()&&"Z"==me[2][0].toUpperCase(),qe=be,ze=me.length;ze>qe;qe++){if(H.push(Ae=[]),(Ce=(Ie=me[qe])[0])!=Ce.toUpperCase())switch(Ae[0]=Ce.toUpperCase(),Ae[0]){case"A":Ae[1]=Ie[1],Ae[2]=Ie[2],Ae[3]=Ie[3],Ae[4]=Ie[4],Ae[5]=Ie[5],Ae[6]=+Ie[6]+Z,Ae[7]=+Ie[7]+ae;break;case"V":Ae[1]=+Ie[1]+ae;break;case"H":Ae[1]=+Ie[1]+Z;break;case"R":for(var Be=[Z,ae].concat(Ie.slice(1)),Ze=2,rt=Be.length;rt>Ze;Ze++)Be[Ze]=+Be[Ze]+Z,Be[++Ze]=+Be[Ze]+ae;H.pop(),H=H.concat(ge(Be,Le));break;case"O":H.pop(),(Be=ie(Z,ae,Ie[1],Ie[2])).push(Be[0]),H=H.concat(Be);break;case"U":H.pop(),H=H.concat(ie(Z,ae,Ie[1],Ie[2],Ie[3])),Ae=["U"].concat(H[H.length-1].slice(-2));break;case"M":de=+Ie[1]+Z,_e=+Ie[2]+ae;default:for(Ze=1,rt=Ie.length;rt>Ze;Ze++)Ae[Ze]=+Ie[Ze]+(Ze%2?Z:ae)}else if("R"==Ce)Be=[Z,ae].concat(Ie.slice(1)),H.pop(),H=H.concat(ge(Be,Le)),Ae=["R"].concat(Ie.slice(-2));else if("O"==Ce)H.pop(),(Be=ie(Z,ae,Ie[1],Ie[2])).push(Be[0]),H=H.concat(Be);else if("U"==Ce)H.pop(),H=H.concat(ie(Z,ae,Ie[1],Ie[2],Ie[3])),Ae=["U"].concat(H[H.length-1].slice(-2));else for(var tt=0,it=Ie.length;it>tt;tt++)Ae[tt]=Ie[tt];if("O"!=(Ce=Ce.toUpperCase()))switch(Ae[0]){case"Z":Z=+de,ae=+_e;break;case"H":Z=Ae[1];break;case"V":ae=Ae[1];break;case"M":de=Ae[Ae.length-2],_e=Ae[Ae.length-1];default:Z=Ae[Ae.length-2],ae=Ae[Ae.length-1]}}return H.toString=s,Ee.abs=h(H),H}function re(me,Ee,Ce,H){return[me,Ee,Ce,H,Ce,H]}function V(me,Ee,Ce,H,Z,ae){var de=.3333333333333333,_e=2/3;return[de*me+_e*Ce,de*Ee+_e*H,de*Z+_e*Ce,de*ae+_e*H,Z,ae]}function $(me,Ee,Ce,H,Z,ae,de,_e,be,Ae){var Ie,Le=120*X/180,qe=X/180*(+Z||0),ze=[],Be=o._.cacher(function(Or,mr,$t){return{x:Or*Q.cos($t)-mr*Q.sin($t),y:Or*Q.sin($t)+mr*Q.cos($t)}});if(!Ce||!H)return[me,Ee,_e,be,_e,be];if(Ae)ct=Ae[0],ut=Ae[1],$e=Ae[2],at=Ae[3];else{me=(Ie=Be(me,Ee,-qe)).x,Ee=Ie.y,_e=(Ie=Be(_e,be,-qe)).x,be=Ie.y;var Ze=(Q.cos(X/180*Z),Q.sin(X/180*Z),(me-_e)/2),rt=(Ee-be)/2,tt=Ze*Ze/(Ce*Ce)+rt*rt/(H*H);tt>1&&(Ce*=tt=Q.sqrt(tt),H*=tt);var it=Ce*Ce,st=H*H,Ye=(ae==de?-1:1)*Q.sqrt(Pe((it*st-it*rt*rt-st*Ze*Ze)/(it*rt*rt+st*Ze*Ze))),$e=Ye*Ce*rt/H+(me+_e)/2,at=Ye*-H*Ze/Ce+(Ee+be)/2,ct=Q.asin(((Ee-at)/H).toFixed(9)),ut=Q.asin(((be-at)/H).toFixed(9));0>(ct=$e>me?X-ct:ct)&&(ct=2*X+ct),0>(ut=$e>_e?X-ut:ut)&&(ut=2*X+ut),de&&ct>ut&&(ct-=2*X),!de&&ut>ct&&(ut-=2*X)}var dr=ut-ct;if(Pe(dr)>Le){var Fn=ut,Cn=_e,Sr=be;ut=ct+Le*(de&&ut>ct?1:-1),ze=$(_e=$e+Ce*Q.cos(ut),be=at+H*Q.sin(ut),Ce,H,Z,0,de,Cn,Sr,[ut,Fn,$e,at])}dr=ut-ct;var Sn=Q.cos(ct),Tr=Q.sin(ct),Tn=Q.cos(ut),Wt=Q.sin(ut),vr=Q.tan(dr/4),Ht=4/3*Ce*vr,yr=4/3*H*vr,jr=[me,Ee],Mt=[me+Ht*Tr,Ee-yr*Sn],gr=[_e+Ht*Wt,be-yr*Tn],Ir=[_e,be];if(Mt[0]=2*jr[0]-Mt[0],Mt[1]=2*jr[1]-Mt[1],Ae)return[Mt,gr,Ir].concat(ze);for(var Rr=[],Tt=0,Nr=(ze=[Mt,gr,Ir].concat(ze).join().split(",")).length;Nr>Tt;Tt++)Rr[Tt]=Tt%2?Be(ze[Tt-1],ze[Tt],qe).y:Be(ze[Tt],ze[Tt+1],qe).x;return Rr}function ne(me,Ee,Ce,H,Z,ae,de,_e){for(var be,Ae,Ie,Le,qe,ze,Be,Ze,rt=[],tt=[[],[]],it=0;2>it;++it)if(0==it?(Ae=6*me-12*Ce+6*Z,be=-3*me+9*Ce-9*Z+3*de,Ie=3*Ce-3*me):(Ae=6*Ee-12*H+6*ae,be=-3*Ee+9*H-9*ae+3*_e,Ie=3*H-3*Ee),Pe(be)<1e-12){if(Pe(Ae)<1e-12)continue;(Le=-Ie/Ae)>0&&1>Le&&rt.push(Le)}else Be=Ae*Ae-4*Ie*be,Ze=Q.sqrt(Be),0>Be||((qe=(-Ae+Ze)/(2*be))>0&&1>qe&&rt.push(qe),(ze=(-Ae-Ze)/(2*be))>0&&1>ze&&rt.push(ze));for(var st,Ye=rt.length,$e=Ye;Ye--;)st=1-(Le=rt[Ye]),tt[0][Ye]=st*st*st*me+3*st*st*Le*Ce+3*st*Le*Le*Z+Le*Le*Le*de,tt[1][Ye]=st*st*st*Ee+3*st*st*Le*H+3*st*Le*Le*ae+Le*Le*Le*_e;return tt[0][$e]=me,tt[1][$e]=Ee,tt[0][$e+1]=de,tt[1][$e+1]=_e,tt[0].length=tt[1].length=$e+2,{min:{x:se.apply(0,tt[0]),y:se.apply(0,tt[1])},max:{x:pe.apply(0,tt[0]),y:pe.apply(0,tt[1])}}}function he(me,Ee){var Ce=!Ee&&r(me);if(!Ee&&Ce.curve)return h(Ce.curve);for(var H=fe(me),Z=Ee&&fe(Ee),ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},de={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},_e=function(Ye,$e,at){var ct,ut;if(!Ye)return["C",$e.x,$e.y,$e.x,$e.y,$e.x,$e.y];switch(!(Ye[0]in{T:1,Q:1})&&($e.qx=$e.qy=null),Ye[0]){case"M":$e.X=Ye[1],$e.Y=Ye[2];break;case"A":Ye=["C"].concat($.apply(0,[$e.x,$e.y].concat(Ye.slice(1))));break;case"S":"C"==at||"S"==at?(ct=2*$e.x-$e.bx,ut=2*$e.y-$e.by):(ct=$e.x,ut=$e.y),Ye=["C",ct,ut].concat(Ye.slice(1));break;case"T":"Q"==at||"T"==at?($e.qx=2*$e.x-$e.qx,$e.qy=2*$e.y-$e.qy):($e.qx=$e.x,$e.qy=$e.y),Ye=["C"].concat(V($e.x,$e.y,$e.qx,$e.qy,Ye[1],Ye[2]));break;case"Q":$e.qx=Ye[1],$e.qy=Ye[2],Ye=["C"].concat(V($e.x,$e.y,Ye[1],Ye[2],Ye[3],Ye[4]));break;case"L":Ye=["C"].concat(re($e.x,$e.y,Ye[1],Ye[2]));break;case"H":Ye=["C"].concat(re($e.x,$e.y,Ye[1],$e.y));break;case"V":Ye=["C"].concat(re($e.x,$e.y,$e.x,Ye[1]));break;case"Z":Ye=["C"].concat(re($e.x,$e.y,$e.X,$e.Y))}return Ye},be=function(Ye,$e){if(Ye[$e].length>7){Ye[$e].shift();for(var at=Ye[$e];at.length;)Ie[$e]="A",Z&&(Le[$e]="A"),Ye.splice($e++,0,["C"].concat(at.splice(0,6)));Ye.splice($e,1),Ze=pe(H.length,Z&&Z.length||0)}},Ae=function(Ye,$e,at,ct,ut){Ye&&$e&&"M"==Ye[ut][0]&&"M"!=$e[ut][0]&&($e.splice(ut,0,["M",ct.x,ct.y]),at.bx=0,at.by=0,at.x=Ye[ut][1],at.y=Ye[ut][2],Ze=pe(H.length,Z&&Z.length||0))},Ie=[],Le=[],qe="",ze="",Be=0,Ze=pe(H.length,Z&&Z.length||0);Ze>Be;Be++){H[Be]&&(qe=H[Be][0]),"C"!=qe&&(Ie[Be]=qe,Be&&(ze=Ie[Be-1])),H[Be]=_e(H[Be],ae,ze),"A"!=Ie[Be]&&"C"==qe&&(Ie[Be]="C"),be(H,Be),Z&&(Z[Be]&&(qe=Z[Be][0]),"C"!=qe&&(Le[Be]=qe,Be&&(ze=Le[Be-1])),Z[Be]=_e(Z[Be],de,ze),"A"!=Le[Be]&&"C"==qe&&(Le[Be]="C"),be(Z,Be)),Ae(H,Z,ae,de,Be),Ae(Z,H,de,ae,Be);var rt=H[Be],tt=Z&&Z[Be],it=rt.length,st=Z&&tt.length;ae.x=rt[it-2],ae.y=rt[it-1],ae.bx=k(rt[it-4])||ae.x,ae.by=k(rt[it-3])||ae.y,de.bx=Z&&(k(tt[st-4])||de.x),de.by=Z&&(k(tt[st-3])||de.y),de.x=Z&&tt[st-2],de.y=Z&&tt[st-1]}return Z||(Ce.curve=h(H)),Z?[H,Z]:H}function ge(me,Ee){for(var Ce=[],H=0,Z=me.length;Z-2*!Ee>H;H+=2){var ae=[{x:+me[H-2],y:+me[H-1]},{x:+me[H],y:+me[H+1]},{x:+me[H+2],y:+me[H+3]},{x:+me[H+4],y:+me[H+5]}];Ee?H?Z-4==H?ae[3]={x:+me[0],y:+me[1]}:Z-2==H&&(ae[2]={x:+me[0],y:+me[1]},ae[3]={x:+me[2],y:+me[3]}):ae[0]={x:+me[Z-2],y:+me[Z-1]}:Z-4==H?ae[3]=ae[2]:H||(ae[0]={x:+me[H],y:+me[H+1]}),Ce.push(["C",(-ae[0].x+6*ae[1].x+ae[2].x)/6,(-ae[0].y+6*ae[1].y+ae[2].y)/6,(ae[1].x+6*ae[2].x-ae[3].x)/6,(ae[1].y+6*ae[2].y-ae[3].y)/6,ae[2].x,ae[2].y])}return Ce}var ce=x.prototype,ke=o.is,Ne=o._.clone,Me="hasOwnProperty",oe=/,?([a-z]),?/gi,k=parseFloat,Q=Math,X=Q.PI,se=Q.min,pe=Q.max,ve=Q.pow,Pe=Q.abs,Qe=v(1),Ue=v(),We=v(0,1),Ke=o._unit2px,ot={path:function(me){return me.attr("path")},circle:function(me){var Ee=Ke(me);return ie(Ee.cx,Ee.cy,Ee.r)},ellipse:function(me){var Ee=Ke(me);return ie(Ee.cx||0,Ee.cy||0,Ee.rx,Ee.ry)},rect:function(me){var Ee=Ke(me);return Y(Ee.x||0,Ee.y||0,Ee.width,Ee.height,Ee.rx,Ee.ry)},image:function(me){var Ee=Ke(me);return Y(Ee.x||0,Ee.y||0,Ee.width,Ee.height)},line:function(me){return"M"+[me.attr("x1")||0,me.attr("y1")||0,me.attr("x2"),me.attr("y2")]},polyline:function(me){return"M"+me.attr("points")},polygon:function(me){return"M"+me.attr("points")+"z"},deflt:function(me){var Ee=me.node.getBBox();return Y(Ee.x,Ee.y,Ee.width,Ee.height)}};o.path=r,o.path.getTotalLength=Qe,o.path.getPointAtLength=Ue,o.path.getSubpath=function(me,Ee,Ce){if(this.getTotalLength(me)-Ce<1e-6)return We(me,Ee).end;var H=We(me,Ce,1);return Ee?We(H,Ee).end:H},ce.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},ce.getPointAtLength=function(me){return Ue(this.attr("d"),me)},ce.getSubpath=function(me,Ee){return o.path.getSubpath(this.attr("d"),me,Ee)},o._.box=n,o.path.findDotsAtSegment=l,o.path.bezierBBox=f,o.path.isPointInsideBBox=c,o.closest=function(me,Ee,Ce,H){for(var Z=100,ae=n(me-Z/2,Ee-Z/2,Z,Z),de=[],_e=Ce[0].hasOwnProperty("x")?function(Ze){return{x:Ce[Ze].x,y:Ce[Ze].y}}:function(Ze){return{x:Ce[Ze],y:H[Ze]}},be=0;1e6>=Z&&!be;){for(var Ae=0,Ie=Ce.length;Ie>Ae;Ae++){var Le=_e(Ae);if(c(ae,Le.x,Le.y)){be++,de.push(Le);break}}be||(ae=n(me-(Z*=2)/2,Ee-Z/2,Z,Z))}if(1e6!=Z){var qe,ze=1/0;for(Ae=0,Ie=de.length;Ie>Ae;Ae++){var Be=o.len(me,Ee,de[Ae].x,de[Ae].y);ze>Be&&(ze=Be,de[Ae].len=Be,qe=de[Ae])}return qe}},o.path.isBBoxIntersect=E,o.path.intersection=function F(me,Ee){return G(me,Ee)},o.path.intersectionNumber=function j(me,Ee){return G(me,Ee,1)},o.path.isPointInside=function P(me,Ee,Ce){var H=z(me);return c(H,Ee,Ce)&&G(me,[["M",Ee,Ce],["H",H.x2+10]],1)%2==1},o.path.getBBox=z,o.path.get=ot,o.path.toRelative=function ye(me){var Ee=r(me),Ce=String.prototype.toLowerCase;if(Ee.rel)return h(Ee.rel);o.is(me,"array")&&o.is(me&&me[0],"array")||(me=o.parsePathString(me));var H=[],Z=0,ae=0,de=0,_e=0,be=0;"M"==me[0][0]&&(de=Z=me[0][1],_e=ae=me[0][2],be++,H.push(["M",Z,ae]));for(var Ae=be,Ie=me.length;Ie>Ae;Ae++){var Le=H[Ae]=[],qe=me[Ae];if(qe[0]!=Ce.call(qe[0]))switch(Le[0]=Ce.call(qe[0]),Le[0]){case"a":Le[1]=qe[1],Le[2]=qe[2],Le[3]=qe[3],Le[4]=qe[4],Le[5]=qe[5],Le[6]=+(qe[6]-Z).toFixed(3),Le[7]=+(qe[7]-ae).toFixed(3);break;case"v":Le[1]=+(qe[1]-ae).toFixed(3);break;case"m":de=qe[1],_e=qe[2];default:for(var ze=1,Be=qe.length;Be>ze;ze++)Le[ze]=+(qe[ze]-(ze%2?Z:ae)).toFixed(3)}else{Le=H[Ae]=[],"m"==qe[0]&&(de=qe[1]+Z,_e=qe[2]+ae);for(var Ze=0,rt=qe.length;rt>Ze;Ze++)H[Ae][Ze]=qe[Ze]}var tt=H[Ae].length;switch(H[Ae][0]){case"z":Z=de,ae=_e;break;case"h":Z+=+H[Ae][tt-1];break;case"v":ae+=+H[Ae][tt-1];break;default:Z+=+H[Ae][tt-2],ae+=+H[Ae][tt-1]}}return H.toString=s,Ee.rel=h(H),H},o.path.toAbsolute=fe,o.path.toCubic=he,o.path.map=function xe(me,Ee){if(!Ee)return me;var Ce,H,Z,ae,de,_e,be;for(Z=0,de=(me=he(me)).length;de>Z;Z++)for(ae=1,_e=(be=me[Z]).length;_e>ae;ae+=2)Ce=Ee.x(be[ae],be[ae+1]),H=Ee.y(be[ae],be[ae+1]),be[ae]=Ce,be[ae+1]=H;return me},o.path.toString=s,o.path.clone=h}),M.plugin(function(o,x,d,e){var r=Math.max,n=Math.min,s=function(a){if(this.items=[],this.bindings={},this.length=0,this.type="set",a)for(var v=0,l=a.length;l>v;v++)a[v]&&(this[this.items.length]=this.items[this.items.length]=a[v],this.length++)},h=s.prototype;h.push=function(){for(var a,v,l=0,f=arguments.length;f>l;l++)(a=arguments[l])&&(this[v=this.items.length]=this.items[v]=a,this.length++);return this},h.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},h.forEach=function(a,v){for(var l=0,f=this.items.length;f>l;l++)if(!1===a.call(v,this.items[l],l))return this;return this},h.animate=function(a,v,l,f){"function"!=typeof l||l.length||(f=l,l=ee.linear),a instanceof o._.Animation&&(f=a.callback,l=a.easing,v=l.dur,a=a.attr);var c=arguments;if(o.is(a,"array")&&o.is(c[c.length-1],"array"))var E=!0;var _,O=function(){_?this.b=_:_=this.b},N=0,A=this,y=f&&function(){++N==A.length&&f.call(this)};return this.forEach(function(F,j){K.once("snap.animcreated."+F.id,O),E?c[j]&&F.animate.apply(F,c[j]):F.animate(a,v,l,y)})},h.remove=function(){for(;this.length;)this.pop().remove();return this},h.bind=function(a,v,l){var f={};if("function"==typeof v)this.bindings[a]=v;else{var c=l||a;this.bindings[a]=function(E){f[c]=E,v.attr(f)}}return this},h.attr=function(a){var v={};for(var l in a)this.bindings[l]?this.bindings[l](a[l]):v[l]=a[l];for(var f=0,c=this.items.length;c>f;f++)this.items[f].attr(v);return this},h.clear=function(){for(;this.length;)this.pop()},h.splice=function(a,v,l){a=0>a?r(this.length+a,0):a,v=r(0,n(this.length-a,v));var f,c=[],E=[],_=[];for(f=2;f<arguments.length;f++)_.push(arguments[f]);for(f=0;v>f;f++)E.push(this[a+f]);for(;f<this.length-a;f++)c.push(this[a+f]);var O=_.length;for(f=0;f<O+c.length;f++)this.items[a+f]=this[a+f]=O>f?_[f]:c[f-O];for(f=this.items.length=this.length-=v-O;this[f];)delete this[f++];return new s(E)},h.exclude=function(a){for(var v=0,l=this.length;l>v;v++)if(this[v]==a)return this.splice(v,1),!0;return!1},h.insertAfter=function(a){for(var v=this.items.length;v--;)this.items[v].insertAfter(a);return this},h.getBBox=function(){for(var a=[],v=[],l=[],f=[],c=this.items.length;c--;)if(!this.items[c].removed){var E=this.items[c].getBBox();a.push(E.x),v.push(E.y),l.push(E.x+E.width),f.push(E.y+E.height)}return{x:a=n.apply(0,a),y:v=n.apply(0,v),x2:l=r.apply(0,l),y2:f=r.apply(0,f),width:l-a,height:f-v,cx:a+(l-a)/2,cy:v+(f-v)/2}},h.clone=function(a){a=new s;for(var v=0,l=this.items.length;l>v;v++)a.push(this.items[v].clone());return a},h.toString=function(){return"Snap\u2018s set"},h.type="set",o.Set=s,o.set=function(){var a=new s;return arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0)),a}}),M.plugin(function(o,x,d,e){function r(A){var y=A[0];switch(y.toLowerCase()){case"t":return[y,0,0];case"m":return[y,1,0,0,1,0,0];case"r":return 4==A.length?[y,0,A[2],A[3]]:[y,0];case"s":return 5==A.length?[y,1,1,A[3],A[4]]:3==A.length?[y,1,1]:[y,1]}}function s(A){return A}function h(A){return function(y){return+y.toFixed(3)+A}}function a(A){return A.join(" ")}function v(A){return o.rgb(A[0],A[1],A[2],A[3])}function l(A){var y,F,j,G,P,z,Y=0,ie=[];for(y=0,F=A.length;F>y;y++){for(P="[",z=['"'+A[y][0]+'"'],j=1,G=A[y].length;G>j;j++)z[j]="val["+Y+++"]";P+=z+"]",ie[y]=P}return Function("val","return Snap.path.toString.call(["+ie+"])")}function f(A){for(var y=[],F=0,j=A.length;j>F;F++)for(var G=1,P=A[F].length;P>G;G++)y.push(A[F][G]);return y}function c(A){return isFinite(A)}var _={},O=/[%a-z]+$/i,N=String;_.stroke=_.fill="colour",x.prototype.equal=function(A,y){return K("snap.util.equal",this,A,y).firstDefined()},K.on("snap.util.equal",function(A,y){var F,j,G=N(this.attr(A)||""),P=this;if("colour"==_[A])return F=o.color(G),j=o.color(y),{from:[F.r,F.g,F.b,F.opacity],to:[j.r,j.g,j.b,j.opacity],f:v};if("viewBox"==A)return{from:F=this.attr(A).vb.split(" ").map(Number),to:j=y.split(" ").map(Number),f:a};if("transform"==A||"gradientTransform"==A||"patternTransform"==A)return"string"==typeof y&&(y=N(y).replace(/\.{3}|\u2026/g,G)),function n(A,y,F){A=A||new o.Matrix,y=y||new o.Matrix,A=o.parseTransformString(A.toTransformString())||[],y=o.parseTransformString(y.toTransformString())||[];for(var j,G,P,z,Y=Math.max(A.length,y.length),ie=[],ye=[],fe=0;Y>fe;fe++){if(P=A[fe]||r(y[fe]),z=y[fe]||r(P),P[0]!=z[0]||"r"==P[0].toLowerCase()&&(P[2]!=z[2]||P[3]!=z[3])||"s"==P[0].toLowerCase()&&(P[3]!=z[3]||P[4]!=z[4])){A=o._.transform2matrix(A,F()),y=o._.transform2matrix(y,F()),ie=[["m",A.a,A.b,A.c,A.d,A.e,A.f]],ye=[["m",y.a,y.b,y.c,y.d,y.e,y.f]];break}for(ie[fe]=[],ye[fe]=[],j=0,G=Math.max(P.length,z.length);G>j;j++)j in P&&(ie[fe][j]=P[j]),j in z&&(ye[fe][j]=z[j])}return{from:f(ie),to:f(ye),f:l(ie)}}(G=this.matrix,y=o._.rgTransform.test(y)?o._.transform2matrix(y,this.getBBox()):o._.transform2matrix(o._.svgTransform2string(y),this.getBBox()),function(){return P.getBBox(1)});if("d"==A||"path"==A)return{from:f((F=o.path.toCubic(G,y))[0]),to:f(F[1]),f:l(F[0])};if("points"==A)return{from:F=N(G).split(o._.separator),to:j=N(y).split(o._.separator),f:function(ie){return ie}};if(c(G)&&c(y))return{from:parseFloat(G),to:parseFloat(y),f:s};var z=G.match(O),Y=N(y).match(O);return z&&function E(A,y){return!(!o.is(A,"array")||!o.is(y,"array"))&&A.toString()==y.toString()}(z,Y)?{from:parseFloat(G),to:parseFloat(y),f:h(z)}:{from:this.asPX(A),to:this.asPX(A,y),f:s}})}),M.plugin(function(o,x,d,e){for(var r=x.prototype,s=("createTouch"in e.doc),h=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],a={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v=function(y,F){var j="y"==y?"scrollTop":"scrollLeft",G=F&&F.node?F.node.ownerDocument:e.doc;return G[j in G.documentElement?"documentElement":"body"][j]},l=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},c=function(y,F,j,G){var P=s&&a[F]?a[F]:F,z=function(Y){var ie=v("y",G),ye=v("x",G);if(s&&a.hasOwnProperty(F))for(var fe=0,re=Y.targetTouches&&Y.targetTouches.length;re>fe;fe++)if(Y.targetTouches[fe].target==y||y.contains(Y.targetTouches[fe].target)){var V=Y;(Y=Y.targetTouches[fe]).originalEvent=V,Y.preventDefault=l,Y.stopPropagation=f;break}var $=Y.clientX+ye,ne=Y.clientY+ie;return j.call(G,Y,$,ne)};return F!==P&&y.addEventListener(F,z,!1),y.addEventListener(P,z,!1),function(){return F!==P&&y.removeEventListener(F,z,!1),y.removeEventListener(P,z,!1),!0}},E=[],_=function(y){for(var F,j=y.clientX,G=y.clientY,P=v("y"),z=v("x"),Y=E.length;Y--;){if(F=E[Y],s){for(var ie,ye=y.touches&&y.touches.length;ye--;)if((ie=y.touches[ye]).identifier==F.el._drag.id||F.el.node.contains(ie.target)){j=ie.clientX,G=ie.clientY,(y.originalEvent?y.originalEvent:y).preventDefault();break}}else y.preventDefault();var fe=F.el.node;fe.nextSibling,fe.parentNode,fe.style.display,j+=z,G+=P,K("snap.drag.move."+F.el.id,F.move_scope||F.el,j-F.el._drag.x,G-F.el._drag.y,j,G,y)}},O=function(y){o.unmousemove(_).unmouseup(O);for(var F,j=E.length;j--;)(F=E[j]).el._drag={},K("snap.drag.end."+F.el.id,F.end_scope||F.start_scope||F.move_scope||F.el,y),K.off("snap.drag.*."+F.el.id);E=[]},N=h.length;N--;)!function(y){o[y]=r[y]=function(F,j){if(o.is(F,"function"))this.events=this.events||[],this.events.push({name:y,f:F,unbind:c(this.node||document,y,F,j||this)});else for(var G=0,P=this.events.length;P>G;G++)if(this.events[G].name==y)try{this.events[G].f.call(this)}catch{}return this},o["un"+y]=r["un"+y]=function(F){for(var j=this.events||[],G=j.length;G--;)if(j[G].name==y&&(j[G].f==F||!F))return j[G].unbind(),j.splice(G,1),!j.length&&delete this.events,this;return this}}(h[N]);r.hover=function(y,F,j,G){return this.mouseover(y,j).mouseout(F,G||j)},r.unhover=function(y,F){return this.unmouseover(y).unmouseout(F)};var A=[];r.drag=function(y,F,j,G,P,z){function Y(re,V,$){(re.originalEvent||re).preventDefault(),ye._drag.x=V,ye._drag.y=$,ye._drag.id=re.identifier,!E.length&&o.mousemove(_).mouseup(O),E.push({el:ye,move_scope:G,start_scope:P,end_scope:z}),F&&K.on("snap.drag.start."+ye.id,F),y&&K.on("snap.drag.move."+ye.id,y),j&&K.on("snap.drag.end."+ye.id,j),K("snap.drag.start."+ye.id,P||G||ye,V,$,re)}function ie(re,V,$){K("snap.draginit."+ye.id,ye,re,V,$)}var fe,ye=this;return arguments.length?(K.on("snap.draginit."+ye.id,Y),ye._drag={},A.push({el:ye,start:Y,init:ie}),ye.mousedown(ie),ye):ye.drag(function(re,V){this.attr({transform:fe+(fe?"T":"t")+[re,V]})},function(){fe=this.transform().local})},r.undrag=function(){for(var y=A.length;y--;)A[y].el==this&&(this.unmousedown(A[y].init),A.splice(y,1),K.unbind("snap.drag.*."+this.id),K.unbind("snap.draginit."+this.id));return!A.length&&o.unmousemove(_).unmouseup(O),this}}),M.plugin(function(o,x,d,e){var r=(x.prototype,d.prototype),n=/^\s*url\((.+)\)/,s=String,h=o._.$;o.filter={},r.filter=function(a){var v=this;"svg"!=v.type&&(v=v.paper);var l=o.parse(s(a)),f=o._.id(),c=(v.node.offsetWidth,v.node.offsetHeight,h("filter"));return h(c,{id:f,filterUnits:"userSpaceOnUse"}),c.appendChild(l.node),v.defs.appendChild(c),new x(c)},K.on("snap.util.getattr.filter",function(){K.stop();var a=h(this.node,"filter");if(a){var v=s(a).match(n);return v&&o.select(v[1])}}),K.on("snap.util.attr.filter",function(a){if(a instanceof x&&"filter"==a.type){K.stop();var v=a.node.id;v||(h(a.node,{id:a.id}),v=a.id),h(this.node,{filter:o.url(v)})}a&&"none"!=a||(K.stop(),this.node.removeAttribute("filter"))}),o.filter.blur=function(a,v){null==a&&(a=2);var l=null==v?a:[a,v];return o.format('<feGaussianBlur stdDeviation="{def}"/>',{def:l})},o.filter.blur.toString=function(){return this()},o.filter.shadow=function(a,v,l,f,c){return null==c&&(null==f?(c=l,l=4,f="#000"):(c=f,f=l,l=4)),null==l&&(l=4),null==c&&(c=1),null==a&&(a=0,v=2),null==v&&(v=a),f=o.color(f),o.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:f,dx:a,dy:v,blur:l,opacity:c})},o.filter.shadow.toString=function(){return this()},o.filter.grayscale=function(a){return null==a&&(a=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-a),b:.7152-.7152*(1-a),c:.0722-.0722*(1-a),d:.2126-.2126*(1-a),e:.7152+.2848*(1-a),f:.0722-.0722*(1-a),g:.2126-.2126*(1-a),h:.0722+.9278*(1-a)})},o.filter.grayscale.toString=function(){return this()},o.filter.sepia=function(a){return null==a&&(a=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-a),b:.769-.769*(1-a),c:.189-.189*(1-a),d:.349-.349*(1-a),e:.686+.314*(1-a),f:.168-.168*(1-a),g:.272-.272*(1-a),h:.534-.534*(1-a),i:.131+.869*(1-a)})},o.filter.sepia.toString=function(){return this()},o.filter.saturate=function(a){return null==a&&(a=1),o.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-a})},o.filter.saturate.toString=function(){return this()},o.filter.hueRotate=function(a){return a=a||0,o.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:a})},o.filter.hueRotate.toString=function(){return this()},o.filter.invert=function(a){return null==a&&(a=1),o.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:a,amount2:1-a})},o.filter.invert.toString=function(){return this()},o.filter.brightness=function(a){return null==a&&(a=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:a})},o.filter.brightness.toString=function(){return this()},o.filter.contrast=function(a){return null==a&&(a=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:a,amount2:.5-a/2})},o.filter.contrast.toString=function(){return this()}}),M.plugin(function(o,x,d,e,r){var n=o._.box,s=o.is,h=/^[^a-z]*([tbmlrc])/i,a=function(){return"T"+this.dx+","+this.dy};x.prototype.getAlign=function(v,l){null==l&&s(v,"string")&&(l=v,v=null);var f=(v=v||this.paper).getBBox?v.getBBox():n(v),c=this.getBBox(),E={};switch(l=(l=l&&l.match(h))?l[1].toLowerCase():"c"){case"t":E.dx=0,E.dy=f.y-c.y;break;case"b":E.dx=0,E.dy=f.y2-c.y2;break;case"m":E.dx=0,E.dy=f.cy-c.cy;break;case"l":E.dx=f.x-c.x,E.dy=0;break;case"r":E.dx=f.x2-c.x2,E.dy=0;break;default:E.dx=f.cx-c.cx,E.dy=0}return E.toString=a,E},x.prototype.align=function(v,l){return this.transform("..."+this.getAlign(v,l))}}),M.plugin(function(o,x,d,e){function r(Y){Y=Y.split(/(?=#)/);var ie=new String(Y[5]);return ie[50]=Y[0],ie[100]=Y[1],ie[200]=Y[2],ie[300]=Y[3],ie[400]=Y[4],ie[500]=Y[5],ie[600]=Y[6],ie[700]=Y[7],ie[800]=Y[8],ie[900]=Y[9],Y[10]&&(ie.A100=Y[10],ie.A200=Y[11],ie.A400=Y[12],ie.A700=Y[13]),ie}o.mui={},o.flat={},o.mui.red=r("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),o.mui.pink=r("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),o.mui.purple=r("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),o.mui.deeppurple=r("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),o.mui.indigo=r("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),o.mui.blue=r("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),o.mui.lightblue=r("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),o.mui.cyan=r("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),o.mui.teal=r("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),o.mui.green=r("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),o.mui.lightgreen=r("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),o.mui.lime=r("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),o.mui.yellow=r("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),o.mui.amber=r("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),o.mui.orange=r("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),o.mui.deeporange=r("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),o.mui.brown=r("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),o.mui.grey=r("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),o.mui.bluegrey=r("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),o.flat.turquoise="#1abc9c",o.flat.greensea="#16a085",o.flat.sunflower="#f1c40f",o.flat.orange="#f39c12",o.flat.emerland="#2ecc71",o.flat.nephritis="#27ae60",o.flat.carrot="#e67e22",o.flat.pumpkin="#d35400",o.flat.peterriver="#3498db",o.flat.belizehole="#2980b9",o.flat.alizarin="#e74c3c",o.flat.pomegranate="#c0392b",o.flat.amethyst="#9b59b6",o.flat.wisteria="#8e44ad",o.flat.clouds="#ecf0f1",o.flat.silver="#bdc3c7",o.flat.wetasphalt="#34495e",o.flat.midnightblue="#2c3e50",o.flat.concrete="#95a5a6",o.flat.asbestos="#7f8c8d",o.importMUIColors=function(){for(var Y in o.mui)o.mui.hasOwnProperty(Y)&&(q[Y]=o.mui[Y])}}),M}),function(q){"object"==typeof exports&&typeof module<"u"?module.exports=q():"function"==typeof define&&define.amd?define([],q):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).rdfstore=q()}(function(){var define,module,exports;return function q(K,ee,M){function o(e,r){if(!ee[e]){if(!K[e]){var n="function"==typeof require&&require;if(!r&&n)return n(e,!0);if(x)return x(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var h=ee[e]={exports:{}};K[e][0].call(h.exports,function(a){return o(K[e][1][a]||a)},h,h.exports,q,K,ee,M)}return ee[e].exports}for(var x="function"==typeof require&&require,d=0;d<M.length;d++)o(M[d]);return o}({1:[function(q,K,ee){(function(M){(function(){"use strict";var o=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],x=typeof globalThis>"u"?M:globalThis;K.exports=function(){for(var d=[],e=0;e<o.length;e++)"function"==typeof x[o[e]]&&(d[d.length]=o[e]);return d}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(q,K,ee){"use strict";ee.byteLength=function(h){var a=n(h),v=a[0],l=a[1];return 3*(v+l)/4-l},ee.toByteArray=function(h){var a,v,y,l=n(h),f=l[0],c=l[1],E=new x(3*(f+(y=c))/4-y),_=0,O=c>0?f-4:f;for(v=0;v<O;v+=4)a=o[h.charCodeAt(v)]<<18|o[h.charCodeAt(v+1)]<<12|o[h.charCodeAt(v+2)]<<6|o[h.charCodeAt(v+3)],E[_++]=a>>16&255,E[_++]=a>>8&255,E[_++]=255&a;return 2===c&&(a=o[h.charCodeAt(v)]<<2|o[h.charCodeAt(v+1)]>>4,E[_++]=255&a),1===c&&(a=o[h.charCodeAt(v)]<<10|o[h.charCodeAt(v+1)]<<4|o[h.charCodeAt(v+2)]>>2,E[_++]=a>>8&255,E[_++]=255&a),E},ee.fromByteArray=function(h){for(var a,v=h.length,l=v%3,f=[],c=16383,E=0,_=v-l;E<_;E+=c)f.push(s(h,E,E+c>_?_:E+c));return 1===l?(a=h[v-1],f.push(M[a>>2]+M[a<<4&63]+"==")):2===l&&(a=(h[v-2]<<8)+h[v-1],f.push(M[a>>10]+M[a>>4&63]+M[a<<2&63]+"=")),f.join("")};for(var M=[],o=[],x=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)M[e]=d[e],o[d.charCodeAt(e)]=e;function n(h){var a=h.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=h.indexOf("=");return-1===v&&(v=a),[v,v===a?0:4-v%4]}function s(h,a,v){for(var l,f,c=[],E=a;E<v;E+=3)l=(h[E]<<16&16711680)+(h[E+1]<<8&65280)+(255&h[E+2]),c.push(M[(f=l)>>18&63]+M[f>>12&63]+M[f>>6&63]+M[63&f]);return c.join("")}o[45]=62,o[95]=63},{}],3:[function(q,K,ee){},{}],4:[function(q,K,ee){arguments[4][3][0].apply(ee,arguments)},{dup:3}],5:[function(q,K,ee){(function(M){(function(){"use strict";var o=q("base64-js"),x=q("ieee754");ee.Buffer=r,ee.SlowBuffer=function(k){return+k!=k&&(k=0),r.alloc(+k)},ee.INSPECT_MAX_BYTES=50;var d=2147483647;function e(k){if(k>d)throw new RangeError('The value "'+k+'" is invalid for option "size"');var Q=new Uint8Array(k);return Q.__proto__=r.prototype,Q}function r(k,Q,X){if("number"==typeof k){if("string"==typeof Q)throw new TypeError('The "string" argument must be of type string. Received type number');return h(k)}return n(k,Q,X)}function n(k,Q,X){if("string"==typeof k)return function(ve,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!r.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var Qe=0|l(ve,Pe),Ue=e(Qe),We=Ue.write(ve,Pe);return We!==Qe&&(Ue=Ue.slice(0,We)),Ue}(k,Q);if(ArrayBuffer.isView(k))return a(k);if(null==k)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Me(k,ArrayBuffer)||k&&Me(k.buffer,ArrayBuffer))return function(ve,Pe,Qe){if(Pe<0||ve.byteLength<Pe)throw new RangeError('"offset" is outside of buffer bounds');if(ve.byteLength<Pe+(Qe||0))throw new RangeError('"length" is outside of buffer bounds');var Ue;return(Ue=void 0===Pe&&void 0===Qe?new Uint8Array(ve):void 0===Qe?new Uint8Array(ve,Pe):new Uint8Array(ve,Pe,Qe)).__proto__=r.prototype,Ue}(k,Q,X);if("number"==typeof k)throw new TypeError('The "value" argument must not be of type number. Received type number');var se=k.valueOf&&k.valueOf();if(null!=se&&se!==k)return r.from(se,Q,X);var pe=function(ve){if(r.isBuffer(ve)){var Pe=0|v(ve.length),Qe=e(Pe);return 0===Qe.length||ve.copy(Qe,0,0,Pe),Qe}return void 0!==ve.length?"number"!=typeof ve.length||oe(ve.length)?e(0):a(ve):"Buffer"===ve.type&&Array.isArray(ve.data)?a(ve.data):void 0}(k);if(pe)return pe;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof k[Symbol.toPrimitive])return r.from(k[Symbol.toPrimitive]("string"),Q,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}function s(k){if("number"!=typeof k)throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function h(k){return s(k),e(k<0?0:0|v(k))}function a(k){for(var Q=k.length<0?0:0|v(k.length),X=e(Q),se=0;se<Q;se+=1)X[se]=255&k[se];return X}function v(k){if(k>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|k}function l(k,Q){if(r.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||Me(k,ArrayBuffer))return k.byteLength;if("string"!=typeof k)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var X=k.length,se=arguments.length>2&&!0===arguments[2];if(!se&&0===X)return 0;for(var pe=!1;;)switch(Q){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return ce(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return ke(k).length;default:if(pe)return se?-1:ce(k).length;Q=(""+Q).toLowerCase(),pe=!0}}function f(k,Q,X){var se=!1;if((void 0===Q||Q<0)&&(Q=0),Q>this.length||((void 0===X||X>this.length)&&(X=this.length),X<=0)||(X>>>=0)<=(Q>>>=0))return"";for(k||(k="utf8");;)switch(k){case"hex":return ye(this,Q,X);case"utf8":case"utf-8":return P(this,Q,X);case"ascii":return Y(this,Q,X);case"latin1":case"binary":return ie(this,Q,X);case"base64":return G(this,Q,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,Q,X);default:if(se)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),se=!0}}function c(k,Q,X){var se=k[Q];k[Q]=k[X],k[X]=se}function E(k,Q,X,se,pe){if(0===k.length)return-1;if("string"==typeof X?(se=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),oe(X=+X)&&(X=pe?0:k.length-1),X<0&&(X=k.length+X),X>=k.length){if(pe)return-1;X=k.length-1}else if(X<0){if(!pe)return-1;X=0}if("string"==typeof Q&&(Q=r.from(Q,se)),r.isBuffer(Q))return 0===Q.length?-1:_(k,Q,X,se,pe);if("number"==typeof Q)return Q&=255,"function"==typeof Uint8Array.prototype.indexOf?pe?Uint8Array.prototype.indexOf.call(k,Q,X):Uint8Array.prototype.lastIndexOf.call(k,Q,X):_(k,[Q],X,se,pe);throw new TypeError("val must be string, number or Buffer")}function _(k,Q,X,se,pe){var ve,Pe=1,Qe=k.length,Ue=Q.length;if(void 0!==se&&("ucs2"===(se=String(se).toLowerCase())||"ucs-2"===se||"utf16le"===se||"utf-16le"===se)){if(k.length<2||Q.length<2)return-1;Pe=2,Qe/=2,Ue/=2,X/=2}function We(Ee,Ce){return 1===Pe?Ee[Ce]:Ee.readUInt16BE(Ce*Pe)}if(pe){var Ke=-1;for(ve=X;ve<Qe;ve++)if(We(k,ve)===We(Q,-1===Ke?0:ve-Ke)){if(-1===Ke&&(Ke=ve),ve-Ke+1===Ue)return Ke*Pe}else-1!==Ke&&(ve-=ve-Ke),Ke=-1}else for(X+Ue>Qe&&(X=Qe-Ue),ve=X;ve>=0;ve--){for(var ot=!0,me=0;me<Ue;me++)if(We(k,ve+me)!==We(Q,me)){ot=!1;break}if(ot)return ve}return-1}function O(k,Q,X,se){X=Number(X)||0;var pe=k.length-X;se?(se=Number(se))>pe&&(se=pe):se=pe;var ve=Q.length;se>ve/2&&(se=ve/2);for(var Pe=0;Pe<se;++Pe){var Qe=parseInt(Q.substr(2*Pe,2),16);if(oe(Qe))return Pe;k[X+Pe]=Qe}return Pe}function N(k,Q,X,se){return Ne(ce(Q,k.length-X),k,X,se)}function A(k,Q,X,se){return Ne(function(pe){for(var ve=[],Pe=0;Pe<pe.length;++Pe)ve.push(255&pe.charCodeAt(Pe));return ve}(Q),k,X,se)}function y(k,Q,X,se){return A(k,Q,X,se)}function F(k,Q,X,se){return Ne(ke(Q),k,X,se)}function j(k,Q,X,se){return Ne(function(pe,ve){for(var Pe,Qe,Ue,We=[],Ke=0;Ke<pe.length&&!((ve-=2)<0);++Ke)Qe=(Pe=pe.charCodeAt(Ke))>>8,Ue=Pe%256,We.push(Ue),We.push(Qe);return We}(Q,k.length-X),k,X,se)}function G(k,Q,X){return 0===Q&&X===k.length?o.fromByteArray(k):o.fromByteArray(k.slice(Q,X))}function P(k,Q,X){X=Math.min(k.length,X);for(var se=[],pe=Q;pe<X;){var ve,Pe,Qe,Ue,We=k[pe],Ke=null,ot=We>239?4:We>223?3:We>191?2:1;if(pe+ot<=X)switch(ot){case 1:We<128&&(Ke=We);break;case 2:128==(192&(ve=k[pe+1]))&&(Ue=(31&We)<<6|63&ve)>127&&(Ke=Ue);break;case 3:ve=k[pe+1],Pe=k[pe+2],128==(192&ve)&&128==(192&Pe)&&(Ue=(15&We)<<12|(63&ve)<<6|63&Pe)>2047&&(Ue<55296||Ue>57343)&&(Ke=Ue);break;case 4:ve=k[pe+1],Pe=k[pe+2],Qe=k[pe+3],128==(192&ve)&&128==(192&Pe)&&128==(192&Qe)&&(Ue=(15&We)<<18|(63&ve)<<12|(63&Pe)<<6|63&Qe)>65535&&Ue<1114112&&(Ke=Ue)}null===Ke?(Ke=65533,ot=1):Ke>65535&&(Ke-=65536,se.push(Ke>>>10&1023|55296),Ke=56320|1023&Ke),se.push(Ke),pe+=ot}return function(me){var Ee=me.length;if(Ee<=z)return String.fromCharCode.apply(String,me);for(var Ce="",H=0;H<Ee;)Ce+=String.fromCharCode.apply(String,me.slice(H,H+=z));return Ce}(se)}ee.kMaxLength=d,r.TYPED_ARRAY_SUPPORT=function(){try{var k=new Uint8Array(1);return k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===k.foo()}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(k,Q,X){return n(k,Q,X)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(k,Q,X){return pe=Q,ve=X,s(se=k),se<=0?e(se):void 0!==pe?"string"==typeof ve?e(se).fill(pe,ve):e(se).fill(pe):e(se);var se,pe,ve},r.allocUnsafe=function(k){return h(k)},r.allocUnsafeSlow=function(k){return h(k)},r.isBuffer=function(k){return null!=k&&!0===k._isBuffer&&k!==r.prototype},r.compare=function(k,Q){if(Me(k,Uint8Array)&&(k=r.from(k,k.offset,k.byteLength)),Me(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),!r.isBuffer(k)||!r.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===Q)return 0;for(var X=k.length,se=Q.length,pe=0,ve=Math.min(X,se);pe<ve;++pe)if(k[pe]!==Q[pe]){X=k[pe],se=Q[pe];break}return X<se?-1:se<X?1:0},r.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(k,Q){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(0===k.length)return r.alloc(0);var X;if(void 0===Q)for(Q=0,X=0;X<k.length;++X)Q+=k[X].length;var se=r.allocUnsafe(Q),pe=0;for(X=0;X<k.length;++X){var ve=k[X];if(Me(ve,Uint8Array)&&(ve=r.from(ve)),!r.isBuffer(ve))throw new TypeError('"list" argument must be an Array of Buffers');ve.copy(se,pe),pe+=ve.length}return se},r.byteLength=l,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Q=0;Q<k;Q+=2)c(this,Q,Q+1);return this},r.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Q=0;Q<k;Q+=4)c(this,Q,Q+3),c(this,Q+1,Q+2);return this},r.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Q=0;Q<k;Q+=8)c(this,Q,Q+7),c(this,Q+1,Q+6),c(this,Q+2,Q+5),c(this,Q+3,Q+4);return this},r.prototype.toString=function(){var k=this.length;return 0===k?"":0===arguments.length?P(this,0,k):f.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(k){if(!r.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||0===r.compare(this,k)},r.prototype.inspect=function(){var k="",Q=ee.INSPECT_MAX_BYTES;return k=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(k+=" ... "),"<Buffer "+k+">"},r.prototype.compare=function(k,Q,X,se,pe){if(Me(k,Uint8Array)&&(k=r.from(k,k.offset,k.byteLength)),!r.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(void 0===Q&&(Q=0),void 0===X&&(X=k?k.length:0),void 0===se&&(se=0),void 0===pe&&(pe=this.length),Q<0||X>k.length||se<0||pe>this.length)throw new RangeError("out of range index");if(se>=pe&&Q>=X)return 0;if(se>=pe)return-1;if(Q>=X)return 1;if(this===k)return 0;for(var ve=(pe>>>=0)-(se>>>=0),Pe=(X>>>=0)-(Q>>>=0),Qe=Math.min(ve,Pe),Ue=this.slice(se,pe),We=k.slice(Q,X),Ke=0;Ke<Qe;++Ke)if(Ue[Ke]!==We[Ke]){ve=Ue[Ke],Pe=We[Ke];break}return ve<Pe?-1:Pe<ve?1:0},r.prototype.includes=function(k,Q,X){return-1!==this.indexOf(k,Q,X)},r.prototype.indexOf=function(k,Q,X){return E(this,k,Q,X,!0)},r.prototype.lastIndexOf=function(k,Q,X){return E(this,k,Q,X,!1)},r.prototype.write=function(k,Q,X,se){if(void 0===Q)se="utf8",X=this.length,Q=0;else if(void 0===X&&"string"==typeof Q)se=Q,X=this.length,Q=0;else{if(!isFinite(Q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Q>>>=0,isFinite(X)?(X>>>=0,void 0===se&&(se="utf8")):(se=X,X=void 0)}var pe=this.length-Q;if((void 0===X||X>pe)&&(X=pe),k.length>0&&(X<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var ve=!1;;)switch(se){case"hex":return O(this,k,Q,X);case"utf8":case"utf-8":return N(this,k,Q,X);case"ascii":return A(this,k,Q,X);case"latin1":case"binary":return y(this,k,Q,X);case"base64":return F(this,k,Q,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,k,Q,X);default:if(ve)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),ve=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var z=4096;function Y(k,Q,X){var se="";X=Math.min(k.length,X);for(var pe=Q;pe<X;++pe)se+=String.fromCharCode(127&k[pe]);return se}function ie(k,Q,X){var se="";X=Math.min(k.length,X);for(var pe=Q;pe<X;++pe)se+=String.fromCharCode(k[pe]);return se}function ye(k,Q,X){var se=k.length;(!Q||Q<0)&&(Q=0),(!X||X<0||X>se)&&(X=se);for(var pe="",ve=Q;ve<X;++ve)pe+=ge(k[ve]);return pe}function fe(k,Q,X){for(var se=k.slice(Q,X),pe="",ve=0;ve<se.length;ve+=2)pe+=String.fromCharCode(se[ve]+256*se[ve+1]);return pe}function re(k,Q,X){if(k%1!=0||k<0)throw new RangeError("offset is not uint");if(k+Q>X)throw new RangeError("Trying to access beyond buffer length")}function V(k,Q,X,se,pe,ve){if(!r.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>pe||Q<ve)throw new RangeError('"value" argument is out of bounds');if(X+se>k.length)throw new RangeError("Index out of range")}function $(k,Q,X,se,pe,ve){if(X+se>k.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function ne(k,Q,X,se,pe){return Q=+Q,X>>>=0,pe||$(k,0,X,4),x.write(k,Q,X,se,23,4),X+4}function he(k,Q,X,se,pe){return Q=+Q,X>>>=0,pe||$(k,0,X,8),x.write(k,Q,X,se,52,8),X+8}r.prototype.slice=function(k,Q){var X=this.length;(k=~~k)<0?(k+=X)<0&&(k=0):k>X&&(k=X),(Q=void 0===Q?X:~~Q)<0?(Q+=X)<0&&(Q=0):Q>X&&(Q=X),Q<k&&(Q=k);var se=this.subarray(k,Q);return se.__proto__=r.prototype,se},r.prototype.readUIntLE=function(k,Q,X){k>>>=0,Q>>>=0,X||re(k,Q,this.length);for(var se=this[k],pe=1,ve=0;++ve<Q&&(pe*=256);)se+=this[k+ve]*pe;return se},r.prototype.readUIntBE=function(k,Q,X){k>>>=0,Q>>>=0,X||re(k,Q,this.length);for(var se=this[k+--Q],pe=1;Q>0&&(pe*=256);)se+=this[k+--Q]*pe;return se},r.prototype.readUInt8=function(k,Q){return k>>>=0,Q||re(k,1,this.length),this[k]},r.prototype.readUInt16LE=function(k,Q){return k>>>=0,Q||re(k,2,this.length),this[k]|this[k+1]<<8},r.prototype.readUInt16BE=function(k,Q){return k>>>=0,Q||re(k,2,this.length),this[k]<<8|this[k+1]},r.prototype.readUInt32LE=function(k,Q){return k>>>=0,Q||re(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},r.prototype.readUInt32BE=function(k,Q){return k>>>=0,Q||re(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},r.prototype.readIntLE=function(k,Q,X){k>>>=0,Q>>>=0,X||re(k,Q,this.length);for(var se=this[k],pe=1,ve=0;++ve<Q&&(pe*=256);)se+=this[k+ve]*pe;return se>=(pe*=128)&&(se-=Math.pow(2,8*Q)),se},r.prototype.readIntBE=function(k,Q,X){k>>>=0,Q>>>=0,X||re(k,Q,this.length);for(var se=Q,pe=1,ve=this[k+--se];se>0&&(pe*=256);)ve+=this[k+--se]*pe;return ve>=(pe*=128)&&(ve-=Math.pow(2,8*Q)),ve},r.prototype.readInt8=function(k,Q){return k>>>=0,Q||re(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},r.prototype.readInt16LE=function(k,Q){k>>>=0,Q||re(k,2,this.length);var X=this[k]|this[k+1]<<8;return 32768&X?4294901760|X:X},r.prototype.readInt16BE=function(k,Q){k>>>=0,Q||re(k,2,this.length);var X=this[k+1]|this[k]<<8;return 32768&X?4294901760|X:X},r.prototype.readInt32LE=function(k,Q){return k>>>=0,Q||re(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},r.prototype.readInt32BE=function(k,Q){return k>>>=0,Q||re(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},r.prototype.readFloatLE=function(k,Q){return k>>>=0,Q||re(k,4,this.length),x.read(this,k,!0,23,4)},r.prototype.readFloatBE=function(k,Q){return k>>>=0,Q||re(k,4,this.length),x.read(this,k,!1,23,4)},r.prototype.readDoubleLE=function(k,Q){return k>>>=0,Q||re(k,8,this.length),x.read(this,k,!0,52,8)},r.prototype.readDoubleBE=function(k,Q){return k>>>=0,Q||re(k,8,this.length),x.read(this,k,!1,52,8)},r.prototype.writeUIntLE=function(k,Q,X,se){k=+k,Q>>>=0,X>>>=0,se||V(this,k,Q,X,Math.pow(2,8*X)-1,0);var pe=1,ve=0;for(this[Q]=255&k;++ve<X&&(pe*=256);)this[Q+ve]=k/pe&255;return Q+X},r.prototype.writeUIntBE=function(k,Q,X,se){k=+k,Q>>>=0,X>>>=0,se||V(this,k,Q,X,Math.pow(2,8*X)-1,0);var pe=X-1,ve=1;for(this[Q+pe]=255&k;--pe>=0&&(ve*=256);)this[Q+pe]=k/ve&255;return Q+X},r.prototype.writeUInt8=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,1,255,0),this[Q]=255&k,Q+1},r.prototype.writeUInt16LE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,2,65535,0),this[Q]=255&k,this[Q+1]=k>>>8,Q+2},r.prototype.writeUInt16BE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,2,65535,0),this[Q]=k>>>8,this[Q+1]=255&k,Q+2},r.prototype.writeUInt32LE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,4,4294967295,0),this[Q+3]=k>>>24,this[Q+2]=k>>>16,this[Q+1]=k>>>8,this[Q]=255&k,Q+4},r.prototype.writeUInt32BE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,4,4294967295,0),this[Q]=k>>>24,this[Q+1]=k>>>16,this[Q+2]=k>>>8,this[Q+3]=255&k,Q+4},r.prototype.writeIntLE=function(k,Q,X,se){if(k=+k,Q>>>=0,!se){var pe=Math.pow(2,8*X-1);V(this,k,Q,X,pe-1,-pe)}var ve=0,Pe=1,Qe=0;for(this[Q]=255&k;++ve<X&&(Pe*=256);)k<0&&0===Qe&&0!==this[Q+ve-1]&&(Qe=1),this[Q+ve]=(k/Pe>>0)-Qe&255;return Q+X},r.prototype.writeIntBE=function(k,Q,X,se){if(k=+k,Q>>>=0,!se){var pe=Math.pow(2,8*X-1);V(this,k,Q,X,pe-1,-pe)}var ve=X-1,Pe=1,Qe=0;for(this[Q+ve]=255&k;--ve>=0&&(Pe*=256);)k<0&&0===Qe&&0!==this[Q+ve+1]&&(Qe=1),this[Q+ve]=(k/Pe>>0)-Qe&255;return Q+X},r.prototype.writeInt8=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,1,127,-128),k<0&&(k=255+k+1),this[Q]=255&k,Q+1},r.prototype.writeInt16LE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,2,32767,-32768),this[Q]=255&k,this[Q+1]=k>>>8,Q+2},r.prototype.writeInt16BE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,2,32767,-32768),this[Q]=k>>>8,this[Q+1]=255&k,Q+2},r.prototype.writeInt32LE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,4,2147483647,-2147483648),this[Q]=255&k,this[Q+1]=k>>>8,this[Q+2]=k>>>16,this[Q+3]=k>>>24,Q+4},r.prototype.writeInt32BE=function(k,Q,X){return k=+k,Q>>>=0,X||V(this,k,Q,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[Q]=k>>>24,this[Q+1]=k>>>16,this[Q+2]=k>>>8,this[Q+3]=255&k,Q+4},r.prototype.writeFloatLE=function(k,Q,X){return ne(this,k,Q,!0,X)},r.prototype.writeFloatBE=function(k,Q,X){return ne(this,k,Q,!1,X)},r.prototype.writeDoubleLE=function(k,Q,X){return he(this,k,Q,!0,X)},r.prototype.writeDoubleBE=function(k,Q,X){return he(this,k,Q,!1,X)},r.prototype.copy=function(k,Q,X,se){if(!r.isBuffer(k))throw new TypeError("argument should be a Buffer");if(X||(X=0),se||0===se||(se=this.length),Q>=k.length&&(Q=k.length),Q||(Q=0),se>0&&se<X&&(se=X),se===X||0===k.length||0===this.length)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),k.length-Q<se-X&&(se=k.length-Q+X);var pe=se-X;if(this===k&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(Q,X,se);else if(this===k&&X<Q&&Q<se)for(var ve=pe-1;ve>=0;--ve)k[ve+Q]=this[ve+X];else Uint8Array.prototype.set.call(k,this.subarray(X,se),Q);return pe},r.prototype.fill=function(k,Q,X,se){if("string"==typeof k){if("string"==typeof Q?(se=Q,Q=0,X=this.length):"string"==typeof X&&(se=X,X=this.length),void 0!==se&&"string"!=typeof se)throw new TypeError("encoding must be a string");if("string"==typeof se&&!r.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(1===k.length){var pe=k.charCodeAt(0);("utf8"===se&&pe<128||"latin1"===se)&&(k=pe)}}else"number"==typeof k&&(k&=255);if(Q<0||this.length<Q||this.length<X)throw new RangeError("Out of range index");if(X<=Q)return this;var ve;if(Q>>>=0,X=void 0===X?this.length:X>>>0,k||(k=0),"number"==typeof k)for(ve=Q;ve<X;++ve)this[ve]=k;else{var Pe=r.isBuffer(k)?k:r.from(k,se),Qe=Pe.length;if(0===Qe)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(ve=0;ve<X-Q;++ve)this[ve+Q]=Pe[ve%Qe]}return this};var xe=/[^+/0-9A-Za-z-_]/g;function ge(k){return k<16?"0"+k.toString(16):k.toString(16)}function ce(k,Q){var X;Q=Q||1/0;for(var se=k.length,pe=null,ve=[],Pe=0;Pe<se;++Pe){if((X=k.charCodeAt(Pe))>55295&&X<57344){if(!pe){if(X>56319){(Q-=3)>-1&&ve.push(239,191,189);continue}if(Pe+1===se){(Q-=3)>-1&&ve.push(239,191,189);continue}pe=X;continue}if(X<56320){(Q-=3)>-1&&ve.push(239,191,189),pe=X;continue}X=65536+(pe-55296<<10|X-56320)}else pe&&(Q-=3)>-1&&ve.push(239,191,189);if(pe=null,X<128){if((Q-=1)<0)break;ve.push(X)}else if(X<2048){if((Q-=2)<0)break;ve.push(X>>6|192,63&X|128)}else if(X<65536){if((Q-=3)<0)break;ve.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((Q-=4)<0)break;ve.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return ve}function ke(k){return o.toByteArray(function(Q){if((Q=(Q=Q.split("=")[0]).trim().replace(xe,"")).length<2)return"";for(;Q.length%4!=0;)Q+="=";return Q}(k))}function Ne(k,Q,X,se){for(var pe=0;pe<se&&!(pe+X>=Q.length||pe>=k.length);++pe)Q[pe+X]=k[pe];return pe}function Me(k,Q){return k instanceof Q||null!=k&&null!=k.constructor&&null!=k.constructor.name&&k.constructor.name===Q.name}function oe(k){return k!=k}}).call(this)}).call(this,q("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:21}],6:[function(q,K,ee){K.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],7:[function(q,K,ee){"use strict";var M=q("get-intrinsic"),o=q("./"),x=o(M("String.prototype.indexOf"));K.exports=function(d,e){var r=M(d,!!e);return"function"==typeof r&&x(d,".prototype.")>-1?o(r):r}},{"./":8,"get-intrinsic":15}],8:[function(q,K,ee){"use strict";var M=q("function-bind"),o=q("get-intrinsic"),x=o("%Function.prototype.apply%"),d=o("%Function.prototype.call%"),e=o("%Reflect.apply%",!0)||M.call(d,x),r=o("%Object.getOwnPropertyDescriptor%",!0),n=o("%Object.defineProperty%",!0),s=o("%Math.max%");if(n)try{n({},"a",{value:1})}catch{n=null}K.exports=function(a){var v=e(M,d,arguments);r&&n&&(r(v,"length").configurable&&n(v,"length",{value:1+s(0,a.length-(arguments.length-1))}));return v};var h=function(){return e(M,x,arguments)};n?n(K.exports,"apply",{value:h}):K.exports.apply=h},{"function-bind":14,"get-intrinsic":15}],9:[function(q,K,ee){"use strict";K.exports=function M(o){return null===o||"object"!=typeof o||null!=o.toJSON?JSON.stringify(o):Array.isArray(o)?"["+o.reduce((x,d,e)=>x+(0===e?"":",")+M(void 0===d||"symbol"==typeof d?null:d),"")+"]":"{"+Object.keys(o).sort().reduce((x,d,e)=>void 0===o[d]||"symbol"==typeof o[d]?x:x+(0===x.length?"":",")+M(d)+":"+M(o[d]),"")+"}"}},{}],10:[function(q,K,ee){"use strict";var M=q("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}K.exports=M},{"get-intrinsic":15}],11:[function(q,K,ee){"use strict";var M,o="object"==typeof Reflect?Reflect:null,x=o&&"function"==typeof o.apply?o.apply:function(_,O,N){return Function.prototype.apply.call(_,O,N)};M=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:function(_){return Object.getOwnPropertyNames(_)};var d=Number.isNaN||function(_){return _!=_};function e(){e.init.call(this)}K.exports=e,K.exports.once=function(_,O){return new Promise(function(N,A){function y(j){_.removeListener(O,F),A(j)}function F(){"function"==typeof _.removeListener&&_.removeListener("error",y),N([].slice.call(arguments))}var j,G;E(_,O,F,{once:!0}),"error"!==O&&(G=y,"function"==typeof(j=_).on&&E(j,"error",G,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function n(_){if("function"!=typeof _)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}function s(_){return void 0===_._maxListeners?e.defaultMaxListeners:_._maxListeners}function h(_,O,N,A){var y,F,j,G;if(n(N),void 0===(F=_._events)?(F=_._events=Object.create(null),_._eventsCount=0):(void 0!==F.newListener&&(_.emit("newListener",O,N.listener?N.listener:N),F=_._events),j=F[O]),void 0===j)j=F[O]=N,++_._eventsCount;else if("function"==typeof j?j=F[O]=A?[N,j]:[j,N]:A?j.unshift(N):j.push(N),(y=s(_))>0&&j.length>y&&!j.warned){j.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=_,P.type=O,P.count=j.length,G=P,console&&console.warn&&console.warn(G)}return _}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(_,O,N){var A={fired:!1,wrapFn:void 0,target:_,type:O,listener:N},y=a.bind(A);return y.listener=N,A.wrapFn=y,y}function l(_,O,N){var A=_._events;if(void 0===A)return[];var y=A[O];return void 0===y?[]:"function"==typeof y?N?[y.listener||y]:[y]:N?function(F){for(var j=new Array(F.length),G=0;G<j.length;++G)j[G]=F[G].listener||F[G];return j}(y):c(y,y.length)}function f(_){var O=this._events;if(void 0!==O){var N=O[_];if("function"==typeof N)return 1;if(void 0!==N)return N.length}return 0}function c(_,O){for(var N=new Array(O),A=0;A<O;++A)N[A]=_[A];return N}function E(_,O,N,A){if("function"==typeof _.on)A.once?_.once(O,N):_.on(O,N);else{if("function"!=typeof _.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _);_.addEventListener(O,function y(F){A.once&&_.removeEventListener(O,y),N(F)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(_){if("number"!=typeof _||_<0||d(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");r=_}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(_){if("number"!=typeof _||_<0||d(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},e.prototype.getMaxListeners=function(){return s(this)},e.prototype.emit=function(_){for(var O=[],N=1;N<arguments.length;N++)O.push(arguments[N]);var A="error"===_,y=this._events;if(void 0!==y)A=A&&void 0===y.error;else if(!A)return!1;if(A){var F;if(O.length>0&&(F=O[0]),F instanceof Error)throw F;var j=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw j.context=F,j}var G=y[_];if(void 0===G)return!1;if("function"==typeof G)x(G,this,O);else{var P=G.length,z=c(G,P);for(N=0;N<P;++N)x(z[N],this,O)}return!0},e.prototype.addListener=function(_,O){return h(this,_,O,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(_,O){return h(this,_,O,!0)},e.prototype.once=function(_,O){return n(O),this.on(_,v(this,_,O)),this},e.prototype.prependOnceListener=function(_,O){return n(O),this.prependListener(_,v(this,_,O)),this},e.prototype.removeListener=function(_,O){var N,A,y,F,j;if(n(O),void 0===(A=this._events))return this;if(void 0===(N=A[_]))return this;if(N===O||N.listener===O)0==--this._eventsCount?this._events=Object.create(null):(delete A[_],A.removeListener&&this.emit("removeListener",_,N.listener||O));else if("function"!=typeof N){for(y=-1,F=N.length-1;F>=0;F--)if(N[F]===O||N[F].listener===O){j=N[F].listener,y=F;break}if(y<0)return this;0===y?N.shift():function(G,P){for(;P+1<G.length;P++)G[P]=G[P+1];G.pop()}(N,y),1===N.length&&(A[_]=N[0]),void 0!==A.removeListener&&this.emit("removeListener",_,j||O)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(_){var O,N,A;if(void 0===(N=this._events))return this;if(void 0===N.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==N[_]&&(0==--this._eventsCount?this._events=Object.create(null):delete N[_]),this;if(0===arguments.length){var y,F=Object.keys(N);for(A=0;A<F.length;++A)"removeListener"!==(y=F[A])&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(O=N[_]))this.removeListener(_,O);else if(void 0!==O)for(A=O.length-1;A>=0;A--)this.removeListener(_,O[A]);return this},e.prototype.listeners=function(_){return l(this,_,!0)},e.prototype.rawListeners=function(_){return l(this,_,!1)},e.listenerCount=function(_,O){return"function"==typeof _.listenerCount?_.listenerCount(O):f.call(_,O)},e.prototype.listenerCount=f,e.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},{}],12:[function(q,K,ee){"use strict";var M=q("is-callable"),o=Object.prototype.toString,x=Object.prototype.hasOwnProperty;K.exports=function(n,s,h){if(!M(s))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=h),"[object Array]"===o.call(n)?function(n,s,h){for(var a=0,v=n.length;a<v;a++)x.call(n,a)&&(null==h?s(n[a],a,n):s.call(h,n[a],a,n))}(n,s,a):"string"==typeof n?function(n,s,h){for(var a=0,v=n.length;a<v;a++)null==h?s(n.charAt(a),a,n):s.call(h,n.charAt(a),a,n)}(n,s,a):function(n,s,h){for(var a in n)x.call(n,a)&&(null==h?s(n[a],a,n):s.call(h,n[a],a,n))}(n,s,a)}},{"is-callable":24}],13:[function(q,K,ee){"use strict";var o=Array.prototype.slice,x=Object.prototype.toString;K.exports=function(e){var r=this;if("function"!=typeof r||"[object Function]"!==x.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n,s=o.call(arguments,1),a=Math.max(0,r.length-s.length),v=[],l=0;l<a;l++)v.push("$"+l);if(n=Function("binder","return function ("+v.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var c=r.apply(this,s.concat(o.call(arguments)));return Object(c)===c?c:this}return r.apply(e,s.concat(o.call(arguments)))}),r.prototype){var f=function(){};f.prototype=r.prototype,n.prototype=new f,f.prototype=null}return n}},{}],14:[function(q,K,ee){"use strict";var M=q("./implementation");K.exports=Function.prototype.bind||M},{"./implementation":13}],15:[function(q,K,ee){"use strict";var M,o=SyntaxError,x=Function,d=TypeError,e=function(ie){try{return x('"use strict"; return ('+ie+").constructor;")()}catch{}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch{r=null}var n=function(){throw new d},s=r?function(){try{return n}catch{try{return r(arguments,"callee").get}catch{return n}}}():n,h=q("has-symbols")(),a=Object.getPrototypeOf||function(ie){return ie.__proto__},v={},l=typeof Uint8Array>"u"?M:a(Uint8Array),f={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":h?a([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?a(a([][Symbol.iterator]())):M,"%JSON%":"object"==typeof JSON?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&h?a((new Map)[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&h?a((new Set)[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?a(""[Symbol.iterator]()):M,"%Symbol%":h?Symbol:M,"%SyntaxError%":o,"%ThrowTypeError%":s,"%TypedArray%":l,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet},c=function ie(ye){var fe;if("%AsyncFunction%"===ye)fe=e("async function () {}");else if("%GeneratorFunction%"===ye)fe=e("function* () {}");else if("%AsyncGeneratorFunction%"===ye)fe=e("async function* () {}");else if("%AsyncGenerator%"===ye){var re=ie("%AsyncGeneratorFunction%");re&&(fe=re.prototype)}else if("%AsyncIteratorPrototype%"===ye){var V=ie("%AsyncGenerator%");V&&(fe=a(V.prototype))}return f[ye]=fe,fe},E={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=q("function-bind"),O=q("has"),N=_.call(Function.call,Array.prototype.concat),A=_.call(Function.apply,Array.prototype.splice),y=_.call(Function.call,String.prototype.replace),F=_.call(Function.call,String.prototype.slice),j=_.call(Function.call,RegExp.prototype.exec),G=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,Y=function(ie,ye){var fe,re=ie;if(O(E,re)&&(re="%"+(fe=E[re])[0]+"%"),O(f,re)){var V=f[re];if(V===v&&(V=c(re)),void 0===V&&!ye)throw new d("intrinsic "+ie+" exists, but is not available. Please file an issue!");return{alias:fe,name:re,value:V}}throw new o("intrinsic "+ie+" does not exist!")};K.exports=function(ie,ye){if("string"!=typeof ie||0===ie.length)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ye)throw new d('"allowMissing" argument must be a boolean');if(null===j(/^%?[^%]*%?$/g,ie))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var fe=function(ie){var ye=F(ie,0,1),fe=F(ie,-1);if("%"===ye&&"%"!==fe)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===fe&&"%"!==ye)throw new o("invalid intrinsic syntax, expected opening `%`");var re=[];return y(ie,G,function(V,$,ne,he){re[re.length]=ne?y(he,P,"$1"):$||V}),re}(ie),re=fe.length>0?fe[0]:"",V=Y("%"+re+"%",ye),$=V.name,ne=V.value,he=!1,xe=V.alias;xe&&(re=xe[0],A(fe,N([0,1],xe)));for(var ge=1,ce=!0;ge<fe.length;ge+=1){var ke=fe[ge],Ne=F(ke,0,1),Me=F(ke,-1);if(('"'===Ne||"'"===Ne||"`"===Ne||'"'===Me||"'"===Me||"`"===Me)&&Ne!==Me)throw new o("property names with quotes must have matching quotes");if("constructor"!==ke&&ce||(he=!0),O(f,$="%"+(re+="."+ke)+"%"))ne=f[$];else if(null!=ne){if(!(ke in ne)){if(!ye)throw new d("base intrinsic for "+ie+" exists, but the property is not available.");return}if(r&&ge+1>=fe.length){var oe=r(ne,ke);ne=(ce=!!oe)&&"get"in oe&&!("originalValue"in oe.get)?oe.get:ne[ke]}else ce=O(ne,ke),ne=ne[ke];ce&&!he&&(f[$]=ne)}}return ne}},{"function-bind":14,has:19,"has-symbols":16}],16:[function(q,K,ee){"use strict";var M=typeof Symbol<"u"&&Symbol,o=q("./shams");K.exports=function(){return"function"==typeof M&&"function"==typeof Symbol&&"symbol"==typeof M("foo")&&"symbol"==typeof Symbol("bar")&&o()}},{"./shams":17}],17:[function(q,K,ee){"use strict";K.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var M={},o=Symbol("test"),x=Object(o);if("string"==typeof o||"[object Symbol]"!==Object.prototype.toString.call(o)||"[object Symbol]"!==Object.prototype.toString.call(x))return!1;for(o in M[o]=42,M)return!1;if("function"==typeof Object.keys&&0!==Object.keys(M).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(M).length)return!1;var d=Object.getOwnPropertySymbols(M);if(1!==d.length||d[0]!==o||!Object.prototype.propertyIsEnumerable.call(M,o))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(M,o);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],18:[function(q,K,ee){"use strict";var M=q("has-symbols/shams");K.exports=function(){return M()&&!!Symbol.toStringTag}},{"has-symbols/shams":17}],19:[function(q,K,ee){"use strict";var M=q("function-bind");K.exports=M.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":14}],20:[function(q,K,ee){var M=q("http"),o=q("url"),x=K.exports;for(var d in M)M.hasOwnProperty(d)&&(x[d]=M[d]);function e(r){if("string"==typeof r&&(r=o.parse(r)),r.protocol||(r.protocol="https:"),"https:"!==r.protocol)throw new Error('Protocol "'+r.protocol+'" not supported. Expected "https:"');return r}x.request=function(r,n){return r=e(r),M.request.call(this,r,n)},x.get=function(r,n){return r=e(r),M.get.call(this,r,n)}},{http:91,url:112}],21:[function(q,K,ee){ee.read=function(M,o,x,d,e){var r,n,s=8*e-d-1,h=(1<<s)-1,a=h>>1,v=-7,l=x?e-1:0,f=x?-1:1,c=M[o+l];for(l+=f,r=c&(1<<-v)-1,c>>=-v,v+=s;v>0;r=256*r+M[o+l],l+=f,v-=8);for(n=r&(1<<-v)-1,r>>=-v,v+=d;v>0;n=256*n+M[o+l],l+=f,v-=8);if(0===r)r=1-a;else{if(r===h)return n?NaN:1/0*(c?-1:1);n+=Math.pow(2,d),r-=a}return(c?-1:1)*n*Math.pow(2,r-d)},ee.write=function(M,o,x,d,e,r){var n,s,h,a=8*r-e-1,v=(1<<a)-1,l=v>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=d?0:r-1,E=d?1:-1,_=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,n=v):(n=Math.floor(Math.log(o)/Math.LN2),o*(h=Math.pow(2,-n))<1&&(n--,h*=2),(o+=n+l>=1?f/h:f*Math.pow(2,1-l))*h>=2&&(n++,h/=2),n+l>=v?(s=0,n=v):n+l>=1?(s=(o*h-1)*Math.pow(2,e),n+=l):(s=o*Math.pow(2,l-1)*Math.pow(2,e),n=0));e>=8;M[x+c]=255&s,c+=E,s/=256,e-=8);for(n=n<<e|s,a+=e;a>0;M[x+c]=255&n,c+=E,n/=256,a-=8);M[x+c-E]|=128*_}},{}],22:[function(q,K,ee){"function"==typeof Object.create?K.exports=function(M,o){o&&(M.super_=o,M.prototype=Object.create(o.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}))}:K.exports=function(M,o){if(o){M.super_=o;var x=function(){};x.prototype=o.prototype,M.prototype=new x,M.prototype.constructor=M}}},{}],23:[function(q,K,ee){"use strict";var M=q("has-tostringtag/shams")(),o=q("call-bind/callBound")("Object.prototype.toString"),x=function(r){return!(M&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===o(r)},d=function(r){return!!x(r)||null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Array]"!==o(r)&&"[object Function]"===o(r.callee)},e=function(){return x(arguments)}();x.isLegacyArguments=d,K.exports=e?x:d},{"call-bind/callBound":7,"has-tostringtag/shams":18}],24:[function(q,K,ee){"use strict";var M,o,x=Function.prototype.toString,d="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof d&&"function"==typeof Object.defineProperty)try{M=Object.defineProperty({},"length",{get:function(){throw o}}),o={},d(function(){throw 42},null,M)}catch(a){a!==o&&(d=null)}else d=null;var e=/^\s*class\b/,r=function(a){try{var v=x.call(a);return e.test(v)}catch{return!1}},n=Object.prototype.toString,s="function"==typeof Symbol&&!!Symbol.toStringTag,h="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};K.exports=d?function(a){if(a===h)return!0;if(!a||"function"!=typeof a&&"object"!=typeof a)return!1;if("function"==typeof a&&!a.prototype)return!0;try{d(a,null,M)}catch(v){if(v!==o)return!1}return!r(a)}:function(a){if(a===h)return!0;if(!a||"function"!=typeof a&&"object"!=typeof a)return!1;if("function"==typeof a&&!a.prototype)return!0;if(s)return function(l){try{return!r(l)&&(x.call(l),!0)}catch{return!1}}(a);if(r(a))return!1;var v=n.call(a);return"[object Function]"===v||"[object GeneratorFunction]"===v}},{}],25:[function(q,K,ee){"use strict";var M,o=Object.prototype.toString,x=Function.prototype.toString,d=/^\s*(?:function)?\*/,e=q("has-tostringtag/shams")(),r=Object.getPrototypeOf;K.exports=function(n){if("function"!=typeof n)return!1;if(d.test(x.call(n)))return!0;if(!e)return"[object GeneratorFunction]"===o.call(n);if(!r)return!1;if(void 0===M){var s=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!s&&r(s)}return r(n)===M}},{"has-tostringtag/shams":18}],26:[function(q,K,ee){(function(M){(function(){"use strict";var o=q("for-each"),x=q("available-typed-arrays"),d=q("call-bind/callBound"),e=d("Object.prototype.toString"),r=q("has-tostringtag/shams")(),n=typeof globalThis>"u"?M:globalThis,s=x(),h=d("Array.prototype.indexOf",!0)||function(c,E){for(var _=0;_<c.length;_+=1)if(c[_]===E)return _;return-1},a=d("String.prototype.slice"),v={},l=q("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;r&&l&&f&&o(s,function(c){var E=new n[c];if(Symbol.toStringTag in E){var _=f(E),O=l(_,Symbol.toStringTag);if(!O){var N=f(_);O=l(N,Symbol.toStringTag)}v[c]=O.get}}),K.exports=function(c){if(!c||"object"!=typeof c)return!1;if(!r||!(Symbol.toStringTag in c)){var E=a(e(c),8,-1);return h(s,E)>-1}return!!l&&(_=c,O=!1,o(v,function(N,A){if(!O)try{O=N.call(_)===A}catch{}}),O);var _,O}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18}],27:[function(q,K,ee){"use strict";const{isArray:M,isObject:o,isString:x}=q("./types"),{asArray:d}=q("./util"),{prependBase:e}=q("./url"),r=q("./JsonLdError"),n=q("./ResolvedContext");function s(a){throw new r("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:a})}function h({context:a,base:v}){if(!a)return;const l=a["@context"];if(x(l))a["@context"]=e(v,l);else if(M(l))for(let f=0;f<l.length;++f){const c=l[f];x(c)?l[f]=e(v,c):o(c)&&h({context:{"@context":c},base:v})}else if(o(l))for(const f in l)h({context:l[f],base:v})}K.exports=class{constructor({sharedCache:a}){this.perOpCache=new Map,this.sharedCache=a}async resolve({activeCtx:a,context:v,documentLoader:l,base:f,cycles:c=new Set}){v&&o(v)&&v["@context"]&&(v=v["@context"]),v=d(v);const E=[];for(const _ of v){if(x(_)){let A=this._get(_);A||(A=await this._resolveRemoteContext({activeCtx:a,url:_,documentLoader:l,base:f,cycles:c})),M(A)?E.push(...A):E.push(A);continue}if(null===_){E.push(new n({document:null}));continue}o(_)||s(v);const O=JSON.stringify(_);let N=this._get(O);N||(N=new n({document:_}),this._cacheResolvedContext({key:O,resolved:N,tag:"static"})),E.push(N)}return E}_get(a){let v=this.perOpCache.get(a);if(!v){const l=this.sharedCache.get(a);l&&(v=l.get("static"),v&&this.perOpCache.set(a,v))}return v}_cacheResolvedContext({key:a,resolved:v,tag:l}){if(this.perOpCache.set(a,v),void 0!==l){let f=this.sharedCache.get(a);f||(f=new Map,this.sharedCache.set(a,f)),f.set(l,v)}return v}async _resolveRemoteContext({activeCtx:a,url:v,documentLoader:l,base:f,cycles:c}){v=e(f,v);const{context:E,remoteDoc:_}=await this._fetchContext({activeCtx:a,url:v,documentLoader:l,cycles:c});h({context:E,base:f=_.documentUrl||v});const O=await this.resolve({activeCtx:a,context:E,documentLoader:l,base:f,cycles:c});return this._cacheResolvedContext({key:v,resolved:O,tag:_.tag}),O}async _fetchContext({activeCtx:a,url:v,documentLoader:l,cycles:f}){if(f.size>10)throw new r("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===a.processingMode?"loading remote context failed":"context overflow",max:10});if(f.has(v))throw new r("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===a.processingMode?"recursive context inclusion":"context overflow",url:v});let c,E;f.add(v);try{E=await l(v),c=E.document||null,x(c)&&(c=JSON.parse(c))}catch(_){throw new r("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:v,cause:_})}if(!o(c))throw new r("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:v});return c="@context"in c?{"@context":c["@context"]}:{"@context":{}},E.contextUrl&&(M(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(E.contextUrl)),{context:c,remoteDoc:E}}}},{"./JsonLdError":28,"./ResolvedContext":32,"./types":47,"./url":48,"./util":49}],28:[function(q,K,ee){"use strict";K.exports=class extends Error{constructor(M="An unspecified JSON-LD error occurred.",o="jsonld.Error",x={}){super(M),this.name=o,this.message=M,this.details=x}}},{}],29:[function(q,K,ee){"use strict";K.exports=M=>{class o{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(o,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(o.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:o}),o.compact=function(x,d){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):M.compact(x,d)},o.expand=function(x){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):M.expand(x)},o.flatten=function(x){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):M.flatten(x)},o}},{}],30:[function(q,K,ee){"use strict";K.exports=q("rdf-canonize").NQuads},{"rdf-canonize":64}],31:[function(q,K,ee){"use strict";K.exports=class{constructor(){this._requests={}}wrapLoader(M){const o=this;return o._loader=M,function(){return o.add.apply(o,arguments)}}async add(M){let o=this._requests[M];if(o)return Promise.resolve(o);o=this._requests[M]=this._loader(M);try{return await o}finally{delete this._requests[M]}}}},{}],32:[function(q,K,ee){"use strict";const M=q("lru-cache");K.exports=class{constructor({document:o}){this.document=o,this.cache=new M({max:10})}getProcessed(o){return this.cache.get(o)}setProcessed(o,x){this.cache.set(o,x)}}},{"lru-cache":50}],33:[function(q,K,ee){"use strict";const M=q("./JsonLdError"),{isArray:o,isObject:x,isString:d,isUndefined:e}=q("./types"),{isList:r,isValue:n,isGraph:s,isSimpleGraph:h,isSubjectReference:a}=q("./graphTypes"),{expandIri:v,getContextValue:l,isKeyword:f,process:c,processingMode:E}=q("./context"),{removeBase:_,prependBase:O}=q("./url"),{REGEX_KEYWORD:N,addValue:A,asArray:y,compareShortestLeast:F}=q("./util"),j={};function G(P,z,Y){if("@nest"!==v(P,z,{vocab:!0},Y))throw new M("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}K.exports=j,j.compact=async({activeCtx:P,activeProperty:z=null,element:Y,options:ie={}})=>{if(o(Y)){let fe=[];for(let re=0;re<Y.length;++re){const V=await j.compact({activeCtx:P,activeProperty:z,element:Y[re],options:ie});null!==V&&fe.push(V)}return ie.compactArrays&&1===fe.length&&0===(l(P,z,"@container")||[]).length&&(fe=fe[0]),fe}const ye=l(P,z,"@context");if(e(ye)||(P=await c({activeCtx:P,localCtx:ye,propagate:!0,overrideProtected:!0,options:ie})),x(Y)){if(ie.link&&"@id"in Y&&ie.link.hasOwnProperty(Y["@id"])){const ge=ie.link[Y["@id"]];for(let ce=0;ce<ge.length;++ce)if(ge[ce].expanded===Y)return ge[ce].compacted}if(n(Y)||a(Y)){const ge=j.compactValue({activeCtx:P,activeProperty:z,value:Y,options:ie});return ie.link&&a(Y)&&(ie.link.hasOwnProperty(Y["@id"])||(ie.link[Y["@id"]]=[]),ie.link[Y["@id"]].push({expanded:Y,compacted:ge})),ge}if(r(Y)&&(l(P,z,"@container")||[]).includes("@list"))return j.compact({activeCtx:P,activeProperty:z,element:Y["@list"],options:ie});const fe="@reverse"===z,re={},V=P;n(Y)||a(Y)||(P=P.revertToPreviousContext());const $=l(V,z,"@context");e($)||(P=await c({activeCtx:P,localCtx:$,propagate:!0,overrideProtected:!0,options:ie})),ie.link&&"@id"in Y&&(ie.link.hasOwnProperty(Y["@id"])||(ie.link[Y["@id"]]=[]),ie.link[Y["@id"]].push({expanded:Y,compacted:re}));let ne=Y["@type"]||[];ne.length>1&&(ne=Array.from(ne).sort());const he=P;for(const ge of ne){const ce=j.compactIri({activeCtx:he,iri:ge,relativeTo:{vocab:!0}}),ke=l(V,ce,"@context");e(ke)||(P=await c({activeCtx:P,localCtx:ke,options:ie,propagate:!1}))}const xe=Object.keys(Y).sort();for(const ge of xe){const ce=Y[ge];if("@id"!==ge)if("@type"!==ge)if("@reverse"!==ge)if("@preserve"!==ge)if("@index"!==ge)if("@graph"!==ge&&"@list"!==ge&&"@included"!==ge&&f(ge)){const ke=j.compactIri({activeCtx:P,iri:ge,relativeTo:{vocab:!0}});A(re,ke,ce)}else{if(!o(ce))throw new M("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ce.length){const ke=j.compactIri({activeCtx:P,iri:ge,value:ce,relativeTo:{vocab:!0},reverse:fe}),Ne=P.mappings.has(ke)?P.mappings.get(ke)["@nest"]:null;let Me=re;Ne&&(G(P,Ne,ie),x(re[Ne])||(re[Ne]={}),Me=re[Ne]),A(Me,ke,ce,{propertyIsArray:!0})}for(const ke of ce){const Ne=j.compactIri({activeCtx:P,iri:ge,value:ke,relativeTo:{vocab:!0},reverse:fe}),Me=P.mappings.has(Ne)?P.mappings.get(Ne)["@nest"]:null;let oe=re;Me&&(G(P,Me,ie),x(re[Me])||(re[Me]={}),oe=re[Me]);const k=l(P,Ne,"@container")||[],Q=s(ke),X=r(ke);let se;X?se=ke["@list"]:Q&&(se=ke["@graph"]);let pe=await j.compact({activeCtx:P,activeProperty:Ne,element:X||Q?se:ke,options:ie});if(X){if(o(pe)||(pe=[pe]),k.includes("@list")){A(oe,Ne,pe,{valueIsArray:!0,allowDuplicate:!0});continue}pe={[j.compactIri({activeCtx:P,iri:"@list",relativeTo:{vocab:!0}})]:pe},"@index"in ke&&(pe[j.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=ke["@index"])}if(Q)if(k.includes("@graph")&&(k.includes("@id")||k.includes("@index")&&h(ke))){let ve;oe.hasOwnProperty(Ne)?ve=oe[Ne]:oe[Ne]=ve={};const Pe=(k.includes("@id")?ke["@id"]:ke["@index"])||j.compactIri({activeCtx:P,iri:"@none",relativeTo:{vocab:!0}});A(ve,Pe,pe,{propertyIsArray:!ie.compactArrays||k.includes("@set")})}else k.includes("@graph")&&h(ke)?(o(pe)&&pe.length>1&&(pe={"@included":pe}),A(oe,Ne,pe,{propertyIsArray:!ie.compactArrays||k.includes("@set")})):(o(pe)&&1===pe.length&&ie.compactArrays&&(pe=pe[0]),pe={[j.compactIri({activeCtx:P,iri:"@graph",relativeTo:{vocab:!0}})]:pe},"@id"in ke&&(pe[j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]=ke["@id"]),"@index"in ke&&(pe[j.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=ke["@index"]),A(oe,Ne,pe,{propertyIsArray:!ie.compactArrays||k.includes("@set")}));else if(k.includes("@language")||k.includes("@index")||k.includes("@id")||k.includes("@type")){let ve,Pe;if(oe.hasOwnProperty(Ne)?ve=oe[Ne]:oe[Ne]=ve={},k.includes("@language"))n(pe)&&(pe=pe["@value"]),Pe=ke["@language"];else if(k.includes("@index")){const Qe=l(P,Ne,"@index")||"@index",Ue=j.compactIri({activeCtx:P,iri:Qe,relativeTo:{vocab:!0}});if("@index"===Qe)Pe=ke["@index"],delete pe[Ue];else{let We;if([Pe,...We]=y(pe[Qe]||[]),d(Pe))switch(We.length){case 0:delete pe[Qe];break;case 1:pe[Qe]=We[0];break;default:pe[Qe]=We}else Pe=null}}else if(k.includes("@id")){const Qe=j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}});Pe=pe[Qe],delete pe[Qe]}else if(k.includes("@type")){const Qe=j.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}});let Ue;switch([Pe,...Ue]=y(pe[Qe]||[]),Ue.length){case 0:delete pe[Qe];break;case 1:pe[Qe]=Ue[0];break;default:pe[Qe]=Ue}1===Object.keys(pe).length&&"@id"in ke&&(pe=await j.compact({activeCtx:P,activeProperty:Ne,element:{"@id":ke["@id"]},options:ie}))}Pe||(Pe=j.compactIri({activeCtx:P,iri:"@none",relativeTo:{vocab:!0}})),A(ve,Pe,pe,{propertyIsArray:k.includes("@set")})}else{const ve=!ie.compactArrays||k.includes("@set")||k.includes("@list")||o(pe)&&0===pe.length||"@list"===ge||"@graph"===ge;A(oe,Ne,pe,{propertyIsArray:ve})}}}else{if((l(P,z,"@container")||[]).includes("@index"))continue;const ke=j.compactIri({activeCtx:P,iri:ge,relativeTo:{vocab:!0}});A(re,ke,ce)}else{const ke=await j.compact({activeCtx:P,activeProperty:z,element:ce,options:ie});o(ke)&&0===ke.length||A(re,ge,ke)}else{const ke=await j.compact({activeCtx:P,activeProperty:"@reverse",element:ce,options:ie});for(const Ne in ke)if(P.mappings.has(Ne)&&P.mappings.get(Ne).reverse){const Me=ke[Ne],oe=(l(P,Ne,"@container")||[]).includes("@set")||!ie.compactArrays;A(re,Ne,Me,{propertyIsArray:oe}),delete ke[Ne]}if(Object.keys(ke).length>0){const Ne=j.compactIri({activeCtx:P,iri:ge,relativeTo:{vocab:!0}});A(re,Ne,ke)}}else{let ke=y(ce).map(oe=>j.compactIri({activeCtx:V,iri:oe,relativeTo:{vocab:!0}}));1===ke.length&&(ke=ke[0]);const Ne=j.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}}),Me=(l(P,Ne,"@container")||[]).includes("@set")&&E(P,1.1)||o(ke)&&0===ce.length;A(re,Ne,ke,{propertyIsArray:Me})}else{let ke=y(ce).map(Ne=>j.compactIri({activeCtx:P,iri:Ne,relativeTo:{vocab:!1},base:ie.base}));1===ke.length&&(ke=ke[0]),re[j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]=ke}}return re}return Y},j.compactIri=({activeCtx:P,iri:z,value:Y=null,relativeTo:ie={vocab:!1},reverse:ye=!1,base:fe=null})=>{if(null===z)return z;P.isPropertyTermScoped&&P.previousContext&&(P=P.previousContext);const re=P.getInverse();if(f(z)&&z in re&&"@none"in re[z]&&"@type"in re[z]["@none"]&&"@none"in re[z]["@none"]["@type"])return re[z]["@none"]["@type"]["@none"];if(ie.vocab&&z in re){const xe=P["@language"]||"@none",ge=[];x(Y)&&"@index"in Y&&!("@graph"in Y)&&ge.push("@index","@index@set"),x(Y)&&"@preserve"in Y&&(Y=Y["@preserve"][0]),s(Y)?("@index"in Y&&ge.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Y&&ge.push("@graph@id","@graph@id@set"),ge.push("@graph","@graph@set","@set"),"@index"in Y||ge.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Y||ge.push("@graph@id","@graph@id@set")):x(Y)&&!n(Y)&&ge.push("@id","@id@set","@type","@set@type");let ce="@language",ke="@null";if(ye)ce="@type",ke="@reverse",ge.push("@set");else if(r(Y)){"@index"in Y||ge.push("@list");const Me=Y["@list"];if(0===Me.length)ce="@any",ke="@none";else{let oe=0===Me.length?xe:null,k=null;for(let Q=0;Q<Me.length;++Q){const X=Me[Q];let se="@none",pe="@none";if(n(X)?"@direction"in X?se=`${(X["@language"]||"").toLowerCase()}_${X["@direction"]}`:"@language"in X?se=X["@language"].toLowerCase():"@type"in X?pe=X["@type"]:se="@null":pe="@id",null===oe?oe=se:se!==oe&&n(X)&&(oe="@none"),null===k?k=pe:pe!==k&&(k="@none"),"@none"===oe&&"@none"===k)break}oe=oe||"@none",k=k||"@none","@none"!==k?(ce="@type",ke=k):ke=oe}}else{if(n(Y))if("@language"in Y&&!("@index"in Y)){ge.push("@language","@language@set"),ke=Y["@language"];const Me=Y["@direction"];Me&&(ke=`${ke}_${Me}`)}else"@direction"in Y&&!("@index"in Y)?ke=`_${Y["@direction"]}`:"@type"in Y&&(ce="@type",ke=Y["@type"]);else ce="@type",ke="@id";ge.push("@set")}ge.push("@none"),x(Y)&&!("@index"in Y)&&ge.push("@index","@index@set"),n(Y)&&1===Object.keys(Y).length&&ge.push("@language","@language@set");const Ne=function(Me,oe,k,Q,X,se){null===se&&(se="@null");const pe=[];if(("@id"===se||"@reverse"===se)&&x(k)&&"@id"in k){"@reverse"===se&&pe.push("@reverse");const Pe=j.compactIri({activeCtx:Me,iri:k["@id"],relativeTo:{vocab:!0}});Me.mappings.has(Pe)&&Me.mappings.get(Pe)&&Me.mappings.get(Pe)["@id"]===k["@id"]?pe.push.apply(pe,["@vocab","@id"]):pe.push.apply(pe,["@id","@vocab"])}else{pe.push(se);const Pe=pe.find(Qe=>Qe.includes("_"));Pe&&pe.push(Pe.replace(/^[^_]+_/,"_"))}pe.push("@none");const ve=Me.inverse[oe];for(const Pe of Q){if(!(Pe in ve))continue;const Qe=ve[Pe][X];for(const Ue of pe)if(Ue in Qe)return Qe[Ue]}return null}(P,z,Y,ge,ce,ke);if(null!==Ne)return Ne}if(ie.vocab&&"@vocab"in P){const xe=P["@vocab"];if(0===z.indexOf(xe)&&z!==xe){const ge=z.substr(xe.length);if(!P.mappings.has(ge))return ge}}let V=null;const $=[];let ne=P.fastCurieMap;const he=z.length-1;for(let xe=0;xe<he&&z[xe]in ne;++xe)ne=ne[z[xe]],""in ne&&$.push(ne[""][0]);for(let xe=$.length-1;xe>=0;--xe){const ge=$[xe],ce=ge.terms;for(const ke of ce){const Ne=ke+":"+z.substr(ge.iri.length);P.mappings.get(ke)._prefix&&(!P.mappings.has(Ne)||null===Y&&P.mappings.get(Ne)["@id"]===z)&&(null===V||F(Ne,V)<0)&&(V=Ne)}}if(null!==V)return V;for(const[xe,ge]of P.mappings)if(ge&&ge._prefix&&z.startsWith(xe+":"))throw new M(`Absolute IRI "${z}" confused with prefix "${xe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:P});if(!ie.vocab){if("@base"in P){if(P["@base"]){const xe=_(O(fe,P["@base"]),z);return N.test(xe)?`./${xe}`:xe}return z}return _(fe,z)}return z},j.compactValue=({activeCtx:P,activeProperty:z,value:Y,options:ie})=>{if(n(Y)){const V=l(P,z,"@type"),$=l(P,z,"@language"),ne=l(P,z,"@direction"),he=l(P,z,"@container")||[],xe="@index"in Y&&!he.includes("@index");if(!xe&&"@none"!==V&&(Y["@type"]===V||"@language"in Y&&Y["@language"]===$&&"@direction"in Y&&Y["@direction"]===ne||"@language"in Y&&Y["@language"]===$||"@direction"in Y&&Y["@direction"]===ne))return Y["@value"];const ge=Object.keys(Y).length,ce=1===ge||2===ge&&"@index"in Y&&!xe,ke="@language"in P,Ne=d(Y["@value"]),Me=P.mappings.has(z)&&null===P.mappings.get(z)["@language"];if(ce&&"@none"!==V&&(!ke||!Ne||Me))return Y["@value"];const oe={};return xe&&(oe[j.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=Y["@index"]),"@type"in Y?oe[j.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}})]=j.compactIri({activeCtx:P,iri:Y["@type"],relativeTo:{vocab:!0}}):"@language"in Y&&(oe[j.compactIri({activeCtx:P,iri:"@language",relativeTo:{vocab:!0}})]=Y["@language"]),"@direction"in Y&&(oe[j.compactIri({activeCtx:P,iri:"@direction",relativeTo:{vocab:!0}})]=Y["@direction"]),oe[j.compactIri({activeCtx:P,iri:"@value",relativeTo:{vocab:!0}})]=Y["@value"],oe}const ye=v(P,z,{vocab:!0},ie),fe=l(P,z,"@type"),re=j.compactIri({activeCtx:P,iri:Y["@id"],relativeTo:{vocab:"@vocab"===fe},base:ie.base});return"@id"===fe||"@vocab"===fe||"@graph"===ye?re:{[j.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]:re}}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],34:[function(q,K,ee){"use strict";const M="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o="http://www.w3.org/2001/XMLSchema#";K.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:M,RDF_LIST:M+"List",RDF_FIRST:M+"first",RDF_REST:M+"rest",RDF_NIL:M+"nil",RDF_TYPE:M+"type",RDF_PLAIN_LITERAL:M+"PlainLiteral",RDF_XML_LITERAL:M+"XMLLiteral",RDF_JSON_LITERAL:M+"JSON",RDF_OBJECT:M+"object",RDF_LANGSTRING:M+"langString",XSD:o,XSD_BOOLEAN:o+"boolean",XSD_DOUBLE:o+"double",XSD_INTEGER:o+"integer",XSD_STRING:o+"string"}},{}],35:[function(q,K,ee){"use strict";const M=q("./util"),o=q("./JsonLdError"),{isArray:x,isObject:d,isString:e,isUndefined:r}=q("./types"),{isAbsolute:n,isRelative:s,prependBase:h}=q("./url"),{handleEvent:a}=q("./events"),{REGEX_BCP47:v,REGEX_KEYWORD:l,asArray:f,compareShortestLeast:c}=q("./util"),E=new Map,_={};function O(A,y,F,j,G,P){if(null===y||!e(y)||_.isKeyword(y))return y;if(y.match(l))return null;if(j&&j.hasOwnProperty(y)&&!0!==G.get(y)&&_.createTermDefinition({activeCtx:A,localCtx:j,term:y,defined:G,options:P}),(F=F||{}).vocab){const Y=A.mappings.get(y);if(null===Y)return null;if(d(Y)&&"@id"in Y)return Y["@id"]}const z=y.indexOf(":");if(z>0){const Y=y.substr(0,z),ie=y.substr(z+1);if("_"===Y||0===ie.indexOf("//"))return y;j&&j.hasOwnProperty(Y)&&_.createTermDefinition({activeCtx:A,localCtx:j,term:Y,defined:G,options:P});const ye=A.mappings.get(Y);if(ye&&ye._prefix)return ye["@id"]+ie;if(n(y))return y}if(F.vocab&&"@vocab"in A)y=A["@vocab"]+y;else if(F.base){let Y,ie;"@base"in A?A["@base"]?(ie=h(P.base,A["@base"]),Y=h(ie,y)):(ie=A["@base"],Y=y):(ie=P.base,Y=h(P.base,y)),y=Y}return y}function N(A,y){if(!A||"object"!=typeof A||!y||"object"!=typeof y)return A===y;const F=Array.isArray(A);if(F!==Array.isArray(y))return!1;if(F){if(A.length!==y.length)return!1;for(let P=0;P<A.length;++P)if(!N(A[P],y[P]))return!1;return!0}const j=Object.keys(A),G=Object.keys(y);if(j.length!==G.length)return!1;for(const P in A){let z=A[P],Y=y[P];if("@container"===P&&Array.isArray(z)&&Array.isArray(Y)&&(z=z.slice().sort(),Y=Y.slice().sort()),!N(z,Y))return!1}return!0}K.exports=_,_.process=async({activeCtx:A,localCtx:y,options:F,propagate:j=!0,overrideProtected:G=!1,cycles:P=new Set})=>{if(d(y)&&"@context"in y&&x(y["@context"])&&(y=y["@context"]),0===f(y).length)return A;const z=[],Y=[({event:re,next:V})=>{z.push(re),V()}];F.eventHandler&&Y.push(F.eventHandler);const ie=F;F={...F,eventHandler:Y};const ye=await F.contextResolver.resolve({activeCtx:A,context:y,documentLoader:F.documentLoader,base:F.base});d(ye[0].document)&&"boolean"==typeof ye[0].document["@propagate"]&&(j=ye[0].document["@propagate"]);let fe=A;j||fe.previousContext||(fe=fe.clone(),fe.previousContext=A);for(const re of ye){let{document:V}=re;if(A=fe,null===V){if(!G&&0!==Object.keys(A.protected).length)throw new o("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});fe=A=_.getInitialContext(F).clone();continue}const $=re.getProcessed(A);if($){if(ie.eventHandler)for(const he of $.events)a({event:he,options:ie});fe=A=$.context;continue}if(d(V)&&"@context"in V&&(V=V["@context"]),!d(V))throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:V});fe=fe.clone();const ne=new Map;if("@version"in V){if(1.1!==V["@version"])throw new o("Unsupported JSON-LD version: "+V["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:V});if(A.processingMode&&"json-ld-1.0"===A.processingMode)throw new o("@version: "+V["@version"]+" not compatible with "+A.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:V});fe.processingMode="json-ld-1.1",fe["@version"]=V["@version"],ne.set("@version",!0)}if(fe.processingMode=fe.processingMode||A.processingMode,"@base"in V){let he=V["@base"];if(null!==he&&!n(he)){if(!s(he))throw new o('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:V});he=h(fe["@base"],he)}fe["@base"]=he,ne.set("@base",!0)}if("@vocab"in V){const he=V["@vocab"];if(null===he)delete fe["@vocab"];else{if(!e(he))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:V});if(!n(he)&&_.processingMode(fe,1))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:V});{const xe=O(fe,he,{vocab:!0,base:!0},void 0,void 0,F);n(xe)||F.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:xe}},options:F}),fe["@vocab"]=xe}}ne.set("@vocab",!0)}if("@language"in V){const he=V["@language"];if(null===he)delete fe["@language"];else{if(!e(he))throw new o('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:V});he.match(v)||F.eventHandler&&a({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:he}},options:F}),fe["@language"]=he.toLowerCase()}ne.set("@language",!0)}if("@direction"in V){const he=V["@direction"];if("json-ld-1.0"===A.processingMode)throw new o("Invalid JSON-LD syntax; @direction not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:V});if(null===he)delete fe["@direction"];else{if("ltr"!==he&&"rtl"!==he)throw new o('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:V});fe["@direction"]=he}ne.set("@direction",!0)}if("@propagate"in V){const he=V["@propagate"];if("json-ld-1.0"===A.processingMode)throw new o("Invalid JSON-LD syntax; @propagate not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:V});if("boolean"!=typeof he)throw new o("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:y});ne.set("@propagate",!0)}if("@import"in V){const he=V["@import"];if("json-ld-1.0"===A.processingMode)throw new o("Invalid JSON-LD syntax; @import not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:V});if(!e(he))throw new o("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:y});const xe=await F.contextResolver.resolve({activeCtx:A,context:he,documentLoader:F.documentLoader,base:F.base});if(1!==xe.length)throw new o("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:y});const ge=xe[0].getProcessed(A);if(ge)V=ge;else{const ce=xe[0].document;if("@import"in ce)throw new o("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:y});for(const ke in ce)V.hasOwnProperty(ke)||(V[ke]=ce[ke]);xe[0].setProcessed(A,V)}ne.set("@import",!0)}ne.set("@protected",V["@protected"]||!1);for(const he in V)if(_.createTermDefinition({activeCtx:fe,localCtx:V,term:he,defined:ne,options:F,overrideProtected:G}),d(V[he])&&"@context"in V[he]){const xe=V[he]["@context"];let ge=!0;if(e(xe)){const ce=h(F.base,xe);P.has(ce)?ge=!1:P.add(ce)}if(ge)try{await _.process({activeCtx:fe.clone(),localCtx:V[he]["@context"],overrideProtected:!0,options:F,cycles:P})}catch{throw new o("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:V[he]["@context"],term:he})}}re.setProcessed(A,{context:fe,events:z})}return fe},_.createTermDefinition=({activeCtx:A,localCtx:y,term:F,defined:j,options:G,overrideProtected:P=!1})=>{if(j.has(F)){if(j.get(F))return;throw new o("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:y,term:F})}let z;if(j.set(F,!1),y.hasOwnProperty(F)&&(z=y[F]),"@type"===F&&d(z)&&"@set"===(z["@container"]||"@set")&&_.processingMode(A,1.1)){const $=["@container","@id","@protected"],ne=Object.keys(z);if(0===ne.length||ne.some(he=>!$.includes(he)))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:y,term:F})}else{if(_.isKeyword(F))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:y,term:F});if(F.match(l))return void(G.eventHandler&&a({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:F}},options:G}));if(""===F)throw new o("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:y})}const Y=A.mappings.get(F);A.mappings.has(F)&&A.mappings.delete(F);let ie=!1;if((e(z)||null===z)&&(ie=!0,z={"@id":z}),!d(z))throw new o("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:y});const ye={};A.mappings.set(F,ye),ye.reverse=!1;const fe=["@container","@id","@language","@reverse","@type"];_.processingMode(A,1.1)&&fe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const $ in z)if(!fe.includes($))throw new o("Invalid JSON-LD syntax; a term definition must not contain "+$,"jsonld.SyntaxError",{code:"invalid term definition",context:y});const re=F.indexOf(":");if(ye._termHasColon=re>0,"@reverse"in z){if("@id"in z)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:y});if("@nest"in z)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:y});const $=z["@reverse"];if(!e($))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:y});if($.match(l))return G.eventHandler&&a({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:$}},options:G}),void(Y?A.mappings.set(F,Y):A.mappings.delete(F));const ne=O(A,$,{vocab:!0,base:!1},y,j,G);if(!n(ne))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:y});ye["@id"]=ne,ye.reverse=!0}else if("@id"in z){let $=z["@id"];if($&&!e($))throw new o("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:y});if(null===$)ye["@id"]=null;else{if(!_.isKeyword($)&&$.match(l))return G.eventHandler&&a({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:$}},options:G}),void(Y?A.mappings.set(F,Y):A.mappings.delete(F));if($!==F){if($=O(A,$,{vocab:!0,base:!1},y,j,G),!n($)&&!_.isKeyword($))throw new o("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:y});if(F.match(/(?::[^:])|\//)&&O(A,F,{vocab:!0,base:!1},y,new Map(j).set(F,!0),G)!==$)throw new o("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:y});ye["@id"]=$,ye._prefix=ie&&!ye._termHasColon&&null!==$.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ye))if(ye._termHasColon){const $=F.substr(0,re);if(y.hasOwnProperty($)&&_.createTermDefinition({activeCtx:A,localCtx:y,term:$,defined:j,options:G}),A.mappings.has($)){const ne=F.substr(re+1);ye["@id"]=A.mappings.get($)["@id"]+ne}else ye["@id"]=F}else if("@type"===F)ye["@id"]=F;else{if(!("@vocab"in A))throw new o("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:y,term:F});ye["@id"]=A["@vocab"]+F}if((!0===z["@protected"]||!0===j.get("@protected")&&!1!==z["@protected"])&&(A.protected[F]=!0,ye.protected=!0),j.set(F,!0),"@type"in z){let $=z["@type"];if(!e($))throw new o("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:y});if("@json"===$||"@none"===$){if(_.processingMode(A,1))throw new o(`Invalid JSON-LD syntax; an @context @type value must not be "${$}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:y})}else if("@id"!==$&&"@vocab"!==$){if($=O(A,$,{vocab:!0,base:!1},y,j,G),!n($))throw new o("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:y});if(0===$.indexOf("_:"))throw new o("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:y})}ye["@type"]=$}if("@container"in z){const $=e(z["@container"])?[z["@container"]]:z["@container"]||[],ne=["@list","@set","@index","@language"];let he=!0;const xe=$.includes("@set");if(_.processingMode(A,1.1)){if(ne.push("@graph","@id","@type"),$.includes("@list")){if(1!==$.length)throw new o("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:y})}else if($.includes("@graph")){if($.some(ge=>"@graph"!==ge&&"@id"!==ge&&"@index"!==ge&&"@set"!==ge))throw new o("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:y})}else he&=$.length<=(xe?2:1);if($.includes("@type")&&(ye["@type"]=ye["@type"]||"@id",!["@id","@vocab"].includes(ye["@type"])))throw new o("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:y})}else he&=!x(z["@container"]),he&=$.length<=1;if(he&=$.every(ge=>ne.includes(ge)),he&=!(xe&&$.includes("@list")),!he)throw new o("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ne.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:y});if(ye.reverse&&!$.every(ge=>["@index","@set"].includes(ge)))throw new o("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:y});ye["@container"]=$}if("@index"in z){if(!("@container"in z)||!ye["@container"].includes("@index"))throw new o(`Invalid JSON-LD syntax; @index without @index in @container: "${z["@index"]}" on term "${F}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:y});if(!e(z["@index"])||0===z["@index"].indexOf("@"))throw new o(`Invalid JSON-LD syntax; @index must expand to an IRI: "${z["@index"]}" on term "${F}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:y});ye["@index"]=z["@index"]}if("@context"in z&&(ye["@context"]=z["@context"]),"@language"in z&&!("@type"in z)){let $=z["@language"];if(null!==$&&!e($))throw new o("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:y});null!==$&&($=$.toLowerCase()),ye["@language"]=$}if("@prefix"in z){if(F.match(/:|\//))throw new o("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:y});if(_.isKeyword(ye["@id"]))throw new o("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:y});if("boolean"!=typeof z["@prefix"])throw new o("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:y});ye._prefix=!0===z["@prefix"]}if("@direction"in z){const $=z["@direction"];if(null!==$&&"ltr"!==$&&"rtl"!==$)throw new o('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:y});ye["@direction"]=$}if("@nest"in z){const $=z["@nest"];if(!e($)||"@nest"!==$&&0===$.indexOf("@"))throw new o("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:y});ye["@nest"]=$}const V=ye["@id"];if("@context"===V||"@preserve"===V)throw new o("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:y});if(Y&&Y.protected&&!P&&(A.protected[F]=!0,ye.protected=!0,!N(Y,ye)))throw new o("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:y,term:F})},_.expandIri=(A,y,F,j)=>O(A,y,F,void 0,void 0,j),_.getInitialContext=A=>{const y=JSON.stringify({processingMode:A.processingMode}),F=E.get(y);if(F)return F;const j={processingMode:A.processingMode,mappings:new Map,inverse:null,getInverse:function(){const z=this;if(z.inverse)return z.inverse;const Y=z.inverse={},ie=z.fastCurieMap={},ye={},fe=(z["@language"]||"@none").toLowerCase(),re=z["@direction"],V=z.mappings,$=[...V.keys()].sort(c);for(const ne of $){const he=V.get(ne);if(null===he)continue;let xe=he["@container"]||"@none";if(xe=[].concat(xe).sort().join(""),null===he["@id"])continue;const ge=f(he["@id"]);for(const ce of ge){let ke=Y[ce];const Ne=_.isKeyword(ce);if(ke)Ne||he._termHasColon||ye[ce].push(ne);else if(Y[ce]=ke={},!Ne&&!he._termHasColon){ye[ce]=[ne];const Me={iri:ce,terms:ye[ce]};ce[0]in ie?ie[ce[0]].push(Me):ie[ce[0]]=[Me]}if(ke[xe]||(ke[xe]={"@language":{},"@type":{},"@any":{}}),ke=ke[xe],P(ne,ke["@any"],"@none"),he.reverse)P(ne,ke["@type"],"@reverse");else if("@none"===he["@type"])P(ne,ke["@any"],"@none"),P(ne,ke["@language"],"@none"),P(ne,ke["@type"],"@none");else if("@type"in he)P(ne,ke["@type"],he["@type"]);else if("@language"in he&&"@direction"in he){const Me=he["@language"],oe=he["@direction"];P(ne,ke["@language"],Me&&oe?`${Me}_${oe}`.toLowerCase():Me?Me.toLowerCase():oe?`_${oe}`:"@null")}else"@language"in he?P(ne,ke["@language"],(he["@language"]||"@null").toLowerCase()):"@direction"in he?he["@direction"]?P(ne,ke["@language"],`_${he["@direction"]}`):P(ne,ke["@language"],"@none"):re?(P(ne,ke["@language"],`_${re}`),P(ne,ke["@language"],"@none"),P(ne,ke["@type"],"@none")):(P(ne,ke["@language"],fe),P(ne,ke["@language"],"@none"),P(ne,ke["@type"],"@none"))}}for(const ne in ie)G(ie,ne,1);return Y},clone:function(){const z={};return z.mappings=M.clone(this.mappings),z.clone=this.clone,z.inverse=null,z.getInverse=this.getInverse,z.protected=M.clone(this.protected),this.previousContext&&(z.previousContext=this.previousContext.clone()),z.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(z["@base"]=this["@base"]),"@language"in this&&(z["@language"]=this["@language"]),"@vocab"in this&&(z["@vocab"]=this["@vocab"]),z},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===E.size&&E.clear(),E.set(y,j),j;function G(z,Y,ie){const ye=z[Y],fe=z[Y]={};let re,V;for(const $ of ye)re=$.iri,V=ie>=re.length?"":re[ie],V in fe?fe[V].push($):fe[V]=[$];for(const $ in fe)""!==$&&G(fe,$,ie+1)}function P(z,Y,ie){Y.hasOwnProperty(ie)||(Y[ie]=z)}},_.getContextValue=(A,y,F)=>{if(null===y)return"@context"===F?void 0:null;if(A.mappings.has(y)){const j=A.mappings.get(y);if(r(F))return j;if(j.hasOwnProperty(F))return j[F]}return"@language"===F&&F in A||"@direction"===F&&F in A?A[F]:"@context"!==F?null:void 0},_.processingMode=(A,y)=>y.toString()>="1.1"?!A.processingMode||A.processingMode>="json-ld-"+y.toString():"json-ld-1.0"===A.processingMode,_.isKeyword=A=>{if(!e(A)||"@"!==A[0])return!1;switch(A){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":28,"./events":37,"./types":47,"./url":48,"./util":49}],36:[function(q,K,ee){"use strict";const{parseLinkHeader:M,buildHeaders:o}=q("../util"),{LINK_HEADER_CONTEXT:x}=q("../constants"),d=q("../JsonLdError"),e=q("../RequestQueue"),{prependBase:r}=q("../url"),n=/(^|(\r\n))link:/i;K.exports=({secure:s,headers:h={},xhr:a}={headers:{}})=>(h=o(h),(new e).wrapLoader(async function v(l){if(0!==l.indexOf("http:")&&0!==l.indexOf("https:"))throw new d('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:l});if(s&&0!==l.indexOf("https"))throw new d('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:l});let f;try{f=await function(N,A,y){const F=new(N=N||XMLHttpRequest);return new Promise((j,G)=>{F.onload=()=>j(F),F.onerror=P=>G(P),F.open("GET",A,!0);for(const P in y)F.setRequestHeader(P,y[P]);F.send()})}(a,l,h)}catch(N){throw new d("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:l,cause:N})}if(f.status>=400)throw new d("URL could not be dereferenced: "+f.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:l,httpStatusCode:f.status});let c={contextUrl:null,documentUrl:l,document:f.response},E=null;const _=f.getResponseHeader("Content-Type");let O;if(n.test(f.getAllResponseHeaders())&&(O=f.getResponseHeader("Link")),O&&"application/ld+json"!==_){const N=M(O),A=N[x];if(Array.isArray(A))throw new d("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:l});A&&(c.contextUrl=A.target),E=N.alternate,E&&"application/ld+json"==E.type&&!(_||"").match(/^application\/(\w*\+)?json$/)&&(c=await v(r(l,E.target)))}return c}))},{"../JsonLdError":28,"../RequestQueue":31,"../constants":34,"../url":48,"../util":49}],37:[function(q,K,ee){"use strict";const M=q("./JsonLdError"),{isArray:o}=q("./types"),{asArray:x}=q("./util"),d={};function e({event:n,handlers:s}){let h=!0;for(let a=0;h&&a<s.length;++a){h=!1;const v=s[a];if(o(v))h=e({event:n,handlers:v});else if("function"==typeof v)v({event:n,next:()=>{h=!0}});else{if("object"!=typeof v)throw new M("Invalid event handler.","jsonld.InvalidEventHandler",{event:n});n.code in v?v[n.code]({event:n,next:()=>{h=!0}}):h=!0}}return h}K.exports=d,d.defaultEventHandler=null,d.setupEventHandler=({options:n={}})=>{const s=[].concat(n.safe?d.safeEventHandler:[],n.eventHandler?x(n.eventHandler):[],d.defaultEventHandler?d.defaultEventHandler:[]);return 0===s.length?null:s},d.handleEvent=({event:n,options:s})=>{e({event:n,handlers:s.eventHandler})};const r=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);d.safeEventHandler=function({event:n,next:s}){if("warning"===n.level&&r.has(n.code))throw new M("Safe mode validation error.","jsonld.ValidationError",{event:n});s()},d.logEventHandler=function({event:n,next:s}){console.log(`EVENT: ${n.message}`,{event:n}),s()},d.logWarningEventHandler=function({event:n,next:s}){"warning"===n.level&&console.warn(`WARNING: ${n.message}`,{event:n}),s()},d.unhandledEventHandler=function({event:n}){throw new M("No handler for event.","jsonld.UnhandledEvent",{event:n})},d.setDefaultEventHandler=function({eventHandler:n}={}){d.defaultEventHandler=n?x(n):null}},{"./JsonLdError":28,"./types":47,"./util":49}],38:[function(q,K,ee){"use strict";const M=q("./JsonLdError"),{isArray:o,isObject:x,isEmptyObject:d,isString:e,isUndefined:r}=q("./types"),{isList:n,isValue:s,isGraph:h,isSubject:a}=q("./graphTypes"),{expandIri:v,getContextValue:l,isKeyword:f,process:c,processingMode:E}=q("./context"),{isAbsolute:_}=q("./url"),{REGEX_BCP47:O,REGEX_KEYWORD:N,addValue:A,asArray:y,getValues:F,validateTypeValue:j}=q("./util"),{handleEvent:G}=q("./events"),P={};function z({value:re,count:V,options:$}){if(0===V||"@value"in re||"@list"in re||1===V&&"@id"in re){if($.eventHandler){let ne,he;0===V?(ne="empty object",he="Dropping empty object."):"@value"in re?(ne="object with only @value",he="Dropping object with only @value."):"@list"in re?(ne="object with only @list",he="Dropping object with only @list."):1===V&&"@id"in re&&(ne="object with only @id",he="Dropping object with only @id."),G({event:{type:["JsonLdEvent"],code:ne,level:"warning",message:he,details:{value:re}},options:$})}return null}return re}async function Y({activeCtx:re,activeProperty:V,expandedActiveProperty:$,element:ne,expandedParent:he,options:xe={},insideList:ge,typeKey:ce,typeScopedContext:ke}){const Ne=Object.keys(ne).sort(),Me=[];let oe;const k=ne[ce]&&"@json"===v(re,o(ne[ce])?ne[ce][0]:ne[ce],{vocab:!0},{...xe,typeExpansion:!0});for(const Q of Ne){let X,se=ne[Q];if("@context"===Q)continue;const pe=v(re,Q,{vocab:!0},xe);if(null===pe||!_(pe)&&!f(pe)){xe.eventHandler&&G({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Q,expandedProperty:pe}},options:xe});continue}if(f(pe)){if("@reverse"===$)throw new M("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:se});if(pe in he&&"@included"!==pe&&"@type"!==pe)throw new M("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:pe})}if("@id"===pe){if(!e(se)){if(!xe.isFrame)throw new M('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:se});if(x(se)){if(!d(se))throw new M('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:se})}else{if(!o(se))throw new M('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:se});if(!se.every(Ue=>e(Ue)))throw new M('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:se})}}A(he,"@id",y(se).map(Ue=>{if(e(Ue)){const We=v(re,Ue,{base:!0},xe);return xe.eventHandler&&(null===We?G(null===Ue?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:Ue}},options:xe}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ue}},options:xe}):_(We)||G({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:Ue,expandedId:We}},options:xe})),We}return Ue}),{propertyIsArray:xe.isFrame});continue}if("@type"===pe){x(se)&&(se=Object.fromEntries(Object.entries(se).map(([Ue,We])=>[v(ke,Ue,{vocab:!0}),y(We).map(Ke=>v(ke,Ke,{base:!0,vocab:!0},{...xe,typeExpansion:!0}))]))),j(se,xe.isFrame),A(he,"@type",y(se).map(Ue=>{if(e(Ue)){const We=v(ke,Ue,{base:!0,vocab:!0},{...xe,typeExpansion:!0});return"@json"===We||_(We)||xe.eventHandler&&G({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:Ue}},options:xe}),We}return Ue}),{propertyIsArray:!!xe.isFrame});continue}if("@included"===pe&&E(re,1.1)){const Ue=y(await P.expand({activeCtx:re,activeProperty:V,element:se,options:xe}));if(!Ue.every(We=>a(We)))throw new M("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:se});A(he,"@included",Ue,{propertyIsArray:!0});continue}if("@graph"===pe&&!x(se)&&!o(se))throw new M('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:se});if("@value"===pe){oe=se,k&&E(re,1.1)?he["@value"]=se:A(he,"@value",se,{propertyIsArray:xe.isFrame});continue}if("@language"===pe){if(null===se)continue;if(!e(se)&&!xe.isFrame)throw new M('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:se});se=y(se).map(Ue=>e(Ue)?Ue.toLowerCase():Ue);for(const Ue of se)e(Ue)&&!Ue.match(O)&&xe.eventHandler&&G({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ue}},options:xe});A(he,"@language",se,{propertyIsArray:xe.isFrame});continue}if("@direction"===pe){if(!e(se)&&!xe.isFrame)throw new M('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:se});se=y(se);for(const Ue of se)if(e(Ue)&&"ltr"!==Ue&&"rtl"!==Ue)throw new M('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:se});A(he,"@direction",se,{propertyIsArray:xe.isFrame});continue}if("@index"===pe){if(!e(se))throw new M('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:se});A(he,"@index",se);continue}if("@reverse"===pe){if(!x(se))throw new M('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:se});if(X=await P.expand({activeCtx:re,activeProperty:"@reverse",element:se,options:xe}),"@reverse"in X)for(const We in X["@reverse"])A(he,We,X["@reverse"][We],{propertyIsArray:!0});let Ue=he["@reverse"]||null;for(const We in X){if("@reverse"===We)continue;null===Ue&&(Ue=he["@reverse"]={}),A(Ue,We,[],{propertyIsArray:!0});const Ke=X[We];for(let ot=0;ot<Ke.length;++ot){const me=Ke[ot];if(s(me)||n(me))throw new M('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});A(Ue,We,me,{propertyIsArray:!0})}}continue}if("@nest"===pe){Me.push(Q);continue}let ve=re;const Pe=l(re,Q,"@context");r(Pe)||(ve=await c({activeCtx:re,localCtx:Pe,propagate:!0,overrideProtected:!0,options:xe}));const Qe=l(re,Q,"@container")||[];if(Qe.includes("@language")&&x(se))X=ye(ve,se,l(ve,Q,"@direction"),xe);else if(Qe.includes("@index")&&x(se)){const Ue=Qe.includes("@graph"),We=l(ve,Q,"@index")||"@index",Ke="@index"!==We&&v(re,We,{vocab:!0},xe);X=await fe({activeCtx:ve,options:xe,activeProperty:Q,value:se,asGraph:Ue,indexKey:We,propertyIndex:Ke})}else if(Qe.includes("@id")&&x(se)){const Ue=Qe.includes("@graph");X=await fe({activeCtx:ve,options:xe,activeProperty:Q,value:se,asGraph:Ue,indexKey:"@id"})}else if(Qe.includes("@type")&&x(se))X=await fe({activeCtx:ve.revertToPreviousContext(),options:xe,activeProperty:Q,value:se,asGraph:!1,indexKey:"@type"});else{const Ue="@list"===pe;if(Ue||"@set"===pe){let We=V;Ue&&"@graph"===$&&(We=null),X=await P.expand({activeCtx:ve,activeProperty:We,element:se,options:xe,insideList:Ue})}else X="@json"===l(re,Q,"@type")?{"@type":"@json","@value":se}:await P.expand({activeCtx:ve,activeProperty:Q,element:se,options:xe,insideList:!1})}if(null!==X||"@value"===pe){if("@list"!==pe&&!n(X)&&Qe.includes("@list")&&(X={"@list":y(X)}),Qe.includes("@graph")&&!Qe.some(Ue=>"@id"===Ue||"@index"===Ue)){if(X=y(X),xe.isFrame||(X=X.filter(Ue=>null!==z({value:Ue,count:Object.keys(Ue).length,options:xe}))),0===X.length)continue;X=X.map(Ue=>({"@graph":y(Ue)}))}if(ve.mappings.has(Q)&&ve.mappings.get(Q).reverse){const Ue=he["@reverse"]=he["@reverse"]||{};X=y(X);for(let We=0;We<X.length;++We){const Ke=X[We];if(s(Ke)||n(Ke))throw new M('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});A(Ue,pe,Ke,{propertyIsArray:!0})}}else A(he,pe,X,{propertyIsArray:!0})}}if("@value"in he&&("@json"!==he["@type"]||!E(re,1.1))&&(x(oe)||o(oe))&&!xe.isFrame)throw new M('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:oe});for(const Q of Me){const X=o(ne[Q])?ne[Q]:[ne[Q]];for(const se of X){if(!x(se)||Object.keys(se).some(pe=>"@value"===v(re,pe,{vocab:!0},xe)))throw new M("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:se});await Y({activeCtx:re,activeProperty:V,expandedActiveProperty:$,element:se,expandedParent:he,options:xe,insideList:ge,typeScopedContext:ke,typeKey:ce})}}}function ie({activeCtx:re,activeProperty:V,value:$,options:ne}){if(null==$)return null;const he=v(re,V,{vocab:!0},ne);if("@id"===he)return v(re,$,{base:!0},ne);if("@type"===he)return v(re,$,{vocab:!0,base:!0},{...ne,typeExpansion:!0});const xe=l(re,V,"@type");if(("@id"===xe||"@graph"===he)&&e($)){const ce=v(re,$,{base:!0},ne);return null===ce&&$.match(N)&&ne.eventHandler&&G({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:V}},options:ne}),{"@id":ce}}if("@vocab"===xe&&e($))return{"@id":v(re,$,{vocab:!0,base:!0},ne)};if(f(he))return $;const ge={};if(xe&&!["@id","@vocab","@none"].includes(xe))ge["@type"]=xe;else if(e($)){const ce=l(re,V,"@language");null!==ce&&(ge["@language"]=ce);const ke=l(re,V,"@direction");null!==ke&&(ge["@direction"]=ke)}return["boolean","number","string"].includes(typeof $)||($=$.toString()),ge["@value"]=$,ge}function ye(re,V,$,ne){const he=[],xe=Object.keys(V).sort();for(const ge of xe){const ce=v(re,ge,{vocab:!0},ne);let ke=V[ge];o(ke)||(ke=[ke]);for(const Ne of ke){if(null===Ne)continue;if(!e(Ne))throw new M("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:V});const Me={"@value":Ne};"@none"!==ce&&(ge.match(O)||ne.eventHandler&&G({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ge}},options:ne}),Me["@language"]=ge.toLowerCase()),$&&(Me["@direction"]=$),he.push(Me)}}return he}async function fe({activeCtx:re,options:V,activeProperty:$,value:ne,asGraph:he,indexKey:xe,propertyIndex:ge}){const ce=[],ke=Object.keys(ne).sort(),Ne="@type"===xe;for(let Me of ke){if(Ne){const Q=l(re,Me,"@context");r(Q)||(re=await c({activeCtx:re,localCtx:Q,propagate:!1,options:V}))}let oe,k=ne[Me];o(k)||(k=[k]),k=await P.expand({activeCtx:re,activeProperty:$,element:k,options:V,insideList:!1,insideIndex:!0}),oe=ge?"@none"===Me?"@none":ie({activeCtx:re,activeProperty:xe,value:Me,options:V}):v(re,Me,{vocab:!0},V),"@id"===xe?Me=v(re,Me,{base:!0},V):Ne&&(Me=oe);for(let Q of k){if(he&&!h(Q)&&(Q={"@graph":[Q]}),"@type"===xe)"@none"===oe||(Q["@type"]?Q["@type"]=[Me].concat(Q["@type"]):Q["@type"]=[Me]);else{if(s(Q)&&!["@language","@type","@index"].includes(xe))throw new M(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${xe}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Q});ge?"@none"!==oe&&A(Q,ge,oe,{propertyIsArray:!0,prependValue:!0}):"@none"===oe||xe in Q||(Q[xe]=Me)}ce.push(Q)}}return ce}K.exports=P,P.expand=async({activeCtx:re,activeProperty:V=null,element:$,options:ne={},insideList:he=!1,insideIndex:xe=!1,typeScopedContext:ge=null})=>{if(null==$)return null;if("@default"===V&&(ne=Object.assign({},ne,{isFrame:!1})),!o($)&&!x($))return he||null!==V&&"@graph"!==v(re,V,{vocab:!0},ne)?ie({activeCtx:re,activeProperty:V,value:$,options:ne}):(ne.eventHandler&&G({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:$}},options:ne}),null);if(o($)){let X=[];const se=l(re,V,"@container")||[];he=he||se.includes("@list");for(let pe=0;pe<$.length;++pe){let ve=await P.expand({activeCtx:re,activeProperty:V,element:$[pe],options:ne,insideIndex:xe,typeScopedContext:ge});he&&o(ve)&&(ve={"@list":ve}),null!==ve&&(o(ve)?X=X.concat(ve):X.push(ve))}return X}const ce=v(re,V,{vocab:!0},ne),ke=l(re,V,"@context");ge=ge||(re.previousContext?re:null);let Ne=Object.keys($).sort(),Me=!xe;if(Me&&ge&&Ne.length<=2&&!Ne.includes("@context"))for(const X of Ne){const se=v(ge,X,{vocab:!0},ne);if("@value"===se){Me=!1,re=ge;break}if("@id"===se&&1===Ne.length){Me=!1;break}}Me&&(re=re.revertToPreviousContext()),r(ke)||(re=await c({activeCtx:re,localCtx:ke,propagate:!0,overrideProtected:!0,options:ne})),"@context"in $&&(re=await c({activeCtx:re,localCtx:$["@context"],options:ne})),ge=re;let oe=null;for(const X of Ne)if("@type"===v(re,X,{vocab:!0},ne)){oe=oe||X;const se=$[X],pe=Array.isArray(se)?se.length>1?se.slice().sort():se:[se];for(const ve of pe){const Pe=l(ge,ve,"@context");r(Pe)||(re=await c({activeCtx:re,localCtx:Pe,options:ne,propagate:!1}))}}let k={};await Y({activeCtx:re,activeProperty:V,expandedActiveProperty:ce,element:$,expandedParent:k,options:ne,insideList:he,typeKey:oe,typeScopedContext:ge}),Ne=Object.keys(k);let Q=Ne.length;if("@value"in k){if("@type"in k&&("@language"in k||"@direction"in k))throw new M('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:k});let X=Q-1;if("@type"in k&&(X-=1),"@index"in k&&(X-=1),"@language"in k&&(X-=1),"@direction"in k&&(X-=1),0!==X)throw new M('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:k});const se=null===k["@value"]?[]:y(k["@value"]),pe=F(k,"@type");if(!E(re,1.1)||!pe.includes("@json")||1!==pe.length)if(0===se.length)ne.eventHandler&&G({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:k}},options:ne}),k=null;else{if(!se.every(ve=>e(ve)||d(ve))&&"@language"in k)throw new M("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:k});if(!pe.every(ve=>_(ve)&&!(e(ve)&&0===ve.indexOf("_:"))||d(ve)))throw new M('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:k})}}else if("@type"in k&&!o(k["@type"]))k["@type"]=[k["@type"]];else if("@set"in k||"@list"in k){if(Q>1&&(2!==Q||!("@index"in k)))throw new M('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:k});"@set"in k&&(k=k["@set"],Ne=Object.keys(k),Q=Ne.length)}else 1===Q&&"@language"in k&&(ne.eventHandler&&G({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:k}},options:ne}),k=null);return!x(k)||ne.keepFreeFloatingNodes||he||null!==V&&"@graph"!==ce&&!(l(re,V,"@container")||[]).includes("@graph")||(k=z({value:k,count:Q,options:ne})),k}},{"./JsonLdError":28,"./context":35,"./events":37,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],39:[function(q,K,ee){"use strict";const{isSubjectReference:M}=q("./graphTypes"),{createMergedNodeMap:o}=q("./nodeMap"),x={};K.exports=x,x.flatten=d=>{const e=o(d),r=[],n=Object.keys(e).sort();for(let s=0;s<n.length;++s){const h=e[n[s]];M(h)||r.push(h)}return r}},{"./graphTypes":42,"./nodeMap":44}],40:[function(q,K,ee){"use strict";const{isKeyword:M}=q("./context"),o=q("./graphTypes"),x=q("./types"),d=q("./util"),e=q("./url"),r=q("./JsonLdError"),{createNodeMap:n,mergeNodeMapGraphs:s}=q("./nodeMap"),h={};function a(y){const F={};for(const j in y)void 0!==y[j]&&(F["@"+j]=[y[j]]);return[F]}function v(y,F,j){for(let G=j.length-1;G>=0;--G){const P=j[G];if(P.graph===F&&P.subject["@id"]===y["@id"])return!0}return!1}function l(y,F,j){const G="@"+j;let P=G in y?y[G][0]:F[j];if("embed"===j)if(!0===P)P="@once";else if(!1===P)P="@never";else if("@always"!==P&&"@never"!==P&&"@link"!==P&&"@first"!==P&&"@last"!==P&&"@once"!==P)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:y});return P}function f(y){if(!x.isArray(y)||1!==y.length||!x.isObject(y[0]))throw new r("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:y});if("@id"in y[0])for(const F of d.asArray(y[0]["@id"]))if(!x.isObject(F)&&!e.isAbsolute(F)||x.isString(F)&&0===F.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:y});if("@type"in y[0])for(const F of d.asArray(y[0]["@type"]))if(!x.isObject(F)&&!e.isAbsolute(F)&&"@json"!==F||x.isString(F)&&0===F.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:y})}function c(y,F,j,G){let P=!0,z=!1;for(const Y in j){let ie=!1;const ye=d.getValues(F,Y),fe=0===d.getValues(j,Y).length;if("@id"===Y){if(x.isEmptyObject(j["@id"][0]||{})?ie=!0:j["@id"].length>=0&&(ie=j["@id"].includes(ye[0])),!G.requireAll)return ie}else if("@type"===Y){if(P=!1,fe){if(ye.length>0)return!1;ie=!0}else if(1===j["@type"].length&&x.isEmptyObject(j["@type"][0]))ie=ye.length>0;else for(const re of j["@type"])ie=!(!x.isObject(re)||!("@default"in re))||ie||ye.some(V=>V===re);if(!G.requireAll)return ie}else{if(M(Y))continue;{const re=d.getValues(j,Y)[0];let V=!1;if(re&&(f([re]),V="@default"in re),P=!1,0===ye.length&&V)continue;if(ye.length>0&&fe)return!1;if(void 0===re){if(ye.length>0)return!1;ie=!0}else if(o.isList(re)){const $=re["@list"][0];if(o.isList(ye[0])){const ne=ye[0]["@list"];o.isValue($)?ie=ne.some(he=>A($,he)):(o.isSubject($)||o.isSubjectReference($))&&(ie=ne.some(he=>N(y,$,he,G)))}}else ie=o.isValue(re)?ye.some($=>A(re,$)):o.isSubjectReference(re)?ye.some($=>N(y,re,$,G)):!!x.isObject(re)&&ye.length>0}}if(!ie&&G.requireAll)return!1;z=z||ie}return P||z}function E(y,F){const j=y.uniqueEmbeds[y.graph],G=j[F],P=G.parent,z=G.property,Y={"@id":F};if(x.isArray(P)){for(let ye=0;ye<P.length;++ye)if(d.compareValues(P[ye],Y)){P[ye]=Y;break}}else{const ye=x.isArray(P[z]);d.removeValue(P,z,Y,{propertyIsArray:ye}),d.addValue(P,z,Y,{propertyIsArray:ye})}const ie=ye=>{const fe=Object.keys(j);for(const re of fe)re in j&&x.isObject(j[re].parent)&&j[re].parent["@id"]===ye&&(delete j[re],ie(re))};ie(F)}function _(y,F){if(x.isArray(y))return y.map(j=>_(j,F));if(x.isObject(y)){if("@preserve"in y)return y["@preserve"][0];if(o.isValue(y))return y;if(o.isList(y))return y["@list"]=_(y["@list"],F),y;if("@id"in y){const j=y["@id"];if(F.link.hasOwnProperty(j)){const G=F.link[j].indexOf(y);if(-1!==G)return F.link[j][G];F.link[j].push(y)}else F.link[j]=[y]}for(const j in y)"@id"===j&&F.bnodesToClear.includes(y[j])?delete y["@id"]:y[j]=_(y[j],F)}return y}function O(y,F,j){x.isObject(y)?d.addValue(y,F,j,{propertyIsArray:!0}):y.push(j)}function N(y,F,j,G){if(!("@id"in j))return!1;const P=y.subjects[j["@id"]];return P&&c(y,P,F,G)}function A(y,F){const j=F["@value"],G=F["@type"],P=F["@language"],z=y["@value"]?x.isArray(y["@value"])?y["@value"]:[y["@value"]]:[],Y=y["@type"]?x.isArray(y["@type"])?y["@type"]:[y["@type"]]:[],ie=y["@language"]?x.isArray(y["@language"])?y["@language"]:[y["@language"]]:[];return 0===z.length&&0===Y.length&&0===ie.length||!(!z.includes(j)&&!x.isEmptyObject(z[0]))&&!!(!G&&0===Y.length||Y.includes(G)||G&&x.isEmptyObject(Y[0]))&&!!(!P&&0===ie.length||ie.includes(P)||P&&x.isEmptyObject(ie[0]))}K.exports=h,h.frameMergedOrDefault=(y,F,j)=>{const G={options:j,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},P=new d.IdentifierIssuer("_:b");n(y,G.graphMap,"@default",P),j.merged&&(G.graphMap["@merged"]=s(G.graphMap),G.graph="@merged"),G.subjects=G.graphMap[G.graph];const z=[];return h.frame(G,Object.keys(G.subjects).sort(),F,z),j.pruneBlankNodeIdentifiers&&(j.bnodesToClear=Object.keys(G.bnodeMap).filter(Y=>1===G.bnodeMap[Y].length)),// remove @preserve from results
j.link={},_(z,j)},h.frame=(y,F,j,G,P=null)=>{f(j),j=j[0];const z=y.options,Y={embed:l(j,z,"embed"),explicit:l(j,z,"explicit"),requireAll:l(j,z,"requireAll")};y.link.hasOwnProperty(y.graph)||(y.link[y.graph]={});const ie=y.link[y.graph],ye=function(re,V,$,ne){const he={};for(const xe of V){const ge=re.graphMap[re.graph][xe];c(re,ge,$,ne)&&(he[xe]=ge)}return he}(y,F,j,Y),fe=Object.keys(ye).sort();for(const re of fe){const V=ye[re];if(null===P?y.uniqueEmbeds={[y.graph]:{}}:y.uniqueEmbeds[y.graph]=y.uniqueEmbeds[y.graph]||{},"@link"===Y.embed&&re in ie){O(G,P,ie[re]);continue}const $={"@id":re};if(0===re.indexOf("_:")&&d.addValue(y.bnodeMap,re,$,{propertyIsArray:!0}),ie[re]=$,("@first"===Y.embed||"@last"===Y.embed)&&y.is11)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:j});if(y.embedded||!y.uniqueEmbeds[y.graph].hasOwnProperty(re))if(!y.embedded||"@never"!==Y.embed&&!v(V,y.graph,y.subjectStack))if(!y.embedded||"@first"!=Y.embed&&"@once"!=Y.embed||!y.uniqueEmbeds[y.graph].hasOwnProperty(re)){if("@last"===Y.embed&&re in y.uniqueEmbeds[y.graph]&&E(y,re),y.uniqueEmbeds[y.graph][re]={parent:G,property:P},y.subjectStack.push({subject:V,graph:y.graph}),re in y.graphMap){let ne=!1,he=null;"@graph"in j?(he=j["@graph"][0],ne=!("@merged"===re||"@default"===re),x.isObject(he)||(he={})):(ne="@merged"!==y.graph,he={}),ne&&h.frame({...y,graph:re,embedded:!1},Object.keys(y.graphMap[re]).sort(),[he],$,"@graph")}"@included"in j&&h.frame({...y,embedded:!1},F,j["@included"],$,"@included");for(const ne of Object.keys(V).sort())if(M(ne)){if($[ne]=d.clone(V[ne]),"@type"===ne)for(const he of V["@type"])0===he.indexOf("_:")&&d.addValue(y.bnodeMap,he,$,{propertyIsArray:!0})}else if(!Y.explicit||ne in j)for(const he of V[ne]){const xe=ne in j?j[ne]:a(Y);if(o.isList(he)){const ge=j[ne]&&j[ne][0]&&j[ne][0]["@list"]?j[ne][0]["@list"]:a(Y),ce={"@list":[]};O($,ne,ce);const ke=he["@list"];for(const Ne of ke)o.isSubjectReference(Ne)?h.frame({...y,embedded:!0},[Ne["@id"]],ge,ce,"@list"):O(ce,"@list",d.clone(Ne))}else o.isSubjectReference(he)?h.frame({...y,embedded:!0},[he["@id"]],xe,$,ne):A(xe[0],he)&&O($,ne,d.clone(he))}for(const ne of Object.keys(j).sort()){if("@type"===ne){if(!x.isObject(j[ne][0])||!("@default"in j[ne][0]))continue}else if(M(ne))continue;const he=j[ne][0]||{};if(!l(he,z,"omitDefault")&&!(ne in $)){let xe="@null";"@default"in he&&(xe=d.clone(he["@default"])),x.isArray(xe)||(xe=[xe]),$[ne]=[{"@preserve":xe}]}}for(const ne of Object.keys(j["@reverse"]||{}).sort()){const he=j["@reverse"][ne];for(const xe of Object.keys(y.subjects))d.getValues(y.subjects[xe],ne).some(ge=>ge["@id"]===re)&&($["@reverse"]=$["@reverse"]||{},d.addValue($["@reverse"],ne,[],{propertyIsArray:!0}),h.frame({...y,embedded:!0},[xe],he,$["@reverse"][ne],P))}O(G,P,$),y.subjectStack.pop()}else O(G,P,$);else O(G,P,$)}},h.cleanupNull=(y,F)=>{if(x.isArray(y))return y.map(j=>h.cleanupNull(j,F)).filter(j=>j);if("@null"===y)return null;if(x.isObject(y)){if("@id"in y){const j=y["@id"];if(F.link.hasOwnProperty(j)){const G=F.link[j].indexOf(y);if(-1!==G)return F.link[j][G];F.link[j].push(y)}else F.link[j]=[y]}for(const j in y)y[j]=h.cleanupNull(y[j],F)}return y}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49}],41:[function(q,K,ee){"use strict";const M=q("./JsonLdError"),o=q("./graphTypes"),x=q("./types"),{REGEX_BCP47:d,addValue:e}=q("./util"),{handleEvent:r}=q("./events"),{RDF_LIST:n,RDF_FIRST:s,RDF_REST:h,RDF_NIL:a,RDF_TYPE:v,RDF_JSON_LITERAL:l,XSD_BOOLEAN:f,XSD_DOUBLE:c,XSD_INTEGER:E,XSD_STRING:_}=q("./constants"),O={};function N(A,y,F,j){if(A.termType.endsWith("Node"))return{"@id":A.value};const G={"@value":A.value};if(A.language)A.language.match(d)||j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A.language}},options:j}),G["@language"]=A.language;else{let P=A.datatype.value;if(P||(P=_),P===l){P="@json";try{G["@value"]=JSON.parse(G["@value"])}catch(z){throw new M("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:G["@value"],cause:z})}}if(y){if(P===f)"true"===G["@value"]?G["@value"]=!0:"false"===G["@value"]&&(G["@value"]=!1);else if(x.isNumeric(G["@value"]))if(P===E){const z=parseInt(G["@value"],10);z.toFixed(0)===G["@value"]&&(G["@value"]=z)}else P===c&&(G["@value"]=parseFloat(G["@value"]));[f,E,c,_].includes(P)||(G["@type"]=P)}else if("i18n-datatype"===F&&P.startsWith("https://www.w3.org/ns/i18n#")){const[,z,Y]=P.split(/[#_]/);z.length>0&&(G["@language"]=z,z.match(d)||j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:z}},options:j})),G["@direction"]=Y}else P!==_&&(G["@type"]=P)}return G}K.exports=O,O.fromRDF=async(A,y)=>{const{useRdfType:F=!1,useNativeTypes:j=!1,rdfDirection:G=null}=y,P={},z={"@default":P},Y={};if(G){if("compound-literal"===G)throw new M("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:G});if("i18n-datatype"!==G)throw new M("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:G})}for(const fe of A){const re="DefaultGraph"===fe.graph.termType?"@default":fe.graph.value;re in z||(z[re]={}),"@default"===re||re in P||(P[re]={"@id":re});const V=z[re],$=fe.subject.value,ne=fe.predicate.value,he=fe.object;$ in V||(V[$]={"@id":$});const xe=V[$],ge=he.termType.endsWith("Node");if(ge&&!(he.value in V)&&(V[he.value]={"@id":he.value}),ne===v&&!F&&ge){e(xe,"@type",he.value,{propertyIsArray:!0});continue}const ce=N(he,j,G,y);if(e(xe,ne,ce,{propertyIsArray:!0}),ge)if(he.value===a){const ke=V[he.value];"usages"in ke||(ke.usages=[]),ke.usages.push({node:xe,property:ne,value:ce})}else he.value in Y?Y[he.value]=!1:Y[he.value]={node:xe,property:ne,value:ce}}for(const fe in z){const re=z[fe];if(!(a in re))continue;const V=re[a];if(V.usages){for(let $ of V.usages){let ne=$.node,he=$.property,xe=$.value;const ge=[],ce=[];let ke=Object.keys(ne).length;for(;he===h&&x.isObject(Y[ne["@id"]])&&x.isArray(ne[s])&&1===ne[s].length&&x.isArray(ne[h])&&1===ne[h].length&&(3===ke||4===ke&&x.isArray(ne["@type"])&&1===ne["@type"].length&&ne["@type"][0]===n)&&(ge.push(ne[s][0]),ce.push(ne["@id"]),$=Y[ne["@id"]],ne=$.node,he=$.property,xe=$.value,ke=Object.keys(ne).length,o.isBlankNode(ne)););delete xe["@id"],xe["@list"]=ge.reverse();for(const Ne of ce)delete re[Ne]}delete V.usages}}const ie=[],ye=Object.keys(P).sort();for(const fe of ye){const re=P[fe];if(fe in z){const V=re["@graph"]=[],$=z[fe],ne=Object.keys($).sort();for(const he of ne){const xe=$[he];o.isSubjectReference(xe)||V.push(xe)}}o.isSubjectReference(re)||ie.push(re)}return ie}},{"./JsonLdError":28,"./constants":34,"./events":37,"./graphTypes":42,"./types":47,"./util":49}],42:[function(q,K,ee){"use strict";const M=q("./types"),o={};K.exports=o,o.isSubject=x=>!(!M.isObject(x)||"@value"in x||"@set"in x||"@list"in x)&&(Object.keys(x).length>1||!("@id"in x)),o.isSubjectReference=x=>M.isObject(x)&&1===Object.keys(x).length&&"@id"in x,o.isValue=x=>M.isObject(x)&&"@value"in x,o.isList=x=>M.isObject(x)&&"@list"in x,o.isGraph=x=>M.isObject(x)&&"@graph"in x&&1===Object.keys(x).filter(d=>"@id"!==d&&"@index"!==d).length,o.isSimpleGraph=x=>o.isGraph(x)&&!("@id"in x),o.isBlankNode=x=>{if(M.isObject(x)){if("@id"in x){const d=x["@id"];return!M.isString(d)||0===d.indexOf("_:")}return 0===Object.keys(x).length||!("@value"in x||"@set"in x||"@list"in x)}return!1}},{"./types":47}],43:[function(q,K,ee){const M=q("rdf-canonize"),o=q("./platform"),x=q("./util"),d=q("./ContextResolver"),e=x.IdentifierIssuer,r=q("./JsonLdError"),n=q("lru-cache"),s=q("./NQuads"),{expand:h}=q("./expand"),{flatten:a}=q("./flatten"),{fromRDF:v}=q("./fromRdf"),{toRDF:l}=q("./toRdf"),{frameMergedOrDefault:f,cleanupNull:c}=q("./frame"),{isArray:E,isObject:_,isString:O}=q("./types"),{isSubjectReference:N}=q("./graphTypes"),{expandIri:A,getInitialContext:y,process:F,processingMode:j}=q("./context"),{compact:G,compactIri:P}=q("./compact"),{createNodeMap:z,createMergedNodeMap:Y,mergeNodeMaps:ie}=q("./nodeMap"),{logEventHandler:ye,logWarningEventHandler:fe,safeEventHandler:re,setDefaultEventHandler:V,setupEventHandler:$,strictEventHandler:ne,unhandledEventHandler:he}=q("./events"),xe=function(ce){const ke={},Ne=new n({max:100});function Me(oe,{documentLoader:k=ce.documentLoader,...Q}){if(oe&&"compactionMap"in oe)throw new r('"compactionMap" not supported.',"jsonld.OptionsError");if(oe&&"expansionMap"in oe)throw new r('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:k},Q,oe,{eventHandler:$({options:oe})})}return ce.compact=async function(oe,k,Q){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===k)throw new r("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===oe)return null;let X;(Q=Me(Q,{base:O(oe)?oe:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new d({sharedCache:Ne})})).link&&(Q.skipExpansion=!0),Q.compactToRelative||delete Q.base,X=Q.skipExpansion?oe:await ce.expand(oe,Q);const se=await ce.processContext(y(Q),k,Q);let pe=await G({activeCtx:se,element:X,options:Q});Q.compactArrays&&!Q.graph&&E(pe)?1===pe.length?pe=pe[0]:0===pe.length&&(pe={}):Q.graph&&_(pe)&&(pe=[pe]),_(k)&&"@context"in k&&(k=k["@context"]),k=x.clone(k),E(k)||(k=[k]);const ve=k;k=[];for(let Qe=0;Qe<ve.length;++Qe)(!_(ve[Qe])||Object.keys(ve[Qe]).length>0)&&k.push(ve[Qe]);const Pe=k.length>0;if(1===k.length&&(k=k[0]),E(pe)){const Qe=P({activeCtx:se,iri:"@graph",relativeTo:{vocab:!0}}),Ue=pe;pe={},Pe&&(pe["@context"]=k),pe[Qe]=Ue}else if(_(pe)&&Pe){const Qe=pe;pe={"@context":k};for(const Ue in Qe)pe[Ue]=Qe[Ue]}return pe},ce.expand=async function(oe,k){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Q={},X=[];if("expandContext"in(k=Me(k,{keepFreeFloatingNodes:!1,contextResolver:new d({sharedCache:Ne})}))){const Pe=x.clone(k.expandContext);_(Pe)&&"@context"in Pe?Q.expandContext=Pe:Q.expandContext={"@context":Pe},X.push(Q.expandContext)}let se;if(O(oe)){const Pe=await ce.get(oe,k);se=Pe.documentUrl,Q.input=Pe.document,Pe.contextUrl&&(Q.remoteContext={"@context":Pe.contextUrl},X.push(Q.remoteContext))}else Q.input=x.clone(oe);"base"in k||(k.base=se||"");let pe=y(k);for(const Pe of X)pe=await F({activeCtx:pe,localCtx:Pe,options:k});let ve=await h({activeCtx:pe,element:Q.input,options:k});return _(ve)&&"@graph"in ve&&1===Object.keys(ve).length?ve=ve["@graph"]:null===ve&&(ve=[]),E(ve)||(ve=[ve]),ve},ce.flatten=async function(oe,k,Q){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");k="function"==typeof k?null:k||null,Q=Me(Q,{base:O(oe)?oe:"",contextResolver:new d({sharedCache:Ne})});const X=await ce.expand(oe,Q),se=a(X);return null===k?se:(Q.graph=!0,Q.skipExpansion=!0,await ce.compact(se,k,Q))},ce.frame=async function(oe,k,Q){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Q=Me(Q,{base:O(oe)?oe:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new d({sharedCache:Ne})}),O(k)){const Ke=await ce.get(k,Q);if(k=Ke.document,Ke.contextUrl){let ot=k["@context"];ot?E(ot)?ot.push(Ke.contextUrl):ot=[ot,Ke.contextUrl]:ot=Ke.contextUrl,k["@context"]=ot}}const X=k&&k["@context"]||{},se=await ce.processContext(y(Q),X,Q);Q.hasOwnProperty("omitGraph")||(Q.omitGraph=j(se,1.1)),Q.hasOwnProperty("pruneBlankNodeIdentifiers")||(Q.pruneBlankNodeIdentifiers=j(se,1.1));const pe=await ce.expand(oe,Q),ve={...Q};ve.isFrame=!0,ve.keepFreeFloatingNodes=!0;const Pe=await ce.expand(k,ve),Qe=Object.keys(k).map(Ke=>A(se,Ke,{vocab:!0}));ve.merged=!Qe.includes("@graph"),ve.is11=j(se,1.1);const Ue=f(pe,Pe,ve);ve.graph=!Q.omitGraph,ve.skipExpansion=!0,ve.link={},ve.framing=!0;let We=await ce.compact(Ue,X,ve);return ve.link={},We=c(We,ve),We},ce.link=async function(oe,k,Q){const X={};return k&&(X["@context"]=k),X["@embed"]="@link",ce.frame(oe,X,Q)},ce.normalize=ce.canonize=async function(oe,k){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(k=Me(k,{base:O(oe)?oe:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new d({sharedCache:Ne})}))){if("application/n-quads"!==k.inputFormat&&"application/nquads"!==k.inputFormat)throw new r("Unknown canonicalization input format.","jsonld.CanonizeError");const se=s.parse(oe);return M.canonize(se,k)}const Q={...k};delete Q.format,Q.produceGeneralizedRdf=!1;const X=await ce.toRDF(oe,Q);return M.canonize(X,k)},ce.fromRDF=async function(oe,k){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");k=Me(k,{format:O(oe)?"application/n-quads":void 0});const{format:Q}=k;let{rdfParser:X}=k;if(Q){if(X=X||ke[Q],!X)throw new r("Unknown input format.","jsonld.UnknownFormat",{format:Q})}else X=()=>oe;const se=await X(oe);return v(se,k)},ce.toRDF=async function(oe,k){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Q;Q=(k=Me(k,{base:O(oe)?oe:"",skipExpansion:!1,contextResolver:new d({sharedCache:Ne})})).skipExpansion?oe:await ce.expand(oe,k);const X=l(Q,k);if(k.format){if("application/n-quads"===k.format||"application/nquads"===k.format)return s.serialize(X);throw new r("Unknown output format.","jsonld.UnknownFormat",{format:k.format})}return X},ce.createNodeMap=async function(oe,k){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");k=Me(k,{base:O(oe)?oe:"",contextResolver:new d({sharedCache:Ne})});const Q=await ce.expand(oe,k);return Y(Q,k)},ce.merge=async function(oe,k,Q){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!E(oe))throw new TypeError('Could not merge, "docs" must be an array.');k="function"==typeof k?null:k||null,Q=Me(Q,{contextResolver:new d({sharedCache:Ne})});const X=await Promise.all(oe.map(Ke=>{const ot={...Q};return ce.expand(Ke,ot)}));let se=!0;"mergeNodes"in Q&&(se=Q.mergeNodes);const pe=Q.issuer||new e("_:b"),ve={"@default":{}};for(let Ke=0;Ke<X.length;++Ke){const ot=x.relabelBlankNodes(X[Ke],{issuer:new e("_:b"+Ke+"-")}),me=se||0===Ke?ve:{"@default":{}};if(z(ot,me,"@default",pe),me!==ve)for(const Ee in me){const Ce=me[Ee];if(!(Ee in ve)){ve[Ee]=Ce;continue}const H=ve[Ee];for(const Z in Ce)Z in H||(H[Z]=Ce[Z])}}const Pe=ie(ve),Qe=[],Ue=Object.keys(Pe).sort();for(let Ke=0;Ke<Ue.length;++Ke){const ot=Pe[Ue[Ke]];N(ot)||Qe.push(ot)}return null===k?Qe:(Q.graph=!0,Q.skipExpansion=!0,await ce.compact(Qe,k,Q))},Object.defineProperty(ce,"documentLoader",{get:()=>ce._documentLoader,set:oe=>ce._documentLoader=oe}),ce.documentLoader=async oe=>{throw new r("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:oe})},ce.get=async function(oe,k){let Q;Q="function"==typeof k.documentLoader?k.documentLoader:ce.documentLoader;const X=await Q(oe);try{if(!X.document)throw new r("No remote document found at the given URL.","jsonld.NullRemoteDocument");O(X.document)&&(X.document=JSON.parse(X.document))}catch(se){throw new r("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:se,remoteDoc:X})}return X},ce.processContext=async function(oe,k,Q){return Q=Me(Q,{base:"",contextResolver:new d({sharedCache:Ne})}),null===k?y(Q):(k=x.clone(k),_(k)&&"@context"in k||(k={"@context":k}),F({activeCtx:oe,localCtx:k,options:Q}))},ce.getContextValue=q("./context").getContextValue,ce.documentLoaders={},ce.useDocumentLoader=function(oe){if(!(oe in ce.documentLoaders))throw new r('Unknown document loader type: "'+oe+'"',"jsonld.UnknownDocumentLoader",{type:oe});ce.documentLoader=ce.documentLoaders[oe].apply(ce,Array.prototype.slice.call(arguments,1))},ce.registerRDFParser=function(oe,k){ke[oe]=k},ce.unregisterRDFParser=function(oe){delete ke[oe]},ce.registerRDFParser("application/n-quads",s.parse),ce.registerRDFParser("application/nquads",s.parse),ce.url=q("./url"),ce.logEventHandler=ye,ce.logWarningEventHandler=fe,ce.safeEventHandler=re,ce.setDefaultEventHandler=V,ce.strictEventHandler=ne,ce.unhandledEventHandler=he,ce.util=x,Object.assign(ce,x),ce.promises=ce,ce.RequestQueue=q("./RequestQueue"),ce.JsonLdProcessor=q("./JsonLdProcessor")(ce),o.setupGlobals(ce),o.setupDocumentLoaders(ce),ce},ge=function(){return xe(function(){return ge()})};xe(ge),K.exports=ge},{"./ContextResolver":27,"./JsonLdError":28,"./JsonLdProcessor":29,"./NQuads":30,"./RequestQueue":31,"./compact":33,"./context":35,"./events":37,"./expand":38,"./flatten":39,"./frame":40,"./fromRdf":41,"./graphTypes":42,"./nodeMap":44,"./platform":45,"./toRdf":46,"./types":47,"./url":48,"./util":49,"lru-cache":50,"rdf-canonize":64}],44:[function(q,K,ee){"use strict";const{isKeyword:M}=q("./context"),o=q("./graphTypes"),x=q("./types"),d=q("./util"),e=q("./JsonLdError"),r={};K.exports=r,r.createMergedNodeMap=(n,s)=>{const h=(s=s||{}).issuer||new d.IdentifierIssuer("_:b"),a={"@default":{}};return r.createNodeMap(n,a,"@default",h),r.mergeNodeMaps(a)},r.createNodeMap=(n,s,h,a,v,l)=>{if(x.isArray(n)){for(const _ of n)r.createNodeMap(_,s,h,a,void 0,l);return}if(!x.isObject(n))return void(l&&l.push(n));if(o.isValue(n)){if("@type"in n){let _=n["@type"];0===_.indexOf("_:")&&(n["@type"]=_=a.getId(_))}return void(l&&l.push(n))}if(l&&o.isList(n)){const _=[];return r.createNodeMap(n["@list"],s,h,a,v,_),void l.push({"@list":_})}if("@type"in n){const _=n["@type"];for(const O of _)0===O.indexOf("_:")&&a.getId(O)}x.isUndefined(v)&&(v=o.isBlankNode(n)?a.getId(n["@id"]):n["@id"]),l&&l.push({"@id":v});const f=s[h],c=f[v]=f[v]||{};c["@id"]=v;const E=Object.keys(n).sort();for(let _ of E){if("@id"===_)continue;if("@reverse"===_){const N={"@id":v},A=n["@reverse"];for(const y in A){const F=A[y];for(const j of F){let G=j["@id"];o.isBlankNode(j)&&(G=a.getId(G)),r.createNodeMap(j,s,h,a,G),d.addValue(f[G],y,N,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===_){v in s||(s[v]={}),r.createNodeMap(n[_],s,v,a);continue}if("@included"===_){r.createNodeMap(n[_],s,h,a);continue}if("@type"!==_&&M(_)){if("@index"===_&&_ in c&&(n[_]!==c[_]||n[_]["@id"]!==c[_]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:c});c[_]=n[_];continue}const O=n[_];if(0===_.indexOf("_:")&&(_=a.getId(_)),0!==O.length)for(let N of O)if("@type"===_&&(N=0===N.indexOf("_:")?a.getId(N):N),o.isSubject(N)||o.isSubjectReference(N)){if("@id"in N&&!N["@id"])continue;const A=o.isBlankNode(N)?a.getId(N["@id"]):N["@id"];d.addValue(c,_,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),r.createNodeMap(N,s,h,a,A)}else if(o.isValue(N))d.addValue(c,_,N,{propertyIsArray:!0,allowDuplicate:!1});else if(o.isList(N)){const A=[];r.createNodeMap(N["@list"],s,h,a,v,A),N={"@list":A},d.addValue(c,_,N,{propertyIsArray:!0,allowDuplicate:!1})}else r.createNodeMap(N,s,h,a,v),d.addValue(c,_,N,{propertyIsArray:!0,allowDuplicate:!1});else d.addValue(c,_,[],{propertyIsArray:!0})}},r.mergeNodeMapGraphs=n=>{const s={};for(const h of Object.keys(n).sort())for(const a of Object.keys(n[h]).sort()){const v=n[h][a];a in s||(s[a]={"@id":a});const l=s[a];for(const f of Object.keys(v).sort())if(M(f)&&"@type"!==f)l[f]=d.clone(v[f]);else for(const c of v[f])d.addValue(l,f,d.clone(c),{propertyIsArray:!0,allowDuplicate:!1})}return s},r.mergeNodeMaps=n=>{const s=n["@default"],h=Object.keys(n).sort();for(const a of h){if("@default"===a)continue;const v=n[a];let l=s[a];l?"@graph"in l||(l["@graph"]=[]):s[a]=l={"@id":a,"@graph":[]};const f=l["@graph"];for(const c of Object.keys(v).sort()){const E=v[c];o.isSubjectReference(E)||f.push(E)}}return s}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./util":49}],45:[function(q,K,ee){"use strict";const M=q("./documentLoaders/xhr"),o={};K.exports=o,o.setupDocumentLoaders=function(x){typeof XMLHttpRequest<"u"&&(x.documentLoaders.xhr=M,x.useDocumentLoader("xhr"))},o.setupGlobals=function(x){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:x.JsonLdProcessor})}},{"./documentLoaders/xhr":36}],46:[function(q,K,ee){"use strict";const{createNodeMap:M}=q("./nodeMap"),{isKeyword:o}=q("./context"),x=q("./graphTypes"),d=q("canonicalize"),e=q("./JsonLdError"),r=q("./types"),n=q("./util"),{handleEvent:s}=q("./events"),{RDF_FIRST:h,RDF_REST:a,RDF_NIL:v,RDF_TYPE:l,RDF_JSON_LITERAL:f,RDF_LANGSTRING:c,XSD_BOOLEAN:E,XSD_DOUBLE:_,XSD_INTEGER:O,XSD_STRING:N}=q("./constants"),{isAbsolute:A}=q("./url"),y={};function F(G,P,z,Y,ie){const ye=Object.keys(P).sort();for(const fe of ye){const re=P[fe],V=Object.keys(re).sort();for(let $ of V){const ne=re[$];if("@type"===$)$=l;else if(o($))continue;for(const he of ne){const xe={termType:fe.startsWith("_:")?"BlankNode":"NamedNode",value:fe};if(!A(fe)){ie.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:fe}},options:ie});continue}const ge={termType:$.startsWith("_:")?"BlankNode":"NamedNode",value:$};if(!A($)){ie.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:$}},options:ie});continue}if("BlankNode"===ge.termType&&!ie.produceGeneralizedRdf){ie.eventHandler&&s({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Y.getOldIds().find(ke=>Y.getId(ke)===$)}},options:ie});continue}const ce=j(he,Y,G,z,ie.rdfDirection,ie);ce&&G.push({subject:xe,predicate:ge,object:ce,graph:z})}}}}function j(G,P,z,Y,ie,ye){const fe={};if(x.isValue(G)){fe.termType="Literal",fe.value=void 0,fe.datatype={termType:"NamedNode"};let re=G["@value"];const V=G["@type"]||null;if("@json"===V)fe.value=d(re),fe.datatype.value=f;else if(r.isBoolean(re))fe.value=re.toString(),fe.datatype.value=V||E;else if(r.isDouble(re)||V===_)r.isDouble(re)||(re=parseFloat(re)),fe.value=re.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),fe.datatype.value=V||_;else if(r.isNumber(re))fe.value=re.toFixed(0),fe.datatype.value=V||O;else if("@direction"in G&&"i18n-datatype"===ie){const $=`https://www.w3.org/ns/i18n#${(G["@language"]||"").toLowerCase()}_${G["@direction"]}`;fe.datatype.value=$,fe.value=re}else{if("@direction"in G&&"compound-literal"===ie)throw new e("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:ie});if("@direction"in G&&ie)throw new e("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:ie});"@language"in G?("@direction"in G&&!ie&&ye.eventHandler&&s({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:fe.value}},options:ye}),fe.value=re,fe.datatype.value=V||c,fe.language=G["@language"]):("@direction"in G&&!ie&&ye.eventHandler&&s({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:fe.value}},options:ye}),fe.value=re,fe.datatype.value=V||N)}}else if(x.isList(G)){const re=function(V,$,ne,he,xe,ge){const ce={termType:"NamedNode",value:h},ke={termType:"NamedNode",value:a},Ne={termType:"NamedNode",value:v},Me=V.pop(),oe=Me?{termType:"BlankNode",value:$.getId()}:Ne;let k=oe;for(const Q of V){const X=j(Q,$,ne,he,xe,ge),se={termType:"BlankNode",value:$.getId()};ne.push({subject:k,predicate:ce,object:X,graph:he}),ne.push({subject:k,predicate:ke,object:se,graph:he}),k=se}if(Me){const Q=j(Me,$,ne,he,xe,ge);ne.push({subject:k,predicate:ce,object:Q,graph:he}),ne.push({subject:k,predicate:ke,object:Ne,graph:he})}return oe}(G["@list"],P,z,Y,ie,ye);fe.termType=re.termType,fe.value=re.value}else{const re=r.isObject(G)?G["@id"]:G;fe.termType=re.startsWith("_:")?"BlankNode":"NamedNode",fe.value=re}return"NamedNode"!==fe.termType||A(fe.value)?fe:(ye.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:fe.value}},options:ye}),null)}K.exports=y,y.toRDF=(G,P)=>{const z=new n.IdentifierIssuer("_:b"),Y={"@default":{}};M(G,Y,"@default",z);const ie=[],ye=Object.keys(Y).sort();for(const fe of ye){let re;if("@default"===fe)re={termType:"DefaultGraph",value:""};else{if(!A(fe)){P.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:fe}},options:P});continue}re=fe.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},re.value=fe}F(ie,Y[fe],re,z,P)}return ie}},{"./JsonLdError":28,"./constants":34,"./context":35,"./events":37,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49,canonicalize:9}],47:[function(q,K,ee){"use strict";const M={};K.exports=M,M.isArray=Array.isArray,M.isBoolean=o=>"boolean"==typeof o||"[object Boolean]"===Object.prototype.toString.call(o),M.isDouble=o=>M.isNumber(o)&&(-1!==String(o).indexOf(".")||Math.abs(o)>=1e21),M.isEmptyObject=o=>M.isObject(o)&&0===Object.keys(o).length,M.isNumber=o=>"number"==typeof o||"[object Number]"===Object.prototype.toString.call(o),M.isNumeric=o=>!isNaN(parseFloat(o))&&isFinite(o),M.isObject=o=>"[object Object]"===Object.prototype.toString.call(o),M.isString=o=>"string"==typeof o||"[object String]"===Object.prototype.toString.call(o),M.isUndefined=o=>void 0===o},{}],48:[function(q,K,ee){"use strict";const M=q("./types"),o={};K.exports=o,o.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},o.parse=(d,e)=>{const r={},n=o.parsers[e||"full"],s=n.regex.exec(d);let h=n.keys.length;for(;h--;)r[n.keys[h]]=void 0===s[h]?null:s[h];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=o.removeDotSegments(r.path),r},o.prependBase=(d,e)=>{if(null===d||o.isAbsolute(e))return e;d&&!M.isString(d)||(d=o.parse(d||""));const r=o.parse(e),n={protocol:d.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=d.authority,""===r.path)n.path=d.path,null!==r.query?n.query=r.query:n.query=d.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{let h=d.path;h=h.substr(0,h.lastIndexOf("/")+1),(h.length>0||d.authority)&&"/"!==h.substr(-1)&&(h+="/"),h+=r.path,n.path=h}n.query=r.query}""!==r.path&&(n.path=o.removeDotSegments(n.path));let s=n.protocol;return null!==n.authority&&(s+="//"+n.authority),s+=n.path,null!==n.query&&(s+="?"+n.query),null!==r.fragment&&(s+="#"+r.fragment),""===s&&(s="./"),s},o.removeBase=(d,e)=>{if(null===d)return e;d&&!M.isString(d)||(d=o.parse(d||""));let r="";if(""!==d.href?r+=(d.protocol||"")+"//"+(d.authority||""):e.indexOf("//")&&(r+="//"),0!==e.indexOf(r))return e;const n=o.parse(e.substr(r.length)),s=d.normalizedPath.split("/"),h=n.normalizedPath.split("/"),a=n.fragment||n.query?0:1;for(;s.length>0&&h.length>a&&s[0]===h[0];)s.shift(),h.shift();let v="";if(s.length>0){s.pop();for(let l=0;l<s.length;++l)v+="../"}return v+=h.join("/"),null!==n.query&&(v+="?"+n.query),null!==n.fragment&&(v+="#"+n.fragment),""===v&&(v="./"),v},o.removeDotSegments=d=>{if(0===d.length)return"";const e=d.split("/"),r=[];for(;e.length>0;){const n=e.shift(),s=0===e.length;"."!==n?".."!==n?r.push(n):(r.pop(),s&&r.push("")):s&&r.push("")}return"/"===d[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const x=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;o.isAbsolute=d=>M.isString(d)&&x.test(d),o.isRelative=d=>M.isString(d)},{"./types":47}],49:[function(q,K,ee){"use strict";const M=q("./graphTypes"),o=q("./types"),x=q("rdf-canonize").IdentifierIssuer,d=q("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,n=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,s_accept="application/ld+json, application/json",h={};function a(v,l){if(o.isArray(l))for(let f=0;f<l.length;++f)l[f]=a(v,l[f]);else if(M.isList(l))l["@list"]=a(v,l["@list"]);else if(o.isObject(l)){M.isBlankNode(l)&&(l["@id"]=v.getId(l["@id"]));const f=Object.keys(l).sort();for(let c=0;c<f.length;++c){const E=f[c];"@id"!==E&&(l[E]=a(v,l[E]))}}return l}K.exports=h,h.IdentifierIssuer=x,h.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,h.REGEX_KEYWORD=/^@[a-zA-Z]+$/,h.clone=function(v){if(v&&"object"==typeof v){let l;if(o.isArray(v)){l=[];for(let f=0;f<v.length;++f)l[f]=h.clone(v[f])}else if(v instanceof Map){l=new Map;for(const[f,c]of v)l.set(f,h.clone(c))}else if(v instanceof Set){l=new Set;for(const f of v)l.add(h.clone(f))}else if(o.isObject(v)){l={};for(const f in v)l[f]=h.clone(v[f])}else l=v.toString();return l}return v},h.asArray=function(v){return Array.isArray(v)?v:[v]},h.buildHeaders=(v={})=>{if(Object.keys(v).some(l=>"accept"===l.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+s_accept+'" is supported.');return Object.assign({Accept:s_accept},v)},h.parseLinkHeader=v=>{const l={},f=v.match(e);for(let c=0;c<f.length;++c){let E=f[c].match(r);if(!E)continue;const _={target:E[1]},O=E[2];for(;E=n.exec(O);)_[E[1]]=void 0===E[2]?E[3]:E[2];const N=_.rel||"";Array.isArray(l[N])?l[N].push(_):l.hasOwnProperty(N)?l[N]=[l[N],_]:l[N]=_}return l},h.validateTypeValue=(v,l)=>{if(!(o.isString(v)||o.isArray(v)&&v.every(f=>o.isString(f)))){if(l&&o.isObject(v))switch(Object.keys(v).length){case 0:return;case 1:if("@default"in v&&h.asArray(v["@default"]).every(f=>o.isString(f)))return}throw new d('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:v})}},h.hasProperty=(v,l)=>{if(v.hasOwnProperty(l)){const f=v[l];return!o.isArray(f)||f.length>0}return!1},h.hasValue=(v,l,f)=>{if(h.hasProperty(v,l)){let c=v[l];const E=M.isList(c);if(o.isArray(c)||E){E&&(c=c["@list"]);for(let _=0;_<c.length;++_)if(h.compareValues(f,c[_]))return!0}else if(!o.isArray(f))return h.compareValues(f,c)}return!1},h.addValue=(v,l,f,c)=>{if("propertyIsArray"in(c=c||{})||(c.propertyIsArray=!1),"valueIsArray"in c||(c.valueIsArray=!1),"allowDuplicate"in c||(c.allowDuplicate=!0),"prependValue"in c||(c.prependValue=!1),c.valueIsArray)v[l]=f;else if(o.isArray(f)){0===f.length&&c.propertyIsArray&&!v.hasOwnProperty(l)&&(v[l]=[]),c.prependValue&&(f=f.concat(v[l]),v[l]=[]);for(let E=0;E<f.length;++E)h.addValue(v,l,f[E],c)}else if(v.hasOwnProperty(l)){const E=!c.allowDuplicate&&h.hasValue(v,l,f);o.isArray(v[l])||E&&!c.propertyIsArray||(v[l]=[v[l]]),E||(c.prependValue?v[l].unshift(f):v[l].push(f))}else v[l]=c.propertyIsArray?[f]:f},h.getValues=(v,l)=>[].concat(v[l]||[]),h.removeProperty=(v,l)=>{delete v[l]},h.removeValue=(v,l,f,c)=>{"propertyIsArray"in(c=c||{})||(c.propertyIsArray=!1);const E=h.getValues(v,l).filter(_=>!h.compareValues(_,f));0===E.length?h.removeProperty(v,l):1!==E.length||c.propertyIsArray?v[l]=E:v[l]=E[0]},h.relabelBlankNodes=(v,l)=>a((l=l||{}).issuer||new x("_:b"),v),h.compareValues=(v,l)=>v===l||!(!M.isValue(v)||!M.isValue(l)||v["@value"]!==l["@value"]||v["@type"]!==l["@type"]||v["@language"]!==l["@language"]||v["@index"]!==l["@index"])||!!(o.isObject(v)&&"@id"in v&&o.isObject(l)&&"@id"in l)&&v["@id"]===l["@id"],h.compareShortestLeast=(v,l)=>v.length<l.length?-1:l.length<v.length?1:v===l?0:v<l?-1:1},{"./JsonLdError":28,"./graphTypes":42,"./types":47,"rdf-canonize":64}],50:[function(q,K,ee){"use strict";const M=q("yallist"),o=Symbol("max"),x=Symbol("length"),d=Symbol("lengthCalculator"),e=Symbol("allowStale"),r=Symbol("maxAge"),n=Symbol("dispose"),s=Symbol("noDisposeOnSet"),h=Symbol("lruList"),a=Symbol("cache"),v=Symbol("updateAgeOnGet"),l=()=>1,f=(A,y,F)=>{const j=A[a].get(y);if(j){const G=j.value;if(c(A,G)){if(_(A,j),!A[e])return}else F&&(A[v]&&(j.value.now=Date.now()),A[h].unshiftNode(j));return G.value}},c=(A,y)=>{if(!y||!y.maxAge&&!A[r])return!1;const F=Date.now()-y.now;return y.maxAge?F>y.maxAge:A[r]&&F>A[r]},E=A=>{if(A[x]>A[o])for(let y=A[h].tail;A[x]>A[o]&&null!==y;){const F=y.prev;_(A,y),y=F}},_=(A,y)=>{if(y){const F=y.value;A[n]&&A[n](F.key,F.value),A[x]-=F.length,A[a].delete(F.key),A[h].removeNode(y)}};class O{constructor(y,F,j,G,P){this.key=y,this.value=F,this.length=j,this.now=G,this.maxAge=P||0}}const N=(A,y,F,j)=>{let G=F.value;c(A,G)&&(_(A,F),A[e]||(G=void 0)),G&&y.call(j,G.value,G.key,A)};K.exports=class{constructor(A){if("number"==typeof A&&(A={max:A}),A||(A={}),A.max&&("number"!=typeof A.max||A.max<0))throw new TypeError("max must be a non-negative number");this[o]=A.max||1/0;const y=A.length||l;if(this[d]="function"!=typeof y?l:y,this[e]=A.stale||!1,A.maxAge&&"number"!=typeof A.maxAge)throw new TypeError("maxAge must be a number");this[r]=A.maxAge||0,this[n]=A.dispose,this[s]=A.noDisposeOnSet||!1,this[v]=A.updateAgeOnGet||!1,this.reset()}set max(A){if("number"!=typeof A||A<0)throw new TypeError("max must be a non-negative number");this[o]=A||1/0,E(this)}get max(){return this[o]}set allowStale(A){this[e]=!!A}get allowStale(){return this[e]}set maxAge(A){if("number"!=typeof A)throw new TypeError("maxAge must be a non-negative number");this[r]=A,E(this)}get maxAge(){return this[r]}set lengthCalculator(A){"function"!=typeof A&&(A=l),A!==this[d]&&(this[d]=A,this[x]=0,this[h].forEach(y=>{y.length=this[d](y.value,y.key),this[x]+=y.length})),E(this)}get lengthCalculator(){return this[d]}get length(){return this[x]}get itemCount(){return this[h].length}rforEach(A,y){y=y||this;for(let F=this[h].tail;null!==F;){const j=F.prev;N(this,A,F,y),F=j}}forEach(A,y){y=y||this;for(let F=this[h].head;null!==F;){const j=F.next;N(this,A,F,y),F=j}}keys(){return this[h].toArray().map(A=>A.key)}values(){return this[h].toArray().map(A=>A.value)}reset(){this[n]&&this[h]&&this[h].length&&this[h].forEach(A=>this[n](A.key,A.value)),this[a]=new Map,this[h]=new M,this[x]=0}dump(){return this[h].map(A=>!c(this,A)&&{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[h]}set(A,y,F){if((F=F||this[r])&&"number"!=typeof F)throw new TypeError("maxAge must be a number");const j=F?Date.now():0,G=this[d](y,A);if(this[a].has(A)){if(G>this[o])return _(this,this[a].get(A)),!1;const z=this[a].get(A).value;return this[n]&&(this[s]||this[n](A,z.value)),z.now=j,z.maxAge=F,z.value=y,this[x]+=G-z.length,z.length=G,this.get(A),E(this),!0}const P=new O(A,y,G,j,F);return P.length>this[o]?(this[n]&&this[n](A,y),!1):(this[x]+=P.length,this[h].unshift(P),this[a].set(A,this[h].head),E(this),!0)}has(A){if(!this[a].has(A))return!1;const y=this[a].get(A).value;return!c(this,y)}get(A){return f(this,A,!0)}peek(A){return f(this,A,!1)}pop(){const A=this[h].tail;return A?(_(this,A),A.value):null}del(A){_(this,this[a].get(A))}load(A){this.reset();const y=Date.now();for(let F=A.length-1;F>=0;F--){const j=A[F],G=j.e||0;if(0===G)this.set(j.k,j.v);else{const P=G-y;P>0&&this.set(j.k,j.v,P)}}}prune(){this[a].forEach((A,y)=>f(this,y,!1))}}},{yallist:121}],51:[function(q,K,ee){var M=q;q=function(){},ee=K.exports={Lexer:q("./lib/N3Lexer"),Parser:q("./lib/N3Parser"),Writer:q("./lib/N3Writer"),Store:q("./lib/N3Store"),StreamParser:q("./lib/N3StreamParser"),StreamWriter:q("./lib/N3StreamWriter"),Util:q("./lib/N3Util")},Object.keys(ee).forEach(function(o){Object.defineProperty(ee,o,{configurable:!0,enumerable:!0,get:function(){return delete ee[o],ee[o]=M("./lib/N3"+o)}})})},{"./lib/N3Lexer":52,"./lib/N3Parser":53,"./lib/N3Store":54,"./lib/N3StreamParser":55,"./lib/N3StreamWriter":56,"./lib/N3Util":57,"./lib/N3Writer":58}],52:[function(q,K,ee){(function(M){(function(){var o=String.fromCharCode,x="function"==typeof M?M:function(s){setTimeout(s,0)},d=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},r=/[\x00-\x20<>\\"\{\}\|\^\`]/;function n(s){if(!(this instanceof n))return new n(s);if((s=s||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var h=this;this._tokenize=this.tokenize,this.tokenize=function(a,v){this._tokenize(a,function(l,f){!l&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(f.type)?v&&v(l,f):v&&v(l||h._syntaxError(f.type,v=null))})}}this._n3Mode=!1!==s.n3,this._comments=!!s.comments}n.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(s,h){for(var a=this._input,v=this._comments;;){for(var l,f;l=this._newline.exec(a);)v&&(f=this._comment.exec(l[0]))&&s(null,{line:this._line,type:"comment",value:f[1],prefix:""}),a=a.substr(l[0].length,a.length),this._line++;if((l=this._whitespace.exec(a))&&(a=a.substr(l[0].length,a.length)),this._endOfFile.test(a))return h&&(v&&(f=this._comment.exec(a))&&s(null,{line:this._line,type:"comment",value:f[1],prefix:""}),s(a=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=a;var c,E=this._line,_="",O="",N="",A=a[0],y=null,F=0,j=!1;switch(A){case"^":if(a.length<3)break;if("^"!==a[1]){this._n3Mode&&(F=1,_="^");break}if(this._previousMarker="^^","<"!==(a=a.substr(2))[0]){j=!0;break}case"<":if(y=this._unescapedIri.exec(a))_="IRI",O=y[1];else if(y=this._iri.exec(a)){if(null===(c=this._unescape(y[1]))||r.test(c))return P(this);_="IRI",O=c}else this._n3Mode&&a.length>1&&"="===a[1]&&(_="inverse",F=2,O="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((y=this._blank.exec(a))||h&&(y=this._blank.exec(a+" ")))&&(_="blank",N="_",O=y[1]);break;case'"':case"'":if(y=this._unescapedString.exec(a))_="literal",O=y[0];else if(y=this._singleQuotedString.exec(a)){if(null===(c=this._unescape(y[0])))return P(this);_="literal",O=c.replace(/^'|'$/g,'"')}else if(y=this._tripleQuotedString.exec(a)){if(c=y[1]||y[2],this._line+=c.split(/\r\n|\r|\n/).length-1,null===(c=this._unescape(c)))return P(this);_="literal",O=c.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(y=this._variable.exec(a))&&(_="var",O=y[0]);break;case"@":"literal"===this._previousMarker&&(y=this._langcode.exec(a))?(_="langcode",O=y[1]):(y=this._keyword.exec(a))&&(_=y[0]);break;case".":if(1===a.length?h:a[1]<"0"||a[1]>"9"){_=".",F=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(a)||h&&(y=this._number.exec(a+" ")))&&(_="literal",O='"'+y[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(y[1]?"double":/^[+\-]?\d+$/.test(y[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(a))?_=y[0].toUpperCase():j=!0;break;case"f":case"t":(y=this._boolean.exec(a))?(_="literal",O='"'+y[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):j=!0;break;case"a":(y=this._shortPredicates.exec(a))?(_="abbreviation",O="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):j=!0;break;case"=":this._n3Mode&&a.length>1&&(_="abbreviation",">"!==a[1]?(F=1,O="http://www.w3.org/2002/07/owl#sameAs"):(F=2,O="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":F=1,_=A;break;default:j=!0}if(j&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(y=this._prefix.exec(a))?((y=this._prefixed.exec(a))||h&&(y=this._prefixed.exec(a+" ")))&&(_="prefixed",N=y[1]||"",O=this._unescape(y[2])):(_="prefix",O=y[1]||"")),"^^"===this._previousMarker)switch(_){case"prefixed":_="type";break;case"IRI":_="typeIRI";break;default:_=""}if(!_)return h||!/^'''|^"""/.test(a)&&/\n|\r/.test(a)?P(this):this._input=a;var G={line:E,type:_,value:O,prefix:N};s(null,G),this.previousToken=G,this._previousMarker=_,a=a.substr(F||y[0].length,a.length)}function P(z){s(z._syntaxError(/^\S*/.exec(a)[0]))}},_unescape:function(s){try{return s.replace(d,function(h,a,v,l){var f;if(a){if(f=parseInt(a,16),isNaN(f))throw new Error;return o(f)}if(v){if(f=parseInt(v,16),isNaN(f))throw new Error;return f<=65535?o(f):o(55296+(f-=65536)/1024,56320+(1023&f))}var c=e[l];if(!c)throw new Error;return c})}catch{return null}},_syntaxError:function(s){this._input=null;var h=new Error('Unexpected "'+s+'" on line '+this._line+".");return h.context={token:void 0,line:this._line,previousToken:this.previousToken},h},tokenize:function(s,h){var a=this;if(this._line=1,"string"==typeof s){if(this._input=s,"function"!=typeof h){var v,l=[];if(this._tokenizeToEnd(function(f,c){f?v=f:l.push(c)},!0),v)throw v;return l}x(function(){a._tokenizeToEnd(h,!0)})}else this._input="","function"==typeof s.setEncoding&&s.setEncoding("utf8"),s.on("data",function(f){null!==a._input&&(a._input+=f,a._tokenizeToEnd(h,!1))}),s.on("end",function(){null!==a._input&&a._tokenizeToEnd(h,!0)}),s.on("error",h)}},K.exports=n}).call(this)}).call(this,q("timers").setImmediate)},{timers:111}],53:[function(q,K,ee){var M=q("./N3Lexer"),o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",x=o+"nil",d=o+"first",e=o+"rest",r="urn:n3:quantifiers",n=/^[a-z][a-z0-9+.-]*:/i,s=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,h=/(?:^|\/)\.\.?(?:$|[\/#?])/,a=0,v=0;function l(c){if(!(this instanceof l))return new l(c);this._contextStack=[],this._graph=null,c=c||{},this._setBase(c.documentIRI);var E="string"==typeof c.format?c.format.match(/\w*$/)[0].toLowerCase():"",_="turtle"===E,O="trig"===E,N=/triple/.test(E),A=/quad/.test(E),y=this._n3Mode=/n3/.test(E),F=N||A;(this._supportsNamedGraphs=!(_||y))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(_||O||N||y),F&&(this._base="",this._resolveIRI=function(j){return this._error("Disallowed relative IRI",j),this._callback=f,this._subject=null}),this._blankNodePrefix="string"!=typeof c.blankNodePrefix?"":"_:"+c.blankNodePrefix.replace(/^_:/,""),this._lexer=c.lexer||new M({lineMode:F,n3:y}),this._explicitQuantifiers=!!c.explicitQuantifiers}function f(){}l._resetBlankNodeIds=function(){a=v=0},l.prototype={_setBase:function(c){if(c){var E=c.indexOf("#");E>=0&&(c=c.substr(0,E)),this._base=c,this._basePath=c.indexOf("/")<0?c:c.replace(/[^\/?]*(?:\?.*)?$/,""),c=c.match(s),this._baseRoot=c[0],this._baseScheme=c[1]}else this._base=null},_saveContext:function(c,E,_,O,N){var A=this._n3Mode;this._contextStack.push({subject:_,predicate:O,object:N,graph:E,type:c,inverse:!!A&&this._inversePredicate,blankPrefix:A?this._prefixes._:"",quantified:A?this._quantified:null}),A&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var c=this._contextStack.pop(),E=this._n3Mode;this._subject=c.subject,this._predicate=c.predicate,this._object=c.object,this._graph=c.graph,E&&(this._inversePredicate=c.inverse,this._prefixes._=c.blankPrefix,this._quantified=c.quantified)},_readInTopContext:function(c){switch(c.type){case"eof":return null!==this._graph?this._error("Unclosed graph",c):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(c)}},_readEntity:function(c,E){var _;switch(c.type){case"IRI":case"typeIRI":_=null===this._base||n.test(c.value)?c.value:this._resolveIRI(c);break;case"type":case"blank":case"prefixed":var O=this._prefixes[c.prefix];if(void 0===O)return this._error('Undefined prefix "'+c.prefix+':"',c);_=O+c.value;break;case"var":return c.value;default:return this._error("Expected entity but got "+c.type,c)}return!E&&this._n3Mode&&_ in this._quantified&&(_=this._quantified[_]),_},_readSubject:function(c){switch(this._predicate=null,c.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+v++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,x,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+v++,null,null),this._readSubject):this._error("Unexpected graph",c);case"}":return this._readPunctuation(c);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',c);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',c);default:if(void 0===(this._subject=this._readEntity(c)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(c){var E=c.type;switch(E){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=c.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+E,c):(this._subject=null,"]"===E?this._readBlankNodeTail(c):this._readPunctuation(c));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",c);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",c);default:if(void 0===(this._predicate=this._readEntity(c)))return}return this._readObject},_readObject:function(c){switch(c.type){case"literal":return this._object=c.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+v++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,x),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+v++),this._readSubject):this._error("Unexpected graph",c);default:if(void 0===(this._object=this._readEntity(c)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(c){return"{"===c.type?this._readGraph(c):this._readPredicate(c)},_readGraph:function(c){return"{"!==c.type?this._error("Expected graph but got "+c.type,c):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(c){return"]"===c.type?(this._subject=null,this._readBlankNodeTail(c)):(this._predicate=null,this._readPredicate(c))},_readBlankNodeTail:function(c){if("]"!==c.type)return this._readBlankNodePunctuation(c);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var E=null===this._predicate;return this._restoreContext(),null===this._object?E?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(c){return"."!==c.type||this._contextStack.length?this._readPredicate(c):(this._subject=null,this._readPunctuation(c))},_readListItem:function(c){var E=null,_=null,O=this._subject,N=this._contextStack,A=N[N.length-1],y=this._readListItem,F=!0;switch(c.type){case"[":this._saveContext("blank",this._graph,_="_:b"+v++,d,this._subject=E="_:b"+v++),y=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,_="_:b"+v++,d,x),this._subject=null;break;case")":if(this._restoreContext(),0!==N.length&&"list"===N[N.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(y=this._readPredicate,this._subject===x)return y}else if(y=this._getContextEndReader(),this._object===x)return y;_=x;break;case"literal":E=c.value,F=!1,y=this._readListItemDataTypeOrLang;break;default:if(void 0===(E=this._readEntity(c)))return}if(null===_&&(this._subject=_="_:b"+v++),null===O?null===A.predicate?A.subject=_:A.object=_:this._triple(O,e,_,this._graph),null!==E){if(this._n3Mode&&("IRI"===c.type||"prefixed"===c.type))return this._saveContext("item",this._graph,_,d,E),this._subject=E,this._predicate=null,this._getPathReader(this._readListItem);F?this._triple(_,d,E,this._graph):this._object=E}return y},_readDataTypeOrLang:function(c){return this._completeLiteral(c,!1)},_readListItemDataTypeOrLang:function(c){return this._completeLiteral(c,!0)},_completeLiteral:function(c,E){var _=!1;switch(c.type){case"type":case"typeIRI":var O=this._readEntity(c);if(void 0===O)return;_=!0,this._object+="^^"+O;break;case"langcode":_=!0,this._object+="@"+c.value.toLowerCase()}return E&&this._triple(this._subject,d,this._object,this._graph),_?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(c))},_readFormulaTail:function(c){return"}"!==c.type?this._readPunctuation(c):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(c){var E,_=this._subject,O=this._graph,N=this._inversePredicate;switch(c.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",c);if(this._n3Mode)return this._readFormulaTail(c);this._graph=null;case".":this._subject=null,E=this._contextStack.length?this._readSubject:this._readInTopContext,N&&(this._inversePredicate=!1);break;case";":E=this._readPredicate;break;case",":E=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(O=this._readEntity(c))){E=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',c)}if(null!==_){var A=this._predicate,y=this._object;N?this._triple(y,A,_,O):this._triple(_,A,y,O)}return E},_readBlankNodePunctuation:function(c){var E;switch(c.type){case";":E=this._readPredicate;break;case",":E=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',c)}return this._triple(this._subject,this._predicate,this._object,this._graph),E},_readQuadPunctuation:function(c){return"."!==c.type?this._error("Expected dot to follow quad",c):this._readInTopContext},_readPrefix:function(c){return"prefix"!==c.type?this._error("Expected prefix to follow @prefix",c):(this._prefix=c.value,this._readPrefixIRI)},_readPrefixIRI:function(c){if("IRI"!==c.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',c);var E=this._readEntity(c);return this._prefixes[this._prefix]=E,this._prefixCallback(this._prefix,E),this._readDeclarationPunctuation},_readBaseIRI:function(c){return"IRI"!==c.type?this._error("Expected IRI to follow base declaration",c):(this._setBase(null===this._base||n.test(c.value)?c.value:this._resolveIRI(c)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(c){switch(c.type){case"IRI":case"blank":case"prefixed":return this._readSubject(c),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",c)}},_readNamedGraphBlankLabel:function(c){return"]"!==c.type?this._error("Invalid graph label",c):(this._subject="_:b"+v++,this._readGraph)},_readDeclarationPunctuation:function(c){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(c)):"."!==c.type?this._error("Expected declaration to end with a dot",c):this._readInTopContext},_readQuantifierList:function(c){var E;switch(c.type){case"IRI":case"prefixed":if(void 0!==(E=this._readEntity(c,!0)))break;default:return this._error("Unexpected "+c.type,c)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+v++,r):this._triple(this._subject,e,this._subject="_:b"+v++,r),this._triple(this._subject,d,E,r)):this._quantified[E]=this._quantifiedPrefix+v++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(c){return","===c.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,x,r),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(c))},_getPathReader:function(c){return this._afterPath=c,this._readPath},_readPath:function(c){switch(c.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var E=this._contextStack,_=E.length&&E[E.length-1];if(_&&"item"===_.type){var O=this._subject;this._restoreContext(),this._triple(this._subject,d,O,this._graph)}return this._afterPath(c)}},_readForwardPath:function(c){var E,_,O="_:b"+v++;if(void 0!==(_=this._readEntity(c)))return null===this._predicate?(E=this._subject,this._subject=O):(E=this._object,this._object=O),this._triple(E,_,O,this._graph),this._readPath},_readBackwardPath:function(c){var E,_,O="_:b"+v++;if(void 0!==(E=this._readEntity(c)))return null===this._predicate?(_=this._subject,this._subject=O):(_=this._object,this._object=O),this._triple(O,E,_,this._graph),this._readPath},_getContextEndReader:function(){var c=this._contextStack;if(!c.length)return this._readPunctuation;switch(c[c.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(c,E,_,O){this._callback(null,{subject:c,predicate:E,object:_,graph:O||""})},_error:function(c,E){var _=new Error(c+" on line "+E.line+".");_.context={token:E,line:E.line,previousToken:this._lexer.previousToken},this._callback(_),this._callback=f},_resolveIRI:function(c){var E=c.value;switch(E[0]){case void 0:return this._base;case"#":return this._base+E;case"?":return this._base.replace(/(?:\?.*)?$/,E);case"/":return("/"===E[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(E);default:return this._removeDotSegments(this._basePath+E)}},_removeDotSegments:function(c){if(!h.test(c))return c;for(var E="",_=c.length,O=-1,N=-1,A=0,y="/";O<_;){switch(y){case":":if(N<0&&"/"===c[++O]&&"/"===c[++O])for(;(N=O+1)<_&&"/"!==c[N];)O=N;break;case"?":case"#":O=_;break;case"/":if("."===c[O+1])switch(y=c[1+ ++O]){case"/":E+=c.substring(A,O-1),A=O+1;break;case void 0:case"?":case"#":return E+c.substring(A,O)+c.substr(O+1);case".":if(void 0===(y=c[1+ ++O])||"/"===y||"?"===y||"#"===y){if((A=(E+=c.substring(A,O-2)).lastIndexOf("/"))>=N&&(E=E.substr(0,A)),"/"!==y)return E+"/"+c.substr(O+1);A=O+1}}}y=c[++O]}return E+c.substring(A)},parse:function(c,E,_){var O=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+a+++"_",this._prefixCallback=_||f,this._inversePredicate=!1,this._quantified=Object.create(null),!E){var N,A=[];if(this._callback=function(y,F){y?N=y:F&&A.push(F)},this._lexer.tokenize(c).every(function(y){return O._readCallback=O._readCallback(y)}),N)throw N;return A}this._callback=E,this._lexer.tokenize(c,function(y,F){null!==y?(O._callback(y),O._callback=f):O._readCallback&&(O._readCallback=O._readCallback(F))})}},K.exports=l},{"./N3Lexer":52}],54:[function(q,K,ee){var M=q("./N3Util").expandPrefixedName;function o(d,e){if(!(this instanceof o))return new o(d,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!d||d[0]||(e=d,d=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),d&&this.addTriples(d)}function x(d){return"string"==typeof d||d instanceof String}o.prototype={get size(){var d=this._size;if(null!==d)return d;d=0;var e,r,n=this._graphs;for(var s in n)for(var h in e=n[s].subjects)for(var a in r=e[h])d+=Object.keys(r[a]).length;return this._size=d},_addToIndex:function(d,e,r,n){var s=d[e]||(d[e]={}),h=s[r]||(s[r]={}),a=n in h;return a||(h[n]=null),!a},_removeFromIndex:function(d,e,r,n){var s,h=d[e],a=h[r];for(s in delete a[n],a)return;for(s in delete h[r],h)return;delete d[e]},_findInIndex:function(d,e,r,n,s,h,a,v,l,f){var c,E,_,O=!e+!r+!n>1?Object.keys(this._ids):this._entities;for(var N in e&&((c=d,d={})[e]=c[e]),d){var A=O[N];if(E=d[N])for(var y in r&&((c=E,E={})[r]=c[r]),E){var F=O[y];if(_=E[y])for(var j=(n?n in _?[n]:[]:Object.keys(_)),G=j.length-1;G>=0;G--){var P={subject:"",predicate:"",object:"",graph:v};if(P[s]=A,P[h]=F,P[a]=O[j[G]],f)f.push(P);else if(l(P))return!0}}}return f},_loop:function(d,e){for(var r in d)e(r)},_loopByKey0:function(d,e,r){var n,s;if(n=d[e])for(s in n)r(s)},_loopByKey1:function(d,e,r){var n;for(n in d)d[n][e]&&r(n)},_loopBy2Keys:function(d,e,r,n){var s,h,a;if((s=d[e])&&(h=s[r]))for(a in h)n(a)},_countInIndex:function(d,e,r,n){var s,h,a,v=0;for(var l in e&&((s=d,d={})[e]=s[e]),d)if(h=d[l])for(var f in r&&((s=h,h={})[r]=s[r]),h)(a=h[f])&&(n?n in a&&v++:v+=Object.keys(a).length);return v},_getGraphs:function(d){if(!x(d))return this._graphs;var e={};return e[d]=this._graphs[d],e},_uniqueEntities:function(d){var e=Object.create(null),r=this._entities;return function(n){n in e||(e[n]=!0,d(r[n]))}},addTriple:function(d,e,r,n){e||(n=d.graph,r=d.object,e=d.predicate,d=d.subject),n=n||"";var s=this._graphs[n];s||(s=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(s));var h=this._ids,a=this._entities;d=h[d]||(h[a[++this._id]=d]=this._id),e=h[e]||(h[a[++this._id]=e]=this._id),r=h[r]||(h[a[++this._id]=r]=this._id);var v=this._addToIndex(s.subjects,d,e,r);return this._addToIndex(s.predicates,e,r,d),this._addToIndex(s.objects,r,d,e),this._size=null,v},addTriples:function(d){for(var e=d.length-1;e>=0;e--)this.addTriple(d[e])},addPrefix:function(d,e){this._prefixes[d]=e},addPrefixes:function(d){for(var e in d)this.addPrefix(e,d[e])},removeTriple:function(d,e,r,n){e||(n=d.graph,r=d.object,e=d.predicate,d=d.subject),n=n||"";var s,h,a,v=this._ids,l=this._graphs;if(!((d=v[d])&&(e=v[e])&&(r=v[r])&&(s=l[n])&&(h=s.subjects[d])&&(a=h[e])&&r in a))return!1;for(d in this._removeFromIndex(s.subjects,d,e,r),this._removeFromIndex(s.predicates,e,r,d),this._removeFromIndex(s.objects,r,d,e),null!==this._size&&this._size--,s.subjects)return!0;return delete l[n],!0},removeTriples:function(d){for(var e=d.length-1;e>=0;e--)this.removeTriple(d[e])},getTriples:function(d,e,r,n){var s=this._prefixes;return this.getTriplesByIRI(M(d,s),M(e,s),M(r,s),M(n,s))},getTriplesByIRI:function(d,e,r,n){var s,h,a,v,l=[],f=this._getGraphs(n),c=this._ids;if(x(d)&&!(h=c[d])||x(e)&&!(a=c[e])||x(r)&&!(v=c[r]))return l;for(var E in f)(s=f[E])&&(h?v?this._findInIndex(s.objects,v,h,a,"object","subject","predicate",E,null,l):this._findInIndex(s.subjects,h,a,null,"subject","predicate","object",E,null,l):a?this._findInIndex(s.predicates,a,v,null,"predicate","object","subject",E,null,l):v?this._findInIndex(s.objects,v,null,null,"object","subject","predicate",E,null,l):this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",E,null,l));return l},countTriples:function(d,e,r,n){var s=this._prefixes;return this.countTriplesByIRI(M(d,s),M(e,s),M(r,s),M(n,s))},countTriplesByIRI:function(d,e,r,n){var s,h,a,v,l=0,f=this._getGraphs(n),c=this._ids;if(x(d)&&!(h=c[d])||x(e)&&!(a=c[e])||x(r)&&!(v=c[r]))return 0;for(var E in f)(s=f[E])&&(l+=d?r?this._countInIndex(s.objects,v,h,a):this._countInIndex(s.subjects,h,a,v):e?this._countInIndex(s.predicates,a,v,h):this._countInIndex(s.objects,v,h,a));return l},forEach:function(d,e,r,n,s){var h=this._prefixes;this.forEachByIRI(d,M(e,h),M(r,h),M(n,h),M(s,h))},forEachByIRI:function(d,e,r,n,s){this.someByIRI(function(h){return d(h),!1},e,r,n,s)},every:function(d,e,r,n,s){var h=this._prefixes;return this.everyByIRI(d,M(e,h),M(r,h),M(n,h),M(s,h))},everyByIRI:function(d,e,r,n,s){var h=!1,a=!this.someByIRI(function(v){return h=!0,!d(v)},e,r,n,s);return h&&a},some:function(d,e,r,n,s){var h=this._prefixes;return this.someByIRI(d,M(e,h),M(r,h),M(n,h),M(s,h))},someByIRI:function(d,e,r,n,s){var h,a,v,l,f=this._getGraphs(s),c=this._ids;if(x(e)&&!(a=c[e])||x(r)&&!(v=c[r])||x(n)&&!(l=c[n]))return!1;for(var E in f)if(h=f[E])if(a){if(l){if(this._findInIndex(h.objects,l,a,v,"object","subject","predicate",E,d,null))return!0}else if(this._findInIndex(h.subjects,a,v,null,"subject","predicate","object",E,d,null))return!0}else if(v){if(this._findInIndex(h.predicates,v,l,null,"predicate","object","subject",E,d,null))return!0}else if(l){if(this._findInIndex(h.objects,l,null,null,"object","subject","predicate",E,d,null))return!0}else if(this._findInIndex(h.subjects,null,null,null,"subject","predicate","object",E,d,null))return!0;return!1},getSubjects:function(d,e,r){var n=this._prefixes;return this.getSubjectsByIRI(M(d,n),M(e,n),M(r,n))},getSubjectsByIRI:function(d,e,r){var n=[];return this.forSubjectsByIRI(function(s){n.push(s)},d,e,r),n},forSubjects:function(d,e,r,n){var s=this._prefixes;this.forSubjectsByIRI(d,M(e,s),M(r,s),M(n,s))},forSubjectsByIRI:function(d,e,r,n){var s,h,a,v=this._ids,l=this._getGraphs(n);if(d=this._uniqueEntities(d),!(x(e)&&!(h=v[e])||x(r)&&!(a=v[r])))for(n in l)(s=l[n])&&(h?a?this._loopBy2Keys(s.predicates,h,a,d):this._loopByKey1(s.subjects,h,d):a?this._loopByKey0(s.objects,a,d):this._loop(s.subjects,d))},getPredicates:function(d,e,r){var n=this._prefixes;return this.getPredicatesByIRI(M(d,n),M(e,n),M(r,n))},getPredicatesByIRI:function(d,e,r){var n=[];return this.forPredicatesByIRI(function(s){n.push(s)},d,e,r),n},forPredicates:function(d,e,r,n){var s=this._prefixes;this.forPredicatesByIRI(d,M(e,s),M(r,s),M(n,s))},forPredicatesByIRI:function(d,e,r,n){var s,h,a,v=this._ids,l=this._getGraphs(n);if(d=this._uniqueEntities(d),!(x(e)&&!(h=v[e])||x(r)&&!(a=v[r])))for(n in l)(s=l[n])&&(h?a?this._loopBy2Keys(s.objects,a,h,d):this._loopByKey0(s.subjects,h,d):a?this._loopByKey1(s.predicates,a,d):this._loop(s.predicates,d))},getObjects:function(d,e,r){var n=this._prefixes;return this.getObjectsByIRI(M(d,n),M(e,n),M(r,n))},getObjectsByIRI:function(d,e,r){var n=[];return this.forObjectsByIRI(function(s){n.push(s)},d,e,r),n},forObjects:function(d,e,r,n){var s=this._prefixes;this.forObjectsByIRI(d,M(e,s),M(r,s),M(n,s))},forObjectsByIRI:function(d,e,r,n){var s,h,a,v=this._ids,l=this._getGraphs(n);if(d=this._uniqueEntities(d),!(x(e)&&!(h=v[e])||x(r)&&!(a=v[r])))for(n in l)(s=l[n])&&(h?a?this._loopBy2Keys(s.subjects,h,a,d):this._loopByKey1(s.objects,h,d):a?this._loopByKey0(s.predicates,a,d):this._loop(s.objects,d))},getGraphs:function(d,e,r){var n=this._prefixes;return this.getGraphsByIRI(M(d,n),M(e,n),M(r,n))},getGraphsByIRI:function(d,e,r){var n=[];return this.forGraphsByIRI(function(s){n.push(s)},d,e,r),n},forGraphs:function(d,e,r,n){var s=this._prefixes;this.forGraphsByIRI(d,M(e,s),M(r,s),M(n,s))},forGraphsByIRI:function(d,e,r,n){for(var s in this._graphs)this.someByIRI(function(h){return d(h.graph),!0},e,r,n,s)},createBlankNode:function(d){var e,r;if(d)for(e=d="_:"+d,r=1;this._ids[e];)e=d+r++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},K.exports=o},{"./N3Util":57}],55:[function(q,K,ee){var M=q("stream").Transform,o=q("util"),x=q("./N3Parser.js");function d(e){if(!(this instanceof d))return new d(e);M.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var r,n,s=this;new x(e).parse({on:function(h,a){switch(h){case"data":r=a;break;case"end":n=a}}},function(h,a){h&&s.emit("error",h)||a&&s.push(a)},function(h,a){s.emit("prefix",h,a)}),this._transform=function(h,a,v){r(h),v()},this._flush=function(h){n(),h()}}o.inherits(d,M),K.exports=d},{"./N3Parser.js":53,stream:76,util:117}],56:[function(q,K,ee){var M=q("stream").Transform,o=q("util"),x=q("./N3Writer.js");function d(e){if(!(this instanceof d))return new d(e);M.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var r=this,n=new x({write:function(s,h,a){r.push(s),a&&a()},end:function(s){r.push(null),s&&s()}},e);this._transform=function(s,h,a){n.addTriple(s,a)},this._flush=function(s){n.end(s)}}o.inherits(d,M),K.exports=d},{"./N3Writer.js":58,stream:76,util:117}],57:[function(q,K,ee){var M="http://www.w3.org/2001/XMLSchema#",o=M+"string",x=M+"integer",d=M+"double",e=M+"boolean",r={isIRI:function(n){if("string"!=typeof n)return!1;if(0===n.length)return!0;var s=n[0];return'"'!==s&&"_"!==s},isLiteral:function(n){return"string"==typeof n&&'"'===n[0]},isBlank:function(n){return"string"==typeof n&&"_:"===n.substr(0,2)},isDefaultGraph:function(n){return!n},inDefaultGraph:function(n){return!n.graph},getLiteralValue:function(n){var s=/^"([^]*)"/.exec(n);if(!s)throw new Error(n+" is not a literal");return s[1]},getLiteralType:function(n){var s=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(n);if(!s)throw new Error(n+" is not a literal");return s[1]||(s[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":o)},getLiteralLanguage:function(n){var s=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(n);if(!s)throw new Error(n+" is not a literal");return s[1]?s[1].toLowerCase():""},isPrefixedName:function(n){return"string"==typeof n&&/^[^:\/"']*:[^:\/"']+$/.test(n)},expandPrefixedName:function(n,s){var h,a,v,l=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(n);return l&&(a=s[h=l[1]],v=l.index),void 0===a?n:0===v?a+n.substr(h.length+1):n.substr(0,v+3)+a+n.substr(v+h.length+4)},createIRI:function(n){return n&&'"'===n[0]?r.getLiteralValue(n):n},createLiteral:function(n,s){if(!s)switch(typeof n){case"boolean":s=e;break;case"number":isFinite(n)?s=n%1==0?x:d:(s=d,isNaN(n)||(n=n>0?"INF":"-INF"));break;default:return'"'+n+'"'}return'"'+n+(/^[a-z]+(-[a-z0-9]+)*$/i.test(s)?'"@'+s.toLowerCase():'"^^'+s)},prefix:function(n){return r.prefixes({"":n})("")},prefixes:function(n){var s=Object.create(null);for(var h in n)a(h,n[h]);function a(v,l){if(l||!(v in s)){var f=Object.create(null);l=l||"",s[v]=function(c){return f[c]||(f[c]=l+c)}}return s[v]}return a}};K.exports=r},{}],58:[function(q,K,ee){var M=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,x=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,d={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(n,s){if(!(this instanceof e))return new e(n,s);if(n&&"function"!=typeof n.write&&(s=n,n=null),s=s||{},n)this._outputStream=n,this._endStream=void 0===s.end||!!s.end;else{var h="";this._outputStream={write:function(a,v,l){h+=a,l&&l()},end:function(a){a&&a(null,h)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(s.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),s.prefixes&&this.addPrefixes(s.prefixes))}function r(n){var s=d[n];return void 0===s&&(1===n.length?(s=n.charCodeAt(0).toString(16),s="\\u0000".substr(0,6-s.length)+s):(s=(1024*(n.charCodeAt(0)-55296)+n.charCodeAt(1)+9216).toString(16),s="\\U00000000".substr(0,10-s.length)+s)),s}e.prototype={_write:function(n,s){this._outputStream.write(n,"utf8",s)},_writeTriple:function(n,s,h,a,v){try{this._graph!==a&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(a?this._encodeIriOrBlankNode(a)+" {\n":"")),this._subject=null,this._graph="["!==a[0]?a:"]"),this._subject===n?this._predicate===s?this._write(", "+this._encodeObject(h),v):this._write(";\n    "+this._encodePredicate(this._predicate=s)+" "+this._encodeObject(h),v):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=n)+" "+this._encodePredicate(this._predicate=s)+" "+this._encodeObject(h),v)}catch(l){v&&v(l)}},_writeTripleLine:function(n,s,h,a,v){delete this._prefixMatch;try{this._write(this.tripleToString(n,s,h,a),v)}catch(l){v&&v(l)}},tripleToString:function(n,s,h,a){return this._encodeIriOrBlankNode(n)+" "+this._encodeIriOrBlankNode(s)+" "+this._encodeObject(h)+(a?" "+this._encodeIriOrBlankNode(a)+".\n":".\n")},triplesToString:function(n){return n.map(function(s){return this.tripleToString(s.subject,s.predicate,s.object,s.graph)},this).join("")},_encodeIriOrBlankNode:function(n){var s=n[0];if("["===s||"("===s||"_"===s&&":"===n[1])return n;o.test(n)&&(n=n.replace(x,r));var h=this._prefixRegex.exec(n);return h?h[1]?this._prefixIRIs[h[1]]+h[2]:n:"<"+n+">"},_encodeLiteral:function(n,s,h){return o.test(n)&&(n=n.replace(x,r)),h?'"'+n+'"@'+h:s?'"'+n+'"^^'+this._encodeIriOrBlankNode(s):'"'+n+'"'},_encodeSubject:function(n){if('"'===n[0])throw new Error("A literal as subject is not allowed: "+n);return"["===n[0]&&(this._subject="]"),this._encodeIriOrBlankNode(n)},_encodePredicate:function(n){if('"'===n[0])throw new Error("A literal as predicate is not allowed: "+n);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===n?"a":this._encodeIriOrBlankNode(n)},_encodeObject:function(n){if('"'!==n[0])return this._encodeIriOrBlankNode(n);var s=M.exec(n);if(!s)throw new Error("Invalid literal: "+n);return this._encodeLiteral(s[1],s[2],s[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(n,s,h,a,v){void 0===h?this._writeTriple(n.subject,n.predicate,n.object,n.graph||"",s):"string"!=typeof a?this._writeTriple(n,s,h,"",a):this._writeTriple(n,s,h,a,v)},addTriples:function(n){for(var s=0;s<n.length;s++)this.addTriple(n[s])},addPrefix:function(n,s,h){var a={};a[n]=s,this.addPrefixes(a,h)},addPrefixes:function(n,s){var h=this._prefixIRIs,a=!1;for(var v in n){var l=n[v];/[#\/]$/.test(l)&&h[l]!==(v+=":")&&(a=!0,h[l]=v,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+v+" <"+l+">.\n"))}if(a){var f="",c="";for(var E in h)f+=f?"|"+E:E,c+=(c?"|":"")+h[E];f=f.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+c+")[^/]*$|^("+f+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(a?"\n":"",s)},blank:function(n,s){var h,a,v=n;switch(void 0===n?v=[]:"string"==typeof n?v=[{predicate:n,object:s}]:"length"in n||(v=[n]),a=v.length){case 0:return"[]";case 1:if("["!==(h=v[0]).object[0])return"[ "+this._encodePredicate(h.predicate)+" "+this._encodeObject(h.object)+" ]";default:for(var l="[",f=0;f<a;f++)(h=v[f]).predicate===n?l+=", "+this._encodeObject(h.object):(l+=(f?";\n  ":"\n  ")+this._encodePredicate(h.predicate)+" "+this._encodeObject(h.object),n=h.predicate);return l+"\n]"}},list:function(n){for(var s=n&&n.length||0,h=new Array(s),a=0;a<s;a++)h[a]=this._encodeObject(n[a]);return"("+h.join(" ")+")"},_prefixRegex:/$0^/,end:function(n){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var s=n&&function(h,a){s=null,n(h,a)};if(this._endStream)try{return this._outputStream.end(s)}catch{}s&&s()}},K.exports=e},{}],59:[function(q,K,ee){var M,o,x=K.exports={};function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(E){if(M===setTimeout)return setTimeout(E,0);if((M===d||!M)&&setTimeout)return M=setTimeout,setTimeout(E,0);try{return M(E,0)}catch{try{return M.call(null,E,0)}catch{return M.call(this,E,0)}}}!function(){try{M="function"==typeof setTimeout?setTimeout:d}catch{M=d}try{o="function"==typeof clearTimeout?clearTimeout:e}catch{o=e}}();var n,s=[],h=!1,a=-1;function v(){h&&n&&(h=!1,n.length?s=n.concat(s):a=-1,s.length&&l())}function l(){if(!h){var E=r(v);h=!0;for(var _=s.length;_;){for(n=s,s=[];++a<_;)n&&n[a].run();a=-1,_=s.length}n=null,h=!1,function(O){if(o===clearTimeout)return clearTimeout(O);if((o===e||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(O);try{o(O)}catch{try{return o.call(null,O)}catch{return o.call(this,O)}}}(E)}}function f(E,_){this.fun=E,this.array=_}function c(){}x.nextTick=function(E){var _=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)_[O-1]=arguments[O];s.push(new f(E,_)),1!==s.length||h||r(l)},f.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=c,x.addListener=c,x.once=c,x.off=c,x.removeListener=c,x.removeAllListeners=c,x.emit=c,x.prependListener=c,x.prependOnceListener=c,x.listeners=function(E){return[]},x.binding=function(E){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(E){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],60:[function(q,K,ee){(function(M){(function(){!function(o){var x="object"==typeof ee&&ee&&!ee.nodeType&&ee,d="object"==typeof K&&K&&!K.nodeType&&K,e="object"==typeof M&&M;e.global!==e&&e.window!==e&&e.self!==e||(o=e);var r,n,s=2147483647,h=36,a=/^xn--/,v=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,E=String.fromCharCode;function _(z){throw new RangeError(f[z])}function O(z,Y){for(var ie=z.length,ye=[];ie--;)ye[ie]=Y(z[ie]);return ye}function N(z,Y){var ie=z.split("@"),ye="";return ie.length>1&&(ye=ie[0]+"@",z=ie[1]),ye+O((z=z.replace(l,".")).split("."),Y).join(".")}function A(z){for(var Y,ie,ye=[],fe=0,re=z.length;fe<re;)(Y=z.charCodeAt(fe++))>=55296&&Y<=56319&&fe<re?56320==(64512&(ie=z.charCodeAt(fe++)))?ye.push(((1023&Y)<<10)+(1023&ie)+65536):(ye.push(Y),fe--):ye.push(Y);return ye}function y(z){return O(z,function(Y){var ie="";return Y>65535&&(ie+=E((Y-=65536)>>>10&1023|55296),Y=56320|1023&Y),ie+E(Y)}).join("")}function F(z,Y){return z+22+75*(z<26)-((0!=Y)<<5)}function j(z,Y,ie){var ye=0;for(z=ie?c(z/700):z>>1,z+=c(z/Y);z>455;ye+=h)z=c(z/35);return c(ye+36*z/(z+38))}function G(z){var Y,ie,ye,fe,re,V,$,ne,he,xe,ge,ce=[],ke=z.length,Ne=0,Me=128,oe=72;for((ie=z.lastIndexOf("-"))<0&&(ie=0),ye=0;ye<ie;++ye)z.charCodeAt(ye)>=128&&_("not-basic"),ce.push(z.charCodeAt(ye));for(fe=ie>0?ie+1:0;fe<ke;){for(re=Ne,V=1,$=h;fe>=ke&&_("invalid-input"),((ne=(ge=z.charCodeAt(fe++))-48<10?ge-22:ge-65<26?ge-65:ge-97<26?ge-97:h)>=h||ne>c((s-Ne)/V))&&_("overflow"),Ne+=ne*V,!(ne<(he=$<=oe?1:$>=oe+26?26:$-oe));$+=h)V>c(s/(xe=h-he))&&_("overflow"),V*=xe;oe=j(Ne-re,Y=ce.length+1,0==re),c(Ne/Y)>s-Me&&_("overflow"),Me+=c(Ne/Y),Ne%=Y,ce.splice(Ne++,0,Me)}return y(ce)}function P(z){var Y,ie,ye,fe,re,V,$,ne,he,xe,ge,ce,ke,Ne,Me,oe=[];for(ce=(z=A(z)).length,Y=128,ie=0,re=72,V=0;V<ce;++V)(ge=z[V])<128&&oe.push(E(ge));for(ye=fe=oe.length,fe&&oe.push("-");ye<ce;){for($=s,V=0;V<ce;++V)(ge=z[V])>=Y&&ge<$&&($=ge);for($-Y>c((s-ie)/(ke=ye+1))&&_("overflow"),ie+=($-Y)*ke,Y=$,V=0;V<ce;++V)if((ge=z[V])<Y&&++ie>s&&_("overflow"),ge==Y){for(ne=ie,he=h;!(ne<(xe=he<=re?1:he>=re+26?26:he-re));he+=h)Me=ne-xe,Ne=h-xe,oe.push(E(F(xe+Me%Ne,0))),ne=c(Me/Ne);oe.push(E(F(ne,0))),re=j(ie,ke,ye==fe),ie=0,++ye}++ie,++Y}return oe.join("")}if(r={version:"1.4.1",ucs2:{decode:A,encode:y},decode:G,encode:P,toASCII:function(z){return N(z,function(Y){return v.test(Y)?"xn--"+P(Y):Y})},toUnicode:function(z){return N(z,function(Y){return a.test(Y)?G(Y.slice(4).toLowerCase()):Y})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(x&&d)if(K.exports==x)d.exports=r;else for(n in r)r.hasOwnProperty(n)&&(x[n]=r[n]);else o.punycode=r}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(q,K,ee){"use strict";function M(x,d){return Object.prototype.hasOwnProperty.call(x,d)}K.exports=function(x,d,e,r){d=d||"&",e=e||"=";var n={};if("string"!=typeof x||0===x.length)return n;var s=/\+/g;x=x.split(d);var h=1e3;r&&"number"==typeof r.maxKeys&&(h=r.maxKeys);var a=x.length;h>0&&a>h&&(a=h);for(var v=0;v<a;++v){var l,f,c,E,_=x[v].replace(s,"%20"),O=_.indexOf(e);O>=0?(l=_.substr(0,O),f=_.substr(O+1)):(l=_,f=""),c=decodeURIComponent(l),E=decodeURIComponent(f),M(n,c)?o(n[c])?n[c].push(E):n[c]=[n[c],E]:n[c]=E}return n};var o=Array.isArray||function(x){return"[object Array]"===Object.prototype.toString.call(x)}},{}],62:[function(q,K,ee){"use strict";var M=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};K.exports=function(e,r,n,s){return r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?x(d(e),function(h){var a=encodeURIComponent(M(h))+n;return o(e[h])?x(e[h],function(v){return a+encodeURIComponent(M(v))}).join(r):a+encodeURIComponent(M(e[h]))}).join(r):s?encodeURIComponent(M(s))+n+encodeURIComponent(M(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function x(e,r){if(e.map)return e.map(r);for(var n=[],s=0;s<e.length;s++)n.push(r(e[s],s));return n}var d=Object.keys||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(n);return r}},{}],63:[function(q,K,ee){"use strict";ee.decode=ee.parse=q("./decode"),ee.encode=ee.stringify=q("./encode")},{"./decode":61,"./encode":62}],64:[function(q,K,ee){K.exports=q("./lib")},{"./lib":73}],65:[function(q,K,ee){"use strict";K.exports=class Ga{constructor(o,x=new Map,d=0){this.prefix=o,this._existing=x,this.counter=d}clone(){const{prefix:o,_existing:x,counter:d}=this;return new Ga(o,new Map(x),d)}getId(o){const x=o&&this._existing.get(o);if(x)return x;const d=this.prefix+this.counter;return this.counter++,o&&this._existing.set(o,d),d}hasId(o){return this._existing.has(o)}getOldIds(){return[...this._existing.keys()]}}},{}],66:[function(q,K,ee){"use strict";q("setimmediate");const M=self.crypto||self.msCrypto;K.exports=class{constructor(o){if(!M||!M.subtle)throw new Error("crypto.subtle not found.");if("sha256"===o)this.algorithm={name:"SHA-256"};else{if("sha1"!==o)throw new Error(`Unsupported algorithm "${o}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(o){this._content+=o}async digest(){const o=(new TextEncoder).encode(this._content),x=new Uint8Array(await M.subtle.digest(this.algorithm,o));let d="";for(let e=0;e<x.length;++e)d+=x[e].toString(16).padStart(2,"0");return d}}},{setimmediate:75}],67:[function(q,K,ee){"use strict";const M="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",o="http://www.w3.org/2001/XMLSchema#string",x="NamedNode",d="BlankNode",e="Literal",r="DefaultGraph",n={};function s(v,l){return v.subject.termType===l.subject.termType&&v.object.termType===l.object.termType&&v.subject.value===l.subject.value&&v.predicate.value===l.predicate.value&&v.object.value===l.object.value&&(v.object.termType!==e||v.object.datatype.termType===l.object.datatype.termType&&v.object.language===l.object.language&&v.object.datatype.value===l.object.datatype.value)}(()=>{const v="(?:<([^:]+:[^>]*)>)",l="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",f=l+"0-9-\xb7\u0300-\u036f\u203f-\u2040",c="(_:(?:["+l+"0-9])(?:(?:["+f+".])*(?:["+f+"]))?)",E="[ \\t]+",_="[ \\t]*",O="(?:"+v+"|"+c+")"+E,N=v+E,A="(?:"+v+"|"+c+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+v+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+_,y="(?:\\.|(?:(?:"+v+"|"+c+")"+_+"\\.))";n.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,n.empty=new RegExp("^"+_+"$"),n.quad=new RegExp("^"+_+O+N+A+y+_+"$")})(),K.exports=class An{static parse(l){const f=[],c={},E=l.split(n.eoln);let _=0;for(const O of E){if(_++,n.empty.test(O))continue;const N=O.match(n.quad);if(null===N)throw new Error("N-Quads parse error on line "+_+".");const A={subject:null,predicate:null,object:null,graph:null};if(void 0!==N[1]?A.subject={termType:x,value:N[1]}:A.subject={termType:d,value:N[2]},A.predicate={termType:x,value:N[3]},void 0!==N[4]?A.object={termType:x,value:N[4]}:void 0!==N[5]?A.object={termType:d,value:N[5]}:(A.object={termType:e,value:void 0,datatype:{termType:x}},void 0!==N[7]?A.object.datatype.value=N[7]:void 0!==N[8]?(A.object.datatype.value=M,A.object.language=N[8]):A.object.datatype.value=o,A.object.value=N[6].replace(a,function(y,F,j,G){if(F)switch(F){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(j)return String.fromCharCode(parseInt(j,16));if(G)throw new Error("Unsupported U escape")})),void 0!==N[9]?A.graph={termType:x,value:N[9]}:void 0!==N[10]?A.graph={termType:d,value:N[10]}:A.graph={termType:r,value:""},A.graph.value in c){let y=!0;const F=c[A.graph.value];for(const j of F)if(s(j,A)){y=!1;break}y&&(F.push(A),f.push(A))}else c[A.graph.value]=[A],f.push(A)}return f}static serialize(l){Array.isArray(l)||(l=An.legacyDatasetToQuads(l));const f=[];for(const c of l)f.push(An.serializeQuad(c));return f.sort().join("")}static serializeQuadComponents(l,f,c,E){let _="";return l.termType===x?_+=`<${l.value}>`:_+=`${l.value}`,_+=` <${f.value}> `,c.termType===x?_+=`<${c.value}>`:c.termType===d?_+=c.value:(_+=`"${O=c.value,O.replace(h,function(N){switch(N){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,c.datatype.value===M?c.language&&(_+=`@${c.language}`):c.datatype.value!==o&&(_+=`^^<${c.datatype.value}>`)),E.termType===x?_+=` <${E.value}>`:E.termType===d&&(_+=` ${E.value}`),_+=" .\n",_;var O}static serializeQuad(l){return An.serializeQuadComponents(l.subject,l.predicate,l.object,l.graph)}static legacyDatasetToQuads(l){const f=[],c={"blank node":d,IRI:x,literal:e};for(const E in l)l[E].forEach(_=>{const O={};for(const N in _){const A=_[N],y={termType:c[A.type],value:A.value};y.termType===e&&(y.datatype={termType:x},"datatype"in A&&(y.datatype.value=A.datatype),"language"in A?("datatype"in A||(y.datatype.value=M),y.language=A.language):"datatype"in A||(y.datatype.value=o)),O[N]=y}O.graph="@default"===E?{termType:r,value:""}:{termType:E.startsWith("_:")?d:x,value:E},f.push(O)});return f}};const h=/["\\\n\r]/g,a=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],68:[function(q,K,ee){"use strict";K.exports=class{constructor(M){this.current=M.sort(),this.done=!1,this.dir=new Map;for(let o=0;o<M.length;++o)this.dir.set(M[o],!0)}hasNext(){return!this.done}next(){const{current:M,dir:o}=this,x=M.slice();let d=null,e=0;const r=M.length;for(let n=0;n<r;++n){const s=M[n],h=o.get(s);(null===d||s>d)&&(h&&n>0&&s>M[n-1]||!h&&n<r-1&&s>M[n+1])&&(d=s,e=n)}if(null===d)this.done=!0;else{const n=o.get(d)?e-1:e+1;M[e]=M[n],M[n]=d;for(const s of M)s>d&&o.set(s,!o.get(s))}return x}}},{}],69:[function(q,K,ee){(function(M){(function(){"use strict";const o=q("./IdentifierIssuer"),x=q("./MessageDigest"),d=q("./Permuter"),e=q("./NQuads");function r(n,s){return n.hash<s.hash?-1:n.hash>s.hash?1:0}K.exports=class{constructor({createMessageDigest:n=(()=>new x("sha256")),canonicalIdMap:s=new Map,maxDeepIterations:h=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new o("_:c14n",s),this.createMessageDigest=n,this.maxDeepIterations=h,this.quads=null,this.deepIterations=null}async main(n){this.deepIterations=new Map,this.quads=n;for(const c of n)this._addBlankNodeQuadInfo({quad:c,component:c.subject}),this._addBlankNodeQuadInfo({quad:c,component:c.object}),this._addBlankNodeQuadInfo({quad:c,component:c.graph});const s=new Map,h=[...this.blankNodeInfo.keys()];let a=0;for(const c of h)++a%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:c,hashToBlankNodes:s});const v=[...s.keys()].sort(),l=[];for(const c of v){const E=s.get(c);if(E.length>1){l.push(E);continue}const _=E[0];this.canonicalIssuer.getId(_)}for(const c of l){const E=[];for(const _ of c){if(this.canonicalIssuer.hasId(_))continue;const O=new o("_:b");O.getId(_);const N=await this.hashNDegreeQuads(_,O);E.push(N)}E.sort(r);for(const _ of E){const O=_.issuer.getOldIds();for(const N of O)this.canonicalIssuer.getId(N)}}const f=[];for(const c of this.quads){const E=e.serializeQuadComponents(this._componentWithCanonicalId(c.subject),c.predicate,this._componentWithCanonicalId(c.object),this._componentWithCanonicalId(c.graph));f.push(E)}return f.sort(),f.join("")}async hashFirstDegreeQuads(n){const s=[],h=this.blankNodeInfo.get(n),a=h.quads;for(const l of a){const f={subject:null,predicate:l.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(n,l.subject,"subject"),f.object=this.modifyFirstDegreeComponent(n,l.object,"object"),f.graph=this.modifyFirstDegreeComponent(n,l.graph,"graph"),s.push(e.serializeQuad(f))}s.sort();const v=this.createMessageDigest();for(const l of s)v.update(l);return h.hash=await v.digest(),h.hash}async hashRelatedBlankNode(n,s,h,a){let v;v=this.canonicalIssuer.hasId(n)?this.canonicalIssuer.getId(n):h.hasId(n)?h.getId(n):this.blankNodeInfo.get(n).hash;const l=this.createMessageDigest();return l.update(a),"g"!==a&&l.update(this.getRelatedPredicate(s)),l.update(v),l.digest()}async hashNDegreeQuads(n,s){const h=this.deepIterations.get(n)||0;if(h>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(n,h+1);const a=this.createMessageDigest(),v=await this.createHashToRelated(n,s),l=[...v.keys()].sort();for(const f of l){a.update(f);let c,E="";const _=new d(v.get(f));let O=0;for(;_.hasNext();){const N=_.next();++O%3==0&&await this._yield();let A=s.clone(),y="";const F=[];let j=!1;for(const G of N)if(this.canonicalIssuer.hasId(G)?y+=this.canonicalIssuer.getId(G):(A.hasId(G)||F.push(G),y+=A.getId(G)),0!==E.length&&y>E){j=!0;break}if(!j){for(const G of F){const P=await this.hashNDegreeQuads(G,A);if(y+=A.getId(G),y+=`<${P.hash}>`,A=P.issuer,0!==E.length&&y>E){j=!0;break}}j||(0===E.length||y<E)&&(E=y,c=A)}}a.update(E),s=c}return{hash:await a.digest(),issuer:s}}modifyFirstDegreeComponent(n,s){return"BlankNode"!==s.termType?s:{termType:"BlankNode",value:s.value===n?"_:a":"_:z"}}getRelatedPredicate(n){return`<${n.predicate.value}>`}async createHashToRelated(n,s){const h=new Map,a=this.blankNodeInfo.get(n).quads;let v=0;for(const l of a)++v%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:l,component:l.subject,position:"s",id:n,issuer:s,hashToRelated:h}),this._addRelatedBlankNodeHash({quad:l,component:l.object,position:"o",id:n,issuer:s,hashToRelated:h}),this._addRelatedBlankNodeHash({quad:l,component:l.graph,position:"g",id:n,issuer:s,hashToRelated:h})]);return h}async _hashAndTrackBlankNode({id:n,hashToBlankNodes:s}){const h=await this.hashFirstDegreeQuads(n),a=s.get(h);a?a.push(n):s.set(h,[n])}_addBlankNodeQuadInfo({quad:n,component:s}){if("BlankNode"!==s.termType)return;const h=s.value,a=this.blankNodeInfo.get(h);a?a.quads.add(n):this.blankNodeInfo.set(h,{quads:new Set([n]),hash:null})}async _addRelatedBlankNodeHash({quad:n,component:s,position:h,id:a,issuer:v,hashToRelated:l}){if("BlankNode"!==s.termType||s.value===a)return;const f=s.value,c=await this.hashRelatedBlankNode(f,n,v,h),E=l.get(c);E?E.push(f):l.set(c,[f])}_componentWithCanonicalId(n){return"BlankNode"!==n.termType||n.value.startsWith(this.canonicalIssuer.prefix)?n:{termType:"BlankNode",value:this.canonicalIssuer.getId(n.value)}}async _yield(){return new Promise(n=>M(n))}}}).call(this)}).call(this,q("timers").setImmediate)},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68,timers:111}],70:[function(q,K,ee){"use strict";const M=q("./IdentifierIssuer"),o=q("./MessageDigest"),x=q("./Permuter"),d=q("./NQuads");function e(r,n){return r.hash<n.hash?-1:r.hash>n.hash?1:0}K.exports=class{constructor({createMessageDigest:r=(()=>new o("sha256")),canonicalIdMap:n=new Map,maxDeepIterations:s=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new M("_:c14n",n),this.createMessageDigest=r,this.maxDeepIterations=s,this.quads=null,this.deepIterations=null}main(r){this.deepIterations=new Map,this.quads=r;for(const l of r)this._addBlankNodeQuadInfo({quad:l,component:l.subject}),this._addBlankNodeQuadInfo({quad:l,component:l.object}),this._addBlankNodeQuadInfo({quad:l,component:l.graph});const n=new Map,s=[...this.blankNodeInfo.keys()];for(const l of s)this._hashAndTrackBlankNode({id:l,hashToBlankNodes:n});const h=[...n.keys()].sort(),a=[];for(const l of h){const f=n.get(l);if(f.length>1){a.push(f);continue}const c=f[0];this.canonicalIssuer.getId(c)}for(const l of a){const f=[];for(const c of l){if(this.canonicalIssuer.hasId(c))continue;const E=new M("_:b");E.getId(c);const _=this.hashNDegreeQuads(c,E);f.push(_)}f.sort(e);for(const c of f){const E=c.issuer.getOldIds();for(const _ of E)this.canonicalIssuer.getId(_)}}const v=[];for(const l of this.quads){const f=d.serializeQuadComponents(this._componentWithCanonicalId({component:l.subject}),l.predicate,this._componentWithCanonicalId({component:l.object}),this._componentWithCanonicalId({component:l.graph}));v.push(f)}return v.sort(),v.join("")}hashFirstDegreeQuads(r){const n=[],s=this.blankNodeInfo.get(r),h=s.quads;for(const v of h){const l={subject:null,predicate:v.predicate,object:null,graph:null};l.subject=this.modifyFirstDegreeComponent(r,v.subject,"subject"),l.object=this.modifyFirstDegreeComponent(r,v.object,"object"),l.graph=this.modifyFirstDegreeComponent(r,v.graph,"graph"),n.push(d.serializeQuad(l))}n.sort();const a=this.createMessageDigest();for(const v of n)a.update(v);return s.hash=a.digest(),s.hash}hashRelatedBlankNode(r,n,s,h){let a;a=this.canonicalIssuer.hasId(r)?this.canonicalIssuer.getId(r):s.hasId(r)?s.getId(r):this.blankNodeInfo.get(r).hash;const v=this.createMessageDigest();return v.update(h),"g"!==h&&v.update(this.getRelatedPredicate(n)),v.update(a),v.digest()}hashNDegreeQuads(r,n){const s=this.deepIterations.get(r)||0;if(s>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(r,s+1);const h=this.createMessageDigest(),a=this.createHashToRelated(r,n),v=[...a.keys()].sort();for(const l of v){h.update(l);let f,c="";const E=new x(a.get(l));for(;E.hasNext();){const _=E.next();let O=n.clone(),N="";const A=[];let y=!1;for(const F of _)if(this.canonicalIssuer.hasId(F)?N+=this.canonicalIssuer.getId(F):(O.hasId(F)||A.push(F),N+=O.getId(F)),0!==c.length&&N>c){y=!0;break}if(!y){for(const F of A){const j=this.hashNDegreeQuads(F,O);if(N+=O.getId(F),N+=`<${j.hash}>`,O=j.issuer,0!==c.length&&N>c){y=!0;break}}y||(0===c.length||N<c)&&(c=N,f=O)}}h.update(c),n=f}return{hash:h.digest(),issuer:n}}modifyFirstDegreeComponent(r,n){return"BlankNode"!==n.termType?n:{termType:"BlankNode",value:n.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return`<${r.predicate.value}>`}createHashToRelated(r,n){const s=new Map,h=this.blankNodeInfo.get(r).quads;for(const a of h)this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:r,issuer:n,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:r,issuer:n,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:r,issuer:n,hashToRelated:s});return s}_hashAndTrackBlankNode({id:r,hashToBlankNodes:n}){const s=this.hashFirstDegreeQuads(r),h=n.get(s);h?h.push(r):n.set(s,[r])}_addBlankNodeQuadInfo({quad:r,component:n}){if("BlankNode"!==n.termType)return;const s=n.value,h=this.blankNodeInfo.get(s);h?h.quads.add(r):this.blankNodeInfo.set(s,{quads:new Set([r]),hash:null})}_addRelatedBlankNodeHash({quad:r,component:n,position:s,id:h,issuer:a,hashToRelated:v}){if("BlankNode"!==n.termType||n.value===h)return;const l=n.value,f=this.hashRelatedBlankNode(l,r,a,s),c=v.get(f);c?c.push(l):v.set(f,[l])}_componentWithCanonicalId({component:r}){return"BlankNode"!==r.termType||r.value.startsWith(this.canonicalIssuer.prefix)?r:{termType:"BlankNode",value:this.canonicalIssuer.getId(r.value)}}}},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68}],71:[function(q,K,ee){"use strict";const M=q("./MessageDigest"),o=q("./URDNA2015");K.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new M("sha1")}modifyFirstDegreeComponent(x,d,e){return"BlankNode"!==d.termType?d:"graph"===e?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:d.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return x.predicate.value}async createHashToRelated(x,d){const e=new Map,r=this.blankNodeInfo.get(x).quads;let n=0;for(const s of r){let h,a;if("BlankNode"===s.subject.termType&&s.subject.value!==x)a=s.subject.value,h="p";else{if("BlankNode"!==s.object.termType||s.object.value===x)continue;a=s.object.value,h="r"}++n%100==0&&await this._yield();const v=await this.hashRelatedBlankNode(a,s,d,h),l=e.get(v);l?l.push(a):e.set(v,[a])}return e}}},{"./MessageDigest":66,"./URDNA2015":69}],72:[function(q,K,ee){"use strict";const M=q("./MessageDigest"),o=q("./URDNA2015Sync");K.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new M("sha1")}modifyFirstDegreeComponent(x,d,e){return"BlankNode"!==d.termType?d:"graph"===e?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:d.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return x.predicate.value}createHashToRelated(x,d){const e=new Map,r=this.blankNodeInfo.get(x).quads;for(const n of r){let s,h;if("BlankNode"===n.subject.termType&&n.subject.value!==x)h=n.subject.value,s="p";else{if("BlankNode"!==n.object.termType||n.object.value===x)continue;h=n.object.value,s="r"}const a=this.hashRelatedBlankNode(h,n,d,s),v=e.get(a);v?v.push(h):e.set(a,[h])}return e}}},{"./MessageDigest":66,"./URDNA2015Sync":70}],73:[function(q,K,ee){"use strict";const M=q("./URDNA2015"),o=q("./URGNA2012"),x=q("./URDNA2015Sync"),d=q("./URGNA2012Sync");let e;try{e=q("rdf-canonize-native")}catch{}function r(n){return Array.isArray(n)?n:ee.NQuads.legacyDatasetToQuads(n)}ee.NQuads=q("./NQuads"),ee.IdentifierIssuer=q("./IdentifierIssuer"),ee._rdfCanonizeNative=function(n){return n&&(e=n),e},ee.canonize=async function(n,s){const h=r(n);if(s.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((a,v)=>e.canonize(h,s,(l,f)=>l?v(l):a(f)))}if("URDNA2015"===s.algorithm)return new M(s).main(h);if("URGNA2012"===s.algorithm){if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new o(s).main(h)}throw"algorithm"in s?new Error("Invalid RDF Dataset Canonicalization algorithm: "+s.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},ee._canonizeSync=function(n,s){const h=r(n);if(s.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return e.canonizeSync(h,s)}if("URDNA2015"===s.algorithm)return new x(s).main(h);if("URGNA2012"===s.algorithm){if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new d(s).main(h)}throw"algorithm"in s?new Error("Invalid RDF Dataset Canonicalization algorithm: "+s.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":65,"./NQuads":67,"./URDNA2015":69,"./URDNA2015Sync":70,"./URGNA2012":71,"./URGNA2012Sync":72,"rdf-canonize-native":3}],74:[function(q,K,ee){var M=q("buffer"),o=M.Buffer;function x(e,r){for(var n in e)r[n]=e[n]}function d(e,r,n){return o(e,r,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?K.exports=M:(x(M,ee),ee.Buffer=d),d.prototype=Object.create(o.prototype),x(o,d),d.from=function(e,r,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,r,n)},d.alloc=function(e,r,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var s=o(e);return void 0!==r?"string"==typeof n?s.fill(r,n):s.fill(r):s.fill(0),s},d.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},d.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return M.SlowBuffer(e)}},{buffer:5}],75:[function(q,K,ee){(function(M,o){(function(){!function(x,d){"use strict";if(!x.setImmediate){var e,r,n,s,h,a=1,v={},l=!1,f=x.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(x);c=c&&c.setTimeout?c:x,"[object process]"==={}.toString.call(x.process)?e=function(O){M.nextTick(function(){_(O)})}:function(){if(x.postMessage&&!x.importScripts){var O=!0,N=x.onmessage;return x.onmessage=function(){O=!1},x.postMessage("","*"),x.onmessage=N,O}}()?(s="setImmediate$"+Math.random()+"$",h=function(O){O.source===x&&"string"==typeof O.data&&0===O.data.indexOf(s)&&_(+O.data.slice(s.length))},x.addEventListener?x.addEventListener("message",h,!1):x.attachEvent("onmessage",h),e=function(O){x.postMessage(s+O,"*")}):x.MessageChannel?((n=new MessageChannel).port1.onmessage=function(O){_(O.data)},e=function(O){n.port2.postMessage(O)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,e=function(O){var N=f.createElement("script");N.onreadystatechange=function(){_(O),N.onreadystatechange=null,r.removeChild(N),N=null},r.appendChild(N)}):e=function(O){setTimeout(_,0,O)},c.setImmediate=function(O){"function"!=typeof O&&(O=new Function(""+O));for(var N=new Array(arguments.length-1),A=0;A<N.length;A++)N[A]=arguments[A+1];var y={callback:O,args:N};return v[a]=y,e(a),a++},c.clearImmediate=E}function E(O){delete v[O]}function _(O){if(l)setTimeout(_,0,O);else{var N=v[O];if(N){l=!0;try{!function(A){var y=A.callback,F=A.args;switch(F.length){case 0:y();break;case 1:y(F[0]);break;case 2:y(F[0],F[1]);break;case 3:y(F[0],F[1],F[2]);break;default:y.apply(void 0,F)}}(N)}finally{E(O),l=!1}}}}}(typeof self>"u"?void 0===o?this:o:self)}).call(this)}).call(this,q("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:59}],76:[function(q,K,ee){K.exports=o;var M=q("events").EventEmitter;function o(){M.call(this)}q("inherits")(o,M),o.Readable=q("readable-stream/lib/_stream_readable.js"),o.Writable=q("readable-stream/lib/_stream_writable.js"),o.Duplex=q("readable-stream/lib/_stream_duplex.js"),o.Transform=q("readable-stream/lib/_stream_transform.js"),o.PassThrough=q("readable-stream/lib/_stream_passthrough.js"),o.finished=q("readable-stream/lib/internal/streams/end-of-stream.js"),o.pipeline=q("readable-stream/lib/internal/streams/pipeline.js"),o.Stream=o,o.prototype.pipe=function(x,d){var e=this;function r(f){x.writable&&!1===x.write(f)&&e.pause&&e.pause()}function n(){e.readable&&e.resume&&e.resume()}e.on("data",r),x.on("drain",n),x._isStdio||d&&!1===d.end||(e.on("end",h),e.on("close",a));var s=!1;function h(){s||(s=!0,x.end())}function a(){s||(s=!0,"function"==typeof x.destroy&&x.destroy())}function v(f){if(l(),0===M.listenerCount(this,"error"))throw f}function l(){e.removeListener("data",r),x.removeListener("drain",n),e.removeListener("end",h),e.removeListener("close",a),e.removeListener("error",v),x.removeListener("error",v),e.removeListener("end",l),e.removeListener("close",l),x.removeListener("close",l)}return e.on("error",v),x.on("error",v),e.on("end",l),e.on("close",l),x.on("close",l),x.emit("pipe",e),x}},{events:11,inherits:22,"readable-stream/lib/_stream_duplex.js":78,"readable-stream/lib/_stream_passthrough.js":79,"readable-stream/lib/_stream_readable.js":80,"readable-stream/lib/_stream_transform.js":81,"readable-stream/lib/_stream_writable.js":82,"readable-stream/lib/internal/streams/end-of-stream.js":86,"readable-stream/lib/internal/streams/pipeline.js":88}],77:[function(q,K,ee){"use strict";var M={};function o(d,e,r){r||(r=Error);var n=function(s){var h,a;function v(l,f,c){return s.call(this,(E=l,_=f,O=c,"string"==typeof e?e:e(E,_,O)))||this;var E,_,O}return a=s,(h=v).prototype=Object.create(a.prototype),h.prototype.constructor=h,h.__proto__=a,v}(r);n.prototype.name=r.name,n.prototype.code=d,M[d]=n}function x(d,e){if(Array.isArray(d)){var r=d.length;return d=d.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(d.slice(0,r-1).join(", "),", or ")+d[r-1]:2===r?"one of ".concat(e," ").concat(d[0]," or ").concat(d[1]):"of ".concat(e," ").concat(d[0])}return"of ".concat(e," ").concat(String(d))}o("ERR_INVALID_OPT_VALUE",function(d,e){return'The value "'+e+'" is invalid for option "'+d+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(d,e,r){var n,s,a,l,f,c;if("string"==typeof e&&(s="not ",e.substr(0,4)===s)?(n="must not be",e=e.replace(/^not /,"")):n="must be",l=d,f=" argument",(void 0===c||c>l.length)&&(c=l.length),l.substring(c-9,c)===f)a="The ".concat(d," ").concat(n," ").concat(x(e,"type"));else{var v=function(l,f,c){return"number"!=typeof c&&(c=0),!(c+1>l.length)&&-1!==l.indexOf(".",c)}(d)?"property":"argument";a='The "'.concat(d,'" ').concat(v," ").concat(n," ").concat(x(e,"type"))}return a+". Received type ".concat(typeof r)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),K.exports.codes=M},{}],78:[function(q,K,ee){(function(M){(function(){"use strict";var o=Object.keys||function(v){var l=[];for(var f in v)l.push(f);return l};K.exports=s;var x=q("./_stream_readable"),d=q("./_stream_writable");q("inherits")(s,x);for(var e=o(d.prototype),r=0;r<e.length;r++){var n=e[r];s.prototype[n]||(s.prototype[n]=d.prototype[n])}function s(v){if(!(this instanceof s))return new s(v);x.call(this,v),d.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||M.nextTick(a,this)}function a(v){v.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,q("_process"))},{"./_stream_readable":80,"./_stream_writable":82,_process:59,inherits:22}],79:[function(q,K,ee){"use strict";K.exports=o;var M=q("./_stream_transform");function o(x){if(!(this instanceof o))return new o(x);M.call(this,x)}q("inherits")(o,M),o.prototype._transform=function(x,d,e){e(null,x)}},{"./_stream_transform":81,inherits:22}],80:[function(q,K,ee){(function(M,o){(function(){"use strict";var x;K.exports=P,P.ReadableState=G,q("events").EventEmitter;var s,d=function(oe,k){return oe.listeners(k).length},e=q("./internal/streams/stream"),r=q("buffer").Buffer,n=o.Uint8Array||function(){},h=q("util");s=h&&h.debuglog?h.debuglog("stream"):function(){};var a,v,l,f=q("./internal/streams/buffer_list"),c=q("./internal/streams/destroy"),E=q("./internal/streams/state").getHighWaterMark,_=q("../errors").codes,O=_.ERR_INVALID_ARG_TYPE,N=_.ERR_STREAM_PUSH_AFTER_EOF,A=_.ERR_METHOD_NOT_IMPLEMENTED,y=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;q("inherits")(P,e);var F=c.errorOrDestroy,j=["error","close","destroy","pause","resume"];function G(oe,k,Q){x=x||q("./_stream_duplex"),oe=oe||{},"boolean"!=typeof Q&&(Q=k instanceof x),this.objectMode=!!oe.objectMode,Q&&(this.objectMode=this.objectMode||!!oe.readableObjectMode),this.highWaterMark=E(this,oe,"readableHighWaterMark",Q),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==oe.emitClose,this.autoDestroy=!!oe.autoDestroy,this.destroyed=!1,this.defaultEncoding=oe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,oe.encoding&&(a||(a=q("string_decoder/").StringDecoder),this.decoder=new a(oe.encoding),this.encoding=oe.encoding)}function P(oe){if(x=x||q("./_stream_duplex"),!(this instanceof P))return new P(oe);var k=this instanceof x;this._readableState=new G(oe,this,k),this.readable=!0,oe&&("function"==typeof oe.read&&(this._read=oe.read),"function"==typeof oe.destroy&&(this._destroy=oe.destroy)),e.call(this)}function z(oe,k,Q,X,se){s("readableAddChunk",k);var pe,Pe,Qe,Ue,We,ve=oe._readableState;if(null===k)ve.reading=!1,function(Pe,Qe){if(s("onEofChunk"),!Qe.ended){if(Qe.decoder){var Ue=Qe.decoder.end();Ue&&Ue.length&&(Qe.buffer.push(Ue),Qe.length+=Qe.objectMode?1:Ue.length)}Qe.ended=!0,Qe.sync?fe(Pe):(Qe.needReadable=!1,Qe.emittedReadable||(Qe.emittedReadable=!0,re(Pe)))}}(oe,ve);else if(se||(Pe=ve,We=Qe=k,r.isBuffer(We)||We instanceof n||"string"==typeof Qe||void 0===Qe||Pe.objectMode||(Ue=new O("chunk",["string","Buffer","Uint8Array"],Qe)),pe=Ue),pe)F(oe,pe);else if(ve.objectMode||k&&k.length>0)if("string"==typeof k||ve.objectMode||Object.getPrototypeOf(k)===r.prototype||(k=function(Pe){return r.from(Pe)}(k)),X)ve.endEmitted?F(oe,new y):Y(oe,ve,k,!0);else if(ve.ended)F(oe,new N);else{if(ve.destroyed)return!1;ve.reading=!1,ve.decoder&&!Q?(k=ve.decoder.write(k),ve.objectMode||0!==k.length?Y(oe,ve,k,!1):V(oe,ve)):Y(oe,ve,k,!1)}else X||(ve.reading=!1,V(oe,ve));return!ve.ended&&(ve.length<ve.highWaterMark||0===ve.length)}function Y(oe,k,Q,X){k.flowing&&0===k.length&&!k.sync?(k.awaitDrain=0,oe.emit("data",Q)):(k.length+=k.objectMode?1:Q.length,X?k.buffer.unshift(Q):k.buffer.push(Q),k.needReadable&&fe(oe)),V(oe,k)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(oe){this._readableState&&(this._readableState.destroyed=oe)}}),P.prototype.destroy=c.destroy,P.prototype._undestroy=c.undestroy,P.prototype._destroy=function(oe,k){k(oe)},P.prototype.push=function(oe,k){var Q,X=this._readableState;return X.objectMode?Q=!0:"string"==typeof oe&&((k=k||X.defaultEncoding)!==X.encoding&&(oe=r.from(oe,k),k=""),Q=!0),z(this,oe,k,!1,Q)},P.prototype.unshift=function(oe){return z(this,oe,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(oe){a||(a=q("string_decoder/").StringDecoder);var k=new a(oe);this._readableState.decoder=k,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,X="";null!==Q;)X+=k.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),""!==X&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var ie=1073741824;function ye(oe,k){return oe<=0||0===k.length&&k.ended?0:k.objectMode?1:oe!=oe?k.flowing&&k.length?k.buffer.head.data.length:k.length:(oe>k.highWaterMark&&(k.highWaterMark=((Q=oe)>=ie?Q=ie:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q)),oe<=k.length?oe:k.ended?k.length:(k.needReadable=!0,0));var Q}function fe(oe){var k=oe._readableState;s("emitReadable",k.needReadable,k.emittedReadable),k.needReadable=!1,k.emittedReadable||(s("emitReadable",k.flowing),k.emittedReadable=!0,M.nextTick(re,oe))}function re(oe){var k=oe._readableState;s("emitReadable_",k.destroyed,k.length,k.ended),k.destroyed||!k.length&&!k.ended||(oe.emit("readable"),k.emittedReadable=!1),k.needReadable=!k.flowing&&!k.ended&&k.length<=k.highWaterMark,ge(oe)}function V(oe,k){k.readingMore||(k.readingMore=!0,M.nextTick($,oe,k))}function $(oe,k){for(;!k.reading&&!k.ended&&(k.length<k.highWaterMark||k.flowing&&0===k.length);){var Q=k.length;if(s("maybeReadMore read 0"),oe.read(0),Q===k.length)break}k.readingMore=!1}function ne(oe){var k=oe._readableState;k.readableListening=oe.listenerCount("readable")>0,k.resumeScheduled&&!k.paused?k.flowing=!0:oe.listenerCount("data")>0&&oe.resume()}function he(oe){s("readable nexttick read 0"),oe.read(0)}function xe(oe,k){s("resume",k.reading),k.reading||oe.read(0),k.resumeScheduled=!1,oe.emit("resume"),ge(oe),k.flowing&&!k.reading&&oe.read(0)}function ge(oe){var k=oe._readableState;for(s("flow",k.flowing);k.flowing&&null!==oe.read(););}function ce(oe,k){return 0===k.length?null:(k.objectMode?Q=k.buffer.shift():!oe||oe>=k.length?(Q=k.decoder?k.buffer.join(""):1===k.buffer.length?k.buffer.first():k.buffer.concat(k.length),k.buffer.clear()):Q=k.buffer.consume(oe,k.decoder),Q);var Q}function ke(oe){var k=oe._readableState;s("endReadable",k.endEmitted),k.endEmitted||(k.ended=!0,M.nextTick(Ne,k,oe))}function Ne(oe,k){if(s("endReadableNT",oe.endEmitted,oe.length),!oe.endEmitted&&0===oe.length&&(oe.endEmitted=!0,k.readable=!1,k.emit("end"),oe.autoDestroy)){var Q=k._writableState;(!Q||Q.autoDestroy&&Q.finished)&&k.destroy()}}function Me(oe,k){for(var Q=0,X=oe.length;Q<X;Q++)if(oe[Q]===k)return Q;return-1}P.prototype.read=function(oe){s("read",oe),oe=parseInt(oe,10);var k=this._readableState,Q=oe;if(0!==oe&&(k.emittedReadable=!1),0===oe&&k.needReadable&&((0!==k.highWaterMark?k.length>=k.highWaterMark:k.length>0)||k.ended))return s("read: emitReadable",k.length,k.ended),0===k.length&&k.ended?ke(this):fe(this),null;if(0===(oe=ye(oe,k))&&k.ended)return 0===k.length&&ke(this),null;var X,se=k.needReadable;return s("need readable",se),(0===k.length||k.length-oe<k.highWaterMark)&&s("length less than watermark",se=!0),k.ended||k.reading?s("reading or ended",se=!1):se&&(s("do read"),k.reading=!0,k.sync=!0,0===k.length&&(k.needReadable=!0),this._read(k.highWaterMark),k.sync=!1,k.reading||(oe=ye(Q,k))),null===(X=oe>0?ce(oe,k):null)?(k.needReadable=k.length<=k.highWaterMark,oe=0):(k.length-=oe,k.awaitDrain=0),0===k.length&&(k.ended||(k.needReadable=!0),Q!==oe&&k.ended&&ke(this)),null!==X&&this.emit("data",X),X},P.prototype._read=function(oe){F(this,new A("_read()"))},P.prototype.pipe=function(oe,k){var Q=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=oe;break;case 1:X.pipes=[X.pipes,oe];break;default:X.pipes.push(oe)}X.pipesCount+=1,s("pipe count=%d opts=%j",X.pipesCount,k);var se=k&&!1===k.end||oe===M.stdout||oe===M.stderr?me:ve;function ve(){s("onend"),oe.end()}X.endEmitted?M.nextTick(se):Q.once("end",se),oe.on("unpipe",function pe(Ee,Ce){s("onunpipe"),Ee===Q&&Ce&&!1===Ce.hasUnpiped&&(Ce.hasUnpiped=!0,s("cleanup"),oe.removeListener("close",Ke),oe.removeListener("finish",ot),oe.removeListener("drain",Pe),oe.removeListener("error",We),oe.removeListener("unpipe",pe),Q.removeListener("end",ve),Q.removeListener("end",me),Q.removeListener("data",Ue),Qe=!0,!X.awaitDrain||oe._writableState&&!oe._writableState.needDrain||Pe())});var Pe=function(Ee){return function(){var Ce=Ee._readableState;s("pipeOnDrain",Ce.awaitDrain),Ce.awaitDrain&&Ce.awaitDrain--,0===Ce.awaitDrain&&d(Ee,"data")&&(Ce.flowing=!0,ge(Ee))}}(Q);oe.on("drain",Pe);var Qe=!1;function Ue(Ee){s("ondata");var Ce=oe.write(Ee);s("dest.write",Ce),!1===Ce&&((1===X.pipesCount&&X.pipes===oe||X.pipesCount>1&&-1!==Me(X.pipes,oe))&&!Qe&&(s("false write response, pause",X.awaitDrain),X.awaitDrain++),Q.pause())}function We(Ee){s("onerror",Ee),me(),oe.removeListener("error",We),0===d(oe,"error")&&F(oe,Ee)}function Ke(){oe.removeListener("finish",ot),me()}function ot(){s("onfinish"),oe.removeListener("close",Ke),me()}function me(){s("unpipe"),Q.unpipe(oe)}return Q.on("data",Ue),function(Ee,Ce,H){if("function"==typeof Ee.prependListener)return Ee.prependListener(Ce,H);Ee._events&&Ee._events[Ce]?Array.isArray(Ee._events[Ce])?Ee._events[Ce].unshift(H):Ee._events[Ce]=[H,Ee._events[Ce]]:Ee.on(Ce,H)}(oe,"error",We),oe.once("close",Ke),oe.once("finish",ot),oe.emit("pipe",Q),X.flowing||(s("pipe resume"),Q.resume()),oe},P.prototype.unpipe=function(oe){var k=this._readableState,Q={hasUnpiped:!1};if(0===k.pipesCount)return this;if(1===k.pipesCount)return oe&&oe!==k.pipes||(oe||(oe=k.pipes),k.pipes=null,k.pipesCount=0,k.flowing=!1,oe&&oe.emit("unpipe",this,Q)),this;if(!oe){var X=k.pipes,se=k.pipesCount;k.pipes=null,k.pipesCount=0,k.flowing=!1;for(var pe=0;pe<se;pe++)X[pe].emit("unpipe",this,{hasUnpiped:!1});return this}var ve=Me(k.pipes,oe);return-1===ve||(k.pipes.splice(ve,1),k.pipesCount-=1,1===k.pipesCount&&(k.pipes=k.pipes[0]),oe.emit("unpipe",this,Q)),this},P.prototype.on=function(oe,k){var Q=e.prototype.on.call(this,oe,k),X=this._readableState;return"data"===oe?(X.readableListening=this.listenerCount("readable")>0,!1!==X.flowing&&this.resume()):"readable"===oe&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,s("on readable",X.length,X.reading),X.length?fe(this):X.reading||M.nextTick(he,this))),Q},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(oe,k){var Q=e.prototype.removeListener.call(this,oe,k);return"readable"===oe&&M.nextTick(ne,this),Q},P.prototype.removeAllListeners=function(oe){var k=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==oe&&void 0!==oe||M.nextTick(ne,this),k},P.prototype.resume=function(){var k,Q,oe=this._readableState;return oe.flowing||(s("resume"),oe.flowing=!oe.readableListening,k=this,(Q=oe).resumeScheduled||(Q.resumeScheduled=!0,M.nextTick(xe,k,Q))),oe.paused=!1,this},P.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(oe){var k=this,Q=this._readableState,X=!1;for(var se in oe.on("end",function(){if(s("wrapped end"),Q.decoder&&!Q.ended){var ve=Q.decoder.end();ve&&ve.length&&k.push(ve)}k.push(null)}),oe.on("data",function(ve){s("wrapped data"),Q.decoder&&(ve=Q.decoder.write(ve)),Q.objectMode&&null==ve||(Q.objectMode||ve&&ve.length)&&(k.push(ve)||(X=!0,oe.pause()))}),oe)void 0===this[se]&&"function"==typeof oe[se]&&(this[se]=function(ve){return function(){return oe[ve].apply(oe,arguments)}}(se));for(var pe=0;pe<j.length;pe++)oe.on(j[pe],this.emit.bind(this,j[pe]));return this._read=function(ve){s("wrapped _read",ve),X&&(X=!1,oe.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=q("./internal/streams/async_iterator")),v(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(oe){this._readableState&&(this._readableState.flowing=oe)}}),P._fromList=ce,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(oe,k){return void 0===l&&(l=q("./internal/streams/from")),l(P,oe,k)})}).call(this)}).call(this,q("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/async_iterator":83,"./internal/streams/buffer_list":84,"./internal/streams/destroy":85,"./internal/streams/from":87,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,events:11,inherits:22,"string_decoder/":110,util:3}],81:[function(q,K,ee){"use strict";K.exports=s;var M=q("../errors").codes,o=M.ERR_METHOD_NOT_IMPLEMENTED,x=M.ERR_MULTIPLE_CALLBACK,d=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=M.ERR_TRANSFORM_WITH_LENGTH_0,r=q("./_stream_duplex");function n(v,l){var f=this._transformState;f.transforming=!1;var c=f.writecb;if(null===c)return this.emit("error",new x);f.writechunk=null,f.writecb=null,null!=l&&this.push(l),c(v);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function s(v){if(!(this instanceof s))return new s(v);r.call(this,v),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",h)}function h(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?a(this,null,null):this._flush(function(l,f){a(v,l,f)})}function a(v,l,f){if(l)return v.emit("error",l);if(null!=f&&v.push(f),v._writableState.length)throw new e;if(v._transformState.transforming)throw new d;return v.push(null)}q("inherits")(s,r),s.prototype.push=function(v,l){return this._transformState.needTransform=!1,r.prototype.push.call(this,v,l)},s.prototype._transform=function(v,l,f){f(new o("_transform()"))},s.prototype._write=function(v,l,f){var c=this._transformState;if(c.writecb=f,c.writechunk=v,c.writeencoding=l,!c.transforming){var E=this._readableState;(c.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},s.prototype._read=function(v){var l=this._transformState;null===l.writechunk||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))},s.prototype._destroy=function(v,l){r.prototype._destroy.call(this,v,function(f){l(f)})}},{"../errors":77,"./_stream_duplex":78,inherits:22}],82:[function(q,K,ee){(function(M,o){(function(){"use strict";function x(V){var $=this;this.next=null,this.entry=null,this.finish=function(){!function(ne,he,xe){var ge=ne.entry;for(ne.entry=null;ge;){var ce=ge.callback;he.pendingcb--,ce(undefined),ge=ge.next}he.corkedRequestsFree.next=ne}($,V)}}var d;K.exports=P,P.WritableState=G;var h,e={deprecate:q("util-deprecate")},r=q("./internal/streams/stream"),n=q("buffer").Buffer,s=o.Uint8Array||function(){},a=q("./internal/streams/destroy"),v=q("./internal/streams/state").getHighWaterMark,l=q("../errors").codes,f=l.ERR_INVALID_ARG_TYPE,c=l.ERR_METHOD_NOT_IMPLEMENTED,E=l.ERR_MULTIPLE_CALLBACK,_=l.ERR_STREAM_CANNOT_PIPE,O=l.ERR_STREAM_DESTROYED,N=l.ERR_STREAM_NULL_VALUES,A=l.ERR_STREAM_WRITE_AFTER_END,y=l.ERR_UNKNOWN_ENCODING,F=a.errorOrDestroy;function j(){}function G(V,$,ne){d=d||q("./_stream_duplex"),V=V||{},"boolean"!=typeof ne&&(ne=$ instanceof d),this.objectMode=!!V.objectMode,ne&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=v(this,V,"writableHighWaterMark",ne),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var he=!1===V.decodeStrings;this.decodeStrings=!he,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(xe){!function(ge,ce){var k,ke=ge._writableState,Ne=ke.sync,Me=ke.writecb;if("function"!=typeof Me)throw new E;if((k=ke).writing=!1,k.writecb=null,k.length-=k.writelen,k.writelen=0,ce)!function(k,Q,X,se,pe){--Q.pendingcb,X?(M.nextTick(pe,se),M.nextTick(re,k,Q),k._writableState.errorEmitted=!0,F(k,se)):(pe(se),k._writableState.errorEmitted=!0,F(k,se),re(k,Q))}(ge,ke,Ne,ce,Me);else{var oe=ye(ke)||ge.destroyed;oe||ke.corked||ke.bufferProcessing||!ke.bufferedRequest||ie(ge,ke),Ne?M.nextTick(Y,ge,ke,oe,Me):Y(ge,ke,oe,Me)}}($,xe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==V.emitClose,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function P(V){var $=this instanceof(d=d||q("./_stream_duplex"));if(!$&&!h.call(P,this))return new P(V);this._writableState=new G(V,this,$),this.writable=!0,V&&("function"==typeof V.write&&(this._write=V.write),"function"==typeof V.writev&&(this._writev=V.writev),"function"==typeof V.destroy&&(this._destroy=V.destroy),"function"==typeof V.final&&(this._final=V.final)),r.call(this)}function z(V,$,ne,he,xe,ge,ce){$.writelen=he,$.writecb=ce,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new O("write")):ne?V._writev(xe,$.onwrite):V._write(xe,ge,$.onwrite),$.sync=!1}function Y(V,$,ne,he){var xe,ge;ne||(xe=V,0===(ge=$).length&&ge.needDrain&&(ge.needDrain=!1,xe.emit("drain"))),$.pendingcb--,he(),re(V,$)}function ie(V,$){$.bufferProcessing=!0;var ne=$.bufferedRequest;if(V._writev&&ne&&ne.next){var he=$.bufferedRequestCount,xe=new Array(he),ge=$.corkedRequestsFree;ge.entry=ne;for(var ce=0,ke=!0;ne;)xe[ce]=ne,ne.isBuf||(ke=!1),ne=ne.next,ce+=1;xe.allBuffers=ke,z(V,$,!0,$.length,xe,"",ge.finish),$.pendingcb++,$.lastBufferedRequest=null,ge.next?($.corkedRequestsFree=ge.next,ge.next=null):$.corkedRequestsFree=new x($),$.bufferedRequestCount=0}else{for(;ne;){var Ne=ne.chunk,Me=ne.encoding,oe=ne.callback;if(z(V,$,!1,$.objectMode?1:Ne.length,Ne,Me,oe),ne=ne.next,$.bufferedRequestCount--,$.writing)break}null===ne&&($.lastBufferedRequest=null)}$.bufferedRequest=ne,$.bufferProcessing=!1}function ye(V){return V.ending&&0===V.length&&null===V.bufferedRequest&&!V.finished&&!V.writing}function fe(V,$){V._final(function(ne){$.pendingcb--,ne&&F(V,ne),$.prefinished=!0,V.emit("prefinish"),re(V,$)})}function re(V,$){var xe,ge,ne=ye($);if(ne&&(xe=V,(ge=$).prefinished||ge.finalCalled||("function"!=typeof xe._final||ge.destroyed?(ge.prefinished=!0,xe.emit("prefinish")):(ge.pendingcb++,ge.finalCalled=!0,M.nextTick(fe,xe,ge))),0===$.pendingcb&&($.finished=!0,V.emit("finish"),$.autoDestroy))){var he=V._readableState;(!he||he.autoDestroy&&he.endEmitted)&&V.destroy()}return ne}q("inherits")(P,r),G.prototype.getBuffer=function(){for(var V=this.bufferedRequest,$=[];V;)$.push(V),V=V.next;return $},function(){try{Object.defineProperty(G.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(V){return!!h.call(this,V)||this===P&&V&&V._writableState instanceof G}})):h=function(V){return V instanceof this},P.prototype.pipe=function(){F(this,new _)},P.prototype.write=function(V,$,ne){var he,ke,xe=this._writableState,ge=!1,ce=!xe.objectMode&&(he=V,n.isBuffer(he)||he instanceof s);return ce&&!n.isBuffer(V)&&(ke=V,V=n.from(ke)),"function"==typeof $&&(ne=$,$=null),ce?$="buffer":$||($=xe.defaultEncoding),"function"!=typeof ne&&(ne=j),xe.ending?function(ke,Ne){var Me=new A;F(ke,Me),M.nextTick(Ne,Me)}(this,ne):(ce||function(ke,Ne,Me,oe){var k;return null===Me?k=new N:"string"==typeof Me||Ne.objectMode||(k=new f("chunk",["string","Buffer"],Me)),!k||(F(ke,k),M.nextTick(oe,k),!1)}(this,xe,V,ne))&&(xe.pendingcb++,ge=function(ke,Ne,Me,oe,k,Q){if(!Me){var X=(Qe=oe,Ue=k,(Pe=Ne).objectMode||!1===Pe.decodeStrings||"string"!=typeof Qe||(Qe=n.from(Qe,Ue)),Qe);oe!==X&&(Me=!0,k="buffer",oe=X)}var Pe,Qe,Ue,se=Ne.objectMode?1:oe.length;Ne.length+=se;var pe=Ne.length<Ne.highWaterMark;if(pe||(Ne.needDrain=!0),Ne.writing||Ne.corked){var ve=Ne.lastBufferedRequest;Ne.lastBufferedRequest={chunk:oe,encoding:k,isBuf:Me,callback:Q,next:null},ve?ve.next=Ne.lastBufferedRequest:Ne.bufferedRequest=Ne.lastBufferedRequest,Ne.bufferedRequestCount+=1}else z(ke,Ne,!1,se,oe,k,Q);return pe}(this,xe,ce,V,$,ne)),ge},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,V.writing||V.corked||V.bufferProcessing||!V.bufferedRequest||ie(this,V))},P.prototype.setDefaultEncoding=function(V){if("string"==typeof V&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new y(V);return this._writableState.defaultEncoding=V,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(V,$,ne){ne(new c("_write()"))},P.prototype._writev=null,P.prototype.end=function(V,$,ne){var xe,ge,ce,he=this._writableState;return"function"==typeof V?(ne=V,V=null,$=null):"function"==typeof $&&(ne=$,$=null),null!=V&&this.write(V,$),he.corked&&(he.corked=1,this.uncork()),he.ending||(xe=this,ce=ne,(ge=he).ending=!0,re(xe,ge),ce&&(ge.finished?M.nextTick(ce):xe.once("finish",ce)),ge.ended=!0,xe.writable=!1),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(V){this._writableState&&(this._writableState.destroyed=V)}}),P.prototype.destroy=a.destroy,P.prototype._undestroy=a.undestroy,P.prototype._destroy=function(V,$){$(V)}}).call(this)}).call(this,q("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/destroy":85,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,inherits:22,"util-deprecate":114}],83:[function(q,K,ee){(function(M){(function(){"use strict";var o;function x(O,N,A){return N in O?Object.defineProperty(O,N,{value:A,enumerable:!0,configurable:!0,writable:!0}):O[N]=A,O}var d=q("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),n=Symbol("error"),s=Symbol("ended"),h=Symbol("lastPromise"),a=Symbol("handlePromise"),v=Symbol("stream");function l(O,N){return{value:O,done:N}}function f(O){var N=O[e];if(null!==N){var A=O[v].read();null!==A&&(O[h]=null,O[e]=null,O[r]=null,N(l(A,!1)))}}function c(O){M.nextTick(f,O)}var E=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((x(o={get stream(){return this[v]},next:function(){var O=this,N=this[n];if(null!==N)return Promise.reject(N);if(this[s])return Promise.resolve(l(void 0,!0));if(this[v].destroyed)return new Promise(function(j,G){M.nextTick(function(){O[n]?G(O[n]):j(l(void 0,!0))})});var A,y=this[h];if(y)A=new Promise(function(j,G){return function(P,z){j.then(function(){G[s]?P(l(void 0,!0)):G[a](P,z)},z)}}(y,this));else{var F=this[v].read();if(null!==F)return Promise.resolve(l(F,!1));A=new Promise(this[a])}return this[h]=A,A}},Symbol.asyncIterator,function(){return this}),x(o,"return",function(){var O=this;return new Promise(function(N,A){O[v].destroy(null,function(y){y?A(y):N(l(void 0,!0))})})}),o),E);K.exports=function(O){var N,A=Object.create(_,(x(N={},v,{value:O,writable:!0}),x(N,e,{value:null,writable:!0}),x(N,r,{value:null,writable:!0}),x(N,n,{value:null,writable:!0}),x(N,s,{value:O._readableState.endEmitted,writable:!0}),x(N,a,{value:function(y,F){var j=A[v].read();j?(A[h]=null,A[e]=null,A[r]=null,y(l(j,!1))):(A[e]=y,A[r]=F)},writable:!0}),N));return A[h]=null,d(O,function(y){if(y&&"ERR_STREAM_PREMATURE_CLOSE"!==y.code){var F=A[r];return null!==F&&(A[h]=null,A[e]=null,A[r]=null,F(y)),void(A[n]=y)}var j=A[e];null!==j&&(A[h]=null,A[e]=null,A[r]=null,j(l(void 0,!0))),A[s]=!0}),O.on("readable",c.bind(null,A)),A}}).call(this)}).call(this,q("_process"))},{"./end-of-stream":86,_process:59}],84:[function(q,K,ee){"use strict";function M(n,s){var h=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);s&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),h.push.apply(h,a)}return h}function o(n,s,h){return s in n?Object.defineProperty(n,s,{value:h,enumerable:!0,configurable:!0,writable:!0}):n[s]=h,n}function x(n,s){for(var h=0;h<s.length;h++){var a=s[h];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}var d=q("buffer").Buffer,e=q("util").inspect,r=e&&e.custom||"inspect";K.exports=function(){function n(){(function(v,l){if(!(v instanceof l))throw new TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}var s,h;return s=n,h=[{key:"push",value:function(v){var l={data:v,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(v){var l={data:v,next:this.head};0===this.length&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(0!==this.length){var v=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(0===this.length)return"";for(var l=this.head,f=""+l.data;l=l.next;)f+=v+l.data;return f}},{key:"concat",value:function(v){if(0===this.length)return d.alloc(0);for(var l,f,c,E=d.allocUnsafe(v>>>0),_=this.head,O=0;_;)l=_.data,f=E,c=O,d.prototype.copy.call(l,f,c),O+=_.data.length,_=_.next;return E}},{key:"consume",value:function(v,l){var f;return v<this.head.data.length?(f=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):f=v===this.head.data.length?this.shift():l?this._getString(v):this._getBuffer(v),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var l=this.head,f=1,c=l.data;for(v-=c.length;l=l.next;){var E=l.data,_=v>E.length?E.length:v;if(_===E.length?c+=E:c+=E.slice(0,v),0==(v-=_)){_===E.length?(++f,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=E.slice(_));break}++f}return this.length-=f,c}},{key:"_getBuffer",value:function(v){var l=d.allocUnsafe(v),f=this.head,c=1;for(f.data.copy(l),v-=f.data.length;f=f.next;){var E=f.data,_=v>E.length?E.length:v;if(E.copy(l,l.length-v,0,_),0==(v-=_)){_===E.length?(++c,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=E.slice(_));break}++c}return this.length-=c,l}},{key:r,value:function(v,l){return e(this,function(f){for(var c=1;c<arguments.length;c++){var E=null!=arguments[c]?arguments[c]:{};c%2?M(Object(E),!0).forEach(function(_){o(f,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(E)):M(Object(E)).forEach(function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(E,_))})}return f}({},l,{depth:0,customInspect:!1}))}}],h&&x(s.prototype,h),n}()},{buffer:5,util:3}],85:[function(q,K,ee){(function(M){(function(){"use strict";function o(e,r){d(e,r),x(e)}function x(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function d(e,r){e.emit("error",r)}K.exports={destroy:function(e,r){var n=this,s=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return s||h?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(d,this,e)):M.nextTick(d,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!r&&a?n._writableState?n._writableState.errorEmitted?M.nextTick(x,n):(n._writableState.errorEmitted=!0,M.nextTick(o,n,a)):M.nextTick(o,n,a):r?(M.nextTick(x,n),r(a)):M.nextTick(x,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var n=e._readableState,s=e._writableState;n&&n.autoDestroy||s&&s.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,q("_process"))},{_process:59}],86:[function(q,K,ee){"use strict";var M=q("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}K.exports=function x(d,e,r){if("function"==typeof e)return x(d,null,e);e||(e={}),r=function(O){var N=!1;return function(){if(!N){N=!0;for(var A=arguments.length,y=new Array(A),F=0;F<A;F++)y[F]=arguments[F];O.apply(this,y)}}}(r||o);var O,n=e.readable||!1!==e.readable&&d.readable,s=e.writable||!1!==e.writable&&d.writable,h=function(){d.writable||v()},a=d._writableState&&d._writableState.finished,v=function(){s=!1,a=!0,n||r.call(d)},l=d._readableState&&d._readableState.endEmitted,f=function(){n=!1,l=!0,s||r.call(d)},c=function(O){r.call(d,O)},E=function(){var O;return n&&!l?(d._readableState&&d._readableState.ended||(O=new M),r.call(d,O)):s&&!a?(d._writableState&&d._writableState.ended||(O=new M),r.call(d,O)):void 0},_=function(){d.req.on("finish",v)};return(O=d).setHeader&&"function"==typeof O.abort?(d.on("complete",v),d.on("abort",E),d.req?_():d.on("request",_)):s&&!d._writableState&&(d.on("end",h),d.on("close",h)),d.on("end",f),d.on("finish",v),!1!==e.error&&d.on("error",c),d.on("close",E),function(){d.removeListener("complete",v),d.removeListener("abort",E),d.removeListener("request",_),d.req&&d.req.removeListener("finish",v),d.removeListener("end",h),d.removeListener("close",h),d.removeListener("finish",v),d.removeListener("end",f),d.removeListener("error",c),d.removeListener("close",E)}}},{"../../../errors":77}],87:[function(q,K,ee){K.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],88:[function(q,K,ee){"use strict";var M,o=q("../../../errors").codes,x=o.ERR_MISSING_ARGS,d=o.ERR_STREAM_DESTROYED;function e(a){if(a)throw a}function n(a){a()}function s(a,v){return a.pipe(v)}K.exports=function(){for(var a=arguments.length,v=new Array(a),l=0;l<a;l++)v[l]=arguments[l];var f,c=function h(a){return a.length?"function"!=typeof a[a.length-1]?e:a.pop():e}(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new x("streams");var E=v.map(function(_,O){var N=O<v.length-1;return function r(a,v,l,f){f=function(_){var O=!1;return function(){O||(O=!0,_.apply(void 0,arguments))}}(f);var c=!1;a.on("close",function(){c=!0}),void 0===M&&(M=q("./end-of-stream")),M(a,{readable:v,writable:l},function(_){if(_)return f(_);c=!0,f()});var E=!1;return function(_){if(!c&&!E)return E=!0,(O=a).setHeader&&"function"==typeof O.abort?a.abort():"function"==typeof a.destroy?a.destroy():void f(_||new d("pipe"));var O}}(_,N,O>0,function(A){f||(f=A),A&&E.forEach(n),N||(E.forEach(n),c(f))})});return v.reduce(s)}},{"../../../errors":77,"./end-of-stream":86}],89:[function(q,K,ee){"use strict";var M=q("../../../errors").codes.ERR_INVALID_OPT_VALUE;K.exports={getHighWaterMark:function(o,x,d,e){var n,s,h,r=(s=e,h=d,null!=(n=x).highWaterMark?n.highWaterMark:s?n[h]:null);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new M(e?d:"highWaterMark",r);return Math.floor(r)}return o.objectMode?16:16384}}},{"../../../errors":77}],90:[function(q,K,ee){K.exports=q("events").EventEmitter},{events:11}],91:[function(q,K,ee){(function(M){(function(){var o=q("./lib/request"),x=q("./lib/response"),d=q("xtend"),e=q("builtin-status-codes"),r=q("url"),n=ee;n.request=function(s,h){s="string"==typeof s?r.parse(s):d(s);var a=-1===M.location.protocol.search(/^https?:$/)?"http:":"",v=s.protocol||a,l=s.hostname||s.host,f=s.port,c=s.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),s.url=(l?v+"//"+l:"")+(f?":"+f:"")+c,s.method=(s.method||"GET").toUpperCase(),s.headers=s.headers||{};var E=new o(s);return h&&E.on("response",h),E},n.get=function(s,h){var a=n.request(s,h);return a.end(),a},n.ClientRequest=o,n.IncomingMessage=x.IncomingMessage,n.Agent=function(){},n.Agent.defaultMaxSockets=4,n.globalAgent=new n.Agent,n.STATUS_CODES=e,n.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/request":93,"./lib/response":94,"builtin-status-codes":6,url:112,xtend:119}],92:[function(q,K,ee){(function(M){(function(){var o;function x(){if(void 0!==o)return o;if(M.XMLHttpRequest){o=new M.XMLHttpRequest;try{o.open("GET",M.XDomainRequest?"/":"https://example.com")}catch{o=null}}else o=null;return o}function d(r){var n=x();if(!n)return!1;try{return n.responseType=r,n.responseType===r}catch{}return!1}function e(r){return"function"==typeof r}ee.fetch=e(M.fetch)&&e(M.ReadableStream),ee.writableStream=e(M.WritableStream),ee.abortController=e(M.AbortController),ee.arraybuffer=ee.fetch||d("arraybuffer"),ee.msstream=!ee.fetch&&d("ms-stream"),ee.mozchunkedarraybuffer=!ee.fetch&&d("moz-chunked-arraybuffer"),ee.overrideMimeType=ee.fetch||!!x()&&e(x().overrideMimeType),o=null}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],93:[function(q,K,ee){(function(M,o,x){(function(){var d=q("./capability"),e=q("inherits"),r=q("./response"),n=q("readable-stream"),s=r.IncomingMessage,h=r.readyStates,a=K.exports=function(l){var f,c=this;n.Writable.call(c),c._opts=l,c._body=[],c._headers={},l.auth&&c.setHeader("Authorization","Basic "+x.from(l.auth).toString("base64")),Object.keys(l.headers).forEach(function(_){c.setHeader(_,l.headers[_])});var _,O,E=!0;if("disable-fetch"===l.mode||"requestTimeout"in l&&!d.abortController)E=!1,f=!0;else if("prefer-streaming"===l.mode)f=!1;else if("allow-wrong-content-type"===l.mode)f=!d.overrideMimeType;else{if(l.mode&&"default"!==l.mode&&"prefer-fast"!==l.mode)throw new Error("Invalid value for opts.mode");f=!0}c._mode=(_=f,O=E,d.fetch&&O?"fetch":d.mozchunkedarraybuffer?"moz-chunked-arraybuffer":d.msstream?"ms-stream":d.arraybuffer&&_?"arraybuffer":"text"),c._fetchTimer=null,c._socketTimeout=null,c._socketTimer=null,c.on("finish",function(){c._onFinish()})};e(a,n.Writable),a.prototype.setHeader=function(l,f){var c=l.toLowerCase();-1===v.indexOf(c)&&(this._headers[c]={name:l,value:f})},a.prototype.getHeader=function(l){var f=this._headers[l.toLowerCase()];return f?f.value:null},a.prototype.removeHeader=function(l){delete this._headers[l.toLowerCase()]},a.prototype._onFinish=function(){var l=this;if(!l._destroyed){var f=l._opts;"timeout"in f&&0!==f.timeout&&l.setTimeout(f.timeout);var c=l._headers,E=null;"GET"!==f.method&&"HEAD"!==f.method&&(E=new Blob(l._body,{type:(c["content-type"]||{}).value||""}));var _=[];if(Object.keys(c).forEach(function(y){var F=c[y].name,j=c[y].value;Array.isArray(j)?j.forEach(function(G){_.push([F,G])}):_.push([F,j])}),"fetch"===l._mode){var O=null;if(d.abortController){var N=new AbortController;O=N.signal,l._fetchAbortController=N,"requestTimeout"in f&&0!==f.requestTimeout&&(l._fetchTimer=o.setTimeout(function(){l.emit("requestTimeout"),l._fetchAbortController&&l._fetchAbortController.abort()},f.requestTimeout))}o.fetch(l._opts.url,{method:l._opts.method,headers:_,body:E||void 0,mode:"cors",credentials:f.withCredentials?"include":"same-origin",signal:O}).then(function(y){l._fetchResponse=y,l._resetTimers(!1),l._connect()},function(y){l._resetTimers(!0),l._destroyed||l.emit("error",y)})}else{var A=l._xhr=new o.XMLHttpRequest;try{A.open(l._opts.method,l._opts.url,!0)}catch(y){return void M.nextTick(function(){l.emit("error",y)})}"responseType"in A&&(A.responseType=l._mode),"withCredentials"in A&&(A.withCredentials=!!f.withCredentials),"text"===l._mode&&"overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in f&&(A.timeout=f.requestTimeout,A.ontimeout=function(){l.emit("requestTimeout")}),_.forEach(function(y){A.setRequestHeader(y[0],y[1])}),l._response=null,A.onreadystatechange=function(){switch(A.readyState){case h.LOADING:case h.DONE:l._onXHRProgress()}},"moz-chunked-arraybuffer"===l._mode&&(A.onprogress=function(){l._onXHRProgress()}),A.onerror=function(){l._destroyed||(l._resetTimers(!0),l.emit("error",new Error("XHR error")))};try{A.send(E)}catch(y){return void M.nextTick(function(){l.emit("error",y)})}}}},a.prototype._onXHRProgress=function(){var l=this;l._resetTimers(!1),function(f){try{var c=f.status;return null!==c&&0!==c}catch{return!1}}(l._xhr)&&!l._destroyed&&(l._response||l._connect(),l._response._onXHRProgress(l._resetTimers.bind(l)))},a.prototype._connect=function(){var l=this;l._destroyed||(l._response=new s(l._xhr,l._fetchResponse,l._mode,l._resetTimers.bind(l)),l._response.on("error",function(f){l.emit("error",f)}),l.emit("response",l._response))},a.prototype._write=function(l,f,c){this._body.push(l),c()},a.prototype._resetTimers=function(l){var f=this;o.clearTimeout(f._socketTimer),f._socketTimer=null,l?(o.clearTimeout(f._fetchTimer),f._fetchTimer=null):f._socketTimeout&&(f._socketTimer=o.setTimeout(function(){f.emit("timeout")},f._socketTimeout))},a.prototype.abort=a.prototype.destroy=function(l){var f=this;f._destroyed=!0,f._resetTimers(!0),f._response&&(f._response._destroyed=!0),f._xhr?f._xhr.abort():f._fetchAbortController&&f._fetchAbortController.abort(),l&&f.emit("error",l)},a.prototype.end=function(l,f,c){"function"==typeof l&&(c=l,l=void 0),n.Writable.prototype.end.call(this,l,f,c)},a.prototype.setTimeout=function(l,f){var c=this;f&&c.once("timeout",f),c._socketTimeout=l,c._resetTimers(!1)},a.prototype.flushHeaders=function(){},a.prototype.setNoDelay=function(){},a.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,q("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer)},{"./capability":92,"./response":94,_process:59,buffer:5,inherits:22,"readable-stream":109}],94:[function(q,K,ee){(function(M,o,x){(function(){var d=q("./capability"),e=q("inherits"),r=q("readable-stream"),n=ee.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s=ee.IncomingMessage=function(h,a,v,l){var f=this;if(r.Readable.call(f),f._mode=v,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",function(){M.nextTick(function(){f.emit("close")})}),"fetch"===v){if(f._fetchResponse=a,f.url=a.url,f.statusCode=a.status,f.statusMessage=a.statusText,a.headers.forEach(function(N,A){f.headers[A.toLowerCase()]=N,f.rawHeaders.push(A,N)}),d.writableStream){var c=new WritableStream({write:function(N){return l(!1),new Promise(function(A,y){f._destroyed?y():f.push(x.from(N))?A():f._resumeFetch=A})},close:function(){l(!0),f._destroyed||f.push(null)},abort:function(N){l(!0),f._destroyed||f.emit("error",N)}});try{return void a.body.pipeTo(c).catch(function(N){l(!0),f._destroyed||f.emit("error",N)})}catch{}}var E=a.body.getReader();!function N(){E.read().then(function(A){f._destroyed||(l(A.done),A.done?f.push(null):(f.push(x.from(A.value)),N()))}).catch(function(A){l(!0),f._destroyed||f.emit("error",A)})}()}else if(f._xhr=h,f._pos=0,f.url=h.responseURL,f.statusCode=h.status,f.statusMessage=h.statusText,h.getAllResponseHeaders().split(/\r?\n/).forEach(function(N){var A=N.match(/^([^:]+):\s*(.*)/);if(A){var y=A[1].toLowerCase();"set-cookie"===y?(void 0===f.headers[y]&&(f.headers[y]=[]),f.headers[y].push(A[2])):void 0!==f.headers[y]?f.headers[y]+=", "+A[2]:f.headers[y]=A[2],f.rawHeaders.push(A[1],A[2])}}),f._charset="x-user-defined",!d.overrideMimeType){var _=f.rawHeaders["mime-type"];if(_){var O=_.match(/;\s*charset=([^;])(;|$)/);O&&(f._charset=O[1].toLowerCase())}f._charset||(f._charset="utf-8")}};e(s,r.Readable),s.prototype._read=function(){var h=this._resumeFetch;h&&(this._resumeFetch=null,h())},s.prototype._onXHRProgress=function(h){var a=this,v=a._xhr,l=null;switch(a._mode){case"text":if((l=v.responseText).length>a._pos){var f=l.substr(a._pos);if("x-user-defined"===a._charset){for(var c=x.alloc(f.length),E=0;E<f.length;E++)c[E]=255&f.charCodeAt(E);a.push(c)}else a.push(f,a._charset);a._pos=l.length}break;case"arraybuffer":if(v.readyState!==n.DONE||!v.response)break;l=v.response,a.push(x.from(new Uint8Array(l)));break;case"moz-chunked-arraybuffer":if(l=v.response,v.readyState!==n.LOADING||!l)break;a.push(x.from(new Uint8Array(l)));break;case"ms-stream":if(l=v.response,v.readyState!==n.LOADING)break;var _=new o.MSStreamReader;_.onprogress=function(){_.result.byteLength>a._pos&&(a.push(x.from(new Uint8Array(_.result.slice(a._pos)))),a._pos=_.result.byteLength)},_.onload=function(){h(!0),a.push(null)},_.readAsArrayBuffer(l)}a._xhr.readyState===n.DONE&&"ms-stream"!==a._mode&&(h(!0),a.push(null))}}).call(this)}).call(this,q("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer)},{"./capability":92,_process:59,buffer:5,inherits:22,"readable-stream":109}],95:[function(q,K,ee){arguments[4][77][0].apply(ee,arguments)},{dup:77}],96:[function(q,K,ee){arguments[4][78][0].apply(ee,arguments)},{"./_stream_readable":98,"./_stream_writable":100,_process:59,dup:78,inherits:22}],97:[function(q,K,ee){arguments[4][79][0].apply(ee,arguments)},{"./_stream_transform":99,dup:79,inherits:22}],98:[function(q,K,ee){arguments[4][80][0].apply(ee,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/async_iterator":101,"./internal/streams/buffer_list":102,"./internal/streams/destroy":103,"./internal/streams/from":105,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:80,events:11,inherits:22,"string_decoder/":110,util:3}],99:[function(q,K,ee){arguments[4][81][0].apply(ee,arguments)},{"../errors":95,"./_stream_duplex":96,dup:81,inherits:22}],100:[function(q,K,ee){arguments[4][82][0].apply(ee,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/destroy":103,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:82,inherits:22,"util-deprecate":114}],101:[function(q,K,ee){arguments[4][83][0].apply(ee,arguments)},{"./end-of-stream":104,_process:59,dup:83}],102:[function(q,K,ee){arguments[4][84][0].apply(ee,arguments)},{buffer:5,dup:84,util:3}],103:[function(q,K,ee){arguments[4][85][0].apply(ee,arguments)},{_process:59,dup:85}],104:[function(q,K,ee){arguments[4][86][0].apply(ee,arguments)},{"../../../errors":95,dup:86}],105:[function(q,K,ee){arguments[4][87][0].apply(ee,arguments)},{dup:87}],106:[function(q,K,ee){arguments[4][88][0].apply(ee,arguments)},{"../../../errors":95,"./end-of-stream":104,dup:88}],107:[function(q,K,ee){arguments[4][89][0].apply(ee,arguments)},{"../../../errors":95,dup:89}],108:[function(q,K,ee){arguments[4][90][0].apply(ee,arguments)},{dup:90,events:11}],109:[function(q,K,ee){(ee=K.exports=q("./lib/_stream_readable.js")).Stream=ee,ee.Readable=ee,ee.Writable=q("./lib/_stream_writable.js"),ee.Duplex=q("./lib/_stream_duplex.js"),ee.Transform=q("./lib/_stream_transform.js"),ee.PassThrough=q("./lib/_stream_passthrough.js"),ee.finished=q("./lib/internal/streams/end-of-stream.js"),ee.pipeline=q("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":96,"./lib/_stream_passthrough.js":97,"./lib/_stream_readable.js":98,"./lib/_stream_transform.js":99,"./lib/_stream_writable.js":100,"./lib/internal/streams/end-of-stream.js":104,"./lib/internal/streams/pipeline.js":106}],110:[function(q,K,ee){"use strict";var M=q("safe-buffer").Buffer,o=M.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function x(l){var f;switch(this.encoding=function(c){var E=function(_){if(!_)return"utf8";for(var O;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(O)return;_=(""+_).toLowerCase(),O=!0}}(c);if("string"!=typeof E&&(M.isEncoding===o||!o(c)))throw new Error("Unknown encoding: "+c);return E||c}(l),this.encoding){case"utf16le":this.text=r,this.end=n,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=s,this.end=h,f=3;break;default:return this.write=a,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(f)}function d(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function e(l){var f=this.lastTotal-this.lastNeed,c=function(E,_,O){if(128!=(192&_[0]))return E.lastNeed=0,"\ufffd";if(E.lastNeed>1&&_.length>1){if(128!=(192&_[1]))return E.lastNeed=1,"\ufffd";if(E.lastNeed>2&&_.length>2&&128!=(192&_[2]))return E.lastNeed=2,"\ufffd"}}(this,l);return void 0!==c?c:this.lastNeed<=l.length?(l.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,f,0,l.length),void(this.lastNeed-=l.length))}function r(l,f){if((l.length-f)%2==0){var c=l.toString("utf16le",f);if(c){var E=c.charCodeAt(c.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",f,l.length-1)}function n(l){var f=l&&l.length?this.write(l):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return f+this.lastChar.toString("utf16le",0,c)}return f}function s(l,f){var c=(l.length-f)%3;return 0===c?l.toString("base64",f):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",f,l.length-c))}function h(l){var f=l&&l.length?this.write(l):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function a(l){return l.toString(this.encoding)}function v(l){return l&&l.length?this.write(l):""}ee.StringDecoder=x,x.prototype.write=function(l){if(0===l.length)return"";var f,c;if(this.lastNeed){if(void 0===(f=this.fillLast(l)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<l.length?f?f+this.text(l,c):this.text(l,c):f||""},x.prototype.end=function(l){var f=l&&l.length?this.write(l):"";return this.lastNeed?f+"\ufffd":f},x.prototype.text=function(l,f){var c=function(_,O,N){var A=O.length-1;if(A<N)return 0;var y=d(O[A]);return y>=0?(y>0&&(_.lastNeed=y-1),y):--A<N||-2===y?0:(y=d(O[A]))>=0?(y>0&&(_.lastNeed=y-2),y):--A<N||-2===y?0:(y=d(O[A]))>=0?(y>0&&(2===y?y=0:_.lastNeed=y-3),y):0}(this,l,f);if(!this.lastNeed)return l.toString("utf8",f);this.lastTotal=c;var E=l.length-(c-this.lastNeed);return l.copy(this.lastChar,0,E),l.toString("utf8",f,E)},x.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},{"safe-buffer":74}],111:[function(q,K,ee){(function(M,o){(function(){var x=q("process/browser.js").nextTick,d=Function.prototype.apply,e=Array.prototype.slice,r={},n=0;function s(h,a){this._id=h,this._clearFn=a}ee.setTimeout=function(){return new s(d.call(setTimeout,window,arguments),clearTimeout)},ee.setInterval=function(){return new s(d.call(setInterval,window,arguments),clearInterval)},ee.clearTimeout=ee.clearInterval=function(h){h.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},ee.enroll=function(h,a){clearTimeout(h._idleTimeoutId),h._idleTimeout=a},ee.unenroll=function(h){clearTimeout(h._idleTimeoutId),h._idleTimeout=-1},ee._unrefActive=ee.active=function(h){clearTimeout(h._idleTimeoutId);var a=h._idleTimeout;a>=0&&(h._idleTimeoutId=setTimeout(function(){h._onTimeout&&h._onTimeout()},a))},ee.setImmediate="function"==typeof M?M:function(h){var a=n++,v=!(arguments.length<2)&&e.call(arguments,1);return r[a]=!0,x(function(){r[a]&&(v?h.apply(null,v):h.call(null),ee.clearImmediate(a))}),a},ee.clearImmediate="function"==typeof o?o:function(h){delete r[h]}}).call(this)}).call(this,q("timers").setImmediate,q("timers").clearImmediate)},{"process/browser.js":59,timers:111}],112:[function(q,K,ee){"use strict";var M=q("punycode"),o=q("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ee.parse=O,ee.resolve=function(N,A){return O(N,!1,!0).resolve(A)},ee.resolveObject=function(N,A){return N?O(N,!1,!0).resolveObject(A):A},ee.format=function(N){return o.isString(N)&&(N=O(N)),N instanceof x?N.format():x.prototype.format.call(N)},ee.Url=x;var d=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),s=["'"].concat(n),h=["%","/","?",";","#"].concat(s),a=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,l=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},c={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=q("querystring");function O(N,A,y){if(N&&o.isObject(N)&&N instanceof x)return N;var F=new x;return F.parse(N,A,y),F}x.prototype.parse=function(N,A,y){if(!o.isString(N))throw new TypeError("Parameter 'url' must be a string, not "+typeof N);var F=N.indexOf("?"),j=-1!==F&&F<N.indexOf("#")?"?":"#",G=N.split(j);G[0]=G[0].replace(/\\/g,"/");var P=N=G.join(j);if(P=P.trim(),!y&&1===N.split("#").length){var z=r.exec(P);if(z)return this.path=P,this.href=P,this.pathname=z[1],z[2]?(this.search=z[2],this.query=A?_.parse(this.search.substr(1)):this.search.substr(1)):A&&(this.search="",this.query={}),this}var Y=d.exec(P);if(Y){var ie=(Y=Y[0]).toLowerCase();this.protocol=ie,P=P.substr(Y.length)}if(y||Y||P.match(/^\/\/[^@\/]+@[^@\/]+/)){var ye="//"===P.substr(0,2);!ye||Y&&c[Y]||(P=P.substr(2),this.slashes=!0)}if(!c[Y]&&(ye||Y&&!E[Y])){for(var fe,re,V=-1,$=0;$<a.length;$++)-1!==(ne=P.indexOf(a[$]))&&(-1===V||ne<V)&&(V=ne);for(-1!==(re=-1===V?P.lastIndexOf("@"):P.lastIndexOf("@",V))&&(fe=P.slice(0,re),P=P.slice(re+1),this.auth=decodeURIComponent(fe)),V=-1,$=0;$<h.length;$++){var ne;-1!==(ne=P.indexOf(h[$]))&&(-1===V||ne<V)&&(V=ne)}-1===V&&(V=P.length),this.host=P.slice(0,V),P=P.slice(V),this.parseHost(),this.hostname=this.hostname||"";var he="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!he)for(var xe=this.hostname.split(/\./),ge=($=0,xe.length);$<ge;$++){var ce=xe[$];if(ce&&!ce.match(v)){for(var ke="",Ne=0,Me=ce.length;Ne<Me;Ne++)ce.charCodeAt(Ne)>127?ke+="x":ke+=ce[Ne];if(!ke.match(v)){var oe=xe.slice(0,$),k=xe.slice($+1),Q=ce.match(l);Q&&(oe.push(Q[1]),k.unshift(Q[2])),k.length&&(P="/"+k.join(".")+P),this.hostname=oe.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),he||(this.hostname=M.toASCII(this.hostname));var X=this.port?":"+this.port:"",se=this.hostname||"";this.host=se+X,this.href+=this.host,he&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==P[0]&&(P="/"+P))}if(!f[ie])for($=0,ge=s.length;$<ge;$++){var pe=s[$];if(-1!==P.indexOf(pe)){var ve=encodeURIComponent(pe);ve===pe&&(ve=escape(pe)),P=P.split(pe).join(ve)}}var Pe=P.indexOf("#");-1!==Pe&&(this.hash=P.substr(Pe),P=P.slice(0,Pe));var Qe=P.indexOf("?");if(-1!==Qe?(this.search=P.substr(Qe),this.query=P.substr(Qe+1),A&&(this.query=_.parse(this.query)),P=P.slice(0,Qe)):A&&(this.search="",this.query={}),P&&(this.pathname=P),E[ie]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){X=this.pathname||"";var Ue=this.search||"";this.path=X+Ue}return this.href=this.format(),this},x.prototype.format=function(){var N=this.auth||"";N&&(N=(N=encodeURIComponent(N)).replace(/%3A/i,":"),N+="@");var A=this.protocol||"",y=this.pathname||"",F=this.hash||"",j=!1,G="";this.host?j=N+this.host:this.hostname&&(j=N+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(G=_.stringify(this.query));var P=this.search||G&&"?"+G||"";return A&&":"!==A.substr(-1)&&(A+=":"),this.slashes||(!A||E[A])&&!1!==j?(j="//"+(j||""),y&&"/"!==y.charAt(0)&&(y="/"+y)):j||(j=""),F&&"#"!==F.charAt(0)&&(F="#"+F),P&&"?"!==P.charAt(0)&&(P="?"+P),A+j+(y=y.replace(/[?#]/g,function(z){return encodeURIComponent(z)}))+(P=P.replace("#","%23"))+F},x.prototype.resolve=function(N){return this.resolveObject(O(N,!1,!0)).format()},x.prototype.resolveObject=function(N){if(o.isString(N)){var A=new x;A.parse(N,!1,!0),N=A}for(var y=new x,F=Object.keys(this),j=0;j<F.length;j++){var G=F[j];y[G]=this[G]}if(y.hash=N.hash,""===N.href)return y.href=y.format(),y;if(N.slashes&&!N.protocol){for(var P=Object.keys(N),z=0;z<P.length;z++){var Y=P[z];"protocol"!==Y&&(y[Y]=N[Y])}return E[y.protocol]&&y.hostname&&!y.pathname&&(y.path=y.pathname="/"),y.href=y.format(),y}if(N.protocol&&N.protocol!==y.protocol){if(!E[N.protocol]){for(var ie=Object.keys(N),ye=0;ye<ie.length;ye++){var fe=ie[ye];y[fe]=N[fe]}return y.href=y.format(),y}if(y.protocol=N.protocol,N.host||c[N.protocol])y.pathname=N.pathname;else{for(var re=(N.pathname||"").split("/");re.length&&!(N.host=re.shift()););N.host||(N.host=""),N.hostname||(N.hostname=""),""!==re[0]&&re.unshift(""),re.length<2&&re.unshift(""),y.pathname=re.join("/")}if(y.search=N.search,y.query=N.query,y.host=N.host||"",y.auth=N.auth,y.hostname=N.hostname||N.host,y.port=N.port,y.pathname||y.search){var V=y.pathname||"",$=y.search||"";y.path=V+$}return y.slashes=y.slashes||N.slashes,y.href=y.format(),y}var ne=y.pathname&&"/"===y.pathname.charAt(0),he=N.host||N.pathname&&"/"===N.pathname.charAt(0),xe=he||ne||y.host&&N.pathname,ge=xe,ce=y.pathname&&y.pathname.split("/")||[],ke=(re=N.pathname&&N.pathname.split("/")||[],y.protocol&&!E[y.protocol]);if(ke&&(y.hostname="",y.port=null,y.host&&(""===ce[0]?ce[0]=y.host:ce.unshift(y.host)),y.host="",N.protocol&&(N.hostname=null,N.port=null,N.host&&(""===re[0]?re[0]=N.host:re.unshift(N.host)),N.host=null),xe=xe&&(""===re[0]||""===ce[0])),he)y.host=N.host||""===N.host?N.host:y.host,y.hostname=N.hostname||""===N.hostname?N.hostname:y.hostname,y.search=N.search,y.query=N.query,ce=re;else if(re.length)ce||(ce=[]),ce.pop(),ce=ce.concat(re),y.search=N.search,y.query=N.query;else if(!o.isNullOrUndefined(N.search))return ke&&(y.hostname=y.host=ce.shift(),(Q=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Q.shift(),y.host=y.hostname=Q.shift())),y.search=N.search,y.query=N.query,o.isNull(y.pathname)&&o.isNull(y.search)||(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y;if(!ce.length)return y.pathname=null,y.search?y.path="/"+y.search:y.path=null,y.href=y.format(),y;for(var Ne=ce.slice(-1)[0],Me=(y.host||N.host||ce.length>1)&&("."===Ne||".."===Ne)||""===Ne,oe=0,k=ce.length;k>=0;k--)"."===(Ne=ce[k])?ce.splice(k,1):".."===Ne?(ce.splice(k,1),oe++):oe&&(ce.splice(k,1),oe--);if(!xe&&!ge)for(;oe--;oe)ce.unshift("..");!xe||""===ce[0]||ce[0]&&"/"===ce[0].charAt(0)||ce.unshift(""),Me&&"/"!==ce.join("/").substr(-1)&&ce.push("");var Q,X=""===ce[0]||ce[0]&&"/"===ce[0].charAt(0);return ke&&(y.hostname=y.host=X?"":ce.length?ce.shift():"",(Q=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Q.shift(),y.host=y.hostname=Q.shift())),(xe=xe||y.host&&ce.length)&&!X&&ce.unshift(""),ce.length?y.pathname=ce.join("/"):(y.pathname=null,y.path=null),o.isNull(y.pathname)&&o.isNull(y.search)||(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=N.auth||y.auth,y.slashes=y.slashes||N.slashes,y.href=y.format(),y},x.prototype.parseHost=function(){var N=this.host,A=e.exec(N);A&&(":"!==(A=A[0])&&(this.port=A.substr(1)),N=N.substr(0,N.length-A.length)),N&&(this.hostname=N)}},{"./util":113,punycode:60,querystring:63}],113:[function(q,K,ee){"use strict";K.exports={isString:function(M){return"string"==typeof M},isObject:function(M){return"object"==typeof M&&null!==M},isNull:function(M){return null===M},isNullOrUndefined:function(M){return null==M}}},{}],114:[function(q,K,ee){(function(M){(function(){function o(x){try{if(!M.localStorage)return!1}catch{return!1}var d=M.localStorage[x];return null!=d&&"true"===String(d).toLowerCase()}K.exports=function(x,d){if(o("noDeprecation"))return x;var e=!1;return function(){if(!e){if(o("throwDeprecation"))throw new Error(d);o("traceDeprecation")?console.trace(d):console.warn(d),e=!0}return x.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],115:[function(q,K,ee){K.exports=function(M){return M&&"object"==typeof M&&"function"==typeof M.copy&&"function"==typeof M.fill&&"function"==typeof M.readUInt8}},{}],116:[function(q,K,ee){"use strict";var M=q("is-arguments"),o=q("is-generator-function"),x=q("which-typed-array"),d=q("is-typed-array");function e(V){return V.call.bind(V)}var r=typeof BigInt<"u",n=typeof Symbol<"u",s=e(Object.prototype.toString),h=e(Number.prototype.valueOf),a=e(String.prototype.valueOf),v=e(Boolean.prototype.valueOf);if(r)var l=e(BigInt.prototype.valueOf);if(n)var f=e(Symbol.prototype.valueOf);function c(V,$){if("object"!=typeof V)return!1;try{return $(V),!0}catch{return!1}}function E(V){return"[object Map]"===s(V)}function _(V){return"[object Set]"===s(V)}function O(V){return"[object WeakMap]"===s(V)}function N(V){return"[object WeakSet]"===s(V)}function A(V){return"[object ArrayBuffer]"===s(V)}function y(V){return typeof ArrayBuffer<"u"&&(A.working?A(V):V instanceof ArrayBuffer)}function F(V){return"[object DataView]"===s(V)}function j(V){return typeof DataView<"u"&&(F.working?F(V):V instanceof DataView)}ee.isArgumentsObject=M,ee.isGeneratorFunction=o,ee.isTypedArray=d,ee.isPromise=function(V){return typeof Promise<"u"&&V instanceof Promise||null!==V&&"object"==typeof V&&"function"==typeof V.then&&"function"==typeof V.catch},ee.isArrayBufferView=function(V){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(V):d(V)||j(V)},ee.isUint8Array=function(V){return"Uint8Array"===x(V)},ee.isUint8ClampedArray=function(V){return"Uint8ClampedArray"===x(V)},ee.isUint16Array=function(V){return"Uint16Array"===x(V)},ee.isUint32Array=function(V){return"Uint32Array"===x(V)},ee.isInt8Array=function(V){return"Int8Array"===x(V)},ee.isInt16Array=function(V){return"Int16Array"===x(V)},ee.isInt32Array=function(V){return"Int32Array"===x(V)},ee.isFloat32Array=function(V){return"Float32Array"===x(V)},ee.isFloat64Array=function(V){return"Float64Array"===x(V)},ee.isBigInt64Array=function(V){return"BigInt64Array"===x(V)},ee.isBigUint64Array=function(V){return"BigUint64Array"===x(V)},E.working=typeof Map<"u"&&E(new Map),ee.isMap=function(V){return typeof Map<"u"&&(E.working?E(V):V instanceof Map)},_.working=typeof Set<"u"&&_(new Set),ee.isSet=function(V){return typeof Set<"u"&&(_.working?_(V):V instanceof Set)},O.working=typeof WeakMap<"u"&&O(new WeakMap),ee.isWeakMap=function(V){return typeof WeakMap<"u"&&(O.working?O(V):V instanceof WeakMap)},N.working=typeof WeakSet<"u"&&N(new WeakSet),ee.isWeakSet=function(V){return N(V)},A.working=typeof ArrayBuffer<"u"&&A(new ArrayBuffer),ee.isArrayBuffer=y,F.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&F(new DataView(new ArrayBuffer(1),0,1)),ee.isDataView=j;var G=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function P(V){return"[object SharedArrayBuffer]"===s(V)}function z(V){return void 0!==G&&(void 0===P.working&&(P.working=P(new G)),P.working?P(V):V instanceof G)}function Y(V){return c(V,h)}function ie(V){return c(V,a)}function ye(V){return c(V,v)}function fe(V){return r&&c(V,l)}function re(V){return n&&c(V,f)}ee.isSharedArrayBuffer=z,ee.isAsyncFunction=function(V){return"[object AsyncFunction]"===s(V)},ee.isMapIterator=function(V){return"[object Map Iterator]"===s(V)},ee.isSetIterator=function(V){return"[object Set Iterator]"===s(V)},ee.isGeneratorObject=function(V){return"[object Generator]"===s(V)},ee.isWebAssemblyCompiledModule=function(V){return"[object WebAssembly.Module]"===s(V)},ee.isNumberObject=Y,ee.isStringObject=ie,ee.isBooleanObject=ye,ee.isBigIntObject=fe,ee.isSymbolObject=re,ee.isBoxedPrimitive=function(V){return Y(V)||ie(V)||ye(V)||fe(V)||re(V)},ee.isAnyArrayBuffer=function(V){return typeof Uint8Array<"u"&&(y(V)||z(V))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(V){Object.defineProperty(ee,V,{enumerable:!1,value:function(){throw new Error(V+" is not supported in userland")}})})},{"is-arguments":23,"is-generator-function":25,"is-typed-array":26,"which-typed-array":118}],117:[function(q,K,ee){(function(M){(function(){var o=Object.getOwnPropertyDescriptors||function(V){for(var $=Object.keys(V),ne={},he=0;he<$.length;he++)ne[$[he]]=Object.getOwnPropertyDescriptor(V,$[he]);return ne},x=/%[sdj%]/g;ee.format=function(V){if(!O(V)){for(var $=[],ne=0;ne<arguments.length;ne++)$.push(n(arguments[ne]));return $.join(" ")}ne=1;for(var he=arguments,xe=he.length,ge=String(V).replace(x,function(ke){if("%%"===ke)return"%";if(ne>=xe)return ke;switch(ke){case"%s":return String(he[ne++]);case"%d":return Number(he[ne++]);case"%j":try{return JSON.stringify(he[ne++])}catch{return"[Circular]"}default:return ke}}),ce=he[ne];ne<xe;ce=he[++ne])E(ce)||!y(ce)?ge+=" "+ce:ge+=" "+n(ce);return ge},ee.deprecate=function(V,$){if(void 0!==M&&!0===M.noDeprecation)return V;if(void 0===M)return function(){return ee.deprecate(V,$).apply(this,arguments)};var ne=!1;return function(){if(!ne){if(M.throwDeprecation)throw new Error($);M.traceDeprecation?console.trace($):console.error($),ne=!0}return V.apply(this,arguments)}};var d={},e=/^$/;if(M.env.NODE_DEBUG){var r=M.env.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+r+"$","i")}function n(V,$){var ne={seen:[],stylize:h};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),c($)?ne.showHidden=$:$&&ee._extend(ne,$),N(ne.showHidden)&&(ne.showHidden=!1),N(ne.depth)&&(ne.depth=2),N(ne.colors)&&(ne.colors=!1),N(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=s),a(ne,V,ne.depth)}function s(V,$){var ne=n.styles[$];return ne?"\x1b["+n.colors[ne][0]+"m"+V+"\x1b["+n.colors[ne][1]+"m":V}function h(V,$){return V}function a(V,$,ne){if(V.customInspect&&$&&G($.inspect)&&$.inspect!==ee.inspect&&(!$.constructor||$.constructor.prototype!==$)){var he=$.inspect(ne,V);return O(he)||(he=a(V,he,ne)),he}var xe=function(Q,X){if(N(X))return Q.stylize("undefined","undefined");if(O(X)){var se="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Q.stylize(se,"string")}return _(X)?Q.stylize(""+X,"number"):c(X)?Q.stylize(""+X,"boolean"):E(X)?Q.stylize("null","null"):void 0}(V,$);if(xe)return xe;var X,ge=Object.keys($),ce=(X={},ge.forEach(function(se,pe){X[se]=!0}),X);if(V.showHidden&&(ge=Object.getOwnPropertyNames($)),j($)&&(ge.indexOf("message")>=0||ge.indexOf("description")>=0))return v($);if(0===ge.length){if(G($)){var ke=$.name?": "+$.name:"";return V.stylize("[Function"+ke+"]","special")}if(A($))return V.stylize(RegExp.prototype.toString.call($),"regexp");if(F($))return V.stylize(Date.prototype.toString.call($),"date");if(j($))return v($)}var Ne,Me="",oe=!1,k=["{","}"];return f($)&&(oe=!0,k=["[","]"]),G($)&&(Me=" [Function"+($.name?": "+$.name:"")+"]"),A($)&&(Me=" "+RegExp.prototype.toString.call($)),F($)&&(Me=" "+Date.prototype.toUTCString.call($)),j($)&&(Me=" "+v($)),0!==ge.length||oe&&0!=$.length?ne<0?A($)?V.stylize(RegExp.prototype.toString.call($),"regexp"):V.stylize("[Object]","special"):(V.seen.push($),Ne=oe?function(Q,X,se,pe,ve){for(var Pe=[],Qe=0,Ue=X.length;Qe<Ue;++Qe)ye(X,String(Qe))?Pe.push(l(Q,X,se,pe,String(Qe),!0)):Pe.push("");return ve.forEach(function(We){We.match(/^\d+$/)||Pe.push(l(Q,X,se,pe,We,!0))}),Pe}(V,$,ne,ce,ge):ge.map(function(Q){return l(V,$,ne,ce,Q,oe)}),V.seen.pop(),function(Q,X,se){return Q.reduce(function(ve,Pe){return Pe.indexOf("\n"),ve+Pe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?se[0]+(""===X?"":X+"\n ")+" "+Q.join(",\n  ")+" "+se[1]:se[0]+X+" "+Q.join(", ")+" "+se[1]}(Ne,Me,k)):k[0]+Me+k[1]}function v(V){return"["+Error.prototype.toString.call(V)+"]"}function l(V,$,ne,he,xe,ge){var ce,ke,Ne;if((Ne=Object.getOwnPropertyDescriptor($,xe)||{value:$[xe]}).get?ke=Ne.set?V.stylize("[Getter/Setter]","special"):V.stylize("[Getter]","special"):Ne.set&&(ke=V.stylize("[Setter]","special")),ye(he,xe)||(ce="["+xe+"]"),ke||(V.seen.indexOf(Ne.value)<0?(ke=E(ne)?a(V,Ne.value,null):a(V,Ne.value,ne-1)).indexOf("\n")>-1&&(ke=ge?ke.split("\n").map(function(Me){return"  "+Me}).join("\n").substr(2):"\n"+ke.split("\n").map(function(Me){return"   "+Me}).join("\n")):ke=V.stylize("[Circular]","special")),N(ce)){if(ge&&xe.match(/^\d+$/))return ke;(ce=JSON.stringify(""+xe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ce=ce.substr(1,ce.length-2),ce=V.stylize(ce,"name")):(ce=ce.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ce=V.stylize(ce,"string"))}return ce+": "+ke}function f(V){return Array.isArray(V)}function c(V){return"boolean"==typeof V}function E(V){return null===V}function _(V){return"number"==typeof V}function O(V){return"string"==typeof V}function N(V){return void 0===V}function A(V){return y(V)&&"[object RegExp]"===P(V)}function y(V){return"object"==typeof V&&null!==V}function F(V){return y(V)&&"[object Date]"===P(V)}function j(V){return y(V)&&("[object Error]"===P(V)||V instanceof Error)}function G(V){return"function"==typeof V}function P(V){return Object.prototype.toString.call(V)}function z(V){return V<10?"0"+V.toString(10):V.toString(10)}ee.debuglog=function(V){if(V=V.toUpperCase(),!d[V])if(e.test(V)){var $=M.pid;d[V]=function(){var ne=ee.format.apply(ee,arguments);console.error("%s %d: %s",V,$,ne)}}else d[V]=function(){};return d[V]},ee.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ee.types=q("./support/types"),ee.isArray=f,ee.isBoolean=c,ee.isNull=E,ee.isNullOrUndefined=function(V){return null==V},ee.isNumber=_,ee.isString=O,ee.isSymbol=function(V){return"symbol"==typeof V},ee.isUndefined=N,ee.isRegExp=A,ee.types.isRegExp=A,ee.isObject=y,ee.isDate=F,ee.types.isDate=F,ee.isError=j,ee.types.isNativeError=j,ee.isFunction=G,ee.isPrimitive=function(V){return null===V||"boolean"==typeof V||"number"==typeof V||"string"==typeof V||"symbol"==typeof V||void 0===V},ee.isBuffer=q("./support/isBuffer");var Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ye(V,$){return Object.prototype.hasOwnProperty.call(V,$)}ee.log=function(){console.log("%s - %s",function ie(){var V=new Date,$=[z(V.getHours()),z(V.getMinutes()),z(V.getSeconds())].join(":");return[V.getDate(),Y[V.getMonth()],$].join(" ")}(),ee.format.apply(ee,arguments))},ee.inherits=q("inherits"),ee._extend=function(V,$){if(!$||!y($))return V;for(var ne=Object.keys($),he=ne.length;he--;)V[ne[he]]=$[ne[he]];return V};var fe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function re(V,$){if(!V){var ne=new Error("Promise was rejected with a falsy value");ne.reason=V,V=ne}return $(V)}ee.promisify=function(V){if("function"!=typeof V)throw new TypeError('The "original" argument must be of type Function');if(fe&&V[fe]){var $;if("function"!=typeof($=V[fe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty($,fe,{value:$,enumerable:!1,writable:!1,configurable:!0}),$}function $(){for(var ne,he,xe=new Promise(function(ke,Ne){ne=ke,he=Ne}),ge=[],ce=0;ce<arguments.length;ce++)ge.push(arguments[ce]);ge.push(function(ke,Ne){ke?he(ke):ne(Ne)});try{V.apply(this,ge)}catch(ke){he(ke)}return xe}return Object.setPrototypeOf($,Object.getPrototypeOf(V)),fe&&Object.defineProperty($,fe,{value:$,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties($,o(V))},ee.promisify.custom=fe,ee.callbackify=function(V){if("function"!=typeof V)throw new TypeError('The "original" argument must be of type Function');function $(){for(var ne=[],he=0;he<arguments.length;he++)ne.push(arguments[he]);var xe=ne.pop();if("function"!=typeof xe)throw new TypeError("The last argument must be of type Function");var ge=this,ce=function(){return xe.apply(ge,arguments)};V.apply(this,ne).then(function(ke){M.nextTick(ce.bind(null,null,ke))},function(ke){M.nextTick(re.bind(null,ke,ce))})}return Object.setPrototypeOf($,Object.getPrototypeOf(V)),Object.defineProperties($,o(V)),$}}).call(this)}).call(this,q("_process"))},{"./support/isBuffer":115,"./support/types":116,_process:59,inherits:22}],118:[function(q,K,ee){(function(M){(function(){"use strict";var o=q("for-each"),x=q("available-typed-arrays"),d=q("call-bind/callBound"),e=d("Object.prototype.toString"),r=q("has-tostringtag/shams")(),n=typeof globalThis>"u"?M:globalThis,s=x(),h=d("String.prototype.slice"),a={},v=q("es-abstract/helpers/getOwnPropertyDescriptor"),l=Object.getPrototypeOf;r&&v&&l&&o(s,function(c){if("function"==typeof n[c]){var E=new n[c];if(Symbol.toStringTag in E){var _=l(E),O=v(_,Symbol.toStringTag);if(!O){var N=l(_);O=v(N,Symbol.toStringTag)}a[c]=O.get}}});var f=q("is-typed-array");K.exports=function(c){return!!f(c)&&(r&&Symbol.toStringTag in c?(E=c,_=!1,o(a,function(O,N){if(!_)try{var A=O.call(E);A===N&&(_=A)}catch{}}),_):h(e(c),8,-1));var E,_}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18,"is-typed-array":26}],119:[function(q,K,ee){K.exports=function(){for(var o={},x=0;x<arguments.length;x++){var d=arguments[x];for(var e in d)M.call(d,e)&&(o[e]=d[e])}return o};var M=Object.prototype.hasOwnProperty},{}],120:[function(q,K,ee){"use strict";K.exports=function(M){M.prototype[Symbol.iterator]=function*(){for(let o=this.head;o;o=o.next)yield o.value}}},{}],121:[function(q,K,ee){"use strict";function M(r){var n=this;if(n instanceof M||(n=new M),n.tail=null,n.head=null,n.length=0,r&&"function"==typeof r.forEach)r.forEach(function(a){n.push(a)});else if(arguments.length>0)for(var s=0,h=arguments.length;s<h;s++)n.push(arguments[s]);return n}function o(r,n,s){var h=n===r.head?new e(s,null,n,r):new e(s,n,n.next,r);return null===h.next&&(r.tail=h),null===h.prev&&(r.head=h),r.length++,h}function x(r,n){r.tail=new e(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function d(r,n){r.head=new e(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function e(r,n,s,h){if(!(this instanceof e))return new e(r,n,s,h);this.list=h,this.value=r,n?(n.next=this,this.prev=n):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}K.exports=M,M.Node=e,M.create=M,M.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var n=r.next,s=r.prev;return n&&(n.prev=s),s&&(s.next=n),r===this.head&&(this.head=n),r===this.tail&&(this.tail=s),r.list.length--,r.next=null,r.prev=null,r.list=null,n},M.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var n=this.head;r.list=this,r.next=n,n&&(n.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},M.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var n=this.tail;r.list=this,r.prev=n,n&&(n.next=r),this.tail=r,this.head||(this.head=r),this.length++}},M.prototype.push=function(){for(var r=0,n=arguments.length;r<n;r++)x(this,arguments[r]);return this.length},M.prototype.unshift=function(){for(var r=0,n=arguments.length;r<n;r++)d(this,arguments[r]);return this.length},M.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},M.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},M.prototype.forEach=function(r,n){n=n||this;for(var s=this.head,h=0;null!==s;h++)r.call(n,s.value,h,this),s=s.next},M.prototype.forEachReverse=function(r,n){n=n||this;for(var s=this.tail,h=this.length-1;null!==s;h--)r.call(n,s.value,h,this),s=s.prev},M.prototype.get=function(r){for(var n=0,s=this.head;null!==s&&n<r;n++)s=s.next;if(n===r&&null!==s)return s.value},M.prototype.getReverse=function(r){for(var n=0,s=this.tail;null!==s&&n<r;n++)s=s.prev;if(n===r&&null!==s)return s.value},M.prototype.map=function(r,n){n=n||this;for(var s=new M,h=this.head;null!==h;)s.push(r.call(n,h.value,this)),h=h.next;return s},M.prototype.mapReverse=function(r,n){n=n||this;for(var s=new M,h=this.tail;null!==h;)s.push(r.call(n,h.value,this)),h=h.prev;return s},M.prototype.reduce=function(r,n){var s,h=this.head;if(arguments.length>1)s=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");h=this.head.next,s=this.head.value}for(var a=0;null!==h;a++)s=r(s,h.value,a),h=h.next;return s},M.prototype.reduceReverse=function(r,n){var s,h=this.tail;if(arguments.length>1)s=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");h=this.tail.prev,s=this.tail.value}for(var a=this.length-1;null!==h;a--)s=r(s,h.value,a),h=h.prev;return s},M.prototype.toArray=function(){for(var r=new Array(this.length),n=0,s=this.head;null!==s;n++)r[n]=s.value,s=s.next;return r},M.prototype.toArrayReverse=function(){for(var r=new Array(this.length),n=0,s=this.tail;null!==s;n++)r[n]=s.value,s=s.prev;return r},M.prototype.slice=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var s=new M;if(n<r||n<0)return s;r<0&&(r=0),n>this.length&&(n=this.length);for(var h=0,a=this.head;null!==a&&h<r;h++)a=a.next;for(;null!==a&&h<n;h++,a=a.next)s.push(a.value);return s},M.prototype.sliceReverse=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var s=new M;if(n<r||n<0)return s;r<0&&(r=0),n>this.length&&(n=this.length);for(var h=this.length,a=this.tail;null!==a&&h>n;h--)a=a.prev;for(;null!==a&&h>r;h--,a=a.prev)s.push(a.value);return s},M.prototype.splice=function(r,n,...s){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var h=0,a=this.head;null!==a&&h<r;h++)a=a.next;var v=[];for(h=0;a&&h<n;h++)v.push(a.value),a=this.removeNode(a);for(null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev),h=0;h<s.length;h++)a=o(this,a,s[h]);return v},M.prototype.reverse=function(){for(var r=this.head,n=this.tail,s=r;null!==s;s=s.prev){var h=s.prev;s.prev=s.next,s.next=h}return this.head=n,this.tail=r,this};try{q("./iterator.js")(M)}catch{}},{"./iterator.js":120}],122:[function(q,K,ee){var M=q("./parser"),o=q("./utils"),x=o;function d(r,n){this.name="NonSupportedSparqlFeatureError",this.feature=r,this.message=n||"SPARQL feature "+r+" non supported"}function e(r){this.name=ParserError,this.message=r||"Error parsing SPARQL query"}d.prototype=new Error,d.constructor=d,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(r){return M.parse(r)},AbstractQueryTree.prototype.parseExecutableUnit=function(r){if("select"===r.kind)return this.parseSelect(r);if("ask"===r.kind)return this.parseSelect(r);if("modify"===r.kind)return this.parseSelect(r);if("construct"===r.kind)return this.parseSelect(r);if("insertdata"===r.kind)return this.parseInsertData(r);if("deletedata"===r.kind)return this.parseInsertData(r);if("load"===r.kind||"clear"===r.kind||"drop"===r.kind||"create"===r.kind)return r;throw new Error("unknown executable unit: "+r.kind)},AbstractQueryTree.prototype.parseSelect=function(r){return null==r?(console.log("error parsing query"),null):(r.pattern=this.build(r.pattern,{freshCounter:0}),r)},AbstractQueryTree.prototype.parseInsertData=function(r){return r??(console.log("error parsing query"),null)},AbstractQueryTree.prototype.build=function(r,n){if("groupgraphpattern"===r.token)return this._buildGroupGraphPattern(r,n);if("basicgraphpattern"===r.token){var s={kind:"BGP",value:r.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(s,n)}if("graphunionpattern"===r.token)return{kind:"UNION",value:[this.build(r.value[0],n),this.build(r.value[1],n)]};if("graphgraphpattern"===r.token)return{kind:"GRAPH",value:this.build(r.value,n),graph:r.graph};throw null!=r.token?new d(r.token,"Non implemented SPARQL graph pattern: '"+r.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(r)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(r,n){for(var s,h,a,v=[],l=0;l<r.value.length;l++)if(r.value[l].predicate&&"path"===r.value[l].predicate.token){s=r.value[l],h=r.value.slice(l+1);var f=AbstractQueryTree.translatePathExpression(s,n),c=null;if("BGP"!==f.kind){if("ZERO_OR_MORE_PATH"===f.kind||"ONE_OR_MORE_PATH"===f.kind){if(a=v.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:v},rvalue:f}:f,"ZERO_OR_MORE_PATH"===f.kind)if("var"===f.y.token&&0===f.y.value.indexOf("fresh:")&&"var"===f.x.token&&0===f.x.value.indexOf("fresh:"))for(var E=0;E<r.value.length;E++)r.value[E].object&&"var"===r.value[E].object.token&&r.value[E].object.value===f.x.value&&((c=x.clone(r.value[E],!0)).object=f.y);else if("var"===f.y.token&&0===f.y.value.indexOf("fresh:"))for(E=0;E<r.value.length;E++)r.value[E].subject&&"var"===r.value[E].subject.token&&r.value[E].subject.value===f.y.value&&((c=x.clone(r.value[E],!0)).subject=f.x);if(h.length>0){var _=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:h},n);return null!=c?{kind:"UNION",value:[{kind:"JOIN",lvalue:a,rvalue:_},{kind:"BGP",value:v.concat([c]).concat(h)}]}:{kind:"JOIN",lvalue:a,rvalue:_}}return a}return f}v=v.concat(f.value)}else v.push(r.value[l]);return r.value=v,r},AbstractQueryTree.translatePathExpression=function(r,n){if("element"===r.predicate.kind)return"+"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,n),x:r.subject,y:r.object}):"*"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,n),x:r.subject,y:r.object}):(r.predicate=r.predicate.value,{kind:"BGP",value:[r]});if("sequence"===r.predicate.kind){for(var s,h,a=r.subject,v=r.object,l=r.graph,f=[],c=0;c<r.predicate.value.length;c++)c!=r.predicate.value.length-1?(s={token:"var",value:"fresh:"+n.freshCounter},n.freshCounter++):s=v,h={subject:a,predicate:r.predicate.value[c],object:s},null!=l&&(h.graph=x.clone(l,!0)),f.push(h),c!=r.predicate.value.length-1&&(a=x.clone(s,!0));var E={kind:"BGP",value:f};return AbstractQueryTree.translatePathExpressionsInBGP(E,n)}throw new d("Non supported path expression "+r.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(r,n){for(var s=r.filters||[],h=r.binds||[],a={kind:"EMPTY_PATTERN"},v=0;v<r.patterns.length;v++){var l=r.patterns[v];if("optionalgraphpattern"===l.token)a="FILTER"===(f=this.build(l.value,n)).kind?{kind:"LEFT_JOIN",lvalue:a,rvalue:f.value,filter:f.filter}:{kind:"LEFT_JOIN",lvalue:a,rvalue:f,filter:!0};else{var f=this.build(l,n);a="EMPTY_PATTERN"==a.kind?f:{kind:"JOIN",lvalue:a,rvalue:f}}}if(a.binds=h,0!=s.length){if("EMPTY_PATTERN"===a.kind)return{kind:"FILTER",filter:s,value:a};if("LEFT_JOIN"===a.kind&&!0===a.filter)return{kind:"FILTER",filter:s,value:a};if("LEFT_JOIN"===a.kind)return{kind:"FILTER",filter:s,value:a};if("JOIN"===a.kind)return{kind:"FILTER",filter:s,value:a};if("UNION"===a.kind)return{kind:"FILTER",filter:s,value:a};if("GRAPH"===a.kind)return{kind:"FILTER",filter:s,value:a};if("BGP"===a.kind)return{kind:"FILTER",filter:s,value:a};throw new Error("Unknow kind of algebra expression: "+a.kind)}return a},AbstractQueryTree.prototype.collectBasicTriples=function(r,n){if(null==n&&(n=[]),"select"===r.kind)n=this.collectBasicTriples(r.pattern,n);else if("BGP"===r.kind)n=n.concat(r.value);else if("ZERO_OR_MORE_PATH"===r.kind)n=this.collectBasicTriples(r.path);else if("UNION"===r.kind)n=this.collectBasicTriples(r.value[0],n),n=this.collectBasicTriples(r.value[1],n);else if("GRAPH"===r.kind)n=this.collectBasicTriples(r.value,n);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)n=this.collectBasicTriples(r.lvalue,n),n=this.collectBasicTriples(r.rvalue,n);else if("FILTER"===r.kind)n=this.collectBasicTriples(r.value,n);else if("construct"===r.kind)n=this.collectBasicTriples(r.pattern,n);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return n},AbstractQueryTree.prototype.bind=function(r,n){if(null!=r.graph&&r.graph.token&&"var"===r.graph.token&&null!=n[r.graph.value]&&(r.graph=n[r.graph.value]),null!=r.filter){for(var s=[],h=0;h<r.filter.length;h++)r.filter[h].value=this._bindFilter(r.filter[h].value,n),s.push(r.filter[h]);r.filter=s}if("select"===r.kind)r.pattern=this.bind(r.pattern,n);else if("BGP"===r.kind)r.value=this._bindTripleContext(r.value,n);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._bindTripleContext(r.path,n),r.x&&"var"===r.x.token&&null!=n[r.x.value]&&(r.x=n[r.x.value]),r.y&&"var"===r.y.token&&null!=n[r.y.value]&&(r.y=n[r.y.value]);else if("UNION"===r.kind)r.value[0]=this.bind(r.value[0],n),r.value[1]=this.bind(r.value[1],n);else if("GRAPH"===r.kind)r.value=this.bind(r.value,n);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.bind(r.lvalue,n),r.rvalue=this.bind(r.rvalue,n);else if("FILTER"===r.kind){var a=this;r.value=this.bind(r.value,n),r.filter=r.filter.map(function(v){return{token:"filter",value:a._bindFilter(v.value,n)}})}else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._bindTripleContext=function(r,n){for(var s=0;s<r.length;s++)for(var h in delete r[s].graph,delete r[s].variables,r[s]){var a=r[s][h];"var"===a.token&&null!=n[a.value]&&(r[s][h]=n[a.value])}return r},AbstractQueryTree.prototype._bindFilter=function(r,n){if(null!=r.expressionType){var s=r.expressionType;if("relationalexpression"==s)r.op1=this._bindFilter(r.op1,n),r.op2=this._bindFilter(r.op2,n);else if("conditionalor"==s||"conditionaland"==s)for(var h=0;h<r.operands.length;h++)r.operands[h]=this._bindFilter(r.operands[h],n);else if("additiveexpression"==s)for(r.summand=this._bindFilter(r.summand,n),h=0;h<r.summands.length;h++)r.summands[h].expression=this._bindFilter(r.summands[h].expression,n);else if("builtincall"==s)for(h=0;h<r.args.length;h++)r.args[h]=this._bindFilter(r.args[h],n);else if("multiplicativeexpression"==s)for(r.factor=this._bindFilter(r.factor,n),h=0;h<r.factors.length;h++)r.factors[h].expression=this._bindFilter(r.factors[h].expression,n);else if("unaryexpression"==s)r.expression=this._bindFilter(r.expression,n);else if("irireforfunction"==s)for(h=0;h<r.factors.args;h++)r.args[h]=this._bindFilter(r.args[h],n);else if("atomic"==s&&"var"==r.primaryexpression&&null!=n[r.value.value]){var a=n[r.value.value];"uri"===a.token?r.primaryexpression="iri":r.primaryexpression="literal",r.value=a}}return r},AbstractQueryTree.prototype.replace=function(r,n,s,h){if(null!=r.graph&&r.graph.token&&r.graph.token===n.token&&r.graph.value==n.value&&(r.graph=x.clone(s,!0)),null!=r.filter){for(var a=[],v=0;v<r.filter.length;v++)r.filter[v].value=this._replaceFilter(r.filter[v].value,n,s,h),a.push(r.filter[v]);r.filter=a}if("select"===r.kind)r.pattern=this.replace(r.pattern,n,s,h);else if("BGP"===r.kind)r.value=this._replaceTripleContext(r.value,n,s,h);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._replaceTripleContext(r.path,n,s,h),r.x&&r.x.token===n.token&&r.value===n.value&&(r.x=x.clone(s,!0)),r.y&&r.y.token===n.token&&r.value===n.value&&(r.y=x.clone(s,!0));else if("UNION"===r.kind)r.value[0]=this.replace(r.value[0],n,s,h),r.value[1]=this.replace(r.value[1],n,s,h);else if("GRAPH"===r.kind)r.value=this.replace(r.value,n,s);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.replace(r.lvalue,n,s,h),r.rvalue=this.replace(r.rvalue,n,s,h);else if("FILTER"===r.kind)r.value=this._replaceFilter(r.value,n,s,h);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._replaceTripleContext=function(r,n,s,h){for(var a=0;a<r.length;a++)for(var v in r[a]){var l=r[a][v];"var"===l.token&&"var"===n.token&&l.value===n.value||"blank"===l.token&&"blank"===n.token&&l.value===n.value?r[a][v]=s:"literal"!==l.token&&"uri"!==l.token||"literal"!==n.token&&"uri"!==n.token||l.token!==n.token||o.lexicalFormTerm(l,h)[l.token]!==o.lexicalFormTerm(n,h)[l.token]||(r[a][v]=s)}return r},AbstractQueryTree.prototype._replaceFilter=function(r,n,s,h){if(null!=r.expressionType){var a=r.expressionType;if("relationalexpression"==a)r.op1=this._replaceFilter(r.op1,n,s,h),r.op2=this._replaceFilter(r.op2,n,s,h);else if("conditionalor"==a||"conditionaland"==a)for(var v=0;v<r.operands.length;v++)r.operands[v]=this._replaceFilter(r.operands[v],n,s,h);else if("additiveexpression"==a)for(r.summand=this._replaceFilter(r.summand,n,s,h),v=0;v<r.summands.length;v++)r.summands[v].expression=this._replaceFilter(r.summands[v].expression,n,s,h);else if("builtincall"==a)for(v=0;v<r.args.length;v++)r.args[v]=this._replaceFilter(r.args[v],n,s,h);else if("multiplicativeexpression"==a)for(r.factor=this._replaceFilter(r.factor,n,s,h),v=0;v<r.factors.length;v++)r.factors[v].expression=this._replaceFilter(r.factors[v].expression,n,s,h);else if("unaryexpression"==a)r.expression=this._replaceFilter(r.expression,n,s,h);else if("irireforfunction"==a)for(v=0;v<r.factors.args;v++)r.args[v]=this._replaceFilter(r.args[v],n,s,h);else if("atomic"==a){var l=null;(r.primaryexpression==n.token&&r.value==n.value||"iri"==r.primaryexpression&&"uri"==n.token&&r.value==n.value)&&(l=s.value),null!=l&&("uri"===s.token?r.primaryexpression="iri":r.primaryexpression=s.token,r.value=l)}}return r},AbstractQueryTree.prototype.treeWithUnion=function(r){if(null==r||null==r.kind)return!1;if("select"===r.kind)return this.treeWithUnion(r.pattern);if("BGP"===r.kind)return this.treeWithUnion(r.value);if("ZERO_OR_MORE_PATH"===r.kind)return!1;if("UNION"===r.kind){if(null==r.value[0].value||null==r.value[0].value.variables||null==r.value[1].value||null==r.value[1].value.variables)return!0;if(r.value[0].variables.join("/")===r.values[1].variables.join("/"))return!!this.treeWithUnion(r.value[0])||this.treeWithUnion(r.value[1])}else{if("GRAPH"===r.kind)return!1;if("LEFT_JOIN"!==r.kind&&"JOIN"!==r.kind)return"FILTER"===r.kind||r.kind,!1;if(this.treeWithUnion(r.lvalue))return!0;this.treeWithUnion(r.rvalue)}},K.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:d,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(q,K,ee){"use strict";var M=q("./utils"),o=M,x=M.nextTick,d=function(r,n){if(0!=arguments.length){this.order=r,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var s=this;this._diskWrite(this.root,function(h){s.root=h,s._updateRootNode(s.root,function(a){s.comparator=function(v,l){return v<l?-1:v>l?1:0},s.merger=null,n?.(s)})})}};d.prototype._allocateNode=function(){return new e},d.prototype._diskWrite=function(r,n){x(function(){n(r)})},d.prototype._diskRead=function(r,n){x(function(){n(r)})},d.prototype._diskDelete=function(r,n){x(function(){n()})},d.prototype._updateRootNode=function(r,n){n(r)},d.prototype.search=function(r,n,s){var h=this.root;this.__search(this,r,h,n,s)},d.prototype.__search=function(r,n,s,h,a){for(var v=0;v<s.numberActives&&1===r.comparator(n,s.keys[v].key);)v++;v<s.numberActives&&0===r.comparator(s.keys[v].key,n)?h(null!=a&&1==a||s.keys[v].data):!0===s.isLeaf?h(null):r._diskRead(s.children[v],function(l){r.__search(r,n,l,h,a)})},d.prototype.walk=function(r,n){this.__walk(this,this.root,r,n)},d.prototype.__walk=function(r,n,s,h){var a=n.numberActives,v=0;if(n.isLeaf){for(v=0;v<n.numberActives;v++)s(n.keys[v]);return h()}o.whilst(function(){return v<a},function(l){r._diskRead(n.children[v],function(f){r.__walk(r,f,s,function(){r._diskRead(n.keys[v],function(c){s(c),v++,l()})})})},function(){r._diskRead(n.children[a],function(l){r.__walk(r,l,s,function(){h()})})})},d.prototype.walkNodes=function(r){this.__walkNodes(this,root,r,function(){})},d.prototype.__walkNodes=function(r,n,s,h){if(n.isLeaf)return s(n),h();s(n);var a=n.numberActives,v=0;o.whilst(function(){return v<a},function(l){r._diskRead(n.children[v],function(f){r.__walkNodes(r,f,s,function(){v++,l()})})},function(){r._diskRead(n.children[a],function(l){r.__walkNodes(r,l,s,function(){})})})},d.prototype._splitChild=function(r,n,s,h){var a=this._allocateNode();a.isLeaf=s.isLeaf,a.level=s.level,a.numberActives=this.order-1;var v=s.keys[this.order-1];s.keys[this.order-1]=null;for(var l=0;l<this.order-1;l++)a.keys[l]=s.keys[l+this.order],s.keys[l+this.order]=null,s.isLeaf||(a.children[l]=s.children[l+this.order],s.children[l+this.order]=null);for(s.isLeaf||(a.children[l]=s.children[l+this.order],s.children[l+this.order]=null),s.numberActives=this.order-1,l=r.numberActives+1;l>n+1;l--)r.children[l]=r.children[l-1];for(r.children[n+1]=a,l=r.numberActives;l>n;l--)r.keys[l]=r.keys[l-1];r.keys[n]=v,r.numberActives++;var f=this;this._diskWrite(a,function(c){f._diskWrite(r,function(E){E.children[n+1]=c,f._diskWrite(s,function(_){return h(E)})})})},d.prototype.insert=function(r,n,s){if(this.root.numberActives===2*this.order-1){var h=this._allocateNode();h.isLeaf=!1,h.level=this.root.level+1,h.numberActives=0,h.children[0]=this.root;var a=this;this._splitChild(h,0,this.root,function(v){h=v,a.root=h,a._updateRootNode(h,function(l){a._insertNonFull(l,r,n,s)})})}else this._insertNonFull(this.root,r,n,s)},d.prototype._insertNonFull=function(r,n,s,h){var a=r.numberActives-1;this.__insertNonFull(this,r,a,n,s,h)},d.prototype.__insertNonFull=function(r,n,s,h,a,v){if(n.isLeaf){for(;s>=0&&-1===r.comparator(h,n.keys[s].key);)n.keys[s+1]=n.keys[s],s--;s>=0&&0===r.comparator(h,n.keys[s].key)?n.keys[s]={key:h,data:a}:(n.keys[s+1]={key:h,data:a},n.numberActives++),r._diskWrite(n,function(f){return v(f)})}else{for(;s>=0&&-1===r.comparator(h,n.keys[s].key);)s--;s++;var l=r;r._diskRead(n.children[s],function(f){f.numberActives===2*l.order-1?l._splitChild(n,s,f,function(){1===l.comparator(h,n.keys[s].key)&&s++,l._diskRead(n.children[s],function(c){s=c.numberActives-1,l.__insertNonFull(r,c,s,h,a,v)})}):l._diskRead(n.children[s],function(c){s=c.numberActives-1,l.__insertNonFull(r,c,s,h,a,v)})})}},d.prototype.delete=function(r,n){var s=this.root;d.prototype.__deleteSearchNode(this,r,s,n)},d.prototype.__deleteSearchNode=function(r,n,s,h){var a=0;if(0===s.numberActives)return h(!1);for(;a<s.numberActives&&1===r.comparator(n,s.keys[a].key);)a++;var v=a;if(a<s.numberActives&&0===r.comparator(n,s.keys[a].key))return r.__deleteNodeFound(r,v,n,s,h);if(!0===s.isLeaf)return h(!1);var l=s;r._diskRead(s.children[a],function(f){if(null===f)return h(!1);var c=!1,E=!1,_=null,O=null;v===l.numberActives?(E=!0,O=l.children[v-1],_=l.children[v-1]):0===v?(c=!0,_=l.children[1],O=l.children[1]):(O=l.children[v-1],_=l.children[v+1]),r._diskRead(O,function(N){r._diskRead(_,function(A){!0===E&&(A=null),!0===c&&(N=null),f.numberActives===r.order-1&&null!=l?null!=A&&A.numberActives>r.order-1?r._moveKey(l,a,-1,function(y){r.__deleteSearchNode(r,n,f,h)}):null!=N&&N.numberActives>r.order-1?r._moveKey(l,a,1,function(y){r.__deleteSearchNode(r,n,f,h)}):null!=N&&N.numberActives===r.order-1?r._mergeSiblings(l,a,-1,function(y){r.__deleteSearchNode(r,n,y,h)}):null!=A&&A.numberActives===r.order-1&&r._mergeSiblings(l,a,1,function(y){r.__deleteSearchNode(r,n,y,h)}):r.__deleteSearchNode(r,n,f,h)})})})},d.prototype.__deleteNodeFound=function(r,n,s,h,a){return h.isLeaf&&h.numberActives>r.order-1||h.isLeaf&&h===r.root?(r._deleteKeyFromNode(h,n,function(){a(!0)}),!0):(!1===h.isLeaf&&r._diskRead(h.children[n],function(v){v.numberActives>r.order-1?r._getMaxKeyPos(r,v,function(l){s=l.node.keys[l.index],h.keys[n]=s,r._diskWrite(h,function(f){f=v,s=s.key,r.__deleteSearchNode(r,s,f,a)})}):r._diskRead(h.children[n+1],function(l){l.numberActives>r.order-1?r._getMinKeyPos(r,l,function(f){s=f.node.keys[f.index],h.keys[n]=s,r._diskWrite(h,function(c){c=l,s=s.key,r.__deleteSearchNode(r,s,c,a)})}):v.numberActives===r.order-1&&l.numberActives===r.order-1&&r._mergeNodes(v,h.keys[n],l,function(f){h.children[n]=f;for(var c=++n;c<h.numberActives;c++)h.children[c]=h.children[c+1],h.keys[c-1]=h.keys[c];h.children[c]=null,h.keys[c-1]=null,h.numberActives--,0===h.numberActives&&r.root===h&&(r.root=f),r._diskWrite(h,function(E){r.__deleteSearchNode(r,s,f,a)})})})}),void(h.isLeaf&&h.numberActives>r.order-1&&r._deleteKeyFromNode(h,n,function(v){r.__deleteSearchNode(r,s,v,a)})))},d.prototype._moveKey=function(r,n,s,h){1===s&&n--;var a=this;a._diskRead(r.children[n],function(v){a._diskRead(r.children[n+1],function(l){if(-1==s){v.keys[v.numberActives]=r.keys[n],v.children[v.numberActives+1]=l.children[0],l.children[0]=null,v.numberActives++,r.keys[n]=l.keys[0];for(var f=1;f<l.numberActives;f++)l.keys[f-1]=l.keys[f],l.children[f-1]=l.children[f];l.children[l.numberActives-1]=l.children[l.numberActives],l.numberActives--}else{for(l.children[l.numberActives+1]=l.children[l.numberActives],f=l.numberActives;f>0;f--)l.children[f]=l.children[f-1],l.keys[f]=l.keys[f-1];l.keys[0]=null,l.children[0]=null,l.children[0]=v.children[v.numberActives],l.keys[0]=r.keys[n],l.numberActives++,v.children[v.numberActives]=null,r.keys[n]=v.keys[v.numberActives-1],v.keys[v.numberActives-1]=null,v.numberActives--}a._diskWrite(v,function(c){a._diskWrite(l,function(E){a._diskWrite(r,function(_){return h(_)})})})})})},d.prototype._mergeSiblings=function(r,n,s,h){var a,v,l,f;n===r.numberActives?(n--,l=r.children[r.numberActives-1],f=r.children[r.numberActives]):(l=r.children[n],f=r.children[n+1]);var c=this;c._diskRead(l,function(E){c._diskRead(f,function(_){var O=c._allocateNode();for(O.isLeaf=E.isLeaf,O.level=E.level,v=0;v<c.order-1;v++)O.keys[v]=E.keys[v],O.children[v]=E.children[v];for(O.keys[c.order-1]=r.keys[n],O.children[c.order-1]=E.children[c.order-1],v=0;v<c.order-1;v++)O.keys[v+c.order]=_.keys[v],O.children[v+c.order]=_.children[v];for(O.children[2*c.order-1]=_.children[c.order-1],r.children[n]=O,v=n;v<r.numberActives;v++)r.keys[v]=r.keys[v+1],r.children[v+1]=r.children[v+2];for(O.numberActives=E.numberActives+_.numberActives+1,r.numberActives--,a=r.numberActives;a<2*c.order-1;a++)r.keys[a]=null;0===r.numberActives&&c.root===r&&(c.root=O,O.level?O.isLeaf=!1:O.isLeaf=!0),c._diskWrite(O,function(N){c._diskWrite(r,function(A){c._diskDelete(E,function(){c._diskDelete(_,function(){if(c.root!==N)return h(N);c._updateRootNode(c.root,function(){return h(N)})})})})})})})},d.prototype._deleteKeyFromNode=function(r,n,s){var h,a=2*this.order-1;if(r.numberActives<a&&(a=r.numberActives),!1===r.isLeaf)return!1;for(r.keys[n],h=n;h<a-1;h++)r.keys[h]=r.keys[h+1];r.keys.pop(),r.numberActives--,this._diskWrite(r,function(v){return s(v)})},d.prototype._mergeNodes=function(r,n,s,h){var a,v;for((a=this._allocateNode()).isLeaf=!0,v=0;v<r.numberActives;v++)a.keys[v]=r.keys[v],a.children[v]=r.children[v];for(a.children[r.numberActives]=r.children[r.numberActives],a.keys[r.numberActives]=n,v=0;v<s.numberActives;v++)a.keys[v+r.numberActives+1]=s.keys[v],a.children[v+r.numberActives+1]=s.children[v];a.children[2*this.order-1]=s.children[s.numberActives],a.numberActives=r.numberActives+s.numberActives+1,a.isLeaf=r.isLeaf,a.level=r.level;var l=this;this._diskWrite(a,function(f){l._diskDelete(r,function(){l._diskDelete(s,function(){return h(f)})})})},d.prototype.audit=function(r){var n=[],s=[],h=this,a=function(l){for(var f=0;f<s.length;f++)if(0===h.comparator(s[f],l)){var c=" !!! duplicated key "+l;!0===r&&console.log(c),n.push(c)}},v=null;return h=this,this.walkNodes(function(l){!0===r&&(console.log("--- Node at "+l.level+" level"),console.log(" - leaf? "+l.isLeaf),console.log(" - num actives? "+l.numberActives),console.log(" - keys: "));for(var f=l.numberActives;f<l.keys.length;f++)null!=l.keys[f]&&!0===r&&(console.log(" * warning : redundant key data"),n.push(" * warning : redundant key data"));for(f=l.numberActives+1;f<l.children.length;f++)null!=l.children[f]&&!0===r&&(console.log(" * warning : redundant children data"),n.push(" * warning : redundant key data"));if(!1===l.isLeaf)for(f=0;f<l.numberActives;f++){var c=this._diskRead(l.children[f]).keys[this._diskRead(l.children[f]).numberActives-1].key,E=this._diskRead(l.children[f+1]).keys[0].key;if(!0===r&&console.log("   "+l.keys[f].key+"("+c+","+E+")"),-1===h.comparator(l.keys[f].key,c)){var _=" !!! value max left "+c+" > key "+l.keys[f].key;!0===r&&console.log(_),n.push(_)}1===h.comparator(l.keys[f].key,E)&&(_=" !!! value min right "+E+" < key "+l.keys[f].key,!0===r&&console.log(_),n.push(_)),a(l.keys[f].key),s.push(l.keys[f].key)}else for(null===v?v=l.level:v!=l.level&&(_=" !!! Leaf node with wrong level value",!0===r&&console.log(_),n.push(_)),f=0;f<l.numberActives;f++)!0===r&&console.log(" "+l.keys[f].key),a(l.keys[f].key),s.push(l.keys[f].key);l!=h.root&&(l.numberActives>2*h.order-1&&(!0===r&&(_=" !!!! MAX num keys restriction violated "),console.log(_),n.push(_)),l.numberActives<h.order-1&&(!0===r&&(_=" !!!! MIN num keys restriction violated "),console.log(_),n.push(_)))}),n},d.prototype._getMaxKeyPos=function(r,n,s){var h={};return null===n?s(null):!0===n.isLeaf?(h.node=n,h.index=n.numberActives-1,s(h)):(h.node=n,h.index=n.numberActives-1,void r._diskRead(n.children[n.numberActives],function(a){return r._getMaxKeyPos(r,a,s)}))},d.prototype._getMinKeyPos=function(r,n,s){var h={};if(null===n&&s(null),!0===n.isLeaf)return h.node=n,h.index=0,s(h);h.node=n,h.index=0,r._diskRead(n.children[0],function(a){return r._getMinKeyPos(r,a,s)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};K.exports={Tree:d,Node:e}},{"./utils":140}],124:[function(q,K,ee){var M=q("./utils"),o=q("./utils"),x=(q("./quad_index").QuadIndex,q("./quad_index").Pattern),d=q("./rdf_model"),e=q("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var r=0;r<this.indices.length;r++){var n=this.indices[r];this.indexMap[n]={},this.queriesIndexMap[n]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(r,n){this.updateInProgress[r].push(n)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(r){if(!0!==this.ongoingModification){var n=this;if(null!=this.updateInProgress){var s=n.updateInProgress;n.updateInProgress=null,this.sendNotification(Callbacks.deleted,s[Callbacks.deleted],function(){n.sendNotification(Callbacks.added,s[Callbacks.added],function(){n.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){n.dispatchQueries(function(){r(!0)})})})})}else r(!0)}else r(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(r,n,s){for(var h={},a=0;a<n.length;a++){var v=n[a];for(var l in this.indexMap){var f=this.indexMap[l],c=this.componentOrders[l];this._searchCallbacksInIndex(f,c,r,v,h),0!=this.pendingQueries.length&&(f=this.queriesIndexMap[l],this._searchQueriesInIndex(f,c,v))}}this.dispatchNotifications(h),s?.(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(r,n,s){for(var h=this.emptyNotificationsMap[r]||[],a=0;a<h.length;a++)h[a](r,n);s()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(r){for(var n in r){var s=this.callbacksMap[n],h=r[n][Callbacks.deleted];if(null!=h)try{s(Callbacks.deleted,h)}catch{}for(var a in r[n])if(a!=Callbacks.deleted)try{s(a,r[n][a])}catch{}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(r,n,s,h,a){for(var v=h[1],l=(h=h[0],0);l<n.length+1;l++){for(var f=r._||[],c=[],E=0;E<f.length;E++){var _=f[E];null!=this.callbacksMap[_]&&(a[_]=a[_]||{},a[_][s]=a[_][s]||[],a[_][s].push(h),c.push(_))}r._=c;var O=n[l];if(null==r[""+v[O]])break;r=r[""+v[O]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(r,n){var s=this.emptyNotificationsMap[r]||[];s.push(n),this.emptyNotificationsMap[r]=s},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(r,n){var s=this.emptyNotificationsMap[r];null!=s&&(s=M.reject(s,function(h){return h===n})),this.emptyNotificationsMap[r]=s},Callbacks.CallbacksBackend.prototype.subscribe=function(r,n,s,h,a,v){var l=this._tokenizeComponents(r,n,s,h),f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var c=this;this.engine.normalizeQuad(l,f,!0,function(E){for(var _=new x(E),O=c._indexForPattern(_),N=c.componentOrders[O],A=c.indexMap[O],y=0;y<N.length;y++){var F=E[N[y]];if("_"===F){null==A._&&(A._=[]),c.callbackCounter++,A._.push(c.callbackCounter),c.callbacksMap[c.callbackCounter]=a,c.callbacksInverseMap[a]=c.callbackCounter;break}y===N.length-1?(A[F]=A[F]||{_:[]},c.callbackCounter++,A[F]._.push(c.callbackCounter),c.callbacksMap[c.callbackCounter]=a,c.callbacksInverseMap[a]=c.callbackCounter):(A[F]=A[F]||{},A=A[F])}v?.(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(r){var n=this.callbacksInverseMap[r];null!=n&&(delete this.callbacksInverseMap[r],delete this.callbacksMap[n])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(r,n,s,h){var a={};return null==r?a.subject=Callbacks.ANYTHING:0==r.indexOf("_:")?a.subject={token:"blank",value:r}:a.subject={token:"uri",value:r},a.predicate=null==n?Callbacks.ANYTHING:{token:"uri",value:n},a.object=null==s?Callbacks.ANYTHING:{token:"uri",value:s},a.graph=null==h?Callbacks.ANYTHING:{token:"uri",value:h},a},Callbacks.CallbacksBackend.prototype._indexForPattern=function(r){for(var n=r.indexKey,s=this.indices,h=0;h<s.length;h++)for(var a=s[h],v=this.componentOrders[a],l=0;l<v.length&&!1!==M.include(n,v[l]);l++)if(l==n.length-1)return a;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var r,n,s,h;4===arguments.length?(r=arguments[0],n=arguments[1],s=arguments[2],h=arguments[3]):(r=arguments[0],n=this.engine.lexicon.defaultGraphUri,s=arguments[1],h=arguments[2]);var a="CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+n+"> { <"+r+"> ?p ?o } }",v=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var f=[];this.engine.execute(a,function(c,E){if(c)h&&h(!1);else{var _=E,O=!1,N=function(A,y){if("eventsFlushed"===A&&O){O=!1;try{s(_)}catch{}}else if("eventsFlushed"!==A){O=!0;for(var F=0;F<y.length;F++){var j=y[F],G=d.buildRDFResource(j.subject,f,v.engine,l),P=d.buildRDFResource(j.predicate,f,v.engine,l),z=d.buildRDFResource(j.object,f,v.engine,l);null!=G&&null!=P&&null!=z&&(j=new d.Triple(G,P,z),A===Callbacks.added?_.add(j):A===Callbacks.deleted&&_.remove(j))}}};v.observersMap[s]=N,v.subscribeEmpty(Callbacks.eventsFlushed,N),v.subscribe(r,null,null,null,N,function(){try{s(_)}catch{}h&&h(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(r){var n=this.observersMap[r];return!!n&&(this.unsubscribe(n),this.unsubscribeEmpty(Callbacks.eventsFlushed,n),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(r,n,s){var h=this.aqt.parseQueryString(r),a=this.aqt.parseSelect(h.units[0]),v=this.aqt.collectBasicTriples(a),l=this,f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=r,this.queriesInverseMap[r]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=n,o.eachSeries(v,function(E,_){null==E.graph&&(E.graph=l.engine.lexicon.defaultGraphUriTerm),l.engine.normalizeQuad(E,f,!0,function(O){for(var N=new x(O),A=l._indexForPattern(N),y=l.componentOrders[A],F=l.queriesIndexMap[A],j=0;j<y.length;j++){var G=O[y[j]];if("string"==typeof G){null==F._&&(F._=[]),F._.push(c);break}j===y.length-1?(F[G]=F[G]||{_:[]},F[G]._.push(c)):(F[G]=F[G]||{},F=F[G])}_()})},function(){l.engine.execute(r,function(E,_){E?console.log("ERROR in query callback "+_):n(_)}),s?.()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(r){var n=this.queriesInverseMap[r];null!=n&&(delete this.queriesInverseMap[r],delete this.queriesMap[n],this.queriesList=M.reject(this.queriesList,function(s){return s===n}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(r,n,s){for(var h=s[1],a=(s=s[0],0);a<n.length+1;a++){for(var v=r._||[],l=[],f=0;f<v.length;f++){var c=v[f];M.include(this.pendingQueries,c)&&(M.remove(this.pendingQueries,function(_){return _===c}),this.matchedQueries.push(c)),null!=this.queriesMap[c]&&l.push(c)}r._=l;var E=n[a];if(null==r[""+h[E]])break;r=r[""+h[E]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(r){var n,s,h=this,a={};o.eachSeries(this.matchedQueries,function(v,l){null==a[v]?(a[v]=!0,n=h.queriesMap[v],s=h.queriesCallbacksMap[v],h.engine.execute(n,function(f,c){if(!f)try{s(c)}catch{}l()})):l()},function(){r()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,K.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(q,K,ee){var M=q("jsonld");ee.JSONLDParser={};var o=ee.JSONLDParser;o.parser={async:!0,parse:function(x,d,e,r){try{"string"==typeof x&&(x=JSON.parse(x)),async function(n,s,h){var a=null;const v=await M.toRDF(n,{});var O,N,A,l=function(O){return"BlankNode"===O.termType?{blank:O.value}:"NamedNode"===O.termType?{token:"uri",value:O.value}:"Literal"===O.termType?null!=O.language?{literal:'"'+O.value+'"@'+O.language}:null!==O.datatype?{literal:'"'+O.value+'"^^<'+O.datatype.value+">"}:{literal:'"'+O.value+'"'}:void 0};a=[];for(var c=v,E=0;E<c.length;E++){var _=c[E];O=_.subject,N=_.predicate,A=_.object,a.push({subject:l(O),predicate:l(N),object:l(A),graph:s})}h(null,a)}(x,d,r)}catch(n){r(n)}}},K.exports={JSONLDParser:o}},{jsonld:43}],126:[function(q,K,ee){var M=q("./utils"),o=q("./btree").Tree;Lexicon=function(x){var d=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,M.seq(function(e){new o(2,function(r){d.uris=r,e()})},function(e){new o(2,function(r){d.literals=r,e()})},function(e){new o(2,function(r){d.knownGraphs=r,e()})},function(e){new o(2,function(r){d.oidUris=r,e()})},function(e){new o(2,function(r){d.oidLiterals=r,e()})},function(e){new o(2,function(r){d.oidBlanks=r,e()})})(function(){x?.(d)})},Lexicon.prototype.registerGraph=function(x,d,e){x!=this.defaultGraphOid?this.knownGraphs.insert(x,d,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(x,d){var e=[];this.knownGraphs.walk(function(r){!0===x?e.push(r.data):e.push(r.key)},function(){d(e)})},Lexicon.prototype.registerUri=function(x,d){var e=this;x===this.defaultGraphUri?d(this.defaultGraphOid):this.uris.search(x,function(r){if(null==r){var n=e.oidCounter,s="u"+n;e.oidCounter++,M.seq(function(h){e.uris.insert(x,[n,0],function(){h()})},function(h){e.oidUris.insert(s,x,function(){h()})})(function(){d(n)})}else n=r[0],r[1]=r[1]+1,d(n)})},Lexicon.prototype.resolveUri=function(x,d){x===this.defaultGraphUri?d(this.defaultGraphOid):this.uris.search(x,function(e){d(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(x,d){x===this.defaultGraphUri?d(0):this.uris.search(x,function(e){d(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(x){var d=this.oidCounter;this.oidCounter++;var e=""+d;this.oidBlanks.insert(e,e,function(){x(d)})},Lexicon.prototype.resolveBlank=function(x,d){var e=this;this.oidBlanks.search(x,function(r){if(null!=r)d(r);else{var n=e.oidCounter;this.oidCounter++,d(""+n)}})},Lexicon.prototype.resolveBlankCost=function(x,d){d(0)},Lexicon.prototype.registerLiteral=function(x,d){var e=this;this.literals.search(x,function(r){if(null==r){var n="l"+(s=e.oidCounter);e.oidCounter++,M.seq(function(h){e.literals.insert(x,[s,0],function(){h()})},function(h){e.oidLiterals.insert(n,x,function(){h()})})(function(){d(s)})}else{var s=r[0];r[1]=r[1]+1,d(s)}})},Lexicon.prototype.resolveLiteral=function(x,d){this.literals.search(x,function(e){d(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(x,d){this.literals.search(x,function(e){d(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(x){var d;return-1!=(d=x.lastIndexOf("@"))&&'"'===x[d-1]&&null!=x.substring(d,x.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:x.substring(1,d-1),lang:x.substring(d+1,x.length)}:-1!=(d=x.lastIndexOf("^^"))&&'"'===x[d-1]&&"<"===x[d+2]&&">"===x[x.length-1]?{token:"literal",value:x.substring(1,d-1),type:x.substring(d+3,x.length-1)}:{token:"literal",value:x.substring(1,x.length-1)}},Lexicon.prototype.parseUri=function(x){return{token:"uri",value:x}},Lexicon.prototype.retrieve=function(x,d){var e=this;x===this.defaultGraphOid?d({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):M.seq(function(r,n){e.oidUris.search("u"+x,function(s){n(null,null!=s?e.parseUri(s):null)})},function(r,n){null==r?e.oidLiterals.search("l"+x,function(s){n(null,null!=s?e.parseLiteral(s):null)}):n(null,r)},function(r,n){null==r?e.oidBlanks.search(""+x,function(s){n(null,null!=s?{token:"blank",value:"_:"+x}:null)}):n(null,r)})(null,function(r,n){d(n)})},Lexicon.prototype.clear=function(x){var d=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,M.seq(function(e){new o(2,function(r){d.uris=r,e()})},function(e){new o(2,function(r){d.literals=r,e()})},function(e){new o(2,function(r){d.knownGraphs=r,e()})},function(e){new o(2,function(r){d.oidUris=r,e()})},function(e){new o(2,function(r){d.oidLiterals=r,e()})},function(e){new o(2,function(r){d.oidBlanks=r,e()})})(function(){x?.()})},Lexicon.prototype.unregister=function(x,d,e){var r=this;M.seq(function(n){r._unregisterTerm(x.subject.token,d.subject,n)},function(n){r._unregisterTerm(x.predicate.token,d.predicate,n)},function(n){r._unregisterTerm(x.object.token,d.object,n)},function(n){null!=x.graph?r._unregisterTerm(x.graph.token,d.graph,n):n()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(x,d,e){var r=this;if("uri"===x)if(d!=this.defaultGraphOid){var n="u"+d;r.oidUris.search(n,function(s){r.uris.search(s,function(h){var a=h[1];""+h[0]==""+d?0===a?M.seq(function(v){r.oidUris.delete(n,function(){v()})},function(v){r.uris.delete(s,function(){v()})},function(v){r.knownGraphs.delete(d,function(){v()})})(function(){e()}):r.uris.insert(s,[d,a-1],function(){e()}):e()})})}else e();else"literal"===x?(this.oidCounter++,n="l"+d,r.oidLiterals.search(n,function(s){r.literals.search(s,function(h){var a=h[1];""+h[0]==""+d?0===a?M.seq(function(v){r.oidLiterals.delete(n,function(){v()})},function(v){r.literals.delete(s,function(){v()})})(function(){e()}):r.literals.insert(s,[d,a-1],function(){e()}):e()})})):"blank"===x?r.oidBlanks.delete(""+d,function(){e()}):e()},K.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(q,K,ee){if(!q("./utils").isWorker()){var M=q("http"),o=q("https"),x=q("url");NetworkTransport={load:function(d,e,r,n){var s=n??3,h=x.parse(d,!0,!0),a={host:h.host,hostname:h.hostname,method:"GET",path:h.path,headers:{host:h.hostname,Accept:e}},v=null;"http:"===h.protocol?(a.port=h.port||80,v=M):"https:"===h.protocol&&(a.port=h.port||443,v=o);var l=v.request(a,function(f){var c=f.headers,E="";if("2"==(""+f.statusCode)[0])f.on("end",function(){r(null,{headers:c,data:E})}),f.on("data",function(O){E+=O});else if("3"==(""+f.statusCode)[0])if(0==s)r(new Error("Too many redirections"));else{var _=c.Location||c.location;null!=_?NetworkTransport.load(_,e,r,s-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+f.statusCode))});l.on("error",r),l.end()}},K.exports={NetworkTransport}}},{"./utils":140,http:91,https:20,url:112}],128:[function(q,K,ee){K.exports=function(){"use strict";function M(o,x,d,e){this.message=o,this.expected=x,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,M)}return function(o,x){function d(){this.constructor=o}d.prototype=x.prototype,o.prototype=new d}(M,Error),M.buildMessage=function(o,x){var s,d={literal:function(s){return'"'+r(s.text)+'"'},class:function(s){var h,a="";for(h=0;h<s.parts.length;h++)a+=s.parts[h]instanceof Array?n(s.parts[h][0])+"-"+n(s.parts[h][1]):n(s.parts[h]);return"["+(s.inverted?"^":"")+a+"]"},any:function(s){return"any character"},end:function(s){return"end of input"},other:function(s){return s.description}};function e(s){return s.charCodeAt(0).toString(16).toUpperCase()}function r(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+e(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+e(h)})}function n(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+e(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+e(h)})}return"Expected "+function(s){var h,a,v,l=new Array(s.length);for(h=0;h<s.length;h++)l[h]=(v=s[h],d[v.type](v));if(l.sort(),l.length>0){for(h=1,a=1;h<l.length;h++)l[h-1]!==l[h]&&(l[a]=l[h],a++);l.length=a}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}(o)+" but "+(((s=x)?'"'+r(s)+'"':"end of input")+" found.")},{SyntaxError:M,parse:function(o,x){x=void 0!==x?x:{};var d,e={},r={DOCUMENT:ia},n=ia,s=Oe("[1] QueryUnit"),h=Oe("[2] Query"),a=Oe("[3] Prologue"),v=Oe("[4] BaseDecl"),l="BASE",f=Te("BASE",!1),c="base",E=Te("base",!1),_=Oe("[5] PrefixDecl"),O="PREFIX",N=Te("PREFIX",!1),A="prefix",y=Te("prefix",!1),F=Oe("[6] SelectQuery"),j=Oe("[7] SubSelect"),G=Oe("[8] SelectClause"),P="SELECT",z=Te("SELECT",!1),Y="select",ie=Te("select",!1),ye="DISTINCT",fe=Te("DISTINCT",!1),re="distinct",V=Te("distinct",!1),$="REDUCED",ne=Te("REDUCED",!1),he="reduced",xe=Te("reduced",!1),ge="(",ce=Te("(",!1),ke="AS",Ne=Te("AS",!1),Me="as",oe=Te("as",!1),k=")",Q=Te(")",!1),X="*",se=Te("*",!1),pe=Oe("[9] ConstructQuery"),ve="CONSTRUCT",Pe=Te("CONSTRUCT",!1),Qe="construct",Ue=Te("construct",!1),We="WHERE",Ke=Te("WHERE",!1),ot="where",me=Te("where",!1),Ee="{",Ce=Te("{",!1),H="}",Z=Te("}",!1),ae=Oe("[10] DescribeQuery"),de="DESCRIBE",_e=Te("DESCRIBE",!1),be=Oe("[11] AskQuery"),Ae="ASK",Ie=Te("ASK",!1),Le="ask",qe=Te("ask",!1),ze=Oe("[12] DatasetClause"),Be="FROM",Ze=Te("FROM",!1),rt="from",tt=Te("from",!1),it=Oe("[13] DefaultGraphClause"),st=Oe("[14] NamedGraphClause"),Ye="NAMED",$e=Te("NAMED",!1),at="named",ct=Te("named",!1),ut=Oe("[15] SourceSelector"),dr=Oe("[16] WhereClause"),Fn=Oe("[17] SolutionModifier"),Cn=Oe("[18] GroupClause"),Sr="GROUP",Sn=Te("GROUP",!1),Tr="group",Tn=Te("group",!1),Wt="BY",vr=Te("BY",!1),Ht="by",yr=Te("by",!1),jr=Oe("[19] GroupCondition"),Mt=Oe("[20] HavingClause"),gr="HAVING",Ir=Te("HAVING",!1),Rr=Oe("[21] HavingCondition"),Tt=Oe("[22] OrderClause"),Nr="ORDER",Or=Te("ORDER",!1),mr="order",$t=Te("order",!1),jn=Oe("[23] OrderCondition"),In=Te("ASC",!1),qa=Te("asc",!1),Fi="DESC",Ha=Te("DESC",!1),Ci="desc",Va=Te("desc",!1),Ja=Oe("[24] LimitOffsetClauses"),za=Oe("[25] LimitClause"),Si="LIMIT",Xa=Te("LIMIT",!1),Ti="limit",Wa=Te("limit",!1),$a=Oe("[26] OffsetClause"),ji="OFFSET",Ka=Te("OFFSET",!1),Ii="offset",Ya=Te("offset",!1),Za=Oe("[27] BindingsClause"),Ri="BINDINGS",eu=Te("BINDINGS",!1),tu=Oe("[28] BindingValue"),Dr="UNDEF",Ni=Te("UNDEF",!1),ru=Oe("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Lr="VALUES",Oi=Te("VALUES",!1),Pr="values",Di=Te("values",!1),nu=Oe("[29] UpdateUnit"),iu=Oe("[30] Update"),Ot=";",Dt=Te(";",!1),ou=Oe("[31] Update1"),su=Oe("[32] Load"),Li="LOAD",au=Te("LOAD",!1),Pi="load",uu=Te("load",!1),Bi="INTO",lu=Te("INTO",!1),Mi="into",cu=Te("into",!1),fu=Oe("[33] Clear"),Qi="CLEAR",pu=Te("CLEAR",!1),Ui="clear",hu=Te("clear",!1),Kt="SILENT",Rn=Te("SILENT",!1),Yt="silent",Nn=Te("silent",!1),du=Oe("[34] Drop"),Gi="DROP",vu=Te("DROP",!1),qi="drop",yu=Te("drop",!1),gu=Oe("[35] Create"),Hi="CREATE",mu=Te("CREATE",!1),Vi="create",bu=Te("create",!1),xu=Oe("[36] InsertData"),Br="INSERT",Ji=Te("INSERT",!1),Mr="insert",zi=Te("insert",!1),Qr="DATA",Xi=Te("DATA",!1),Ur="data",Wi=Te("data",!1),wu=Oe("[37] DeleteData"),Zt="DELETE",On=Te("DELETE",!1),er="delete",Dn=Te("delete",!1),_u=Oe("[38] DeleteWhere"),ku=Oe("[39] Modify"),$i="WITH",Eu=Te("WITH",!1),Ki="with",Au=Te("with",!1),Fu=Oe("[40] DeleteClause"),Cu=Oe("[41] InsertClause"),Su=Oe("[42] UsingClause"),Yi="USING",Tu=Te("USING",!1),Zi="using",ju=Te("using",!1),Iu=Oe("[43] GraphRef"),tr="GRAPH",Ln=Te("GRAPH",!1),rr="graph",Pn=Te("graph",!1),Ru=Oe("[44] GraphRefAll"),eo="DEFAULT",Nu=Te("DEFAULT",!1),to="default",Ou=Te("default",!1),Du=Te("ALL",!1),Lu=Te("all",!1),Pu=Oe("[45] QuadPattern"),ro=function(u){return u.quadsContext},Bu=Oe("[46] QuadData"),Mu=Oe("[47] Quads"),wt=".",_t=Te(".",!1),Qu=Oe("[48] QuadsNotTriples"),Uu=Oe("[49] TriplesTemplate"),Gu=Oe("[50] GroupGraphPattern"),qu=Oe("[51] GroupGraphPatternSub"),Hu=Oe("[54] TriplesBlock"),Vu=Oe("[53] GraphPatternNotTriples"),Ju=Oe("[54] OptionalGraphPattern"),no="OPTIONAL",zu=Te("OPTIONAL",!1),io="optional",Xu=Te("optional",!1),Wu=Oe("[55] GraphGraphPattern"),$u=Oe("[56] ServiceGraphPattern"),oo="SERVICE",Ku=Te("SERVICE",!1),Yu=Oe("[57] MinusGraphPattern"),so="MINUS",Zu=Te("MINUS",!1),ao="minus",el=Te("minus",!1),tl=Oe("[58] GroupOrUnionGraphPattern"),Gr="UNION",uo=Te("UNION",!1),qr="union",lo=Te("union",!1),rl=Oe("[59] Filter"),co="FILTER",nl=Te("FILTER",!1),fo="filter",il=Te("filter",!1),ol=Oe("[60] Bind"),po="BIND",sl=Te("BIND",!1),ho="bind",al=Te("bind",!1),ul=Oe("[60] Constraint"),ll=Oe("[61] InlineData"),cl=Oe("[62] DataBlock"),fl=Oe("[63] InlineDataOneVar"),pl=Oe("[64] InlineDataFull"),hl=Oe("[65] DataBlockValue"),dl=Oe("[61] FunctionCall"),vl=Oe("[62] ArgList"),vo=function(){return{token:"args",value:[]}},yt=",",gt=Te(",",!1),yl=Oe("[63] ExpressionList"),gl=Oe("[64] ConstructTemplate"),ml=Oe("[65] ConstructTriples"),bl=Oe("[66] TriplesSameSubject"),xl=Oe("[83] PropertyListPathNotEmpty"),wl=Oe("[67] PropertyListNotEmpty"),_l=Oe("[68] PropertyList"),kl=Oe("[86] ObjectListPath"),El=Oe("[69] ObjectList"),Al=Oe("[87] ObjectPath"),Fl=Oe("[70] Object"),Cl=Oe("[71] Verb"),Hr="a",Vr=Te("a",!1),Sl=Oe("[72] TriplesSameSubjectPath"),Tl=Oe("[73] PropertyListNotEmptyPath"),jl=Oe("[74] PropertyListPath"),Il=Oe("[75]"),Rl=Oe("[76] VerbSimple"),Nl=Oe("[77] Path"),Ol=Oe("[78] PathAlternative"),Jr="|",zr=Te("|",!1),Dl=Oe("[79] PathSequence"),Vt="/",Jt=Te("/",!1),Ll=Oe("[88] PathElt"),Pl=Oe("[81] PathEltOrInverse"),yo=Te("^",!1),Bl=Oe("[82] PathMod"),Bn="?",Mn=Te("?",!1),Qt="+",Ut=Te("+",!1),Ml=Oe("[83] PathPrimary"),Qn="!",Un=Te("!",!1),Ql=Oe("[85] PathOneInPropertySet"),Ul=Oe("[86] Integer"),Gl=Oe("[100] TriplesNodePath"),ql=Oe("[87] TriplesNode"),Hl=Oe("[101] BlankNodePropertyListPath"),Gn="[",qn=Te("[",!1),Hn="]",Vn=Te("]",!1),Vl=Oe("[88] BlankNodePropertyList"),Jl=Oe("[103] CollectionPath"),zl=Oe("[89] Collection"),Xl=Oe("[105] GraphNodePath"),go=function(u){return u[1]},Wl=Oe("[90] GraphNode"),$l=Oe("[91] VarOrTerm"),Kl=Oe("[92] VarOrIRIref"),Yl=Oe("[93] Var"),Zl=Oe("[94] GraphTerm"),ec=Oe("[95] Expression"),tc=Oe("[96] ConditionalOrExpression"),Xr="||",mo=Te("||",!1),rc=Oe("[97] ConditionalAndExpression"),Wr="&&",bo=Te("&&",!1),nc=Oe("[98] ValueLogical"),ic=Oe("[99] RelationalExpression"),$r="=",Kr=Te("=",!1),Yr="!=",xo=Te("!=",!1),Jn="<",zn=Te("<",!1),Xn=">",Wn=Te(">",!1),Zr="<=",wo=Te("<=",!1),en=">=",_o=Te(">=",!1),tn="I",rn=Te("I",!1),nn="i",on=Te("i",!1),nr="N",ir=Te("N",!1),or="n",sr=Te("n",!1),ko="O",Eo=Te("O",!1),Ao="o",Fo=Te("o",!1),Co="T",So=Te("T",!1),To="t",jo=Te("t",!1),oc=Oe("[100] NumericExpression"),sc=Oe("[101] AdditiveExpression"),jt="-",It=Te("-",!1),ac=Oe("[102] MultiplicativeExpression"),uc=Oe("[103] UnaryExpression"),lc=Oe("[104] PrimaryExpression"),cc=Oe("[105] BrackettedExpression"),fc=Oe("[106] BuiltInCall"),pc=Te("STR",!1),hc=Te("str",!1),Io="LANG",dc=Te("LANG",!1),Ro="lang",vc=Te("lang",!1),No="LANGMATCHES",yc=Te("LANGMATCHES",!1),Oo="langmatches",gc=Te("langmatches",!1),Do="DATATYPE",mc=Te("DATATYPE",!1),Lo="datatype",bc=Te("datatype",!1),Po="BOUND",xc=Te("BOUND",!1),Bo="bound",wc=Te("bound",!1),_c=Te("IRI",!1),kc=Te("iri",!1),Ec=Te("URI",!1),Ac=Te("uri",!1),Mo="BNODE",Fc=Te("BNODE",!1),Qo="bnode",Cc=Te("bnode",!1),Uo="COALESCE",Sc=Te("COALESCE",!1),Go="coalesce",Tc=Te("coalesce",!1),jc=Te("IF",!1),Ic=Te("if",!1),qo="ISLITERAL",Rc=Te("ISLITERAL",!1),Ho="isliteral",Nc=Te("isliteral",!1),Vo="isLITERAL",Oc=Te("isLITERAL",!1),Jo="ISBLANK",Dc=Te("ISBLANK",!1),zo="isblank",Lc=Te("isblank",!1),Xo="isBLANK",Pc=Te("isBLANK",!1),Wo="SAMETERM",Bc=Te("SAMETERM",!1),$o="sameterm",Mc=Te("sameterm",!1),Ko="ISURI",Qc=Te("ISURI",!1),Yo="isuri",Uc=Te("isuri",!1),Zo="isURI",Gc=Te("isURI",!1),es="ISIRI",qc=Te("ISIRI",!1),ts="isiri",Hc=Te("isiri",!1),rs="isIRI",Vc=Te("isIRI",!1),ns="custom:",Jc=Te("custom:",!1),is="CUSTOM:",zc=Te("CUSTOM:",!1),os=/^[a-zA-Z0-9_]/,ss=ft([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Xc=Oe("[107] RegexExpression"),as="REGEX",Wc=Te("REGEX",!1),us="regex",$c=Te("regex",!1),Kc=Oe("[108] ExistsFunc"),sn="EXISTS",ls=Te("EXISTS",!1),an="exists",cs=Te("exists",!1),Yc=Oe("[109] NotExistsFunc"),fs="NOT",Zc=Te("NOT",!1),ps="not",ef=Te("not",!1),tf=Oe("[110] Aggregate"),hs="COUNT",rf=Te("COUNT",!1),ds="count",nf=Te("count",!1),vs="GROUP_CONCAT",of=Te("GROUP_CONCAT",!1),ys="group_concat",sf=Te("group_concat",!1),gs="SEPARATOR",af=Te("SEPARATOR",!1),ms="SUM",uf=Te("SUM",!1),bs="sum",lf=Te("sum",!1),xs="MIN",cf=Te("MIN",!1),ws="min",ff=Te("min",!1),_s="MAX",pf=Te("MAX",!1),ks="max",hf=Te("max",!1),Es="AVG",df=Te("AVG",!1),As="avg",vf=Te("avg",!1),yf=Oe("[117] IRIrefOrFunction"),gf=Oe("[112] RDFLiteral"),mf=Te("^^",!1),bf=Oe("[113] NumericLiteral"),xf=Oe("[114] NumericLiteralUnsigned"),wf=Oe("[115] NumericLiteralPositive"),_f=Oe("[116] NumericLiteralNegative"),kf=Oe("[117] BooleanLiteral"),Fs="TRUE",Ef=Te("TRUE",!1),Cs="true",Af=Te("true",!1),Ss="FALSE",Ff=Te("FALSE",!1),Ts="false",Cf=Te("false",!1),Sf=Oe("[118] String"),un=function(u){return{token:"string",value:u}},Tf=Oe("[119] IRIref"),jf=Oe("[120] PrefixedName"),If=Oe("[121] BlankNode"),Rf=Oe("[122] IRI_REF"),js=/^[^<>"{}|\^`\\]/,Is=ft(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Nf=Oe("[123] PNAME_NS"),br=":",xr=Te(":",!1),Of=Oe("[124] PNAME_LN"),Df=Oe("[125] BLANK_NODE_LABEL"),Rs="_:",Lf=Te("_:",!1),Pf=Oe("[126] VAR1"),Bf=Oe("[127] VAR2"),Mf="$",Ns=Te("$",!1),Qf=Oe("[128] LANGTAG"),Uf="@",Os=Te("@",!1),Ds=/^[a-zA-Z]/,Ls=ft([["a","z"],["A","Z"]],!1,!1),ln=/^[a-zA-Z0-9]/,cn=ft([["a","z"],["A","Z"],["0","9"]],!1,!1),Gf=Oe("[129] INTEGER"),ht=/^[0-9]/,dt=ft([["0","9"]],!1,!1),qf=Oe("[130] DECIMAL"),Hf=Oe("[131] DOUBLE"),Vf=Oe("[132] INTEGER_POSITIVE"),Jf=Oe("[133] DECIMAL_POSITIVE"),Ps=function(u){return u.value="+"+u.value,u},zf=Oe("[134] DOUBLE_POSITIVE"),Xf=Oe("[135] INTEGER_NEGATIVE"),$n=function(u){return u.value="-"+u.value,u},Wf=Oe("[136] DECIMAL_NEGATIVE"),$f=Oe("[137] DOUBLE_NEGATIVE"),Kf=Oe("[138] EXPONENT"),Yf=/^[eE]/,Zf=ft(["e","E"],!1,!1),ep=/^[+\-]/,tp=ft(["+","-"],!1,!1),rp=Oe("[139] STRING_LITERAL1"),Kn="'",Yn=Te("'",!1),Bs=/^[^'\\\n\r]/,Ms=ft(["'","\\","\n","\r"],!0,!1),fn=function(u){return qt(u)},np=Oe("[140] STRING_LITERAL2"),Qs='"',Us=Te('"',!1),Gs=/^[^"\\\n\r]/,qs=ft(['"',"\\","\n","\r"],!0,!1),ip=Oe("[141] STRING_LITERAL_LONG1"),pn="'''",Hs=Te("'''",!1),Vs=/^[^'\\]/,Js=ft(["'","\\"],!0,!1),op=Oe("[142] STRING_LITERAL_LONG2"),hn='"""',zs=Te('"""',!1),Xs=/^[^"\\]/,Ws=ft(['"',"\\"],!0,!1),sp=Oe("[143] ECHAR"),$s=Te("\\",!1),ap=/^[tbnrf"']/,up=ft(["t","b","n","r","f",'"',"'"],!1,!1),lp=Oe("[144] NIL"),cp=Oe("[145] WS"),fp=/^[ ]/,pp=ft([" "],!1,!1),hp=/^[\t]/,dp=ft(["\t"],!1,!1),vp=/^[\r]/,yp=ft(["\r"],!1,!1),gp=/^[\n]/,mp=ft(["\n"],!1,!1),bp=Oe(" COMMENT"),xp="#",Ks=Te("#",!1),Ys=/^[^\n\r]/,Zs=ft(["\n","\r"],!0,!1),wp=Oe("[146] ANON"),_p=Oe("[147] PN_CHARS_BASE"),kp=/^[A-Z]/,Ep=ft([["A","Z"]],!1,!1),Ap=/^[a-z]/,Fp=ft([["a","z"]],!1,!1),Cp=/^[\xC0-\xD6]/,Sp=ft([["\xc0","\xd6"]],!1,!1),Tp=/^[\xD8-\xF6]/,jp=ft([["\xd8","\xf6"]],!1,!1),Ip=/^[\xF8-\u02FF]/,Rp=ft([["\xf8","\u02ff"]],!1,!1),Np=/^[\u0370-\u037D]/,Op=ft([["\u0370","\u037d"]],!1,!1),Dp=/^[\u037F-\u1FFF]/,Lp=ft([["\u037f","\u1fff"]],!1,!1),Pp=/^[\u200C-\u200D]/,Bp=ft([["\u200c","\u200d"]],!1,!1),Mp=/^[\u2070-\u218F]/,Qp=ft([["\u2070","\u218f"]],!1,!1),Up=/^[\u2C00-\u2FEF]/,Gp=ft([["\u2c00","\u2fef"]],!1,!1),qp=/^[\u3001-\uD7FF]/,Hp=ft([["\u3001","\ud7ff"]],!1,!1),Vp=/^[\uF900-\uFDCF]/,Jp=ft([["\uf900","\ufdcf"]],!1,!1),zp=/^[\uFDF0-\uFFFD]/,Xp=ft([["\ufdf0","\ufffd"]],!1,!1),Wp=/^[\u1000-\uEFFF]/,$p=ft([["\u1000","\uefff"]],!1,!1),Kp=Oe("[148] PN_CHARS_U"),ea=Te("_",!1),Yp=Oe("[149] VARNAME"),Zn=/^[\xB7]/,ei=ft(["\xb7"],!1,!1),ti=/^[\u0300-\u036F]/,ri=ft([["\u0300","\u036f"]],!1,!1),ni=/^[\u203F-\u2040]/,ii=ft([["\u203f","\u2040"]],!1,!1),Zp=Oe("[150] PN_CHARS"),eh=Oe("[151] PN_PREFIX"),th=Oe("[152] PN_LOCAL"),rh=Oe("[170] PLX"),nh=Oe("[171] PERCENT"),ih="%",ta=Te("%",!1),oh=Oe("[172] HEX"),sh=/^[A-F]/,ah=ft([["A","F"]],!1,!1),uh=/^[a-f]/,lh=ft([["a","f"]],!1,!1),ch=Oe("[173] PN_LOCAL_ESC"),fh=Te("~",!1),ph=Te("&",!1),t=0,dn=[{line:1,column:1}],Rt=0,oi=[],b=0;if("startRule"in x){if(!(x.startRule in r))throw new Error("Can't start parsing from rule \""+x.startRule+'".');n=r[x.startRule]}function Te(u,w){return{type:"literal",text:u,ignoreCase:w}}function ft(u,w,R){return{type:"class",parts:u,inverted:w,ignoreCase:R}}function Oe(u){return{type:"other",description:u}}function ra(u){var w,R=dn[u];if(R)return R;for(w=u-1;!dn[w];)w--;for(R={line:(R=dn[w]).line,column:R.column};w<u;)10===o.charCodeAt(w)?(R.line++,R.column=1):R.column++,w++;return dn[u]=R,R}function na(u,w){var R=ra(u),m=ra(w);return{start:{offset:u,line:R.line,column:R.column},end:{offset:w,line:m.line,column:m.column}}}function B(u){t<Rt||(t>Rt&&(Rt=t,oi=[]),oi.push(u))}function ia(){return b++,b++,R=t,(m=oa())!==e?(C=function(){var T,L,U,W,J,te,ue,le,we,Fe;if(b++,T=t,(L=aa())!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){for(W=[],J=Nt();J!==e;)W.push(J),J=Nt();if(W!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();if(J!==e)if((te=wr())!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if((le=_r())!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e&&(Fe=function(){var je,Se,Re,De,He,Ge,Je,Ve,Xe;if(b++,je=t,o.substr(t,8)===Ri?(Se=Ri,t+=8):(Se=e,0===b&&B(eu)),Se!==e){for(Re=[],De=mt();De!==e;)Re.push(De),De=mt();if(Re!==e)if(123===o.charCodeAt(t)?(De=Ee,t++):(De=e,0===b&&B(Ce)),De!==e){if(He=[],Ge=t,40===o.charCodeAt(t)?(Je=ge,t++):(Je=e,0===b&&B(ce)),Je!==e){if(Ve=[],(Xe=vn())!==e)for(;Xe!==e;)Ve.push(Xe),Xe=vn();else Ve=e;Ve!==e?(41===o.charCodeAt(t)?(Xe=k,t++):(Xe=e,0===b&&B(Q)),Xe!==e?Ge=Je=[Je,Ve,Xe]:(t=Ge,Ge=e)):(t=Ge,Ge=e)}else t=Ge,Ge=e;for(Ge===e&&(Ge=Pt());Ge!==e;){if(He.push(Ge),Ge=t,40===o.charCodeAt(t)?(Je=ge,t++):(Je=e,0===b&&B(ce)),Je!==e){if(Ve=[],(Xe=vn())!==e)for(;Xe!==e;)Ve.push(Xe),Xe=vn();else Ve=e;Ve!==e?(41===o.charCodeAt(t)?(Xe=k,t++):(Xe=e,0===b&&B(Q)),Xe!==e?Ge=Je=[Je,Ve,Xe]:(t=Ge,Ge=e)):(t=Ge,Ge=e)}else t=Ge,Ge=e;Ge===e&&(Ge=Pt())}He!==e?(125===o.charCodeAt(t)?(Ge=H,t++):(Ge=e,0===b&&B(Z)),Ge!==e?je=Se=[Se,Re,De,He,Ge]:(t=je,je=e)):(t=je,je=e)}else t=je,je=e;else t=je,je=e}else t=je,je=e;return je===e&&(je=null),b--,je===e&&(Se=e,0===b&&B(Za)),je}())!==e?T=L=function(je,Se,Re,De){for(var He={named:[],implicit:[]},Ge=0;Ge<Se.length;Ge++){var Je=Se[Ge];"default"===Je.kind?He.implicit.push(Je.graph):He.named.push(Je.graph)}0===He.named.length&&0===He.implicit.length&&He.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Ve={kind:"select",token:"executableunit"};return Ve.dataset=He,Ve.projection=je.vars,Ve.modifier=je.modifier,Ve.pattern=Re,null!=De&&null!=De.limit&&(Ve.limit=De.limit),null!=De&&null!=De.offset&&(Ve.offset=De.offset),null!=De&&null!=De.order&&""!=De.order&&(Ve.order=De.order),null!=De&&null!=De.group&&(Ve.group=De.group),Ve}(L,W,te,le):(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e}else t=T,T=e}else t=T,T=e;return b--,T===e&&(L=e,0===b&&B(F)),T}(),C===e&&(C=function(){var T,L,U,W,J,te,ue,le,we,Fe,je,Se,Re,De,He;for(b++,T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,9)===ve?(U=ve,t+=9):(U=e,0===b&&B(Pe)),U===e&&(o.substr(t,9)===Qe?(U=Qe,t+=9):(U=e,0===b&&B(Ue))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=function(){var Ge,Je,Ve,Xe,nt,et;if(b++,Ge=t,123===o.charCodeAt(t)?(Je=Ee,t++):(Je=e,0===b&&B(Ce)),Je!==e){for(Ve=[],Xe=I();Xe!==e;)Ve.push(Xe),Xe=I();if(Ve!==e)if((Xe=Fa())===e&&(Xe=null),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();nt!==e?(125===o.charCodeAt(t)?(et=H,t++):(et=e,0===b&&B(Z)),et!==e?Ge=Je=Xe:(t=Ge,Ge=e)):(t=Ge,Ge=e)}else t=Ge,Ge=e;else t=Ge,Ge=e}else t=Ge,Ge=e;return b--,Ge===e&&(Je=e,0===b&&B(gl)),Ge}())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e){for(ue=[],le=Nt();le!==e;)ue.push(le),le=Nt();if(ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e)if((we=wr())!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();Fe!==e&&(je=_r())!==e?T=L=function(Ge,Je,Ve,Xe){for(var nt={named:[],implicit:[]},et=0;et<Je.length;et++){var vt=Je[et];"default"===vt.kind?nt.implicit.push(vt.graph):nt.named.push(vt.graph)}0===nt.named.length&&0===nt.implicit.length&&nt.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var pt={kind:"construct",token:"executableunit"};return pt.dataset=nt,pt.template=Ge,pt.pattern=Ve,null!=Xe&&null!=Xe.limit&&(pt.limit=Xe.limit),null!=Xe&&null!=Xe.offset&&(pt.offset=Xe.offset),null!=Xe&&null!=Xe.order&&""!=Xe.order&&(pt.order=Xe.order),pt}(J,ue,we,je):(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,9)===ve?(U=ve,t+=9):(U=e,0===b&&B(Pe)),U===e&&(o.substr(t,9)===Qe?(U=Qe,t+=9):(U=e,0===b&&B(Ue))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e){for(J=[],te=Nt();te!==e;)J.push(te),te=Nt();if(J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(o.substr(t,5)===We?(ue=We,t+=5):(ue=e,0===b&&B(Ke)),ue===e&&(o.substr(t,5)===ot?(ue=ot,t+=5):(ue=e,0===b&&B(me))),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e)if(123===o.charCodeAt(t)?(we=Ee,t++):(we=e,0===b&&B(Ce)),we!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();if(Fe!==e)if((je=ar())===e&&(je=null),je!==e){for(Se=[],Re=I();Re!==e;)Se.push(Re),Re=I();if(Se!==e)if(125===o.charCodeAt(t)?(Re=H,t++):(Re=e,0===b&&B(Z)),Re!==e){for(De=[],He=I();He!==e;)De.push(He),He=I();De!==e&&(He=_r())!==e?T=L=function(Ge,Je,Ve){for(var Xe={named:[],implicit:[]},nt=0;nt<Ge.length;nt++){var et=Ge[nt];"default"===et.kind?Xe.implicit.push(et.graph):Xe.named.push(et.graph)}0===Xe.named.length&&0===Xe.implicit.length&&Xe.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var vt={kind:"construct",token:"executableunit"};return vt.dataset=Xe,vt.template=Je,vt.pattern={token:"basicgraphpattern",triplesContext:Je.triplesContext},null!=Ve&&null!=Ve.limit&&(vt.limit=Ve.limit),null!=Ve&&null!=Ve.offset&&(vt.offset=Ve.offset),null!=Ve&&null!=Ve.order&&""!=Ve.order&&(vt.order=Ve.order),vt}(J,je,He):(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e}return b--,T===e&&(L=e,0===b&&B(pe)),T}(),C===e&&(C=function(){var T,L,U,W,J,te;if(b++,T=t,o.substr(t,8)===de?(L=de,t+=8):(L=e,0===b&&B(_e)),L!==e){if(U=[],(W=fr())!==e)for(;W!==e;)U.push(W),W=fr();else U=e;if(U===e&&(42===o.charCodeAt(t)?(U=X,t++):(U=e,0===b&&B(se))),U!==e){for(W=[],J=Nt();J!==e;)W.push(J),J=Nt();W!==e?((J=wr())===e&&(J=null),J!==e&&(te=_r())!==e?T=L=[L,U,W,J,te]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e}else t=T,T=e;return b--,T===e&&(L=e,0===b&&B(ae)),T}(),C===e&&(C=function(){var T,L,U,W,J,te,ue;for(b++,T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,3)===Ae?(U=Ae,t+=3):(U=e,0===b&&B(Ie)),U===e&&(o.substr(t,3)===Le?(U=Le,t+=3):(U=e,0===b&&B(qe))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e){for(J=[],te=Nt();te!==e;)J.push(te),te=Nt();if(J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();te!==e&&(ue=wr())!==e?T=L=function(le,we){for(var Fe={named:[],implicit:[]},je=0;je<le.length;je++){var Se=le[je];"implicit"===Se.kind?Fe.implicit.push(Se.graph):Fe.named.push(Se.graph)}0===Fe.named.length&&0===Fe.implicit.length&&Fe.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Re={kind:"ask",token:"executableunit"};return Re.dataset=Fe,Re.pattern=we,Re}(J,ue):(t=T,T=e)}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e;return b--,T===e&&(L=e,0===b&&B(be)),T}()))),C!==e?(b++,L=t,o.substr(t,6)===Lr?(U=Lr,t+=6):(U=e,0===b&&B(Oi)),U===e&&(o.substr(t,6)===Pr?(U=Pr,t+=6):(U=e,0===b&&B(Di))),U!==e&&(W=ka())!==e?L=U=[U,W]:(t=L,L=e),L===e&&(L=null),L!==e&&(L=null!=(J=L)?J[1]:null),b--,(T=L)===e&&(L=e,0===b&&B(ru)),(D=T)!==e?R=m=function(T,L,U){return{token:"query",kind:"query",prologue:T,units:[L],inlineData:U}}(m,C,D):(t=R,R=e)):(t=R,R=e)):(t=R,R=e),b--,R===e&&(m=e,0===b&&B(h)),b--,(w=R)===e&&0===b&&B(s),(u=w)===e&&(u=function(){var w;return b++,w=da(),b--,w===e&&0===b&&B(nu),w}()),u;var u,w,R,m,C,D,T,L,U,W,J}function oa(){var u,w,R,m,C;if(b++,u=t,(w=function(){var D,T,L,U,W;for(b++,D=t,T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(o.substr(t,4)===l?(L=l,t+=4):(L=e,0===b&&B(f)),L===e&&(o.substr(t,4)===c?(L=c,t+=4):(L=e,0===b&&B(E))),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=kn())!==e?D=T=function(J){vh(J);var te={token:"base"};return te.value=J,te}(W):(t=D,D=e)}else t=D,D=e;else t=D,D=e;return b--,D===e&&(T=e,0===b&&B(v)),D}())===e&&(w=null),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e){for(m=[],C=sa();C!==e;)m.push(C),C=sa();m!==e?u=w={token:"prologue",base:w,prefixes:m}:(t=u,u=e)}else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(a)),u}function sa(){var u,w,R,m,C,D,T;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(o.substr(t,6)===O?(R=O,t+=6):(R=e,0===b&&B(N)),R===e&&(o.substr(t,6)===A?(R=A,t+=6):(R=e,0===b&&B(y))),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=wi())!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();D!==e&&(T=kn())!==e?u=w=function(L,U){dh(L,U);var W={token:"prefix"};return W.prefix=L,W.local=U,W}(C,T):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(_)),u}function aa(){var u,w,R,m,C,D,T,L,U,W,J,te,ue,le,we,Fe,je,Se,Re,De;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(o.substr(t,6)===P?(R=P,t+=6):(R=e,0===b&&B(z)),R===e&&(o.substr(t,6)===Y?(R=Y,t+=6):(R=e,0===b&&B(ie))),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(o.substr(t,8)===ye?(C=ye,t+=8):(C=e,0===b&&B(fe)),C===e&&(o.substr(t,8)===re?(C=re,t+=8):(C=e,0===b&&B(V))),C===e&&(o.substr(t,7)===$?(C=$,t+=7):(C=e,0===b&&B(ne)),C===e&&(o.substr(t,7)===he?(C=he,t+=7):(C=e,0===b&&B(xe)))),C===e&&(C=null),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e){for(T=[],L=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=mt())!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();J!==e?L=U=[U,W,J]:(t=L,L=e)}else t=L,L=e;else t=L,L=e;if(L===e){for(L=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if(40===o.charCodeAt(t)?(W=ge,t++):(W=e,0===b&&B(ce)),W!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();if(J!==e)if((te=lt())!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,2)===ke?(le=ke,t+=2):(le=e,0===b&&B(Ne)),le===e&&(o.substr(t,2)===Me?(le=Me,t+=2):(le=e,0===b&&B(oe))),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();if(we!==e)if((Fe=mt())!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if(41===o.charCodeAt(t)?(Se=k,t++):(Se=e,0===b&&B(Q)),Se!==e){for(Re=[],De=I();De!==e;)Re.push(De),De=I();Re!==e?L=U=[U,W,J,te,ue,le,we,Fe,je,Se,Re]:(t=L,L=e)}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}if(L!==e)for(;L!==e;){for(T.push(L),L=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=mt())!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();J!==e?L=U=[U,W,J]:(t=L,L=e)}else t=L,L=e;else t=L,L=e;if(L===e){for(L=t,U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if(40===o.charCodeAt(t)?(W=ge,t++):(W=e,0===b&&B(ce)),W!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();if(J!==e)if((te=lt())!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,2)===ke?(le=ke,t+=2):(le=e,0===b&&B(Ne)),le===e&&(o.substr(t,2)===Me?(le=Me,t+=2):(le=e,0===b&&B(oe))),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();if(we!==e)if((Fe=mt())!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if(41===o.charCodeAt(t)?(Se=k,t++):(Se=e,0===b&&B(Q)),Se!==e){for(Re=[],De=I();De!==e;)Re.push(De),De=I();Re!==e?L=U=[U,W,J,te,ue,le,we,Fe,je,Se,Re]:(t=L,L=e)}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}else t=L,L=e;else t=L,L=e}}else T=e;if(T===e){for(T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(42===o.charCodeAt(t)?(U=X,t++):(U=e,0===b&&B(se)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?T=L=[L,U,W]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}T!==e?u=w=function(He,Ge){var Je=[];if(3===Ge.length&&"*"===Ge[1])return{vars:[{token:"variable",kind:"*"}],modifier:Qa(He)};for(var Ve=0;Ve<Ge.length;Ve++){var Xe=Ge[Ve];3===Xe.length?Je.push({token:"variable",kind:"var",value:Xe[1]}):Je.push({token:"variable",kind:"aliased",expression:Xe[3],alias:Xe[7]})}return{vars:Je,modifier:Qa(He)}}(C,T):(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(G)),u}function Nt(){var u,w,R,m,C,D;if(b++,u=t,o.substr(t,4)===Be?(w=Be,t+=4):(w=e,0===b&&B(Ze)),w===e&&(o.substr(t,4)===rt?(w=rt,t+=4):(w=e,0===b&&B(tt))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=function(){var T,L,U;for(b++,T=t,L=[],U=I();U!==e;)L.push(U),U=I();return L!==e&&(U=ua())!==e?T=L={graph:U,kind:"default",token:"graphClause"}:(t=T,T=e),b--,T===e&&(L=e,0===b&&B(it)),T}())===e&&(m=function(){var T,L,U,W;if(b++,T=t,o.substr(t,5)===Ye?(L=Ye,t+=5):(L=e,0===b&&B($e)),L===e&&(o.substr(t,5)===at?(L=at,t+=5):(L=e,0===b&&B(ct))),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=ua())!==e?T=L={graph:W,kind:"named",token:"graphCluase"}:(t=T,T=e)}else t=T,T=e;return b--,T===e&&(L=e,0===b&&B(st)),T}()),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?u=w=m:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(ze)),u}function ua(){var u;return b++,u=bt(),b--,u===e&&0===b&&B(ut),u}function wr(){var u,w,R,m,C,D;if(b++,u=t,o.substr(t,5)===We?(w=We,t+=5):(w=e,0===b&&B(Ke)),w===e&&(o.substr(t,5)===ot?(w=ot,t+=5):(w=e,0===b&&B(me))),w===e&&(w=null),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=Ft())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?u=w=m:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(dr)),u}function _r(){var u,w,R,m,C,D,T,L,U,W,J,te,ue;return b++,u=t,w=function(){var W,J,te,ue,le,we,Fe;if(b++,W=t,o.substr(t,5)===Sr?(J=Sr,t+=5):(J=e,0===b&&B(Sn)),J===e&&(o.substr(t,5)===Tr?(J=Tr,t+=5):(J=e,0===b&&B(Tn))),J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(o.substr(t,2)===Wt?(ue=Wt,t+=2):(ue=e,0===b&&B(vr)),ue===e&&(o.substr(t,2)===Ht?(ue=Ht,t+=2):(ue=e,0===b&&B(yr))),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e){if(we=[],(Fe=la())!==e)for(;Fe!==e;)we.push(Fe),Fe=la();else we=e;we!==e?W=J=we:(t=W,W=e)}else t=W,W=e}else t=W,W=e;else t=W,W=e}else t=W,W=e;return b--,W===e&&(J=e,0===b&&B(Cn)),W}(),w===e&&(w=null),w!==e?(R=function(){var W,J,te,ue;if(b++,W=t,o.substr(t,6)===gr?(J=gr,t+=6):(J=e,0===b&&B(Ir)),J!==e){if(te=[],(ue=ca())!==e)for(;ue!==e;)te.push(ue),ue=ca();else te=e;te!==e?W=J=[J,te]:(t=W,W=e)}else t=W,W=e;return b--,W===e&&(J=e,0===b&&B(Mt)),W}(),R===e&&(R=null),R!==e?(m=function(){var W,J,te,ue,le,we,Fe,je;if(b++,W=t,o.substr(t,5)===Nr?(J=Nr,t+=5):(J=e,0===b&&B(Or)),J===e&&(o.substr(t,5)===mr?(J=mr,t+=5):(J=e,0===b&&B($t))),J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(o.substr(t,2)===Wt?(ue=Wt,t+=2):(ue=e,0===b&&B(vr)),ue===e&&(o.substr(t,2)===Ht?(ue=Ht,t+=2):(ue=e,0===b&&B(yr))),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e){if(we=[],(Fe=fa())!==e)for(;Fe!==e;)we.push(Fe),Fe=fa();else we=e;if(we!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();Fe!==e?W=J=we:(t=W,W=e)}else t=W,W=e}else t=W,W=e}else t=W,W=e;else t=W,W=e}else t=W,W=e;return b--,W===e&&(J=e,0===b&&B(Tt)),W}(),m===e&&(m=null),m!==e?(b++,J=t,(te=pa())!==e?((ue=ha())===e&&(ue=null),ue!==e?J=te=[te,ue]:(t=J,J=e)):(t=J,J=e),J===e&&(J=t,(te=ha())!==e?((ue=pa())===e&&(ue=null),ue!==e?J=te=[te,ue]:(t=J,J=e)):(t=J,J=e)),J!==e&&(J=function(le){for(var we={},Fe=0;Fe<le.length;Fe++){var je=le[Fe];null!=je&&null!=je.limit?we.limit=je.limit:null!=je&&null!=je.offset&&(we.offset=je.offset)}return we}(J)),b--,(W=J)===e&&(J=e,0===b&&B(Ja)),(C=W)===e&&(C=null),C!==e?(D=w,T=m,U={},null!=(L=C)&&(null!=L.limit&&(U.limit=L.limit),null!=L.offset&&(U.offset=L.offset)),null!=D&&(U.group=D),U.order=T,u=w=U):(t=u,u=e)):(t=u,u=e)):(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Fn)),u}function la(){var u,w,R,m,C,D,T,L,U,W,J,te,ue;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if((R=xi())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=R:(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if((R=Ea())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=R:(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(40===o.charCodeAt(t)?(R=ge,t++):(R=e,0===b&&B(ce)),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=lt())!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e){if(T=t,o.substr(t,2)===ke?(L=ke,t+=2):(L=e,0===b&&B(Ne)),L===e&&(o.substr(t,2)===Me?(L=Me,t+=2):(L=e,0===b&&B(oe))),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=mt())!==e?T=L=[L,U,W]:(t=T,T=e)}else t=T,T=e;if(T===e&&(T=null),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?(te=C,u=w=0!=(ue=T).length?{token:"aliased_expression",expression:te,alias:ue[2]}:te):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if((R=mt())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=R:(t=u,u=e)}else t=u,u=e;else t=u,u=e}}}return b--,u===e&&(w=e,0===b&&B(jr)),u}function ca(){var u;return b++,u=ai(),b--,u===e&&0===b&&B(Rr),u}function fa(){var u,w,R,m,C,D,T,L;if(b++,u=t,"ASC"===o.substr(t,3)?(w="ASC",t+=3):(w=e,0===b&&B(In)),w===e&&("asc"===o.substr(t,3)?(w="asc",t+=3):(w=e,0===b&&B(qa)),w===e&&(o.substr(t,4)===Fi?(w=Fi,t+=4):(w=e,0===b&&B(Ha)),w===e&&(o.substr(t,4)===Ci?(w=Ci,t+=4):(w=e,0===b&&B(Va))))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=bi())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?(T=m,u=w={direction:w.toUpperCase(),expression:T}):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e)if(u=t,(w=ai())===e&&(w=mt()),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e?("var"===(L=w).token&&(L={token:"expression",expressionType:"atomic",primaryexpression:"var",value:L}),u=w={direction:"ASC",expression:L}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(jn)),u}function pa(){var u,w,R,m,C,D;if(b++,u=t,o.substr(t,5)===Si?(w=Si,t+=5):(w=e,0===b&&B(Xa)),w===e&&(o.substr(t,5)===Ti?(w=Ti,t+=5):(w=e,0===b&&B(Wa))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=pr())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?u=w={limit:parseInt(m.value)}:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(za)),u}function ha(){var u,w,R,m,C,D;if(b++,u=t,o.substr(t,6)===ji?(w=ji,t+=6):(w=e,0===b&&B(Ka)),w===e&&(o.substr(t,6)===Ii?(w=Ii,t+=6):(w=e,0===b&&B(Ya))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=pr())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?u=w={offset:parseInt(m.value)}:(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B($a)),u}function vn(){var u;return b++,(u=bt())===e&&(u=xn())===e&&(u=wn())===e&&(u=_n())===e&&(o.substr(t,5)===Dr?(u=Dr,t+=5):(u=e,0===b&&B(Ni))),b--,u===e&&0===b&&B(tu),u}function da(){var u,w,R,m,C,D,T,L,U,W;if(b++,u=t,(w=oa())!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(b++,(W=function(){var J,te,ue,le,we,Fe,je,Se,Re,De,He;if(b++,J=t,o.substr(t,4)===Li?(te=Li,t+=4):(te=e,0===b&&B(au)),te===e&&(o.substr(t,4)===Pi?(te=Pi,t+=4):(te=e,0===b&&B(uu))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if((le=bt())!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();if(we!==e){if(Fe=t,o.substr(t,4)===Bi?(je=Bi,t+=4):(je=e,0===b&&B(lu)),je===e&&(o.substr(t,4)===Mi?(je=Mi,t+=4):(je=e,0===b&&B(cu))),je!==e){for(Se=[],Re=I();Re!==e;)Se.push(Re),Re=I();Se!==e&&(Re=si())!==e?Fe=je=[je,Se,Re]:(t=Fe,Fe=e)}else t=Fe,Fe=e;Fe===e&&(Fe=null),Fe!==e?(De=Fe,(He={kind:"load",token:"executableunit"}).sourceGraph=le,null!=De&&(He.destinyGraph=De[2]),J=te=He):(t=J,J=e)}else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(su)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe,je;if(b++,J=t,o.substr(t,5)===Qi?(te=Qi,t+=5):(te=e,0===b&&B(pu)),te===e&&(o.substr(t,5)===Ui?(te=Ui,t+=5):(te=e,0===b&&B(hu))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,6)===Kt?(le=Kt,t+=6):(le=e,0===b&&B(Rn)),le===e&&(o.substr(t,6)===Yt?(le=Yt,t+=6):(le=e,0===b&&B(Nn))),le===e&&(le=null),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e&&(Fe=ga())!==e?((je={kind:"clear",token:"executableunit"}).destinyGraph=Fe,J=te=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(fu)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe,je;if(b++,J=t,o.substr(t,4)===Gi?(te=Gi,t+=4):(te=e,0===b&&B(vu)),te===e&&(o.substr(t,4)===qi?(te=qi,t+=4):(te=e,0===b&&B(yu))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,6)===Kt?(le=Kt,t+=6):(le=e,0===b&&B(Rn)),le===e&&(o.substr(t,6)===Yt?(le=Yt,t+=6):(le=e,0===b&&B(Nn))),le===e&&(le=null),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e&&(Fe=ga())!==e?((je={kind:"drop",token:"executableunit"}).destinyGraph=Fe,J=te=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(du)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe,je;if(b++,J=t,o.substr(t,6)===Hi?(te=Hi,t+=6):(te=e,0===b&&B(mu)),te===e&&(o.substr(t,6)===Vi?(te=Vi,t+=6):(te=e,0===b&&B(bu))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,6)===Kt?(le=Kt,t+=6):(le=e,0===b&&B(Rn)),le===e&&(o.substr(t,6)===Yt?(le=Yt,t+=6):(le=e,0===b&&B(Nn))),le===e&&(le=null),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e&&(Fe=si())!==e?((je={kind:"create",token:"executableunit"}).destinyGraph=Fe,J=te=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(gu)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe,je;if(b++,J=t,o.substr(t,6)===Br?(te=Br,t+=6):(te=e,0===b&&B(Ji)),te===e&&(o.substr(t,6)===Mr?(te=Mr,t+=6):(te=e,0===b&&B(zi))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,4)===Qr?(le=Qr,t+=4):(le=e,0===b&&B(Xi)),le===e&&(o.substr(t,4)===Ur?(le=Ur,t+=4):(le=e,0===b&&B(Wi))),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e&&(Fe=ba())!==e?((je={kind:"insertdata",token:"executableunit"}).quads=Fe,J=te=je):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(xu)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe;if(b++,J=t,o.substr(t,6)===Zt?(te=Zt,t+=6):(te=e,0===b&&B(On)),te===e&&(o.substr(t,6)===er?(te=er,t+=6):(te=e,0===b&&B(Dn))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();ue!==e?(o.substr(t,4)===Qr?(le=Qr,t+=4):(le=e,0===b&&B(Xi)),le===e&&(o.substr(t,4)===Ur?(le=Ur,t+=4):(le=e,0===b&&B(Wi))),le!==e&&(we=ba())!==e?((Fe={kind:"deletedata",token:"executableunit"}).quads=we,J=te=Fe):(t=J,J=e)):(t=J,J=e)}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(wu)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe;if(b++,J=t,o.substr(t,6)===Zt?(te=Zt,t+=6):(te=e,0===b&&B(On)),te===e&&(o.substr(t,6)===er?(te=er,t+=6):(te=e,0===b&&B(Dn))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(o.substr(t,5)===We?(le=We,t+=5):(le=e,0===b&&B(Ke)),le===e&&(o.substr(t,5)===ot?(le=ot,t+=5):(le=e,0===b&&B(me))),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e&&(Fe=Ft())!==e?J=te=function(je){var Se={kind:"modify"};Se.pattern=je,Se.with=null,Se.using=null;var Re=[],De=je.patterns[0];De=null==De.triplesContext&&null!=De.patterns?De.patterns[0].triplesContext:De.triplesContext;for(var He=0;He<De.length;He++){var Ge={},Je=De[He];Ge.subject=Je.subject,Ge.predicate=Je.predicate,Ge.object=Je.object,Ge.graph=Je.graph,Re.push(Ge)}return Se.delete=Re,Se}(Fe):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(_u)),J}())===e&&(W=function(){var J,te,ue,le,we,Fe,je,Se,Re,De,He,Ge,Je,Ve,Xe;if(b++,J=t,te=t,o.substr(t,4)===$i?(ue=$i,t+=4):(ue=e,0===b&&B(Eu)),ue===e&&(o.substr(t,4)===Ki?(ue=Ki,t+=4):(ue=e,0===b&&B(Au))),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e&&(we=bt())!==e?te=ue=[ue,le,we]:(t=te,te=e)}else t=te,te=e;if(te===e&&(te=null),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e){if(le=t,b++,Je=t,o.substr(t,6)===Zt?(Ve=Zt,t+=6):(Ve=e,0===b&&B(On)),Ve===e&&(o.substr(t,6)===er?(Ve=er,t+=6):(Ve=e,0===b&&B(Dn))),Ve!==e&&(Xe=ma())!==e?Je=Ve=Xe:(t=Je,Je=e),b--,Je===e&&(Ve=e,0===b&&B(Fu)),(we=Je)!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();Fe!==e?((je=va())===e&&(je=null),je!==e?le=we=[we,Fe,je]:(t=le,le=e)):(t=le,le=e)}else t=le,le=e;if(le===e&&(le=va()),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();if(we!==e){for(Fe=[],je=ya();je!==e;)Fe.push(je),je=ya();if(Fe!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if(o.substr(t,5)===We?(Se=We,t+=5):(Se=e,0===b&&B(Ke)),Se===e&&(o.substr(t,5)===ot?(Se=ot,t+=5):(Se=e,0===b&&B(me))),Se!==e){for(Re=[],De=I();De!==e;)Re.push(De),De=I();if(Re!==e)if((De=Ft())!==e){for(He=[],Ge=I();Ge!==e;)He.push(Ge),Ge=I();He!==e?J=te=function(Je,Ve,Xe,nt){var et={kind:"modify"};return et.with=""!=Je&&null!=Je?Je[2]:null,3!==Ve.length||""!==Ve[2]&&null!=Ve[2]?3===Ve.length&&null!=Ve[0].length&&null!=Ve[1].length&&null!=Ve[2].length?(et.delete=Ve[0],et.insert=Ve[2]):(et.insert=Ve,et.delete=null):(et.delete=Ve[0],et.insert=null),""!=Xe&&(et.using=Xe),et.pattern=nt,et}(te,le,Fe,De):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e;return b--,J===e&&(te=e,0===b&&B(ku)),J}()),b--,W===e&&0===b&&B(ou),(m=W)!==e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(59===o.charCodeAt(t)?(T=Ot,t++):(T=e,0===b&&B(Dt)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e?((U=da())===e&&(U=null),U!==e?C=D=[D,T,L,U]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e;else t=C,C=e;C===e&&(C=null),C!==e?u=w=function(W,J,te){var ue={token:"query",kind:"update"};ue.prologue=W;var le=[J];return null!=te&&null!=te.length&&null!=te[3]&&null!=te[3].units&&(le=le.concat(te[3].units)),ue.units=le,ue}(w,m,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(iu)),u}function va(){var u,w,R;return b++,u=t,o.substr(t,6)===Br?(w=Br,t+=6):(w=e,0===b&&B(Ji)),w===e&&(o.substr(t,6)===Mr?(w=Mr,t+=6):(w=e,0===b&&B(zi))),w!==e&&(R=ma())!==e?u=w=R:(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Cu)),u}function ya(){var u,w,R,m,C,D,T,L,U;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(o.substr(t,5)===Yi?(R=Yi,t+=5):(R=e,0===b&&B(Tu)),R===e&&(o.substr(t,5)===Zi?(R=Zi,t+=5):(R=e,0===b&&B(ju))),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e){if((C=bt())===e)if(C=t,o.substr(t,5)===Ye?(D=Ye,t+=5):(D=e,0===b&&B($e)),D===e&&(o.substr(t,5)===at?(D=at,t+=5):(D=e,0===b&&B(ct))),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=bt())!==e?C=D=[D,T,L]:(t=C,C=e)}else t=C,C=e;C!==e?u=w=null!=(U=C).length?{kind:"named",uri:U[2]}:{kind:"default",uri:U}:(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Su)),u}function si(){var u,w,R,m;if(b++,u=t,o.substr(t,5)===tr?(w=tr,t+=5):(w=e,0===b&&B(Ln)),w===e&&(o.substr(t,5)===rr?(w=rr,t+=5):(w=e,0===b&&B(Pn))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e&&(m=bt())!==e?u=w=m:(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Iu)),u}function ga(){var u,w;return b++,u=t,(u=w=si())===e&&(u=t,o.substr(t,7)===eo?(w=eo,t+=7):(w=e,0===b&&B(Nu)),w===e&&(o.substr(t,7)===to?(w=to,t+=7):(w=e,0===b&&B(Ou))),w!==e&&(w="default"),(u=w)===e&&(u=t,o.substr(t,5)===Ye?(w=Ye,t+=5):(w=e,0===b&&B($e)),w===e&&(o.substr(t,5)===at?(w=at,t+=5):(w=e,0===b&&B(ct))),w!==e&&(w="named"),(u=w)===e&&(u=t,"ALL"===o.substr(t,3)?(w="ALL",t+=3):(w=e,0===b&&B(Du)),w===e&&("all"===o.substr(t,3)?(w="all",t+=3):(w=e,0===b&&B(Lu))),w!==e&&(w="all"),u=w))),b--,u===e&&(w=e,0===b&&B(Ru)),u}function ma(){var u,w,R,m,C,D,T,L,U;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(123===o.charCodeAt(t)?(R=Ee,t++):(R=e,0===b&&B(Ce)),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=xa())!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(125===o.charCodeAt(t)?(T=H,t++):(T=e,0===b&&B(Z)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e?u=w=ro(C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Pu)),u}function ba(){var u,w,R,m,C,D,T,L,U;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(123===o.charCodeAt(t)?(R=Ee,t++):(R=e,0===b&&B(Ce)),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=xa())!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(125===o.charCodeAt(t)?(T=H,t++):(T=e,0===b&&B(Z)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e?u=w=ro(C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Bu)),u}function xa(){var u,w,R,m,C,D,T;if(b++,u=t,(w=ar())===e&&(w=null),w!==e){for(R=[],m=t,(C=wa())!==e?(46===o.charCodeAt(t)?(D=wt,t++):(D=e,0===b&&B(_t)),D===e&&(D=null),D!==e?((T=ar())===e&&(T=null),T!==e?m=C=[C,D,T]:(t=m,m=e)):(t=m,m=e)):(t=m,m=e);m!==e;)R.push(m),m=t,(C=wa())!==e?(46===o.charCodeAt(t)?(D=wt,t++):(D=e,0===b&&B(_t)),D===e&&(D=null),D!==e?((T=ar())===e&&(T=null),T!==e?m=C=[C,D,T]:(t=m,m=e)):(t=m,m=e)):(t=m,m=e);R!==e?u=w=function(L,U){var W=[];if(null!=L&&null!=L.triplesContext)for(var J=0;J<L.triplesContext.length;J++)(te=L.triplesContext[J]).graph=null,W.push(te);if(U&&U.length>0&&U[0].length>0&&(W=W.concat(U[0][0].quadsContext),null!=U[0][2]&&null!=U[0][2].triplesContext))for(J=0;J<U[0][2].triplesContext.length;J++){var te;(te=U[0][2].triplesContext[J]).graph=null,W.push(te)}return{token:"quads",quadsContext:W}}(w,R):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Mu)),u}function wa(){var u,w,R,m,C,D,T,L,U,W,J,te,ue;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(o.substr(t,5)===tr?(R=tr,t+=5):(R=e,0===b&&B(Ln)),R===e&&(o.substr(t,5)===rr?(R=rr,t+=5):(R=e,0===b&&B(Pn))),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if((C=fr())!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(123===o.charCodeAt(t)?(T=Ee,t++):(T=e,0===b&&B(Ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if((U=ar())===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(125===o.charCodeAt(t)?(J=H,t++):(J=e,0===b&&B(Z)),J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();te!==e?u=w=function(le,we){var Fe=[];if(null!=we)for(var je=0;je<we.triplesContext.length;je++){var Se=we.triplesContext[je];Se.graph=le,Fe.push(Se)}return{token:"quadsnottriples",quadsContext:Fe}}(C,U):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Qu)),u}function ar(){var u,w,R,m,C,D,T,L,U;if(b++,u=t,(w=Ca())!==e){for(R=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(46===o.charCodeAt(t)?(C=wt,t++):(C=e,0===b&&B(_t)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();D!==e?((T=ar())===e&&(T=null),T!==e?R=m=[m,C,D,T]:(t=R,R=e)):(t=R,R=e)}else t=R,R=e;else t=R,R=e;R===e&&(R=null),R!==e?(L=R,U=w.triplesContext,null!=L&&"object"==typeof L&&null!=L.length&&null!=L[3]&&null!=L[3].triplesContext&&(U=U.concat(L[3].triplesContext)),u=w={token:"triplestemplate",triplesContext:U}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Uu)),u}function Ft(){var u,w,R,m,C,D,T,L,U,W,J,te,ue,le;if(b++,u=t,123===o.charCodeAt(t)?(w=Ee,t++):(w=e,0===b&&B(Ce)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(b++,T=t,(L=aa())!==e&&(U=wr())!==e&&(W=_r())!==e?(te=U,ue=W,(le={kind:"select",token:"subselect"}).projection=(J=L).vars,le.modifier=J.modifier,le.pattern=te,null!=ue&&null!=ue.limit&&(le.limit=ue.limit),null!=ue&&null!=ue.offset&&(le.offset=ue.offset),null!=ue&&null!=ue.order&&""!=ue.order&&(le.order=ue.order),null!=ue&&null!=ue.group&&(le.group=ue.group),T=L=le):(t=T,T=e),b--,T===e&&(L=e,0===b&&B(j)),(m=T)!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?(125===o.charCodeAt(t)?(D=H,t++):(D=e,0===b&&B(Z)),D!==e?u=w=m:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e)if(u=t,123===o.charCodeAt(t)?(w=Ee,t++):(w=e,0===b&&B(Ce)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(m=function(){var T,L,U,W,J,te,ue,le,we,Fe;if(b++,T=t,(L=yn())===e&&(L=null),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){if(W=[],J=t,(te=_a())!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(46===o.charCodeAt(t)?(le=wt,t++):(le=e,0===b&&B(_t)),le===e&&(le=null),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e?((Fe=yn())===e&&(Fe=null),Fe!==e?J=te=[te,ue,le,we,Fe]:(t=J,J=e)):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;for(;J!==e;)if(W.push(J),J=t,(te=_a())!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if(46===o.charCodeAt(t)?(le=wt,t++):(le=e,0===b&&B(_t)),le===e&&(le=null),le!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e?((Fe=yn())===e&&(Fe=null),Fe!==e?J=te=[te,ue,le,we,Fe]:(t=J,J=e)):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;W!==e?T=L=function(je,Se){var Re=[];null!=je&&je!=[]&&Re.push(je);for(var De=0;De<Se.length;De++)for(var He=0;He<Se[De].length;He++)null!=Se[De][He]&&null!=Se[De][He].token&&Re.push(Se[De][He]);var Ge=[],Je=[],Ve=[],Xe=[];for(De=0;De<Re.length;De++)if("triplespattern"!==Re[De].token&&"filter"!==Re[De].token&&"bind"!==Re[De].token){if(0!=Je.length||0!=Ve.length){var nt=[];for(He=0;He<Je.length;He++)nt=nt.concat(Je[He].triplesContext);nt.length>0&&Ge.push({token:"basicgraphpattern",triplesContext:nt}),Je=[]}Ge.push(Re[De])}else"triplespattern"===Re[De].token?Je.push(Re[De]):"bind"===Re[De].token?Xe.push(Re[De]):Ve.push(Re[De]);if(0!=Je.length||0!=Ve.length){for(nt=[],He=0;He<Je.length;He++)nt=nt.concat(Je[He].triplesContext);nt.length>0&&Ge.push({token:"basicgraphpattern",triplesContext:nt})}return{token:"groupgraphpattern",patterns:Ge,filters:Ve,binds:Xe}}(L,W):(t=T,T=e)}else t=T,T=e}else t=T,T=e;return b--,T===e&&(L=e,0===b&&B(qu)),T}(),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?(125===o.charCodeAt(t)?(D=H,t++):(D=e,0===b&&B(Z)),D!==e?u=w=m:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Gu)),u}function yn(){var u,w,R,m,C,D,T,L;if(b++,u=t,(w=function(){var U,W,J,te,ue,le;for(b++,U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=mn())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();te!==e&&(ue=Ta())!==e?U=W=function(le,we){var Fe=we.triplesContext,je=le;if(we.pairs)for(var Se=0;Se<we.pairs.length;Se++){var Re=we.pairs[Se],De=null;null!=Re[1].length&&(Re[1]=Re[1][0]),je.token&&"triplesnodecollection"===je.token?("path"===(De={subject:je.chainSubject[0],predicate:Re[0],object:Re[1]}).predicate.token&&"element"===De.predicate.kind&&(De.predicate=De.predicate.value),Fe.push(De),Fe=Fe.concat(je.triplesContext)):("path"===(De={subject:je,predicate:Re[0],object:Re[1]}).predicate.token&&"element"===De.predicate.kind&&(De.predicate=De.predicate.value),Fe.push(De))}var He={token:"triplessamesubject"};return He.triplesContext=Fe,He.chainSubject=je,He}(J,ue):(t=U,U=e)}else t=U,U=e;else t=U,U=e;if(U===e){for(U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=Ra())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();te!==e?(b++,(le=function(){var we,Fe,je,Se,Re,De,He,Ge,Je,Ve,Xe,nt,et;if(b++,we=t,(Fe=lr())===e&&(Fe=cr()),Fe!==e){for(je=[],Se=I();Se!==e;)je.push(Se),Se=I();if(je!==e)if((Se=Sa())!==e){for(Re=[],De=t,He=[],Ge=I();Ge!==e;)He.push(Ge),Ge=I();if(He!==e)if(59===o.charCodeAt(t)?(Ge=Ot,t++):(Ge=e,0===b&&B(Dt)),Ge!==e){for(Je=[],Ve=I();Ve!==e;)Je.push(Ve),Ve=I();if(Je!==e){if(Ve=t,(Xe=lr())===e&&(Xe=cr()),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();nt!==e&&(et=zt())!==e?Ve=Xe=[Xe,nt,et]:(t=Ve,Ve=e)}else t=Ve,Ve=e;Ve===e&&(Ve=null),Ve!==e?De=He=[He,Ge,Je,Ve]:(t=De,De=e)}else t=De,De=e}else t=De,De=e;else t=De,De=e;for(;De!==e;){for(Re.push(De),De=t,He=[],Ge=I();Ge!==e;)He.push(Ge),Ge=I();if(He!==e)if(59===o.charCodeAt(t)?(Ge=Ot,t++):(Ge=e,0===b&&B(Dt)),Ge!==e){for(Je=[],Ve=I();Ve!==e;)Je.push(Ve),Ve=I();if(Je!==e){if(Ve=t,(Xe=lr())===e&&(Xe=cr()),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();nt!==e&&(et=zt())!==e?Ve=Xe=[Xe,nt,et]:(t=Ve,Ve=e)}else t=Ve,Ve=e;Ve===e&&(Ve=null),Ve!==e?De=He=[He,Ge,Je,Ve]:(t=De,De=e)}else t=De,De=e}else t=De,De=e;else t=De,De=e}Re!==e?we=Fe=function(vt,pt,St){for(var kt={token:"propertylist"},Ct=[],Bt=[],xt=0;xt<pt.length;xt++)null!=pt[xt].triplesContext?(Ct=Ct.concat(pt[xt].triplesContext),"triplesnodecollection"===pt[xt].token&&null!=pt[xt].chainSubject.length?Bt.push([vt,pt[xt].chainSubject[0]]):Bt.push([vt,pt[xt].chainSubject])):Bt.push([vt,pt[xt]]);for(xt=0;xt<St.length;xt++)for(var Xt=St[xt][3],Ua=Xt[0],Cr=Xt[2]||[],hr=0;hr<Cr.length;hr++)null!=Cr[hr].triplesContext?(Ct=Ct.concat(Cr[hr].triplesContext),Bt.push([Ua,Cr[hr].chainSubject])):Bt.push([Ua,Cr[hr]]);return kt.pairs=Bt,kt.triplesContext=Ct,kt}(Fe,Se,Re):(t=we,we=e)}else t=we,we=e;else t=we,we=e}else t=we,we=e;return b--,we===e&&(Fe=e,0===b&&B(xl)),we}())===e&&(le=null),b--,le===e&&0===b&&B(jl),(ue=le)!==e?U=W=function(le,we){var Fe=le.triplesContext,je=le.chainSubject;if(null!=we&&null!=we.pairs)for(var Se=0;Se<we.pairs.length;Se++){var Re=we.pairs[Se];if(null!=Re[1].length&&(Re[1]=Re[1][0]),"triplesnodecollection"===le.token)for(var De=0;De<je.length;De++){var He=je[De];if(null!=He.triplesContext){var Ge={subject:He.chainSubject,predicate:Re[0],object:Re[1]};Fe.concat(He.triplesContext)}else Ge={subject:je[De],predicate:Re[0],object:Re[1]},Fe.push(Ge)}else Ge={subject:je,predicate:Re[0],object:Re[1]},Fe.push(Ge)}var Je={token:"triplessamesubject"};return Je.triplesContext=Fe,Je.chainSubject=je,Je}(J,ue):(t=U,U=e)):(t=U,U=e)}else t=U,U=e;else t=U,U=e}return b--,U===e&&(W=e,0===b&&B(Sl)),U}())!==e){for(R=t,m=[],C=I();C!==e;)m.push(C),C=I();m!==e?(46===o.charCodeAt(t)?(C=wt,t++):(C=e,0===b&&B(_t)),C!==e?((D=yn())===e&&(D=null),D!==e?R=m=[m,C,D]:(t=R,R=e)):(t=R,R=e)):(t=R,R=e),R===e&&(R=null),R!==e?(T=R,L=w.triplesContext,null!=T&&"object"==typeof T&&null!=T&&null!=T.length&&null!=T[2]&&null!=T[2].triplesContext&&(L=L.concat(T[2].triplesContext)),u=w={token:"triplespattern",triplesContext:L}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Hu)),u}function _a(){var u,w,R,m,C;return b++,u=function(){var w,R,m,C,D,T,L,U;if(b++,w=t,(R=Ft())!==e){for(m=[],C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,5)===Gr?(T=Gr,t+=5):(T=e,0===b&&B(uo)),T===e&&(o.substr(t,5)===qr?(T=qr,t+=5):(T=e,0===b&&B(lo))),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Ft())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;for(;C!==e;){for(m.push(C),C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,5)===Gr?(T=Gr,t+=5):(T=e,0===b&&B(uo)),T===e&&(o.substr(t,5)===qr?(T=qr,t+=5):(T=e,0===b&&B(lo))),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Ft())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}m!==e?w=R=function(W,J){if(0===J.length)return W;for(var te={token:"graphunionpattern",value:[W]},ue=0;ue<J.length;ue++)ue==J.length-1?te.value.push(J[ue][3]):(te.value.push(J[ue][3]),te={token:"graphunionpattern",value:[te]});return te}(R,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(tl)),w}(),u===e&&(u=function(){var w,R,m,C,D;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(o.substr(t,8)===no?(m=no,t+=8):(m=e,0===b&&B(zu)),m===e&&(o.substr(t,8)===io?(m=io,t+=8):(m=e,0===b&&B(Xu))),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e&&(D=Ft())!==e?w=R={token:"optionalgraphpattern",value:D}:(t=w,w=e)}else t=w,w=e;else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(Ju)),w}(),u===e&&(u=function(){var w,R,m,C;if(b++,w=t,o.substr(t,5)===so?(R=so,t+=5):(R=e,0===b&&B(Zu)),R===e&&(o.substr(t,5)===ao?(R=ao,t+=5):(R=e,0===b&&B(el))),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e&&(C=Ft())!==e?w=R={token:"minusgraphpattern",status:"todo",value:C}:(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(Yu)),w}(),u===e&&(u=function(){var w,R,m,C,D,T,L;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(o.substr(t,5)===tr?(m=tr,t+=5):(m=e,0===b&&B(Ln)),m===e&&(o.substr(t,5)===rr?(m=rr,t+=5):(m=e,0===b&&B(Pn))),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=fr())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=Ft())!==e?w=R=function(U,W){for(var J=0;J<W.patterns.length;J++)for(var te=W.patterns[J],ue=0;ue<te.triplesContext.length;ue++)te.triplesContext[ue].graph=U;return W.token="groupgraphpattern",W}(D,L):(t=w,w=e)}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(Wu)),w}(),u===e&&(b++,w=t,o.substr(t,7)===oo?(R=oo,t+=7):(R=e,0===b&&B(Ku)),R!==e&&(m=fr())!==e&&(C=Ft())!==e?w=R={token:"servicegraphpattern",status:"todo",value:[m,C]}:(t=w,w=e),b--,w===e&&(R=e,0===b&&B($u)),(u=w)===e&&(u=function(){var w,R,m,C,D;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(o.substr(t,6)===co?(m=co,t+=6):(m=e,0===b&&B(nl)),m===e&&(o.substr(t,6)===fo?(m=fo,t+=6):(m=e,0===b&&B(il))),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e&&(D=ai())!==e?w=R={token:"filter",value:D}:(t=w,w=e)}else t=w,w=e;else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(rl)),w}(),u===e&&(u=function(){var w,R,m,C,D,T,L,U,W,J,te,ue,le;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(o.substr(t,4)===po?(m=po,t+=4):(m=e,0===b&&B(sl)),m===e&&(o.substr(t,4)===ho?(m=ho,t+=4):(m=e,0===b&&B(al))),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(40===o.charCodeAt(t)?(D=ge,t++):(D=e,0===b&&B(ce)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if((L=lt())!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if(o.substr(t,2)===Me?(W=Me,t+=2):(W=e,0===b&&B(oe)),W===e&&(o.substr(t,2)===ke?(W=ke,t+=2):(W=e,0===b&&B(Ne))),W!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();if(J!==e)if((te=mt())!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();ue!==e?(41===o.charCodeAt(t)?(le=k,t++):(le=e,0===b&&B(Q)),le!==e?w=R={token:"bind",expression:L,as:te}:(t=w,w=e)):(t=w,w=e)}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(ol)),w}(),u===e&&(u=function(){var w,R,m,C,D;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(o.substr(t,6)===Lr?(m=Lr,t+=6):(m=e,0===b&&B(Oi)),m===e&&(o.substr(t,6)===Pr?(m=Pr,t+=6):(m=e,0===b&&B(Di))),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e&&(D=ka())!==e?w=R=D:(t=w,w=e)}else t=w,w=e;else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(ll)),w}()))))))),b--,u===e&&0===b&&B(Vu),u}function ai(){var u;return b++,(u=bi())===e&&(u=xi())===e&&(u=Ea()),b--,u===e&&0===b&&B(ul),u}function ka(){var u;return b++,(u=function(){var w,R,m,C,D,T,L,U;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=mt())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(123===o.charCodeAt(t)?(D=Ee,t++):(D=e,0===b&&B(Ce)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e){for(L=[],U=ur();U!==e;)L.push(U),U=ur();L!==e?(125===o.charCodeAt(t)?(U=H,t++):(U=e,0===b&&B(Z)),U!==e?w=R={token:"inlineData",values:[{var:m,value:L}]}:(t=w,w=e)):(t=w,w=e)}else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(fl)),w}())===e&&(u=function(){var w,R,m,C,D,T,L,U,W,J,te,ue,le,we,Fe,je;for(b++,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e){if((m=Pt())===e)if(m=t,40===o.charCodeAt(t)?(C=ge,t++):(C=e,0===b&&B(ce)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e){for(T=[],L=mt();L!==e;)T.push(L),L=mt();if(T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e?(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e?m=C=[C,D,T,L,U]:(t=m,m=e)):(t=m,m=e)}else t=m,m=e}else t=m,m=e}else t=m,m=e;if(m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(123===o.charCodeAt(t)?(D=Ee,t++):(D=e,0===b&&B(Ce)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e){for(L=[],U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(40===o.charCodeAt(t)?(J=ge,t++):(J=e,0===b&&B(ce)),J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e){for(ue=[],le=ur();le!==e;)ue.push(le),le=ur();if(ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e)if(41===o.charCodeAt(t)?(we=k,t++):(we=e,0===b&&B(Q)),we!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();Fe!==e?U=W=[W,J,te,ue,le,we,Fe]:(t=U,U=e)}else t=U,U=e;else t=U,U=e}else t=U,U=e}else t=U,U=e}else t=U,U=e;else t=U,U=e;for(U===e&&(U=Pt());U!==e;){for(L.push(U),U=t,W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(40===o.charCodeAt(t)?(J=ge,t++):(J=e,0===b&&B(ce)),J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e){for(ue=[],le=ur();le!==e;)ue.push(le),le=ur();if(ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e)if(41===o.charCodeAt(t)?(we=k,t++):(we=e,0===b&&B(Q)),we!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();Fe!==e?U=W=[W,J,te,ue,le,we,Fe]:(t=U,U=e)}else t=U,U=e;else t=U,U=e}else t=U,U=e}else t=U,U=e}else t=U,U=e;else t=U,U=e;U===e&&(U=Pt())}if(L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(125===o.charCodeAt(t)?(W=H,t++):(W=e,0===b&&B(Z)),W!==e?w=R={token:"inlineData",values:[],todo:!0}:(t=w,w=e)):(t=w,w=e)}else t=w,w=e}else t=w,w=e}else t=w,w=e;else t=w,w=e}else t=w,w=e}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(pl)),w}()),b--,u===e&&0===b&&B(cl),u}function ur(){var u,w,R,m,C;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if((R=kn())===e&&(R=xn())===e&&(R=wn())===e&&(R=_n())===e&&(o.substr(t,5)===Dr?(R=Dr,t+=5):(R=e,0===b&&B(Ni))),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?u=w=R:(t=u,u=e)}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(hl)),u}function Ea(){var u,w,R,m,C,D;if(b++,u=t,(w=bt())!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e&&(m=Aa())!==e?(C=m,(D={token:"expression",expressionType:"irireforfunction"}).iriref=w,D.args=C.value,u=w=D):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(dl)),u}function Aa(){var u,w,R,m,C,D,T,L,U,W,J,te;if(b++,u=t,(w=Pt())!==e&&(w=vo()),(u=w)===e)if(u=t,40===o.charCodeAt(t)?(w=ge,t++):(w=e,0===b&&B(ce)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(o.substr(t,8)===ye?(m=ye,t+=8):(m=e,0===b&&B(fe)),m===e&&(o.substr(t,8)===re?(m=re,t+=8):(m=e,0===b&&B(V))),m===e&&(m=null),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e){if(L=[],U=t,44===o.charCodeAt(t)?(W=yt,t++):(W=e,0===b&&B(gt)),W!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();J!==e&&(te=lt())!==e?U=W=[W,J,te]:(t=U,U=e)}else t=U,U=e;for(;U!==e;)if(L.push(U),U=t,44===o.charCodeAt(t)?(W=yt,t++):(W=e,0===b&&B(gt)),W!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();J!==e&&(te=lt())!==e?U=W=[W,J,te]:(t=U,U=e)}else t=U,U=e;L!==e?(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e?u=w=function(ue,le,we){for(var Fe=[],je=0;je<we.length;je++)Fe.push(we[je][2]);var Se={token:"args"};return Se.value=[le].concat(Fe),null!=ue&&"DISTINCT"===ue.toUpperCase()?Se.distinct=!0:Se.distinct=!1,Se}(m,D,L):(t=u,u=e)):(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(vl)),u}function kr(){var u,w,R,m,C,D,T,L,U,W;if(b++,u=t,(w=Pt())!==e&&(w=vo()),(u=w)===e)if(u=t,40===o.charCodeAt(t)?(w=ge,t++):(w=e,0===b&&B(ce)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=bt())===e&&(m=lt()),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e){if(D=[],T=t,44===o.charCodeAt(t)?(L=yt,t++):(L=e,0===b&&B(gt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?((W=bt())===e&&(W=lt()),W!==e?T=L=[L,U,W]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;for(;T!==e;)if(D.push(T),T=t,44===o.charCodeAt(t)?(L=yt,t++):(L=e,0===b&&B(gt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?((W=bt())===e&&(W=lt()),W!==e?T=L=[L,U,W]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;D!==e?(41===o.charCodeAt(t)?(T=k,t++):(T=e,0===b&&B(Q)),T!==e?u=w=function(J,te){for(var ue=[],le=0;le<te.length;le++)ue.push(te[le][2]);var we={token:"args"};return we.value=[J].concat(ue),we}(m,D):(t=u,u=e)):(t=u,u=e)}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(yl)),u}function Fa(){var u,w,R,m,C,D,T,L,U;if(b++,u=t,(w=Ca())!==e){for(R=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(46===o.charCodeAt(t)?(C=wt,t++):(C=e,0===b&&B(_t)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();D!==e?((T=Fa())===e&&(T=null),T!==e?R=m=[m,C,D,T]:(t=R,R=e)):(t=R,R=e)}else t=R,R=e;else t=R,R=e;R===e&&(R=null),R!==e?(L=R,U=w.triplesContext,null!=L&&"object"==typeof L&&null!=L.length&&null!=L[3]&&null!=L[3].triplesContext&&(U=U.concat(L[3].triplesContext)),u=w={token:"triplestemplate",triplesContext:U}):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(ml)),u}function Ca(){var u,w,R,m,C,D;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if((R=mn())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e&&(C=ui())!==e?u=w=function(D,T){var L=T.triplesContext,U=D;if(T.pairs)for(var W=0;W<T.pairs.length;W++){var J=T.pairs[W],te=null;null!=J[1].length&&(J[1]=J[1][0]),U.token&&"triplesnodecollection"===U.token?(te={subject:U.chainSubject[0],predicate:J[0],object:J[1]},L.push(te),L=L.concat(U.triplesContext)):(te={subject:U,predicate:J[0],object:J[1]},L.push(te))}var ue={token:"triplessamesubject"};return ue.triplesContext=L,ue.chainSubject=U,ue}(R,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){for(u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if((R=Na())!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?(b++,(D=ui())===e&&(D=null),b--,D===e&&0===b&&B(_l),(C=D)!==e?u=w=function(D,T){var L=D.triplesContext,U=D.chainSubject;if(T.pairs)for(var W=0;W<T.pairs.length;W++){var J=T.pairs[W];if(null!=J[1].length&&(J[1]=J[1][0]),"triplesnodecollection"===D.token)for(var te=0;te<U.length;te++){var ue=U[te];if(null!=ue.triplesContext){var le={subject:ue.chainSubject,predicate:J[0],object:J[1]};L.concat(ue.triplesContext)}else le={subject:U[te],predicate:J[0],object:J[1]},L.push(le)}else le={subject:U,predicate:J[0],object:J[1]},L.push(le)}var we={token:"triplessamesubject"};return we.triplesContext=L,we.chainSubject=U,we}(R,C):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}return b--,u===e&&(w=e,0===b&&B(bl)),u}function ui(){var u,w,R,m,C,D,T,L,U,W,J,te,ue;if(b++,u=t,(w=fi())!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=zt())!==e){for(C=[],D=t,T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(59===o.charCodeAt(t)?(L=Ot,t++):(L=e,0===b&&B(Dt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){if(W=t,(J=fi())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();te!==e&&(ue=zt())!==e?W=J=[J,te,ue]:(t=W,W=e)}else t=W,W=e;W===e&&(W=null),W!==e?D=T=[T,L,U,W]:(t=D,D=e)}else t=D,D=e}else t=D,D=e;else t=D,D=e;for(;D!==e;){for(C.push(D),D=t,T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(59===o.charCodeAt(t)?(L=Ot,t++):(L=e,0===b&&B(Dt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e){if(W=t,(J=fi())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();te!==e&&(ue=zt())!==e?W=J=[J,te,ue]:(t=W,W=e)}else t=W,W=e;W===e&&(W=null),W!==e?D=T=[T,L,U,W]:(t=D,D=e)}else t=D,D=e}else t=D,D=e;else t=D,D=e}C!==e?u=w=function(le,we,Fe){for(var je={token:"propertylist"},Se=[],Re=[],De=0;De<we.length;De++)null!=we[De].triplesContext?(Se=Se.concat(we[De].triplesContext),"triplesnodecollection"===we[De].token&&null!=we[De].chainSubject.length?Re.push([le,we[De].chainSubject[0]]):Re.push([le,we[De].chainSubject])):Re.push([le,we[De]]);for(De=0;De<Fe.length;De++)for(var He=Fe[De][3],Ge=He[0],Je=He[2]||[],Ve=0;Ve<Je.length;Ve++)null!=Je[Ve].triplesContext?(Se=Se.concat(Je[Ve].triplesContext),Re.push([Ge,Je[Ve].chainSubject])):Re.push([Ge,Je[Ve]]);return je.pairs=Re,je.triplesContext=Se,je}(w,m,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(wl)),u}function Sa(){var u,w,R,m,C,D,T,L;if(b++,u=t,(w=li())!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e){if(m=[],C=t,44===o.charCodeAt(t)?(D=yt,t++):(D=e,0===b&&B(gt)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=li())!==e?C=D=[D,T,L]:(t=C,C=e)}else t=C,C=e;for(;C!==e;)if(m.push(C),C=t,44===o.charCodeAt(t)?(D=yt,t++):(D=e,0===b&&B(gt)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=li())!==e?C=D=[D,T,L]:(t=C,C=e)}else t=C,C=e;m!==e?u=w=function(U,W){var J=[];J.push(U);for(var te=0;te<W.length;te++)for(var ue=0;ue<W[te].length;ue++)"object"==typeof W[te][ue]&&null!=W[te][ue].token&&J.push(W[te][ue]);return J}(w,m):(t=u,u=e)}else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(kl)),u}function zt(){var u,w,R,m,C,D,T,L;if(b++,u=t,(w=ci())!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e){if(m=[],C=t,44===o.charCodeAt(t)?(D=yt,t++):(D=e,0===b&&B(gt)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=ci())!==e?C=D=[D,T,L]:(t=C,C=e)}else t=C,C=e;for(;C!==e;)if(m.push(C),C=t,44===o.charCodeAt(t)?(D=yt,t++):(D=e,0===b&&B(gt)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=ci())!==e?C=D=[D,T,L]:(t=C,C=e)}else t=C,C=e;m!==e?u=w=function(U,W){var J=[];J.push(U);for(var te=0;te<W.length;te++)for(var ue=0;ue<W[te].length;ue++)"object"==typeof W[te][ue]&&null!=W[te][ue].token&&J.push(W[te][ue]);return J}(w,m):(t=u,u=e)}else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(El)),u}function li(){var u;return b++,u=vi(),b--,u===e&&0===b&&B(Al),u}function ci(){var u;return b++,u=yi(),b--,u===e&&0===b&&B(Fl),u}function fi(){var u,w;return b++,(u=fr())===e&&(u=t,97===o.charCodeAt(t)?(w=Hr,t++):(w=e,0===b&&B(Vr)),w!==e&&(w={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),u=w),b--,u===e&&(w=e,0===b&&B(Cl)),u}function Ta(){var u,w,R,m,C,D,T,L,U,W,J,te;if(b++,u=t,(w=lr())===e&&(w=cr()),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=Sa())!==e){for(C=[],D=t,T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(59===o.charCodeAt(t)?(L=Ot,t++):(L=e,0===b&&B(Dt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(W=t,(J=lr())===e&&(J=cr()),J!==e&&(te=zt())!==e?W=J=[J,te]:(t=W,W=e),W===e&&(W=null),W!==e?D=T=[T,L,U,W]:(t=D,D=e)):(t=D,D=e)}else t=D,D=e;else t=D,D=e;for(;D!==e;){for(C.push(D),D=t,T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(59===o.charCodeAt(t)?(L=Ot,t++):(L=e,0===b&&B(Dt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(W=t,(J=lr())===e&&(J=cr()),J!==e&&(te=zt())!==e?W=J=[J,te]:(t=W,W=e),W===e&&(W=null),W!==e?D=T=[T,L,U,W]:(t=D,D=e)):(t=D,D=e)}else t=D,D=e;else t=D,D=e}C!==e?u=w=function(ue,le,we){for(var Fe={token:"propertylist"},je=[],Se=[],Re=0;Re<le.length;Re++)null!=le[Re].triplesContext?(je=je.concat(le[Re].triplesContext),"triplesnodecollection"===le[Re].token&&null!=le[Re].chainSubject.length?Se.push([ue,le[Re].chainSubject[0]]):Se.push([ue,le[Re].chainSubject])):Se.push([ue,le[Re]]);for(Re=0;Re<we.length;Re++)for(var De=we[Re][3],He=De[0],Ge=De[1]||[],Je=0;Je<Ge.length;Je++)null!=Ge[Je].triplesContext?(je=je.concat(Ge[Je].triplesContext),Se.push([He,Ge[Je].chainSubject])):Se.push([He,Ge[Je]]);return Fe.pairs=Se,Fe.triplesContext=je,Fe}(w,m,C):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Tl)),u}function lr(){var u,w;return b++,t,w=ja(),b--,(u=w)===e&&(w=e,0===b&&B(Il)),u}function cr(){var u;return b++,u=mt(),b--,u===e&&0===b&&B(Rl),u}function ja(){var u;return b++,u=function(){var w,R,m,C,D,T;if(b++,w=t,(R=pi())!==e){for(m=[],C=t,124===o.charCodeAt(t)?(D=Jr,t++):(D=e,0===b&&B(zr)),D!==e&&(T=pi())!==e?C=D=[D,T]:(t=C,C=e);C!==e;)m.push(C),C=t,124===o.charCodeAt(t)?(D=Jr,t++):(D=e,0===b&&B(zr)),D!==e&&(T=pi())!==e?C=D=[D,T]:(t=C,C=e);m!==e?w=R=function(L,U){if(null==U||0===U.length)return L;for(var W=[],J=0;J<U.length;J++)W.push(U[1]);var te={token:"path",kind:"alternative"};return te.value=W,te}(R,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(Ol)),w}(),b--,u===e&&0===b&&B(Nl),u}function pi(){var u,w,R,m,C,D;if(b++,u=t,(w=hi())!==e){for(R=[],m=t,47===o.charCodeAt(t)?(C=Vt,t++):(C=e,0===b&&B(Jt)),C!==e&&(D=hi())!==e?m=C=[C,D]:(t=m,m=e);m!==e;)R.push(m),m=t,47===o.charCodeAt(t)?(C=Vt,t++):(C=e,0===b&&B(Jt)),C!==e&&(D=hi())!==e?m=C=[C,D]:(t=m,m=e);R!==e?u=w=function(T,L){if(null==L||0===L.length)return T;for(var U=[T],W=0;W<L.length;W++)U.push(L[W][1]);var J={token:"path",kind:"sequence"};return J.value=U,J}(w,R):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Dl)),u}function Ia(){var u,w,R,m,C,D,T;return b++,u=t,b++,(m=bt())===e&&(m=t,97===o.charCodeAt(t)?(C=Hr,t++):(C=e,0===b&&B(Vr)),C!==e&&(C={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(m=C)===e&&(m=t,33===o.charCodeAt(t)?(C=Qn,t++):(C=e,0===b&&B(Un)),C!==e&&(D=function(){var L,U,W,J,te,ue,le,we;if((L=gn())===e)if(L=t,40===o.charCodeAt(t)?(U=ge,t++):(U=e,0===b&&B(ce)),U!==e){if(W=t,(J=gn())!==e){for(te=[],ue=t,124===o.charCodeAt(t)?(le=Jr,t++):(le=e,0===b&&B(zr)),le!==e&&(we=gn())!==e?ue=le=[le,we]:(t=ue,ue=e);ue!==e;)te.push(ue),ue=t,124===o.charCodeAt(t)?(le=Jr,t++):(le=e,0===b&&B(zr)),le!==e&&(we=gn())!==e?ue=le=[le,we]:(t=ue,ue=e);te!==e?W=J=[J,te]:(t=W,W=e)}else t=W,W=e;W===e&&(W=null),W!==e?(41===o.charCodeAt(t)?(J=k,t++):(J=e,0===b&&B(Q)),J!==e?L=U=[U,W,J]:(t=L,L=e)):(t=L,L=e)}else t=L,L=e;return L}())!==e?m=C=[C,D]:(t=m,m=e),m===e&&(m=t,40===o.charCodeAt(t)?(C=ge,t++):(C=e,0===b&&B(ce)),C!==e&&(D=ja())!==e?(41===o.charCodeAt(t)?(T=k,t++):(T=e,0===b&&B(Q)),T!==e?m=C=D:(t=m,m=e)):(t=m,m=e)))),b--,m===e&&(C=e,0===b&&B(Ml)),(w=m)!==e?(R=function(){var m,C,D,T,L,U,W,J,te;return b++,42===o.charCodeAt(t)?(m=X,t++):(m=e,0===b&&B(se)),m===e&&(63===o.charCodeAt(t)?(m=Bn,t++):(m=e,0===b&&B(Mn)),m===e&&(43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m===e&&(m=t,123===o.charCodeAt(t)?(C=Ee,t++):(C=e,0===b&&B(Ce)),C!==e?(D=t,(T=di())!==e?(L=t,44===o.charCodeAt(t)?(U=yt,t++):(U=e,0===b&&B(gt)),U!==e?(125===o.charCodeAt(t)?(W=H,t++):(W=e,0===b&&B(Z)),W===e&&(W=t,(J=di())!==e?(125===o.charCodeAt(t)?(te=H,t++):(te=e,0===b&&B(Z)),te!==e?W=J=[J,te]:(t=W,W=e)):(t=W,W=e)),W!==e?L=U=[U,W]:(t=L,L=e)):(t=L,L=e),L===e&&(125===o.charCodeAt(t)?(L=H,t++):(L=e,0===b&&B(Z))),L!==e?D=T=[T,L]:(t=D,D=e)):(t=D,D=e),D===e&&(D=t,44===o.charCodeAt(t)?(T=yt,t++):(T=e,0===b&&B(gt)),T!==e&&(L=di())!==e?(125===o.charCodeAt(t)?(U=H,t++):(U=e,0===b&&B(Z)),U!==e?D=T=[T,L,U]:(t=D,D=e)):(t=D,D=e)),D!==e?m=C=[C,D]:(t=m,m=e)):(t=m,m=e)))),b--,m===e&&(C=e,0===b&&B(Bl)),m}(),R===e&&(R=null),R!==e?u=w=function(m,C){if(m.token&&"path"!=m.token&&""==C)return m;if(m.token&&m.token!=D&&""!=C){var D={token:"path",kind:"element"};return D.value=m,D.modifier=C,D}return m.modifier=C,m}(w,R):(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Ll)),u}function hi(){var u,w,R,m;return b++,(u=Ia())===e&&(u=t,94===o.charCodeAt(t)?(w="^",t++):(w=e,0===b&&B(yo)),w!==e&&(R=Ia())!==e?((m={token:"path",kind:"inversePath"}).value=R,u=w=m):(t=u,u=e)),b--,u===e&&(w=e,0===b&&B(Pl)),u}function gn(){var u,w,R;return b++,(u=bt())===e&&(97===o.charCodeAt(t)?(u=Hr,t++):(u=e,0===b&&B(Vr)),u===e&&(u=t,94===o.charCodeAt(t)?(w="^",t++):(w=e,0===b&&B(yo)),w!==e?((R=bt())===e&&(97===o.charCodeAt(t)?(R=Hr,t++):(R=e,0===b&&B(Vr))),R!==e?u=w=[w,R]:(t=u,u=e)):(t=u,u=e))),b--,u===e&&(w=e,0===b&&B(Ql)),u}function di(){var u;return b++,u=pr(),b--,u===e&&0===b&&B(Ul),u}function Ra(){var u,w;return b++,u=t,(w=function(){var R,m,C,D,T,L,U,W,J;for(b++,R=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(40===o.charCodeAt(t)?(C=ge,t++):(C=e,0===b&&B(ce)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e){if(T=[],(L=vi())!==e)for(;L!==e;)T.push(L),L=vi();else T=e;if(T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?R=m=T:(t=R,R=e)}else t=R,R=e;else t=R,R=e}else t=R,R=e}else t=R,R=e}else t=R,R=e;else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(Jl)),R}())!==e&&(w=function(R){for(var m=[],C=[],D=null,T=0;T<R.length;T++){At++;var L=null;null==R[T].chainSubject&&null==R[T].triplesContext?L=R[T]:(L=R[T].chainSubject,m=m.concat(R[T].triplesContext)),D={subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:L},0==T&&C.push(D.subject),m.push(D),D=T===R.length-1?{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(At+1)}},m.push(D)}return{token:"triplesnodecollection",triplesContext:m,chainSubject:C}}(w)),(u=w)===e&&(u=function(){var R,m,C,D,T,L,U,W;for(b++,R=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(91===o.charCodeAt(t)?(C=Gn,t++):(C=e,0===b&&B(qn)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if((T=Ta())!==e)if(93===o.charCodeAt(t)?(L=Hn,t++):(L=e,0===b&&B(Vn)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?R=m=function(J){for(var te={token:"blank",value:"_:"+ ++At},ue=[],le=0;le<J.pairs.length;le++){var we=J.pairs[le],Fe={};Fe.subject=te,Fe.predicate=we[0],null!=we[1].length&&(we[1]=we[1][0]),Fe.object=we[1],ue.push(Fe)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:J.triplesContext.concat(ue),chainSubject:te}}(T):(t=R,R=e)}else t=R,R=e;else t=R,R=e;else t=R,R=e}else t=R,R=e;else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(Hl)),R}()),b--,u===e&&(w=e,0===b&&B(Gl)),u}function Na(){var u,w;return b++,u=t,(w=function(){var R,m,C,D,T,L,U,W,J;for(b++,R=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(40===o.charCodeAt(t)?(C=ge,t++):(C=e,0===b&&B(ce)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e){if(T=[],(L=yi())!==e)for(;L!==e;)T.push(L),L=yi();else T=e;if(T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?R=m=T:(t=R,R=e)}else t=R,R=e;else t=R,R=e}else t=R,R=e}else t=R,R=e}else t=R,R=e;else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(zl)),R}())!==e&&(w=function(R){for(var m=[],C=[],D=null,T=0;T<R.length;T++){At++;var L=null;null==R[T].chainSubject&&null==R[T].triplesContext?L=R[T]:(L=R[T].chainSubject,m=m.concat(L.triplesContext)),D={subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:L},0==T&&C.push(D.subject),m.push(D),D=T===R.length-1?{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(At+1)}},m.push(D)}return{token:"triplesnodecollection",triplesContext:m,chainSubject:C}}(w)),(u=w)===e&&(u=function(){var R,m,C,D,T,L,U,W,J;for(b++,R=t,m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(91===o.charCodeAt(t)?(C=Gn,t++):(C=e,0===b&&B(qn)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if((T=ui())!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(93===o.charCodeAt(t)?(U=Hn,t++):(U=e,0===b&&B(Vn)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e?R=m=function(te){for(var ue={token:"blank",value:"_:"+ ++At},le=[],we=0;we<te.pairs.length;we++){var Fe=te.pairs[we],je={};je.subject=ue,je.predicate=Fe[0],null!=Fe[1].length&&(Fe[1]=Fe[1][0]),je.object=Fe[1],le.push(je)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:te.triplesContext.concat(le),chainSubject:ue}}(T):(t=R,R=e)}else t=R,R=e;else t=R,R=e}else t=R,R=e;else t=R,R=e}else t=R,R=e;else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(Vl)),R}()),b--,u===e&&(w=e,0===b&&B(ql)),u}function vi(){var u,w,R,m,C,D;for(b++,t,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=mn())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?w=R=[R,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=Ra())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?w=R=[R,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e}return w!==e&&(w=go(w)),b--,(u=w)===e&&(w=e,0===b&&B(Xl)),u}function yi(){var u,w,R,m,C,D;for(b++,t,w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=mn())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?w=R=[R,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=Na())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?w=R=[R,m,C]:(t=w,w=e)}else t=w,w=e;else t=w,w=e}return w!==e&&(w=go(w)),b--,(u=w)===e&&(w=e,0===b&&B(Wl)),u}function mn(){var u,w,R,m,C,D,T;return b++,(u=mt())===e&&(b++,(w=bt())===e&&(w=xn())===e&&(w=wn())===e&&(w=_n())===e&&(b++,R=t,b++,C=t,o.substr(t,2)===Rs?(D=Rs,t+=2):(D=e,0===b&&B(Lf)),D!==e&&(T=Pa())!==e?C=D=T:(t=C,C=e),b--,C===e&&(D=e,0===b&&B(Df)),(m=C)!==e&&(m={token:"blank",value:m}),(R=m)===e&&(R=t,m=function(){var C,D,T,L;if(b++,C=t,91===o.charCodeAt(t)?(D=Gn,t++):(D=e,0===b&&B(qn)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(93===o.charCodeAt(t)?(L=Hn,t++):(L=e,0===b&&B(Vn)),L!==e?C=D=[D,T,L]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e;return b--,C===e&&(D=e,0===b&&B(wp)),C}(),m!==e&&(m={token:"blank",value:"_:"+ ++At}),R=m),b--,R===e&&(m=e,0===b&&B(If)),(w=R)===e&&(w=Pt())),b--,w===e&&0===b&&B(Zl),u=w),b--,u===e&&0===b&&B($l),u}function fr(){var u;return b++,(u=mt())===e&&(u=bt()),b--,u===e&&0===b&&B(Kl),u}function mt(){var u,w,R,m,C,D,T,L,U;for(b++,u=t,w=[],R=I();R!==e;)w.push(R),R=I();if(w!==e)if(b++,T=t,63===o.charCodeAt(t)?(L=Bn,t++):(L=e,0===b&&B(Mn)),L!==e&&(U=La())!==e?T=L=U:(t=T,T=e),b--,T===e&&(L=e,0===b&&B(Pf)),(R=T)===e&&(R=function(){var T,L,U;return b++,T=t,36===o.charCodeAt(t)?(L="$",t++):(L=e,0===b&&B(Ns)),L!==e&&(U=La())!==e?T=L=U:(t=T,T=e),b--,T===e&&(L=e,0===b&&B(Bf)),T}()),R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();m!==e?((D={token:"var"}).value=R,u=w=D):(t=u,u=e)}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Yl)),u}function lt(){var u;return b++,u=function(){var w,R,m,C,D,T,L,U;if(b++,w=t,(R=gi())!==e){for(m=[],C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===Xr?(T=Xr,t+=2):(T=e,0===b&&B(mo)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=gi())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;for(;C!==e;){for(m.push(C),C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===Xr?(T=Xr,t+=2):(T=e,0===b&&B(mo)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=gi())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}m!==e?w=R=function(W,J){if(0===J.length)return W;for(var te={token:"expression",expressionType:"conditionalor"},ue=[W],le=0;le<J.length;le++)ue.push(J[le][3]);return te.operands=ue,te}(R,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(tc)),w}(),b--,u===e&&0===b&&B(ec),u}function gi(){var u,w,R,m,C,D,T,L;if(b++,u=t,(w=mi())!==e){for(R=[],m=t,C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(o.substr(t,2)===Wr?(D=Wr,t+=2):(D=e,0===b&&B(bo)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=mi())!==e?m=C=[C,D,T,L]:(t=m,m=e)}else t=m,m=e;else t=m,m=e;for(;m!==e;){for(R.push(m),m=t,C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(o.substr(t,2)===Wr?(D=Wr,t+=2):(D=e,0===b&&B(bo)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=mi())!==e?m=C=[C,D,T,L]:(t=m,m=e)}else t=m,m=e;else t=m,m=e}R!==e?u=w=function(U,W){if(0===W.length)return U;for(var J={token:"expression",expressionType:"conditionaland"},te=[U],ue=0;ue<W.length;ue++)te.push(W[ue][3]);return J.operands=te,J}(w,R):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(rc)),u}function mi(){var u;return b++,u=function(){var w,R,m,C,D,T,L,U,W,J,te,ue,le;if(b++,w=t,(R=Et())!==e){for(m=[],C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(61===o.charCodeAt(t)?(T=$r,t++):(T=e,0===b&&B(Kr)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===Yr?(T=Yr,t+=2):(T=e,0===b&&B(xo)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(60===o.charCodeAt(t)?(T=Jn,t++):(T=e,0===b&&B(zn)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(62===o.charCodeAt(t)?(T=Xn,t++):(T=e,0===b&&B(Wn)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===Zr?(T=Zr,t+=2):(T=e,0===b&&B(wo)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===en?(T=en,t+=2):(T=e,0===b&&B(_o)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(73===o.charCodeAt(t)?(T=tn,t++):(T=e,0===b&&B(rn)),T===e&&(105===o.charCodeAt(t)?(T=nn,t++):(T=e,0===b&&B(on))),T!==e)if(78===o.charCodeAt(t)?(L=nr,t++):(L=e,0===b&&B(ir)),L===e&&(110===o.charCodeAt(t)?(L=or,t++):(L=e,0===b&&B(sr))),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=kr())!==e?C=D=[D,T,L,U,W]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(78===o.charCodeAt(t)?(T=nr,t++):(T=e,0===b&&B(ir)),T===e&&(110===o.charCodeAt(t)?(T=or,t++):(T=e,0===b&&B(sr))),T!==e)if(79===o.charCodeAt(t)?(L=ko,t++):(L=e,0===b&&B(Eo)),L===e&&(111===o.charCodeAt(t)?(L=Ao,t++):(L=e,0===b&&B(Fo))),L!==e)if(84===o.charCodeAt(t)?(U=Co,t++):(U=e,0===b&&B(So)),U===e&&(116===o.charCodeAt(t)?(U=To,t++):(U=e,0===b&&B(jo))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(73===o.charCodeAt(t)?(J=tn,t++):(J=e,0===b&&B(rn)),J===e&&(105===o.charCodeAt(t)?(J=nn,t++):(J=e,0===b&&B(on))),J!==e)if(78===o.charCodeAt(t)?(te=nr,t++):(te=e,0===b&&B(ir)),te===e&&(110===o.charCodeAt(t)?(te=or,t++):(te=e,0===b&&B(sr))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();ue!==e&&(le=kr())!==e?C=D=[D,T,L,U,W,J,te,ue,le]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e;else t=C,C=e;else t=C,C=e}}}}}}}for(;C!==e;){for(m.push(C),C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(61===o.charCodeAt(t)?(T=$r,t++):(T=e,0===b&&B(Kr)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===Yr?(T=Yr,t+=2):(T=e,0===b&&B(xo)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(60===o.charCodeAt(t)?(T=Jn,t++):(T=e,0===b&&B(zn)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(62===o.charCodeAt(t)?(T=Xn,t++):(T=e,0===b&&B(Wn)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===Zr?(T=Zr,t+=2):(T=e,0===b&&B(wo)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(o.substr(t,2)===en?(T=en,t+=2):(T=e,0===b&&B(_o)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Et())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(73===o.charCodeAt(t)?(T=tn,t++):(T=e,0===b&&B(rn)),T===e&&(105===o.charCodeAt(t)?(T=nn,t++):(T=e,0===b&&B(on))),T!==e)if(78===o.charCodeAt(t)?(L=nr,t++):(L=e,0===b&&B(ir)),L===e&&(110===o.charCodeAt(t)?(L=or,t++):(L=e,0===b&&B(sr))),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e&&(W=kr())!==e?C=D=[D,T,L,U,W]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(78===o.charCodeAt(t)?(T=nr,t++):(T=e,0===b&&B(ir)),T===e&&(110===o.charCodeAt(t)?(T=or,t++):(T=e,0===b&&B(sr))),T!==e)if(79===o.charCodeAt(t)?(L=ko,t++):(L=e,0===b&&B(Eo)),L===e&&(111===o.charCodeAt(t)?(L=Ao,t++):(L=e,0===b&&B(Fo))),L!==e)if(84===o.charCodeAt(t)?(U=Co,t++):(U=e,0===b&&B(So)),U===e&&(116===o.charCodeAt(t)?(U=To,t++):(U=e,0===b&&B(jo))),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(73===o.charCodeAt(t)?(J=tn,t++):(J=e,0===b&&B(rn)),J===e&&(105===o.charCodeAt(t)?(J=nn,t++):(J=e,0===b&&B(on))),J!==e)if(78===o.charCodeAt(t)?(te=nr,t++):(te=e,0===b&&B(ir)),te===e&&(110===o.charCodeAt(t)?(te=or,t++):(te=e,0===b&&B(sr))),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();ue!==e&&(le=kr())!==e?C=D=[D,T,L,U,W,J,te,ue,le]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e;else t=C,C=e;else t=C,C=e}}}}}}}}m!==e?w=R=function(we,Fe){if(0===Fe.length)return we;if("i"===Fe[0][1]||"I"===Fe[0][1]||"n"===Fe[0][1]||"N"===Fe[0][1]){var je={};if("i"===Fe[0][1]||"I"===Fe[0][1]){var Se="=";je.expressionType="conditionalor"}else Se="!=",je.expressionType="conditionaland";for(var Re=we,De=[],He=0;He<Fe[0].length;He++)if("args"===Fe[0][He].token){De=Fe[0][He].value;break}je.token="expression",je.operands=[];for(var Ge=0;Ge<De.length;Ge++){var Je={token:"expression",expressionType:"relationalexpression"};Je.operator=Se,Je.op1=Re,Je.op2=De[Ge],je.operands.push(Je)}return je}return(je={expressionType:"relationalexpression"}).operator=Fe[0][1],je.op1=we,je.op2=Fe[0][3],je.token="expression",je}(R,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(ic)),w}(),b--,u===e&&0===b&&B(nc),u}function Et(){var u;return b++,u=function(){var w,R,m,C,D,T,L,U,W,J;if(b++,w=t,(R=Er())!==e){for(m=[],C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(43===o.charCodeAt(t)?(T=Qt,t++):(T=e,0===b&&B(Ut)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Er())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(45===o.charCodeAt(t)?(T=jt,t++):(T=e,0===b&&B(It)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Er())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e)if(C=t,(D=Ar())===e&&(D=Ar()),D!==e){for(T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(42===o.charCodeAt(t)?(U=X,t++):(U=e,0===b&&B(se)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Lt())!==e?T=L=[L,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(47===o.charCodeAt(t)?(U=Vt,t++):(U=e,0===b&&B(Jt)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Lt())!==e?T=L=[L,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}T===e&&(T=null),T!==e?C=D=[D,T]:(t=C,C=e)}else t=C,C=e}for(;C!==e;){for(m.push(C),C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(43===o.charCodeAt(t)?(T=Qt,t++):(T=e,0===b&&B(Ut)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Er())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(45===o.charCodeAt(t)?(T=jt,t++):(T=e,0===b&&B(It)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=Er())!==e?C=D=[D,T,L,U]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e)if(C=t,(D=Ar())===e&&(D=Ar()),D!==e){for(T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(42===o.charCodeAt(t)?(U=X,t++):(U=e,0===b&&B(se)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Lt())!==e?T=L=[L,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(47===o.charCodeAt(t)?(U=Vt,t++):(U=e,0===b&&B(Jt)),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();W!==e&&(J=Lt())!==e?T=L=[L,U,W,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}T===e&&(T=null),T!==e?C=D=[D,T]:(t=C,C=e)}else t=C,C=e}}m!==e?w=R=function(te,ue){if(0===ue.length)return te;var le={token:"expression",expressionType:"additiveexpression"};le.summand=te,le.summands=[];for(var we=0;we<ue.length;we++){var Fe=ue[we],je={};if(4==Fe.length&&"string"==typeof Fe[1])je.operator=Fe[1],je.expression=Fe[3];else{var Se={},Re=je[0],De=(je[1][1],je[1][3]);Re.value<0?(je.operator="-",Re.value=-Re.value):je.operator="+",Se.token="expression",Se.expressionType="multiplicativeexpression",Se.operator=Re,Se.factors=[{operator:null,expression:De}],je.expression=Se}le.summands.push(je)}return le}(R,m):(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(sc)),w}(),b--,u===e&&0===b&&B(oc),u}function Er(){var u,w,R,m,C,D,T,L;if(b++,u=t,(w=Lt())!==e){for(R=[],m=t,C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(42===o.charCodeAt(t)?(D=X,t++):(D=e,0===b&&B(se)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=Lt())!==e?m=C=[C,D,T,L]:(t=m,m=e)}else t=m,m=e;else t=m,m=e;if(m===e){for(m=t,C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(47===o.charCodeAt(t)?(D=Vt,t++):(D=e,0===b&&B(Jt)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=Lt())!==e?m=C=[C,D,T,L]:(t=m,m=e)}else t=m,m=e;else t=m,m=e}for(;m!==e;){for(R.push(m),m=t,C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(42===o.charCodeAt(t)?(D=X,t++):(D=e,0===b&&B(se)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=Lt())!==e?m=C=[C,D,T,L]:(t=m,m=e)}else t=m,m=e;else t=m,m=e;if(m===e){for(m=t,C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if(47===o.charCodeAt(t)?(D=Vt,t++):(D=e,0===b&&B(Jt)),D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e&&(L=Lt())!==e?m=C=[C,D,T,L]:(t=m,m=e)}else t=m,m=e;else t=m,m=e}}R!==e?u=w=function(U,W){if(0===W.length)return U;var J={token:"expression",expressionType:"multiplicativeexpression"};J.factor=U,J.factors=[];for(var te=0;te<W.length;te++){var ue=W[te],le={};le.operator=ue[1],le.expression=ue[3],J.factors.push(le)}return J}(w,R):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(ac)),u}function Lt(){var u,w,R,m,C,D,T;if(b++,u=t,33===o.charCodeAt(t)?(w=Qn,t++):(w=e,0===b&&B(Un)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e&&(m=bn())!==e?((C={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"}).expression=m,u=w=C):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,43===o.charCodeAt(t)?(w=Qt,t++):(w=e,0===b&&B(Ut)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e&&(m=bn())!==e?(D=m,(T={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"}).expression=D,u=w=T):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,45===o.charCodeAt(t)?(w=jt,t++):(w=e,0===b&&B(It)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e&&(m=bn())!==e?(w=function(D){var T={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return T.expression=D,T}(m),u=w):(t=u,u=e)}else t=u,u=e;u===e&&(u=bn())}}return b--,u===e&&(w=e,0===b&&B(uc)),u}function bn(){var u,w,R,m,C;return b++,(u=bi())===e&&(u=xi())===e&&(u=function(){var m,C,D,T,L,U;if(b++,m=t,(C=bt())!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();D!==e?((T=Aa())===e&&(T=null),T!==e?(L=T,(U={token:"expression",expressionType:"irireforfunction"}).iriref=C,U.args=null!=L?L.value:L,m=C=U):(t=m,m=e)):(t=m,m=e)}else t=m,m=e;return b--,m===e&&(C=e,0===b&&B(yf)),m}(),u===e&&(u=t,(w=xn())!==e&&((R={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"}).value=w,w=R),(u=w)===e&&(u=t,(w=wn())!==e&&(m=w,(C={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"}).value=m,w=C),(u=w)===e&&(u=t,(w=_n())!==e&&(w=function(m){var C={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return C.value=m,C}(w)),(u=w)===e&&(u=function(){var m,C,D,T,L,U,W,J,te,ue,le,we,Fe,je,Se,Re,De,He,Ge,Je,Ve,Xe,nt,et,vt;if(b++,m=t,o.substr(t,5)===hs?(C=hs,t+=5):(C=e,0===b&&B(rf)),C===e&&(o.substr(t,5)===ds?(C=ds,t+=5):(C=e,0===b&&B(nf))),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(40===o.charCodeAt(t)?(T=ge,t++):(T=e,0===b&&B(ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,8)===ye?(U=ye,t+=8):(U=e,0===b&&B(fe)),U===e&&(o.substr(t,8)===re?(U=re,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if(42===o.charCodeAt(t)?(J=X,t++):(J=e,0===b&&B(se)),J===e&&(J=lt()),J!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e?(Je=J,(Ve={token:"expression",expressionType:"aggregate",aggregateType:"count"}).distinct=""!=(Ge=U)&&null!=Ge?"DISTINCT":Ge,Ve.expression=Je,m=C=Ve):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,12)===vs?(C=vs,t+=12):(C=e,0===b&&B(of)),C===e&&(o.substr(t,12)===ys?(C=ys,t+=12):(C=e,0===b&&B(sf))),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(40===o.charCodeAt(t)?(T=ge,t++):(T=e,0===b&&B(ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,8)===ye?(U=ye,t+=8):(U=e,0===b&&B(fe)),U===e&&(o.substr(t,8)===re?(U=re,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){if(te=t,59===o.charCodeAt(t)?(ue=Ot,t++):(ue=e,0===b&&B(Dt)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();if(le!==e)if(o.substr(t,9)===gs?(we=gs,t+=9):(we=e,0===b&&B(af)),we!==e){for(Fe=[],je=I();je!==e;)Fe.push(je),je=I();if(Fe!==e)if(61===o.charCodeAt(t)?(je=$r,t++):(je=e,0===b&&B(Kr)),je!==e){for(Se=[],Re=I();Re!==e;)Se.push(Re),Re=I();if(Se!==e)if((Re=Oa())!==e){for(De=[],He=I();He!==e;)De.push(He),He=I();De!==e?te=ue=[ue,le,we,Fe,je,Se,Re,De]:(t=te,te=e)}else t=te,te=e;else t=te,te=e}else t=te,te=e;else t=te,te=e}else t=te,te=e;else t=te,te=e}else t=te,te=e;if(te===e&&(te=null),te!==e)if(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e?(Xe=U,nt=J,et=te,(vt={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"}).distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,vt.expression=nt,vt.separator=et,m=C=vt):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,3)===ms?(C=ms,t+=3):(C=e,0===b&&B(uf)),C===e&&(o.substr(t,3)===bs?(C=bs,t+=3):(C=e,0===b&&B(lf))),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(40===o.charCodeAt(t)?(T=ge,t++):(T=e,0===b&&B(ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,8)===ye?(U=ye,t+=8):(U=e,0===b&&B(fe)),U===e&&(o.substr(t,8)===re?(U=re,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,3)===xs?(C=xs,t+=3):(C=e,0===b&&B(cf)),C===e&&(o.substr(t,3)===ws?(C=ws,t+=3):(C=e,0===b&&B(ff))),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(40===o.charCodeAt(t)?(T=ge,t++):(T=e,0===b&&B(ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,8)===ye?(U=ye,t+=8):(U=e,0===b&&B(fe)),U===e&&(o.substr(t,8)===re?(U=re,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"min"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e){if(m=t,o.substr(t,3)===_s?(C=_s,t+=3):(C=e,0===b&&B(pf)),C===e&&(o.substr(t,3)===ks?(C=ks,t+=3):(C=e,0===b&&B(hf))),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(40===o.charCodeAt(t)?(T=ge,t++):(T=e,0===b&&B(ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,8)===ye?(U=ye,t+=8):(U=e,0===b&&B(fe)),U===e&&(o.substr(t,8)===re?(U=re,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"max"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;if(m===e)if(m=t,o.substr(t,3)===Es?(C=Es,t+=3):(C=e,0===b&&B(df)),C===e&&(o.substr(t,3)===As?(C=As,t+=3):(C=e,0===b&&B(vf))),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if(40===o.charCodeAt(t)?(T=ge,t++):(T=e,0===b&&B(ce)),T!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();if(L!==e)if(o.substr(t,8)===ye?(U=ye,t+=8):(U=e,0===b&&B(fe)),U===e&&(o.substr(t,8)===re?(U=re,t+=8):(U=e,0===b&&B(V))),U===e&&(U=null),U!==e){for(W=[],J=I();J!==e;)W.push(J),J=I();if(W!==e)if((J=lt())!==e){for(te=[],ue=I();ue!==e;)te.push(ue),ue=I();if(te!==e)if(41===o.charCodeAt(t)?(ue=k,t++):(ue=e,0===b&&B(Q)),ue!==e){for(le=[],we=I();we!==e;)le.push(we),we=I();le!==e?(C=function(Xe,nt){var et={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return et.distinct=""!=Xe&&null!=Xe?"DISTINCT":Xe,et.expression=nt,et}(U,J),m=C):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e;else t=m,m=e}else t=m,m=e}}}}return b--,m===e&&(C=e,0===b&&B(tf)),m}(),u===e&&(u=t,(w=mt())!==e&&(w=function(m){var C={token:"expression",expressionType:"atomic",primaryexpression:"var"};return C.value=m,C}(w)),u=w)))))),b--,u===e&&(w=e,0===b&&B(lc)),u}function bi(){var u,w,R,m,C,D;if(b++,u=t,40===o.charCodeAt(t)?(w=ge,t++):(w=e,0===b&&B(ce)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if((m=lt())!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();C!==e?(41===o.charCodeAt(t)?(D=k,t++):(D=e,0===b&&B(Q)),D!==e?u=w=m:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(cc)),u}function xi(){var u,w,R,m,C,D,T,L,U,W,J,te,ue,le,we,Fe,je,Se,Re;if(b++,u=t,"STR"===o.substr(t,3)?(w="STR",t+=3):(w=e,0===b&&B(pc)),w===e&&("str"===o.substr(t,3)?(w="str",t+=3):(w=e,0===b&&B(hc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?((je={token:"expression",expressionType:"builtincall",builtincall:"str"}).args=[D],u=w=je):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,4)===Io?(w=Io,t+=4):(w=e,0===b&&B(dc)),w===e&&(o.substr(t,4)===Ro?(w=Ro,t+=4):(w=e,0===b&&B(vc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(Se=D,(Re={token:"expression",expressionType:"builtincall",builtincall:"lang"}).args=[Se],u=w=Re):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,11)===No?(w=No,t+=11):(w=e,0===b&&B(yc)),w===e&&(o.substr(t,11)===Oo?(w=Oo,t+=11):(w=e,0===b&&B(gc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(44===o.charCodeAt(t)?(L=yt,t++):(L=e,0===b&&B(gt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=lt())!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();J!==e?(41===o.charCodeAt(t)?(te=k,t++):(te=e,0===b&&B(Q)),te!==e?(w=function(Se,Re){var De={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return De.args=[Se,Re],De}(D,W),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,8)===Do?(w=Do,t+=8):(w=e,0===b&&B(mc)),w===e&&(o.substr(t,8)===Lo?(w=Lo,t+=8):(w=e,0===b&&B(bc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,5)===Po?(w=Po,t+=5):(w=e,0===b&&B(xc)),w===e&&(o.substr(t,5)===Bo?(w=Bo,t+=5):(w=e,0===b&&B(wc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=mt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"bound"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,"IRI"===o.substr(t,3)?(w="IRI",t+=3):(w=e,0===b&&B(_c)),w===e&&("iri"===o.substr(t,3)?(w="iri",t+=3):(w=e,0===b&&B(kc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"iri"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,"URI"===o.substr(t,3)?(w="URI",t+=3):(w=e,0===b&&B(Ec)),w===e&&("uri"===o.substr(t,3)?(w="uri",t+=3):(w=e,0===b&&B(Ac))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"uri"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,5)===Mo?(w=Mo,t+=5):(w=e,0===b&&B(Fc)),w===e&&(o.substr(t,5)===Qo?(w=Qo,t+=5):(w=e,0===b&&B(Cc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e){if(m=t,40===o.charCodeAt(t)?(C=ge,t++):(C=e,0===b&&B(ce)),C!==e){for(D=[],T=I();T!==e;)D.push(T),T=I();if(D!==e)if((T=lt())!==e){for(L=[],U=I();U!==e;)L.push(U),U=I();L!==e?(41===o.charCodeAt(t)?(U=k,t++):(U=e,0===b&&B(Q)),U!==e?m=C=[C,D,T,L,U]:(t=m,m=e)):(t=m,m=e)}else t=m,m=e;else t=m,m=e}else t=m,m=e;m===e&&(m=Pt()),m!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===Se.length?Re.args=[Se[2]]:Re.args=null,Re}(m),u=w):(t=u,u=e)}else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,8)===Uo?(w=Uo,t+=8):(w=e,0===b&&B(Sc)),w===e&&(o.substr(t,8)===Go?(w=Go,t+=8):(w=e,0===b&&B(Tc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e&&(m=kr())!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return Re.args=Se,Re}(m),u=w):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,"IF"===o.substr(t,2)?(w="IF",t+=2):(w=e,0===b&&B(jc)),w===e&&("if"===o.substr(t,2)?(w="if",t+=2):(w=e,0===b&&B(Ic))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(44===o.charCodeAt(t)?(L=yt,t++):(L=e,0===b&&B(gt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=lt())!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();if(J!==e)if(44===o.charCodeAt(t)?(te=yt,t++):(te=e,0===b&&B(gt)),te!==e){for(ue=[],le=I();le!==e;)ue.push(le),le=I();if(ue!==e)if((le=lt())!==e){for(we=[],Fe=I();Fe!==e;)we.push(Fe),Fe=I();we!==e?(41===o.charCodeAt(t)?(Fe=k,t++):(Fe=e,0===b&&B(Q)),Fe!==e?(w=function(Se,Re,De){var He={token:"expression",expressionType:"builtincall",builtincall:"if"};return He.args=[Se,Re,De],He}(D,W,le),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,9)===qo?(w=qo,t+=9):(w=e,0===b&&B(Rc)),w===e&&(o.substr(t,9)===Ho?(w=Ho,t+=9):(w=e,0===b&&B(Nc)),w===e&&(o.substr(t,9)===Vo?(w=Vo,t+=9):(w=e,0===b&&B(Oc)))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,7)===Jo?(w=Jo,t+=7):(w=e,0===b&&B(Dc)),w===e&&(o.substr(t,7)===zo?(w=zo,t+=7):(w=e,0===b&&B(Lc)),w===e&&(o.substr(t,7)===Xo?(w=Xo,t+=7):(w=e,0===b&&B(Pc)))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,8)===Wo?(w=Wo,t+=8):(w=e,0===b&&B(Bc)),w===e&&(o.substr(t,8)===$o?(w=$o,t+=8):(w=e,0===b&&B(Mc))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if(44===o.charCodeAt(t)?(L=yt,t++):(L=e,0===b&&B(gt)),L!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();if(U!==e)if((W=lt())!==e){for(J=[],te=I();te!==e;)J.push(te),te=I();J!==e?(41===o.charCodeAt(t)?(te=k,t++):(te=e,0===b&&B(Q)),te!==e?(w=function(Se,Re){var De={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return De.args=[Se,Re],De}(D,W),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,5)===Ko?(w=Ko,t+=5):(w=e,0===b&&B(Qc)),w===e&&(o.substr(t,5)===Yo?(w=Yo,t+=5):(w=e,0===b&&B(Uc)),w===e&&(o.substr(t,5)===Zo?(w=Zo,t+=5):(w=e,0===b&&B(Gc)),w===e&&(o.substr(t,5)===es?(w=es,t+=5):(w=e,0===b&&B(qc)),w===e&&(o.substr(t,5)===ts?(w=ts,t+=5):(w=e,0===b&&B(Hc)),w===e&&(o.substr(t,5)===rs?(w=rs,t+=5):(w=e,0===b&&B(Vc))))))),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();if(R!==e)if(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m!==e){for(C=[],D=I();D!==e;)C.push(D),D=I();if(C!==e)if((D=lt())!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();T!==e?(41===o.charCodeAt(t)?(L=k,t++):(L=e,0===b&&B(Q)),L!==e?(w=function(Se){var Re={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return Re.args=[Se],Re}(D),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e;if(u===e){if(u=t,o.substr(t,7)===ns?(w=ns,t+=7):(w=e,0===b&&B(Jc)),w===e&&(o.substr(t,7)===is?(w=is,t+=7):(w=e,0===b&&B(zc))),w!==e){if(R=[],os.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ss)),m!==e)for(;m!==e;)R.push(m),os.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ss));else R=e;if(R!==e){for(m=[],C=I();C!==e;)m.push(C),C=I();if(m!==e)if(40===o.charCodeAt(t)?(C=ge,t++):(C=e,0===b&&B(ce)),C!==e){for(D=[],T=t,L=[],U=I();U!==e;)L.push(U),U=I();for(L!==e&&(U=lt())!==e?(44===o.charCodeAt(t)?(W=yt,t++):(W=e,0===b&&B(gt)),W!==e?T=L=[L,U,W]:(t=T,T=e)):(t=T,T=e);T!==e;){for(D.push(T),T=t,L=[],U=I();U!==e;)L.push(U),U=I();L!==e&&(U=lt())!==e?(44===o.charCodeAt(t)?(W=yt,t++):(W=e,0===b&&B(gt)),W!==e?T=L=[L,U,W]:(t=T,T=e)):(t=T,T=e)}if(D!==e){for(T=[],L=I();L!==e;)T.push(L),L=I();if(T!==e)if((L=lt())!==e){for(U=[],W=I();W!==e;)U.push(W),W=I();U!==e?(41===o.charCodeAt(t)?(W=k,t++):(W=e,0===b&&B(Q)),W!==e?(w=function(Se,Re,De){var He={token:"expression",expressionType:"custom"};He.name=Se.join("");for(var Ge=[],Je=0;Je<Re.length;Je++)Ge.push(Re[Je][1]);return Ge.push(De),He.args=Ge,He}(R,D,L),u=w):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;else t=u,u=e}else t=u,u=e}else t=u,u=e;else t=u,u=e}else t=u,u=e}else t=u,u=e;u===e&&(u=function(){var Se,Re,De,He,Ge,Je,Ve,Xe,nt,et,vt,pt,St,kt,Ct,Bt,xt,Xt;if(b++,Se=t,o.substr(t,5)===as?(Re=as,t+=5):(Re=e,0===b&&B(Wc)),Re===e&&(o.substr(t,5)===us?(Re=us,t+=5):(Re=e,0===b&&B($c))),Re!==e){for(De=[],He=I();He!==e;)De.push(He),He=I();if(De!==e)if(40===o.charCodeAt(t)?(He=ge,t++):(He=e,0===b&&B(ce)),He!==e){for(Ge=[],Je=I();Je!==e;)Ge.push(Je),Je=I();if(Ge!==e)if((Je=lt())!==e){for(Ve=[],Xe=I();Xe!==e;)Ve.push(Xe),Xe=I();if(Ve!==e)if(44===o.charCodeAt(t)?(Xe=yt,t++):(Xe=e,0===b&&B(gt)),Xe!==e){for(nt=[],et=I();et!==e;)nt.push(et),et=I();if(nt!==e)if((et=lt())!==e){for(vt=[],pt=I();pt!==e;)vt.push(pt),pt=I();if(vt!==e){if(pt=t,44===o.charCodeAt(t)?(St=yt,t++):(St=e,0===b&&B(gt)),St!==e){for(kt=[],Ct=I();Ct!==e;)kt.push(Ct),Ct=I();kt!==e&&(Ct=lt())!==e?pt=St=[St,kt,Ct]:(t=pt,pt=e)}else t=pt,pt=e;if(pt===e&&(pt=null),pt!==e){for(St=[],kt=I();kt!==e;)St.push(kt),kt=I();St!==e?(41===o.charCodeAt(t)?(kt=k,t++):(kt=e,0===b&&B(Q)),kt!==e?(Bt=et,xt=pt,(Xt={token:"expression",expressionType:"regex"}).text=Je,Xt.pattern=Bt,null!=xt&&(Xt.flags=xt[2]),Se=Re=Xt):(t=Se,Se=e)):(t=Se,Se=e)}else t=Se,Se=e}else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;return b--,Se===e&&(Re=e,0===b&&B(Xc)),Se}(),u===e&&(u=function(){var Se,Re,De,He,Ge,Je;if(b++,Se=t,o.substr(t,6)===sn?(Re=sn,t+=6):(Re=e,0===b&&B(ls)),Re===e&&(o.substr(t,6)===an?(Re=an,t+=6):(Re=e,0===b&&B(cs))),Re!==e){for(De=[],He=I();He!==e;)De.push(He),He=I();De!==e&&(He=Ft())!==e?(Ge=He,(Je={token:"expression",expressionType:"builtincall",builtincall:"exists"}).args=[Ge],Se=Re=Je):(t=Se,Se=e)}else t=Se,Se=e;return b--,Se===e&&(Re=e,0===b&&B(Kc)),Se}(),u===e&&(u=function(){var Se,Re,De,He,Ge,Je,Ve,Xe;if(b++,Se=t,o.substr(t,3)===fs?(Re=fs,t+=3):(Re=e,0===b&&B(Zc)),Re===e&&(o.substr(t,3)===ps?(Re=ps,t+=3):(Re=e,0===b&&B(ef))),Re!==e){for(De=[],He=I();He!==e;)De.push(He),He=I();if(De!==e)if(o.substr(t,6)===sn?(He=sn,t+=6):(He=e,0===b&&B(ls)),He===e&&(o.substr(t,6)===an?(He=an,t+=6):(He=e,0===b&&B(cs))),He!==e){for(Ge=[],Je=I();Je!==e;)Ge.push(Je),Je=I();Ge!==e&&(Je=Ft())!==e?(Ve=Je,(Xe={token:"expression",expressionType:"builtincall",builtincall:"notexists"}).args=[Ve],Se=Re=Xe):(t=Se,Se=e)}else t=Se,Se=e;else t=Se,Se=e}else t=Se,Se=e;return b--,Se===e&&(Re=e,0===b&&B(Yc)),Se}())))}}}}}}}}}}}}}}return b--,u===e&&(w=e,0===b&&B(fc)),u}function xn(){var u,w,R,m,C,D,T;return b++,u=t,(w=Oa())!==e?((R=function(){var L,U,W,J,te,ue,le,we,Fe,je;if(b++,L=t,64===o.charCodeAt(t)?(U="@",t++):(U=e,0===b&&B(Os)),U!==e){if(W=[],Ds.test(o.charAt(t))?(J=o.charAt(t),t++):(J=e,0===b&&B(Ls)),J!==e)for(;J!==e;)W.push(J),Ds.test(o.charAt(t))?(J=o.charAt(t),t++):(J=e,0===b&&B(Ls));else W=e;if(W!==e){if(J=[],te=t,45===o.charCodeAt(t)?(ue=jt,t++):(ue=e,0===b&&B(It)),ue!==e){if(le=[],ln.test(o.charAt(t))?(we=o.charAt(t),t++):(we=e,0===b&&B(cn)),we!==e)for(;we!==e;)le.push(we),ln.test(o.charAt(t))?(we=o.charAt(t),t++):(we=e,0===b&&B(cn));else le=e;le!==e?te=ue=[ue,le]:(t=te,te=e)}else t=te,te=e;for(;te!==e;)if(J.push(te),te=t,45===o.charCodeAt(t)?(ue=jt,t++):(ue=e,0===b&&B(It)),ue!==e){if(le=[],ln.test(o.charAt(t))?(we=o.charAt(t),t++):(we=e,0===b&&B(cn)),we!==e)for(;we!==e;)le.push(we),ln.test(o.charAt(t))?(we=o.charAt(t),t++):(we=e,0===b&&B(cn));else le=e;le!==e?te=ue=[ue,le]:(t=te,te=e)}else t=te,te=e;J!==e?(Fe=W,L=U=0===(je=J).length?("@"+Fe.join("")).toLowerCase():("@"+Fe.join("")+"-"+je[0][1].join("")).toLowerCase()):(t=L,L=e)}else t=L,L=e}else t=L,L=e;return b--,L===e&&(U=e,0===b&&B(Qf)),L}())===e&&(R=t,"^^"===o.substr(t,2)?(m="^^",t+=2):(m=e,0===b&&B(mf)),m!==e&&(C=bt())!==e?R=m=[m,C]:(t=R,R=e)),R===e&&(R=null),R!==e?(D=w,u=w="string"==typeof(T=R)&&T.length>0?{token:"literal",value:D.value,lang:T.slice(1),type:null}:null!=T&&"object"==typeof T?(T.shift(),{token:"literal",value:D.value,lang:null,type:T[0]}):{token:"literal",value:D.value,lang:null,type:null}):(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(gf)),u}function wn(){var u,w;return b++,b++,(w=ki())===e&&(w=_i())===e&&(w=pr()),b--,w===e&&0===b&&B(xf),(u=w)===e&&(u=function(){var w,R,m,C;return b++,b++,R=t,43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m!==e&&(C=ki())!==e?R=m=Ps(C):(t=R,R=e),b--,R===e&&(m=e,0===b&&B(zf)),(w=R)===e&&(w=function(){var R,m,C;return b++,R=t,43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m!==e&&(C=_i())!==e?R=m=Ps(C):(t=R,R=e),b--,R===e&&(m=e,0===b&&B(Jf)),R}(),w===e&&(w=function(){var R,m,C,D;return b++,R=t,43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m!==e&&(C=pr())!==e?((D=C).value="+"+D.value,R=m=D):(t=R,R=e),b--,R===e&&(m=e,0===b&&B(Vf)),R}())),b--,w===e&&0===b&&B(wf),w}(),u===e&&(u=Ar())),b--,u===e&&0===b&&B(bf),u}function Ar(){var u,w,R,m;return b++,b++,w=t,45===o.charCodeAt(t)?(R=jt,t++):(R=e,0===b&&B(It)),R!==e&&(m=ki())!==e?w=R=$n(m):(t=w,w=e),b--,w===e&&(R=e,0===b&&B($f)),(u=w)===e&&(u=function(){var w,R,m;return b++,w=t,45===o.charCodeAt(t)?(R=jt,t++):(R=e,0===b&&B(It)),R!==e&&(m=_i())!==e?w=R=$n(m):(t=w,w=e),b--,w===e&&(R=e,0===b&&B(Wf)),w}(),u===e&&(u=function(){var w,R,m;return b++,w=t,45===o.charCodeAt(t)?(R=jt,t++):(R=e,0===b&&B(It)),R!==e&&(m=pr())!==e?w=R=$n(m):(t=w,w=e),b--,w===e&&(R=e,0===b&&B(Xf)),w}())),b--,u===e&&0===b&&B(_f),u}function _n(){var u,w;return b++,u=t,o.substr(t,4)===Fs?(w=Fs,t+=4):(w=e,0===b&&B(Ef)),w===e&&(o.substr(t,4)===Cs?(w=Cs,t+=4):(w=e,0===b&&B(Af))),w!==e&&(w={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(u=w)===e&&(u=t,o.substr(t,5)===Ss?(w=Ss,t+=5):(w=e,0===b&&B(Ff)),w===e&&(o.substr(t,5)===Ts?(w=Ts,t+=5):(w=e,0===b&&B(Cf))),w!==e&&(w={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),u=w),b--,u===e&&(w=e,0===b&&B(kf)),u}function Oa(){var u,w;return b++,u=t,(w=function(){var R,m,C,D;if(b++,R=t,o.substr(t,3)===pn?(m=pn,t+=3):(m=e,0===b&&B(Hs)),m!==e){for(C=[],Vs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(Js)),D===e&&(D=Gt());D!==e;)C.push(D),Vs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(Js)),D===e&&(D=Gt());C!==e?(o.substr(t,3)===pn?(D=pn,t+=3):(D=e,0===b&&B(Hs)),D!==e?R=m=fn(C):(t=R,R=e)):(t=R,R=e)}else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(ip)),R}())!==e&&(w=un(w)),(u=w)===e&&(u=t,(w=function(){var R,m,C,D;if(b++,R=t,o.substr(t,3)===hn?(m=hn,t+=3):(m=e,0===b&&B(zs)),m!==e){for(C=[],Xs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(Ws)),D===e&&(D=Gt());D!==e;)C.push(D),Xs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(Ws)),D===e&&(D=Gt());C!==e?(o.substr(t,3)===hn?(D=hn,t+=3):(D=e,0===b&&B(zs)),D!==e?R=m=fn(C):(t=R,R=e)):(t=R,R=e)}else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(op)),R}())!==e&&(w=un(w)),(u=w)===e&&(u=t,(w=function(){var R,m,C,D;if(b++,R=t,39===o.charCodeAt(t)?(m=Kn,t++):(m=e,0===b&&B(Yn)),m!==e){for(C=[],Bs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(Ms)),D===e&&(D=Gt());D!==e;)C.push(D),Bs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(Ms)),D===e&&(D=Gt());C!==e?(39===o.charCodeAt(t)?(D=Kn,t++):(D=e,0===b&&B(Yn)),D!==e?R=m=fn(C):(t=R,R=e)):(t=R,R=e)}else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(rp)),R}())!==e&&(w=un(w)),(u=w)===e&&(u=t,(w=function(){var R,m,C,D;if(b++,R=t,34===o.charCodeAt(t)?(m=Qs,t++):(m=e,0===b&&B(Us)),m!==e){for(C=[],Gs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(qs)),D===e&&(D=Gt());D!==e;)C.push(D),Gs.test(o.charAt(t))?(D=o.charAt(t),t++):(D=e,0===b&&B(qs)),D===e&&(D=Gt());C!==e?(34===o.charCodeAt(t)?(D=Qs,t++):(D=e,0===b&&B(Us)),D!==e?R=m=fn(C):(t=R,R=e)):(t=R,R=e)}else t=R,R=e;return b--,R===e&&(m=e,0===b&&B(np)),R}())!==e&&(w=un(w)),u=w))),b--,u===e&&(w=e,0===b&&B(Sf)),u}function bt(){var u,w,R,m,C,D,T;return b++,u=t,(w=kn())!==e&&(w={token:"uri",prefix:null,suffix:null,value:w}),(u=w)===e&&(u=t,b++,R=t,b++,C=t,(D=wi())!==e&&(T=Pa())!==e?C=D=function(L,U){return[L,U]}(D,T):(t=C,C=e),b--,C===e&&(D=e,0===b&&B(Of)),(m=C)!==e&&(m=function(C){return{token:"uri",prefix:C[0],suffix:C[1],value:null}}(m)),(R=m)===e&&(R=t,(m=wi())!==e&&(m=function(C){return{token:"uri",prefix:C,suffix:"",value:null}}(m)),R=m),b--,R===e&&(m=e,0===b&&B(jf)),u=w=R),b--,u===e&&(w=e,0===b&&B(Tf)),u}function kn(){var u,w,R,m;if(b++,u=t,60===o.charCodeAt(t)?(w=Jn,t++):(w=e,0===b&&B(zn)),w!==e){for(R=[],js.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(Is));m!==e;)R.push(m),js.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(Is));R!==e?(62===o.charCodeAt(t)?(m=Xn,t++):(m=e,0===b&&B(Wn)),m!==e?u=w=R.join(""):(t=u,u=e)):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Rf)),u}function wi(){var u,w,R;return b++,u=t,(w=function(){var m,C,D,T;if(b++,m=t,(C=Da())!==e){for(D=[],(T=En())===e&&(46===o.charCodeAt(t)?(T=wt,t++):(T=e,0===b&&B(_t)));T!==e;)D.push(T),(T=En())===e&&(46===o.charCodeAt(t)?(T=wt,t++):(T=e,0===b&&B(_t)));D!==e?m=C=function(L,U){if("."==U[U.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return L+U.join("")}(C,D):(t=m,m=e)}else t=m,m=e;return b--,m===e&&(C=e,0===b&&B(eh)),m}())===e&&(w=null),w!==e?(58===o.charCodeAt(t)?(R=br,t++):(R=e,0===b&&B(xr)),R!==e?u=w:(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(Nf)),u}function pr(){var u,w,R,m;if(b++,t,w=[],ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt)),R!==e)for(;R!==e;)w.push(R),ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt));else w=e;return w!==e&&((m={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"}).value=qt(w),w=m),b--,(u=w)===e&&(w=e,0===b&&B(Gf)),u}function _i(){var u,w,R,m,C,D,T,L,U;if(b++,u=t,w=[],ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt)),R!==e)for(;R!==e;)w.push(R),ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt));else w=e;if(w!==e)if(46===o.charCodeAt(t)?(R=wt,t++):(R=e,0===b&&B(_t)),R!==e){for(m=[],ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));C!==e;)m.push(C),ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));m!==e?((D={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=qt([w,R,m]),u=w=D):(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e)if(u=t,46===o.charCodeAt(t)?(w=wt,t++):(w=e,0===b&&B(_t)),w!==e){if(R=[],ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m!==e)for(;m!==e;)R.push(m),ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt));else R=e;R!==e?(T=w,L=R,(U={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=qt([T,L]),u=w=U):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(qf)),u}function ki(){var u,w,R,m,C,D,T,L,U,W;if(b++,u=t,w=[],ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt)),R!==e)for(;R!==e;)w.push(R),ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt));else w=e;if(w!==e)if(46===o.charCodeAt(t)?(R=wt,t++):(R=e,0===b&&B(_t)),R!==e){for(m=[],ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));C!==e;)m.push(C),ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));m!==e&&(C=Ei())!==e?((D={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=qt([w,R,m,C]),u=w=D):(t=u,u=e)}else t=u,u=e;else t=u,u=e;if(u===e){if(u=t,46===o.charCodeAt(t)?(w=wt,t++):(w=e,0===b&&B(_t)),w!==e){if(R=[],ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m!==e)for(;m!==e;)R.push(m),ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt));else R=e;R!==e&&(m=Ei())!==e?(T=w,L=R,U=m,(W={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=qt([T,L,U]),u=w=W):(t=u,u=e)}else t=u,u=e;if(u===e){if(u=t,w=[],ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt)),R!==e)for(;R!==e;)w.push(R),ht.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(dt));else w=e;w!==e&&(R=Ei())!==e?(w=function(T,L){var U={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return U.value=qt([T,L]),U}(w,R),u=w):(t=u,u=e)}}return b--,u===e&&(w=e,0===b&&B(Hf)),u}function Ei(){var u,w,R,m,C;if(b++,u=t,Yf.test(o.charAt(t))?(w=o.charAt(t),t++):(w=e,0===b&&B(Zf)),w!==e)if(ep.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(tp)),R===e&&(R=null),R!==e){if(m=[],ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt)),C!==e)for(;C!==e;)m.push(C),ht.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(dt));else m=e;m!==e?u=w=qt([w,R,m]):(t=u,u=e)}else t=u,u=e;else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Kf)),u}function Gt(){var u,w,R;return b++,u=t,92===o.charCodeAt(t)?(w="\\",t++):(w=e,0===b&&B($s)),w!==e?(ap.test(o.charAt(t))?(R=o.charAt(t),t++):(R=e,0===b&&B(up)),R!==e?u=w=[w,R]:(t=u,u=e)):(t=u,u=e),b--,u===e&&(w=e,0===b&&B(sp)),u}function Pt(){var u,w,R,m;if(b++,u=t,40===o.charCodeAt(t)?(w=ge,t++):(w=e,0===b&&B(ce)),w!==e){for(R=[],m=I();m!==e;)R.push(m),m=I();R!==e?(41===o.charCodeAt(t)?(m=k,t++):(m=e,0===b&&B(Q)),m!==e?u=w={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(t=u,u=e)):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(lp)),u}function I(){var u;return b++,fp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(pp)),u===e&&(hp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(dp)),u===e&&(vp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(yp)),u===e&&(gp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(mp)),u===e&&(u=function(){var w,R,m,C;if(b++,w=t,35===o.charCodeAt(t)?(R="#",t++):(R=e,0===b&&B(Ks)),R!==e){for(m=[],Ys.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(Zs));C!==e;)m.push(C),Ys.test(o.charAt(t))?(C=o.charAt(t),t++):(C=e,0===b&&B(Zs));m!==e?w=R=[R,m]:(t=w,w=e)}else t=w,w=e;return b--,w===e&&(R=e,0===b&&B(bp)),w}())))),b--,u===e&&0===b&&B(cp),u}function Da(){var u;return b++,kp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Ep)),u===e&&(Ap.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Fp)),u===e&&(Cp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Sp)),u===e&&(Tp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(jp)),u===e&&(Ip.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Rp)),u===e&&(Np.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Op)),u===e&&(Dp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Lp)),u===e&&(Pp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Bp)),u===e&&(Mp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Qp)),u===e&&(Up.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Gp)),u===e&&(qp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Hp)),u===e&&(Vp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Jp)),u===e&&(zp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(Xp)),u===e&&(Wp.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B($p))))))))))))))),b--,u===e&&0===b&&B(_p),u}function Fr(){var u;return b++,(u=Da())===e&&(95===o.charCodeAt(t)?(u="_",t++):(u=e,0===b&&B(ea))),b--,u===e&&0===b&&B(Kp),u}function La(){var u,w,R,m;if(b++,u=t,(w=Fr())===e&&(ht.test(o.charAt(t))?(w=o.charAt(t),t++):(w=e,0===b&&B(dt))),w!==e){for(R=[],(m=Fr())===e&&(ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m===e&&(Zn.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ei)),m===e&&(ti.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ri)),m===e&&(ni.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ii))))));m!==e;)R.push(m),(m=Fr())===e&&(ht.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(dt)),m===e&&(Zn.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ei)),m===e&&(ti.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ri)),m===e&&(ni.test(o.charAt(t))?(m=o.charAt(t),t++):(m=e,0===b&&B(ii))))));R!==e?u=w+=R.join(""):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(Yp)),u}function En(){var u;return b++,(u=Fr())===e&&(45===o.charCodeAt(t)?(u=jt,t++):(u=e,0===b&&B(It)),u===e&&(ht.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(dt)),u===e&&(Zn.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ei)),u===e&&(ti.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ri)),u===e&&(ni.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ii))))))),b--,u===e&&0===b&&B(Zp),u}function Pa(){var u,w,R,m;if(b++,u=t,(w=Fr())===e&&(ht.test(o.charAt(t))?(w=o.charAt(t),t++):(w=e,0===b&&B(dt)),w===e&&(58===o.charCodeAt(t)?(w=br,t++):(w=e,0===b&&B(xr)),w===e&&(w=Ai()))),w!==e){for(R=[],(m=En())===e&&(46===o.charCodeAt(t)?(m=wt,t++):(m=e,0===b&&B(_t)),m===e&&(58===o.charCodeAt(t)?(m=br,t++):(m=e,0===b&&B(xr)),m===e&&(m=Ai())));m!==e;)R.push(m),(m=En())===e&&(46===o.charCodeAt(t)?(m=wt,t++):(m=e,0===b&&B(_t)),m===e&&(58===o.charCodeAt(t)?(m=br,t++):(m=e,0===b&&B(xr)),m===e&&(m=Ai())));R!==e?u=w+=(R||[]).join(""):(t=u,u=e)}else t=u,u=e;return b--,u===e&&(w=e,0===b&&B(th)),u}function Ai(){var u,w,R,m,C,D;return b++,b++,R=t,37===o.charCodeAt(t)?(m="%",t++):(m=e,0===b&&B(ta)),m!==e&&(C=Ba())!==e&&(D=Ba())!==e?R=m=[m,C,D]:(t=R,R=e),R!==e&&(R=R.join("")),b--,(w=R)===e&&(R=e,0===b&&B(nh)),(u=w)===e&&(u=function(){var w,R,m;return b++,w=t,92===o.charCodeAt(t)?(R="\\",t++):(R=e,0===b&&B($s)),R!==e?(95===o.charCodeAt(t)?(m="_",t++):(m=e,0===b&&B(ea)),m===e&&(126===o.charCodeAt(t)?(m="~",t++):(m=e,0===b&&B(fh)),m===e&&(46===o.charCodeAt(t)?(m=wt,t++):(m=e,0===b&&B(_t)),m===e&&(45===o.charCodeAt(t)?(m=jt,t++):(m=e,0===b&&B(It)),m===e&&(33===o.charCodeAt(t)?(m=Qn,t++):(m=e,0===b&&B(Un)),m===e&&(36===o.charCodeAt(t)?(m=Mf,t++):(m=e,0===b&&B(Ns)),m===e&&(38===o.charCodeAt(t)?(m="&",t++):(m=e,0===b&&B(ph)),m===e&&(39===o.charCodeAt(t)?(m=Kn,t++):(m=e,0===b&&B(Yn)),m===e&&(40===o.charCodeAt(t)?(m=ge,t++):(m=e,0===b&&B(ce)),m===e&&(41===o.charCodeAt(t)?(m=k,t++):(m=e,0===b&&B(Q)),m===e&&(42===o.charCodeAt(t)?(m=X,t++):(m=e,0===b&&B(se)),m===e&&(43===o.charCodeAt(t)?(m=Qt,t++):(m=e,0===b&&B(Ut)),m===e&&(44===o.charCodeAt(t)?(m=yt,t++):(m=e,0===b&&B(gt)),m===e&&(59===o.charCodeAt(t)?(m=Ot,t++):(m=e,0===b&&B(Dt)),m===e&&(58===o.charCodeAt(t)?(m=br,t++):(m=e,0===b&&B(xr)),m===e&&(61===o.charCodeAt(t)?(m=$r,t++):(m=e,0===b&&B(Kr)),m===e&&(47===o.charCodeAt(t)?(m=Vt,t++):(m=e,0===b&&B(Jt)),m===e&&(63===o.charCodeAt(t)?(m=Bn,t++):(m=e,0===b&&B(Mn)),m===e&&(35===o.charCodeAt(t)?(m=xp,t++):(m=e,0===b&&B(Ks)),m===e&&(64===o.charCodeAt(t)?(m=Uf,t++):(m=e,0===b&&B(Os)),m===e&&(37===o.charCodeAt(t)?(m=ih,t++):(m=e,0===b&&B(ta)))))))))))))))))))))),m!==e?w=R="\\"+m:(t=w,w=e)):(t=w,w=e),b--,w===e&&(R=e,0===b&&B(ch)),w}()),b--,u===e&&0===b&&B(rh),u}function Ba(){var u;return b++,ht.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(dt)),u===e&&(sh.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(ah)),u===e&&(uh.test(o.charAt(t))?(u=o.charAt(t),t++):(u=e,0===b&&B(lh)))),b--,u===e&&0===b&&B(oh),u}var qt=function(u){for(var w="",R=0;R<u.length;R++)"string"==typeof u[R]?w+=u[R]:w+=u[R].join("");return w},At=0,Ma={},dh=function(u,w){Ma[u]=w},vh=function(u){Ma.null=u},Qa=function(u){var w="";if(null==u)return null;for(var R=0;R<u.length;R++)w+=u[R];return w.toUpperCase()};if((d=n())!==e&&t===o.length)return d;throw d!==e&&t<o.length&&B({type:"end"}),function hh(u,w,R){return new M(M.buildMessage(u,w),u,w,R)}(oi,Rt<o.length?o.charAt(Rt):null,Rt<o.length?na(Rt,Rt+1):na(Rt,Rt))}}}()},{}],129:[function(q,K,ee){q("./btree").Tree;var M=q("./utils"),o=M,x=q("./lexicon").Lexicon;PersistentLexicon=function(d,e){var r=this;M.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=e||"rdfstorejs";var n=r.indexedDB.open(this.dbName+"_lexicon",1);n.onerror=function(s){d(null,new Error("Error opening IndexedDB: "+s.target.errorCode))},n.onsuccess=function(s){r.db=s.target.result,d(r)},n.onupgradeneeded=function(s){r.db=s.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(d,e,r){if(d!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(h){r(null,new Error(h.target.statusCode))};var s=n.objectStore("knownGraphs");s.get(e).onsuccess=function(h){h.target.result?r(!0):s.add({oid:d,uriToken:e}).onsuccess=function(a){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(d,e){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();n.onsuccess=function(s){var h=s.target.result;h?(!0===d?r.push(h.value.uriToken):r.push(h.value.oid),h.continue()):e(r)},n.onerror=function(s){e(null,new Error("Error retrieving data from the cursor: "+s.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(d,e){if(d===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"],"readwrite").objectStore("components"),n=r.index("value").get("_u:"+d);n.onsuccess=function(s){var h=s.target.result;if(h){h.counter++;var a=h.id,v=r.put(h);v.onsuccess=function(f){e(a)},v.onerror=function(f){e(null,new Error("Error updating the URI data"+f.target.errorCode))}}else{var l=r.add({value:"_u:"+d,counter:0,uri:!0});l.onsuccess=function(f){e(f.target.result)},l.onerror=function(f){e(null,new Error("Error inserting the URI data"+f.target.errorCode))}}},n.onerror=function(s){e(null,new Error("Error retrieving the URI data"+s.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(d,e){if(d===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+d);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.id):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving uri data "+n.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(d,e){if(d===this.defaultGraphUri)e(0);else{var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+d);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.cost):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving uri data "+n.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(d){var e=guid(),r=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});r.onsuccess=function(n){d(n.target.result)},r.onerror=function(n){d(null,new Error("Error inserting the URI data"+n.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(d,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(d,e){var r=this.db.transaction(["components"],"readwrite").objectStore("components"),n=r.index("value").get("_l:"+d);n.onsuccess=function(s){var h=s.target.result;if(h){h.counter++;var a=h.id,v=r.put(h);v.onsuccess=function(f){e(a)},v.onerror=function(f){e(null,new Error("Error updating the literal data"+f.target.errorCode))}}else{var l=r.add({value:"_l:"+d,counter:0,literal:!0});l.onsuccess=function(f){e(f.target.result)},l.onerror=function(f){e(null,new Error("Error inserting the literal data"+f.target.errorCode))}}},n.onerror=function(s){e(null,new Error("Error retrieving the literal data"+s.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(d,e){var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+d);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.id):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving literal data "+n.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(d,e){var r=that.db.transaction(["components"]).objectStore("components").index("components").get(d);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.cost):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving literal data "+n.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(d){return x.prototype.parseLiteral(d)},PersistentLexicon.prototype.parseUri=function(d){return x.prototype.parseUri(d)},PersistentLexicon.prototype.retrieve=function(d,e){var r,n=this;d===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((r=n.db.transaction(["components"]).objectStore("components").get(d)).onsuccess=function(s){if(null!=s.target.result)if(null!=s.target.result.label){var h="_:"+s.target.result.id;e({token:"blank",value:h})}else null!=s.target.result.uri?e(n.parseUri(s.target.result.value.slice(3,s.target.result.value.length))):null!=s.target.result.literal?e(n.parseLiteral(s.target.result.value.slice(3,s.target.result.value.length))):(console.log(s.target.result),e(null,new Error("Unknown type of component "+s.target.result)));else e(null,null)},r.onerror=function(s){e(null,new Error("Error searching in blanks data "+s.target.errorCode))})},PersistentLexicon.prototype.clear=function(d){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,r=function(){d?.()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=r,e.onerror=r},PersistentLexicon.prototype.unregister=function(d,e,r){var n=this;o.seq(function(s){n._unregisterTerm(d.subject.token,e.subject,s)},function(s){n._unregisterTerm(d.predicate.token,e.predicate,s)},function(s){n._unregisterTerm(d.object.token,e.object,s)},function(s){null!=d.graph?n._unregisterTerm(d.graph.token,e.graph,s):s()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(d,e,r){var n=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===d?e!=this.defaultGraphOid?n.objectStore("components").delete(e).onsuccess=void(n.objectStore("knownGraphs").delete(e).onsuccess=function(){r()}):r():n.objectStore("components").delete(e).onsuccess=function(){r()}},K.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(q,K,ee){var M=q("./utils");PersistentQuadBackend=function(o,x){var d=this;if(0!==arguments){for(var e in M.registerIndexedDB(d),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var n=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[n]=e}d.dbName=o.name||"rdfstorejs";var s=d.indexedDB.open(this.dbName+"_db",1);s.onerror=function(h){x(null,new Error("Error opening IndexedDB: "+h.target.errorCode))},s.onsuccess=function(h){d.db=h.target.result,x(d)},s.onupgradeneeded=function(h){var a=h.target.result.createObjectStore(d.dbName,{keyPath:"SPOG"});M.each(d.indices,function(v){"SPOG"!==v&&a.createIndex(v,v,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(o,x){var d=this;M.each(this.indices,function(r){o[r]=d._genMinIndexKey(o,r)});var e=d.db.transaction([d.dbName],"readwrite");e.oncomplete=function(r){},e.onerror=function(r){x(null,new Error(r.target.statusCode))},e.objectStore(d.dbName).add(o).onsuccess=function(r){x(!0)}},PersistentQuadBackend.prototype.range=function(o,x){var d=this,e=d.db.transaction([d.dbName]).objectStore(d.dbName),r=this._indexForPattern(o),n=this._genMinIndexKey(o,r),s=this._genMaxIndexKey(o,r),h=d.IDBKeyRange.bound(n,s,!1,!1),a=[];("SPOG"===r?e:e.index(r)).openCursor(h).onsuccess=function(v){var l=v.target.result;l?(a.push(l.value),l.continue()):x(a)}},PersistentQuadBackend.prototype.search=function(o,x){var d=this,e=d.db.transaction([d.dbName]).objectStore(d.dbName),r=this._genMinIndexKey(o,"SPOG"),n=e.get(r);n.onerror=function(s){x(null,new Error(s.target.statusCode))},n.onsuccess=function(s){x(null!=s.target.result)}},PersistentQuadBackend.prototype.delete=function(o,x){var d=this,e=d._genMinIndexKey(o,"SPOG"),r=d.db.transaction([d.dbName],"readwrite").objectStore(d.dbName).delete(e);r.onsuccess=function(){x(!0)},r.onerror=function(n){x(null,new Error(n.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(o,x){var d=this.componentOrders[x];return M.map(d,function(e){return"string"==typeof o[e]||null==o[e]?"0":o[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(o,x){for(var d=this.componentOrders[x],e=[],r=0;r<d.length;r++){var n=o[d[r]];e[r]="string"==typeof n?"z":n}return M.map(e,function(s){return""+s}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(o){var x=o.indexKey.sort().join("."),d=this.componentOrdersMap[x];if(null==d)throw new Error("Error, cannot find index for indexKey "+x);return d},PersistentQuadBackend.prototype.clear=function(o){var x,d=this;(x=d.db.transaction([d.dbName],"readwrite").objectStore(d.dbName).clear()).onsuccess=function(){o()},x.onerror=function(){o()}},K.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(q,K,ee){var M=q("./quad_index").QuadIndex,o=q("./utils");QuadBackend=function(x,d){this.indexMap={},this.treeOrder=x.treeOrder,this.indices=x.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;o.eachSeries(this.indices,function(r,n){new M({order:e.treeOrder,componentOrder:e.componentOrders[r]},function(s){e.indexMap[r]=s,n()})},function(){d(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(x){for(var d=x.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var r=QuadBackend.allIndices[e],n=QuadBackend.componentOrders[r],s=0;s<n.length&&!1!==o.include(d,n[s]);s++)if(s==d.length-1)return r;return"SPOG"},QuadBackend.prototype.index=function(x,d){var e=this;o.eachSeries(this.indices,function(r,n){e.indexMap[r].insert(x,function(){n()})},function(){d(!0)})},QuadBackend.prototype.range=function(x,d){var e=this._indexForPattern(x),r=this.indexMap[e];r?.range(x,function(n){d(n)})},QuadBackend.prototype.search=function(x,d){var e=this.indexMap.SPOG;e?.search(x,function(r){d(null!=r)})},QuadBackend.prototype.delete=function(x,d){var e=this;o.eachSeries(this.indices,function(r,n){e.indexMap[r].delete(x,function(){n()})},function(){d(!0)})},QuadBackend.prototype.clear=function(x){var d=this;o.eachSeries(this.indices,function(e,r){new M({order:d.treeOrder,componentOrder:d.componentOrders[e]},function(n){d.indexMap[e]=n,r()})},function(){x(!0)})},K.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(q,K,ee){var M=q("./btree").Tree,o=q("./utils"),x=q("./utils");NodeKey=function(d,e){this.subject=d.subject,this.predicate=d.predicate,this.object=d.object,this.graph=d.graph,this.order=e},NodeKey.prototype.comparator=function(d){for(var e=0;e<this.order.length;e++){var r=this.order[e];if(null==d[r])return 0;if(this[r]<d[r])return-1;if(this[r]>d[r])return 1}return 0},Pattern=function(d){this.subject=d.subject,this.predicate=d.predicate,this.object=d.object,this.graph=d.graph,this.indexKey=[],this.keyComponents={};var e=[],r=[],n=this;o.forEach(["subject","predicate","object","graph"],function(s){"string"==typeof n[s]?(r.push(s),n.keyComponents[s]=null):(e.push(s),n.keyComponents[s]=n[s],n.indexKey.push(s))}),this.order=e.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(d,e){0!=arguments&&(this.componentOrder=d.componentOrder,M.call(this,d.order,function(r){r.comparator=function(n,s){for(var h=0;h<r.componentOrder.length;h++){var a=r.componentOrder[h],v=n[a],l=s[a];if(v<l)return-1;if(v>l)return 1}return 0},r.rangeComparator=function(n,s){for(var h=0;h<r.componentOrder.length;h++){var a=r.componentOrder[h];if(null==s[a]||null==n[a])return 0;if(n[a]<s[a])return-1;if(n[a]>s[a])return 1}return 0},e(r)}))},QuadIndex.prototype=o.create(M.prototype,{constructor:M}),QuadIndex.prototype.insert=function(d,e){M.prototype.insert.call(this,d,null,function(r){e(r)})},QuadIndex.prototype.search=function(d,e){M.prototype.search.call(this,d,function(r){e(r)},!0)},QuadIndex.prototype.range=function(d,e){this._rangeTraverse(this,this.root,d,e)},QuadIndex.prototype._rangeTraverse=function(d,e,r,n){var s=r.key,h=[],a=[e];x.whilst(function(){return a.length>0},function(v){for(var l=a.shift(),f=0;f<l.numberActives&&-1===d.rangeComparator(l.keys[f].key,s);)f++;if(!0===l.isLeaf){for(var c=f;c<l.numberActives&&0===d.rangeComparator(l.keys[c].key,s);)h.push(l.keys[c].key),c++;v()}else d._diskRead(l.children[f],function(E){a.push(E);var _=f;x.whilst(function(){return _<l.numberActives&&0===d.rangeComparator(l.keys[_].key,s)},function(O){h.push(l.keys[_].key),_++,d._diskRead(l.children[_],function(N){a.push(N),O()})},function(){v()})})},function(){n(h)})},K.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(q,K,ee){var M=q("./abstract_query_tree").AbstractQueryTree,o=q("./abstract_query_tree").NonSupportedSparqlFeatureError,x=q("./utils"),d=q("./quad_index"),e=q("./query_plan").QueryPlan,r=q("./query_filters").QueryFilters,n=q("./rdf_model"),s=q("./rdf_loader").RDFLoader,h=q("./graph_callbacks").CallbacksBackend,a=q("./utils"),v=q("./utils");function l(f,c,E){this.name="BindExpressionError",this.bind=c,this.error=E,this.message=f}l.prototype=new Error,l.constructor=l,QueryEngine=function(f){0!=arguments.length&&(this.backend=f.backend,this.lexicon=f.lexicon,this.eventsOnBatchLoad=f.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new M,this.rdfLoader=new s(f.communication),this.callbacksBackend=new h(this),this.customFns=f.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(f){this.customFns=f},QueryEngine.prototype.registerNsInEnvironment=function(f,c){var E=[];null!=f&&null!=f.prefixes&&(E=f.prefixes);var _={};for(var O in this.defaultPrefixes)_[O]=this.defaultPrefixes[O];for(var N=0;N<E.length;N++){var A=E[N];"prefix"===A.token&&(_[A.prefix]=A.local)}c.namespaces=_,null!=f&&f.base&&"object"==typeof f.base?c.base=f.base.value:c.base=null},QueryEngine.prototype.applyModifier=function(f,c){if("DISTINCT"==f){for(var E={},_=[],O=0;O<c.length;O++){var N=c[O],A="";for(var y in N){var F=N[y];null==F?A=A+y+"null":"literal"==F.token?(null!=F.value&&(A+=F.value),null!=F.lang&&(A+=F.lang),null!=F.type&&(A+=F.type)):A=F.value?A+y+F.value:A+y+F}null==E[A]&&(_.push(N),E[A]=!0)}return _}return c},QueryEngine.prototype.applyLimitOffset=function(f,c,E){return null==c&&null==f?E:(null==f&&(f=0),c=null==c?E.length:f+c,E.slice(f,c))},QueryEngine.prototype.applySingleOrderBy=function(f,c,E,_,O){var N=[],A=this;a.eachSeries(f,function(y,F){r.collect(y.expression,[c],E,_,A,function(j){N.push(j[0].value),F()})},function(){O({binding:c,value:N})})},QueryEngine.prototype.applyOrderBy=function(f,c,E,_,O){var N=this,A=[];null!=f&&f.length>0?a.eachSeries(c,function(y,F){N.applySingleOrderBy(f,y,E,_,function(j){A.push(j),F()})},function(){A.sort(function(j,G){return N.compareFilteredBindings(j,G,f,_)});for(var y=[],F=0;F<A.length;F++)y.push(A[F].binding);O(y)}):O(c)},QueryEngine.prototype.compareFilteredBindings=function(f,c,E,_){for(var O=0;;){if(O==f.value.length)return 0;var N,A=E[O].direction;if(null!=f.value[O]||null!=c.value[O]){if(null==f.value[O])N={value:!1};else if(null==c.value[O])N={value:!0};else{if("blank"===f.value[O].token&&"blank"===c.value[O].token){O++;continue}if("blank"===f.value[O].token)N={value:!1};else if("blank"===c.value[O].token)N={value:!0};else if("uri"===f.value[O].token&&"uri"===c.value[O].token){if(1==r.runEqualityFunction(f.value[O],c.value[O],[],this,_).value){O++;continue}N=r.runTotalGtFunction(f.value[O],c.value[O],[])}else if("uri"===f.value[O].token)N={value:!1};else if("uri"===c.value[O].token)N={value:!0};else if("literal"===f.value[O].token&&"literal"===c.value[O].token&&null==f.value[O].type&&null==c.value[O].type){if(1==r.runEqualityFunction(f.value[O],c.value[O],[],this,_).value){O++;continue}N=r.runTotalGtFunction(f.value[O],c.value[O],[])}else if("literal"===f.value[O].token&&null==f.value[O].type)N={value:!1};else if("literal"===c.value[O].token&&null==c.value[O].type)N={value:!0};else{if(1==r.runEqualityFunction(f.value[O],c.value[O],[],this,_).value){O++;continue}N=r.runTotalGtFunction(f.value[O],c.value[O],[])}}return 1==N.value?"ASC"===A?1:-1:"ASC"===A?-1:1}O++}},QueryEngine.prototype.removeDefaultGraphBindings=function(f,c){for(var E=[],_={},O=0;O<c.named.length;O++)_[c.named[O].oid]=!0;for(O=0;O<c.implicit.length;O++)null==_[c.implicit[O].oid]&&E.push(c.implicit[O].oid);var N=[];for(O=0;O<f.length;O++){var A=f[O],y=!1;for(var F in A){for(var j=0;j<_.length;j++)if(A[F]===_[j]){y=!0;break}if(y)break}y||N.push(A)}return N},QueryEngine.prototype.aggregateBindings=function(f,c,E,_,O){this.copyDenormalizedBindings(c,_.outCache,function(N){for(var A={},y=0;y<f.length;y++){var F=r.runAggregator(f[y],N,this,E,_);f[y].alias?A[f[y].alias.value]=F:A[f[y].value.value]=F}O(A)})},QueryEngine.prototype.projectBindings=function(f,c,E){if("*"===f[0].kind)return c;for(var _=[],O=0;O<c.length;O++){for(var N=c[O],A={},y=!0,F=0;F<f.length;F++)if("variable"==f[F].token&&"aliased"!=f[F].kind)A[f[F].value.value]=N[f[F].value.value];else if("variable"==f[F].token&&"aliased"==f[F].kind){var j=r.runFilter(f[F].expression,N,this,E,{blanks:{},outCache:{}});if(r.isEbvError(j)){y=!1;break}A[f[F].alias.value]=j}!0===y&&_.push(A)}return _},QueryEngine.prototype.resolveNsInEnvironment=function(f,c){return c.namespaces[f]},QueryEngine.prototype.normalizeTerm=function(f,c,E,_){if("uri"===f.token){var O=x.lexicalFormBaseUri(f,c);null==O?_(null):E?this.lexicon.registerUri(O,_):this.lexicon.resolveUri(O,_)}else if("literal"===f.token){var N=x.lexicalFormLiteral(f,c);E?this.lexicon.registerLiteral(N,_):this.lexicon.resolveLiteral(N,_)}else if("blank"===f.token){var A=f.value,y=c.blanks[A];null!=y?_(y):E?this.lexicon.registerBlank(function(F){c.blanks[A]=F,_(F)}):this.lexicon.resolveBlank(function(F){c.blanks[A]=F,_(F)})}else"var"===f.token?_(f.value):_(null)},QueryEngine.prototype.normalizeDatasets=function(f,c,E){var _=this;a.eachSeries(f,function(O,N){O.value===_.lexicon.defaultGraphUri?(O.oid=_.lexicon.defaultGraphOid,N()):_.normalizeTerm(O,c,!1,function(A){null!=A&&(O.oid=A),N()})},function(){E(!0)})},QueryEngine.prototype.normalizeQuad=function(f,c,E,_){var O=null,N=null,A=null,y=null,F=this,j=!1;a.seq(function(G){if(null==f.graph||f.graph.value===F.lexicon.defaultGraphUri)y=0,G();else{var P=x.lexicalFormBaseUri(f.graph,c);F.normalizeTerm(f.graph,c,E,function(z){null!=z?(y=z,!0===E&&"var"!=f.graph.token?F.lexicon.registerGraph(z,P,function(){G()}):G()):(j=!0,G())})}},function(G){!1===j?F.normalizeTerm(f.subject,c,E,function(P){null!=P?(O=P,G()):(j=!0,G())}):G()},function(G){!1===j?F.normalizeTerm(f.predicate,c,E,function(P){null!=P?(N=P,G()):(j=!0,G())}):G()},function(G){!1===j?F.normalizeTerm(f.object,c,E,function(P){null!=P?(A=P,G()):(j=!0,G())}):G()})(function(){_(!0===j?null:{subject:O,predicate:N,object:A,graph:y})})},QueryEngine.prototype.denormalizeBindingsList=function(f,c,E){var _=this,O=[];a.eachSeries(f,function(N,A){_.denormalizeBindings(N,c,function(y){O.push(y),A()})},function(){E(O)})},QueryEngine.prototype.copyDenormalizedBindings=function(f,c,E){var _=this,O=[];a.eachSeries(f,function(N,A){var y={},F=v.keys(N);a.eachSeries(F,function(j,G){var P=N[j];if(null==P)y[j]=null,G();else if("object"==typeof P)y[j]=P,G();else{var z=c[P];null!=z?(y[j]=z,G()):_.lexicon.retrieve(P,function(Y){c[P]=Y,y[j]=Y,G()})}},function(){O.push(y),A()})},function(){E(O)})},QueryEngine.prototype.denormalizeBindings=function(f,c,E){var _=v.keys(f),O=c.outCache,N=this;a.eachSeries(_,function(A,y){var F=f[A];null==F?(f[A]=null,y()):"object"==typeof F?y():null!=O[F]?(f[A]=O[F],y()):N.lexicon.retrieve(F,function(j){f[A]=j,"blank"===j.token&&(c.blanks[j.value]=F),y()})},function(){E(f)})},QueryEngine.prototype.execute=function(f,c,E,_){f=x.normalizeUnicodeLiterals(f);var O=this.abstractQueryTree.parseQueryString(f);if(null==O)c(!1,"Error parsing query string");else if("query"===O.token&&"update"==O.kind){this.callbacksBackend.startGraphModification();var N=this;this.executeUpdate(O,function(A,y){N.lexicon.updateAfterWrite&&N.lexicon.updateAfterWrite(),A?(N.callbacksBackend.cancelGraphModification(),c(A,y)):N.callbacksBackend.endGraphModification(function(){c(A,y)})})}else"query"===O.token&&"query"==O.kind&&this.executeQuery(O,c,E,_)},QueryEngine.prototype.executeQuery=function(f,c,E,_){var O=f.prologue,N=f.units,A=this,y={blanks:{},outCache:{}};this.registerNsInEnvironment(O,y);var F=A.abstractQueryTree.parseExecutableUnit(N[0]);"select"===F.kind?this.executeSelect(F,y,E,_,function(j,G){null==j?"object"==typeof G&&!0===G.denorm?c(null,G.bindings):A.denormalizeBindingsList(G,y,function(P){c(null,P)}):c(j)}):"ask"===F.kind?(F.projection=[{token:"variable",kind:"*"}],this.executeSelect(F,y,E,_,function(j,G){null==j?G.length>0?c(null,!0):c(null,!1):c(j)})):"construct"===F.kind&&(F.projection=[{token:"variable",kind:"*"}],A=this,this.executeSelect(F,y,E,_,function(j,G){null==j?A.denormalizeBindingsList(G,y,function(P){if(null!=P){var z=new n.Graph;null==F.template&&(F.template={triplesContext:F.pattern});for(var Y=1,ie=[],ye=0;ye<P.length;ye++){for(var fe=P[ye],re=0;re<ie.length;re++)delete ie[re].valuetmp;for(re=0;re<F.template.triplesContext.length;re++){for(var V=["subject","predicate","object"],$=F.template.triplesContext[re],ne=0;ne<V.length;ne++){var he=V[ne];if("blank"===$[he].token&&(!$[he].valuetmp||null==$[he].valuetmp)){var xe="_:b"+Y;Y++,$[he].valuetmp=xe,ie.push($[he])}}var ge=n.buildRDFResource($.subject,fe,A,y),ce=(ne=n.buildRDFResource($.predicate,fe,A,y),n.buildRDFResource($.object,fe,A,y));if(null!=ge&&null!=ne&&null!=ce){var ke=new n.Triple(ge,ne,ce);z.add(ke)}}}c(null,z)}else c(new Error("Error denormalizing bindings."))}):c(j)}))},QueryEngine.prototype.executeSelect=function(f,c,E,_,O){if("select"===f.kind||"ask"===f.kind||"construct"===f.kind||"modify"===f.kind){var N=f.projection,A=f.dataset,y=f.modifier,F=f.limit,j=f.offset,G=f.order,P=this;null==E&&null==_||(A.implicit=E||[],A.named=_||[]),null!=A.implicit&&0===A.implicit.length&&null!=A.named&&0===A.named.length&&A.implicit.push(this.lexicon.defaultGraphUriTerm),P.normalizeDatasets(A.implicit.concat(A.named),c,function(){try{P.executeSelectUnit(N,A,f.pattern,c,function(z){if(null!=z){if(null!=f.group&&""===f.group){for(var Y=!1,ie=0;ie<f.projection.length;ie++)if(null!=f.projection[ie].expression&&"aggregate"===f.projection[ie].expression.expressionType){Y=!0;break}!0===Y&&(f.group="singleGroup")}f.group&&""!=f.group?P.checkGroupSemantics(f.group,N)?P.groupSolution(z,f.group,A,c,function(ye){var fe=[];a.eachSeries(ye,function(re,V){P.aggregateBindings(N,re,A,c,function($){fe.push($),V()})},function(){O(null,{bindings:fe,denorm:!0})})}):O(new Error("Incompatible Group and Projection variables")):P.applyOrderBy(G,z,A,c,function(ye){var fe=P.projectBindings(N,ye,A),re=P.applyModifier(y,fe),V=P.applyLimitOffset(j,F,re),$=P.removeDefaultGraphBindings(V,A);O(null,$)})}else O(new Error("Error executing SELECT query."))})}catch(z){O(z)}})}else O(new Error("Cannot execute "+f.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(f,c,E,_,O){var N=[],A=[],y=!1,F=this;"singleGroup"===c?O([f]):a.eachSeries(f,function(j,G){var P=!0;a.eachSeries(c,function(z,Y){var ie=null;if("var"===z.token)ie=z.value,0==y&&N.push(ie),Y();else if("aliased_expression"===z.token){if(ie=z.alias.value,0==y&&N.push(ie),"var"===z.expression.primaryexpression)j[z.alias.value]=j[z.expression.value.value];else{var ye=F.copyDenormalizedBindings([j],_.outCache),fe=r.runFilter(z.expression,ye[0],F,E,_);r.isEbvError(fe)?P=!1:(null!=fe.value&&(fe.value=""+fe.value),j[z.alias.value]=fe)}Y()}else F.copyDenormalizedBindings([j],_.outCache,function(re){var V=r.runFilter(z,re[0],F,_);r.isEbvError(V)?P=!1:(j["groupCondition"+env._i]=V,ie="groupCondition"+env._i,0==y&&N.push(ie)),Y()})},function(){0==y&&(y=!0),!0===P&&A.push(j),G()})},function(){for(var j={},G={},P=0;P<A.length;P++){for(var z=A[P],Y="",ie=0;ie<N.length;ie++){var ye=z[N[ie]];Y+="object"==typeof ye?ye.value:ye}null==j[Y]?(G[Y]=0,j[Y]=[z]):j[Y].push(z)}var fe=[];for(var re in j)fe.push(j[re]);O(fe)})},QueryEngine.prototype.executeSelectUnit=function(f,c,E,_,O){if("BGP"===E.kind)this.executeAndBGP(f,c,E,_,O);else if("UNION"===E.kind)this.executeUNION(f,c,E.value,_,O);else if("JOIN"===E.kind)this.executeJOIN(f,c,E,_,O);else if("LEFT_JOIN"===E.kind)this.executeLEFT_JOIN(f,c,E,_,O);else if("FILTER"===E.kind){var N=this;this.executeSelectUnit(f,c,E.value,_,function(A){null!=A?r.checkFilters(E,A,!1,c,_,N,O):O([])})}else{if("EMPTY_PATTERN"!==E.kind)throw new o(E.kind);O([])}},QueryEngine.prototype.executeUNION=function(f,c,E,_,O){var N,A,y=E[0],F=E[1],j=null;if(2!=E.length)throw"SPARQL algebra UNION with more than two components";var G=this;a.seq(function(P){try{G.executeSelectUnit(f,c,y,_,function(z){N=z,P()})}catch(z){j=z,P()}},function(P){if(null==j)try{G.executeSelectUnit(f,c,F,_,function(z){A=z,P()})}catch(z){j=z,P()}else P()})(function(){if(null!=j)O(j);else{var P=e.unionBindings(N,A);G.runBinds(E.binds,P,c,_,function(z,Y){if(null!=z)throw new l("Error processing bind expressions",E.binds,z);r.checkFilters(E,Y,!1,c,_,G,O)})}})},QueryEngine.prototype.executeAndBGP=function(f,c,E,_,O){var N=this;e.executeAndBGPsDPSize(E.value,c,this,_,function(A){null!=A?N.runBinds(E.binds,A,c,_,function(y,F){if(null!=y)throw new l("Error processing bind expressions",E.binds,y);r.checkFilters(E,F,!1,c,_,N,O)}):O(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(f,c,E,_,O){var N=E.lvalue,A=E.rvalue;if("EMPTY_PATTERN"===N.kind)this.executeSelectUnit(f,c,A,_,O);else{var y,F,j=null,G=null,P=null,z=this;a.seq(function(Y){try{z.executeSelectUnit(f,c,N,_,function(ie){j=ie,Y()})}catch(ie){P=ie,Y()}},function(Y){if(null!=P)Y();else try{z.executeSelectUnit(f,c,A,_,function(ie){G=ie,Y()})}catch(ie){P=ie,Y()}})(function(){if(null!=P)O(P);else{var Y=e.leftOuterJoinBindings(j,G);z.runBinds(E.binds,Y,c,_,function(ie,ye){if(null!=ie)throw new l("Error processing bind expressions",E.binds,ie);r.checkFilters(E,Y,!0,c,_,z,function(fe){if(j.length>1&&G.length>1){var re=[],V={};for(var $ in j[0])V[$]=!0;for($ in G[0])1!=V[$]&&re.push($);y=[],F={};for(var ne=0;ne<fe.length;ne++)if(!0===fe[ne].__nullify__){for(var he=0;he<re.length;he++)fe[ne].bindings[re[he]]=null;var xe=[],ge=[];for(var $ in fe[ne].bindings)null!=fe[ne].bindings[$]&&(xe.push($+fe[ne].bindings[$]),xe.sort(),ge.push(xe.join("")));if(null==F[xe.join("")]){for(he=0;he<ge.length;he++)F[ge[he]]=!0;y.push(fe[ne].bindings)}}else for(var $ in y.push(fe[ne]),xe=[],ge=[],fe[ne])xe.push($+fe[ne][$]),xe.sort(),F[xe.join("")]=!0;O(y)}else O(fe)})})}})}},QueryEngine.prototype.executeJOIN=function(f,c,E,_,O){var N=E.lvalue,A=E.rvalue,y=null,F=null,j=null,G=this;a.seq(function(P){try{G.executeSelectUnit(f,c,N,_,function(z){y=z,P()})}catch(z){j=z,P()}},function(P){if(null!=j)P();else try{G.executeSelectUnit(f,c,A,_,function(z){F=z,P()})}catch(z){j=z,P()}})(function(){var P=null;if(null!=j)O(j);else if(0===y.length||0===F.length)O([]);else{var z={},Y=[];for(var ie in y[0])z[ie]=!1;for(var ie in F[0])!1===z[ie]&&Y.push(ie);P=0==Y.length||G.abstractQueryTree.treeWithUnion(N)||G.abstractQueryTree.treeWithUnion(A)?e.joinBindings(y,F):e.joinBindings2(Y,y,F),G.runBinds(E.binds,P,c,_,function(ye,fe){if(null!=ye)throw new l("Error processing bind expressions",E.binds,ye);r.checkFilters(E,fe,!1,c,_,G,O)})}})},QueryEngine.prototype.rangeQuery=function(f,c,E){var _=this;_.normalizeQuad(f,c,!1,function(O){null!=O?_.backend.range(new d.Pattern(O),function(N){null==N||0==N.length?E([]):E(N)}):E(null)})},QueryEngine.prototype.executeUpdate=function(f,c){var E=f.prologue,_=f.units,O=this,N={blanks:{},outCache:{}};this.registerNsInEnvironment(E,N);for(var A=0;A<_.length;A++){var y=O.abstractQueryTree.parseExecutableUnit(_[A]);if("insertdata"===y.kind){var F=null;a.eachSeries(y.quads,function(G,P){null===F?O._executeQuadInsert(G,N,function(z){null!=z&&(F=z),P()}):P()},function(){null===F?c(null,!0):c(F)})}else if("deletedata"===y.kind)F=null,a.eachSeries(y.quads,function(G,P){null===F?O._executeQuadDelete(G,N,function(z){null!=z&&(F=z),P()}):P()},function(){null===F?c(null,!0):c(F)});else if("modify"===y.kind)this._executeModifyQuery(y,N,c);else if("create"===y.kind)c(!0);else if("load"===y.kind){var j={uri:x.lexicalFormBaseUri(y.sourceGraph,N)};null!=y.destinyGraph&&(j={uri:x.lexicalFormBaseUri(y.destinyGraph,N)}),O=this,this.rdfLoader.load(y.sourceGraph.value,j,function(G,P){G?c(new Error("error batch loading quads")):O.batchLoad(P,function(z){null!==z?c(null,z):c(new Error("Error batch loading quads"))})})}else if("drop"===y.kind)this._executeClearGraph(y.destinyGraph,N,c);else{if("clear"!==y.kind)throw new Error("not supported execution unit");this._executeClearGraph(y.destinyGraph,N,c)}}},QueryEngine.prototype.batchLoad=function(f,c){var E=0,_={},O=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),a.eachSeries(f,function(N,A){var y={};a.eachSeries(["subject","predicate","object","graph"],function(F,j){!function(G,P,z,Y){var ie;if(G[P].uri||"uri"===G[P].token){var ye=G[P].uri||G[P].value;O.lexicon.registerUri(ye,function(fe){var re=function(){null!=G[P].uri&&(G[P]={token:"uri",value:G[P].uri},delete G[P].uri),z[P]=fe,Y()};"graph"===P?O.lexicon.registerGraph(fe,ye,function(){re()}):re()})}else G[P].literal||"literal"===G[P].token?O.lexicon.registerLiteral(G[P].literal||G[P].value,function(fe){null!=G[P].literal&&(G[P]=O.lexicon.parseLiteral(G[P].literal),delete G[P].literal),z[P]=fe,Y()}):null==(ie=_[G[P].blank||G[P].value])?O.lexicon.registerBlank(function(fe){_[G[P].blank||G[P].value]=fe,null==G[P].token&&(G[P].token="blank",G[P].value=G[P].blank,delete G[P].blank),z[P]=fe,Y()}):(null==G[P].token&&(G[P].token="blank",G[P].value=G[P].blank,delete G[P].blank),z[P]=ie,Y())}(N,F,y,j)},function(){var F=N;N=y;var j=new d.NodeKey(N);O.backend.search(j,function(G){G?A():O.backend.index(j,function(P){P&&(O.eventsOnBatchLoad&&O.callbacksBackend.nextGraphModification(h.added,[F,N]),E+=1),A()})})})},function(){null!=O.lexicon.updateAfterWrite&&O.lexicon.updateAfterWrite();var N=function(){c(E)};O.eventsOnBatchLoad?O.callbacksBackend.endGraphModification(N()):N()})},QueryEngine.prototype._executeModifyQuery=function(f,c,E){var _=this,O=!0,N=new Error("Error executing modify query"),A=null,y=["subject","predicate","object","graph"];f.insert=null==f.insert?[]:f.insert,f.delete=null==f.delete?[]:f.delete,a.seq(function(F){var j=[],G=[];if(null!=f.with&&j.push(f.with),null!=f.using){G=[];for(var P=0;P<f.using.length;P++){var z=f.using[P];"named"===z.kind?G.push(z.uri):j.push(z.uri)}}f.dataset={},f.projection=[{token:"variable",kind:"*"}],_.executeSelect(f,c,j,G,function(Y,ie){if(Y)return N=Y,O=!1,F();_.denormalizeBindingsList(ie,c,function(ye){null!=ye?A=ye:(N=new Error("Error denormalizing bindings list"),O=!1),F()})})},function(F){var j=f.with;if(O){for(var G=[],P=0;P<f.delete.length;P++)for(var z=f.delete[P],Y=0;Y<A.length;Y++){for(var ie={},ye=A[Y],fe=0;fe<y.length;fe++){var re=y[fe];"graph"==re&&null==z[re]?ie.graph=j:"var"===z[re].token?ie[re]=ye[z[re].value]:ie[re]=z[re]}G.push(ie)}a.eachSeries(G,function(V,$){_._executeQuadDelete(V,c,function(){$()})},function(){F()})}else F()},function(F){var j=f.with;if(O){for(var G=[],P=0;P<f.insert.length;P++)for(var z=f.insert[P],Y=0;Y<A.length;Y++){for(var ie={},ye=A[Y],fe=0;fe<y.length;fe++){var re=y[fe];"graph"==re&&null==z[re]?ie.graph=j:"var"===z[re].token?ie[re]=ye[z[re].value]:ie[re]=z[re]}G.push(ie)}a.eachSeries(G,function(V,$){_._executeQuadInsert(V,c,function(){$()})},function(){F()})}else F()})(function(){E(O?null:N)})},QueryEngine.prototype._executeQuadInsert=function(f,c,E){var _,O=this,N=!1,A=null;a.seq(function(y){O.normalizeQuad(f,c,!0,function(F){null!=F?_=F:(N=!0,A="Error normalizing quad."),y()})},function(y){if(!1===N){var F=new d.NodeKey(_);O.backend.search(F,function(j){!0===j?y():O.backend.index(F,function(){O.callbacksBackend.nextGraphModification(h.added,[f,_]),y()})})}else y()})(function(){N?E(new Error(A)):E(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(f,c,E){var _,O,N,A=this,y=!1;a.seq(function(F){A.normalizeQuad(f,c,!0,function(j){null!=j?_=j:(y=!0,O="Error normalizing quad."),F()})},function(F){!1===y?(N=new d.NodeKey(_),A.backend.delete(N,function(){F()})):F()},function(F){!1===y?A.lexicon.unregister(f,N,function(){A.callbacksBackend.nextGraphModification(h.deleted,[f,_]),F()}):F()})(function(){y?E(new Error(O)):E(null,!0)})},QueryEngine.prototype._executeClearGraph=function(f,c,E){var _=this;if("default"===f)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",E);else if("named"===f)_.lexicon.registeredGraphs(!0,function(N){if(null!=N){var A=!1;a.eachSeries(N,function(y,F){A?F():_.execute("DELETE { GRAPH <"+y+"> { ?s ?p ?o } } WHERE { GRAPH <"+y+"> { ?s ?p ?o } }",function(j,G){j?(A=j,F()):_.lexicon.resolveUri(y,function(P){-1!=P?_.lexicon.knownGraphs.delete(P,function(){F()}):(A="Cannot find graph "+y+" to clear it",F())})})},function(){E(!A)})}else E(!1,"Error deleting named graphs")});else if("all"===f)_=this,this.execute("CLEAR DEFAULT",function(N,A){N?E(!1,A):_.execute("CLEAR NAMED",E)});else if("uri"==f.token){var O=x.lexicalFormBaseUri(f,c);null!=O?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+O+"> { ?s ?p ?o } } WHERE { GRAPH <"+O+"> { ?s ?p ?o } }",function(N){_.callbacksBackend.ongoingModification=!1,E(N)})):E(!1,"wrong graph URI")}else E(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(f,c){if("singleGroup"===f)return!0;for(var E={},_=0;_<f.length;_++){var O=f[_];"var"===O.token?E[O.value]=!0:"aliased_expression"===O.token&&(E[O.alias.value]=!0)}for(_=0;_<c.length;_++){var N=c[_];if("var"===N.kind){if(null==E[N.value.value])return!1}else if("aliased"===N.kind&&N.expression&&"var"===N.expression.primaryexpression&&null==E[N.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(f,c,E,_,O){var N=this,A=c;null!=f&&f.length>0?N.copyDenormalizedBindings(c,_.outCache,function(y){for(var F=0;F<c.length;F++)for(var j=0;j<f.length;j++){var G=f[j],P=y[F],z=r.runFilter(G.expression,P,N,E,_);r.isEbvError(z)?O(z):A[F][G.as.value]=z}O(null,c)}):O(null,c)},QueryEngine.prototype.computeCosts=function(f,c,E){for(var _=0;_<f.length;_++)f[_]._cost=this.quadCost(f[_],c);E(f)},QueryEngine.prototype.quadCost=function(f,c){return 1},QueryEngine.prototype.registerDefaultNamespace=function(f,c){this.defaultPrefixes[f]=c},K.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(q,K,ee){var M=q("./utils"),o=M,x=q("./utils");QueryFilters={};var d="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,r,n,s,h,a,v){var l=[];e.filter&&"function"!=typeof e.filter&&(l=e.filter);var f=[];if(null==l||0===l.length||null!=e.length)return v(r);QueryFilters.preprocessExistentialFilters(l,r,a,s,h,function(c){x.eachSeries(c,function(E,_){QueryFilters.run(E.value,r,n,s,h,a,function(O){for(var N=[],A=0;A<O.length;A++){var y=O[A];null!=y.__nullify__?f.push(y):N.push(y)}r=N,_()})},function(){v(r.concat(f))})})},QueryFilters.preprocessExistentialFilters=function(e,r,n,s,h,a){var v=[];x.eachSeries(e,function(l,f){if("builtincall"!==l.value.expressionType||"exists"!==l.value.builtincall&&"notexists"!==l.value.builtincall)if("conditionalor"===l.value.expressionType||"conditionaland"===l.value.expressionType){var c=o.map(l.value.operands,function(N){return{value:N}});QueryFilters.preprocessExistentialFilters(c,r,n,s,h,function(N){l.value.operands=N.map(function(A){return A.value}),v.push(l),f()})}else"multiplicativeexpression"===l.value.expressionType?(c=o.map(l.value.factors,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(c,r,n,s,h,function(N){l.value.factors=N.map(function(A){return A.value}),v.push(l),f()})):"additiveexpression"===l.value.expressionType?(c=o.map(l.value.summands,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(c,r,n,s,h,function(N){l.value.summands=N.map(function(A){return A.value}),v.push(l),f()})):"relationalexpression"===l.value.expressionType?(c=[{value:l.value.op1},{value:l.value.op2}],QueryFilters.preprocessExistentialFilters(c,r,n,s,h,function(N){l.value.op1=N[0].value,l.value.op2=N[1].value,v.push(l),f()})):"irireforfunction"!==l.value.expressionType&&"custom"!==l.value.expressionType||null==l.value.args?(v.push(l),f()):(c=o.map(l.value.args,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(c,r,n,s,h,function(N){l.value.args=N.map(function(A){return A.value}),v.push(l),f()}));else{var E=l.value.builtincall,_=l.value.args,O={};n.copyDenormalizedBindings(r,h.outCache,function(N){x.eachSeries(N,function(A,y){var F=o.clone(_[0],!0),j=n.abstractQueryTree.parseSelect({pattern:F},A);j=n.abstractQueryTree.bind(j.pattern,A),n.executeSelectUnit([{kind:"*"}],s,j,h,function(G){var P;P="exists"===E?QueryFilters.ebvBoolean(0!==G.length):QueryFilters.ebvBoolean(0===G.length);var z=[];for(var Y in A)z.push(JSON.stringify(A[Y]));z=z.sort().join(""),O[z]=P,y()})},function(){l.value.origArgs=l.value.args,l.value.args=O,v.push(l),f()})})}},function(){a(v)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var r=e.expressionType;if("relationalexpression"==r){var n=e.op1,s=e.op2;return QueryFilters.boundVars(n)+QueryFilters.boundVars(s)}if("conditionalor"==r||"conditionaland"==r){for(var h=[],a=0;a<e.operands;a++)h=h.concat(QueryFilters.boundVars(e.operands[a]));return h}if("builtincall"==r){if(null==e.args)return[];var v=[];for(a=0;a<e.args.length;a++)v=v.concat(QueryFilters.boundVars(e.args[a]));return v}if("multiplicativeexpression"==r){v=QueryFilters.boundVars(e.factor);for(a=0;a<e.factors.length;a++)v=v.concat(QueryFilters.boundVars(e.factors[a].expression));return v}if("additiveexpression"==r){for(v=QueryFilters.boundVars(e.summand),a=0;a<e.summands.length;a++)v=v.concat(QueryFilters.boundVars(e.summands[a].expression));return v}return"regex"==r?(v=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==r?QueryFilters.boundVars(e.expression):"atomic"==r?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,r,n,s,h,a,v){a.copyDenormalizedBindings(r,h.outCache,function(l){for(var f=[],c=0;c<r.length;c++){var E=l[c],_=QueryFilters.runFilter(e,E,a,s,h);if(_=QueryFilters.ebv(_),QueryFilters.isEbvError(_)){if(n){var O={__nullify__:!0,bindings:r[c]};f.push(O)}}else!0===_?f.push(r[c]):n&&(O={__nullify__:!0,bindings:r[c]},f.push(O))}v(f)})},QueryFilters.collect=function(e,r,n,s,h,a){h.copyDenormalizedBindings(r,s.outCache,function(v){for(var l=[],f=0;f<v.length;f++){var c=v[f],E=QueryFilters.runFilter(e,c,h,n,s);l.push({binding:r[f],value:E})}return a(l)})},QueryFilters.runDistinct=function(e,r){},QueryFilters.runAggregator=function(e,r,n,s,h){if(null==r||0===r.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return r[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return r[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var a=null,v=0;v<r.length;v++){var l=r[v],f=QueryFilters.runFilter(e.expression.expression,l,n,s,h);QueryFilters.isEbvError(f)||(null===a||!0===QueryFilters.runLtFunction(a,f).value)&&(a=f)}return null===a?QueryFilters.ebvError():a}if("min"===e.expression.aggregateType){var c=null;for(v=0;v<r.length;v++)l=r[v],f=QueryFilters.runFilter(e.expression.expression,l,n,s,h),QueryFilters.isEbvError(f)||(null===c||!0===QueryFilters.runGtFunction(c,f).value)&&(c=f);return null===c?QueryFilters.ebvError():c}if("count"===e.expression.aggregateType){var E={},_=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(v=0;v<r.length;v++)l=r[v],null==E[A=M.hashTerm(l)]&&(E[A]=!0,_++);else _=r.length;else for(v=0;v<r.length;v++)l=r[v],f=QueryFilters.runFilter(e.expression.expression,l,n,s,h),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=M.hashTerm(f)]&&(E[A]=!0,_++):_++);return{token:"literal",type:d+"integer",value:""+_}}if("avg"===e.expression.aggregateType){E={};var O={token:"literal",type:d+"integer",value:"0"};for(_=0,v=0;v<r.length;v++)l=r[v],f=QueryFilters.runFilter(e.expression.expression,l,n,s,h),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=M.hashTerm(f)]&&(E[A]=!0,QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f),_++)):QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f),_++));var N=QueryFilters.runDivFunction(O,{token:"literal",type:d+"integer",value:""+_});return N.value=""+N.value,N}if("sum"===e.expression.aggregateType){for(E={},O={token:"literal",type:d+"integer",value:"0"},v=0;v<r.length;v++){var A;l=r[v],f=QueryFilters.runFilter(e.expression.expression,l,n,s,h),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=M.hashTerm(f)]&&(E[A]=!0,QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f))):QueryFilters.isNumeric(f)&&(O=QueryFilters.runSumFunction(O,f)))}return O.value=""+O.value,O}return QueryFilters.runFilter(aggregate.expression,r[0],s,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,r,n,s,h){if(null!=e.expressionType){var a=e.expressionType;if("relationalexpression"==a){var v=QueryFilters.runFilter(e.op1,r,n,s,h),l=QueryFilters.runFilter(e.op2,r,n,s,h);return QueryFilters.runRelationalFilter(e,v,l,r,n,s,h)}if("conditionalor"==a)return QueryFilters.runOrFunction(e,r,n,s,h);if("conditionaland"==a)return QueryFilters.runAndFunction(e,r,n,s,h);if("additiveexpression"==a)return QueryFilters.runAddition(e.summand,e.summands,r,n,s,h);if("builtincall"==a)return QueryFilters.runBuiltInCall(e.builtincall,e.args,r,n,s,h);if("multiplicativeexpression"==a)return QueryFilters.runMultiplication(e.factor,e.factors,r,n,s,h);if("unaryexpression"==a)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,r,n,s,h);if("irireforfunction"==a)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,r,n,s,h);if("regex"==a)return QueryFilters.runRegex(e.text,e.pattern,e.flags,r,n,s,h);if("custom"==a)return QueryFilters.runBuiltInCall(e.name,e.args,r,n,s,h);if("atomic"==a)return"var"==e.primaryexpression?r[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=M.lexicalFormBaseUri(e.value.type,h)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,r,n,s){return"literal"===e.token&&"literal"===r.token?e.lang==r.lang&&e.type==r.type&&e.value==r.value||(null!=e.type&&null!=r.type||QueryFilters.isSimpleLiteral(e)&&null!=r.type||!(!QueryFilters.isSimpleLiteral(r)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===r.token?M.lexicalFormBaseUri(e,s)==M.lexicalFormBaseUri(r,s):"blank"===e.token&&"blank"===r.token&&e.value==r.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==d+"integer"||e.type==d+"decimal"||e.type==d+"double"||e.type==d+"nonPositiveInteger"||e.type==d+"negativeInteger"||e.type==d+"long"||e.type==d+"int"||e.type==d+"short"||e.type==d+"byte"||e.type==d+"nonNegativeInteger"||e.type==d+"unsignedLong"||e.type==d+"unsignedInt"||e.type==d+"unsignedShort"||e.type==d+"unsignedByte"||e.type==d+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==d+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==d+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==d+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==d+"integer"||e.type==d+"decimal"||e.type==d+"float"||e.type==d+"double"||e.type==d+"nonPositiveInteger"||e.type==d+"negativeInteger"||e.type==d+"long"||e.type==d+"int"||e.type==d+"short"||e.type==d+"byte"||e.type==d+"nonNegativeInteger"||e.type==d+"unsignedLong"||e.type==d+"unsignedInt"||e.type==d+"unsignedShort"||e.type==d+"unsignedByte"||e.type==d+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,r){return!(!r||"literal"!=r.token)&&r.type==d+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==d+"integer"||e.type==d+"decimal"||e.type==d+"double"||e.type==d+"nonPositiveInteger"||e.type==d+"negativeInteger"||e.type==d+"long"||e.type==d+"int"||e.type==d+"short"||e.type==d+"byte"||e.type==d+"nonNegativeInteger"||e.type==d+"unsignedLong"||e.type==d+"unsignedInt"||e.type==d+"unsignedShort"||e.type==d+"unsignedByte"||e.type==d+"positiveInteger"){var r=parseFloat(e.value);return!isNaN(r)&&0!=parseFloat(e.value)}return e.type===d+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===d+"string"?""!=e.value:e.type===d+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:d+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:d+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,r,n,s,h,a,v){var l=e.operator;if("="===l)return QueryFilters.runEqualityFunction(r,n,s,h,a,v);if("!="===l){var f=QueryFilters.runEqualityFunction(r,n,s,h,a,v);return QueryFilters.isEbvError(f)||(f.value=!f.value),f}if("<"===l)return QueryFilters.runLtFunction(r,n,s);if(">"===l)return QueryFilters.runGtFunction(r,n,s);if("<="===l)return QueryFilters.runLtEqFunction(r,n,s);if(">="===l)return QueryFilters.runGtEqFunction(r,n,s);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==d+"integer")return parseInt(e.value);if(e.type==d+"decimal"||e.type==d+"float"||e.type==d+"double"||e.type==d+"nonPositiveInteger")return parseFloat(e.value);if(e.type==d+"negativeInteger"||e.type==d+"long"||e.type==d+"int"||e.type==d+"short"||e.type==d+"byte"||e.type==d+"nonNegativeInteger"||e.type==d+"unsignedLong"||e.type==d+"unsignedInt"||e.type==d+"unsignedShort"||e.type==d+"unsignedByte"||e.type==d+"positiveInteger")return parseInt(e.value);if(e.type!=d+"date"&&e.type!=d+"dateTime")return e.type==d+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==d+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return M.parseISO8601(e.value)}catch{return null}},QueryFilters.runOrFunction=function(e,r,n,s,h){for(var a=null,v=0;v<e.operands.length;v++){var l=QueryFilters.runFilter(e.operands[v],r,n,s,h);0==QueryFilters.isEbvError(l)&&(l=QueryFilters.ebv(l)),null==a?a=l:QueryFilters.isEbvError(l)?a=QueryFilters.isEbvError(a)?QueryFilters.ebvError():!0===a||QueryFilters.ebvError():!0===l?a=!0:QueryFilters.isEbvError(a)&&(a=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(a)},QueryFilters.runAndFunction=function(e,r,n,s,h){for(var a=null,v=0;v<e.operands.length;v++){var l=QueryFilters.runFilter(e.operands[v],r,n,s,h);0==QueryFilters.isEbvError(l)&&(l=QueryFilters.ebv(l)),null==a?a=l:QueryFilters.isEbvError(l)?a=(QueryFilters.isEbvError(a)||!0===a)&&QueryFilters.ebvError():!0===l?QueryFilters.isEbvError(a)&&(a=QueryFilters.ebvError()):a=!1}return QueryFilters.ebvBoolean(a)},QueryFilters.runEqualityFunction=function(e,r,n,s,h,a){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)){var v=QueryFilters.effectiveTypeValue(e),l=QueryFilters.effectiveTypeValue(r);return isNaN(v)||isNaN(l)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,s,a)):QueryFilters.ebvBoolean(v==l)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",r))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var f=M.compareDateComponents(e.value,r.value);return null!=f?0==f?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(r)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,s,a)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?1==s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,r){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",r)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",r)?QueryFilters.runGtFunction(e,r,[]):e.token&&"uri"===e.token&&r.token&&"uri"===r.token?QueryFilters.ebvBoolean(e.value>r.value):e.token&&"literal"===e.token&&r.token&&"literal"===r.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+r.value+r.type+r.lang):e.token&&"blank"===e.token&&r.token&&"blank"===r.token||e.value&&r.value?QueryFilters.ebvBoolean(e.value>r.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?-1==s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?-1!=s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=M.compareDateComponents(e.value,r.value);return null!=s?1!=s?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,r,n,s,h,a){var v=QueryFilters.runFilter(e,n,s,h,a);if(QueryFilters.isEbvError(v))return QueryFilters.ebvError();var l=v;if(QueryFilters.isNumeric(v)){for(var f=0;f<r.length;f++){var c=QueryFilters.runFilter(r[f].expression,n,s,h,a);if(!QueryFilters.isNumeric(c))return QueryFilters.ebvFalse();"+"===r[f].operator?l=QueryFilters.runSumFunction(l,c):"-"===r[f].operator&&(l=QueryFilters.runSubFunction(l,c))}return l}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:d+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:d+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:d+"decimal",value:n}:{token:"literal",type:d+"integer",value:n}},QueryFilters.runSubFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:d+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:d+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:d+"decimal",value:n}:{token:"literal",type:d+"integer",value:n}},QueryFilters.runMultiplication=function(e,r,n,s,h,a){var v=QueryFilters.runFilter(e,n,s,h,a);if(QueryFilters.isEbvError(v))return v;var l=v;if(QueryFilters.isNumeric(v)){for(var f=0;f<r.length;f++){var c=QueryFilters.runFilter(r[f].expression,n,s,h,a);if(QueryFilters.isEbvError(c))return v;if(!QueryFilters.isNumeric(c))return QueryFilters.ebvFalse();"*"===r[f].operator?l=QueryFilters.runMulFunction(l,c):"/"===r[f].operator&&(l=QueryFilters.runDivFunction(l,c))}return l}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:d+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:d+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:d+"decimal",value:n}:{token:"literal",type:d+"integer",value:n}},QueryFilters.runDivFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:d+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:d+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:d+"decimal",value:n}:{token:"literal",type:d+"integer",value:n}},QueryFilters.runBuiltInCall=function(e,r,n,s,h,a){if("notexists"===e||"exists"===e){var v=[];for(var l in n)v.push(JSON.stringify(n[l]));return r[v=v.sort().join("")]}for(var f=[],c=0;c<r.length;c++)if("var"===r[c].token)f.push(r[c]);else{var E=QueryFilters.runFilter(r[c],n,s,h,a);if(QueryFilters.isEbvError(E))return E;f.push(E)}if("str"===e)return"literal"===f[0].token?{token:"literal",type:null,value:""+f[0].value}:"uri"===f[0].token?{token:"literal",type:null,value:f[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===f[0].token?null!=f[0].lang?{token:"literal",value:""+f[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===f[0].token){var _=f[0];return null!=_.type?"string"==typeof _.type?{token:"uri",value:_.type,prefix:null,suffix:null}:_.type:null==_.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var O=f[0],N=f[1],A=QueryFilters.RDFTermEquality(O,N,s,a);return QueryFilters.isEbvError(A)&&(A=!1),QueryFilters.ebvBoolean(A)}if("langmatches"===e){var y=f[0],F=f[1];return"literal"===y.token&&"literal"===F.token?"*"===F.value&&""!=y.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===y.value.toLowerCase().indexOf(F.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var j=f[0].value;return null==j?QueryFilters.ebvError():null!=n[j]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=s.customFns[e])return s.customFns[e](QueryFilters,f);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,r,n,s,h,a){var v=QueryFilters.runFilter(r,n,s,h,a);if(QueryFilters.isEbvError(v))return v;if("!"===e){var l=QueryFilters.ebv(v);return QueryFilters.isEbvError(l)?QueryFilters.ebvFalse():(l=!l,QueryFilters.ebvBoolean(l))}if("+"===e)return QueryFilters.isNumeric(v)?v:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(v)){var f={};for(var c in v)f[c]=v[c];return f.value=-f.value,f}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,r,n,s,h,a,v){if(null==e||(e=QueryFilters.runFilter(e,s,h,a,v),null==r)||(r=QueryFilters.runFilter(r,s,h,a,v),null!=n&&(n=QueryFilters.runFilter(n,s,h,a,v)),null==r||"literal"!==r.token||null!=n&&"literal"!==n.token))return QueryFilters.ebvError();if(r=r.value,n=null==n?null:n.value,null!=e&&"var"==e.token){if(null==s[e.value])return QueryFilters.ebvError();e=s[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==n?new RegExp(r):new RegExp(r,n.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,r,n){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=M.lexicalFormBaseUri(e.value.type,n)),e},QueryFilters.runIriRefOrFunction=function(e,r,n,s,h,a){if(null==r)return e;for(var v=[],l=0;l<r.length;l++)v.push(QueryFilters.runFilter(r[l],n,s,h,a));var f=M.lexicalFormBaseUri(e,a);if(f==d+"integer"||f==d+"decimal"||f==d+"double"||f==d+"nonPositiveInteger"||f==d+"negativeInteger"||f==d+"long"||f==d+"int"||f==d+"short"||f==d+"byte"||f==d+"nonNegativeInteger"||f==d+"unsignedLong"||f==d+"unsignedInt"||f==d+"unsignedShort"||f==d+"unsignedByte"||f==d+"positiveInteger"){if("literal"!==(c=v[0]).token)return QueryFilters.ebvError();if((c=QueryFilters.normalizeLiteralDatatype(c,s,a)).type==d+"integer"||c.type==d+"decimal"||c.type==d+"double"||c.type==d+"nonPositiveInteger"||c.type==d+"negativeInteger"||c.type==d+"long"||c.type==d+"int"||c.type==d+"short"||c.type==d+"byte"||c.type==d+"nonNegativeInteger"||c.type==d+"unsignedLong"||c.type==d+"unsignedInt"||c.type==d+"unsignedShort"||c.type==d+"unsignedByte"||c.type==d+"positiveInteger")return c.type=f,c;if("http://www.w3.org/2001/XMLSchema#boolean"==c.type)return 1==QueryFilters.ebv(c)?(c.type=f,c.value=1):(c.type=f,c.value=0),c;if("http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type)return c.type=f,c.value=parseInt(c.value),c;if("http://www.w3.org/2001/XMLSchema#string"!=c.type&&null!=c.type||c.value.split(".").length>2||c.value.split("-").length>2||c.value.split("/").length>2||c.value.split("+").length>2||f==d+"decimal"&&(-1!=c.value.indexOf("e")||-1!=c.value.indexOf("E"))||!(f!=d+"int"&&f!=d+"integer"||-1==c.value.indexOf("e")&&-1==c.value.indexOf("E")&&-1==c.value.indexOf(".")))return QueryFilters.ebvError();try{return c.value=parseInt(parseFloat(c.value)),isNaN(c.value)?QueryFilters.ebvError():(c.type=f,c)}catch{return QueryFilters.ebvError()}}else{if(f==d+"boolean")return"literal"===(c=v[0]).token&&null==c.type?"true"===c.value||"1"===c.value?QueryFilters.ebvTrue():"false"===c.value||"0"===c.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===c.token?QueryFilters.isEbvError(c)?c:QueryFilters.ebvBoolean(c):QueryFilters.ebvError();if(f==d+"string")return"literal"===(c=v[0]).token?(c=QueryFilters.normalizeLiteralDatatype(c,s,a)).type==d+"integer"||c.type==d+"decimal"||c.type==d+"double"||c.type==d+"nonPositiveInteger"||c.type==d+"negativeInteger"||c.type==d+"long"||c.type==d+"int"||c.type==d+"short"||c.type==d+"byte"||c.type==d+"nonNegativeInteger"||c.type==d+"unsignedLong"||c.type==d+"unsignedInt"||c.type==d+"unsignedShort"||c.type==d+"unsignedByte"||c.type==d+"positiveInteger"||c.type==d+"float"?(c.type=f,c.value=""+c.value,c):c.type==d+"string"?c:c.type==d+"boolean"?(QueryFilters.ebv(c)?(c.type=f,c.value="true"):(c.type=f,c.value="false"),c):c.type==d+"dateTime"||c.type==d+"date"?(c.type=f,"string"!=typeof c.value&&(c.value=M.iso8601(c.value)),c):null==c.type?(c.value=""+c.value,c.type=f,c):QueryFilters.ebvError():"uri"===c.token?{token:"literal",value:M.lexicalFormBaseUri(c,a),type:f,lang:null}:QueryFilters.ebvError();if(f==d+"dateTime"||f==d+"date"){if((c=v[0]).type==d+"dateTime"||c.type==d+"date")return c;if(c.type!=d+"string"&&null!=c.type)return QueryFilters.ebvError();try{return c.value=M.iso8601(M.parseISO8601(c.value)),c.type=f,c}catch{return QueryFilters.ebvError()}}else{if(f!=d+"float")return null!=s.customFns[f]?s.customFns[f](QueryFilters,v):QueryFilters.ebvError();var c;if("literal"!==(c=v[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(c=QueryFilters.normalizeLiteralDatatype(c,s,a)).type||"http://www.w3.org/2001/XMLSchema#int"==c.type)return c.type=f,c.value=parseFloat(c.value),c;if("http://www.w3.org/2001/XMLSchema#boolean"==c.type)return 1==QueryFilters.ebv(c)?(c.type=f,c.value=1):(c.type=f,c.value=0),c;if("http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type)return c.type=f,c.value=parseFloat(c.value),c;if("http://www.w3.org/2001/XMLSchema#string"==c.type)try{return c.value=parseFloat(c.value),isNaN(c.value)?QueryFilters.ebvError():(c.type=f,c)}catch{return QueryFilters.ebvError()}else{if(null!=c.type||c.value.split(".").length>2||c.value.split("-").length>2||c.value.split("/").length>2||c.value.split("+").length>2)return QueryFilters.ebvError();try{return c.value=parseFloat(c.value),isNaN(c.value)?QueryFilters.ebvError():(c.type=f,c)}catch{return QueryFilters.ebvError()}}}}},K.exports={QueryFilters}},{"./utils":140}],135:[function(q,K,ee){var M=q("./utils"),o=q("./utils"),x={variablesInBGP:function(d){var e=d.variables;if(e)return e;var r=d.value||d;for(var n in e=[],r)r[n]&&"var"===r[n].token?e.push(r[n].value):r[n]&&"blank"===r[n].token&&e.push("blank:"+r[n].value);return d.variables=e,e},connected:function(d,e){for(var r="/"+d.vars.join("/")+"/",n=0;n<e.vars.length;n++)if(-1!=r.indexOf("/"+e.vars[n]+"/"))return!0;return!1},variablesIntersectionBGP:function(d,e){return function(r,n){for(var s={},h=0;h<r.lenght;h++)s[r[h]]=1;for(h=0;h<n.length;h++){var a=s[n[h]]||0;a++,s[n[h]]=a}var v=[];for(var l in s)2==s[l]&&v.push(s[l]);return v}(x.variablesInBGP(d),x.variablesInBGP(e))},executeAndBGPsGroups:function(d){for(var e={},r={},n=0,s=function(O,N){for(var A=0;A<O.length;A++){var y="/"+O[A]+"/";if(-1!=N.indexOf(y))return!0}return!1},h=function(O,N,A,y){var F=[],j="",G="";for(var P in N)j+=P,F=F.concat(e[P]),G+=r[P];G=G+c.join("/")+"/",F.push(O),A[j]=F,y[j]=G},a=0;a<d.length;a++){var v=d[a],l={},f={},c=x.variablesInBGP(v),E={};for(var _ in r)s(c,r[_])?E[_]=!0:(l[_]=e[_],f[_]=r[_]);0===M.size(E)?(l["g"+n]=[v],f["g"+n]="/"+c.join("/")+"/",n++):h(v,E,l,f),e=l,r=f}return M.values(e)},intersectionSize:function(d,e){for(var r=e.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=d.i.indexOf("_"+r[n]+"_"))return 1;return 0},createJoinTree:function(d,e){for(var r="/"+d.vars.join("/")+"/",n=d.vars.concat([]),s=[],h=0;h<e.vars.length;h++)-1!=r.indexOf("/"+e.vars[h]+"/")?0==e.vars[h].indexOf("_:")?s.push("blank:"+e.vars[h]):s.push(e.vars[h]):n.push(e.vars[h]);var a=e.i.split("_"),v=d.i.split("_"),l={};for(h=0;h<a.length;h++)""!=a[h]&&(l[a[h]]=!0);for(h=0;h<v.length;h++)""!=v[h]&&(l[v[h]]=!0);var f=M.keys(l);return{left:d,right:e,cost:d.cost+e.cost,i:"_"+f.sort().join("_")+"_",vars:n,join:s}},executeBushyTree:function(d,e,r,n,s){null==d.left?x.executeEmptyJoinBGP(d.right,e,r,n,s):null==d.right?x.executeEmptyJoinBGP(d.left,e,r,n,s):x.executeBushyTree(d.left,e,r,n,function(h){null!=h?x.executeBushyTree(d.right,e,r,n,function(a){s(null!=a?x.joinBindings2(d.join,h,a):null)}):s(null)})},executeAndBGPsDPSize:function(d,e,r,n,s){var h=x.executeAndBGPsGroups(d),a=[];o.eachSeries(h,function(v,l){r.computeCosts(v,n,function(f){var c={},E={},_={},O=1,N=null,A={};_[1]=[];for(var y=0;y<f.length;y++){var F=[];for(var j in delete f[y].variables,f[y])"_cost"!=j&&("var"===f[y][j].token||"blank"===f[y][j].token)&&F.push(f[y][j].value);E["_"+y+"_"]={left:f[y],right:null,cost:f[y]._cost,i:"_"+y+"_",vars:F};var G={left:f[y],right:null,cost:f[y]._cost,i:"_"+y+"_",vars:F};c["_"+y+"_"]=G,delete f[y]._cost,A["_"+y+"_"]=!0,_[1].push("_"+y+"_"),(null==N||N.cost>G.cost)&&(N=G)}for(var P=2;P<=f.length;P++)for(var z=1;z<P;z++){var Y=P-z,ie=_[""+z]||[],ye=_[""+Y]||[];for(y=0;y<ie.length;y++)for(var fe=0;fe<ye.length;fe++)if(ie[y]!==ye[fe]){var re=E[ie[y]],V=E[ye[fe]];if(0==x.intersectionSize(re,V)&&x.connected(re,V)){O=P;var $=c[re.i],ne=c[V.i],he=x.createJoinTree($,ne);if(!A[he.i]){A[he.i]=!0;var xe=he.cost+1;null!=c[he.i]&&(xe=c[he.i].cost);var ge=_[P]||[];ge.push(he.i),E[he.i]=he,_[P]=ge,xe>he.cost&&(O===P&&(N=he),c[he.i]=he)}}}}a.push(N),l()})},function(){var v=null;o.eachSeries(a,function(l,f){x.executeBushyTree(l,e,r,n,function(c){c?null==v?(v=c,f()):(v=x.crossProductBindings(v,c),f()):f("Error executing bushy tree")})},function(l){l?s(null,l):s(v)})})},executeEmptyJoinBGP:function(d,e,r,n,s){return x.executeBGPDatasets(d,e,r,n,s)},executeBGPDatasets:function(d,e,r,n,s){var h={};if(null==d.graph){var a=[];o.eachSeries(e.implicit,function(l,f){null==h[l.oid]?(h[l.oid]=!0,d.graph=l,r.rangeQuery(d,n,function(c){c=x.buildBindingsFromRange(c,d),a.push(c),f()})):f()},function(){var l=x.unionManyBindings(a);s(l)})}else if("var"===d.graph.token){var v=d.graph.value;a=[],o.eachSeries(e.named,function(l,f){null==h[l.oid]?(h[l.oid]=!0,d.graph=l,null!=a?r.rangeQuery(d,n,function(c){if(null!=c){c=x.buildBindingsFromRange(c,d);for(var E=0;E<c.length;E++)c[E][v]=l.oid;a.push(c)}else a=null;f()}):f()):f()},function(){if(null==a)s(null);else{var l=x.unionManyBindings(a);s(l)}})}else r.rangeQuery(d,n,function(l){null!=l?(l=x.buildBindingsFromRange(l,d),s(l)):s(null)})},buildBindingsFromRange:function(d,e){x.variablesInBGP(e);var r=e.value||e,n={};for(f in r)r[f]&&"var"===r[f].token?n[f]=r[f].value:r[f]&&"blank"===r[f].token&&(n[f]="blank:"+r[f].value);var s=[];if(null!=d)for(var h=0;h<d.length;h++){var a={},v=d[h],l=!1;for(var f in n){var c=v[f];if(null!=a[n[f]]&&a[n[f]]!==c){l=!0;break}a[n[f]]=c}l||s.push(a)}return s},areCompatibleBindings:function(d,e){for(var r in d)if(null!=e[r]&&e[r]!=d[r])return!1;return!0},mergeBindings:function(d,e){var r={};for(var n in d)r[n]=d[n];for(var n in e)r[n]=e[n];return r},joinBindings2:function(d,e,r){for(var n,s,h,a,v={},l=[],f=0;f<e.length;f++){n=e[f],a=v;for(var c=0;c<d.length;c++)s=n[d[c]],c==d.length-1?((h=a[s]||[]).push(n),a[s]=h):(h=a[s]||{},a[s]=h,a=h)}for(f=0;f<r.length;f++)for(n=r[f],a=v,c=0;c<d.length;c++)if(null!=a[s=n[d[c]]])if(c==d.length-1)for(var E=0;E<a[s].length;E++)l.push(x.mergeBindings(a[s][E],n));else a=a[s];return l},joinBindings:function(d,e){for(var r=[],n=0;n<d.length;n++)for(var s=d[n],h=0;h<e.length;h++){var a=e[h];x.areCompatibleBindings(s,a)&&r.push(x.mergeBindings(s,a))}return r},augmentMissingBindings:function(d,e){for(var r in e)null==d[r]&&(d[r]=null);return d},leftOuterJoinBindings:function(d,e){for(var r=[],n=0;n<d.length;n++){for(var s=d[n],h=!1,a=0;a<e.length;a++){var v=e[a];x.areCompatibleBindings(s,v)&&(h=!0,r.push(x.mergeBindings(s,v)))}!1===h&&(x.augmentMissingBindings(s,v),r.push(s))}return r},crossProductBindings:function(d,e){for(var r=[],n=0;n<d.length;n++)for(var s=d[n],h=0;h<e.length;h++){var a=e[h];r.push(x.mergeBindings(s,a))}return r},unionBindings:function(d,e){return d.concat(e)},unionManyBindings:function(d){for(var e=[],r=0;r<d.length;r++){var n=d[r];e=x.unionBindings(e,n)}return e}};K.exports={QueryPlan:x}},{"./utils":140}],136:[function(q,K,ee){var M=q("./network_transport").NetworkTransport,o=q("./rvn3_parser").RVN3Parser,x=q("./jsonld_parser").JSONLDParser,d=q("./utils"),e=function(r){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":o.parser,"text/n3":o.parser,"application/ld+json":x.parser,"application/json":x.parser},typeof RDFXMLParser<"u"&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=r)for(var n in r.parsers)this.parsers[n]=r.parsers[n];if(r&&null!=r.precedences)for(var n in this.precedences=r.precedences,r.parsers)d.include(this.precedences,n)||this.precedences.push(n);this.acceptHeaderValue="";for(var s=0;s<this.precedences.length;s++)this.acceptHeaderValue=0!=s?this.acceptHeaderValue+","+this.precedences[s]:this.acceptHeaderValue+this.precedences[s]};e.prototype.registerParser=function(r,n){this.parsers[r]=n,this.precedences.push(r)},e.prototype.unregisterParser=function(r){delete this.parsers[r];for(var n=[],s=0;s<this.precedences.length;s++)this.precedences[s]!=r&&n.push(this.precedences[s]);this.precedences=n},e.prototype.setAcceptHeaderPrecedence=function(r){this.precedences=r},e.prototype.load=function(r,n,s){var h=this;M.load(r,this.acceptHeaderValue,function(a,v){if(a)s(a);else{var l=v.headers["Content-Type"]||v.headers["content-type"],f=v.data;if(null!=l){for(var c in l=l.split(";")[0],h.parsers)if(-1!=c.indexOf("/")){var E=c.split("/");if("*"===E[1]){if(-1!=l.indexOf(E[0]))return h.tryToParse(h.parsers[c],n,f,{documentURI:r},s)}else{if(-1!=l.indexOf(c))return h.tryToParse(h.parsers[c],n,f,{documentURI:r},s);if(-1!=l.indexOf(E[1]))return h.tryToParse(h.parsers[c],n,f,{documentURI:r},s)}}else if(-1!=l.indexOf(c))return h.tryToParse(h.parsers[c],n,f,{documentURI:r},s);s(new Error("Unknown media type : "+l))}else s(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(r,n,s,h){try{var a=this;q("fs").readFile(s.split("file:/")[1],function(v,l){v?h(v):(l=l.toString("utf8"),a.tryToParse(r,n,l,{documentURI:s},h))})}catch(v){h(v)}},e.prototype.tryToParse=function(r,n,s,h,a){try{"string"==typeof s&&(s=d.normalizeUnicodeLiterals(s)),r.parse(s,n,h,a)}catch(v){console.log(v.message),console.log(v.stack),a(v)}},K.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:4}],137:[function(q,K,ee){var M=q("./utils"),o=q("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var x={};for(var d in this)M.include(this.interfaceProperties,d)||"function"==typeof this[d]||"defaultNs"===d||"interfaceProperties"===d||(x[d]=this[d]);return x},RDFModel.UrisMap.prototype.get=function(x){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[x]},RDFModel.UrisMap.prototype.remove=function(x){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[x],null},RDFModel.UrisMap.prototype.set=function(x,d){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";this[x]=d},RDFModel.UrisMap.prototype.setDefault=function(x){this.defaultNs=x},RDFModel.UrisMap.prototype.addAll=function(x,d){for(var e in x)M.include(this.interfaceProperties,e)||(null!=this[e]?!0===d&&(this[e]=x[e]):this[e]=x[e]);return this},RDFModel.UrisMap.prototype.resolve=function(x){var d=x.split(":"),e=d[0],r=d[1];return""===e?null==this.defaultNs?null:this.defaultNs+r:null!=this[e]?this[e]+r:null},RDFModel.UrisMap.prototype.shrink=function(x){for(var d in this){var e=this[d];if(0===x.indexOf(e)&&""!==e&&"defaultNs"!=d)return d+":"+x.split(e)[1]}return x},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(x,d){this.prefixes.addAll(x.prefixes,d),this.terms.addAll(x.terms,d)},RDFModel.Profile.prototype.resolve=function(x){return-1!=x.indexOf(":")?this.prefixes.resolve(x):null!=this.terms[x]?this.terms.resolve(x):null},RDFModel.Profile.prototype.setDefaultPrefix=function(x){this.prefixes.setDefault(x)},RDFModel.Profile.prototype.setDefaultVocabulary=function(x){this.terms.setDefault(x)},RDFModel.Profile.prototype.setPrefix=function(x,d){this.prefixes.set(x,d)},RDFModel.Profile.prototype.setTerm=function(x,d){this.terms.set(x,d)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var x=this;for(var d in this.filters={s:function(e){return function(r){return r.subject.equals(e)}},p:function(e){return function(r){return r.predicate.equals(e)}},o:function(e){return function(r){return r.object.equals(e)}},sp:function(e,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(r)}},so:function(e,r){return function(n){return n.subject.equals(e)&&n.object.equals(r)}},po:function(e,r){return function(n){return n.predicate.equals(e)&&n.object.equals(r)}},spo:function(e,r,n){return function(s){return s.subject.equals(e)&&s.predicate.equals(r)&&s.object.equals(n)}},describes:function(e){return function(r){return r.subject.equals(e)||r.object.equals(e)}},type:function(e){var r=x.resolve("rdf:type");return function(n){return n.predicate.equals(r)&&n.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(d,RDFModel.defaultContext[d])},RDFModel.RDFEnvironment.prototype=M.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var x=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,x},RDFModel.RDFEnvironment.prototype.createNamedNode=function(x){var d=this.resolve(x);return null!=d?new RDFModel.NamedNode(d):new RDFModel.NamedNode(x)},RDFModel.RDFEnvironment.prototype.createLiteral=function(x,d,e){return null!=e?new RDFModel.Literal(x,d,e.toString()):new RDFModel.Literal(x,d,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(x,d,e){return new RDFModel.Triple(x,d,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(x){var d=new RDFModel.Graph;if(null!=x)for(var e=0;e<x.length;e++)d.add(x[e]);return d},RDFModel.RDFEnvironment.prototype.createAction=function(x,d){return function(e){return x(e)?d(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(x){if(!0===x)return new RDFModel.RDFEnvironment.Profile;var d=new RDFModel.RDFEnvironment.Profile;return d.importProfile(this),d},RDFModel.RDFEnvironment.prototype.createTermMap=function(x){if(!0===x)return new RDFModel.UrisMap;var d=this.terms.values(),e=new RDFModel.UrisMap;for(var r in d)e[r]=d[r];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(x){if(!0===x)return new RDFModel.UrisMap;var d=this.prefixes.values(),e=new RDFModel.UrisMap;for(var r in d)e[r]=d[r];return e},RDFModel.RDFNode=function(x){this.interfaceName=x,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(x){if(null==x.interfaceName)return this.valueOf()==x;for(var d in this.attributes){var e=this.attributes[d];if(this[e]!=x[e])return!1}return!0},RDFModel.BlankNode=function(x){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+x,this.bnodeId=x},RDFModel.BlankNode.prototype=M.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(x,d,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=x,null!=d?this.language=d:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=M.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var x='"'+this.nominalValue+'"';return null!=this.language?x=x+"@"+this.language:(null!=this.datatype||this.type)&&(x=x+"^^<"+(this.datatype||this.type)+">"),x},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return o.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(x){RDFModel.RDFNode.call(this,"NamedNode"),null!=x.value?this.nominalValue=x.value:this.nominalValue=x},RDFModel.NamedNode.prototype=M.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(x,d,e){this.subject=x,this.predicate=d,this.object=e},RDFModel.Triple.prototype.equals=function(x){return this.subject.equals(x.subject)&&this.predicate.equals(x.predicate)&&this.object.equals(x.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(x){for(var d=0;d<this.actions.length;d++)x=this.actions[d](x);var e=x.subject.toString()+x.predicate.toString()+x.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(x)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(x,d){if(this.actions.push(x),1==d)for(var e=0;e<this.triples.length;e++)this.triples[e]=x(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(x){for(var d=x.toArray(),e=0;e<d.length;e++)this.add(d[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(x){for(var d=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(x)){var r=x.subject.toString()+x.predicate.toString()+x.object.toString();delete this.duplicates[r],d=e;break}return null!=d&&this.triples.splice(d,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(x){for(var d=0;d<this.triples.length;d++)if(!0===x(this.triples[d],this))return!0;return!1},RDFModel.Graph.prototype.every=function(x){for(var d=0;d<this.triples.length;d++)if(!1===x(this.triples[d],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(x){for(var d=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===x(this.triples[e],this)&&d.add(this.triples[e]);return d},RDFModel.Graph.prototype.forEach=function(x){for(var d=0;d<this.triples.length;d++)x(this.triples[d],this)},RDFModel.Graph.prototype.merge=function(x){for(var d=new RDFModel.Graph,e=0;e<this.triples.length;e++)d.add(this.triples[e]);return d},RDFModel.Graph.prototype.match=function(x,d,e,r){for(var n=new RDFModel.Graph,s=0,h=0;h<this.triples.length;h++){var a=this.triples[h];if((null==x||a.subject.equals(x))&&(null==d||a.predicate.equals(d))&&(null==e||a.object.equals(e))){if(!(null==r||s<r))return n;s++,n.add(a)}}return n},RDFModel.Graph.prototype.removeMatches=function(x,d,e){for(var r=[],n=0;n<this.triples.length;n++){var s=this.triples[n];(null==x||s.subject.equals(x))&&(null==d||s.predicate.equals(d))&&(null==e||s.object.equals(e))&&r.push(s)}for(n=0;n<r.length;n++)this.remove(r[n]);return this},RDFModel.Graph.prototype.toNT=function(){var x="";return this.forEach(function(d){x+=d.toString()}),x},RDFModel.buildRDFResource=function(x,d,e,r){if("blank"===x.token)return RDFModel.buildBlankNode(x,d,e,r);if("literal"===x.token)return RDFModel.buildLiteral(x,d,e,r);if("uri"===x.token)return RDFModel.buildNamedNode(x,d,e,r);if("var"===x.token){var n=d[x.value];return null!=n?RDFModel.buildRDFResource(n,d,e,r):null}return null},RDFModel.buildBlankNode=function(x,d,e,r){return null!=x.valuetmp&&(x.value=x.valuetmp),0===x.value.indexOf("_:")&&(x.value=x.value.split("_:")[1]),new RDFModel.BlankNode(x.value)},RDFModel.buildLiteral=function(x,d,e,r){return new RDFModel.Literal(x.value,x.lang,x.type)},RDFModel.buildNamedNode=function(x,d,e,r){if(null!=x.value)return new RDFModel.NamedNode(x);if(null!=x.prefix){var n=e.resolveNsInEnvironment(x.prefix,r);return x.value=n+x.suffix,new RDFModel.NamedNode(x)}return new RDFModel.NamedNode(x)},RDFModel.rdf=new RDFModel.RDFEnvironment,K.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(q,K,ee){var M=q("n3").Parser,o={};function x(d){switch(d[0]){case'"':if(d.indexOf("^^")>0){var e=d.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:d};case"_":return{blank:d.replace("b","")};default:return{token:"uri",value:d,prefix:null,suffix:null}}}o.parser={async:!0,parse:function(d,e,r,n){n||(n=r,r=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var s=[];new M(r).parse(d,function(h,a){h?n(h):a?s.push({subject:x(a.subject),predicate:x(a.predicate),object:x(a.object),graph:e}):n(!1,s)})},resetBlankNodeIds:function(){M._resetBlankNodeIds()}},K.exports={RVN3Parser:o}},{n3:51}],139:[function(q,K,ee){var M=q("./query_engine").QueryEngine,o=q("./quad_backend").QuadBackend,x=q("./persistent_quad_backend").PersistentQuadBackend,d=q("./lexicon").Lexicon,e=q("./persistent_lexicon").PersistentLexicon,r=q("./rdf_model"),n=q("./utils");Store=function(s,h){var a=null,v=null;if(0==arguments.length)v={};else if(1==arguments.length)v={},a=s;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";v=s,a=h}null==v.treeOrder&&(v.treeOrder=15);var l=d,f=o;!0===v.persistent&&(l=e,f=x),this.functionMap={};var c=this;this.customFns={},new l(function(E){var _=function(){new f(v,function(O){var N=function(){v.backend=O,v.lexicon=E,c.engine=new M(v),a(null,c)};v.overwrite?O.clear(N):N()})};!0===v.overwrite?E.clear(_):_()},v.name)},Store.prototype.rdf=r.rdf,Store.prototype.rdf.api=r,Store.prototype.registerCustomFunction=function(s,h){this.customFns[s]=h,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var s;if(1===arguments.length){s=arguments[0];var h=function(){}}else 2===arguments.length&&(s=arguments[0],h=arguments[1]);this.engine.execute(s,h)}},Store.prototype.executeWithEnvironment=function(){var s,h,a;if(3===arguments.length){s=arguments[0];var v=function(){};h=arguments[1],a=arguments[2]}else 4===arguments.length&&(s=arguments[0],v=arguments[3],h=arguments[1],a=arguments[2]);h=n.map(h,function(l){return{token:"uri",value:l}}),a=n.map(a,function(l){return{token:"uri",value:l}}),this.engine.execute(s,v,h,a)},Store.prototype.graph=function(){var s=null,h=null;if(1===arguments.length)h=arguments[0]||function(){},s=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";h=arguments[1]||function(){},s=arguments[0]}null!=this.rdf.resolve(s)&&(s=this.rdf.resolve(s)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+s+"> { ?s ?p ?o } }",h)},Store.prototype.node=function(){var s=null,h=null,a=null;if(2===arguments.length)a=arguments[0],h=arguments[1]||function(){},s=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";a=arguments[0],s=arguments[1],h=arguments[2]||function(){}}null!=this.rdf.resolve(s)&&(s=this.rdf.resolve(s)),null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a)),this.engine.execute("CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+s+"> { <"+a+"> ?p ?o } }",h)},Store.prototype.startObservingNode=function(){var s,h,a;2===arguments.length?(s=arguments[0],a=arguments[1],this.engine.callbacksBackend.observeNode(s,a,function(){})):3===arguments.length&&(s=arguments[0],h=arguments[1],a=arguments[2],this.engine.callbacksBackend.observeNode(s,h,a,function(){}))},Store.prototype.stopObservingNode=function(s){this.engine.callbacksBackend.stopObservingNode(s)},Store.prototype.startObservingQuery=function(){var s=arguments[0],h=arguments[1],a=arguments[2];null!=a?this.engine.callbacksBackend.observeQuery(s,h,a):this.engine.callbacksBackend.observeQuery(s,h,function(){})},Store.prototype.stopObservingQuery=function(s){this.engine.callbacksBackend.stopObservingQuery(s)},Store.prototype.subscribe=function(s,h,a,v,l){var f=this,c=function(E,_){var O=[],N={blanks:{},outCache:{}},A=[];n.each(_,function(y){var F=r.buildRDFResource(y.subject,A,f.engine,N),j=r.buildRDFResource(y.predicate,A,f.engine,N),G=r.buildRDFResource(y.object,A,f.engine,N);null!=F&&null!=j&&null!=G&&(y=new r.Triple(F,j,G),O.push(y))}),l(E,O)};this.functionMap[l]=c,this.engine.callbacksBackend.subscribe(s,h,a,v,c,function(){})},Store.prototype.unsubscribe=function(s){var h=this.functionMap[s];this.engine.callbacksBackend.unsubscribe(h),delete this.functionMap[s]},Store.prototype.setPrefix=function(s,h){this.rdf.setPrefix(s,h)},Store.prototype.setDefaultPrefix=function(s){this.rdf.setDefaultPrefix(s)},Store.prototype.insert=function(){var s,h,a;if(1===arguments.length)h=arguments[0],a=function(){};else if(2===arguments.length)h=arguments[0],a=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";h=arguments[0],s=this.rdf.createNamedNode(arguments[1]),a=arguments[2]||function(){}}var v="",l=this;h.forEach(function(f){v=v+l._nodeToQuery(f.subject)+l._nodeToQuery(f.predicate)+l._nodeToQuery(f.object)+"."}),v=null!=s?"INSERT DATA { GRAPH "+this._nodeToQuery(s)+" { "+v+" } }":"INSERT DATA { "+v+" }",this.engine.execute(v,a)},Store.prototype._nodeToQuery=function(s){if("NamedNode"===s.interfaceName){var h=this.rdf.resolve(s.valueOf());return null!=h?"<"+h+">":"<"+s.valueOf()+">"}return s.toString()},Store.prototype.delete=function(){var s,h,a;if(1===arguments.length)h=arguments[0],a=function(){};else if(2===arguments.length)h=arguments[0],a=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";h=arguments[0],s=this.rdf.createNamedNode(arguments[1]),a=arguments[2]||function(){}}var v="",l=this;h.forEach(function(f){v=v+l._nodeToQuery(f.subject)+l._nodeToQuery(f.predicate)+l._nodeToQuery(f.object)+"."}),v=null!=s?"DELETE DATA { GRAPH "+this._nodeToQuery(s)+" { "+v+" } }":"DELETE DATA { "+v+" }",this.engine.execute(v,a)},Store.prototype.clear=function(){var s;if(0===arguments.length){s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var h=function(){}}else if(1===arguments.length)s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),h=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";s=this.rdf.createNamedNode(arguments[0]),h=arguments[1]||function(){}}var a="CLEAR GRAPH "+this._nodeToQuery(s);this.engine.execute(a,h)},Store.prototype.setBatchLoadEvents=function(s){this.engine.eventsOnBatchLoad=s},Store.prototype.registerDefaultNamespace=function(s,h){this.rdf.prefixes.set(s,h),this.engine.registerDefaultNamespace(s,h)},Store.prototype.registerDefaultProfileNamespaces=function(){var s=this.rdf.prefixes.values();for(var h in s)this.registerDefaultNamespace(h,s[h])},Store.prototype.load=function(){var s,h,a,v,l={};if(3===arguments.length)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=arguments[0],h=arguments[1],v=arguments[2]||function(){};else if(4===arguments.length)s=arguments[0],h=arguments[1],"string"==typeof(l=arguments[2])?(a=this.rdf.createNamedNode(l),l={}):(a=this.rdf.createNamedNode(l.graph||this.engine.lexicon.defaultGraphUri),delete l.graph),v=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===s){var f="LOAD <"+(h=this.rdf.createNamedNode(h)).valueOf()+"> INTO GRAPH <"+a.valueOf()+">";this.engine.execute(f,v)}else{var c=this,E=this.engine.rdfLoader.parsers[s];if(!E)return v(new Error("Cannot find parser for the provided media type:"+s));var O=[E,{token:"uri",value:a.valueOf()},h,l,function(N,A){N?v(N,A):c.engine.batchLoad(A,function(y){null!=y?v(null,y):v(new Error("Error batch-loading triples."))})}];h&&"string"==typeof h&&0===h.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,O):this.engine.rdfLoader.tryToParse.apply(null,O)}},Store.prototype.registerParser=function(s,h){this.engine.rdfLoader.registerParser(s,h)},Store.prototype.registeredGraphs=function(s){this.engine.lexicon.registeredGraphs(!0,function(h){var a=n.map(h,function(v){return new r.NamedNode(v)});s(null,a)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(s){NetworkTransport=s},Store.prototype.close=function(s){null==s&&(s=function(){}),this.engine.close?this.engine.close(s):s()},Store.VERSION="0.9.18-alpha.13",Store.yieldFrequency=function(s){n.yieldFrequency(s)},K.exports.Store=Store,K.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},K.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:typeof window<"u"&&window.setImmediate?window.setImmediate:function(q){setTimeout(q,0)},spin=0,yieldFrequency=100,nextTick=function(q){++spin<yieldFrequency?q():(spin=0,slowNextTick(q))},hashTerm=function(q){try{if(null==q)return"";if("uri"===q.token)return"u"+q.value;if("blank"===q.token)return"b"+q.value;if("literal"===q.token){var K="l"+q.value;return K+=q.type||"",K+=q.lang||""}}catch{if("object"==typeof q){var ee="";for(p in q)ee=ee+p+q[p];return ee}return q}},lexicalFormBaseUri=function(q,K){var ee=null;if(K=K||{},null==q.value){var M=q.prefix,o=q.suffix,x=K.namespaces[M];ee=null!=x?x+o:M+":"+o}else ee=q.value;return null===ee?null:(-1==ee.indexOf(":")&&(ee=(K.base||"")+ee),ee)};parseISO8601=function(q){return Date.parse(q)},Date.prototype.toISOString||function(){function q(K){return K<10?"0"+K:K}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+q(this.getUTCMonth()+1)+"-"+q(this.getUTCDate())+"T"+q(this.getUTCHours())+":"+q(this.getUTCMinutes())+":"+q(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(q){return q.toISOString()},compareDateComponents=function(q,K){var ee=parseISO8601(q),M=parseISO8601(K);return ee==M?0:ee<M?-1:1},lexicalFormLiteral=function(q,K){var ee=q.value,M=q.lang,o=q.type,x=null;if(null!=ee&&null!=o&&"string"!=typeof o){var d=o.value;if(null==d){var e=o.prefix,r=o.suffix,n=K.namespaces[e];q.type=n+r,d=n+r}x=-1!=d.indexOf("hexBinary")?'"'+q.value.toLowerCase()+'"^^<'+d+">":'"'+q.value+'"^^<'+d+">"}else x=null==M&&null==o?'"'+ee+'"':null==o?'"'+ee+'"@'+M:-1!=o.indexOf("hexBinary")?'"'+q.value.toLowerCase()+'"^^<'+o+">":'"'+q.value+'"^^<'+o+">";return x},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(q){if(typeof window>"u"&&void 0!==process&&!1===process.browser){var K=_dereq_("sqlite3"),ee=_dereq_("indexeddb-js"),M=new K.Database(":memory:"),o=ee.makeScope("sqlite3",M);q.indexedDB=o.indexedDB,q.IDBKeyRange=o.IDBKeyRange}else{var x;(x=typeof window>"u"?self:window).indexedDB=x.indexedDB||x.mozIndexedDB||x.webkitIndexedDB||x.msIndexedDB,x.IDBKeyRange=x.IDBKeyRange||x.webkitIDBKeyRange||x.msIDBKeyRange,x.indexedDB?(q.indexedDB=x.indexedDB,q.IDBKeyRange=x.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function q(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return q()+q()+"-"+q()+"-"+q()+"-"+q()+"-"+q()+q()+q()},hashTerm=function(q){try{if(null==q)return"";if("uri"===q.token)return"u"+q.value;if("blank"===q.token)return"b"+q.value;if("literal"===q.token){var K="l"+q.value;return K+=q.type||"",K+=q.lang||""}}catch{if("object"==typeof q){var ee="";for(p in q)ee=ee+p+q[p];return ee}return q}};var reject=function(q,K){for(var ee=[],M=0;M<q.length;M++)K(q[M])&&ee.push(q[M]);return ee},include=function(q,K){for(var ee=0;ee<q.length;ee++)if(q[ee]===K)return!0;return!1},each=function(q,K){if(q.forEach)q.forEach(K);else for(var ee=0;ee<q.length;ee++)K(q[ee])},map=function(q,K){if(q.map)return q.map(K);for(var ee=[],M=0;M<q.length;M++)ee[M]=K(q[M]);return ee},keys=function(q){var K=[];for(var ee in q)K.push(ee);return K},values=function(q){var K=[];for(var ee in q)K.push(q[ee]);return K},size=function(q){if(q.length)return q.length;var K=0;for(var ee in q)K++;return K};clone=function(q){return JSON.parse(JSON.stringify(q))};var isObject=function(q){var K=typeof q;return"function"==K||q&&"object"==K||!1},create=function(){function q(){}return function(K){if(isObject(K)){q.prototype=K;var ee=new q;q.prototype=null}return ee||void 0}}(),whilst=function(q,K,ee){q()?K(function(M){if(M)return ee(M);whilst(q,K,ee)}):ee()},eachSeries=function(q,K,ee){if(ee=ee||function(){},!q.length)return ee();var M=0,o=function(){K(q[M],function(x){x?(ee(x),ee=function(){}):(M+=1)>=q.length?ee():nextTick(o)})};o()},eachParallel=function(q,K,ee){if(ee=ee||function(){},!q.length)return ee();for(var M=!1,o=0,x=function(e){if(e)throw M=!0,new Error(e);M||++o===q.length&&ee()},d=0;d<q.length;d++)!function(e,r,n,s){nextTick(function(){try{s(e[r],function(){n()})}catch(h){n(h)}})}(q,d,x,K)},reduce=function(q,K,ee,M){eachSeries(q,function(o,x){ee(K,o,function(d,e){K=e,x(d)})},function(o){M(o,K)})},seq=function(){var q=arguments;return function(){var K=this,ee=Array.prototype.slice.call(arguments),M=ee.pop();reduce(q,ee,function(o,x,d){x.apply(K,o.concat([function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1);d(e,r)}]))},function(o,x){M.apply(K,[o].concat(x))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&typeof window>"u"};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(q){yieldFrequency=q}}}).call(this)}).call(this,require("_process"))},{_process:59}]},{},[139])(139)});