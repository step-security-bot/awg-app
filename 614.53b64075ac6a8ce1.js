(self.webpackChunkawg_app=self.webpackChunkawg_app||[]).push([[614],{9614:(m,v,n)=>{"use strict";n.r(v),n.d(v,{EditionViewModule:()=>mt});var d=n(655),l=n(4650),u=n(5921),C=n(5867);var W,L=n(816),I=n.n(L),w=n(1005),y=n(67),P=n(6074),x=n(141),M=n(366);let U=((W=class{constructor(A,N,G){this.route=A,this.editionService=N,this.utils=G}get editionRouteConstants(){return x.LL}ngOnInit(){this.getEditionComplexFromRoute()}getEditionComplexFromRoute(){this.route.paramMap.subscribe(A=>{const N=A.get("complexId")?A.get("complexId"):"";this.editionService.updateEditionComplex(P.e5[N.toUpperCase()]),this.selectedEditionComplex$=this.editionService.getEditionComplex().pipe((0,w.g)(0))})}ngOnDestroy(){this.editionService.clearEditionComplex()}}).ctorParameters=()=>[{type:C.gz},{type:M.OE},{type:y.tI}],W);U=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-complex",template:'\x3c!--\n<div *ngIf="selectedEditionComplex$ | async as complex">\n    <p>\n        Editionskomplex {{ complex.complexId.short }}: <br />\n        {{ complex | json }}\n    </p>\n    <p>Titel: {{ complex.titleStatement | json }}</p>\n    <p>\n        <a [routerLink]="[editionRouteConstants.EDITION_INTRO.route]">\n            {{ editionRouteConstants.EDITION_INTRO.short }}\n        </a>\n        {{ editionRouteConstants.EDITION_INTRO | json }}\n    </p>\n    <div>\n        <p>Werkedition: {{ complex.titleStatement | json }}</p>\n        <ul>\n            <li [innerHtml]="complex.complexId.full"></li>\n            enth\xe4lt:\n            <ul>\n                <li>\u201eDer Tag ist vergangen\u201c M 212: Textfassung 3</li>\n                <li>Die geheimnisvolle Fl\xf6te (\u201eAn einem Abend\u201c) M 217: einzige Textfassung</li>\n                <li>\u201eSchien mir\u2019s, als ich sah die Sonne\u201c M 213: einzige Textfassung</li>\n                <li>Gleich und Gleich (\u201eEin Blumengl\xf6ckchen\u201c) M 216: Textfassung 2</li>\n            </ul>\n        </ul>\n    </div>\n    <div>\n        <p>Texteditionen: {{ complex.titleStatement | json }}</p>\n        <ul>\n            <li>\u201eDer Tag ist vergangen\u201c M 212: Textfassung 1</li>\n            <li>\u201eDer Tag ist vergangen\u201c M 212: Textfassung 2</li>\n            <li>Gleich und Gleich (\u201eEin Blumengl\xf6ckchen\u201c) M 216: Textfassung 1</li>\n        </ul>\n    </div>\n    <div>\n        <p>Skizzeneditionen: {{ complex.titleStatement | json }}</p>\n        <ul>\n            <li>M 212 Sk 1</li>\n            <li>M 212 Sk 2</li>\n            <li>M 212 Sk 3</li>\n            <li>M 212 Sk 4</li>\n            <li>M 212 Sk 5</li>\n        </ul>\n    </div>\n    <p>\n        <a [routerLink]="[editionRouteConstants.EDITION_REPORT.route]">\n            {{ editionRouteConstants.EDITION_REPORT.short }}\n        </a>\n        {{ editionRouteConstants.EDITION_REPORT | json }}\n    </p>\n</div>\n--\x3e\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n',styles:[I()]})],U);var Q,lt=n(7149),et=n.n(lt),H=n(7579),J=n(2722),k=n(849);let X=((Q=class{constructor(A){this.editionService=A,this._destroyed$=new H.x}ngOnInit(){this.getEditionComplex()}getEditionComplex(){this.editionService.getEditionComplex().pipe((0,J.R)(this._destroyed$)).subscribe({next:A=>{this.editionComplex=A,this.setButtons()}})}setButtons(){this.editionRouterLinkButtons=[new k.v(this.editionComplex.baseRoute,x.LL.EDITION_INTRO.route,x.LL.EDITION_INTRO.short,!1),new k.v(this.editionComplex.baseRoute,x.LL.EDITION_SHEETS.route,x.LL.EDITION_SHEETS.short,!1),new k.v(this.editionComplex.baseRoute,x.LL.EDITION_REPORT.route,x.LL.EDITION_REPORT.short,!1),new k.v(this.editionComplex.baseRoute,x.LL.EDITION_GRAPH.route,x.LL.EDITION_GRAPH.short,!1)]}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}}).ctorParameters=()=>[{type:M.OE}],Q);X=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-detail-nav",template:'<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'">\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n',styles:[et()]})],X);var T,K=n(6608),tt=n.n(K);let i=((T=class{constructor(A){this.editionService=A}ngOnInit(){this.clearSelections(),this.getEditionOutline()}getEditionOutline(){this.editionOutline=this.editionService.getEditionOutline()}clearSelections(){this.editionService.clearSelectedEditionSeries(),this.editionService.clearSelectedEditionSection()}}).ctorParameters=()=>[{type:M.OE}],T);i=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-series",template:'<div *ngIf="editionOutline" class="row row-cols-1 row-cols-md-3 g-4">\n    <div class="col" *ngFor="let series of editionOutline">\n        <div class="card h-100">\n            <div class="card-header">\n                <h5 class="card-title">{{ series.series.full }}</h5>\n            </div>\n            <div class="card-body">\n                <ul class="list-group list-group-flush">\n                    <li *ngFor="let section of series.sections" class="list-group-item">\n                        <a\n                            *ngIf="!section.disabled; else disabledSection"\n                            [routerLink]="[series.series.route, \'section\', section.section.route]"\n                            >{{ section.section.full }}</a\n                        >\n                        <ng-template #disabledSection>\n                            <span class="text-muted">{{ section.section.full }}</span>\n                        </ng-template>\n                    </li>\n                </ul>\n            </div>\n            <div class="card-footer text-end">\n                <a [routerLink]="[series.series.route]" class="btn btn-outline-info">Mehr... </a>\n            </div>\n        </div>\n    </div>\n</div>\n',styles:[tt()]})],i);var E,h=n(8483),g=n.n(h);let O=((E=class{constructor(A,N){this.route=A,this.editionService=N}ngOnInit(){this.getSeries()}getSeries(){const A=this.route.snapshot.paramMap.get("id");this.selectedSeries=this.editionService.getEditionSeriesById(A),this.editionService.updateSelectedEditionSeries(this.selectedSeries)}}).ctorParameters=()=>[{type:C.gz},{type:M.OE}],E);O=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-series-detail",template:"<router-outlet></router-outlet>\n",styles:[g()]})],O);var ct,z=n(2087),nt=n.n(z);let it=((ct=class{constructor(A,N,G){this.route=A,this.editionService=N,this.utils=G,this._destroyed$=new H.x}ngOnInit(){this.getSection()}getSection(){const A=this.route.snapshot.paramMap.get("id");this.editionService.getSelectedEditionSeries().pipe((0,J.R)(this._destroyed$)).subscribe(N=>{if(N){this.selectedSeries=N;const G=N.series.route;this.selectedSection=this.editionService.getEditionSectionById(G,A),this.editionService.updateSelectedEditionSection(this.selectedSection)}})}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}}).ctorParameters=()=>[{type:C.gz},{type:M.OE},{type:y.tI}],ct);it=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-section-detail",template:'<div\n    class="awg-edition-section-detail"\n    *ngIf="\n        selectedSection &&\n            utils.isNotEmptyObject(selectedSection.complexes) &&\n            (utils.isNotEmptyArray(selectedSection.complexes.opus) ||\n                utils.isNotEmptyArray(selectedSection.complexes.mnr));\n        else noComplexes\n    ">\n    <div\n        *ngIf="utils.isNotEmptyArray(selectedSection.complexes.opus)"\n        class="awg-edition-section-detail-opus para p-3 border rounded-3">\n        <h5>nach Opusnummer:</h5>\n        <awg-edition-complex-card [complexes]="selectedSection.complexes.opus"></awg-edition-complex-card>\n    </div>\n\n    <div\n        *ngIf="utils.isNotEmptyArray(selectedSection.complexes.mnr)"\n        class="awg-edition-section-detail-mnr p-3 border rounded-3">\n        <h5>nach Moldenhauer-Nummer:</h5>\n        <awg-edition-complex-card [complexes]="selectedSection.complexes.mnr"></awg-edition-complex-card>\n    </div>\n</div>\n<ng-template #noComplexes>\n    <div class="alert alert-info" role="alert">\n        <p class="text-muted" style="margin-bottom: 0">\n            [Diese Inhalte erscheinen im Zusammenhang der vollsta\u0308ndigen Edition von AWG\n            {{ selectedSeries?.series.short }}/{{ selectedSection?.section.short }}.]\n        </p>\n    </div>\n</ng-template>\n',styles:[nt()]})],it);var dt,It=n(6641),Rt=n.n(It);let ot=((dt=class{constructor(A){this.editionService=A}ngOnInit(){this.clearSelectedSection(),this.getSeries()}getSeries(){this.selectedSeries$=this.editionService.getSelectedEditionSeries()}clearSelectedSection(){this.editionService.clearSelectedEditionSection()}}).ctorParameters=()=>[{type:M.OE}],dt);ot=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-sections",template:'<div *ngIf="selectedSeries$ | async as selectedSeries" class="row row-cols-1 row-cols-md-3 row-cols-xl-5 g-4">\n    <div class="col" *ngFor="let section of selectedSeries.sections">\n        <div class="card h-100">\n            <div class="card-body">\n                <h5 class="card-title" [ngClass]="{ \'text-muted\': section.disabled }">{{ section.section.full }}</h5>\n            </div>\n            <div class="card-footer text-end">\n                <a\n                    [routerLink]="[section.section.route]"\n                    class="btn btn-outline-info"\n                    [ngClass]="{ disabled: section.disabled }"\n                    >Mehr...\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n',styles:[Rt()]})],ot);var ut,wt=n(4603),Ot=n.n(wt);let ht=((ut=class{constructor(){}ngOnInit(){}}).ctorParameters=()=>[],ut);ht=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-type",template:"<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n",styles:[Ot()]})],ht);var st,Dt=n(8094),Tt=n.n(Dt);let Y=((st=class{constructor(A,N,G){this.editionService=A,this.route=N,this.router=G,this.editionViewTitle="Inhalt",this.editionViewId="awg-edition-view"}get editionRouteConstants(){return x.LL}ngOnInit(){this.getSelectionsFromRoute(),this.routeToSidenav()}getSelectionsFromRoute(){this.selectedEditionSeries$=this.editionService.getSelectedEditionSeries().pipe((0,w.g)(0)),this.selectedEditionSection$=this.editionService.getSelectedEditionSection().pipe((0,w.g)(0)),this.selectedEditionComplex$=this.editionService.getEditionComplex().pipe((0,w.g)(0)),this.isRowTableView$=this.editionService.getIsRowTableView().pipe((0,w.g)(0))}routeToSidenav(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0})}}).ctorParameters=()=>[{type:M.OE},{type:C.gz},{type:C.F0}],st);Y=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-view",template:'\x3c!-- content: edition-view --\x3e\n\n<div>\n    <div class="awg-edition-row-tables para" *ngIf="isRowTableView$ | async as isRowTableView">\n        <h6 class="awg-edition-info-breadcrumb">\n            <a [routerLink]="[editionRouteConstants.SERIES.route]">\n                {{ editionRouteConstants.EDITION?.short }}\n            </a>\n            /\n            <span>{{ editionRouteConstants.ROWTABLES.full }}</span>\n        </h6>\n        \x3c!-- Jumbotron --\x3e\n        <awg-edition-jumbotron [jumbotronId]="editionViewId" [jumbotronTitle]="\'\xdcbersicht\'"></awg-edition-jumbotron>\n    </div>\n\n    <div\n        class="awg-edition-series para"\n        *ngIf="(selectedEditionComplex$ | async) === null && (isRowTableView$ | async) === null">\n        <h6 class="awg-edition-info-breadcrumb">\n            <a\n                *ngIf="selectedEditionSeries$ | async as selectedSeries; else editionWithoutLink"\n                [routerLink]="[editionRouteConstants.SERIES.route]">\n                {{ editionRouteConstants.EDITION?.short }}\n            </a>\n            <ng-template #editionWithoutLink> {{ editionRouteConstants.EDITION?.short }} </ng-template>\n            /\n            <span *ngIf="selectedEditionSeries$ | async as selectedSeries">\n                <a\n                    *ngIf="selectedEditionSection$ | async as selectedSection; else seriesWithoutLink"\n                    [routerLink]="[\'./series\', selectedSeries.series.route]">\n                    {{ selectedSeries?.series.full }}\n                </a>\n                <ng-template #seriesWithoutLink> {{ selectedSeries?.series.full }} </ng-template>\n                /\n            </span>\n            <span *ngIf="selectedEditionSection$ | async as selectedSection">\n                {{ selectedSection?.section.full }}\n            </span>\n        </h6>\n        \x3c!-- Jumbotron --\x3e\n        <awg-edition-jumbotron\n            [jumbotronId]="editionViewId"\n            [jumbotronTitle]="editionViewTitle"></awg-edition-jumbotron>\n    </div>\n\n    <div class="awg-edition-complex" *ngIf="selectedEditionComplex$ | async as selectedEditionComplex">\n        <h6 class="awg-edition-info-breadcrumb">\n            <a [routerLink]="[editionRouteConstants.SERIES.route]">\n                {{ editionRouteConstants.EDITION?.short }}\n            </a>\n            /\n            <a [routerLink]="[editionRouteConstants.SERIES.route, selectedEditionComplex.series.route]">\n                {{ selectedEditionComplex.series.full }}\n            </a>\n            /\n            <a\n                [routerLink]="[\n                    editionRouteConstants.SERIES.route,\n                    selectedEditionComplex.series.route,\n                    \'section\',\n                    selectedEditionComplex.section.route\n                ]">\n                {{ selectedEditionComplex.section.full }}\n            </a>\n        </h6>\n        <h3 class="awg-edition-info-header">\n            <span class="awg-edition-info-header-title" [innerHTML]="selectedEditionComplex.titleStatement.title"></span\n            >&nbsp;<span class="awg-edition-info-header-catalogue">{{ selectedEditionComplex.complexId.short }}</span>\n        </h3>\n        \x3c!-- declamation --\x3e\n        <div class="awg-edition-responsibility mt-3">\n            <p>\n                Ediert von\n                <span\n                    class="editor"\n                    *ngFor="let editor of selectedEditionComplex.responsibilityStatement.editors; last as isLast">\n                    <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                    ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n                </span>\n                <br />\n                Versionsdatum:\n                <span class="version">{{ selectedEditionComplex.responsibilityStatement.lastModified }}</span>\n            </p>\n        </div>\n    </div>\n\n    \x3c!-- edition routes --\x3e\n    <router-outlet></router-outlet>\n</div>\n',styles:[Tt()]})],Y);const Et=[{path:"",component:Y,children:[{path:"series",component:i},{path:"series/:id",component:O,children:[{path:"sections",component:ot},{path:"section/:id",component:it},{path:"sections/:id",redirectTo:"section/:id",pathMatch:"full"},{path:"",redirectTo:"sections",pathMatch:"full"}]},{path:"composition",redirectTo:"complex",pathMatch:"prefix"},{path:"complex/:complexId",component:U,children:[{path:"",component:X,children:[{path:"intro",loadChildren:()=>n.e(667).then(n.bind(n,5667)).then(D=>D.EditionIntroModule)},{path:"sheets",loadChildren:()=>Promise.all([n.e(145),n.e(592),n.e(668)]).then(n.bind(n,5668)).then(D=>D.EditionSheetsModule)},{path:"report",loadChildren:()=>Promise.all([n.e(592),n.e(520)]).then(n.bind(n,2520)).then(D=>D.EditionReportModule)},{path:"graph",loadChildren:()=>Promise.all([n.e(145),n.e(592),n.e(216)]).then(n.bind(n,6216)).then(D=>D.EditionGraphModule)},{path:"",redirectTo:"sheets",pathMatch:"full"}]}]},{path:"row-tables",loadChildren:()=>n.e(224).then(n.bind(n,6224)).then(D=>D.EditionRowTablesModule)}]}],xt=[Y,U,X,ot,it,i,O,ht];let rt=class{};rt=(0,d.gn)([(0,l.LVF)({imports:[C.Bz.forChild(Et)],exports:[C.Bz]})],rt);var pt,Lt=n(1836),bt=n.n(Lt);let ft=((pt=class{}).propDecorators={complexes:[{type:l.IIB}]},pt);ft=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-complex-card",template:'<div class="row row-cols-1 row-cols-md-3 row-cols-xl-5 g-4">\n    <div class="col" *ngFor="let complex of complexes">\n        <div class="card awg-edition-card h-100">\n            <div class="card-body">\n                <h5 class="card-title" [ngClass]="{ \'text-muted\': complex.disabled }">\n                    <span\n                        class="awg-edition-info-header-title"\n                        [innerHTML]="complex.complex.titleStatement.title"></span\n                    >&nbsp;<span class="awg-edition-info-header-catalogue">{{ complex.complex.complexId.short }}</span>\n                </h5>\n            </div>\n            <div class="card-footer">\n                <p *ngIf="!complex.disabled" class="awg-edition-responsibility">\n                    <small class="text-muted">\n                        Ediert von\n                        <span\n                            class="editor"\n                            *ngFor="let editor of complex.complex.responsibilityStatement.editors; last as isLast">\n                            <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                            ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n                        </span>\n                        <br />\n                        Versionsdatum:\n                        <span class="version">{{ complex.complex.responsibilityStatement.lastModified }}</span>\n                    </small>\n                </p>\n                <p class="text-end">\n                    <a\n                        [routerLink]="[complex.complex.baseRoute]"\n                        class="btn btn-outline-info"\n                        [ngClass]="{ disabled: complex.disabled }"\n                        >Mehr...\n                    </a>\n                </p>\n            </div>\n        </div>\n    </div>\n</div>\n',changeDetection:l.n4l.OnPush,styles:[bt()]})],ft);var _t,Nt=n(1809),Bt=n.n(Nt);let gt=((_t=class{}).propDecorators={jumbotronId:[{type:l.IIB}],jumbotronTitle:[{type:l.IIB}]},_t);gt=(0,d.gn)([(0,l.wA2)({selector:"awg-edition-jumbotron",template:'<div\n    class="p-5 bg-image text-white text-center awg-jumbotron-image shadow border rounded-3"\n    style="background-image: url(\'https://mdbcdn.b-cdn.net/img/new/slides/041.webp\')">\n    <h1 id="{{ jumbotronId }}" class="mb-4">{{ jumbotronTitle }}</h1>\n</div>\n',changeDetection:l.n4l.OnPush,styles:[Bt()]})],gt);let mt=class{};mt=(0,d.gn)([(0,l.LVF)({imports:[u.m,rt],declarations:[xt,ft,gt]})],mt)},366:(m,v,n)=>{"use strict";n.d(v,{Ko:()=>W,OE:()=>tt,rH:()=>U,Rt:()=>q});var M,d=n(655),l=n(529),u=n(4650),C=n(4128),b=n(9646),L=n(6590),I=n(5698),w=n(262),y=n(6074),P=n(141),x=n(4364);let W=((M=class{constructor(i){this.http=i,this._assetPath=""}getEditionSheetsData(i){this._setAssetPath(i);const o=this._getFolioConvoluteData(),h=this._getSvgSheetsData(),g=this._getTextcriticsListData();return(0,C.D)([o,h,g]).pipe((0,L.d)([new x.yL,new x.vU,new x.Dt]),(0,I.q)(1))}getEditionGraphData(i){return this._setAssetPath(i),this._getGraphData().pipe((0,L.d)(new x.nu),(0,I.q)(1))}getEditionIntroData(i){return this._setAssetPath(i),this._getIntroData().pipe((0,L.d)(new x.Jb),(0,I.q)(1))}getEditionReportData(i){this._setAssetPath(i);const o=this._getSourceListData(),h=this._getSourceDescriptionListData(),g=this._getSourceEvaluationListData(),E=this._getTextcriticsListData();return(0,C.D)([o,h,g,E]).pipe((0,L.d)([new x.LQ,new x.DD,new x.DO,new x.Dt]),(0,I.q)(1))}getRowTables(){return y.zY}_setAssetPath(i){const h="/"+P.LL.SERIES.route+"/"+i.series.route+P.LL.SECTION.route+i.section.route+i.complexId.route;this._assetPath=y.R3.BASE_ROUTE+h}_getFolioConvoluteData(){const i=y.R3.FILES.folioConvoluteFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getGraphData(){const i=y.R3.FILES.graphFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getIntroData(){const i=y.R3.FILES.introFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getSourceListData(){const i=y.R3.FILES.sourceListFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getSourceDescriptionListData(){const i=y.R3.FILES.sourceDescriptionListFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getSourceEvaluationListData(){const i=y.R3.FILES.sourceEvaluationListFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getSvgSheetsData(){const i=y.R3.FILES.svgSheetsFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getTextcriticsListData(){const i=y.R3.FILES.textcriticsFile,o=`${this._assetPath}/${i}`;return this._getJsonData(o)}_getJsonData(i){return this.http.get(i).pipe((0,w.K)(this._handleError("_getJsonData",[])))}_handleError(i,o){return h=>(this._logError(`${i} failed: ${h.message}`),(0,b.of)(o))}_logError(i){console.error(i)}}).ctorParameters=()=>[{type:l.eN}],M);W=(0,d.gn)([(0,u.GSi)({providedIn:"root"})],W);let U=class{findTextcritics(i,o){return i&&o&&i.find(g=>g.id===o.id)||new x.xL}getCurrentEditionType(i,o){const g=i?.content?.[0]?.partial,E=g?i.id+g:i.id;return Object.keys(o).find(B=>this._findSvgSheetIndexById(o[B],E)>=0)}getNextSheetId(i,o,h){const g=o?.content?.[0]?.partial,E=o.id+(g||""),O=this._findSvgSheetIndexById(h,o.id);return g?this._findNextSheetIdForPartialSheet(i,h,O,E,g):this._findNextSheetIdForNonPartialSheet(i,h,O,E)}getTextcriticalCommentsForOverlays(i,o){return i&&o?i.filter(h=>o.some(g=>h.svgGroupId===g.id)):[]}selectConvolute(i,o,h){if(!i||!o||!h)return;const E="sketchEditions"===this.getCurrentEditionType(h,o)?h.convolute:"";return this._findConvoluteById(i,E)}selectSvgSheetById(i,o){if(!i||!o)return new x.qj;const h={workEditions:this._findSvgSheetIndexById(i.workEditions,o),textEditions:this._findSvgSheetIndexById(i.textEditions,o),sketchEditions:this._findSvgSheetIndexById(i.sketchEditions,o)};for(const[g,E]of Object.entries(h))if(!(E<0))return this._getSheetWithPartialContentById(i[g],E,o);return new x.qj}_findConvoluteById(i,o){return i.find(g=>g.convoluteId===o)}_findNextSheetIdForPartialSheet(i,o,h,g,E){const O=o[h],z=O.content.findIndex(nt=>nt.partial===E)+i;return z>=0&&z<O.content?.length?O.id+O.content[z].partial:this._findNextSheetIdForNonPartialSheet(i,o,h,g)}_findNextSheetIdForNonPartialSheet(i,o,h,g){const E=h+i;if(E>=0&&E<o.length){const O=o[E],B=i>0?0:O.content.length-1;return O.id+(O.content[B]?.partial||"")}return g}_findSvgSheetIndexById(i,o){return i.findIndex(h=>{let g=h.id;if(h.content.length>1){const E=this._findSvgSheetPartialIndexById(h,o);E>=0&&(g+=h.content[E].partial)}return g===o})}_findSvgSheetPartialIndexById(i,o){return i.content.findIndex(h=>i.id+h.partial===o)}_getSheetWithPartialContentById(i,o,h){const g={...i[o]},E=this._findSvgSheetPartialIndexById(g,h);return E>=0&&(g.content=[g.content[E]]),g}};U=(0,d.gn)([(0,u.GSi)({providedIn:"root"})],U);var at=n(5861);function lt(T){if(!T.ok)throw new Error(T.status+" "+T.statusText);return T.text()}function H(T){return(i,o)=>function et(T,i){return fetch(T,i).then(lt)}(i,o).then(h=>(new DOMParser).parseFromString(h,T))}H("application/xml");H("text/html");var Q=H("image/svg+xml"),X=n(711);let q=class{constructor(){this.overlayFillColor="orange",this.overlayHoverFillColor="tomato",this.overlaySelectionFillColor="green",this.linkBoxFillColor="#dddddd",this.linkBoxHoverFillColor="#eeeeee",this._overlayBoxesOpacity=.3,this._overlayBoxAdditionalSpace=5.5,this._overlayBoxCornerRadius=2}createSvg(i,o,h){var g=this;return(0,at.Z)(function*(){if(!i||!o||!h)return;const O=(yield g._fetchSvgFile(i)).getElementsByTagName("svg")[0],B=g._getViewBox(O);for(;O.firstChild;)h.appendChild(O.firstChild);return o.appendChild(h),X.Z(o).attr("width",B.svgWidth).attr("height",B.svgHeight).attr("viewBox",B.viewBox).attr("preserveAspectRatio","xMidYMid meet").attr("version","1.1").attr("xmlns","https://www.w3.org/2000/svg").attr("xlink","https://www.w3.org/1999/xlink")})()}createOverlayGroup(i,o,h,g){if(!i||!o)return;const E=this.getD3SelectionById(i,o);return E.append("g").attr("class",`${g}-overlay-group`),E.select(`g.${g}-overlay-group`).append("rect").attr("width",h.width+2*this._overlayBoxAdditionalSpace).attr("height",h.height+2*this._overlayBoxAdditionalSpace).attr("x",h.x-this._overlayBoxAdditionalSpace).attr("y",h.y-this._overlayBoxAdditionalSpace).attr("rx",this._overlayBoxCornerRadius).attr("fill",this.overlayFillColor).attr("opacity",this._overlayBoxesOpacity).attr("class",`${g}-overlay-group-box`)}fillD3SelectionWithColor(i,o){!i||!o||i.attr("fill",o)}getContainerDimensions(i){if(!i)return{width:void 0,height:void 0};return{width:i.nativeElement.clientWidth,height:i.nativeElement.clientHeight}}getD3SelectionById(i,o){if(i&&o)return i.select("#"+o)}getGroupsBySelector(i,o){if(i)return i.selectAll("g."+o)}getOverlayGroupRectSelection(i,o,h){return i&&o&&h?this.getD3SelectionById(i,o).select(`rect.${h}-overlay-group-box`):void 0}_fetchSvgFile(i){return Q(i)}_getViewBox(i){const h=X.Z(i).attr("viewBox").split(" "),g=+h[2],E=+h[3];return new x.HA(g,E)}};q=(0,d.gn)([(0,u.GSi)({providedIn:"root"})],q);var K=n(4707);let tt=class{constructor(){this._bufferSize=1,this._editionComplexSubject=new K.t(this._bufferSize),this._editionComplexStream$=this._editionComplexSubject.asObservable(),this._isRowTableViewSubject=new K.t(this._bufferSize),this._isRowTableViewStream$=this._isRowTableViewSubject.asObservable(),this._selectedEditionSeriesSubject=new K.t(this._bufferSize),this._selectedEditionSeriesStream$=this._selectedEditionSeriesSubject.asObservable(),this._selectedEditionSectionSubject=new K.t(this._bufferSize),this._selectedEditionSectionStream$=this._selectedEditionSectionSubject.asObservable()}getEditionComplex(){return this._editionComplexStream$}updateEditionComplex(i){this._editionComplexSubject.next(i)}clearEditionComplex(){this._editionComplexSubject.next(null)}getEditionOutline(){return y.i2}getEditionSeriesRoute(){return P.LL.EDITION.route+P.LL.SERIES.route}getEditionSeriesById(i){return y.i2.find(o=>o.series.route===i)}getEditionSectionById(i,o){return this.getEditionSeriesById(i).sections.find(g=>g.section.route===o)}getSelectedEditionSeries(){return this._selectedEditionSeriesStream$}updateSelectedEditionSeries(i){this._selectedEditionSeriesSubject.next(i)}clearSelectedEditionSeries(){this._selectedEditionSeriesSubject.next(null)}getSelectedEditionSection(){return this._selectedEditionSectionStream$}updateSelectedEditionSection(i){this._selectedEditionSectionSubject.next(i)}clearSelectedEditionSection(){this._selectedEditionSectionSubject.next(null)}getIsRowTableView(){return this._isRowTableViewStream$}updateIsRowTableView(i){this._isRowTableViewSubject.next(i)}clearIsRowTableView(){this._isRowTableViewSubject.next(null)}};tt=(0,d.gn)([(0,u.GSi)({providedIn:"root"})],tt)},1836:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},1809:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},816:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},7149:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},2087:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},6641:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},8483:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},6608:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},4603:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},8094:(m,v,n)=>{var d=n(135),u=n(479)(d);u.push([m.id,"",""]),m.exports=u.toString()},1280:(m,v,n)=>{"use strict";function d(l){return null==l?[]:Array.isArray(l)?l:Array.from(l)}n.d(v,{Z:()=>d})},318:(m,v,n)=>{"use strict";function d(u){return function(){return this.matches(u)}}function l(u){return function(C){return C.matches(u)}}n.d(v,{P:()=>l,Z:()=>d})},6022:(m,v,n)=>{"use strict";n.d(v,{Z:()=>l});var d=n(3001);function l(u){var C=u+="",b=C.indexOf(":");return b>=0&&"xmlns"!==(C=u.slice(0,b))&&(u=u.slice(b+1)),d.Z.hasOwnProperty(C)?{space:d.Z[C],local:u}:u}},3001:(m,v,n)=>{"use strict";n.d(v,{P:()=>d,Z:()=>l});var d="http://www.w3.org/1999/xhtml";const l={svg:"http://www.w3.org/2000/svg",xhtml:d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},711:(m,v,n)=>{"use strict";n.d(v,{Z:()=>l});var d=n(2232);function l(u){return"string"==typeof u?new d.Y1([[document.querySelector(u)]],[document.documentElement]):new d.Y1([[u]],d.Jz)}},2232:(m,v,n)=>{"use strict";n.d(v,{Y1:()=>F,ZP:()=>_e,Jz:()=>Ut});var d=n(9360);var u=n(1280),C=n(3554);var I=n(318),w=Array.prototype.find;function P(){return this.firstElementChild}var M=Array.prototype.filter;function W(){return Array.from(this.children)}function et(t){return new Array(t.length)}function J(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Q(t,e,r,a,s,c){for(var p,f=0,_=e.length,S=c.length;f<S;++f)(p=e[f])?(p.__data__=c[f],a[f]=p):r[f]=new J(t,c[f]);for(;f<_;++f)(p=e[f])&&(s[f]=p)}function X(t,e,r,a,s,c,f){var p,_,$,S=new Map,R=e.length,V=c.length,Z=new Array(R);for(p=0;p<R;++p)(_=e[p])&&(Z[p]=$=f.call(_,_.__data__,p,e)+"",S.has($)?s[p]=_:S.set($,_));for(p=0;p<V;++p)$=f.call(t,c[p],p,c)+"",(_=S.get($))?(a[p]=_,_.__data__=c[p],S.delete($)):r[p]=new J(t,c[p]);for(p=0;p<R;++p)(_=e[p])&&S.get(Z[p])===_&&(s[p]=_)}function q(t){return t.__data__}function tt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function E(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}J.prototype={constructor:J,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var vt=n(6022);function It(t){return function(){this.removeAttribute(t)}}function Rt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dt(t,e){return function(){this.setAttribute(t,e)}}function ot(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ct(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}function wt(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}var ut=n(663);function ht(t){return function(){delete this[t]}}function At(t,e){return function(){this[t]=e}}function Dt(t,e){return function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}}function st(t){return t.trim().split(/^|\s+/)}function Y(t){return t.classList||new Et(t)}function Et(t){this._node=t,this._names=st(t.getAttribute("class")||"")}function xt(t,e){for(var r=Y(t),a=-1,s=e.length;++a<s;)r.add(e[a])}function rt(t,e){for(var r=Y(t),a=-1,s=e.length;++a<s;)r.remove(e[a])}function Pt(t){return function(){xt(this,t)}}function Lt(t){return function(){rt(this,t)}}function bt(t,e){return function(){(e.apply(this,arguments)?xt:rt)(this,t)}}function ft(){this.textContent=""}function Mt(t){return function(){this.textContent=t}}function Nt(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _t(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function mt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function A(){this.nextSibling&&this.parentNode.appendChild(this)}function G(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Et.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ft=n(3001);function Ht(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ft.P&&e.documentElement.namespaceURI===Ft.P?e.createElement(t):e.createElementNS(r,t)}}function Jt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $t(t){var e=(0,vt.Z)(t);return(e.local?Jt:Ht)(e)}function Yt(){return null}function Qt(){var t=this.parentNode;t&&t.removeChild(this)}function te(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ee(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function re(t){return function(){var e=this.__on;if(e){for(var c,r=0,a=-1,s=e.length;r<s;++r)c=e[r],t.type&&c.type!==t.type||c.name!==t.name?e[++a]=c:this.removeEventListener(c.type,c.listener,c.options);++a?e.length=a:delete this.__on}}}function ae(t,e,r){return function(){var s,a=this.__on,c=function oe(t){return function(e){t.call(this,e,this.__data__)}}(e);if(a)for(var f=0,p=a.length;f<p;++f)if((s=a[f]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=r),void(s.value=e);this.addEventListener(t.type,c,r),s={type:t.type,name:t.name,value:e,listener:c,options:r},a?a.push(s):this.__on=[s]}}var ce=n(7104);function Vt(t,e,r){var a=(0,ce.Z)(t),s=a.CustomEvent;"function"==typeof s?s=new s(e,r):(s=a.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function de(t,e){return function(){return Vt(this,t,e)}}function ue(t,e){return function(){return Vt(this,t,e.apply(this,arguments))}}var Ut=[null];function F(t,e){this._groups=t,this._parents=e}function Zt(){return new F([[document.documentElement]],Ut)}F.prototype=Zt.prototype={constructor:F,select:function l(t){"function"!=typeof t&&(t=(0,d.Z)(t));for(var e=this._groups,r=e.length,a=new Array(r),s=0;s<r;++s)for(var _,S,c=e[s],f=c.length,p=a[s]=new Array(f),R=0;R<f;++R)(_=c[R])&&(S=t.call(_,_.__data__,R,c))&&("__data__"in _&&(S.__data__=_.__data__),p[R]=S);return new F(a,this._parents)},selectAll:function L(t){t="function"==typeof t?function b(t){return function(){return(0,u.Z)(t.apply(this,arguments))}}(t):(0,C.Z)(t);for(var e=this._groups,r=e.length,a=[],s=[],c=0;c<r;++c)for(var _,f=e[c],p=f.length,S=0;S<p;++S)(_=f[S])&&(a.push(t.call(_,_.__data__,S,f)),s.push(_));return new F(a,s)},selectChild:function x(t){return this.select(null==t?P:function y(t){return function(){return w.call(this.children,t)}}("function"==typeof t?t:(0,I.P)(t)))},selectChildren:function at(t){return this.selectAll(null==t?W:function U(t){return function(){return M.call(this.children,t)}}("function"==typeof t?t:(0,I.P)(t)))},filter:function lt(t){"function"!=typeof t&&(t=(0,I.Z)(t));for(var e=this._groups,r=e.length,a=new Array(r),s=0;s<r;++s)for(var _,c=e[s],f=c.length,p=a[s]=[],S=0;S<f;++S)(_=c[S])&&t.call(_,_.__data__,S,c)&&p.push(_);return new F(a,this._parents)},data:function K(t,e){if(!arguments.length)return Array.from(this,q);var r=e?X:Q,a=this._parents,s=this._groups;"function"!=typeof t&&(t=function k(t){return function(){return t}}(t));for(var c=s.length,f=new Array(c),p=new Array(c),_=new Array(c),S=0;S<c;++S){var R=a[S],V=s[S],Z=V.length,$=tt(t.call(R,R&&R.__data__,S,a)),j=$.length,jt=p[S]=new Array(j),Wt=f[S]=new Array(j);r(R,V,jt,Wt,_[S]=new Array(Z),$,e);for(var Xt,zt,St=0,yt=0;St<j;++St)if(Xt=jt[St]){for(St>=yt&&(yt=St+1);!(zt=Wt[yt])&&++yt<j;);Xt._next=zt||null}}return(f=new F(f,a))._enter=p,f._exit=_,f},enter:function H(){return new F(this._enter||this._groups.map(et),this._parents)},exit:function T(){return new F(this._exit||this._groups.map(et),this._parents)},join:function i(t,e,r){var a=this.enter(),s=this,c=this.exit();return"function"==typeof t?(a=t(a))&&(a=a.selection()):a=a.append(t+""),null!=e&&((s=e(s))&&(s=s.selection())),null==r?c.remove():r(c),a&&s?a.merge(s).order():s},merge:function o(t){for(var e=t.selection?t.selection():t,r=this._groups,a=e._groups,s=r.length,c=a.length,f=Math.min(s,c),p=new Array(s),_=0;_<f;++_)for(var $,S=r[_],R=a[_],V=S.length,Z=p[_]=new Array(V),j=0;j<V;++j)($=S[j]||R[j])&&(Z[j]=$);for(;_<s;++_)p[_]=r[_];return new F(p,this._parents)},selection:function fe(){return this},order:function h(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var f,a=t[e],s=a.length-1,c=a[s];--s>=0;)(f=a[s])&&(c&&4^f.compareDocumentPosition(c)&&c.parentNode.insertBefore(f,c),c=f);return this},sort:function g(t){function e(V,Z){return V&&Z?t(V.__data__,Z.__data__):!V-!Z}t||(t=E);for(var r=this._groups,a=r.length,s=new Array(a),c=0;c<a;++c){for(var S,f=r[c],p=f.length,_=s[c]=new Array(p),R=0;R<p;++R)(S=f[R])&&(_[R]=S);_.sort(e)}return new F(s,this._parents).order()},call:function O(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function B(){return Array.from(this)},node:function z(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],s=0,c=a.length;s<c;++s){var f=a[s];if(f)return f}return null},size:function nt(){let t=0;for(const e of this)++t;return t},empty:function ct(){return!this.node()},each:function it(t){for(var e=this._groups,r=0,a=e.length;r<a;++r)for(var p,s=e[r],c=0,f=s.length;c<f;++c)(p=s[c])&&t.call(p,p.__data__,c,s);return this},attr:function Ot(t,e){var r=(0,vt.Z)(t);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((null==e?r.local?Rt:It:"function"==typeof e?r.local?wt:Ct:r.local?ot:dt)(r,e))},style:ut.Z,property:function Tt(t,e){return arguments.length>1?this.each((null==e?ht:"function"==typeof e?Dt:At)(t,e)):this.node()[t]},classed:function pt(t,e){var r=st(t+"");if(arguments.length<2){for(var a=Y(this.node()),s=-1,c=r.length;++s<c;)if(!a.contains(r[s]))return!1;return!0}return this.each(("function"==typeof e?bt:e?Pt:Lt)(r,e))},text:function Bt(t){return arguments.length?this.each(null==t?ft:("function"==typeof t?Nt:Mt)(t)):this.node().textContent},html:function D(t){return arguments.length?this.each(null==t?_t:("function"==typeof t?mt:gt)(t)):this.node().innerHTML},raise:function N(){return this.each(A)},lower:function Gt(){return this.each(G)},append:function Kt(t){var e="function"==typeof t?t:$t(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function kt(t,e){var r="function"==typeof t?t:$t(t),a=null==e?Yt:"function"==typeof e?e:(0,d.Z)(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function qt(){return this.each(Qt)},clone:function ne(t){return this.select(t?ee:te)},datum:function ie(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function le(t,e,r){var s,f,a=function se(t){return t.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");return a>=0&&(r=e.slice(a+1),e=e.slice(0,a)),{type:e,name:r}})}(t+""),c=a.length;if(!(arguments.length<2)){for(p=e?ae:re,s=0;s<c;++s)this.each(p(a[s],e,r));return this}var p=this.node().__on;if(p)for(var R,_=0,S=p.length;_<S;++_)for(s=0,R=p[_];s<c;++s)if((f=a[s]).type===R.type&&f.name===R.name)return R.value},dispatch:function he(t,e){return this.each(("function"==typeof e?ue:de)(t,e))},[Symbol.iterator]:function*pe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var f,a=t[e],s=0,c=a.length;s<c;++s)(f=a[s])&&(yield f)}};const _e=Zt},663:(m,v,n)=>{"use strict";n.d(v,{S:()=>L,Z:()=>b});var d=n(7104);function l(I){return function(){this.style.removeProperty(I)}}function u(I,w,y){return function(){this.style.setProperty(I,w,y)}}function C(I,w,y){return function(){var P=w.apply(this,arguments);null==P?this.style.removeProperty(I):this.style.setProperty(I,P,y)}}function b(I,w,y){return arguments.length>1?this.each((null==w?l:"function"==typeof w?C:u)(I,w,y??"")):L(this.node(),I)}function L(I,w){return I.style.getPropertyValue(w)||(0,d.Z)(I).getComputedStyle(I,null).getPropertyValue(w)}},9360:(m,v,n)=>{"use strict";function d(){}function l(u){return null==u?d:function(){return this.querySelector(u)}}n.d(v,{Z:()=>l})},3554:(m,v,n)=>{"use strict";function d(){return[]}function l(u){return null==u?d:function(){return this.querySelectorAll(u)}}n.d(v,{Z:()=>l})},7104:(m,v,n)=>{"use strict";function d(l){return l.ownerDocument&&l.ownerDocument.defaultView||l.document&&l||l.defaultView}n.d(v,{Z:()=>d})},5861:(m,v,n)=>{"use strict";function d(u,C,b,L,I,w,y){try{var P=u[w](y),x=P.value}catch(M){return void b(M)}P.done?C(x):Promise.resolve(x).then(L,I)}function l(u){return function(){var C=this,b=arguments;return new Promise(function(L,I){var w=u.apply(C,b);function y(x){d(w,L,I,y,P,"next",x)}function P(x){d(w,L,I,y,P,"throw",x)}y(void 0)})}}n.d(v,{Z:()=>l})}}]);