function dateConverter(G){const X=1721425.5,Q=["So","Mo","Di","Mi","Do","Fr","Sa"],s={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function w(d,a){return d-a*Math.floor(d/a)}function e(d){return(d=parseInt(d))%4==0&&!(d%100==0&&d%400!=0)}function r(d,a,v){return X-1+365*(d-1)+Math.floor((d-1)/4)+-Math.floor((d-1)/100)+Math.floor((d-1)/400)+Math.floor((367*a-362)/12+(a<=2?0:e(d)?-1:-2)+v)}function u(d,a){d=parseInt(d);const v={};let E;switch(a){case"GREGORIAN":case"gregorian":E=function o(d){let a,v,E,F,B,N,A,k,j,D,q,P,W,Y;return a=Math.floor(d-.5)+.5,v=a-X,E=Math.floor(v/146097),F=w(v,146097),B=Math.floor(F/36524),N=w(F,36524),A=Math.floor(N/1461),k=w(N,1461),j=Math.floor(k/365),D=400*E+100*B+4*A+j,4==B||4==j||D++,q=a-r(D,1,1),P=a<r(D,3,1)?0:e(D)?1:2,W=Math.floor((12*(q+P)+373)/367),Y=a-r(D,W,1)+1,D<=0&&D--,new Array(D,W,Y)}(d);break;case"JULIAN":case"julian":E=S.jd_to_julian(d);break;case"JEWISH":case"jewish":E=S.jd_to_hebrew(d);break;case"FRENCH":case"french":E=S.jd_to_french_revolutionary(d)}return v.year=E[0],v.month=E[1],v.day=E[2],v.weekday=function c(d){return d=Number(d),w(Math.floor(d+1.5),7)}(d),v}const f=u(G.dateval1,G.calendar),l=u(G.dateval2,G.calendar);let m="";if(G.dateprecision1==G.dateprecision2)switch(G.dateprecision1){case"DAY":m=f.year===l.year&&f.month===l.month&&f.day===l.day?"["+Q[f.weekday]+"] "+f.day+". "+s[G.calendar][f.month]+" "+f.year:"["+Q[f.weekday]+"] "+f.day+". "+s[G.calendar][f.month]+" "+f.year+" \u2013 ["+Q[l.weekday]+"] "+l.day+". "+s[G.calendar][l.month]+" "+l.year;break;case"MONTH":m=f.year===l.year&&f.month===l.month?s[G.calendar][f.month]+" "+f.year:s[G.calendar][f.month]+" "+f.year+" \u2013 "+s[G.calendar][l.month]+" "+l.year;break;case"YEAR":m=f.year===l.year?f.year:f.year+"\u2013"+l.year}else{switch(G.dateprecision1){case"DAY":m="["+Q[f.weekday]+"] "+f.day+". "+s[G.calendar][f.month]+" "+f.year;break;case"MONTH":m=s[G.calendar][f.month]+" "+f.year;break;case"YEAR":m=f.year}switch(m+=" \u2013 ",G.dateprecision2){case"DAY":m+="["+Q[l.weekday]+"] "+l.day+". "+s[G.calendar][l.month]+" "+l.year;break;case"MONTH":m+=s[G.calendar][l.month]+" "+l.year;break;case"YEAR":m+=l.year}}return m+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[G.calendar].short+")",m}function htmlConverter(G,X){let Q,s,w,c,e,r,o,u,f,l,Z="";const m={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},d={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},a={};for(let E in d.settings.matching)a[d.settings.matching[E]]=E;const v=Object.keys(G);v.sort(function(E,F){return m[a[E]]-m[a[F]]}),Q=[];for(let E in v)for(o in r=v[E],G[r])w=G[r][o].start,void 0===Q[w]&&(Q[w]=[]),Q[w].push({propname:r,proptype:"start"}),"_link"==Q[w][Q[w].length-1].propname?(Q[w][Q[w].length-1].href=G[r][o].href,void 0!==G[r][o].resid&&(Q[w][Q[w].length-1].resid=G[r][o].resid)):"style"==Q[w][Q[w].length-1].propname&&(Q[w][Q[w].length-1].css=G[r][o].css),w=G[r][o].end,void 0===Q[w]&&(Q[w]=[]),Q[w].push({propname:r,proptype:"end"});for(s=[],u=0;u<=X.length;u++){if(void 0!==Q[u]){for(e=[],l=[],f=Q[u].length-1;f>=0;f--)if("end"==Q[u][f].proptype&&"linebreak"!=Q[u][f].propname){for(;void 0!==(c=s.pop())&&(Z+="</"+a[c]+">",c!=Q[u][f].propname);)e.push(c);for(;void 0!==(c=e.pop());)s.push(c),Z+="<"+a[c]+">"}for(f in Q[u])if("start"==Q[u][f].proptype)if("linebreak"==Q[u][f].propname)Z+="<br/>";else if("_link"==Q[u][f].propname){s.push(Q[u][f].propname);let E=Q[u][f].href;void 0===E&&void 0!==Q[u][f].resid&&(E="https://www.salsah.org/api/resources/"+Q[u][f].resid),Z+="<"+a[Q[u][f].propname]+' href="'+E,void 0!==Q[u][f].resid?Z+='" class="salsah-link">':Z+='">'}else"style"==Q[u][f].propname?(s.push(Q[u][f].propname),Z+="<"+a[Q[u][f].propname]+' style="'+Q[u][f].css+'">'):(s.push(Q[u][f].propname),Z+="<"+a[Q[u][f].propname]+">")}u<X.length&&(Z+=X.charAt(u))}return Z=Z.replace(/\n/g,"<br/>"),Z=Z.replace(/\r/g,""),Z}(function(G){var X,Z,Q="0.5.0",s="hasOwnProperty",w=/[\.\/]/,c=/\s*,\s*/,r=function(a,v){return a-v},o={n:{}},u=function(){for(var a=0,v=this.length;v>a;a++)if(typeof this[a]<"u")return this[a]},f=function(){for(var a=this.length;--a;)if(typeof this[a]<"u")return this[a]},l=Object.prototype.toString,m=String,d=Array.isArray||function(a){return a instanceof Array||"[object Array]"==l.call(a)};eve=function(a,v){var E,F=Z,B=Array.prototype.slice.call(arguments,2),N=eve.listeners(a),A=0,k=[],j={},D=[],q=X;D.firstDefined=u,D.lastDefined=f,X=a,Z=0;for(var P=0,W=N.length;W>P;P++)"zIndex"in N[P]&&(k.push(N[P].zIndex),N[P].zIndex<0&&(j[N[P].zIndex]=N[P]));for(k.sort(r);k[A]<0;)if(E=j[k[A++]],D.push(E.apply(v,B)),Z)return Z=F,D;for(P=0;W>P;P++)if("zIndex"in(E=N[P]))if(E.zIndex==k[A]){if(D.push(E.apply(v,B)),Z)break;do{if((E=j[k[++A]])&&D.push(E.apply(v,B)),Z)break}while(E)}else j[E.zIndex]=E;else if(D.push(E.apply(v,B)),Z)break;return Z=F,X=q,D},eve._events=o,eve.listeners=function(a){var v,E,F,B,N,A,k,j,D=d(a)?a:a.split(w),q=o,P=[q],W=[];for(B=0,N=D.length;N>B;B++){for(j=[],A=0,k=P.length;k>A;A++)for(E=[(q=P[A].n)[D[B]],q["*"]],F=2;F--;)(v=E[F])&&(j.push(v),W=W.concat(v.f||[]));P=j}return W},eve.separator=function(a){a?(a="["+(a=m(a).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",w=new RegExp(a)):w=/[\.\/]/},eve.on=function(a,v){if("function"!=typeof v)return function(){};for(var E=d(a)?d(a[0])?a:[a]:m(a).split(c),F=0,B=E.length;B>F;F++)!function(N){for(var A,k=d(N)?N:m(N).split(w),j=o,D=0,q=k.length;q>D;D++)j=(j=j.n).hasOwnProperty(k[D])&&j[k[D]]||(j[k[D]]={n:{}});for(j.f=j.f||[],D=0,q=j.f.length;q>D;D++)if(j.f[D]==v){A=!0;break}!A&&j.f.push(v)}(E[F]);return function(N){+N==+N&&(v.zIndex=+N)}},eve.f=function(a){var v=[].slice.call(arguments,1);return function(){eve.apply(null,[a,null].concat(v).concat([].slice.call(arguments,0)))}},eve.stop=function(){Z=1},eve.nt=function(a){var v=d(X)?X.join("."):X;return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(v):v},eve.nts=function(){return d(X)?X:X.split(w)},eve.off=eve.unbind=function(a,v){if(a){var E=d(a)?d(a[0])?a:[a]:m(a).split(c);if(E.length>1)for(var F=0,B=E.length;B>F;F++)eve.off(E[F],v);else{E=d(a)?a:m(a).split(w);var N,A,k,j,D,q=[o],P=[];for(F=0,B=E.length;B>F;F++)for(j=0;j<q.length;j+=k.length-2){if(k=[j,1],N=q[j].n,"*"!=E[F])N[E[F]]&&(k.push(N[E[F]]),P.unshift({n:N,name:E[F]}));else for(A in N)N[s](A)&&(k.push(N[A]),P.unshift({n:N,name:A}));q.splice.apply(q,k)}for(F=0,B=q.length;B>F;F++)for(N=q[F];N.n;){if(v){if(N.f){for(j=0,D=N.f.length;D>j;j++)if(N.f[j]==v){N.f.splice(j,1);break}!N.f.length&&delete N.f}for(A in N.n)if(N.n[s](A)&&N.n[A].f){var W=N.n[A].f;for(j=0,D=W.length;D>j;j++)if(W[j]==v){W.splice(j,1);break}!W.length&&delete N.n[A].f}}else for(A in delete N.f,N.n)N.n[s](A)&&N.n[A].f&&delete N.n[A].f;N=N.n}e:for(F=0,B=P.length;B>F;F++){for(A in(N=P[F]).n[N.name].f)continue e;for(A in N.n[N.name].n)continue e;delete N.n[N.name]}}}else eve._events=o={n:{}}},eve.once=function(a,v){var E=function(){return eve.off(a,E),v.apply(this,arguments)};return eve.on(a,E)},eve.version=Q,eve.toString=function(){return"You are running Eve "+Q},typeof module<"u"&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):G.eve=eve})(this),function(G,X){if("function"==typeof define&&define.amd)define(["eve"],function(Q){return X(G,Q)});else if(typeof exports<"u"){var Z=require("eve");module.exports=X(G,Z)}else X(G,G.eve)}(window||this,function(G,X){var s,w,c,e,r,o,u,l,m,d,a,v,E,F,B,N,A,Z=(s=typeof X>"u"?function(){}:X,c={},e=G.requestAnimationFrame||G.webkitRequestAnimationFrame||G.mozRequestAnimationFrame||G.oRequestAnimationFrame||G.msRequestAnimationFrame||function(k){return setTimeout(k,16,(new Date).getTime()),!0},r=Array.isArray||function(k){return k instanceof Array||"[object Array]"==Object.prototype.toString.call(k)},o=0,u="M"+(+new Date).toString(36),l=Date.now||function(){return+new Date},m=function(k){var j=this;if(null==k)return j.s;var D=j.s-k;j.b+=j.dur*D,j.B+=j.dur*D,j.s=k},d=function(k){return null==k?this.spd:void(this.spd=k)},a=function(k){var j=this;return null==k?j.dur:(j.s=j.s*k/j.dur,void(j.dur=k))},v=function(){var k=this;delete c[k.id],k.update(),s("mina.stop."+k.id,k)},E=function(){var k=this;k.pdif||(delete c[k.id],k.update(),k.pdif=k.get()-k.b)},F=function(){var k=this;k.pdif&&(k.b=k.get()-k.pdif,delete k.pdif,c[k.id]=k,N())},B=function(){var k,j=this;if(r(j.start)){k=[];for(var D=0,q=j.start.length;q>D;D++)k[D]=+j.start[D]+(j.end[D]-j.start[D])*j.easing(j.s)}else k=+j.start+(j.end-j.start)*j.easing(j.s);j.set(k)},N=function(k){if(k){var j=0;for(var D in c)if(c.hasOwnProperty(D)){var q=c[D],P=q.get();j++,q.s=(P-q.b)/(q.dur/q.spd),q.s>=1&&(delete c[D],q.s=1,j--,function(W){setTimeout(function(){s("mina.finish."+W.id,W)})}(q)),q.update()}w=!!j&&e(N)}else w||(w=e(N))},(A=function(k,j,D,q,P,W,Y){var ne={id:u+(o++).toString(36),start:k,end:j,b:D,s:0,dur:q-D,spd:1,get:P,set:W,easing:Y||A.linear,status:m,speed:d,duration:a,stop:v,pause:E,resume:F,update:B};c[ne.id]=ne;var ce,$=0;for(ce in c)if(c.hasOwnProperty(ce)&&2==++$)break;return 1==$&&N(),ne}).time=l,A.getById=function(k){return c[k]||null},A.linear=function(k){return k},A.easeout=function(k){return Math.pow(k,1.7)},A.easein=function(k){return Math.pow(k,.48)},A.easeinout=function(k){if(1==k)return 1;if(0==k)return 0;var j=.48-k/1.04,D=Math.sqrt(.1734+j*j),q=D-j,W=-D-j,ne=Math.pow(Math.abs(q),1/3)*(0>q?-1:1)+Math.pow(Math.abs(W),1/3)*(0>W?-1:1)+.5;return 3*(1-ne)*ne*ne+ne*ne*ne},A.backin=function(k){if(1==k)return 1;var j=1.70158;return k*k*((j+1)*k-j)},A.backout=function(k){if(0==k)return 0;var j=1.70158;return(k-=1)*k*((j+1)*k+j)+1},A.elastic=function(k){return k==!!k?k:Math.pow(2,-10*k)*Math.sin((k-.075)*(2*Math.PI)/.3)+1},A.bounce=function(k){var D=7.5625,q=2.75;return 1/q>k?D*k*k:2/q>k?D*(k-=1.5/q)*k+.75:2.5/q>k?D*(k-=2.25/q)*k+.9375:D*(k-=2.625/q)*k+.984375},G.mina=A,A),Q=function(s){function w(U,z){if(U){if(U.nodeType)return D(U);if(e(U,"array")&&w.set)return w.set.apply(w,U);if(U instanceof N)return U;if(null==z)return D(U=P.doc.querySelector(String(U)))}return new j(U=U??"100%",z=z??"100%")}function c(U,z){if(z){if("#text"==U&&(U=P.doc.createTextNode(z.text||z["#text"]||"")),"#comment"==U&&(U=P.doc.createComment(z.text||z["#text"]||"")),"string"==typeof U&&(U=c(U)),"string"==typeof z)return 1==U.nodeType?"xlink:"==z.substring(0,6)?U.getAttributeNS(ve,z.substring(6)):"xml:"==z.substring(0,4)?U.getAttributeNS(ae,z.substring(4)):U.getAttribute(z):"text"==z?U.nodeValue:null;if(1==U.nodeType){for(var te in z)if(z[W](te)){var ue=Y(z[te]);ue?"xlink:"==te.substring(0,6)?U.setAttributeNS(ve,te.substring(6),ue):"xml:"==te.substring(0,4)?U.setAttributeNS(ae,te.substring(4),ue):U.setAttribute(te,ue):U.removeAttribute(te)}}else"text"in z&&(U.nodeValue=z.text)}else U=P.doc.createElementNS(ae,U);return U}function e(U,z){return"finite"==(z=Y.prototype.toLowerCase.call(z))?isFinite(U):!("array"!=z||!(U instanceof Array||Array.isArray&&Array.isArray(U)))||("null"==z&&null===U||z==typeof U&&null!==U||"object"==z&&U===Object(U)||be.call(U).slice(8,-1).toLowerCase()==z)}function o(U,z){for(var te=0,ue=U.length;ue>te;te++)if(U[te]===z)return U.push(U.splice(te,1)[0])}function u(U,z,te){return function ue(){var me=Array.prototype.slice.call(arguments,0),he=me.join("\u2400"),fe=ue.cache=ue.cache||{},we=ue.count=ue.count||[];return fe[W](he)?(o(we,he),te?te(fe[he]):fe[he]):(we.length>=1e3&&delete fe[we.shift()],we.push(he),fe[he]=U.apply(z,me),te?te(fe[he]):fe[he])}}function l(U){return U%360*oe/180}function E(U){return U.node.ownerSVGElement&&D(U.node.ownerSVGElement)||w.select("svg")}function B(U){e(U,"array")||(U=Array.prototype.slice.call(arguments,0));for(var z=0,te=0,ue=this.node;this[z];)delete this[z++];for(z=0;z<U.length;z++)"set"==U[z].type?U[z].forEach(function(he){ue.appendChild(he.node)}):ue.appendChild(U[z].node);var me=ue.childNodes;for(z=0;z<me.length;z++)this[te++]=D(me[z]);return this}function N(U){if(U.snap in Ee)return Ee[U.snap];var z;try{z=U.ownerSVGElement}catch{}this.node=U,z&&(this.paper=new j(z)),this.type=U.tagName||U.nodeName;var te=this.id=re(this);if(this.anims={},this._={transform:[]},U.snap=te,Ee[te]=this,"g"==this.type&&(this.add=B),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var ue in j.prototype)j.prototype[W](ue)&&(this[ue]=j.prototype[ue])}function A(U){this.node=U}function k(U,z){var te=c(U);return z.appendChild(te),D(te)}function j(U,z){var te,ue,me,he=j.prototype;if(U&&U.tagName&&"svg"==U.tagName.toLowerCase()){if(U.snap in Ee)return Ee[U.snap];var fe=U.ownerDocument;for(var we in te=new N(U),ue=U.getElementsByTagName("desc")[0],me=U.getElementsByTagName("defs")[0],ue||((ue=c("desc")).appendChild(fe.createTextNode("Created with Snap")),te.node.appendChild(ue)),me||(me=c("defs"),te.node.appendChild(me)),te.defs=me,he)he[W](we)&&(te[we]=he[we]);te.paper=te.root=te}else c((te=k("svg",P.doc.body)).node,{height:z,version:1.1,width:U,xmlns:ae});return te}function D(U){return U&&(U instanceof N||U instanceof A?U:U.tagName&&"svg"==U.tagName.toLowerCase()?new j(U):U.tagName&&"object"==U.tagName.toLowerCase()&&"image/svg+xml"==U.type?new j(U.contentDocument.getElementsByTagName("svg")[0]):new N(U))}function q(U,z){for(var te=0,ue=U.length;ue>te;te++){var me={type:U[te].type,attr:U[te].attr()},he=U[te].children();z.push(me),he.length&&q(he,me.childNodes=[])}}w.version="0.5.1",w.toString=function(){return"Snap v"+this.version},w._={};var P={win:s.window,doc:s.window.document};w._.glob=P;var U,z,W="hasOwnProperty",Y=String,ne=parseFloat,ce=parseInt,$=Math,ee=$.max,J=$.min,ie=$.abs,oe=($.pow,$.PI),ye=($.round,""),be=Object.prototype.toString,de=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,le=(w._.separator=/[,\s]+/,/[\s]*,[\s]*/),Ce={hs:1,rg:1},Ie=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Oe=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,R=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,I=0,H="S"+(+new Date).toString(36),re=function(U){return(U&&U.type?U.type:ye)+H+(I++).toString(36)},ve="http://www.w3.org/1999/xlink",ae="http://www.w3.org/2000/svg",Ee={};w.url=function(U){return"url('#"+U+"')"},w._.$=c,w._.id=re,w.format=(U=/\{([^\}]+)\}/g,z=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(ue,me){return Y(ue).replace(U,function(he,fe){return function(ue,me,he){var fe=he;return me.replace(z,function(we,Te,Pe,Ue,De){Te=Te||Ue,fe&&(Te in fe&&(fe=fe[Te]),"function"==typeof fe&&De&&(fe=fe()))}),fe=(null==fe||fe==he?ue:fe)+""}(he,fe,me)})}),w._.clone=function r(U){if("function"==typeof U||Object(U)!==U)return U;var z=new U.constructor;for(var te in U)U[W](te)&&(z[te]=r(U[te]));return z},w._.cacher=u,w.rad=l,w.deg=function m(U){return 180*U/oe%360},w.sin=function(U){return $.sin(w.rad(U))},w.tan=function(U){return $.tan(w.rad(U))},w.cos=function(U){return $.cos(w.rad(U))},w.asin=function(U){return w.deg($.asin(U))},w.acos=function(U){return w.deg($.acos(U))},w.atan=function(U){return w.deg($.atan(U))},w.atan2=function(U){return w.deg($.atan2(U))},w.angle=function f(U,z,te,ue,me,he){if(null==me){var fe=U-te,we=z-ue;return fe||we?(180+180*$.atan2(-we,-fe)/oe+360)%360:0}return f(U,z,me,he)-f(te,ue,me,he)},w.len=function(U,z,te,ue){return Math.sqrt(w.len2(U,z,te,ue))},w.len2=function(U,z,te,ue){return(U-te)*(U-te)+(z-ue)*(z-ue)},w.closestPoint=function(U,z,te){function ue(ot){var lt=ot.x-z,tt=ot.y-te;return lt*lt+tt*tt}for(var me,he,fe,we,Te=U.node,Pe=Te.getTotalLength(),Ue=Pe/Te.pathSegList.numberOfItems*.125,De=1/0,ze=0;Pe>=ze;ze+=Ue)(we=ue(fe=Te.getPointAtLength(ze)))<De&&(me=fe,he=ze,De=we);for(Ue*=.5;Ue>.5;){var $e,We,Ke,et,Xe,He;(Ke=he-Ue)>=0&&(Xe=ue($e=Te.getPointAtLength(Ke)))<De?(me=$e,he=Ke,De=Xe):(et=he+Ue)<=Pe&&(He=ue(We=Te.getPointAtLength(et)))<De?(me=We,he=et,De=He):Ue*=.5}return{x:me.x,y:me.y,length:he,distance:Math.sqrt(De)}},w.is=e,w.snapTo=function(U,z,te){if(te=e(te,"finite")?te:10,e(U,"array")){for(var ue=U.length;ue--;)if(ie(U[ue]-z)<=te)return U[ue]}else{var me=z%(U=+U);if(te>me)return z-me;if(me>U-te)return z-me+U}return z},w.getRGB=u(function(U){if(!U||(U=Y(U)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ve};if("none"==U)return{r:-1,g:-1,b:-1,hex:"none",toString:Ve};if(!(Ce[W](U.toLowerCase().substring(0,2))||"#"==U.charAt())&&(U=Fe(U)),!U)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ve};var z,te,ue,me,he,fe,we=U.match(de);return we?(we[2]&&(ue=ce(we[2].substring(5),16),te=ce(we[2].substring(3,5),16),z=ce(we[2].substring(1,3),16)),we[3]&&(ue=ce((he=we[3].charAt(3))+he,16),te=ce((he=we[3].charAt(2))+he,16),z=ce((he=we[3].charAt(1))+he,16)),we[4]&&(fe=we[4].split(le),z=ne(fe[0]),"%"==fe[0].slice(-1)&&(z*=2.55),te=ne(fe[1]),"%"==fe[1].slice(-1)&&(te*=2.55),ue=ne(fe[2]),"%"==fe[2].slice(-1)&&(ue*=2.55),"rgba"==we[1].toLowerCase().slice(0,4)&&(me=ne(fe[3])),fe[3]&&"%"==fe[3].slice(-1)&&(me/=100)),we[5]?(fe=we[5].split(le),z=ne(fe[0]),"%"==fe[0].slice(-1)&&(z/=100),te=ne(fe[1]),"%"==fe[1].slice(-1)&&(te/=100),ue=ne(fe[2]),"%"==fe[2].slice(-1)&&(ue/=100),("deg"==fe[0].slice(-3)||"\xb0"==fe[0].slice(-1))&&(z/=360),"hsba"==we[1].toLowerCase().slice(0,4)&&(me=ne(fe[3])),fe[3]&&"%"==fe[3].slice(-1)&&(me/=100),w.hsb2rgb(z,te,ue,me)):we[6]?(fe=we[6].split(le),z=ne(fe[0]),"%"==fe[0].slice(-1)&&(z/=100),te=ne(fe[1]),"%"==fe[1].slice(-1)&&(te/=100),ue=ne(fe[2]),"%"==fe[2].slice(-1)&&(ue/=100),("deg"==fe[0].slice(-3)||"\xb0"==fe[0].slice(-1))&&(z/=360),"hsla"==we[1].toLowerCase().slice(0,4)&&(me=ne(fe[3])),fe[3]&&"%"==fe[3].slice(-1)&&(me/=100),w.hsl2rgb(z,te,ue,me)):(z=J($.round(z),255),te=J($.round(te),255),ue=J($.round(ue),255),me=J(ee(me,0),1),(we={r:z,g:te,b:ue,toString:Ve}).hex="#"+(16777216|ue|te<<8|z<<16).toString(16).slice(1),we.opacity=e(me,"finite")?me:1,we)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Ve}},w),w.hsb=u(function(U,z,te){return w.hsb2rgb(U,z,te).hex}),w.hsl=u(function(U,z,te){return w.hsl2rgb(U,z,te).hex}),w.rgb=u(function(U,z,te,ue){if(e(ue,"finite")){var me=$.round;return"rgba("+[me(U),me(z),me(te),+ue.toFixed(2)]+")"}return"#"+(16777216|te|z<<8|U<<16).toString(16).slice(1)});var Fe=function(U){var z=P.doc.getElementsByTagName("head")[0]||P.doc.getElementsByTagName("svg")[0],te="rgb(255, 0, 0)";return(Fe=u(function(ue){if("red"==ue.toLowerCase())return te;z.style.color=te,z.style.color=ue;var me=P.doc.defaultView.getComputedStyle(z,ye).getPropertyValue("color");return me==te?null:me}))(U)},Re=function(){return"hsb("+[this.h,this.s,this.b]+")"},Je=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ve=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},it=function(U,z,te){if(null==z&&e(U,"object")&&"r"in U&&"g"in U&&"b"in U&&(te=U.b,z=U.g,U=U.r),null==z&&e(U,string)){var ue=w.getRGB(U);U=ue.r,z=ue.g,te=ue.b}return(U>1||z>1||te>1)&&(U/=255,z/=255,te/=255),[U,z,te]},at=function(U,z,te,ue){var me={r:U=$.round(255*U),g:z=$.round(255*z),b:te=$.round(255*te),opacity:e(ue,"finite")?ue:1,hex:w.rgb(U,z,te),toString:Ve};return e(ue,"finite")&&(me.opacity=ue),me};w.color=function(U){var z;return e(U,"object")&&"h"in U&&"s"in U&&"b"in U?(z=w.hsb2rgb(U),U.r=z.r,U.g=z.g,U.b=z.b,U.opacity=1,U.hex=z.hex):e(U,"object")&&"h"in U&&"s"in U&&"l"in U?(z=w.hsl2rgb(U),U.r=z.r,U.g=z.g,U.b=z.b,U.opacity=1,U.hex=z.hex):(e(U,"string")&&(U=w.getRGB(U)),e(U,"object")&&"r"in U&&"g"in U&&"b"in U&&!("error"in U)?(z=w.rgb2hsl(U),U.h=z.h,U.s=z.s,U.l=z.l,z=w.rgb2hsb(U),U.v=z.b):((U={hex:"none"}).r=U.g=U.b=U.h=U.s=U.v=U.l=-1,U.error=1)),U.toString=Ve,U},w.hsb2rgb=function(U,z,te,ue){var me,he,fe,we,Te;return e(U,"object")&&"h"in U&&"s"in U&&"b"in U&&(te=U.b,z=U.s,ue=U.o,U=U.h),me=he=fe=te-(Te=te*z),me+=[Te,we=Te*(1-ie((U=(U*=360)%360/60)%2-1)),0,0,we,Te][U=~~U],he+=[we,Te,Te,we,0,0][U],fe+=[0,0,we,Te,Te,we][U],at(me,he,fe,ue)},w.hsl2rgb=function(U,z,te,ue){var me,he,fe,we,Te;return e(U,"object")&&"h"in U&&"s"in U&&"l"in U&&(te=U.l,z=U.s,U=U.h),(U>1||z>1||te>1)&&(U/=360,z/=100,te/=100),me=he=fe=te-(Te=2*z*(.5>te?te:1-te))/2,me+=[Te,we=Te*(1-ie((U=(U*=360)%360/60)%2-1)),0,0,we,Te][U=~~U],he+=[we,Te,Te,we,0,0][U],fe+=[0,0,we,Te,Te,we][U],at(me,he,fe,ue)},w.rgb2hsb=function(U,z,te){var he,fe;return U=(te=it(U,z,te))[0],z=te[1],te=te[2],{h:((0==(fe=(he=ee(U,z,te))-J(U,z,te))?null:he==U?(z-te)/fe:he==z?(te-U)/fe+2:(U-z)/fe+4)+360)%6*60/360,s:0==fe?0:fe/he,b:he,toString:Re}},w.rgb2hsl=function(U,z,te){var he,fe,we,Te;return U=(te=it(U,z,te))[0],z=te[1],te=te[2],he=((fe=ee(U,z,te))+(we=J(U,z,te)))/2,{h:((0==(Te=fe-we)?null:fe==U?(z-te)/Te:fe==z?(te-U)/Te+2:(U-z)/Te+4)+360)%6*60/360,s:0==Te?0:.5>he?Te/(2*he):Te/(2-2*he),l:he,toString:Je}},w.parsePathString=function(U){if(!U)return null;var z=w.path(U);if(z.arr)return w.path.clone(z.arr);var te={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ue=[];return e(U,"array")&&e(U[0],"array")&&(ue=w.path.clone(U)),ue.length||Y(U).replace(Ie,function(me,he,fe){var we=[],Te=he.toLowerCase();if(fe.replace(R,function(Pe,Ue){Ue&&we.push(+Ue)}),"m"==Te&&we.length>2&&(ue.push([he].concat(we.splice(0,2))),Te="l",he="m"==he?"l":"L"),"o"==Te&&1==we.length&&ue.push([he,we[0]]),"r"==Te)ue.push([he].concat(we));else for(;we.length>=te[Te]&&(ue.push([he].concat(we.splice(0,te[Te]))),te[Te]););}),ue.toString=w.path.toString,z.arr=w.path.clone(ue),ue};var ge=w.parseTransformString=function(U){if(!U)return null;var z=[];return e(U,"array")&&e(U[0],"array")&&(z=w.path.clone(U)),z.length||Y(U).replace(Oe,function(te,ue,me){var he=[];ue.toLowerCase(),me.replace(R,function(fe,we){we&&he.push(+we)}),z.push([ue].concat(he))}),z.toString=w.path.toString,z};w._.svgTransform2string=function d(U){var z=[];return U=U.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(te,ue,me){return me=me.split(/\s*,\s*|\s+/),"rotate"==ue&&1==me.length&&me.push(0,0),"scale"==ue&&(me.length>2?me=me.slice(0,2):2==me.length&&me.push(0,0),1==me.length&&me.push(me[0],0,0)),"skewX"==ue?z.push(["m",1,0,$.tan(l(me[0])),1,0,0]):"skewY"==ue?z.push(["m",1,$.tan(l(me[0])),0,1,0,0]):z.push([ue.charAt(0)].concat(me)),te}),z},w._.rgTransform=/^[a-z][\s]*-?\.?\d/i,w._.transform2matrix=function a(U,z){var te=ge(U),ue=new w.Matrix;if(te)for(var me=0,he=te.length;he>me;me++){var fe,we,Te,Pe,Ue,De=te[me],ze=De.length,$e=Y(De[0]).toLowerCase(),We=De[0]!=$e,Ke=We?ue.invert():0;"t"==$e&&2==ze?ue.translate(De[1],0):"t"==$e&&3==ze?We?(fe=Ke.x(0,0),we=Ke.y(0,0),Te=Ke.x(De[1],De[2]),Pe=Ke.y(De[1],De[2]),ue.translate(Te-fe,Pe-we)):ue.translate(De[1],De[2]):"r"==$e?2==ze?(Ue=Ue||z,ue.rotate(De[1],Ue.x+Ue.width/2,Ue.y+Ue.height/2)):4==ze&&(We?(Te=Ke.x(De[2],De[3]),Pe=Ke.y(De[2],De[3]),ue.rotate(De[1],Te,Pe)):ue.rotate(De[1],De[2],De[3])):"s"==$e?2==ze||3==ze?(Ue=Ue||z,ue.scale(De[1],De[ze-1],Ue.x+Ue.width/2,Ue.y+Ue.height/2)):4==ze?We?(Te=Ke.x(De[2],De[3]),Pe=Ke.y(De[2],De[3]),ue.scale(De[1],De[1],Te,Pe)):ue.scale(De[1],De[1],De[2],De[3]):5==ze&&(We?(Te=Ke.x(De[3],De[4]),Pe=Ke.y(De[3],De[4]),ue.scale(De[1],De[2],Te,Pe)):ue.scale(De[1],De[2],De[3],De[4])):"m"==$e&&7==ze&&ue.add(De[1],De[2],De[3],De[4],De[5],De[6])}return ue},w._unit2px=function F(U,z,te){function ue(Pe){if(null==Pe)return ye;if(Pe==+Pe)return Pe;c(Te,{width:Pe});try{return Te.getBBox().width}catch{return 0}}function me(Pe){if(null==Pe)return ye;if(Pe==+Pe)return Pe;c(Te,{height:Pe});try{return Te.getBBox().height}catch{return 0}}function he(Pe,Ue){null==z?we[Pe]=Ue(U.attr(Pe)||0):Pe==z&&(we=Ue(te??(U.attr(Pe)||0)))}var fe=E(U).node,we={},Te=fe.querySelector(".svg---mgr");switch(Te||(Te=c("rect"),c(Te,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),fe.appendChild(Te)),U.type){case"rect":he("rx",ue),he("ry",me);case"image":he("width",ue),he("height",me);case"text":he("x",ue),he("y",me);break;case"circle":he("cx",ue),he("cy",me),he("r",ue);break;case"ellipse":he("cx",ue),he("cy",me),he("rx",ue),he("ry",me);break;case"line":he("x1",ue),he("x2",ue),he("y1",me),he("y2",me);break;case"marker":he("refX",ue),he("markerWidth",ue),he("refY",me),he("markerHeight",me);break;case"radialGradient":he("fx",ue),he("fy",me);break;case"tspan":he("dx",ue),he("dy",me);break;default:he(z,ue)}return fe.removeChild(Te),we},P.doc.contains||P.doc.compareDocumentPosition,w._.getSomeDefs=function v(U){var z=U.node.ownerSVGElement&&D(U.node.ownerSVGElement)||U.node.parentNode&&D(U.node.parentNode)||w.select("svg")||w(0,0),te=z.select("defs"),ue=null!=te&&te.node;return ue||(ue=k("defs",z.node).node),ue},w._.getSomeSVG=E,w.select=function(U){return U=Y(U).replace(/([^\\]):/g,"$1\\:"),D(P.doc.querySelector(U))},w.selectAll=function(U){for(var z=P.doc.querySelectorAll(U),te=(w.set||Array)(),ue=0;ue<z.length;ue++)te.push(D(z[ue]));return te},setInterval(function(){for(var U in Ee)if(Ee[W](U)){var z=Ee[U],te=z.node;("svg"!=z.type&&!te.ownerSVGElement||"svg"==z.type&&(!te.parentNode||"ownerSVGElement"in te.parentNode&&!te.ownerSVGElement))&&delete Ee[U]}},1e4),N.prototype.attr=function(U,z){var te=this,ue=te.node;if(!U){if(1!=ue.nodeType)return{text:ue.nodeValue};for(var me=ue.attributes,he={},fe=0,we=me.length;we>fe;fe++)he[me[fe].nodeName]=me[fe].nodeValue;return he}if(e(U,"string")){if(!(arguments.length>1))return X("snap.util.getattr."+U,te).firstDefined();var Te={};Te[U]=z,U=Te}for(var Pe in U)U[W](Pe)&&X("snap.util.attr."+Pe,te,U[Pe]);return te},w.parse=function(U){var z=P.doc.createDocumentFragment(),te=!0,ue=P.doc.createElement("div");if((U=Y(U)).match(/^\s*<\s*svg(?:\s|>)/)||(U="<svg>"+U+"</svg>",te=!1),ue.innerHTML=U,U=ue.getElementsByTagName("svg")[0])if(te)z=U;else for(;U.firstChild;)z.appendChild(U.firstChild);return new A(z)},w.fragment=function(){for(var U=Array.prototype.slice.call(arguments,0),z=P.doc.createDocumentFragment(),te=0,ue=U.length;ue>te;te++){var me=U[te];me.node&&me.node.nodeType&&z.appendChild(me.node),me.nodeType&&z.appendChild(me),"string"==typeof me&&z.appendChild(w.parse(me).node)}return new A(z)},w._.make=k,w._.wrap=D,j.prototype.el=function(U,z){var te=k(U,this.node);return z&&te.attr(z),te},N.prototype.children=function(){for(var U=[],z=this.node.childNodes,te=0,ue=z.length;ue>te;te++)U[te]=w(z[te]);return U},N.prototype.toJSON=function(){var U=[];return q([this],U),U[0]},X.on("snap.util.getattr",function(){var U=X.nt(),z=(U=U.substring(U.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(te){return"-"+te.toLowerCase()});return _e[W](z)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(z):c(this.node,U)});var _e={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};X.on("snap.util.attr",function(U){var z=X.nt(),te={};te[z=z.substring(z.lastIndexOf(".")+1)]=U;var ue=z.replace(/-(\w)/gi,function(he,fe){return fe.toUpperCase()}),me=z.replace(/[A-Z]/g,function(he){return"-"+he.toLowerCase()});_e[W](me)?this.node.style[ue]=U??ye:c(this.node,te)}),j.prototype,w.ajax=function(U,z,te,ue){var me=new XMLHttpRequest,he=re();if(me){if(e(z,"function"))ue=te,te=z,z=null;else if(e(z,"object")){var fe=[];for(var we in z)z.hasOwnProperty(we)&&fe.push(encodeURIComponent(we)+"="+encodeURIComponent(z[we]));z=fe.join("&")}return me.open(z?"POST":"GET",U,!0),z&&(me.setRequestHeader("X-Requested-With","XMLHttpRequest"),me.setRequestHeader("Content-type","application/x-www-form-urlencoded")),te&&(X.once("snap.ajax."+he+".0",te),X.once("snap.ajax."+he+".200",te),X.once("snap.ajax."+he+".304",te)),me.onreadystatechange=function(){4==me.readyState&&X("snap.ajax."+he+"."+me.status,ue,me)},4==me.readyState||me.send(z),me}},w.load=function(U,z,te){w.ajax(U,function(ue){var me=w.parse(ue.responseText);te?z.call(te,me):z(me)})};return w.getElementByPoint=function(U,z){var ue=(this.canvas,P.doc.elementFromPoint(U,z));if(P.win.opera&&"svg"==ue.tagName){var me=function(U){var z=U.getBoundingClientRect(),te=U.ownerDocument,ue=te.body,me=te.documentElement,he=me.clientTop||ue.clientTop||0,fe=me.clientLeft||ue.clientLeft||0;return{y:z.top+(g.win.pageYOffset||me.scrollTop||ue.scrollTop)-he,x:z.left+(g.win.pageXOffset||me.scrollLeft||ue.scrollLeft)-fe}}(ue),he=ue.createSVGRect();he.x=U-me.x,he.y=z-me.y,he.width=he.height=1;var fe=ue.getIntersectionList(he,null);fe.length&&(ue=fe[fe.length-1])}return ue?D(ue):null},w.plugin=function(U){U(w,N,j,P,A)},P.win.Snap=w,w}(G||this);return Q.plugin(function(s,w,c,e,r){function o(j,D){if(null==D){var q=!0;if(!(D="linearGradient"==j.type||"radialGradient"==j.type?j.node.getAttribute("gradientTransform"):"pattern"==j.type?j.node.getAttribute("patternTransform"):j.node.getAttribute("transform")))return new s.Matrix;D=s._.svgTransform2string(D)}else D=s._.rgTransform.test(D)?d(D).replace(/\.{3}|\u2026/g,j._.transform||""):s._.svgTransform2string(D),m(D,"array")&&(D=s.path?s.path.toString.call(D):d(D)),j._.transform=D;var P=s._.transform2matrix(D,j.getBBox(1));return q?P:void(j.matrix=P)}function f(j){return function(){var D=j?"<"+this.type:"",q=this.node.attributes,P=this.node.childNodes;if(j)for(var W=0,Y=q.length;Y>W;W++)D+=" "+q[W].name+'="'+q[W].value.replace(/"/g,'\\"')+'"';if(P.length){for(j&&(D+=">"),W=0,Y=P.length;Y>W;W++)3==P[W].nodeType?D+=P[W].nodeValue:1==P[W].nodeType&&(D+=N(P[W]).toString());j&&(D+="</"+this.type+">")}else j&&(D+="/>");return D}}var l=w.prototype,m=s.is,d=String,a=s._unit2px,v=s._.$,E=s._.make,F=s._.getSomeDefs,B="hasOwnProperty",N=s._.wrap;l.getBBox=function(j){if("tspan"==this.type)return s._.box(this.node.getClientRects().item(0));if(!s.Matrix||!s.path)return this.node.getBBox();var D=this,q=new s.Matrix;if(D.removed)return s._.box();for(;"use"==D.type;)if(j||(q=q.add(D.transform().localMatrix.translate(D.attr("x")||0,D.attr("y")||0))),D.original)D=D.original;else{var P=D.attr("xlink:href");D=D.original=D.node.ownerDocument.getElementById(P.substring(P.indexOf("#")+1))}var W=D._,Y=s.path.get[D.type]||s.path.get.deflt;try{return j?(W.bboxwt=Y?s.path.getBBox(D.realPath=Y(D)):s._.box(D.node.getBBox()),s._.box(W.bboxwt)):(D.realPath=Y(D),D.matrix=D.transform().localMatrix,W.bbox=s.path.getBBox(s.path.map(D.realPath,q.add(D.matrix))),s._.box(W.bbox))}catch{return s._.box()}};var A=function(){return this.string};l.transform=function(j){var D=this._;if(null==j){for(var q,P=this,W=new s.Matrix(this.node.getCTM()),Y=o(this),ne=[Y],ce=new s.Matrix,$=Y.toTransformString(),ee=d(Y)==d(this.matrix)?d(D.transform):$;"svg"!=P.type&&(P=P.parent());)ne.push(o(P));for(q=ne.length;q--;)ce.add(ne[q]);return{string:ee,globalMatrix:W,totalMatrix:ce,localMatrix:Y,diffMatrix:W.clone().add(Y.invert()),global:W.toTransformString(),total:ce.toTransformString(),local:$,toString:A}}return j instanceof s.Matrix?(this.matrix=j,this._.transform=j.toTransformString()):o(this,j),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix})),this},l.parent=function(){return N(this.node.parentNode)},l.append=l.add=function(j){if(j){if("set"==j.type){var D=this;return j.forEach(function(q){D.add(q)}),this}j=N(j),this.node.appendChild(j.node),j.paper=this.paper}return this},l.appendTo=function(j){return j&&(j=N(j)).append(this),this},l.prepend=function(j){if(j){if("set"==j.type){var D,q=this;return j.forEach(function(W){D?D.after(W):q.prepend(W),D=W}),this}var P=(j=N(j)).parent();this.node.insertBefore(j.node,this.node.firstChild),this.add&&this.add(),j.paper=this.paper,this.parent()&&this.parent().add(),P&&P.add()}return this},l.prependTo=function(j){return(j=N(j)).prepend(this),this},l.before=function(j){if("set"==j.type){var D=this;return j.forEach(function(P){var W=P.parent();D.node.parentNode.insertBefore(P.node,D.node),W&&W.add()}),this.parent().add(),this}var q=(j=N(j)).parent();return this.node.parentNode.insertBefore(j.node,this.node),this.parent()&&this.parent().add(),q&&q.add(),j.paper=this.paper,this},l.after=function(j){var D=(j=N(j)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(j.node,this.node.nextSibling):this.node.parentNode.appendChild(j.node),this.parent()&&this.parent().add(),D&&D.add(),j.paper=this.paper,this},l.insertBefore=function(j){j=N(j);var D=this.parent();return j.node.parentNode.insertBefore(this.node,j.node),this.paper=j.paper,D&&D.add(),j.parent()&&j.parent().add(),this},l.insertAfter=function(j){j=N(j);var D=this.parent();return j.node.parentNode.insertBefore(this.node,j.node.nextSibling),this.paper=j.paper,D&&D.add(),j.parent()&&j.parent().add(),this},l.remove=function(){var j=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,j&&j.add(),this},l.select=function(j){return N(this.node.querySelector(j))},l.selectAll=function(j){for(var D=this.node.querySelectorAll(j),q=(s.set||Array)(),P=0;P<D.length;P++)q.push(N(D[P]));return q},l.asPX=function(j,D){return null==D&&(D=this.attr(j)),+a(this,j,D)},l.use=function(){var j,D=this.node.id;return D||(D=this.id,v(this.node,{id:D})),j="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?E(this.type,this.node.parentNode):E("use",this.node.parentNode),v(j.node,{"xlink:href":"#"+D}),j.original=this,j},l.clone=function(){var j=N(this.node.cloneNode(!0));return v(j.node,"id")&&v(j.node,{id:j.id}),function u(j){function D(be,de){var le=v(be.node,de);(le=(le=le&&le.match(Y))&&le[2])&&"#"==le.charAt()&&(le=le.substring(1))&&(ce[le]=(ce[le]||[]).concat(function(Ce){var Ie={};Ie[de]=s.url(Ce),v(be.node,Ie)}))}function q(be){var de=v(be.node,"xlink:href");de&&"#"==de.charAt()&&(de=de.substring(1))&&(ce[de]=(ce[de]||[]).concat(function(le){be.attr("xlink:href","#"+le)}))}for(var P,W=j.selectAll("*"),Y=/^\s*url\(("|'|)(.*)\1\)\s*$/,ne=[],ce={},$=0,ee=W.length;ee>$;$++){D(P=W[$],"fill"),D(P,"stroke"),D(P,"filter"),D(P,"mask"),D(P,"clip-path"),q(P);var J=v(P.node,"id");J&&(v(P.node,{id:P.id}),ne.push({old:J,id:P.id}))}for($=0,ee=ne.length;ee>$;$++){var ie=ce[ne[$].old];if(ie)for(var oe=0,ye=ie.length;ye>oe;oe++)ie[oe](ne[$].id)}}(j),j.insertAfter(this),j},l.toDefs=function(){return F(this).appendChild(this.node),this},l.pattern=l.toPattern=function(j,D,q,P){var W=E("pattern",F(this));return null==j&&(j=this.getBBox()),m(j,"object")&&"x"in j&&(D=j.y,q=j.width,P=j.height,j=j.x),v(W.node,{x:j,y:D,width:q,height:P,patternUnits:"userSpaceOnUse",id:W.id,viewBox:[j,D,q,P].join(" ")}),W.node.appendChild(this.node),W},l.marker=function(j,D,q,P,W,Y){var ne=E("marker",F(this));return null==j&&(j=this.getBBox()),m(j,"object")&&"x"in j&&(D=j.y,q=j.width,P=j.height,W=j.refX||j.cx,Y=j.refY||j.cy,j=j.x),v(ne.node,{viewBox:[j,D,q,P].join(" "),markerWidth:q,markerHeight:P,orient:"auto",refX:W||0,refY:Y||0,id:ne.id}),ne.node.appendChild(this.node),ne};var k={};l.data=function(j,D){var q=k[this.id]=k[this.id]||{};if(0==arguments.length)return X("snap.data.get."+this.id,this,q,null),q;if(1==arguments.length){if(s.is(j,"object")){for(var P in j)j[B](P)&&this.data(P,j[P]);return this}return X("snap.data.get."+this.id,this,q[j],j),q[j]}return q[j]=D,X("snap.data.set."+this.id,this,D,j),this},l.removeData=function(j){return null==j?k[this.id]={}:k[this.id]&&delete k[this.id][j],this},l.outerSVG=l.toString=f(1),l.innerSVG=f(),l.toDataURL=function(){if(G&&G.btoa){var j=this.getBBox(),D=s.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+j.x.toFixed(3),y:+j.y.toFixed(3),width:+j.width.toFixed(3),height:+j.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(D)))}},r.prototype.select=l.select,r.prototype.selectAll=l.selectAll}),Q.plugin(function(s,w,c,e,r){function o(a,v,E){return function(F){var B=F.slice(a,v);return 1==B.length&&(B=B[0]),E?E(B):B}}var u=w.prototype,f=s.is,l=String,m="hasOwnProperty",d=function(a,v,E,F){"function"!=typeof E||E.length||(F=E,E=Z.linear),this.attr=a,this.dur=v,E&&(this.easing=E),F&&(this.callback=F)};s._.Animation=d,s.animation=function(a,v,E,F){return new d(a,v,E,F)},u.inAnim=function(){var a=this,v=[];for(var E in a.anims)a.anims[m](E)&&function(F){v.push({anim:new d(F._attrs,F.dur,F.easing,F._callback),mina:F,curStatus:F.status(),status:function(B){return F.status(B)},stop:function(){F.stop()}})}(a.anims[E]);return v},s.animate=function(a,v,E,F,B,N){"function"!=typeof B||B.length||(N=B,B=Z.linear);var A=Z.time(),k=Z(a,v,A,A+F,Z.time,E,B);return N&&X.once("mina.finish."+k.id,N),k},u.stop=function(){for(var a=this.inAnim(),v=0,E=a.length;E>v;v++)a[v].stop();return this},u.animate=function(a,v,E,F){"function"!=typeof E||E.length||(F=E,E=Z.linear),a instanceof d&&(F=a.callback,E=a.easing,v=a.dur,a=a.attr);var B,N,A,k,j=[],D=[],q={},P=this;for(var W in a)if(a[m](W)){P.equal?(B=(k=P.equal(W,l(a[W]))).from,N=k.to,A=k.f):(B=+P.attr(W),N=+a[W]);var Y=f(B,"array")?B.length:1;q[W]=o(j.length,j.length+Y,A),j=j.concat(B),D=D.concat(N)}var ne=Z.time(),ce=Z(j,D,ne,ne+v,Z.time,function($){var ee={};for(var J in q)q[m](J)&&(ee[J]=q[J]($));P.attr(ee)},E);return P.anims[ce.id]=ce,ce._attrs=a,ce._callback=F,X("snap.animcreated."+P.id,ce),X.once("mina.finish."+ce.id,function(){X.off("mina.*."+ce.id),delete P.anims[ce.id],F&&F.call(P)}),X.once("mina.stop."+ce.id,function(){X.off("mina.*."+ce.id),delete P.anims[ce.id]}),P}}),Q.plugin(function(s,w,c,e,r){function o(d,a,v,E,F,B){return null==a&&"[object SVGMatrix]"==u.call(d)?(this.a=d.a,this.b=d.b,this.c=d.c,this.d=d.d,this.e=d.e,void(this.f=d.f)):void(null!=d?(this.a=+d,this.b=+a,this.c=+v,this.d=+E,this.e=+F,this.f=+B):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var u=Object.prototype.toString,f=String,l=Math;(function(d){function a(E){return E[0]*E[0]+E[1]*E[1]}function v(E){var F=l.sqrt(a(E));E[0]&&(E[0]/=F),E[1]&&(E[1]/=F)}d.add=function(E,F,B,N,A,k){if(E&&E instanceof o)return this.add(E.a,E.b,E.c,E.d,E.e,E.f);var j=E*this.a+F*this.c,D=E*this.b+F*this.d;return this.e+=A*this.a+k*this.c,this.f+=A*this.b+k*this.d,this.c=B*this.a+N*this.c,this.d=B*this.b+N*this.d,this.a=j,this.b=D,this},o.prototype.multLeft=function(E,F,B,N,A,k){if(E&&E instanceof o)return this.multLeft(E.a,E.b,E.c,E.d,E.e,E.f);var j=E*this.a+B*this.b,D=E*this.c+B*this.d,q=E*this.e+B*this.f+A;return this.b=F*this.a+N*this.b,this.d=F*this.c+N*this.d,this.f=F*this.e+N*this.f+k,this.a=j,this.c=D,this.e=q,this},d.invert=function(){var E=this,F=E.a*E.d-E.b*E.c;return new o(E.d/F,-E.b/F,-E.c/F,E.a/F,(E.c*E.f-E.d*E.e)/F,(E.b*E.e-E.a*E.f)/F)},d.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},d.translate=function(E,F){return this.e+=E*this.a+F*this.c,this.f+=E*this.b+F*this.d,this},d.scale=function(E,F,B,N){return null==F&&(F=E),(B||N)&&this.translate(B,N),this.a*=E,this.b*=E,this.c*=F,this.d*=F,(B||N)&&this.translate(-B,-N),this},d.rotate=function(E,F,B){E=s.rad(E),F=F||0,B=B||0;var N=+l.cos(E).toFixed(9),A=+l.sin(E).toFixed(9);return this.add(N,A,-A,N,F,B),this.add(1,0,0,1,-F,-B)},d.skewX=function(E){return this.skew(E,0)},d.skewY=function(E){return this.skew(0,E)},d.skew=function(E,F){E=E||0,F=F||0,E=s.rad(E),F=s.rad(F);var B=l.tan(E).toFixed(9),N=l.tan(F).toFixed(9);return this.add(1,N,B,1,0,0)},d.x=function(E,F){return E*this.a+F*this.c+this.e},d.y=function(E,F){return E*this.b+F*this.d+this.f},d.get=function(E){return+this[f.fromCharCode(97+E)].toFixed(4)},d.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},d.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},d.determinant=function(){return this.a*this.d-this.b*this.c},d.split=function(){var E={};E.dx=this.e,E.dy=this.f;var F=[[this.a,this.b],[this.c,this.d]];E.scalex=l.sqrt(a(F[0])),v(F[0]),E.shear=F[0][0]*F[1][0]+F[0][1]*F[1][1],F[1]=[F[1][0]-F[0][0]*E.shear,F[1][1]-F[0][1]*E.shear],E.scaley=l.sqrt(a(F[1])),v(F[1]),E.shear/=E.scaley,this.determinant()<0&&(E.scalex=-E.scalex);var B=F[0][1],N=F[1][1];return 0>N?(E.rotate=s.deg(l.acos(N)),0>B&&(E.rotate=360-E.rotate)):E.rotate=s.deg(l.asin(B)),E.isSimple=!(+E.shear.toFixed(9)||E.scalex.toFixed(9)!=E.scaley.toFixed(9)&&E.rotate),E.isSuperSimple=!+E.shear.toFixed(9)&&E.scalex.toFixed(9)==E.scaley.toFixed(9)&&!E.rotate,E.noRotation=!+E.shear.toFixed(9)&&!E.rotate,E},d.toTransformString=function(E){var F=E||this.split();return+F.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(F.scalex=+F.scalex.toFixed(4),F.scaley=+F.scaley.toFixed(4),F.rotate=+F.rotate.toFixed(4),(F.dx||F.dy?"t"+[+F.dx.toFixed(4),+F.dy.toFixed(4)]:"")+(F.rotate?"r"+[+F.rotate.toFixed(4),0,0]:"")+(1!=F.scalex||1!=F.scaley?"s"+[F.scalex,F.scaley,0,0]:""))}})(o.prototype),s.Matrix=o,s.matrix=function(d,a,v,E,F,B){return new o(d,a,v,E,F,B)}}),Q.plugin(function(s,w,c,e,r){function o(D){return function(q){if(X.stop(),q instanceof r&&1==q.node.childNodes.length&&("radialGradient"==q.node.firstChild.tagName||"linearGradient"==q.node.firstChild.tagName||"pattern"==q.node.firstChild.tagName)&&(q=q.node.firstChild,v(this).appendChild(q),q=d(q)),q instanceof w)if("radialGradient"==q.type||"linearGradient"==q.type||"pattern"==q.type){q.node.id||F(q.node,{id:q.id});var P=B(q.node.id)}else P=q.attr(D);else if((P=s.color(q)).error){var W=s(v(this).ownerSVGElement).gradient(q);W?(W.node.id||F(W.node,{id:W.id}),P=B(W.node.id)):P=q}else P=N(P);var Y={};Y[D]=P,F(this.node,Y),this.node.style[D]=k}}function u(D){X.stop(),D==+D&&(D+="px"),this.node.style.fontSize=D}function f(D){for(var q=[],P=D.childNodes,W=0,Y=P.length;Y>W;W++){var ne=P[W];3==ne.nodeType&&q.push(ne.nodeValue),"tspan"==ne.tagName&&(1==ne.childNodes.length&&3==ne.firstChild.nodeType?q.push(ne.firstChild.nodeValue):q.push(f(ne)))}return q}function l(){return X.stop(),this.node.style.fontSize}var D,m=s._.make,d=s._.wrap,a=s.is,v=s._.getSomeDefs,E=/^url\((['"]?)([^)]+)\1\)$/,F=s._.$,B=s.url,N=String,A=s._.separator,k="";s.deurl=function(D){var q=String(D).match(E);return q?q[2]:D},X.on("snap.util.attr.mask",function(D){if(D instanceof w||D instanceof r){if(X.stop(),D instanceof r&&1==D.node.childNodes.length&&(D=D.node.firstChild,v(this).appendChild(D),D=d(D)),"mask"==D.type)var q=D;else(q=m("mask",v(this))).node.appendChild(D.node);!q.node.id&&F(q.node,{id:q.id}),F(this.node,{mask:B(q.id)})}}),D=function(D){if(D instanceof w||D instanceof r){X.stop();for(var q,P=D.node;P;){if("clipPath"===P.nodeName){q=new w(P);break}if("svg"===P.nodeName){q=void 0;break}P=P.parentNode}q||((q=m("clipPath",v(this))).node.appendChild(D.node),!q.node.id&&F(q.node,{id:q.id})),F(this.node,{"clip-path":B(q.node.id||q.id)})}},X.on("snap.util.attr.clip",D),X.on("snap.util.attr.clip-path",D),X.on("snap.util.attr.clipPath",D),X.on("snap.util.attr.fill",o("fill")),X.on("snap.util.attr.stroke",o("stroke"));var j=/^([lr])(?:\(([^)]*)\))?(.*)$/i;X.on("snap.util.grad.parse",function(D){function q(ie,oe){for(var ye=(oe-$)/(ie-ee),be=ee;ie>be;be++)ne[be].offset=+(+$+ye*(be-ee)).toFixed(2);ee=ie,$=oe}var P=(D=N(D)).match(j);if(!P)return null;var W=P[1],Y=P[2],ne=P[3];1==(Y=Y.split(/\s*,\s*/).map(function(ie){return+ie==ie?+ie:ie})).length&&0==Y[0]&&(Y=[]);var ce=(ne=(ne=ne.split("-")).map(function(ie){var oe={color:(ie=ie.split(":"))[0]};return ie[1]&&(oe.offset=parseFloat(ie[1])),oe})).length,$=0,ee=0;ce--;for(var J=0;ce>J;J++)"offset"in ne[J]&&q(J,ne[J].offset);return ne[ce].offset=ne[ce].offset||100,q(ce,ne[ce].offset),{type:W,params:Y,stops:ne}}),X.on("snap.util.attr.d",function(D){X.stop(),a(D,"array")&&a(D[0],"array")&&(D=s.path.toString.call(D)),(D=N(D)).match(/[ruo]/i)&&(D=s.path.toAbsolute(D)),F(this.node,{d:D})})(-1),X.on("snap.util.attr.#text",function(D){X.stop(),D=N(D);for(var q=e.doc.createTextNode(D);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(q)})(-1),X.on("snap.util.attr.path",function(D){X.stop(),this.attr({d:D})})(-1),X.on("snap.util.attr.class",function(D){X.stop(),this.node.className.baseVal=D})(-1),X.on("snap.util.attr.viewBox",function(D){var q;q=a(D,"object")&&"x"in D?[D.x,D.y,D.width,D.height].join(" "):a(D,"array")?D.join(" "):D,F(this.node,{viewBox:q}),X.stop()})(-1),X.on("snap.util.attr.transform",function(D){this.transform(D),X.stop()})(-1),X.on("snap.util.attr.r",function(D){"rect"==this.type&&(X.stop(),F(this.node,{rx:D,ry:D}))})(-1),X.on("snap.util.attr.textpath",function(D){if(X.stop(),"text"==this.type){var q,P,W;if(!D&&this.textPath){for(P=this.textPath;P.node.firstChild;)this.node.appendChild(P.node.firstChild);return P.remove(),void delete this.textPath}if(a(D,"string")){var Y=v(this),ne=d(Y.parentNode).path(D);Y.appendChild(ne.node),q=ne.id,ne.attr({id:q})}else(D=d(D))instanceof w&&((q=D.attr("id"))||(q=D.id,D.attr({id:q})));if(q)if(P=this.textPath,W=this.node,P)P.attr({"xlink:href":"#"+q});else{for(P=F("textPath",{"xlink:href":"#"+q});W.firstChild;)P.appendChild(W.firstChild);W.appendChild(P),this.textPath=d(P)}}})(-1),X.on("snap.util.attr.text",function(D){if("text"==this.type){for(var q=this.node,P=function(Y){var ne=F("tspan");if(a(Y,"array"))for(var ce=0;ce<Y.length;ce++)ne.appendChild(P(Y[ce]));else ne.appendChild(e.doc.createTextNode(Y));return ne.normalize&&ne.normalize(),ne};q.firstChild;)q.removeChild(q.firstChild);for(var W=P(D);W.firstChild;)q.appendChild(W.firstChild)}X.stop()})(-1),X.on("snap.util.attr.fontSize",u)(-1),X.on("snap.util.attr.font-size",u)(-1),X.on("snap.util.getattr.transform",function(){return X.stop(),this.transform()})(-1),X.on("snap.util.getattr.textpath",function(){return X.stop(),this.textPath})(-1),function(){function D(P){return function(){X.stop();var W=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+P);return"none"==W?W:s(e.doc.getElementById(W.match(E)[1]))}}function q(P){return function(W){X.stop();var Y="marker"+P.charAt(0).toUpperCase()+P.substring(1);if(""!=W&&W){if("marker"==W.type){var ne=W.node.id;return ne||F(W.node,{id:W.id}),void(this.node.style[Y]=B(ne))}}else this.node.style[Y]="none"}}X.on("snap.util.getattr.marker-end",D("end"))(-1),X.on("snap.util.getattr.markerEnd",D("end"))(-1),X.on("snap.util.getattr.marker-start",D("start"))(-1),X.on("snap.util.getattr.markerStart",D("start"))(-1),X.on("snap.util.getattr.marker-mid",D("mid"))(-1),X.on("snap.util.getattr.markerMid",D("mid"))(-1),X.on("snap.util.attr.marker-end",q("end"))(-1),X.on("snap.util.attr.markerEnd",q("end"))(-1),X.on("snap.util.attr.marker-start",q("start"))(-1),X.on("snap.util.attr.markerStart",q("start"))(-1),X.on("snap.util.attr.marker-mid",q("mid"))(-1),X.on("snap.util.attr.markerMid",q("mid"))(-1)}(),X.on("snap.util.getattr.r",function(){return"rect"==this.type&&F(this.node,"rx")==F(this.node,"ry")?(X.stop(),F(this.node,"rx")):void 0})(-1),X.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){X.stop();var D=f(this.node);return 1==D.length?D[0]:D}})(-1),X.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),X.on("snap.util.getattr.fill",function(D){if(!D){X.stop();var q=X("snap.util.getattr.fill",this,!0).firstDefined();return s(s.deurl(q))||q}})(-1),X.on("snap.util.getattr.stroke",function(D){if(!D){X.stop();var q=X("snap.util.getattr.stroke",this,!0).firstDefined();return s(s.deurl(q))||q}})(-1),X.on("snap.util.getattr.viewBox",function(){X.stop();var D=F(this.node,"viewBox");return D?(D=D.split(A),s._.box(+D[0],+D[1],+D[2],+D[3])):void 0})(-1),X.on("snap.util.getattr.points",function(){var D=F(this.node,"points");return X.stop(),D?D.split(A):void 0})(-1),X.on("snap.util.getattr.path",function(){var D=F(this.node,"d");return X.stop(),D})(-1),X.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),X.on("snap.util.getattr.fontSize",l)(-1),X.on("snap.util.getattr.font-size",l)(-1)}),Q.plugin(function(s,w,c,e,r){var o=/\S+/g,u=String,f=w.prototype;f.addClass=function(l){var m,a,v,E=u(l||"").match(o)||[],F=this.node,B=F.className.baseVal,N=B.match(o)||[];if(E.length){for(m=0;a=E[m++];)~N.indexOf(a)||N.push(a);B!=(v=N.join(" "))&&(F.className.baseVal=v)}return this},f.removeClass=function(l){var m,d,a,v,E=u(l||"").match(o)||[],F=this.node,B=F.className.baseVal,N=B.match(o)||[];if(N.length){for(m=0;a=E[m++];)~(d=N.indexOf(a))&&N.splice(d,1);B!=(v=N.join(" "))&&(F.className.baseVal=v)}return this},f.hasClass=function(l){return!!~(this.node.className.baseVal.match(o)||[]).indexOf(l)},f.toggleClass=function(l,m){if(null!=m)return m?this.addClass(l):this.removeClass(l);var d,a,v,E,F=(l||"").match(o)||[],B=this.node,N=B.className.baseVal,A=N.match(o)||[];for(d=0;v=F[d++];)~(a=A.indexOf(v))?A.splice(a,1):A.push(v);return N!=(E=A.join(" "))&&(B.className.baseVal=E),this}}),Q.plugin(function(s,w,c,e,r){function o(a){return a}function u(a){return function(v){return+v.toFixed(3)+a}}var f={"+":function(a,v){return a+v},"-":function(a,v){return a-v},"/":function(a,v){return a/v},"*":function(a,v){return a*v}},l=String,m=/[a-z]+$/i,d=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;X.on("snap.util.attr",function(a){var v=l(a).match(d);if(v){var E=X.nt(),F=E.substring(E.lastIndexOf(".")+1),B=this.attr(F),N={};X.stop();var A=v[3]||"",k=B.match(m),j=f[v[1]];if(k&&k==A?a=j(parseFloat(B),+v[2]):(B=this.asPX(F),a=j(this.asPX(F),this.asPX(F,v[2]+A))),isNaN(B)||isNaN(a))return;N[F]=a,this.attr(N)}})(-10),X.on("snap.util.equal",function(a,v){var E=l(this.attr(a)||""),F=l(v).match(d);if(F){X.stop();var B=F[3]||"",N=E.match(m),A=f[F[1]];return N&&N==B?{from:parseFloat(E),to:A(parseFloat(E),+F[2]),f:u(N)}:{from:E=this.asPX(a),to:A(E,this.asPX(a,F[2]+B)),f:o}}})(-10)}),Q.plugin(function(s,w,c,e,r){var o=c.prototype,u=s.is;o.rect=function(l,m,d,a,v,E){var F;return null==E&&(E=v),u(l,"object")&&"[object Object]"==l?F=l:null!=l&&(F={x:l,y:m,width:d,height:a},null!=v&&(F.rx=v,F.ry=E)),this.el("rect",F)},o.circle=function(l,m,d){var a;return u(l,"object")&&"[object Object]"==l?a=l:null!=l&&(a={cx:l,cy:m,r:d}),this.el("circle",a)};var f=function(){function l(){this.parentNode.removeChild(this)}return function(m,d){var a=e.doc.createElement("img"),v=e.doc.body;a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){d.call(a),a.onload=a.onerror=null,v.removeChild(a)},a.onerror=l,v.appendChild(a),a.src=m}}();o.image=function(l,m,d,a,v){var E=this.el("image");if(u(l,"object")&&"src"in l)E.attr(l);else if(null!=l){var F={"xlink:href":l,preserveAspectRatio:"none"};null!=m&&null!=d&&(F.x=m,F.y=d),null!=a&&null!=v?(F.width=a,F.height=v):f(l,function(){s._.$(E.node,{width:this.offsetWidth,height:this.offsetHeight})}),s._.$(E.node,F)}return E},o.ellipse=function(l,m,d,a){var v;return u(l,"object")&&"[object Object]"==l?v=l:null!=l&&(v={cx:l,cy:m,rx:d,ry:a}),this.el("ellipse",v)},o.path=function(l){var m;return u(l,"object")&&!u(l,"array")?m=l:l&&(m={d:l}),this.el("path",m)},o.group=o.g=function(l){var m=this.el("g");return 1==arguments.length&&l&&!l.type?m.attr(l):arguments.length&&m.add(Array.prototype.slice.call(arguments,0)),m},o.svg=function(l,m,d,a,v,E,F,B){var N={};return u(l,"object")&&null==m?N=l:(null!=l&&(N.x=l),null!=m&&(N.y=m),null!=d&&(N.width=d),null!=a&&(N.height=a),null!=v&&null!=E&&null!=F&&null!=B&&(N.viewBox=[v,E,F,B])),this.el("svg",N)},o.mask=function(l){var m=this.el("mask");return 1==arguments.length&&l&&!l.type?m.attr(l):arguments.length&&m.add(Array.prototype.slice.call(arguments,0)),m},o.ptrn=function(l,m,d,a,v,E,F,B){if(u(l,"object"))var N=l;else N={patternUnits:"userSpaceOnUse"},l&&(N.x=l),m&&(N.y=m),null!=d&&(N.width=d),null!=a&&(N.height=a),N.viewBox=null!=v&&null!=E&&null!=F&&null!=B?[v,E,F,B]:[l||0,m||0,d||0,a||0];return this.el("pattern",N)},o.use=function(l){return null!=l?(l instanceof w&&(l.attr("id")||l.attr({id:s._.id(l)}),l=l.attr("id")),"#"==String(l).charAt()&&(l=l.substring(1)),this.el("use",{"xlink:href":"#"+l})):w.prototype.use.call(this)},o.symbol=function(l,m,d,a){var v={};return null!=l&&null!=m&&null!=d&&null!=a&&(v.viewBox=[l,m,d,a]),this.el("symbol",v)},o.text=function(l,m,d){var a={};return u(l,"object")?a=l:null!=l&&(a={x:l,y:m,text:d||""}),this.el("text",a)},o.line=function(l,m,d,a){var v={};return u(l,"object")?v=l:null!=l&&(v={x1:l,x2:d,y1:m,y2:a}),this.el("line",v)},o.polyline=function(l){arguments.length>1&&(l=Array.prototype.slice.call(arguments,0));var m={};return u(l,"object")&&!u(l,"array")?m=l:null!=l&&(m={points:l}),this.el("polyline",m)},o.polygon=function(l){arguments.length>1&&(l=Array.prototype.slice.call(arguments,0));var m={};return u(l,"object")&&!u(l,"array")?m=l:null!=l&&(m={points:l}),this.el("polygon",m)},function(){function l(){return this.selectAll("stop")}function m(N,A){var k=B("stop"),j={offset:+A+"%"};N=s.color(N),j["stop-color"]=N.hex,N.opacity<1&&(j["stop-opacity"]=N.opacity),B(k,j);for(var D,q=this.stops(),P=0;P<q.length;P++){if(parseFloat(q[P].attr("offset"))>A){this.node.insertBefore(k,q[P].node),D=!0;break}}return D||this.node.appendChild(k),this}function d(){if("linearGradient"==this.type){var N=B(this.node,"x1")||0,A=B(this.node,"x2")||1,k=B(this.node,"y1")||0,j=B(this.node,"y2")||0;return s._.box(N,k,math.abs(A-N),math.abs(j-k))}var D=this.node.cx||.5,q=this.node.cy||.5,P=this.node.r||0;return s._.box(D-P,q-P,2*P,2*P)}function a(N){var A=N,k=this.stops();if("string"==typeof N&&(A=X("snap.util.grad.parse",null,"l(0,0,0,1)"+N).firstDefined().stops),s.is(A,"array")){for(var j=0;j<k.length;j++)if(A[j]){var D=s.color(A[j].color),q={offset:A[j].offset+"%"};q["stop-color"]=D.hex,D.opacity<1&&(q["stop-opacity"]=D.opacity),k[j].attr(q)}else k[j].remove();for(j=k.length;j<A.length;j++)this.addStop(A[j].color,A[j].offset);return this}}function E(N,A,k,j,D){var q=s._.make("linearGradient",N);return q.stops=l,q.addStop=m,q.getBBox=d,q.setStops=a,null!=A&&B(q.node,{x1:A,y1:k,x2:j,y2:D}),q}function F(N,A,k,j,D,q){var P=s._.make("radialGradient",N);return P.stops=l,P.addStop=m,P.getBBox=d,null!=A&&B(P.node,{cx:A,cy:k,r:j}),null!=D&&null!=q&&B(P.node,{fx:D,fy:q}),P}var B=s._.$;o.gradient=function(N){return function v(N,A){var k,j=X("snap.util.grad.parse",null,A).firstDefined();if(!j)return null;j.params.unshift(N),k="l"==j.type.toLowerCase()?E.apply(0,j.params):F.apply(0,j.params),j.type!=j.type.toLowerCase()&&B(k.node,{gradientUnits:"userSpaceOnUse"});for(var D=j.stops,q=D.length,P=0;q>P;P++){var W=D[P];k.addStop(W.color,W.offset)}return k}(this.defs,N)},o.gradientLinear=function(N,A,k,j){return E(this.defs,N,A,k,j)},o.gradientRadial=function(N,A,k,j,D){return F(this.defs,N,A,k,j,D)},o.toString=function(){var N,A=this.node.ownerDocument,k=A.createDocumentFragment(),j=A.createElement("div"),D=this.node.cloneNode(!0);return k.appendChild(j),j.appendChild(D),s._.$(D,{xmlns:"http://www.w3.org/2000/svg"}),N=j.innerHTML,k.removeChild(k.firstChild),N},o.toDataURL=function(){return G&&G.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},o.clear=function(){for(var N,A=this.node.firstChild;A;)N=A.nextSibling,"defs"!=A.tagName?A.parentNode.removeChild(A):o.clear.call({node:A}),A=N}}()}),Q.plugin(function(s,w,c,e){function r(ge){var _e=r.ps=r.ps||{};return _e[ge]?_e[ge].sleep=100:_e[ge]={sleep:100},setTimeout(function(){for(var ke in _e)_e[Oe](ke)&&ke!=ge&&(_e[ke].sleep--,!_e[ke].sleep&&delete _e[ke])}),_e[ge]}function o(ge,_e,ke,U){return null==ge&&(ge=_e=ke=U=0),null==_e&&(_e=ge.y,ke=ge.width,U=ge.height,ge=ge.x),{x:ge,y:_e,width:ke,w:ke,height:U,h:U,x2:ge+ke,y2:_e+U,cx:ge+ke/2,cy:_e+U/2,r1:H.min(ke,U)/2,r2:H.max(ke,U)/2,r0:H.sqrt(ke*ke+U*U)/2,path:Y(ge,_e,ke,U),vb:[ge,_e,ke,U].join(" ")}}function u(){return this.join(",").replace(R,"$1")}function f(ge){var _e=Ie(ge);return _e.toString=u,_e}function l(ge,_e,ke,U,z,te,ue,me,he){return null==he?B(ge,_e,ke,U,z,te,ue,me):d(ge,_e,ke,U,z,te,ue,me,function N(ge,_e,ke,U,z,te,ue,me,he){if(!(0>he||B(ge,_e,ke,U,z,te,ue,me)<he)){var fe,we=1,Te=we/2,Pe=we-Te,Ue=.01;for(fe=B(ge,_e,ke,U,z,te,ue,me,Pe);Fe(fe-he)>Ue;)fe=B(ge,_e,ke,U,z,te,ue,me,Pe+=(he>fe?1:-1)*(Te/=2));return Pe}}(ge,_e,ke,U,z,te,ue,me,he))}function m(ge,_e){function ke(U){return+(+U).toFixed(3)}return s._.cacher(function(U,z,te){U instanceof w&&(U=U.attr("d"));for(var ue,me,he,fe,we,Te="",Pe={},Ue=0,De=0,ze=(U=ye(U)).length;ze>De;De++){if("M"==(he=U[De])[0])ue=+he[1],me=+he[2];else{if(Ue+(fe=l(ue,me,he[1],he[2],he[3],he[4],he[5],he[6]))>z){if(_e&&!Pe.start){if(Te+=["C"+ke((we=l(ue,me,he[1],he[2],he[3],he[4],he[5],he[6],z-Ue)).start.x),ke(we.start.y),ke(we.m.x),ke(we.m.y),ke(we.x),ke(we.y)],te)return Te;Pe.start=Te,Te=["M"+ke(we.x),ke(we.y)+"C"+ke(we.n.x),ke(we.n.y),ke(we.end.x),ke(we.end.y),ke(he[5]),ke(he[6])].join(),Ue+=fe,ue=+he[5],me=+he[6];continue}if(!ge&&!_e)return l(ue,me,he[1],he[2],he[3],he[4],he[5],he[6],z-Ue)}Ue+=fe,ue=+he[5],me=+he[6]}Te+=he.shift()+he}return Pe.end=Te,ge?Ue:_e?Pe:d(ue,me,he[0],he[1],he[2],he[3],he[4],he[5],1)},null,s._.clone)}function d(ge,_e,ke,U,z,te,ue,me,he){var fe=1-he,we=Ee(fe,3),Te=Ee(fe,2),Pe=he*he,Ue=Pe*he,$e=ge+2*he*(ke-ge)+Pe*(z-2*ke+ge),We=_e+2*he*(U-_e)+Pe*(te-2*U+_e),Ke=ke+2*he*(z-ke)+Pe*(ue-2*z+ke),et=U+2*he*(te-U)+Pe*(me-2*te+U);return{x:we*ge+3*Te*he*ke+3*fe*he*he*z+Ue*ue,y:we*_e+3*Te*he*U+3*fe*he*he*te+Ue*me,m:{x:$e,y:We},n:{x:Ke,y:et},start:{x:fe*ge+he*ke,y:fe*_e+he*U},end:{x:fe*z+he*ue,y:fe*te+he*me},alpha:90-180*H.atan2($e-Ke,We-et)/re}}function a(ge,_e,ke,U,z,te,ue,me){s.is(ge,"array")||(ge=[ge,_e,ke,U,z,te,ue,me]);var he=oe.apply(null,ge);return o(he.min.x,he.min.y,he.max.x-he.min.x,he.max.y-he.min.y)}function v(ge,_e,ke){return _e>=ge.x&&_e<=ge.x+ge.width&&ke>=ge.y&&ke<=ge.y+ge.height}function E(ge,_e){return ge=o(ge),v(_e=o(_e),ge.x,ge.y)||v(_e,ge.x2,ge.y)||v(_e,ge.x,ge.y2)||v(_e,ge.x2,ge.y2)||v(ge,_e.x,_e.y)||v(ge,_e.x2,_e.y)||v(ge,_e.x,_e.y2)||v(ge,_e.x2,_e.y2)||(ge.x<_e.x2&&ge.x>_e.x||_e.x<ge.x2&&_e.x>ge.x)&&(ge.y<_e.y2&&ge.y>_e.y||_e.y<ge.y2&&_e.y>ge.y)}function F(ge,_e,ke,U,z){return ge*(ge*(-3*_e+9*ke-9*U+3*z)+6*_e-12*ke+6*U)-3*_e+3*ke}function B(ge,_e,ke,U,z,te,ue,me,he){null==he&&(he=1);for(var fe=(he=he>1?1:0>he?0:he)/2,Te=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Pe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Ue=0,De=0;12>De;De++){var ze=fe*Te[De]+fe,$e=F(ze,ge,ke,z,ue),We=F(ze,_e,U,te,me),Ke=$e*$e+We*We;Ue+=Pe[De]*H.sqrt(Ke)}return fe*Ue}function A(ge,_e,ke,U,z,te,ue,me){if(!(ae(ge,ke)<ve(z,ue)||ve(ge,ke)>ae(z,ue)||ae(_e,U)<ve(te,me)||ve(_e,U)>ae(te,me))){var we=(ge-ke)*(te-me)-(_e-U)*(z-ue);if(we){var Te=((ge*U-_e*ke)*(z-ue)-(ge-ke)*(z*me-te*ue))/we,Pe=((ge*U-_e*ke)*(te-me)-(_e-U)*(z*me-te*ue))/we,Ue=+Te.toFixed(2),De=+Pe.toFixed(2);if(!(Ue<+ve(ge,ke).toFixed(2)||Ue>+ae(ge,ke).toFixed(2)||Ue<+ve(z,ue).toFixed(2)||Ue>+ae(z,ue).toFixed(2)||De<+ve(_e,U).toFixed(2)||De>+ae(_e,U).toFixed(2)||De<+ve(te,me).toFixed(2)||De>+ae(te,me).toFixed(2)))return{x:Te,y:Pe}}}}function k(ge,_e,ke){if(!E(a(ge),a(_e)))return ke?0:[];for(var me=~~(B.apply(0,ge)/8),he=~~(B.apply(0,_e)/8),fe=[],we=[],Te={},Pe=ke?0:[],Ue=0;me+1>Ue;Ue++){var De=d.apply(0,ge.concat(Ue/me));fe.push({x:De.x,y:De.y,t:Ue/me})}for(Ue=0;he+1>Ue;Ue++)De=d.apply(0,_e.concat(Ue/he)),we.push({x:De.x,y:De.y,t:Ue/he});for(Ue=0;me>Ue;Ue++)for(var ze=0;he>ze;ze++){var $e=fe[Ue],We=fe[Ue+1],Ke=we[ze],et=we[ze+1],Xe=Fe(We.x-$e.x)<.001?"y":"x",He=Fe(et.x-Ke.x)<.001?"y":"x",ot=A($e.x,$e.y,We.x,We.y,Ke.x,Ke.y,et.x,et.y);if(ot){if(Te[ot.x.toFixed(4)]==ot.y.toFixed(4))continue;Te[ot.x.toFixed(4)]=ot.y.toFixed(4);var lt=$e.t+Fe((ot[Xe]-$e[Xe])/(We[Xe]-$e[Xe]))*(We.t-$e.t),tt=Ke.t+Fe((ot[He]-Ke[He])/(et[He]-Ke[He]))*(et.t-Ke.t);lt>=0&&1>=lt&&tt>=0&&1>=tt&&(ke?Pe++:Pe.push({x:ot.x,y:ot.y,t1:lt,t2:tt}))}}return Pe}function q(ge,_e,ke){ge=ye(ge),_e=ye(_e);for(var U,z,te,ue,me,he,fe,we,Te,Pe,Ue=ke?0:[],De=0,ze=ge.length;ze>De;De++){var $e=ge[De];if("M"==$e[0])U=me=$e[1],z=he=$e[2];else{"C"==$e[0]?(Te=[U,z].concat($e.slice(1)),U=Te[6],z=Te[7]):(Te=[U,z,U,z,me,he,me,he],U=me,z=he);for(var We=0,Ke=_e.length;Ke>We;We++){var et=_e[We];if("M"==et[0])te=fe=et[1],ue=we=et[2];else{"C"==et[0]?(Pe=[te,ue].concat(et.slice(1)),te=Pe[6],ue=Pe[7]):(Pe=[te,ue,te,ue,fe,we,fe,we],te=fe,ue=we);var Xe=k(Te,Pe,ke);if(ke)Ue+=Xe;else{for(var He=0,ot=Xe.length;ot>He;He++)Xe[He].segment1=De,Xe[He].segment2=We,Xe[He].bez1=Te,Xe[He].bez2=Pe;Ue=Ue.concat(Xe)}}}}}return Ue}function W(ge){var _e=r(ge);if(_e.bbox)return Ie(_e.bbox);if(!ge)return o();for(var ke,U=0,z=0,te=[],ue=[],me=0,he=(ge=ye(ge)).length;he>me;me++)if("M"==(ke=ge[me])[0])U=ke[1],z=ke[2],te.push(U),ue.push(z);else{var fe=oe(U,z,ke[1],ke[2],ke[3],ke[4],ke[5],ke[6]);te=te.concat(fe.min.x,fe.max.x),ue=ue.concat(fe.min.y,fe.max.y),U=ke[5],z=ke[6]}var we=ve.apply(0,te),Te=ve.apply(0,ue),De=o(we,Te,ae.apply(0,te)-we,ae.apply(0,ue)-Te);return _e.bbox=Ie(De),De}function Y(ge,_e,ke,U,z){if(z)return[["M",+ge+ +z,_e],["l",ke-2*z,0],["a",z,z,0,0,1,z,z],["l",0,U-2*z],["a",z,z,0,0,1,-z,z],["l",2*z-ke,0],["a",z,z,0,0,1,-z,-z],["l",0,2*z-U],["a",z,z,0,0,1,z,-z],["z"]];var te=[["M",ge,_e],["l",ke,0],["l",0,U],["l",-ke,0],["z"]];return te.toString=u,te}function ne(ge,_e,ke,U,z){if(null==z&&null==U&&(U=ke),ge=+ge,_e=+_e,ke=+ke,U=+U,null!=z)var te=Math.PI/180,ue=ge+ke*Math.cos(-U*te),me=ge+ke*Math.cos(-z*te),we=[["M",ue,_e+ke*Math.sin(-U*te)],["A",ke,ke,0,+(z-U>180),0,me,_e+ke*Math.sin(-z*te)]];else we=[["M",ge,_e],["m",0,-U],["a",ke,U,0,1,1,0,2*U],["a",ke,U,0,1,1,0,-2*U],["z"]];return we.toString=u,we}function $(ge){var _e=r(ge);if(_e.abs)return f(_e.abs);if(Ce(ge,"array")&&Ce(ge&&ge[0],"array")||(ge=s.parsePathString(ge)),!ge||!ge.length)return[["M",0,0]];var ke,U=[],z=0,te=0,ue=0,me=0,he=0;"M"==ge[0][0]&&(ue=z=+ge[0][1],me=te=+ge[0][2],he++,U[0]=["M",z,te]);for(var fe,we,Te=3==ge.length&&"M"==ge[0][0]&&"R"==ge[1][0].toUpperCase()&&"Z"==ge[2][0].toUpperCase(),Pe=he,Ue=ge.length;Ue>Pe;Pe++){if(U.push(fe=[]),(ke=(we=ge[Pe])[0])!=ke.toUpperCase())switch(fe[0]=ke.toUpperCase(),fe[0]){case"A":fe[1]=we[1],fe[2]=we[2],fe[3]=we[3],fe[4]=we[4],fe[5]=we[5],fe[6]=+we[6]+z,fe[7]=+we[7]+te;break;case"V":fe[1]=+we[1]+te;break;case"H":fe[1]=+we[1]+z;break;case"R":for(var De=[z,te].concat(we.slice(1)),ze=2,$e=De.length;$e>ze;ze++)De[ze]=+De[ze]+z,De[++ze]=+De[ze]+te;U.pop(),U=U.concat(de(De,Te));break;case"O":U.pop(),(De=ne(z,te,we[1],we[2])).push(De[0]),U=U.concat(De);break;case"U":U.pop(),U=U.concat(ne(z,te,we[1],we[2],we[3])),fe=["U"].concat(U[U.length-1].slice(-2));break;case"M":ue=+we[1]+z,me=+we[2]+te;default:for(ze=1,$e=we.length;$e>ze;ze++)fe[ze]=+we[ze]+(ze%2?z:te)}else if("R"==ke)De=[z,te].concat(we.slice(1)),U.pop(),U=U.concat(de(De,Te)),fe=["R"].concat(we.slice(-2));else if("O"==ke)U.pop(),(De=ne(z,te,we[1],we[2])).push(De[0]),U=U.concat(De);else if("U"==ke)U.pop(),U=U.concat(ne(z,te,we[1],we[2],we[3])),fe=["U"].concat(U[U.length-1].slice(-2));else for(var We=0,Ke=we.length;Ke>We;We++)fe[We]=we[We];if("O"!=(ke=ke.toUpperCase()))switch(fe[0]){case"Z":z=+ue,te=+me;break;case"H":z=fe[1];break;case"V":te=fe[1];break;case"M":ue=fe[fe.length-2],me=fe[fe.length-1];default:z=fe[fe.length-2],te=fe[fe.length-1]}}return U.toString=u,_e.abs=f(U),U}function ee(ge,_e,ke,U){return[ge,_e,ke,U,ke,U]}function J(ge,_e,ke,U,z,te){var ue=.3333333333333333,me=2/3;return[ue*ge+me*ke,ue*_e+me*U,ue*z+me*ke,ue*te+me*U,z,te]}function ie(ge,_e,ke,U,z,te,ue,me,he,fe){var we,Te=120*re/180,Pe=re/180*(+z||0),Ue=[],De=s._.cacher(function(yr,jr,Vt){return{x:yr*H.cos(Vt)-jr*H.sin(Vt),y:yr*H.sin(Vt)+jr*H.cos(Vt)}});if(!ke||!U)return[ge,_e,me,he,me,he];if(fe)lt=fe[0],tt=fe[1],He=fe[2],ot=fe[3];else{ge=(we=De(ge,_e,-Pe)).x,_e=we.y,me=(we=De(me,he,-Pe)).x,he=we.y;var ze=(H.cos(re/180*z),H.sin(re/180*z),(ge-me)/2),$e=(_e-he)/2,We=ze*ze/(ke*ke)+$e*$e/(U*U);We>1&&(ke*=We=H.sqrt(We),U*=We);var Ke=ke*ke,et=U*U,Xe=(te==ue?-1:1)*H.sqrt(Fe((Ke*et-Ke*$e*$e-et*ze*ze)/(Ke*$e*$e+et*ze*ze))),He=Xe*ke*$e/U+(ge+me)/2,ot=Xe*-U*ze/ke+(_e+he)/2,lt=H.asin(((_e-ot)/U).toFixed(9)),tt=H.asin(((he-ot)/U).toFixed(9));0>(lt=He>ge?re-lt:lt)&&(lt=2*re+lt),0>(tt=He>me?re-tt:tt)&&(tt=2*re+tt),ue&&lt>tt&&(lt-=2*re),!ue&&tt>lt&&(tt-=2*re)}var dr=tt-lt;if(Fe(dr)>Te){var Fr=tt,kn=me,En=he;tt=lt+Te*(ue&&tt>lt?1:-1),Ue=ie(me=He+ke*H.cos(tt),he=ot+U*H.sin(tt),ke,U,z,0,ue,kn,En,[tt,Fr,He,ot])}dr=tt-lt;var An=H.cos(lt),Fn=H.sin(lt),Cn=H.cos(tt),Pt=H.sin(tt),Wt=H.tan(dr/4),Nt=4/3*ke*Wt,$t=4/3*U*Wt,Cr=[ge,_e],Bt=[ge+Nt*Fn,_e-$t*An],Sr=[me+Nt*Pt,he-$t*Cn],vr=[me,he];if(Bt[0]=2*Cr[0]-Bt[0],Bt[1]=2*Cr[1]-Bt[1],fe)return[Bt,Sr,vr].concat(Ue);for(var Tr=[],Ct=0,Sn=(Ue=[Bt,Sr,vr].concat(Ue).join().split(",")).length;Sn>Ct;Ct++)Tr[Ct]=Ct%2?De(Ue[Ct-1],Ue[Ct],Pe).y:De(Ue[Ct],Ue[Ct+1],Pe).x;return Tr}function oe(ge,_e,ke,U,z,te,ue,me){for(var he,fe,we,Te,Pe,Ue,De,ze,$e=[],We=[[],[]],Ke=0;2>Ke;++Ke)if(0==Ke?(fe=6*ge-12*ke+6*z,he=-3*ge+9*ke-9*z+3*ue,we=3*ke-3*ge):(fe=6*_e-12*U+6*te,he=-3*_e+9*U-9*te+3*me,we=3*U-3*_e),Fe(he)<1e-12){if(Fe(fe)<1e-12)continue;(Te=-we/fe)>0&&1>Te&&$e.push(Te)}else De=fe*fe-4*we*he,ze=H.sqrt(De),0>De||((Pe=(-fe+ze)/(2*he))>0&&1>Pe&&$e.push(Pe),(Ue=(-fe-ze)/(2*he))>0&&1>Ue&&$e.push(Ue));for(var et,Xe=$e.length,He=Xe;Xe--;)et=1-(Te=$e[Xe]),We[0][Xe]=et*et*et*ge+3*et*et*Te*ke+3*et*Te*Te*z+Te*Te*Te*ue,We[1][Xe]=et*et*et*_e+3*et*et*Te*U+3*et*Te*Te*te+Te*Te*Te*me;return We[0][He]=ge,We[1][He]=_e,We[0][He+1]=ue,We[1][He+1]=me,We[0].length=We[1].length=He+2,{min:{x:ve.apply(0,We[0]),y:ve.apply(0,We[1])},max:{x:ae.apply(0,We[0]),y:ae.apply(0,We[1])}}}function ye(ge,_e){var ke=!_e&&r(ge);if(!_e&&ke.curve)return f(ke.curve);for(var U=$(ge),z=_e&&$(_e),te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ue={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me=function(Xe,He,ot){var lt,tt;if(!Xe)return["C",He.x,He.y,He.x,He.y,He.x,He.y];switch(!(Xe[0]in{T:1,Q:1})&&(He.qx=He.qy=null),Xe[0]){case"M":He.X=Xe[1],He.Y=Xe[2];break;case"A":Xe=["C"].concat(ie.apply(0,[He.x,He.y].concat(Xe.slice(1))));break;case"S":"C"==ot||"S"==ot?(lt=2*He.x-He.bx,tt=2*He.y-He.by):(lt=He.x,tt=He.y),Xe=["C",lt,tt].concat(Xe.slice(1));break;case"T":"Q"==ot||"T"==ot?(He.qx=2*He.x-He.qx,He.qy=2*He.y-He.qy):(He.qx=He.x,He.qy=He.y),Xe=["C"].concat(J(He.x,He.y,He.qx,He.qy,Xe[1],Xe[2]));break;case"Q":He.qx=Xe[1],He.qy=Xe[2],Xe=["C"].concat(J(He.x,He.y,Xe[1],Xe[2],Xe[3],Xe[4]));break;case"L":Xe=["C"].concat(ee(He.x,He.y,Xe[1],Xe[2]));break;case"H":Xe=["C"].concat(ee(He.x,He.y,Xe[1],He.y));break;case"V":Xe=["C"].concat(ee(He.x,He.y,He.x,Xe[1]));break;case"Z":Xe=["C"].concat(ee(He.x,He.y,He.X,He.Y))}return Xe},he=function(Xe,He){if(Xe[He].length>7){Xe[He].shift();for(var ot=Xe[He];ot.length;)we[He]="A",z&&(Te[He]="A"),Xe.splice(He++,0,["C"].concat(ot.splice(0,6)));Xe.splice(He,1),ze=ae(U.length,z&&z.length||0)}},fe=function(Xe,He,ot,lt,tt){Xe&&He&&"M"==Xe[tt][0]&&"M"!=He[tt][0]&&(He.splice(tt,0,["M",lt.x,lt.y]),ot.bx=0,ot.by=0,ot.x=Xe[tt][1],ot.y=Xe[tt][2],ze=ae(U.length,z&&z.length||0))},we=[],Te=[],Pe="",Ue="",De=0,ze=ae(U.length,z&&z.length||0);ze>De;De++){U[De]&&(Pe=U[De][0]),"C"!=Pe&&(we[De]=Pe,De&&(Ue=we[De-1])),U[De]=me(U[De],te,Ue),"A"!=we[De]&&"C"==Pe&&(we[De]="C"),he(U,De),z&&(z[De]&&(Pe=z[De][0]),"C"!=Pe&&(Te[De]=Pe,De&&(Ue=Te[De-1])),z[De]=me(z[De],ue,Ue),"A"!=Te[De]&&"C"==Pe&&(Te[De]="C"),he(z,De)),fe(U,z,te,ue,De),fe(z,U,ue,te,De);var $e=U[De],We=z&&z[De],Ke=$e.length,et=z&&We.length;te.x=$e[Ke-2],te.y=$e[Ke-1],te.bx=I($e[Ke-4])||te.x,te.by=I($e[Ke-3])||te.y,ue.bx=z&&(I(We[et-4])||ue.x),ue.by=z&&(I(We[et-3])||ue.y),ue.x=z&&We[et-2],ue.y=z&&We[et-1]}return z||(ke.curve=f(U)),z?[U,z]:U}function de(ge,_e){for(var ke=[],U=0,z=ge.length;z-2*!_e>U;U+=2){var te=[{x:+ge[U-2],y:+ge[U-1]},{x:+ge[U],y:+ge[U+1]},{x:+ge[U+2],y:+ge[U+3]},{x:+ge[U+4],y:+ge[U+5]}];_e?U?z-4==U?te[3]={x:+ge[0],y:+ge[1]}:z-2==U&&(te[2]={x:+ge[0],y:+ge[1]},te[3]={x:+ge[2],y:+ge[3]}):te[0]={x:+ge[z-2],y:+ge[z-1]}:z-4==U?te[3]=te[2]:U||(te[0]={x:+ge[U],y:+ge[U+1]}),ke.push(["C",(-te[0].x+6*te[1].x+te[2].x)/6,(-te[0].y+6*te[1].y+te[2].y)/6,(te[1].x+6*te[2].x-te[3].x)/6,(te[1].y+6*te[2].y-te[3].y)/6,te[2].x,te[2].y])}return ke}var le=w.prototype,Ce=s.is,Ie=s._.clone,Oe="hasOwnProperty",R=/,?([a-z]),?/gi,I=parseFloat,H=Math,re=H.PI,ve=H.min,ae=H.max,Ee=H.pow,Fe=H.abs,Re=m(1),Je=m(),Ve=m(0,1),it=s._unit2px,at={path:function(ge){return ge.attr("path")},circle:function(ge){var _e=it(ge);return ne(_e.cx,_e.cy,_e.r)},ellipse:function(ge){var _e=it(ge);return ne(_e.cx||0,_e.cy||0,_e.rx,_e.ry)},rect:function(ge){var _e=it(ge);return Y(_e.x||0,_e.y||0,_e.width,_e.height,_e.rx,_e.ry)},image:function(ge){var _e=it(ge);return Y(_e.x||0,_e.y||0,_e.width,_e.height)},line:function(ge){return"M"+[ge.attr("x1")||0,ge.attr("y1")||0,ge.attr("x2"),ge.attr("y2")]},polyline:function(ge){return"M"+ge.attr("points")},polygon:function(ge){return"M"+ge.attr("points")+"z"},deflt:function(ge){var _e=ge.node.getBBox();return Y(_e.x,_e.y,_e.width,_e.height)}};s.path=r,s.path.getTotalLength=Re,s.path.getPointAtLength=Je,s.path.getSubpath=function(ge,_e,ke){if(this.getTotalLength(ge)-ke<1e-6)return Ve(ge,_e).end;var U=Ve(ge,ke,1);return _e?Ve(U,_e).end:U},le.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},le.getPointAtLength=function(ge){return Je(this.attr("d"),ge)},le.getSubpath=function(ge,_e){return s.path.getSubpath(this.attr("d"),ge,_e)},s._.box=o,s.path.findDotsAtSegment=d,s.path.bezierBBox=a,s.path.isPointInsideBBox=v,s.closest=function(ge,_e,ke,U){for(var z=100,te=o(ge-z/2,_e-z/2,z,z),ue=[],me=ke[0].hasOwnProperty("x")?function(ze){return{x:ke[ze].x,y:ke[ze].y}}:function(ze){return{x:ke[ze],y:U[ze]}},he=0;1e6>=z&&!he;){for(var fe=0,we=ke.length;we>fe;fe++){var Te=me(fe);if(v(te,Te.x,Te.y)){he++,ue.push(Te);break}}he||(te=o(ge-(z*=2)/2,_e-z/2,z,z))}if(1e6!=z){var Pe,Ue=1/0;for(fe=0,we=ue.length;we>fe;fe++){var De=s.len(ge,_e,ue[fe].x,ue[fe].y);Ue>De&&(Ue=De,ue[fe].len=De,Pe=ue[fe])}return Pe}},s.path.isBBoxIntersect=E,s.path.intersection=function j(ge,_e){return q(ge,_e)},s.path.intersectionNumber=function D(ge,_e){return q(ge,_e,1)},s.path.isPointInside=function P(ge,_e,ke){var U=W(ge);return v(U,_e,ke)&&q(ge,[["M",_e,ke],["H",U.x2+10]],1)%2==1},s.path.getBBox=W,s.path.get=at,s.path.toRelative=function ce(ge){var _e=r(ge),ke=String.prototype.toLowerCase;if(_e.rel)return f(_e.rel);s.is(ge,"array")&&s.is(ge&&ge[0],"array")||(ge=s.parsePathString(ge));var U=[],z=0,te=0,ue=0,me=0,he=0;"M"==ge[0][0]&&(ue=z=ge[0][1],me=te=ge[0][2],he++,U.push(["M",z,te]));for(var fe=he,we=ge.length;we>fe;fe++){var Te=U[fe]=[],Pe=ge[fe];if(Pe[0]!=ke.call(Pe[0]))switch(Te[0]=ke.call(Pe[0]),Te[0]){case"a":Te[1]=Pe[1],Te[2]=Pe[2],Te[3]=Pe[3],Te[4]=Pe[4],Te[5]=Pe[5],Te[6]=+(Pe[6]-z).toFixed(3),Te[7]=+(Pe[7]-te).toFixed(3);break;case"v":Te[1]=+(Pe[1]-te).toFixed(3);break;case"m":ue=Pe[1],me=Pe[2];default:for(var Ue=1,De=Pe.length;De>Ue;Ue++)Te[Ue]=+(Pe[Ue]-(Ue%2?z:te)).toFixed(3)}else{Te=U[fe]=[],"m"==Pe[0]&&(ue=Pe[1]+z,me=Pe[2]+te);for(var ze=0,$e=Pe.length;$e>ze;ze++)U[fe][ze]=Pe[ze]}var We=U[fe].length;switch(U[fe][0]){case"z":z=ue,te=me;break;case"h":z+=+U[fe][We-1];break;case"v":te+=+U[fe][We-1];break;default:z+=+U[fe][We-2],te+=+U[fe][We-1]}}return U.toString=u,_e.rel=f(U),U},s.path.toAbsolute=$,s.path.toCubic=ye,s.path.map=function be(ge,_e){if(!_e)return ge;var ke,U,z,te,ue,me,he;for(z=0,ue=(ge=ye(ge)).length;ue>z;z++)for(te=1,me=(he=ge[z]).length;me>te;te+=2)ke=_e.x(he[te],he[te+1]),U=_e.y(he[te],he[te+1]),he[te]=ke,he[te+1]=U;return ge},s.path.toString=u,s.path.clone=f}),Q.plugin(function(s,w,c,e){var r=Math.max,o=Math.min,u=function(l){if(this.items=[],this.bindings={},this.length=0,this.type="set",l)for(var m=0,d=l.length;d>m;m++)l[m]&&(this[this.items.length]=this.items[this.items.length]=l[m],this.length++)},f=u.prototype;f.push=function(){for(var l,m,d=0,a=arguments.length;a>d;d++)(l=arguments[d])&&(this[m=this.items.length]=this.items[m]=l,this.length++);return this},f.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},f.forEach=function(l,m){for(var d=0,a=this.items.length;a>d;d++)if(!1===l.call(m,this.items[d],d))return this;return this},f.animate=function(l,m,d,a){"function"!=typeof d||d.length||(a=d,d=Z.linear),l instanceof s._.Animation&&(a=l.callback,d=l.easing,m=d.dur,l=l.attr);var v=arguments;if(s.is(l,"array")&&s.is(v[v.length-1],"array"))var E=!0;var F,B=function(){F?this.b=F:F=this.b},N=0,A=this,k=a&&function(){++N==A.length&&a.call(this)};return this.forEach(function(j,D){X.once("snap.animcreated."+j.id,B),E?v[D]&&j.animate.apply(j,v[D]):j.animate(l,m,d,k)})},f.remove=function(){for(;this.length;)this.pop().remove();return this},f.bind=function(l,m,d){var a={};if("function"==typeof m)this.bindings[l]=m;else{var v=d||l;this.bindings[l]=function(E){a[v]=E,m.attr(a)}}return this},f.attr=function(l){var m={};for(var d in l)this.bindings[d]?this.bindings[d](l[d]):m[d]=l[d];for(var a=0,v=this.items.length;v>a;a++)this.items[a].attr(m);return this},f.clear=function(){for(;this.length;)this.pop()},f.splice=function(l,m,d){l=0>l?r(this.length+l,0):l,m=r(0,o(this.length-l,m));var a,v=[],E=[],F=[];for(a=2;a<arguments.length;a++)F.push(arguments[a]);for(a=0;m>a;a++)E.push(this[l+a]);for(;a<this.length-l;a++)v.push(this[l+a]);var B=F.length;for(a=0;a<B+v.length;a++)this.items[l+a]=this[l+a]=B>a?F[a]:v[a-B];for(a=this.items.length=this.length-=m-B;this[a];)delete this[a++];return new u(E)},f.exclude=function(l){for(var m=0,d=this.length;d>m;m++)if(this[m]==l)return this.splice(m,1),!0;return!1},f.insertAfter=function(l){for(var m=this.items.length;m--;)this.items[m].insertAfter(l);return this},f.getBBox=function(){for(var l=[],m=[],d=[],a=[],v=this.items.length;v--;)if(!this.items[v].removed){var E=this.items[v].getBBox();l.push(E.x),m.push(E.y),d.push(E.x+E.width),a.push(E.y+E.height)}return{x:l=o.apply(0,l),y:m=o.apply(0,m),x2:d=r.apply(0,d),y2:a=r.apply(0,a),width:d-l,height:a-m,cx:l+(d-l)/2,cy:m+(a-m)/2}},f.clone=function(l){l=new u;for(var m=0,d=this.items.length;d>m;m++)l.push(this.items[m].clone());return l},f.toString=function(){return"Snap\u2018s set"},f.type="set",s.Set=u,s.set=function(){var l=new u;return arguments.length&&l.push.apply(l,Array.prototype.slice.call(arguments,0)),l}}),Q.plugin(function(s,w,c,e){function r(A){var k=A[0];switch(k.toLowerCase()){case"t":return[k,0,0];case"m":return[k,1,0,0,1,0,0];case"r":return 4==A.length?[k,0,A[2],A[3]]:[k,0];case"s":return 5==A.length?[k,1,1,A[3],A[4]]:3==A.length?[k,1,1]:[k,1]}}function u(A){return A}function f(A){return function(k){return+k.toFixed(3)+A}}function l(A){return A.join(" ")}function m(A){return s.rgb(A[0],A[1],A[2],A[3])}function d(A){var k,j,D,q,P,W,Y=0,ne=[];for(k=0,j=A.length;j>k;k++){for(P="[",W=['"'+A[k][0]+'"'],D=1,q=A[k].length;q>D;D++)W[D]="val["+Y+++"]";P+=W+"]",ne[k]=P}return Function("val","return Snap.path.toString.call(["+ne+"])")}function a(A){for(var k=[],j=0,D=A.length;D>j;j++)for(var q=1,P=A[j].length;P>q;q++)k.push(A[j][q]);return k}function v(A){return isFinite(A)}var F={},B=/[%a-z]+$/i,N=String;F.stroke=F.fill="colour",w.prototype.equal=function(A,k){return X("snap.util.equal",this,A,k).firstDefined()},X.on("snap.util.equal",function(A,k){var j,D,q=N(this.attr(A)||""),P=this;if("colour"==F[A])return j=s.color(q),D=s.color(k),{from:[j.r,j.g,j.b,j.opacity],to:[D.r,D.g,D.b,D.opacity],f:m};if("viewBox"==A)return{from:j=this.attr(A).vb.split(" ").map(Number),to:D=k.split(" ").map(Number),f:l};if("transform"==A||"gradientTransform"==A||"patternTransform"==A)return"string"==typeof k&&(k=N(k).replace(/\.{3}|\u2026/g,q)),function o(A,k,j){A=A||new s.Matrix,k=k||new s.Matrix,A=s.parseTransformString(A.toTransformString())||[],k=s.parseTransformString(k.toTransformString())||[];for(var D,q,P,W,Y=Math.max(A.length,k.length),ne=[],ce=[],$=0;Y>$;$++){if(P=A[$]||r(k[$]),W=k[$]||r(P),P[0]!=W[0]||"r"==P[0].toLowerCase()&&(P[2]!=W[2]||P[3]!=W[3])||"s"==P[0].toLowerCase()&&(P[3]!=W[3]||P[4]!=W[4])){A=s._.transform2matrix(A,j()),k=s._.transform2matrix(k,j()),ne=[["m",A.a,A.b,A.c,A.d,A.e,A.f]],ce=[["m",k.a,k.b,k.c,k.d,k.e,k.f]];break}for(ne[$]=[],ce[$]=[],D=0,q=Math.max(P.length,W.length);q>D;D++)D in P&&(ne[$][D]=P[D]),D in W&&(ce[$][D]=W[D])}return{from:a(ne),to:a(ce),f:d(ne)}}(q=this.matrix,k=s._.rgTransform.test(k)?s._.transform2matrix(k,this.getBBox()):s._.transform2matrix(s._.svgTransform2string(k),this.getBBox()),function(){return P.getBBox(1)});if("d"==A||"path"==A)return{from:a((j=s.path.toCubic(q,k))[0]),to:a(j[1]),f:d(j[0])};if("points"==A)return{from:j=N(q).split(s._.separator),to:D=N(k).split(s._.separator),f:function(ne){return ne}};if(v(q)&&v(k))return{from:parseFloat(q),to:parseFloat(k),f:u};var W=q.match(B),Y=N(k).match(B);return W&&function E(A,k){return!(!s.is(A,"array")||!s.is(k,"array"))&&A.toString()==k.toString()}(W,Y)?{from:parseFloat(q),to:parseFloat(k),f:f(W)}:{from:this.asPX(A),to:this.asPX(A,k),f:u}})}),Q.plugin(function(s,w,c,e){for(var r=w.prototype,u=("createTouch"in e.doc),f=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],l={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},m=function(k,j){var D="y"==k?"scrollTop":"scrollLeft",q=j&&j.node?j.node.ownerDocument:e.doc;return q[D in q.documentElement?"documentElement":"body"][D]},d=function(){return this.originalEvent.preventDefault()},a=function(){return this.originalEvent.stopPropagation()},v=function(k,j,D,q){var P=u&&l[j]?l[j]:j,W=function(Y){var ne=m("y",q),ce=m("x",q);if(u&&l.hasOwnProperty(j))for(var $=0,ee=Y.targetTouches&&Y.targetTouches.length;ee>$;$++)if(Y.targetTouches[$].target==k||k.contains(Y.targetTouches[$].target)){var J=Y;(Y=Y.targetTouches[$]).originalEvent=J,Y.preventDefault=d,Y.stopPropagation=a;break}var ie=Y.clientX+ce,oe=Y.clientY+ne;return D.call(q,Y,ie,oe)};return j!==P&&k.addEventListener(j,W,!1),k.addEventListener(P,W,!1),function(){return j!==P&&k.removeEventListener(j,W,!1),k.removeEventListener(P,W,!1),!0}},E=[],F=function(k){for(var j,D=k.clientX,q=k.clientY,P=m("y"),W=m("x"),Y=E.length;Y--;){if(j=E[Y],u){for(var ne,ce=k.touches&&k.touches.length;ce--;)if((ne=k.touches[ce]).identifier==j.el._drag.id||j.el.node.contains(ne.target)){D=ne.clientX,q=ne.clientY,(k.originalEvent?k.originalEvent:k).preventDefault();break}}else k.preventDefault();var $=j.el.node;$.nextSibling,$.parentNode,$.style.display,D+=W,q+=P,X("snap.drag.move."+j.el.id,j.move_scope||j.el,D-j.el._drag.x,q-j.el._drag.y,D,q,k)}},B=function(k){s.unmousemove(F).unmouseup(B);for(var j,D=E.length;D--;)(j=E[D]).el._drag={},X("snap.drag.end."+j.el.id,j.end_scope||j.start_scope||j.move_scope||j.el,k),X.off("snap.drag.*."+j.el.id);E=[]},N=f.length;N--;)!function(k){s[k]=r[k]=function(j,D){if(s.is(j,"function"))this.events=this.events||[],this.events.push({name:k,f:j,unbind:v(this.node||document,k,j,D||this)});else for(var q=0,P=this.events.length;P>q;q++)if(this.events[q].name==k)try{this.events[q].f.call(this)}catch{}return this},s["un"+k]=r["un"+k]=function(j){for(var D=this.events||[],q=D.length;q--;)if(D[q].name==k&&(D[q].f==j||!j))return D[q].unbind(),D.splice(q,1),!D.length&&delete this.events,this;return this}}(f[N]);r.hover=function(k,j,D,q){return this.mouseover(k,D).mouseout(j,q||D)},r.unhover=function(k,j){return this.unmouseover(k).unmouseout(j)};var A=[];r.drag=function(k,j,D,q,P,W){function Y(ee,J,ie){(ee.originalEvent||ee).preventDefault(),ce._drag.x=J,ce._drag.y=ie,ce._drag.id=ee.identifier,!E.length&&s.mousemove(F).mouseup(B),E.push({el:ce,move_scope:q,start_scope:P,end_scope:W}),j&&X.on("snap.drag.start."+ce.id,j),k&&X.on("snap.drag.move."+ce.id,k),D&&X.on("snap.drag.end."+ce.id,D),X("snap.drag.start."+ce.id,P||q||ce,J,ie,ee)}function ne(ee,J,ie){X("snap.draginit."+ce.id,ce,ee,J,ie)}var $,ce=this;return arguments.length?(X.on("snap.draginit."+ce.id,Y),ce._drag={},A.push({el:ce,start:Y,init:ne}),ce.mousedown(ne),ce):ce.drag(function(ee,J){this.attr({transform:$+($?"T":"t")+[ee,J]})},function(){$=this.transform().local})},r.undrag=function(){for(var k=A.length;k--;)A[k].el==this&&(this.unmousedown(A[k].init),A.splice(k,1),X.unbind("snap.drag.*."+this.id),X.unbind("snap.draginit."+this.id));return!A.length&&s.unmousemove(F).unmouseup(B),this}}),Q.plugin(function(s,w,c,e){var r=(w.prototype,c.prototype),o=/^\s*url\((.+)\)/,u=String,f=s._.$;s.filter={},r.filter=function(l){var m=this;"svg"!=m.type&&(m=m.paper);var d=s.parse(u(l)),a=s._.id(),v=(m.node.offsetWidth,m.node.offsetHeight,f("filter"));return f(v,{id:a,filterUnits:"userSpaceOnUse"}),v.appendChild(d.node),m.defs.appendChild(v),new w(v)},X.on("snap.util.getattr.filter",function(){X.stop();var l=f(this.node,"filter");if(l){var m=u(l).match(o);return m&&s.select(m[1])}}),X.on("snap.util.attr.filter",function(l){if(l instanceof w&&"filter"==l.type){X.stop();var m=l.node.id;m||(f(l.node,{id:l.id}),m=l.id),f(this.node,{filter:s.url(m)})}l&&"none"!=l||(X.stop(),this.node.removeAttribute("filter"))}),s.filter.blur=function(l,m){null==l&&(l=2);var d=null==m?l:[l,m];return s.format('<feGaussianBlur stdDeviation="{def}"/>',{def:d})},s.filter.blur.toString=function(){return this()},s.filter.shadow=function(l,m,d,a,v){return null==v&&(null==a?(v=d,d=4,a="#000"):(v=a,a=d,d=4)),null==d&&(d=4),null==v&&(v=1),null==l&&(l=0,m=2),null==m&&(m=l),a=s.color(a),s.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:a,dx:l,dy:m,blur:d,opacity:v})},s.filter.shadow.toString=function(){return this()},s.filter.grayscale=function(l){return null==l&&(l=1),s.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-l),b:.7152-.7152*(1-l),c:.0722-.0722*(1-l),d:.2126-.2126*(1-l),e:.7152+.2848*(1-l),f:.0722-.0722*(1-l),g:.2126-.2126*(1-l),h:.0722+.9278*(1-l)})},s.filter.grayscale.toString=function(){return this()},s.filter.sepia=function(l){return null==l&&(l=1),s.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-l),b:.769-.769*(1-l),c:.189-.189*(1-l),d:.349-.349*(1-l),e:.686+.314*(1-l),f:.168-.168*(1-l),g:.272-.272*(1-l),h:.534-.534*(1-l),i:.131+.869*(1-l)})},s.filter.sepia.toString=function(){return this()},s.filter.saturate=function(l){return null==l&&(l=1),s.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-l})},s.filter.saturate.toString=function(){return this()},s.filter.hueRotate=function(l){return l=l||0,s.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:l})},s.filter.hueRotate.toString=function(){return this()},s.filter.invert=function(l){return null==l&&(l=1),s.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:l,amount2:1-l})},s.filter.invert.toString=function(){return this()},s.filter.brightness=function(l){return null==l&&(l=1),s.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:l})},s.filter.brightness.toString=function(){return this()},s.filter.contrast=function(l){return null==l&&(l=1),s.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:l,amount2:.5-l/2})},s.filter.contrast.toString=function(){return this()}}),Q.plugin(function(s,w,c,e,r){var o=s._.box,u=s.is,f=/^[^a-z]*([tbmlrc])/i,l=function(){return"T"+this.dx+","+this.dy};w.prototype.getAlign=function(m,d){null==d&&u(m,"string")&&(d=m,m=null);var a=(m=m||this.paper).getBBox?m.getBBox():o(m),v=this.getBBox(),E={};switch(d=(d=d&&d.match(f))?d[1].toLowerCase():"c"){case"t":E.dx=0,E.dy=a.y-v.y;break;case"b":E.dx=0,E.dy=a.y2-v.y2;break;case"m":E.dx=0,E.dy=a.cy-v.cy;break;case"l":E.dx=a.x-v.x,E.dy=0;break;case"r":E.dx=a.x2-v.x2,E.dy=0;break;default:E.dx=a.cx-v.cx,E.dy=0}return E.toString=l,E},w.prototype.align=function(m,d){return this.transform("..."+this.getAlign(m,d))}}),Q.plugin(function(s,w,c,e){function r(Y){Y=Y.split(/(?=#)/);var ne=new String(Y[5]);return ne[50]=Y[0],ne[100]=Y[1],ne[200]=Y[2],ne[300]=Y[3],ne[400]=Y[4],ne[500]=Y[5],ne[600]=Y[6],ne[700]=Y[7],ne[800]=Y[8],ne[900]=Y[9],Y[10]&&(ne.A100=Y[10],ne.A200=Y[11],ne.A400=Y[12],ne.A700=Y[13]),ne}s.mui={},s.flat={},s.mui.red=r("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),s.mui.pink=r("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),s.mui.purple=r("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),s.mui.deeppurple=r("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),s.mui.indigo=r("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),s.mui.blue=r("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),s.mui.lightblue=r("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),s.mui.cyan=r("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),s.mui.teal=r("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),s.mui.green=r("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),s.mui.lightgreen=r("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),s.mui.lime=r("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),s.mui.yellow=r("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),s.mui.amber=r("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),s.mui.orange=r("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),s.mui.deeporange=r("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),s.mui.brown=r("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),s.mui.grey=r("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),s.mui.bluegrey=r("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),s.flat.turquoise="#1abc9c",s.flat.greensea="#16a085",s.flat.sunflower="#f1c40f",s.flat.orange="#f39c12",s.flat.emerland="#2ecc71",s.flat.nephritis="#27ae60",s.flat.carrot="#e67e22",s.flat.pumpkin="#d35400",s.flat.peterriver="#3498db",s.flat.belizehole="#2980b9",s.flat.alizarin="#e74c3c",s.flat.pomegranate="#c0392b",s.flat.amethyst="#9b59b6",s.flat.wisteria="#8e44ad",s.flat.clouds="#ecf0f1",s.flat.silver="#bdc3c7",s.flat.wetasphalt="#34495e",s.flat.midnightblue="#2c3e50",s.flat.concrete="#95a5a6",s.flat.asbestos="#7f8c8d",s.importMUIColors=function(){for(var Y in s.mui)s.mui.hasOwnProperty(Y)&&(G[Y]=s.mui[Y])}}),Q}),function(G){"object"==typeof exports&&typeof module<"u"?module.exports=G():"function"==typeof define&&define.amd?define([],G):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).rdfstore=G()}(function(){var define,module,exports;return function G(X,Z,Q){function s(e,r){if(!Z[e]){if(!X[e]){var o="function"==typeof require&&require;if(!r&&o)return o(e,!0);if(w)return w(e,!0);var u=new Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}var f=Z[e]={exports:{}};X[e][0].call(f.exports,function(l){return s(X[e][1][l]||l)},f,f.exports,G,X,Z,Q)}return Z[e].exports}for(var w="function"==typeof require&&require,c=0;c<Q.length;c++)s(Q[c]);return s}({1:[function(G,X,Z){(function(Q){(function(){"use strict";var s=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],w=typeof globalThis>"u"?Q:globalThis;X.exports=function(){for(var c=[],e=0;e<s.length;e++)"function"==typeof w[s[e]]&&(c[c.length]=s[e]);return c}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(G,X,Z){"use strict";Z.byteLength=function(f){var l=o(f),m=l[0],d=l[1];return 3*(m+d)/4-d},Z.toByteArray=function(f){var l,m,k,d=o(f),a=d[0],v=d[1],E=new w(3*(a+(k=v))/4-k),F=0,B=v>0?a-4:a;for(m=0;m<B;m+=4)l=s[f.charCodeAt(m)]<<18|s[f.charCodeAt(m+1)]<<12|s[f.charCodeAt(m+2)]<<6|s[f.charCodeAt(m+3)],E[F++]=l>>16&255,E[F++]=l>>8&255,E[F++]=255&l;return 2===v&&(l=s[f.charCodeAt(m)]<<2|s[f.charCodeAt(m+1)]>>4,E[F++]=255&l),1===v&&(l=s[f.charCodeAt(m)]<<10|s[f.charCodeAt(m+1)]<<4|s[f.charCodeAt(m+2)]>>2,E[F++]=l>>8&255,E[F++]=255&l),E},Z.fromByteArray=function(f){for(var l,m=f.length,d=m%3,a=[],v=0,E=m-d;v<E;v+=16383)a.push(u(f,v,v+16383>E?E:v+16383));return 1===d?(l=f[m-1],a.push(Q[l>>2]+Q[l<<4&63]+"==")):2===d&&(l=(f[m-2]<<8)+f[m-1],a.push(Q[l>>10]+Q[l>>4&63]+Q[l<<2&63]+"=")),a.join("")};for(var Q=[],s=[],w=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=c.length;e<r;++e)Q[e]=c[e],s[c.charCodeAt(e)]=e;function o(f){var l=f.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=f.indexOf("=");return-1===m&&(m=l),[m,m===l?0:4-m%4]}function u(f,l,m){for(var d,a,v=[],E=l;E<m;E+=3)d=(f[E]<<16&16711680)+(f[E+1]<<8&65280)+(255&f[E+2]),v.push(Q[(a=d)>>18&63]+Q[a>>12&63]+Q[a>>6&63]+Q[63&a]);return v.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],3:[function(G,X,Z){},{}],4:[function(G,X,Z){arguments[4][3][0].apply(Z,arguments)},{dup:3}],5:[function(G,X,Z){(function(Q){(function(){"use strict";var s=G("base64-js"),w=G("ieee754");Z.Buffer=r,Z.SlowBuffer=function(R){return+R!=R&&(R=0),r.alloc(+R)},Z.INSPECT_MAX_BYTES=50;var c=2147483647;function e(R){if(R>c)throw new RangeError('The value "'+R+'" is invalid for option "size"');var I=new Uint8Array(R);return I.__proto__=r.prototype,I}function r(R,I,H){if("number"==typeof R){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return f(R)}return o(R,I,H)}function o(R,I,H){if("string"==typeof R)return function(ae,Ee){if("string"==typeof Ee&&""!==Ee||(Ee="utf8"),!r.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);var Fe=0|d(ae,Ee),Re=e(Fe),Je=Re.write(ae,Ee);return Je!==Fe&&(Re=Re.slice(0,Je)),Re}(R,I);if(ArrayBuffer.isView(R))return l(R);if(null==R)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(Ie(R,ArrayBuffer)||R&&Ie(R.buffer,ArrayBuffer))return function(ae,Ee,Fe){if(Ee<0||ae.byteLength<Ee)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<Ee+(Fe||0))throw new RangeError('"length" is outside of buffer bounds');var Re;return(Re=void 0===Ee&&void 0===Fe?new Uint8Array(ae):void 0===Fe?new Uint8Array(ae,Ee):new Uint8Array(ae,Ee,Fe)).__proto__=r.prototype,Re}(R,I,H);if("number"==typeof R)throw new TypeError('The "value" argument must not be of type number. Received type number');var re=R.valueOf&&R.valueOf();if(null!=re&&re!==R)return r.from(re,I,H);var ve=function(ae){if(r.isBuffer(ae)){var Ee=0|m(ae.length),Fe=e(Ee);return 0===Fe.length||ae.copy(Fe,0,0,Ee),Fe}return void 0!==ae.length?"number"!=typeof ae.length||Oe(ae.length)?e(0):l(ae):"Buffer"===ae.type&&Array.isArray(ae.data)?l(ae.data):void 0}(R);if(ve)return ve;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof R[Symbol.toPrimitive])return r.from(R[Symbol.toPrimitive]("string"),I,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function u(R){if("number"!=typeof R)throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function f(R){return u(R),e(R<0?0:0|m(R))}function l(R){for(var I=R.length<0?0:0|m(R.length),H=e(I),re=0;re<I;re+=1)H[re]=255&R[re];return H}function m(R){if(R>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|R}function d(R,I){if(r.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||Ie(R,ArrayBuffer))return R.byteLength;if("string"!=typeof R)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var H=R.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===H)return 0;for(var ve=!1;;)switch(I){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return de(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return le(R).length;default:if(ve)return re?-1:de(R).length;I=(""+I).toLowerCase(),ve=!0}}function a(R,I,H){var re=R[I];R[I]=R[H],R[H]=re}function v(R,I,H,re,ve){if(0===R.length)return-1;if("string"==typeof H?(re=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),Oe(H=+H)&&(H=ve?0:R.length-1),H<0&&(H=R.length+H),H>=R.length){if(ve)return-1;H=R.length-1}else if(H<0){if(!ve)return-1;H=0}if("string"==typeof I&&(I=r.from(I,re)),r.isBuffer(I))return 0===I.length?-1:E(R,I,H,re,ve);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?ve?Uint8Array.prototype.indexOf.call(R,I,H):Uint8Array.prototype.lastIndexOf.call(R,I,H):E(R,[I],H,re,ve);throw new TypeError("val must be string, number or Buffer")}function E(R,I,H,re,ve){var ae,Ee=1,Fe=R.length,Re=I.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(R.length<2||I.length<2)return-1;Ee=2,Fe/=2,Re/=2,H/=2}function Je(ge,_e){return 1===Ee?ge[_e]:ge.readUInt16BE(_e*Ee)}if(ve){var Ve=-1;for(ae=H;ae<Fe;ae++)if(Je(R,ae)===Je(I,-1===Ve?0:ae-Ve)){if(-1===Ve&&(Ve=ae),ae-Ve+1===Re)return Ve*Ee}else-1!==Ve&&(ae-=ae-Ve),Ve=-1}else for(H+Re>Fe&&(H=Fe-Re),ae=H;ae>=0;ae--){for(var it=!0,at=0;at<Re;at++)if(Je(R,ae+at)!==Je(I,at)){it=!1;break}if(it)return ae}return-1}function F(R,I,H,re){H=Number(H)||0;var ve=R.length-H;re?(re=Number(re))>ve&&(re=ve):re=ve;var ae=I.length;re>ae/2&&(re=ae/2);for(var Ee=0;Ee<re;++Ee){var Fe=parseInt(I.substr(2*Ee,2),16);if(Oe(Fe))return Ee;R[H+Ee]=Fe}return Ee}function B(R,I,H,re){return Ce(de(I,R.length-H),R,H,re)}function N(R,I,H,re){return Ce(function(ve){for(var ae=[],Ee=0;Ee<ve.length;++Ee)ae.push(255&ve.charCodeAt(Ee));return ae}(I),R,H,re)}function A(R,I,H,re){return N(R,I,H,re)}function k(R,I,H,re){return Ce(le(I),R,H,re)}function j(R,I,H,re){return Ce(function(ve,ae){for(var Ee,Fe,Re,Je=[],Ve=0;Ve<ve.length&&!((ae-=2)<0);++Ve)Fe=(Ee=ve.charCodeAt(Ve))>>8,Re=Ee%256,Je.push(Re),Je.push(Fe);return Je}(I,R.length-H),R,H,re)}function D(R,I,H){return 0===I&&H===R.length?s.fromByteArray(R):s.fromByteArray(R.slice(I,H))}function q(R,I,H){H=Math.min(R.length,H);for(var re=[],ve=I;ve<H;){var ae,Ee,Fe,Re,Je=R[ve],Ve=null,it=Je>239?4:Je>223?3:Je>191?2:1;if(ve+it<=H)switch(it){case 1:Je<128&&(Ve=Je);break;case 2:128==(192&(ae=R[ve+1]))&&(Re=(31&Je)<<6|63&ae)>127&&(Ve=Re);break;case 3:ae=R[ve+1],Ee=R[ve+2],128==(192&ae)&&128==(192&Ee)&&(Re=(15&Je)<<12|(63&ae)<<6|63&Ee)>2047&&(Re<55296||Re>57343)&&(Ve=Re);break;case 4:ae=R[ve+1],Ee=R[ve+2],Fe=R[ve+3],128==(192&ae)&&128==(192&Ee)&&128==(192&Fe)&&(Re=(15&Je)<<18|(63&ae)<<12|(63&Ee)<<6|63&Fe)>65535&&Re<1114112&&(Ve=Re)}null===Ve?(Ve=65533,it=1):Ve>65535&&(Ve-=65536,re.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),re.push(Ve),ve+=it}return function(at){var ge=at.length;if(ge<=P)return String.fromCharCode.apply(String,at);for(var _e="",ke=0;ke<ge;)_e+=String.fromCharCode.apply(String,at.slice(ke,ke+=P));return _e}(re)}Z.kMaxLength=c,r.TYPED_ARRAY_SUPPORT=function(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===R.foo()}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(R,I,H){return o(R,I,H)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(R,I,H){return ve=I,ae=H,u(re=R),re<=0?e(re):void 0!==ve?"string"==typeof ae?e(re).fill(ve,ae):e(re).fill(ve):e(re);var re,ve,ae},r.allocUnsafe=function(R){return f(R)},r.allocUnsafeSlow=function(R){return f(R)},r.isBuffer=function(R){return null!=R&&!0===R._isBuffer&&R!==r.prototype},r.compare=function(R,I){if(Ie(R,Uint8Array)&&(R=r.from(R,R.offset,R.byteLength)),Ie(I,Uint8Array)&&(I=r.from(I,I.offset,I.byteLength)),!r.isBuffer(R)||!r.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===I)return 0;for(var H=R.length,re=I.length,ve=0,ae=Math.min(H,re);ve<ae;++ve)if(R[ve]!==I[ve]){H=R[ve],re=I[ve];break}return H<re?-1:re<H?1:0},r.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(R,I){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(0===R.length)return r.alloc(0);var H;if(void 0===I)for(I=0,H=0;H<R.length;++H)I+=R[H].length;var re=r.allocUnsafe(I),ve=0;for(H=0;H<R.length;++H){var ae=R[H];if(Ie(ae,Uint8Array)&&(ae=r.from(ae)),!r.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(re,ve),ve+=ae.length}return re},r.byteLength=d,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<R;I+=2)a(this,I,I+1);return this},r.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<R;I+=4)a(this,I,I+3),a(this,I+1,I+2);return this},r.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<R;I+=8)a(this,I,I+7),a(this,I+1,I+6),a(this,I+2,I+5),a(this,I+3,I+4);return this},r.prototype.toString=function(){var R=this.length;return 0===R?"":0===arguments.length?q(this,0,R):function(I,H,re){var ve=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===re||re>this.length)&&(re=this.length),re<=0)||(re>>>=0)<=(H>>>=0))return"";for(I||(I="utf8");;)switch(I){case"hex":return ne(this,H,re);case"utf8":case"utf-8":return q(this,H,re);case"ascii":return W(this,H,re);case"latin1":case"binary":return Y(this,H,re);case"base64":return D(this,H,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,H,re);default:if(ve)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),ve=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(R){if(!r.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||0===r.compare(this,R)},r.prototype.inspect=function(){var R="",I=Z.INSPECT_MAX_BYTES;return R=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(R+=" ... "),"<Buffer "+R+">"},r.prototype.compare=function(R,I,H,re,ve){if(Ie(R,Uint8Array)&&(R=r.from(R,R.offset,R.byteLength)),!r.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(void 0===I&&(I=0),void 0===H&&(H=R?R.length:0),void 0===re&&(re=0),void 0===ve&&(ve=this.length),I<0||H>R.length||re<0||ve>this.length)throw new RangeError("out of range index");if(re>=ve&&I>=H)return 0;if(re>=ve)return-1;if(I>=H)return 1;if(this===R)return 0;for(var ae=(ve>>>=0)-(re>>>=0),Ee=(H>>>=0)-(I>>>=0),Fe=Math.min(ae,Ee),Re=this.slice(re,ve),Je=R.slice(I,H),Ve=0;Ve<Fe;++Ve)if(Re[Ve]!==Je[Ve]){ae=Re[Ve],Ee=Je[Ve];break}return ae<Ee?-1:Ee<ae?1:0},r.prototype.includes=function(R,I,H){return-1!==this.indexOf(R,I,H)},r.prototype.indexOf=function(R,I,H){return v(this,R,I,H,!0)},r.prototype.lastIndexOf=function(R,I,H){return v(this,R,I,H,!1)},r.prototype.write=function(R,I,H,re){if(void 0===I)re="utf8",H=this.length,I=0;else if(void 0===H&&"string"==typeof I)re=I,H=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(H)?(H>>>=0,void 0===re&&(re="utf8")):(re=H,H=void 0)}var ve=this.length-I;if((void 0===H||H>ve)&&(H=ve),R.length>0&&(H<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var ae=!1;;)switch(re){case"hex":return F(this,R,I,H);case"utf8":case"utf-8":return B(this,R,I,H);case"ascii":return N(this,R,I,H);case"latin1":case"binary":return A(this,R,I,H);case"base64":return k(this,R,I,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,R,I,H);default:if(ae)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),ae=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function W(R,I,H){var re="";H=Math.min(R.length,H);for(var ve=I;ve<H;++ve)re+=String.fromCharCode(127&R[ve]);return re}function Y(R,I,H){var re="";H=Math.min(R.length,H);for(var ve=I;ve<H;++ve)re+=String.fromCharCode(R[ve]);return re}function ne(R,I,H){var re=R.length;(!I||I<0)&&(I=0),(!H||H<0||H>re)&&(H=re);for(var ve="",ae=I;ae<H;++ae)ve+=be(R[ae]);return ve}function ce(R,I,H){for(var re=R.slice(I,H),ve="",ae=0;ae<re.length;ae+=2)ve+=String.fromCharCode(re[ae]+256*re[ae+1]);return ve}function $(R,I,H){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(R+I>H)throw new RangeError("Trying to access beyond buffer length")}function ee(R,I,H,re,ve,ae){if(!r.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>ve||I<ae)throw new RangeError('"value" argument is out of bounds');if(H+re>R.length)throw new RangeError("Index out of range")}function J(R,I,H,re,ve,ae){if(H+re>R.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function ie(R,I,H,re,ve){return I=+I,H>>>=0,ve||J(R,0,H,4),w.write(R,I,H,re,23,4),H+4}function oe(R,I,H,re,ve){return I=+I,H>>>=0,ve||J(R,0,H,8),w.write(R,I,H,re,52,8),H+8}r.prototype.slice=function(R,I){var H=this.length;(R=~~R)<0?(R+=H)<0&&(R=0):R>H&&(R=H),(I=void 0===I?H:~~I)<0?(I+=H)<0&&(I=0):I>H&&(I=H),I<R&&(I=R);var re=this.subarray(R,I);return re.__proto__=r.prototype,re},r.prototype.readUIntLE=function(R,I,H){R>>>=0,I>>>=0,H||$(R,I,this.length);for(var re=this[R],ve=1,ae=0;++ae<I&&(ve*=256);)re+=this[R+ae]*ve;return re},r.prototype.readUIntBE=function(R,I,H){R>>>=0,I>>>=0,H||$(R,I,this.length);for(var re=this[R+--I],ve=1;I>0&&(ve*=256);)re+=this[R+--I]*ve;return re},r.prototype.readUInt8=function(R,I){return R>>>=0,I||$(R,1,this.length),this[R]},r.prototype.readUInt16LE=function(R,I){return R>>>=0,I||$(R,2,this.length),this[R]|this[R+1]<<8},r.prototype.readUInt16BE=function(R,I){return R>>>=0,I||$(R,2,this.length),this[R]<<8|this[R+1]},r.prototype.readUInt32LE=function(R,I){return R>>>=0,I||$(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},r.prototype.readUInt32BE=function(R,I){return R>>>=0,I||$(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},r.prototype.readIntLE=function(R,I,H){R>>>=0,I>>>=0,H||$(R,I,this.length);for(var re=this[R],ve=1,ae=0;++ae<I&&(ve*=256);)re+=this[R+ae]*ve;return re>=(ve*=128)&&(re-=Math.pow(2,8*I)),re},r.prototype.readIntBE=function(R,I,H){R>>>=0,I>>>=0,H||$(R,I,this.length);for(var re=I,ve=1,ae=this[R+--re];re>0&&(ve*=256);)ae+=this[R+--re]*ve;return ae>=(ve*=128)&&(ae-=Math.pow(2,8*I)),ae},r.prototype.readInt8=function(R,I){return R>>>=0,I||$(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},r.prototype.readInt16LE=function(R,I){R>>>=0,I||$(R,2,this.length);var H=this[R]|this[R+1]<<8;return 32768&H?4294901760|H:H},r.prototype.readInt16BE=function(R,I){R>>>=0,I||$(R,2,this.length);var H=this[R+1]|this[R]<<8;return 32768&H?4294901760|H:H},r.prototype.readInt32LE=function(R,I){return R>>>=0,I||$(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},r.prototype.readInt32BE=function(R,I){return R>>>=0,I||$(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},r.prototype.readFloatLE=function(R,I){return R>>>=0,I||$(R,4,this.length),w.read(this,R,!0,23,4)},r.prototype.readFloatBE=function(R,I){return R>>>=0,I||$(R,4,this.length),w.read(this,R,!1,23,4)},r.prototype.readDoubleLE=function(R,I){return R>>>=0,I||$(R,8,this.length),w.read(this,R,!0,52,8)},r.prototype.readDoubleBE=function(R,I){return R>>>=0,I||$(R,8,this.length),w.read(this,R,!1,52,8)},r.prototype.writeUIntLE=function(R,I,H,re){R=+R,I>>>=0,H>>>=0,re||ee(this,R,I,H,Math.pow(2,8*H)-1,0);var ve=1,ae=0;for(this[I]=255&R;++ae<H&&(ve*=256);)this[I+ae]=R/ve&255;return I+H},r.prototype.writeUIntBE=function(R,I,H,re){R=+R,I>>>=0,H>>>=0,re||ee(this,R,I,H,Math.pow(2,8*H)-1,0);var ve=H-1,ae=1;for(this[I+ve]=255&R;--ve>=0&&(ae*=256);)this[I+ve]=R/ae&255;return I+H},r.prototype.writeUInt8=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,1,255,0),this[I]=255&R,I+1},r.prototype.writeUInt16LE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,2,65535,0),this[I]=255&R,this[I+1]=R>>>8,I+2},r.prototype.writeUInt16BE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,2,65535,0),this[I]=R>>>8,this[I+1]=255&R,I+2},r.prototype.writeUInt32LE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,4,4294967295,0),this[I+3]=R>>>24,this[I+2]=R>>>16,this[I+1]=R>>>8,this[I]=255&R,I+4},r.prototype.writeUInt32BE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,4,4294967295,0),this[I]=R>>>24,this[I+1]=R>>>16,this[I+2]=R>>>8,this[I+3]=255&R,I+4},r.prototype.writeIntLE=function(R,I,H,re){if(R=+R,I>>>=0,!re){var ve=Math.pow(2,8*H-1);ee(this,R,I,H,ve-1,-ve)}var ae=0,Ee=1,Fe=0;for(this[I]=255&R;++ae<H&&(Ee*=256);)R<0&&0===Fe&&0!==this[I+ae-1]&&(Fe=1),this[I+ae]=(R/Ee>>0)-Fe&255;return I+H},r.prototype.writeIntBE=function(R,I,H,re){if(R=+R,I>>>=0,!re){var ve=Math.pow(2,8*H-1);ee(this,R,I,H,ve-1,-ve)}var ae=H-1,Ee=1,Fe=0;for(this[I+ae]=255&R;--ae>=0&&(Ee*=256);)R<0&&0===Fe&&0!==this[I+ae+1]&&(Fe=1),this[I+ae]=(R/Ee>>0)-Fe&255;return I+H},r.prototype.writeInt8=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,1,127,-128),R<0&&(R=255+R+1),this[I]=255&R,I+1},r.prototype.writeInt16LE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,2,32767,-32768),this[I]=255&R,this[I+1]=R>>>8,I+2},r.prototype.writeInt16BE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,2,32767,-32768),this[I]=R>>>8,this[I+1]=255&R,I+2},r.prototype.writeInt32LE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,4,2147483647,-2147483648),this[I]=255&R,this[I+1]=R>>>8,this[I+2]=R>>>16,this[I+3]=R>>>24,I+4},r.prototype.writeInt32BE=function(R,I,H){return R=+R,I>>>=0,H||ee(this,R,I,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[I]=R>>>24,this[I+1]=R>>>16,this[I+2]=R>>>8,this[I+3]=255&R,I+4},r.prototype.writeFloatLE=function(R,I,H){return ie(this,R,I,!0,H)},r.prototype.writeFloatBE=function(R,I,H){return ie(this,R,I,!1,H)},r.prototype.writeDoubleLE=function(R,I,H){return oe(this,R,I,!0,H)},r.prototype.writeDoubleBE=function(R,I,H){return oe(this,R,I,!1,H)},r.prototype.copy=function(R,I,H,re){if(!r.isBuffer(R))throw new TypeError("argument should be a Buffer");if(H||(H=0),re||0===re||(re=this.length),I>=R.length&&(I=R.length),I||(I=0),re>0&&re<H&&(re=H),re===H||0===R.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),R.length-I<re-H&&(re=R.length-I+H);var ve=re-H;if(this===R&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(I,H,re);else if(this===R&&H<I&&I<re)for(var ae=ve-1;ae>=0;--ae)R[ae+I]=this[ae+H];else Uint8Array.prototype.set.call(R,this.subarray(H,re),I);return ve},r.prototype.fill=function(R,I,H,re){if("string"==typeof R){if("string"==typeof I?(re=I,I=0,H=this.length):"string"==typeof H&&(re=H,H=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!r.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===R.length){var ve=R.charCodeAt(0);("utf8"===re&&ve<128||"latin1"===re)&&(R=ve)}}else"number"==typeof R&&(R&=255);if(I<0||this.length<I||this.length<H)throw new RangeError("Out of range index");if(H<=I)return this;var ae;if(I>>>=0,H=void 0===H?this.length:H>>>0,R||(R=0),"number"==typeof R)for(ae=I;ae<H;++ae)this[ae]=R;else{var Ee=r.isBuffer(R)?R:r.from(R,re),Fe=Ee.length;if(0===Fe)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(ae=0;ae<H-I;++ae)this[ae+I]=Ee[ae%Fe]}return this};var ye=/[^+/0-9A-Za-z-_]/g;function be(R){return R<16?"0"+R.toString(16):R.toString(16)}function de(R,I){var H;I=I||1/0;for(var re=R.length,ve=null,ae=[],Ee=0;Ee<re;++Ee){if((H=R.charCodeAt(Ee))>55295&&H<57344){if(!ve){if(H>56319){(I-=3)>-1&&ae.push(239,191,189);continue}if(Ee+1===re){(I-=3)>-1&&ae.push(239,191,189);continue}ve=H;continue}if(H<56320){(I-=3)>-1&&ae.push(239,191,189),ve=H;continue}H=65536+(ve-55296<<10|H-56320)}else ve&&(I-=3)>-1&&ae.push(239,191,189);if(ve=null,H<128){if((I-=1)<0)break;ae.push(H)}else if(H<2048){if((I-=2)<0)break;ae.push(H>>6|192,63&H|128)}else if(H<65536){if((I-=3)<0)break;ae.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;ae.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return ae}function le(R){return s.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(ye,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(R))}function Ce(R,I,H,re){for(var ve=0;ve<re&&!(ve+H>=I.length||ve>=R.length);++ve)I[ve+H]=R[ve];return ve}function Ie(R,I){return R instanceof I||null!=R&&null!=R.constructor&&null!=R.constructor.name&&R.constructor.name===I.name}function Oe(R){return R!=R}}).call(this)}).call(this,G("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:21}],6:[function(G,X,Z){X.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],7:[function(G,X,Z){"use strict";var Q=G("get-intrinsic"),s=G("./"),w=s(Q("String.prototype.indexOf"));X.exports=function(c,e){var r=Q(c,!!e);return"function"==typeof r&&w(c,".prototype.")>-1?s(r):r}},{"./":8,"get-intrinsic":15}],8:[function(G,X,Z){"use strict";var Q=G("function-bind"),s=G("get-intrinsic"),w=s("%Function.prototype.apply%"),c=s("%Function.prototype.call%"),e=s("%Reflect.apply%",!0)||Q.call(c,w),r=s("%Object.getOwnPropertyDescriptor%",!0),o=s("%Object.defineProperty%",!0),u=s("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}X.exports=function(l){var m=e(Q,c,arguments);return r&&o&&r(m,"length").configurable&&o(m,"length",{value:1+u(0,l.length-(arguments.length-1))}),m};var f=function(){return e(Q,w,arguments)};o?o(X.exports,"apply",{value:f}):X.exports.apply=f},{"function-bind":14,"get-intrinsic":15}],9:[function(G,X,Z){"use strict";X.exports=function Q(s){return null===s||"object"!=typeof s||null!=s.toJSON?JSON.stringify(s):Array.isArray(s)?"["+s.reduce((w,c,e)=>w+(0===e?"":",")+Q(void 0===c||"symbol"==typeof c?null:c),"")+"]":"{"+Object.keys(s).sort().reduce((w,c,e)=>void 0===s[c]||"symbol"==typeof s[c]?w:w+(0===w.length?"":",")+Q(c)+":"+Q(s[c]),"")+"}"}},{}],10:[function(G,X,Z){"use strict";var Q=G("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(Q)try{Q([],"length")}catch{Q=null}X.exports=Q},{"get-intrinsic":15}],11:[function(G,X,Z){"use strict";var Q,s="object"==typeof Reflect?Reflect:null,w=s&&"function"==typeof s.apply?s.apply:function(E,F,B){return Function.prototype.apply.call(E,F,B)};Q=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var c=Number.isNaN||function(E){return E!=E};function e(){e.init.call(this)}X.exports=e,X.exports.once=function(E,F){return new Promise(function(B,N){function A(j){E.removeListener(F,k),N(j)}function k(){"function"==typeof E.removeListener&&E.removeListener("error",A),B([].slice.call(arguments))}var j,D;v(E,F,k,{once:!0}),"error"!==F&&(D=A,"function"==typeof(j=E).on&&v(j,"error",D,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function o(E){if("function"!=typeof E)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}function u(E){return void 0===E._maxListeners?e.defaultMaxListeners:E._maxListeners}function f(E,F,B,N){var A,k,j,D;if(o(B),void 0===(k=E._events)?(k=E._events=Object.create(null),E._eventsCount=0):(void 0!==k.newListener&&(E.emit("newListener",F,B.listener?B.listener:B),k=E._events),j=k[F]),void 0===j)j=k[F]=B,++E._eventsCount;else if("function"==typeof j?j=k[F]=N?[B,j]:[j,B]:N?j.unshift(B):j.push(B),(A=u(E))>0&&j.length>A&&!j.warned){j.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(F)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=E,q.type=F,q.count=j.length,D=q,console&&console.warn&&console.warn(D)}return E}function l(E,F,B){var N={fired:!1,wrapFn:void 0,target:E,type:F,listener:B},A=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(N);return A.listener=B,N.wrapFn=A,A}function m(E,F,B){var N=E._events;if(void 0===N)return[];var A=N[F];return void 0===A?[]:"function"==typeof A?B?[A.listener||A]:[A]:B?function(k){for(var j=new Array(k.length),D=0;D<j.length;++D)j[D]=k[D].listener||k[D];return j}(A):a(A,A.length)}function d(E){var F=this._events;if(void 0!==F){var B=F[E];if("function"==typeof B)return 1;if(void 0!==B)return B.length}return 0}function a(E,F){for(var B=new Array(F),N=0;N<F;++N)B[N]=E[N];return B}function v(E,F,B,N){if("function"==typeof E.on)N.once?E.once(F,B):E.on(F,B);else{if("function"!=typeof E.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E);E.addEventListener(F,function A(k){N.once&&E.removeEventListener(F,A),B(k)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(E){if("number"!=typeof E||E<0||c(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");r=E}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(E){if("number"!=typeof E||E<0||c(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},e.prototype.getMaxListeners=function(){return u(this)},e.prototype.emit=function(E){for(var F=[],B=1;B<arguments.length;B++)F.push(arguments[B]);var N="error"===E,A=this._events;if(void 0!==A)N=N&&void 0===A.error;else if(!N)return!1;if(N){var k;if(F.length>0&&(k=F[0]),k instanceof Error)throw k;var j=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw j.context=k,j}var D=A[E];if(void 0===D)return!1;if("function"==typeof D)w(D,this,F);else{var q=D.length,P=a(D,q);for(B=0;B<q;++B)w(P[B],this,F)}return!0},e.prototype.addListener=function(E,F){return f(this,E,F,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(E,F){return f(this,E,F,!0)},e.prototype.once=function(E,F){return o(F),this.on(E,l(this,E,F)),this},e.prototype.prependOnceListener=function(E,F){return o(F),this.prependListener(E,l(this,E,F)),this},e.prototype.removeListener=function(E,F){var B,N,A,k,j;if(o(F),void 0===(N=this._events))return this;if(void 0===(B=N[E]))return this;if(B===F||B.listener===F)0==--this._eventsCount?this._events=Object.create(null):(delete N[E],N.removeListener&&this.emit("removeListener",E,B.listener||F));else if("function"!=typeof B){for(A=-1,k=B.length-1;k>=0;k--)if(B[k]===F||B[k].listener===F){j=B[k].listener,A=k;break}if(A<0)return this;0===A?B.shift():function(D,q){for(;q+1<D.length;q++)D[q]=D[q+1];D.pop()}(B,A),1===B.length&&(N[E]=B[0]),void 0!==N.removeListener&&this.emit("removeListener",E,j||F)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(E){var F,B,N;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[E]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[E]),this;if(0===arguments.length){var A,k=Object.keys(B);for(N=0;N<k.length;++N)"removeListener"!==(A=k[N])&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(F=B[E]))this.removeListener(E,F);else if(void 0!==F)for(N=F.length-1;N>=0;N--)this.removeListener(E,F[N]);return this},e.prototype.listeners=function(E){return m(this,E,!0)},e.prototype.rawListeners=function(E){return m(this,E,!1)},e.listenerCount=function(E,F){return"function"==typeof E.listenerCount?E.listenerCount(F):d.call(E,F)},e.prototype.listenerCount=d,e.prototype.eventNames=function(){return this._eventsCount>0?Q(this._events):[]}},{}],12:[function(G,X,Z){"use strict";var Q=G("is-callable"),s=Object.prototype.toString,w=Object.prototype.hasOwnProperty;X.exports=function(c,e,r){if(!Q(e))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===s.call(c)?function(u,f,l){for(var m=0,d=u.length;m<d;m++)w.call(u,m)&&(null==l?f(u[m],m,u):f.call(l,u[m],m,u))}(c,e,o):"string"==typeof c?function(u,f,l){for(var m=0,d=u.length;m<d;m++)null==l?f(u.charAt(m),m,u):f.call(l,u.charAt(m),m,u)}(c,e,o):function(u,f,l){for(var m in u)w.call(u,m)&&(null==l?f(u[m],m,u):f.call(l,u[m],m,u))}(c,e,o)}},{"is-callable":24}],13:[function(G,X,Z){"use strict";var Q=Array.prototype.slice,s=Object.prototype.toString;X.exports=function(w){var c=this;if("function"!=typeof c||"[object Function]"!==s.call(c))throw new TypeError("Function.prototype.bind called on incompatible "+c);for(var e,r=Q.call(arguments,1),o=Math.max(0,c.length-r.length),u=[],f=0;f<o;f++)u.push("$"+f);if(e=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof e){var m=c.apply(this,r.concat(Q.call(arguments)));return Object(m)===m?m:this}return c.apply(w,r.concat(Q.call(arguments)))}),c.prototype){var l=function(){};l.prototype=c.prototype,e.prototype=new l,l.prototype=null}return e}},{}],14:[function(G,X,Z){"use strict";var Q=G("./implementation");X.exports=Function.prototype.bind||Q},{"./implementation":13}],15:[function(G,X,Z){"use strict";var Q=SyntaxError,s=Function,w=TypeError,c=function(P){try{return s('"use strict"; return ('+P+").constructor;")()}catch{}},e=Object.getOwnPropertyDescriptor;if(e)try{e({},"")}catch{e=null}var r=function(){throw new w},o=e?function(){try{return arguments.callee,r}catch{try{return e(arguments,"callee").get}catch{return r}}}():r,u=G("has-symbols")(),f=Object.getPrototypeOf||function(P){return P.__proto__},l={},m=typeof Uint8Array>"u"?void 0:f(Uint8Array),d={"%AggregateError%":typeof AggregateError>"u"?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":u?f([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":l,"%AsyncGenerator%":l,"%AsyncGeneratorFunction%":l,"%AsyncIteratorPrototype%":l,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%BigInt%":typeof BigInt>"u"?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":l,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?f(f([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&u?f((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&u?f((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?f(""[Symbol.iterator]()):void 0,"%Symbol%":u?Symbol:void 0,"%SyntaxError%":Q,"%ThrowTypeError%":o,"%TypedArray%":m,"%TypeError%":w,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakRef%":typeof WeakRef>"u"?void 0:WeakRef,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet},a={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=G("function-bind"),E=G("has"),F=v.call(Function.call,Array.prototype.concat),B=v.call(Function.apply,Array.prototype.splice),N=v.call(Function.call,String.prototype.replace),A=v.call(Function.call,String.prototype.slice),k=v.call(Function.call,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,q=function(P,W){var Y,ne=P;if(E(a,ne)&&(ne="%"+(Y=a[ne])[0]+"%"),E(d,ne)){var ce=d[ne];if(ce===l&&(ce=function $(ee){var J;if("%AsyncFunction%"===ee)J=c("async function () {}");else if("%GeneratorFunction%"===ee)J=c("function* () {}");else if("%AsyncGeneratorFunction%"===ee)J=c("async function* () {}");else if("%AsyncGenerator%"===ee){var ie=$("%AsyncGeneratorFunction%");ie&&(J=ie.prototype)}else if("%AsyncIteratorPrototype%"===ee){var oe=$("%AsyncGenerator%");oe&&(J=f(oe.prototype))}return d[ee]=J,J}(ne)),void 0===ce&&!W)throw new w("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:Y,name:ne,value:ce}}throw new Q("intrinsic "+P+" does not exist!")};X.exports=function(P,W){if("string"!=typeof P||0===P.length)throw new w("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof W)throw new w('"allowMissing" argument must be a boolean');if(null===k(/^%?[^%]*%?$/g,P))throw new Q("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Y=function(Ie){var Oe=A(Ie,0,1),R=A(Ie,-1);if("%"===Oe&&"%"!==R)throw new Q("invalid intrinsic syntax, expected closing `%`");if("%"===R&&"%"!==Oe)throw new Q("invalid intrinsic syntax, expected opening `%`");var I=[];return N(Ie,j,function(H,re,ve,ae){I[I.length]=ve?N(ae,D,"$1"):re||H}),I}(P),ne=Y.length>0?Y[0]:"",ce=q("%"+ne+"%",W),$=ce.name,ee=ce.value,J=!1,ie=ce.alias;ie&&(ne=ie[0],B(Y,F([0,1],ie)));for(var oe=1,ye=!0;oe<Y.length;oe+=1){var be=Y[oe],de=A(be,0,1),le=A(be,-1);if(('"'===de||"'"===de||"`"===de||'"'===le||"'"===le||"`"===le)&&de!==le)throw new Q("property names with quotes must have matching quotes");if("constructor"!==be&&ye||(J=!0),E(d,$="%"+(ne+="."+be)+"%"))ee=d[$];else if(null!=ee){if(!(be in ee)){if(!W)throw new w("base intrinsic for "+P+" exists, but the property is not available.");return}if(e&&oe+1>=Y.length){var Ce=e(ee,be);ee=(ye=!!Ce)&&"get"in Ce&&!("originalValue"in Ce.get)?Ce.get:ee[be]}else ye=E(ee,be),ee=ee[be];ye&&!J&&(d[$]=ee)}}return ee}},{"function-bind":14,has:19,"has-symbols":16}],16:[function(G,X,Z){"use strict";var Q=typeof Symbol<"u"&&Symbol,s=G("./shams");X.exports=function(){return"function"==typeof Q&&"function"==typeof Symbol&&"symbol"==typeof Q("foo")&&"symbol"==typeof Symbol("bar")&&s()}},{"./shams":17}],17:[function(G,X,Z){"use strict";X.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Q={},s=Symbol("test"),w=Object(s);if("string"==typeof s||"[object Symbol]"!==Object.prototype.toString.call(s)||"[object Symbol]"!==Object.prototype.toString.call(w))return!1;for(s in Q[s]=42,Q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Q).length)return!1;var c=Object.getOwnPropertySymbols(Q);if(1!==c.length||c[0]!==s||!Object.prototype.propertyIsEnumerable.call(Q,s))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(Q,s);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],18:[function(G,X,Z){"use strict";var Q=G("has-symbols/shams");X.exports=function(){return Q()&&!!Symbol.toStringTag}},{"has-symbols/shams":17}],19:[function(G,X,Z){"use strict";var Q=G("function-bind");X.exports=Q.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":14}],20:[function(G,X,Z){var Q=G("http"),s=G("url"),w=X.exports;for(var c in Q)Q.hasOwnProperty(c)&&(w[c]=Q[c]);function e(r){if("string"==typeof r&&(r=s.parse(r)),r.protocol||(r.protocol="https:"),"https:"!==r.protocol)throw new Error('Protocol "'+r.protocol+'" not supported. Expected "https:"');return r}w.request=function(r,o){return r=e(r),Q.request.call(this,r,o)},w.get=function(r,o){return r=e(r),Q.get.call(this,r,o)}},{http:91,url:112}],21:[function(G,X,Z){Z.read=function(Q,s,w,c,e){var r,o,u=8*e-c-1,f=(1<<u)-1,l=f>>1,m=-7,d=w?e-1:0,a=w?-1:1,v=Q[s+d];for(d+=a,r=v&(1<<-m)-1,v>>=-m,m+=u;m>0;r=256*r+Q[s+d],d+=a,m-=8);for(o=r&(1<<-m)-1,r>>=-m,m+=c;m>0;o=256*o+Q[s+d],d+=a,m-=8);if(0===r)r=1-l;else{if(r===f)return o?NaN:1/0*(v?-1:1);o+=Math.pow(2,c),r-=l}return(v?-1:1)*o*Math.pow(2,r-c)},Z.write=function(Q,s,w,c,e,r){var o,u,f,l=8*r-e-1,m=(1<<l)-1,d=m>>1,a=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,v=c?0:r-1,E=c?1:-1,F=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(u=isNaN(s)?1:0,o=m):(o=Math.floor(Math.log(s)/Math.LN2),s*(f=Math.pow(2,-o))<1&&(o--,f*=2),(s+=o+d>=1?a/f:a*Math.pow(2,1-d))*f>=2&&(o++,f/=2),o+d>=m?(u=0,o=m):o+d>=1?(u=(s*f-1)*Math.pow(2,e),o+=d):(u=s*Math.pow(2,d-1)*Math.pow(2,e),o=0));e>=8;Q[w+v]=255&u,v+=E,u/=256,e-=8);for(o=o<<e|u,l+=e;l>0;Q[w+v]=255&o,v+=E,o/=256,l-=8);Q[w+v-E]|=128*F}},{}],22:[function(G,X,Z){"function"==typeof Object.create?X.exports=function(Q,s){s&&(Q.super_=s,Q.prototype=Object.create(s.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}))}:X.exports=function(Q,s){if(s){Q.super_=s;var w=function(){};w.prototype=s.prototype,Q.prototype=new w,Q.prototype.constructor=Q}}},{}],23:[function(G,X,Z){"use strict";var Q=G("has-tostringtag/shams")(),s=G("call-bind/callBound")("Object.prototype.toString"),w=function(r){return!(Q&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===s(r)},c=function(r){return!!w(r)||null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Array]"!==s(r)&&"[object Function]"===s(r.callee)},e=function(){return w(arguments)}();w.isLegacyArguments=c,X.exports=e?w:c},{"call-bind/callBound":7,"has-tostringtag/shams":18}],24:[function(G,X,Z){"use strict";var Q,s,w=Function.prototype.toString,c="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof c&&"function"==typeof Object.defineProperty)try{Q=Object.defineProperty({},"length",{get:function(){throw s}}),s={},c(function(){throw 42},null,Q)}catch(l){l!==s&&(c=null)}else c=null;var e=/^\s*class\b/,r=function(l){try{var m=w.call(l);return e.test(m)}catch{return!1}},o=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,f="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};X.exports=c?function(l){if(l===f)return!0;if(!l||"function"!=typeof l&&"object"!=typeof l)return!1;if("function"==typeof l&&!l.prototype)return!0;try{c(l,null,Q)}catch(m){if(m!==s)return!1}return!r(l)}:function(l){if(l===f)return!0;if(!l||"function"!=typeof l&&"object"!=typeof l)return!1;if("function"==typeof l&&!l.prototype)return!0;if(u)return function(d){try{return!r(d)&&(w.call(d),!0)}catch{return!1}}(l);if(r(l))return!1;var m=o.call(l);return"[object Function]"===m||"[object GeneratorFunction]"===m}},{}],25:[function(G,X,Z){"use strict";var Q,s=Object.prototype.toString,w=Function.prototype.toString,c=/^\s*(?:function)?\*/,e=G("has-tostringtag/shams")(),r=Object.getPrototypeOf;X.exports=function(o){if("function"!=typeof o)return!1;if(c.test(w.call(o)))return!0;if(!e)return"[object GeneratorFunction]"===s.call(o);if(!r)return!1;if(void 0===Q){var u=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch{}}();Q=!!u&&r(u)}return r(o)===Q}},{"has-tostringtag/shams":18}],26:[function(G,X,Z){(function(Q){(function(){"use strict";var s=G("for-each"),w=G("available-typed-arrays"),c=G("call-bind/callBound"),e=c("Object.prototype.toString"),r=G("has-tostringtag/shams")(),o=typeof globalThis>"u"?Q:globalThis,u=w(),f=c("Array.prototype.indexOf",!0)||function(v,E){for(var F=0;F<v.length;F+=1)if(v[F]===E)return F;return-1},l=c("String.prototype.slice"),m={},d=G("es-abstract/helpers/getOwnPropertyDescriptor"),a=Object.getPrototypeOf;r&&d&&a&&s(u,function(v){var E=new o[v];if(Symbol.toStringTag in E){var F=a(E),B=d(F,Symbol.toStringTag);if(!B){var N=a(F);B=d(N,Symbol.toStringTag)}m[v]=B.get}}),X.exports=function(v){if(!v||"object"!=typeof v)return!1;if(!r||!(Symbol.toStringTag in v)){var E=l(e(v),8,-1);return f(u,E)>-1}return!!d&&(F=v,B=!1,s(m,function(N,A){if(!B)try{B=N.call(F)===A}catch{}}),B);var F,B}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18}],27:[function(G,X,Z){"use strict";const{isArray:Q,isObject:s,isString:w}=G("./types"),{asArray:c}=G("./util"),{prependBase:e}=G("./url"),r=G("./JsonLdError"),o=G("./ResolvedContext");function u(f){throw new r("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:f})}X.exports=class{constructor({sharedCache:f}){this.perOpCache=new Map,this.sharedCache=f}async resolve({activeCtx:f,context:l,documentLoader:m,base:d,cycles:a=new Set}){l&&s(l)&&l["@context"]&&(l=l["@context"]),l=c(l);const v=[];for(const E of l){if(w(E)){let N=this._get(E);N||(N=await this._resolveRemoteContext({activeCtx:f,url:E,documentLoader:m,base:d,cycles:a})),Q(N)?v.push(...N):v.push(N);continue}if(null===E){v.push(new o({document:null}));continue}s(E)||u(l);const F=JSON.stringify(E);let B=this._get(F);B||(B=new o({document:E}),this._cacheResolvedContext({key:F,resolved:B,tag:"static"})),v.push(B)}return v}_get(f){let l=this.perOpCache.get(f);if(!l){const m=this.sharedCache.get(f);m&&(l=m.get("static"))&&this.perOpCache.set(f,l)}return l}_cacheResolvedContext({key:f,resolved:l,tag:m}){if(this.perOpCache.set(f,l),void 0!==m){let d=this.sharedCache.get(f);d||(d=new Map,this.sharedCache.set(f,d)),d.set(m,l)}return l}async _resolveRemoteContext({activeCtx:f,url:l,documentLoader:m,base:d,cycles:a}){l=e(d,l);const{context:v,remoteDoc:E}=await this._fetchContext({activeCtx:f,url:l,documentLoader:m,cycles:a});!function B({context:N,base:A}){if(!N)return;const k=N["@context"];if(w(k))N["@context"]=e(A,k);else if(Q(k))for(let j=0;j<k.length;++j){const D=k[j];w(D)?k[j]=e(A,D):s(D)&&B({context:{"@context":D},base:A})}else if(s(k))for(const j in k)B({context:k[j],base:A})}({context:v,base:d=E.documentUrl||l});const F=await this.resolve({activeCtx:f,context:v,documentLoader:m,base:d,cycles:a});return this._cacheResolvedContext({key:l,resolved:F,tag:E.tag}),F}async _fetchContext({activeCtx:f,url:l,documentLoader:m,cycles:d}){if(d.size>10)throw new r("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===f.processingMode?"loading remote context failed":"context overflow",max:10});if(d.has(l))throw new r("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===f.processingMode?"recursive context inclusion":"context overflow",url:l});let a,v;d.add(l);try{a=(v=await m(l)).document||null,w(a)&&(a=JSON.parse(a))}catch(E){throw new r("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:l,cause:E})}if(!s(a))throw new r("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:l});return a="@context"in a?{"@context":a["@context"]}:{"@context":{}},v.contextUrl&&(Q(a["@context"])||(a["@context"]=[a["@context"]]),a["@context"].push(v.contextUrl)),{context:a,remoteDoc:v}}}},{"./JsonLdError":28,"./ResolvedContext":32,"./types":47,"./url":48,"./util":49}],28:[function(G,X,Z){"use strict";X.exports=class extends Error{constructor(Q="An unspecified JSON-LD error occurred.",s="jsonld.Error",w={}){super(Q),this.name=s,this.message=Q,this.details=w}}},{}],29:[function(G,X,Z){"use strict";X.exports=Q=>{class s{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(s,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(s.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:s}),s.compact=function(w,c){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Q.compact(w,c)},s.expand=function(w){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Q.expand(w)},s.flatten=function(w){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Q.flatten(w)},s}},{}],30:[function(G,X,Z){"use strict";X.exports=G("rdf-canonize").NQuads},{"rdf-canonize":64}],31:[function(G,X,Z){"use strict";X.exports=class{constructor(){this._requests={}}wrapLoader(Q){const s=this;return s._loader=Q,function(){return s.add.apply(s,arguments)}}async add(Q){let s=this._requests[Q];if(s)return Promise.resolve(s);s=this._requests[Q]=this._loader(Q);try{return await s}finally{delete this._requests[Q]}}}},{}],32:[function(G,X,Z){"use strict";const Q=G("lru-cache");X.exports=class{constructor({document:s}){this.document=s,this.cache=new Q({max:10})}getProcessed(s){return this.cache.get(s)}setProcessed(s,w){this.cache.set(s,w)}}},{"lru-cache":50}],33:[function(G,X,Z){"use strict";const Q=G("./JsonLdError"),{isArray:s,isObject:w,isString:c,isUndefined:e}=G("./types"),{isList:r,isValue:o,isGraph:u,isSimpleGraph:f,isSubjectReference:l}=G("./graphTypes"),{expandIri:m,getContextValue:d,isKeyword:a,process:v,processingMode:E}=G("./context"),{removeBase:F,prependBase:B}=G("./url"),{REGEX_KEYWORD:N,addValue:A,asArray:k,compareShortestLeast:j}=G("./util"),D={};function q(P,W,Y){if("@nest"!==m(P,W,{vocab:!0},Y))throw new Q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}X.exports=D,D.compact=async({activeCtx:P,activeProperty:W=null,element:Y,options:ne={}})=>{if(s(Y)){let $=[];for(let ee=0;ee<Y.length;++ee){const J=await D.compact({activeCtx:P,activeProperty:W,element:Y[ee],options:ne});null!==J&&$.push(J)}return ne.compactArrays&&1===$.length&&0===(d(P,W,"@container")||[]).length&&($=$[0]),$}const ce=d(P,W,"@context");if(e(ce)||(P=await v({activeCtx:P,localCtx:ce,propagate:!0,overrideProtected:!0,options:ne})),w(Y)){if(ne.link&&"@id"in Y&&ne.link.hasOwnProperty(Y["@id"])){const de=ne.link[Y["@id"]];for(let le=0;le<de.length;++le)if(de[le].expanded===Y)return de[le].compacted}if(o(Y)||l(Y)){const de=D.compactValue({activeCtx:P,activeProperty:W,value:Y,options:ne});return ne.link&&l(Y)&&(ne.link.hasOwnProperty(Y["@id"])||(ne.link[Y["@id"]]=[]),ne.link[Y["@id"]].push({expanded:Y,compacted:de})),de}if(r(Y)&&(d(P,W,"@container")||[]).includes("@list"))return D.compact({activeCtx:P,activeProperty:W,element:Y["@list"],options:ne});const $="@reverse"===W,ee={},J=P;o(Y)||l(Y)||(P=P.revertToPreviousContext());const ie=d(J,W,"@context");e(ie)||(P=await v({activeCtx:P,localCtx:ie,propagate:!0,overrideProtected:!0,options:ne})),ne.link&&"@id"in Y&&(ne.link.hasOwnProperty(Y["@id"])||(ne.link[Y["@id"]]=[]),ne.link[Y["@id"]].push({expanded:Y,compacted:ee}));let oe=Y["@type"]||[];oe.length>1&&(oe=Array.from(oe).sort());const ye=P;for(const de of oe){const le=D.compactIri({activeCtx:ye,iri:de,relativeTo:{vocab:!0}}),Ce=d(J,le,"@context");e(Ce)||(P=await v({activeCtx:P,localCtx:Ce,options:ne,propagate:!1}))}const be=Object.keys(Y).sort();for(const de of be){const le=Y[de];if("@id"!==de)if("@type"!==de)if("@reverse"!==de)if("@preserve"!==de)if("@index"!==de)if("@graph"!==de&&"@list"!==de&&"@included"!==de&&a(de)){const Ce=D.compactIri({activeCtx:P,iri:de,relativeTo:{vocab:!0}});A(ee,Ce,le)}else{if(!s(le))throw new Q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===le.length){const Ce=D.compactIri({activeCtx:P,iri:de,value:le,relativeTo:{vocab:!0},reverse:$}),Ie=P.mappings.has(Ce)?P.mappings.get(Ce)["@nest"]:null;let Oe=ee;Ie&&(q(P,Ie,ne),w(ee[Ie])||(ee[Ie]={}),Oe=ee[Ie]),A(Oe,Ce,le,{propertyIsArray:!0})}for(const Ce of le){const Ie=D.compactIri({activeCtx:P,iri:de,value:Ce,relativeTo:{vocab:!0},reverse:$}),Oe=P.mappings.has(Ie)?P.mappings.get(Ie)["@nest"]:null;let R=ee;Oe&&(q(P,Oe,ne),w(ee[Oe])||(ee[Oe]={}),R=ee[Oe]);const I=d(P,Ie,"@container")||[],H=u(Ce),re=r(Ce);let ve;re?ve=Ce["@list"]:H&&(ve=Ce["@graph"]);let ae=await D.compact({activeCtx:P,activeProperty:Ie,element:re||H?ve:Ce,options:ne});if(re){if(s(ae)||(ae=[ae]),I.includes("@list")){A(R,Ie,ae,{valueIsArray:!0,allowDuplicate:!0});continue}ae={[D.compactIri({activeCtx:P,iri:"@list",relativeTo:{vocab:!0}})]:ae},"@index"in Ce&&(ae[D.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=Ce["@index"])}if(H)if(I.includes("@graph")&&(I.includes("@id")||I.includes("@index")&&f(Ce))){let Ee;R.hasOwnProperty(Ie)?Ee=R[Ie]:R[Ie]=Ee={};const Fe=(I.includes("@id")?Ce["@id"]:Ce["@index"])||D.compactIri({activeCtx:P,iri:"@none",relativeTo:{vocab:!0}});A(Ee,Fe,ae,{propertyIsArray:!ne.compactArrays||I.includes("@set")})}else I.includes("@graph")&&f(Ce)?(s(ae)&&ae.length>1&&(ae={"@included":ae}),A(R,Ie,ae,{propertyIsArray:!ne.compactArrays||I.includes("@set")})):(s(ae)&&1===ae.length&&ne.compactArrays&&(ae=ae[0]),ae={[D.compactIri({activeCtx:P,iri:"@graph",relativeTo:{vocab:!0}})]:ae},"@id"in Ce&&(ae[D.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]=Ce["@id"]),"@index"in Ce&&(ae[D.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=Ce["@index"]),A(R,Ie,ae,{propertyIsArray:!ne.compactArrays||I.includes("@set")}));else if(I.includes("@language")||I.includes("@index")||I.includes("@id")||I.includes("@type")){let Ee,Fe;if(R.hasOwnProperty(Ie)?Ee=R[Ie]:R[Ie]=Ee={},I.includes("@language"))o(ae)&&(ae=ae["@value"]),Fe=Ce["@language"];else if(I.includes("@index")){const Re=d(P,Ie,"@index")||"@index",Je=D.compactIri({activeCtx:P,iri:Re,relativeTo:{vocab:!0}});if("@index"===Re)Fe=Ce["@index"],delete ae[Je];else{let Ve;if([Fe,...Ve]=k(ae[Re]||[]),c(Fe))switch(Ve.length){case 0:delete ae[Re];break;case 1:ae[Re]=Ve[0];break;default:ae[Re]=Ve}else Fe=null}}else if(I.includes("@id")){const Re=D.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}});Fe=ae[Re],delete ae[Re]}else if(I.includes("@type")){const Re=D.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}});let Je;switch([Fe,...Je]=k(ae[Re]||[]),Je.length){case 0:delete ae[Re];break;case 1:ae[Re]=Je[0];break;default:ae[Re]=Je}1===Object.keys(ae).length&&"@id"in Ce&&(ae=await D.compact({activeCtx:P,activeProperty:Ie,element:{"@id":Ce["@id"]},options:ne}))}Fe||(Fe=D.compactIri({activeCtx:P,iri:"@none",relativeTo:{vocab:!0}})),A(Ee,Fe,ae,{propertyIsArray:I.includes("@set")})}else{const Ee=!ne.compactArrays||I.includes("@set")||I.includes("@list")||s(ae)&&0===ae.length||"@list"===de||"@graph"===de;A(R,Ie,ae,{propertyIsArray:Ee})}}}else{if((d(P,W,"@container")||[]).includes("@index"))continue;const Ce=D.compactIri({activeCtx:P,iri:de,relativeTo:{vocab:!0}});A(ee,Ce,le)}else{const Ce=await D.compact({activeCtx:P,activeProperty:W,element:le,options:ne});s(Ce)&&0===Ce.length||A(ee,de,Ce)}else{const Ce=await D.compact({activeCtx:P,activeProperty:"@reverse",element:le,options:ne});for(const Ie in Ce)if(P.mappings.has(Ie)&&P.mappings.get(Ie).reverse){const Oe=Ce[Ie],R=(d(P,Ie,"@container")||[]).includes("@set")||!ne.compactArrays;A(ee,Ie,Oe,{propertyIsArray:R}),delete Ce[Ie]}if(Object.keys(Ce).length>0){const Ie=D.compactIri({activeCtx:P,iri:de,relativeTo:{vocab:!0}});A(ee,Ie,Ce)}}else{let Ce=k(le).map(R=>D.compactIri({activeCtx:J,iri:R,relativeTo:{vocab:!0}}));1===Ce.length&&(Ce=Ce[0]);const Ie=D.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}}),Oe=(d(P,Ie,"@container")||[]).includes("@set")&&E(P,1.1)||s(Ce)&&0===le.length;A(ee,Ie,Ce,{propertyIsArray:Oe})}else{let Ce=k(le).map(Ie=>D.compactIri({activeCtx:P,iri:Ie,relativeTo:{vocab:!1},base:ne.base}));1===Ce.length&&(Ce=Ce[0]),ee[D.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]=Ce}}return ee}return Y},D.compactIri=({activeCtx:P,iri:W,value:Y=null,relativeTo:ne={vocab:!1},reverse:ce=!1,base:$=null})=>{if(null===W)return W;P.isPropertyTermScoped&&P.previousContext&&(P=P.previousContext);const ee=P.getInverse();if(a(W)&&W in ee&&"@none"in ee[W]&&"@type"in ee[W]["@none"]&&"@none"in ee[W]["@none"]["@type"])return ee[W]["@none"]["@type"]["@none"];if(ne.vocab&&W in ee){const be=P["@language"]||"@none",de=[];w(Y)&&"@index"in Y&&!("@graph"in Y)&&de.push("@index","@index@set"),w(Y)&&"@preserve"in Y&&(Y=Y["@preserve"][0]),u(Y)?("@index"in Y&&de.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Y&&de.push("@graph@id","@graph@id@set"),de.push("@graph","@graph@set","@set"),"@index"in Y||de.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Y||de.push("@graph@id","@graph@id@set")):w(Y)&&!o(Y)&&de.push("@id","@id@set","@type","@set@type");let le="@language",Ce="@null";if(ce)le="@type",Ce="@reverse",de.push("@set");else if(r(Y)){"@index"in Y||de.push("@list");const Oe=Y["@list"];if(0===Oe.length)le="@any",Ce="@none";else{let R=0===Oe.length?be:null,I=null;for(let H=0;H<Oe.length;++H){const re=Oe[H];let ve="@none",ae="@none";if(o(re)?"@direction"in re?ve=`${(re["@language"]||"").toLowerCase()}_${re["@direction"]}`:"@language"in re?ve=re["@language"].toLowerCase():"@type"in re?ae=re["@type"]:ve="@null":ae="@id",null===R?R=ve:ve!==R&&o(re)&&(R="@none"),null===I?I=ae:ae!==I&&(I="@none"),"@none"===R&&"@none"===I)break}R=R||"@none","@none"!==(I=I||"@none")?(le="@type",Ce=I):Ce=R}}else{if(o(Y))if("@language"in Y&&!("@index"in Y)){de.push("@language","@language@set"),Ce=Y["@language"];const Oe=Y["@direction"];Oe&&(Ce=`${Ce}_${Oe}`)}else"@direction"in Y&&!("@index"in Y)?Ce=`_${Y["@direction"]}`:"@type"in Y&&(le="@type",Ce=Y["@type"]);else le="@type",Ce="@id";de.push("@set")}de.push("@none"),!w(Y)||"@index"in Y||de.push("@index","@index@set"),o(Y)&&1===Object.keys(Y).length&&de.push("@language","@language@set");const Ie=function(Oe,R,I,H,re,ve){null===ve&&(ve="@null");const ae=[];if(("@id"===ve||"@reverse"===ve)&&w(I)&&"@id"in I){"@reverse"===ve&&ae.push("@reverse");const Fe=D.compactIri({activeCtx:Oe,iri:I["@id"],relativeTo:{vocab:!0}});Oe.mappings.has(Fe)&&Oe.mappings.get(Fe)&&Oe.mappings.get(Fe)["@id"]===I["@id"]?ae.push.apply(ae,["@vocab","@id"]):ae.push.apply(ae,["@id","@vocab"])}else{ae.push(ve);const Fe=ae.find(Re=>Re.includes("_"));Fe&&ae.push(Fe.replace(/^[^_]+_/,"_"))}ae.push("@none");const Ee=Oe.inverse[R];for(const Fe of H){if(!(Fe in Ee))continue;const Re=Ee[Fe][re];for(const Je of ae)if(Je in Re)return Re[Je]}return null}(P,W,Y,de,le,Ce);if(null!==Ie)return Ie}if(ne.vocab&&"@vocab"in P){const be=P["@vocab"];if(0===W.indexOf(be)&&W!==be){const de=W.substr(be.length);if(!P.mappings.has(de))return de}}let J=null;const ie=[];let oe=P.fastCurieMap;const ye=W.length-1;for(let be=0;be<ye&&W[be]in oe;++be)""in(oe=oe[W[be]])&&ie.push(oe[""][0]);for(let be=ie.length-1;be>=0;--be){const de=ie[be],le=de.terms;for(const Ce of le){const Ie=Ce+":"+W.substr(de.iri.length);P.mappings.get(Ce)._prefix&&(!P.mappings.has(Ie)||null===Y&&P.mappings.get(Ie)["@id"]===W)&&(null===J||j(Ie,J)<0)&&(J=Ie)}}if(null!==J)return J;for(const[be,de]of P.mappings)if(de&&de._prefix&&W.startsWith(be+":"))throw new Q(`Absolute IRI "${W}" confused with prefix "${be}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:P});if(!ne.vocab){if("@base"in P){if(P["@base"]){const be=F(B($,P["@base"]),W);return N.test(be)?`./${be}`:be}return W}return F($,W)}return W},D.compactValue=({activeCtx:P,activeProperty:W,value:Y,options:ne})=>{if(o(Y)){const J=d(P,W,"@type"),ie=d(P,W,"@language"),oe=d(P,W,"@direction"),ye=d(P,W,"@container")||[],be="@index"in Y&&!ye.includes("@index");if(!be&&"@none"!==J&&(Y["@type"]===J||"@language"in Y&&Y["@language"]===ie&&"@direction"in Y&&Y["@direction"]===oe||"@language"in Y&&Y["@language"]===ie||"@direction"in Y&&Y["@direction"]===oe))return Y["@value"];const de=Object.keys(Y).length,le=1===de||2===de&&"@index"in Y&&!be,Ce="@language"in P,Ie=c(Y["@value"]),Oe=P.mappings.has(W)&&null===P.mappings.get(W)["@language"];if(le&&"@none"!==J&&(!Ce||!Ie||Oe))return Y["@value"];const R={};return be&&(R[D.compactIri({activeCtx:P,iri:"@index",relativeTo:{vocab:!0}})]=Y["@index"]),"@type"in Y?R[D.compactIri({activeCtx:P,iri:"@type",relativeTo:{vocab:!0}})]=D.compactIri({activeCtx:P,iri:Y["@type"],relativeTo:{vocab:!0}}):"@language"in Y&&(R[D.compactIri({activeCtx:P,iri:"@language",relativeTo:{vocab:!0}})]=Y["@language"]),"@direction"in Y&&(R[D.compactIri({activeCtx:P,iri:"@direction",relativeTo:{vocab:!0}})]=Y["@direction"]),R[D.compactIri({activeCtx:P,iri:"@value",relativeTo:{vocab:!0}})]=Y["@value"],R}const ce=m(P,W,{vocab:!0},ne),$=d(P,W,"@type"),ee=D.compactIri({activeCtx:P,iri:Y["@id"],relativeTo:{vocab:"@vocab"===$},base:ne.base});return"@id"===$||"@vocab"===$||"@graph"===ce?ee:{[D.compactIri({activeCtx:P,iri:"@id",relativeTo:{vocab:!0}})]:ee}}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],34:[function(G,X,Z){"use strict";const Q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s="http://www.w3.org/2001/XMLSchema#";X.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Q,RDF_LIST:Q+"List",RDF_FIRST:Q+"first",RDF_REST:Q+"rest",RDF_NIL:Q+"nil",RDF_TYPE:Q+"type",RDF_PLAIN_LITERAL:Q+"PlainLiteral",RDF_XML_LITERAL:Q+"XMLLiteral",RDF_JSON_LITERAL:Q+"JSON",RDF_OBJECT:Q+"object",RDF_LANGSTRING:Q+"langString",XSD:s,XSD_BOOLEAN:s+"boolean",XSD_DOUBLE:s+"double",XSD_INTEGER:s+"integer",XSD_STRING:s+"string"}},{}],35:[function(G,X,Z){"use strict";const Q=G("./util"),s=G("./JsonLdError"),{isArray:w,isObject:c,isString:e,isUndefined:r}=G("./types"),{isAbsolute:o,isRelative:u,prependBase:f}=G("./url"),{handleEvent:l}=G("./events"),{REGEX_BCP47:m,REGEX_KEYWORD:d,asArray:a,compareShortestLeast:v}=G("./util"),E=new Map,F={};function B(N,A,k,j,D,q){if(null===A||!e(A)||F.isKeyword(A))return A;if(A.match(d))return null;if(j&&j.hasOwnProperty(A)&&!0!==D.get(A)&&F.createTermDefinition({activeCtx:N,localCtx:j,term:A,defined:D,options:q}),(k=k||{}).vocab){const W=N.mappings.get(A);if(null===W)return null;if(c(W)&&"@id"in W)return W["@id"]}const P=A.indexOf(":");if(P>0){const W=A.substr(0,P),Y=A.substr(P+1);if("_"===W||0===Y.indexOf("//"))return A;j&&j.hasOwnProperty(W)&&F.createTermDefinition({activeCtx:N,localCtx:j,term:W,defined:D,options:q});const ne=N.mappings.get(W);if(ne&&ne._prefix)return ne["@id"]+Y;if(o(A))return A}if(k.vocab&&"@vocab"in N)A=N["@vocab"]+A;else if(k.base){let W,Y;"@base"in N?N["@base"]?(Y=f(q.base,N["@base"]),W=f(Y,A)):(Y=N["@base"],W=A):(Y=q.base,W=f(q.base,A)),A=W}return A}X.exports=F,F.process=async({activeCtx:N,localCtx:A,options:k,propagate:j=!0,overrideProtected:D=!1,cycles:q=new Set})=>{if(c(A)&&"@context"in A&&w(A["@context"])&&(A=A["@context"]),0===a(A).length)return N;const P=[],W=[({event:$,next:ee})=>{P.push($),ee()}];k.eventHandler&&W.push(k.eventHandler);const Y=k;k={...k,eventHandler:W};const ne=await k.contextResolver.resolve({activeCtx:N,context:A,documentLoader:k.documentLoader,base:k.base});c(ne[0].document)&&"boolean"==typeof ne[0].document["@propagate"]&&(j=ne[0].document["@propagate"]);let ce=N;j||ce.previousContext||((ce=ce.clone()).previousContext=N);for(const $ of ne){let{document:ee}=$;if(N=ce,null===ee){if(!D&&0!==Object.keys(N.protected).length)throw new s("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});ce=N=F.getInitialContext(k).clone();continue}const J=$.getProcessed(N);if(J){if(Y.eventHandler)for(const oe of J.events)l({event:oe,options:Y});ce=N=J.context;continue}if(c(ee)&&"@context"in ee&&(ee=ee["@context"]),!c(ee))throw new s("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ee});ce=ce.clone();const ie=new Map;if("@version"in ee){if(1.1!==ee["@version"])throw new s("Unsupported JSON-LD version: "+ee["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ee});if(N.processingMode&&"json-ld-1.0"===N.processingMode)throw new s("@version: "+ee["@version"]+" not compatible with "+N.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ee});ce.processingMode="json-ld-1.1",ce["@version"]=ee["@version"],ie.set("@version",!0)}if(ce.processingMode=ce.processingMode||N.processingMode,"@base"in ee){let oe=ee["@base"];if(null!==oe&&!o(oe)){if(!u(oe))throw new s('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ee});oe=f(ce["@base"],oe)}ce["@base"]=oe,ie.set("@base",!0)}if("@vocab"in ee){const oe=ee["@vocab"];if(null===oe)delete ce["@vocab"];else{if(!e(oe))throw new s('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ee});if(!o(oe)&&F.processingMode(ce,1))throw new s('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ee});{const ye=B(ce,oe,{vocab:!0,base:!0},void 0,void 0,k);o(ye)||k.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:ye}},options:k}),ce["@vocab"]=ye}}ie.set("@vocab",!0)}if("@language"in ee){const oe=ee["@language"];if(null===oe)delete ce["@language"];else{if(!e(oe))throw new s('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ee});oe.match(m)||k.eventHandler&&l({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:oe}},options:k}),ce["@language"]=oe.toLowerCase()}ie.set("@language",!0)}if("@direction"in ee){const oe=ee["@direction"];if("json-ld-1.0"===N.processingMode)throw new s("Invalid JSON-LD syntax; @direction not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ee});if(null===oe)delete ce["@direction"];else{if("ltr"!==oe&&"rtl"!==oe)throw new s('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ee});ce["@direction"]=oe}ie.set("@direction",!0)}if("@propagate"in ee){const oe=ee["@propagate"];if("json-ld-1.0"===N.processingMode)throw new s("Invalid JSON-LD syntax; @propagate not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ee});if("boolean"!=typeof oe)throw new s("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:A});ie.set("@propagate",!0)}if("@import"in ee){const oe=ee["@import"];if("json-ld-1.0"===N.processingMode)throw new s("Invalid JSON-LD syntax; @import not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ee});if(!e(oe))throw new s("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:A});const ye=await k.contextResolver.resolve({activeCtx:N,context:oe,documentLoader:k.documentLoader,base:k.base});if(1!==ye.length)throw new s("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:A});const be=ye[0].getProcessed(N);if(be)ee=be;else{const de=ye[0].document;if("@import"in de)throw new s("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:A});for(const le in de)ee.hasOwnProperty(le)||(ee[le]=de[le]);ye[0].setProcessed(N,ee)}ie.set("@import",!0)}ie.set("@protected",ee["@protected"]||!1);for(const oe in ee)if(F.createTermDefinition({activeCtx:ce,localCtx:ee,term:oe,defined:ie,options:k,overrideProtected:D}),c(ee[oe])&&"@context"in ee[oe]){const ye=ee[oe]["@context"];let be=!0;if(e(ye)){const de=f(k.base,ye);q.has(de)?be=!1:q.add(de)}if(be)try{await F.process({activeCtx:ce.clone(),localCtx:ee[oe]["@context"],overrideProtected:!0,options:k,cycles:q})}catch{throw new s("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ee[oe]["@context"],term:oe})}}$.setProcessed(N,{context:ce,events:P})}return ce},F.createTermDefinition=({activeCtx:N,localCtx:A,term:k,defined:j,options:D,overrideProtected:q=!1})=>{if(j.has(k)){if(j.get(k))return;throw new s("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:A,term:k})}let P;if(j.set(k,!1),A.hasOwnProperty(k)&&(P=A[k]),"@type"===k&&c(P)&&"@set"===(P["@container"]||"@set")&&F.processingMode(N,1.1)){const J=["@container","@id","@protected"],ie=Object.keys(P);if(0===ie.length||ie.some(oe=>!J.includes(oe)))throw new s("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:A,term:k})}else{if(F.isKeyword(k))throw new s("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:A,term:k});if(k.match(d))return void(D.eventHandler&&l({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:k}},options:D}));if(""===k)throw new s("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:A})}const W=N.mappings.get(k);N.mappings.has(k)&&N.mappings.delete(k);let Y=!1;if((e(P)||null===P)&&(Y=!0,P={"@id":P}),!c(P))throw new s("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:A});const ne={};N.mappings.set(k,ne),ne.reverse=!1;const ce=["@container","@id","@language","@reverse","@type"];F.processingMode(N,1.1)&&ce.push("@context","@direction","@index","@nest","@prefix","@protected");for(const J in P)if(!ce.includes(J))throw new s("Invalid JSON-LD syntax; a term definition must not contain "+J,"jsonld.SyntaxError",{code:"invalid term definition",context:A});const $=k.indexOf(":");if(ne._termHasColon=$>0,"@reverse"in P){if("@id"in P)throw new s("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:A});if("@nest"in P)throw new s("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:A});const J=P["@reverse"];if(!e(J))throw new s("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:A});if(J.match(d))return D.eventHandler&&l({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:J}},options:D}),void(W?N.mappings.set(k,W):N.mappings.delete(k));const ie=B(N,J,{vocab:!0,base:!1},A,j,D);if(!o(ie))throw new s("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:A});ne["@id"]=ie,ne.reverse=!0}else if("@id"in P){let J=P["@id"];if(J&&!e(J))throw new s("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:A});if(null===J)ne["@id"]=null;else{if(!F.isKeyword(J)&&J.match(d))return D.eventHandler&&l({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:J}},options:D}),void(W?N.mappings.set(k,W):N.mappings.delete(k));if(J!==k){if(J=B(N,J,{vocab:!0,base:!1},A,j,D),!o(J)&&!F.isKeyword(J))throw new s("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:A});if(k.match(/(?::[^:])|\//)&&B(N,k,{vocab:!0,base:!1},A,new Map(j).set(k,!0),D)!==J)throw new s("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:A});ne["@id"]=J,ne._prefix=Y&&!ne._termHasColon&&J.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ne))if(ne._termHasColon){const J=k.substr(0,$);if(A.hasOwnProperty(J)&&F.createTermDefinition({activeCtx:N,localCtx:A,term:J,defined:j,options:D}),N.mappings.has(J)){const ie=k.substr($+1);ne["@id"]=N.mappings.get(J)["@id"]+ie}else ne["@id"]=k}else if("@type"===k)ne["@id"]=k;else{if(!("@vocab"in N))throw new s("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:A,term:k});ne["@id"]=N["@vocab"]+k}if((!0===P["@protected"]||!0===j.get("@protected")&&!1!==P["@protected"])&&(N.protected[k]=!0,ne.protected=!0),j.set(k,!0),"@type"in P){let J=P["@type"];if(!e(J))throw new s("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:A});if("@json"===J||"@none"===J){if(F.processingMode(N,1))throw new s(`Invalid JSON-LD syntax; an @context @type value must not be "${J}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:A})}else if("@id"!==J&&"@vocab"!==J){if(J=B(N,J,{vocab:!0,base:!1},A,j,D),!o(J))throw new s("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:A});if(0===J.indexOf("_:"))throw new s("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:A})}ne["@type"]=J}if("@container"in P){const J=e(P["@container"])?[P["@container"]]:P["@container"]||[],ie=["@list","@set","@index","@language"];let oe=!0;const ye=J.includes("@set");if(F.processingMode(N,1.1)){if(ie.push("@graph","@id","@type"),J.includes("@list")){if(1!==J.length)throw new s("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:A})}else if(J.includes("@graph")){if(J.some(be=>"@graph"!==be&&"@id"!==be&&"@index"!==be&&"@set"!==be))throw new s("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:A})}else oe&=J.length<=(ye?2:1);if(J.includes("@type")&&(ne["@type"]=ne["@type"]||"@id",!["@id","@vocab"].includes(ne["@type"])))throw new s("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:A})}else oe&=!w(P["@container"]),oe&=J.length<=1;if(oe&=J.every(be=>ie.includes(be)),!(oe&=!(ye&&J.includes("@list"))))throw new s("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ie.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:A});if(ne.reverse&&!J.every(be=>["@index","@set"].includes(be)))throw new s("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:A});ne["@container"]=J}if("@index"in P){if(!("@container"in P)||!ne["@container"].includes("@index"))throw new s(`Invalid JSON-LD syntax; @index without @index in @container: "${P["@index"]}" on term "${k}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:A});if(!e(P["@index"])||0===P["@index"].indexOf("@"))throw new s(`Invalid JSON-LD syntax; @index must expand to an IRI: "${P["@index"]}" on term "${k}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:A});ne["@index"]=P["@index"]}if("@context"in P&&(ne["@context"]=P["@context"]),"@language"in P&&!("@type"in P)){let J=P["@language"];if(null!==J&&!e(J))throw new s("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:A});null!==J&&(J=J.toLowerCase()),ne["@language"]=J}if("@prefix"in P){if(k.match(/:|\//))throw new s("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:A});if(F.isKeyword(ne["@id"]))throw new s("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:A});if("boolean"!=typeof P["@prefix"])throw new s("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:A});ne._prefix=!0===P["@prefix"]}if("@direction"in P){const J=P["@direction"];if(null!==J&&"ltr"!==J&&"rtl"!==J)throw new s('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:A});ne["@direction"]=J}if("@nest"in P){const J=P["@nest"];if(!e(J)||"@nest"!==J&&0===J.indexOf("@"))throw new s("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:A});ne["@nest"]=J}const ee=ne["@id"];if("@context"===ee||"@preserve"===ee)throw new s("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:A});if(W&&W.protected&&!q&&(N.protected[k]=!0,ne.protected=!0,!function J(ie,oe){if(!ie||"object"!=typeof ie||!oe||"object"!=typeof oe)return ie===oe;const ye=Array.isArray(ie);if(ye!==Array.isArray(oe))return!1;if(ye){if(ie.length!==oe.length)return!1;for(let le=0;le<ie.length;++le)if(!J(ie[le],oe[le]))return!1;return!0}const be=Object.keys(ie),de=Object.keys(oe);if(be.length!==de.length)return!1;for(const le in ie){let Ce=ie[le],Ie=oe[le];if("@container"===le&&Array.isArray(Ce)&&Array.isArray(Ie)&&(Ce=Ce.slice().sort(),Ie=Ie.slice().sort()),!J(Ce,Ie))return!1}return!0}(W,ne)))throw new s("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:A,term:k})},F.expandIri=(N,A,k,j)=>B(N,A,k,void 0,void 0,j),F.getInitialContext=N=>{const A=JSON.stringify({processingMode:N.processingMode}),k=E.get(A);if(k)return k;const j={processingMode:N.processingMode,mappings:new Map,inverse:null,getInverse:function(){const P=this;if(P.inverse)return P.inverse;const W=P.inverse={},Y=P.fastCurieMap={},ne={},ce=(P["@language"]||"@none").toLowerCase(),$=P["@direction"],ee=P.mappings,J=[...ee.keys()].sort(v);for(const ie of J){const oe=ee.get(ie);if(null===oe)continue;let ye=oe["@container"]||"@none";if(ye=[].concat(ye).sort().join(""),null===oe["@id"])continue;const be=a(oe["@id"]);for(const de of be){let le=W[de];const Ce=F.isKeyword(de);if(le)Ce||oe._termHasColon||ne[de].push(ie);else if(W[de]=le={},!Ce&&!oe._termHasColon){ne[de]=[ie];const Ie={iri:de,terms:ne[de]};de[0]in Y?Y[de[0]].push(Ie):Y[de[0]]=[Ie]}if(le[ye]||(le[ye]={"@language":{},"@type":{},"@any":{}}),le=le[ye],q(ie,le["@any"],"@none"),oe.reverse)q(ie,le["@type"],"@reverse");else if("@none"===oe["@type"])q(ie,le["@any"],"@none"),q(ie,le["@language"],"@none"),q(ie,le["@type"],"@none");else if("@type"in oe)q(ie,le["@type"],oe["@type"]);else if("@language"in oe&&"@direction"in oe){const Ie=oe["@language"],Oe=oe["@direction"];q(ie,le["@language"],Ie&&Oe?`${Ie}_${Oe}`.toLowerCase():Ie?Ie.toLowerCase():Oe?`_${Oe}`:"@null")}else"@language"in oe?q(ie,le["@language"],(oe["@language"]||"@null").toLowerCase()):"@direction"in oe?oe["@direction"]?q(ie,le["@language"],`_${oe["@direction"]}`):q(ie,le["@language"],"@none"):$?(q(ie,le["@language"],`_${$}`),q(ie,le["@language"],"@none"),q(ie,le["@type"],"@none")):(q(ie,le["@language"],ce),q(ie,le["@language"],"@none"),q(ie,le["@type"],"@none"))}}for(const ie in Y)D(Y,ie,1);return W},clone:function(){const P={};return P.mappings=Q.clone(this.mappings),P.clone=this.clone,P.inverse=null,P.getInverse=this.getInverse,P.protected=Q.clone(this.protected),this.previousContext&&(P.previousContext=this.previousContext.clone()),P.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(P["@base"]=this["@base"]),"@language"in this&&(P["@language"]=this["@language"]),"@vocab"in this&&(P["@vocab"]=this["@vocab"]),P},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===E.size&&E.clear(),E.set(A,j),j;function D(P,W,Y){const ne=P[W],ce=P[W]={};let $,ee;for(const J of ne)(ee=Y>=($=J.iri).length?"":$[Y])in ce?ce[ee].push(J):ce[ee]=[J];for(const J in ce)""!==J&&D(ce,J,Y+1)}function q(P,W,Y){W.hasOwnProperty(Y)||(W[Y]=P)}},F.getContextValue=(N,A,k)=>{if(null===A)return"@context"===k?void 0:null;if(N.mappings.has(A)){const j=N.mappings.get(A);if(r(k))return j;if(j.hasOwnProperty(k))return j[k]}return"@language"===k&&k in N||"@direction"===k&&k in N?N[k]:"@context"!==k?null:void 0},F.processingMode=(N,A)=>A.toString()>="1.1"?!N.processingMode||N.processingMode>="json-ld-"+A.toString():"json-ld-1.0"===N.processingMode,F.isKeyword=N=>{if(!e(N)||"@"!==N[0])return!1;switch(N){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":28,"./events":37,"./types":47,"./url":48,"./util":49}],36:[function(G,X,Z){"use strict";const{parseLinkHeader:Q,buildHeaders:s}=G("../util"),{LINK_HEADER_CONTEXT:w}=G("../constants"),c=G("../JsonLdError"),e=G("../RequestQueue"),{prependBase:r}=G("../url"),o=/(^|(\r\n))link:/i;X.exports=({secure:u,headers:f={},xhr:l}={headers:{}})=>(f=s(f),(new e).wrapLoader(async function m(d){if(0!==d.indexOf("http:")&&0!==d.indexOf("https:"))throw new c('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d});if(u&&0!==d.indexOf("https"))throw new c('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d});let a;try{a=await function(N,A,k){const j=new(N=N||XMLHttpRequest);return new Promise((D,q)=>{j.onload=()=>D(j),j.onerror=P=>q(P),j.open("GET",A,!0);for(const P in k)j.setRequestHeader(P,k[P]);j.send()})}(l,d,f)}catch(N){throw new c("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:N})}if(a.status>=400)throw new c("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:d,httpStatusCode:a.status});let v={contextUrl:null,documentUrl:d,document:a.response},E=null;const F=a.getResponseHeader("Content-Type");let B;if(o.test(a.getAllResponseHeaders())&&(B=a.getResponseHeader("Link")),B&&"application/ld+json"!==F){const N=Q(B),A=N[w];if(Array.isArray(A))throw new c("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d});A&&(v.contextUrl=A.target),(E=N.alternate)&&"application/ld+json"==E.type&&!(F||"").match(/^application\/(\w*\+)?json$/)&&(v=await m(r(d,E.target)))}return v}))},{"../JsonLdError":28,"../RequestQueue":31,"../constants":34,"../url":48,"../util":49}],37:[function(G,X,Z){"use strict";const Q=G("./JsonLdError"),{isArray:s}=G("./types"),{asArray:w}=G("./util"),c={};X.exports=c,c.defaultEventHandler=null,c.setupEventHandler=({options:r={}})=>{const o=[].concat(r.safe?c.safeEventHandler:[],r.eventHandler?w(r.eventHandler):[],c.defaultEventHandler?c.defaultEventHandler:[]);return 0===o.length?null:o},c.handleEvent=({event:r,options:o})=>{!function u({event:f,handlers:l}){let m=!0;for(let d=0;m&&d<l.length;++d){m=!1;const a=l[d];if(s(a))m=u({event:f,handlers:a});else if("function"==typeof a)a({event:f,next:()=>{m=!0}});else{if("object"!=typeof a)throw new Q("Invalid event handler.","jsonld.InvalidEventHandler",{event:f});f.code in a?a[f.code]({event:f,next:()=>{m=!0}}):m=!0}}return m}({event:r,handlers:o.eventHandler})};const e=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);c.safeEventHandler=function({event:r,next:o}){if("warning"===r.level&&e.has(r.code))throw new Q("Safe mode validation error.","jsonld.ValidationError",{event:r});o()},c.logEventHandler=function({event:r,next:o}){console.log(`EVENT: ${r.message}`,{event:r}),o()},c.logWarningEventHandler=function({event:r,next:o}){"warning"===r.level&&console.warn(`WARNING: ${r.message}`,{event:r}),o()},c.unhandledEventHandler=function({event:r}){throw new Q("No handler for event.","jsonld.UnhandledEvent",{event:r})},c.setDefaultEventHandler=function({eventHandler:r}={}){c.defaultEventHandler=r?w(r):null}},{"./JsonLdError":28,"./types":47,"./util":49}],38:[function(G,X,Z){"use strict";const Q=G("./JsonLdError"),{isArray:s,isObject:w,isEmptyObject:c,isString:e,isUndefined:r}=G("./types"),{isList:o,isValue:u,isGraph:f,isSubject:l}=G("./graphTypes"),{expandIri:m,getContextValue:d,isKeyword:a,process:v,processingMode:E}=G("./context"),{isAbsolute:F}=G("./url"),{REGEX_BCP47:B,REGEX_KEYWORD:N,addValue:A,asArray:k,getValues:j,validateTypeValue:D}=G("./util"),{handleEvent:q}=G("./events"),P={};function W({activeCtx:ce,activeProperty:$,value:ee,options:J}){if(null==ee)return null;const ie=m(ce,$,{vocab:!0},J);if("@id"===ie)return m(ce,ee,{base:!0},J);if("@type"===ie)return m(ce,ee,{vocab:!0,base:!0},{...J,typeExpansion:!0});const oe=d(ce,$,"@type");if(("@id"===oe||"@graph"===ie)&&e(ee)){const be=m(ce,ee,{base:!0},J);return null===be&&ee.match(N)&&J.eventHandler&&q({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:$}},options:J}),{"@id":be}}if("@vocab"===oe&&e(ee))return{"@id":m(ce,ee,{vocab:!0,base:!0},J)};if(a(ie))return ee;const ye={};if(oe&&!["@id","@vocab","@none"].includes(oe))ye["@type"]=oe;else if(e(ee)){const be=d(ce,$,"@language");null!==be&&(ye["@language"]=be);const de=d(ce,$,"@direction");null!==de&&(ye["@direction"]=de)}return["boolean","number","string"].includes(typeof ee)||(ee=ee.toString()),ye["@value"]=ee,ye}function Y(ce,$,ee,J){const ie=[],oe=Object.keys($).sort();for(const ye of oe){const be=m(ce,ye,{vocab:!0},J);let de=$[ye];s(de)||(de=[de]);for(const le of de){if(null===le)continue;if(!e(le))throw new Q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:$});const Ce={"@value":le};"@none"!==be&&(ye.match(B)||J.eventHandler&&q({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ye}},options:J}),Ce["@language"]=ye.toLowerCase()),ee&&(Ce["@direction"]=ee),ie.push(Ce)}}return ie}async function ne({activeCtx:ce,options:$,activeProperty:ee,value:J,asGraph:ie,indexKey:oe,propertyIndex:ye}){const be=[],de=Object.keys(J).sort(),le="@type"===oe;for(let Ce of de){if(le){const R=d(ce,Ce,"@context");r(R)||(ce=await v({activeCtx:ce,localCtx:R,propagate:!1,options:$}))}let Ie,Oe=J[Ce];s(Oe)||(Oe=[Oe]),Oe=await P.expand({activeCtx:ce,activeProperty:ee,element:Oe,options:$,insideList:!1,insideIndex:!0}),Ie=ye?"@none"===Ce?"@none":W({activeCtx:ce,activeProperty:oe,value:Ce,options:$}):m(ce,Ce,{vocab:!0},$),"@id"===oe?Ce=m(ce,Ce,{base:!0},$):le&&(Ce=Ie);for(let R of Oe){if(ie&&!f(R)&&(R={"@graph":[R]}),"@type"===oe)"@none"===Ie||(R["@type"]?R["@type"]=[Ce].concat(R["@type"]):R["@type"]=[Ce]);else{if(u(R)&&!["@language","@type","@index"].includes(oe))throw new Q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${oe}".`,"jsonld.SyntaxError",{code:"invalid value object",value:R});ye?"@none"!==Ie&&A(R,ye,Ie,{propertyIsArray:!0,prependValue:!0}):"@none"===Ie||oe in R||(R[oe]=Ce)}be.push(R)}}return be}X.exports=P,P.expand=async({activeCtx:ce,activeProperty:$=null,element:ee,options:J={},insideList:ie=!1,insideIndex:oe=!1,typeScopedContext:ye=null})=>{if(null==ee)return null;if("@default"===$&&(J=Object.assign({},J,{isFrame:!1})),!s(ee)&&!w(ee))return ie||null!==$&&"@graph"!==m(ce,$,{vocab:!0},J)?W({activeCtx:ce,activeProperty:$,value:ee,options:J}):(J.eventHandler&&q({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:ee}},options:J}),null);if(s(ee)){let I=[];const H=d(ce,$,"@container")||[];ie=ie||H.includes("@list");for(let re=0;re<ee.length;++re){let ve=await P.expand({activeCtx:ce,activeProperty:$,element:ee[re],options:J,insideIndex:oe,typeScopedContext:ye});ie&&s(ve)&&(ve={"@list":ve}),null!==ve&&(s(ve)?I=I.concat(ve):I.push(ve))}return I}const be=m(ce,$,{vocab:!0},J),de=d(ce,$,"@context");ye=ye||(ce.previousContext?ce:null);let le=Object.keys(ee).sort(),Ce=!oe;if(Ce&&ye&&le.length<=2&&!le.includes("@context"))for(const I of le){const H=m(ye,I,{vocab:!0},J);if("@value"===H){Ce=!1,ce=ye;break}if("@id"===H&&1===le.length){Ce=!1;break}}Ce&&(ce=ce.revertToPreviousContext()),r(de)||(ce=await v({activeCtx:ce,localCtx:de,propagate:!0,overrideProtected:!0,options:J})),"@context"in ee&&(ce=await v({activeCtx:ce,localCtx:ee["@context"],options:J})),ye=ce;let Ie=null;for(const I of le)if("@type"===m(ce,I,{vocab:!0},J)){Ie=Ie||I;const H=ee[I],re=Array.isArray(H)?H.length>1?H.slice().sort():H:[H];for(const ve of re){const ae=d(ye,ve,"@context");r(ae)||(ce=await v({activeCtx:ce,localCtx:ae,options:J,propagate:!1}))}}let Oe={};await async function I({activeCtx:H,activeProperty:re,expandedActiveProperty:ve,element:ae,expandedParent:Ee,options:Fe={},insideList:Re,typeKey:Je,typeScopedContext:Ve}){const it=Object.keys(ae).sort(),at=[];let ge;const _e=ae[Je]&&"@json"===m(H,s(ae[Je])?ae[Je][0]:ae[Je],{vocab:!0},{...Fe,typeExpansion:!0});for(const ke of it){let U,z=ae[ke];if("@context"===ke)continue;const te=m(H,ke,{vocab:!0},Fe);if(null===te||!F(te)&&!a(te)){Fe.eventHandler&&q({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:ke,expandedProperty:te}},options:Fe});continue}if(a(te)){if("@reverse"===ve)throw new Q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:z});if(te in Ee&&"@included"!==te&&"@type"!==te)throw new Q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:te})}if("@id"===te){if(!e(z)){if(!Fe.isFrame)throw new Q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:z});if(w(z)){if(!c(z))throw new Q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:z})}else{if(!s(z))throw new Q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:z});if(!z.every(fe=>e(fe)))throw new Q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:z})}}A(Ee,"@id",k(z).map(fe=>{if(e(fe)){const we=m(H,fe,{base:!0},Fe);return Fe.eventHandler&&(null===we?q(null===fe?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:fe}},options:Fe}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:fe}},options:Fe}):F(we)||q({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:fe,expandedId:we}},options:Fe})),we}return fe}),{propertyIsArray:Fe.isFrame});continue}if("@type"===te){w(z)&&(z=Object.fromEntries(Object.entries(z).map(([fe,we])=>[m(Ve,fe,{vocab:!0}),k(we).map(Te=>m(Ve,Te,{base:!0,vocab:!0},{...Fe,typeExpansion:!0}))]))),D(z,Fe.isFrame),A(Ee,"@type",k(z).map(fe=>{if(e(fe)){const we=m(Ve,fe,{base:!0,vocab:!0},{...Fe,typeExpansion:!0});return F(we)||Fe.eventHandler&&q({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:fe}},options:Fe}),we}return fe}),{propertyIsArray:Fe.isFrame});continue}if("@included"===te&&E(H,1.1)){const fe=k(await P.expand({activeCtx:H,activeProperty:re,element:z,options:Fe}));if(!fe.every(we=>l(we)))throw new Q("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:z});A(Ee,"@included",fe,{propertyIsArray:!0});continue}if("@graph"===te&&!w(z)&&!s(z))throw new Q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:z});if("@value"===te){ge=z,_e&&E(H,1.1)?Ee["@value"]=z:A(Ee,"@value",z,{propertyIsArray:Fe.isFrame});continue}if("@language"===te){if(null===z)continue;if(!e(z)&&!Fe.isFrame)throw new Q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:z});z=k(z).map(fe=>e(fe)?fe.toLowerCase():fe);for(const fe of z)e(fe)&&!fe.match(B)&&Fe.eventHandler&&q({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:fe}},options:Fe});A(Ee,"@language",z,{propertyIsArray:Fe.isFrame});continue}if("@direction"===te){if(!e(z)&&!Fe.isFrame)throw new Q('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:z});z=k(z);for(const fe of z)if(e(fe)&&"ltr"!==fe&&"rtl"!==fe)throw new Q('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:z});A(Ee,"@direction",z,{propertyIsArray:Fe.isFrame});continue}if("@index"===te){if(!e(z))throw new Q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:z});A(Ee,"@index",z);continue}if("@reverse"===te){if(!w(z))throw new Q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:z});if("@reverse"in(U=await P.expand({activeCtx:H,activeProperty:"@reverse",element:z,options:Fe})))for(const we in U["@reverse"])A(Ee,we,U["@reverse"][we],{propertyIsArray:!0});let fe=Ee["@reverse"]||null;for(const we in U){if("@reverse"===we)continue;null===fe&&(fe=Ee["@reverse"]={}),A(fe,we,[],{propertyIsArray:!0});const Te=U[we];for(let Pe=0;Pe<Te.length;++Pe){const Ue=Te[Pe];if(u(Ue)||o(Ue))throw new Q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:U});A(fe,we,Ue,{propertyIsArray:!0})}}continue}if("@nest"===te){at.push(ke);continue}let ue=H;const me=d(H,ke,"@context");r(me)||(ue=await v({activeCtx:H,localCtx:me,propagate:!0,overrideProtected:!0,options:Fe}));const he=d(ue,ke,"@container")||[];if(he.includes("@language")&&w(z)){U=Y(ue,z,d(ue,ke,"@direction"),Fe)}else if(he.includes("@index")&&w(z)){const fe=he.includes("@graph"),we=d(ue,ke,"@index")||"@index",Te="@index"!==we&&m(H,we,{vocab:!0},Fe);U=await ne({activeCtx:ue,options:Fe,activeProperty:ke,value:z,asGraph:fe,indexKey:we,propertyIndex:Te})}else if(he.includes("@id")&&w(z)){const fe=he.includes("@graph");U=await ne({activeCtx:ue,options:Fe,activeProperty:ke,value:z,asGraph:fe,indexKey:"@id"})}else if(he.includes("@type")&&w(z))U=await ne({activeCtx:ue.revertToPreviousContext(),options:Fe,activeProperty:ke,value:z,asGraph:!1,indexKey:"@type"});else{const fe="@list"===te;if(fe||"@set"===te){let we=re;fe&&"@graph"===ve&&(we=null),U=await P.expand({activeCtx:ue,activeProperty:we,element:z,options:Fe,insideList:fe})}else U="@json"===d(H,ke,"@type")?{"@type":"@json","@value":z}:await P.expand({activeCtx:ue,activeProperty:ke,element:z,options:Fe,insideList:!1})}if(null!==U||"@value"===te)if("@list"!==te&&!o(U)&&he.includes("@list")&&(U={"@list":k(U)}),he.includes("@graph")&&!he.some(fe=>"@id"===fe||"@index"===fe)&&(U=k(U).map(fe=>({"@graph":k(fe)}))),ue.mappings.has(ke)&&ue.mappings.get(ke).reverse){const fe=Ee["@reverse"]=Ee["@reverse"]||{};U=k(U);for(let we=0;we<U.length;++we){const Te=U[we];if(u(Te)||o(Te))throw new Q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:U});A(fe,te,Te,{propertyIsArray:!0})}}else A(Ee,te,U,{propertyIsArray:!0})}if("@value"in Ee&&("@json"!==Ee["@type"]||!E(H,1.1))&&(w(ge)||s(ge))&&!Fe.isFrame)throw new Q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ge});for(const ke of at){const U=s(ae[ke])?ae[ke]:[ae[ke]];for(const z of U){if(!w(z)||Object.keys(z).some(te=>"@value"===m(H,te,{vocab:!0},Fe)))throw new Q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:z});await I({activeCtx:H,activeProperty:re,expandedActiveProperty:ve,element:z,expandedParent:Ee,options:Fe,insideList:Re,typeScopedContext:Ve,typeKey:Je})}}}({activeCtx:ce,activeProperty:$,expandedActiveProperty:be,element:ee,expandedParent:Oe,options:J,insideList:ie,typeKey:Ie,typeScopedContext:ye});let R=(le=Object.keys(Oe)).length;if("@value"in Oe){if("@type"in Oe&&("@language"in Oe||"@direction"in Oe))throw new Q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Oe});let I=R-1;if("@type"in Oe&&(I-=1),"@index"in Oe&&(I-=1),"@language"in Oe&&(I-=1),"@direction"in Oe&&(I-=1),0!==I)throw new Q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Oe});const H=null===Oe["@value"]?[]:k(Oe["@value"]),re=j(Oe,"@type");if(!E(ce,1.1)||!re.includes("@json")||1!==re.length)if(0===H.length)J.eventHandler&&q({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Oe}},options:J}),Oe=null;else{if(!H.every(ve=>e(ve)||c(ve))&&"@language"in Oe)throw new Q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Oe});if(!re.every(ve=>F(ve)&&!(e(ve)&&0===ve.indexOf("_:"))||c(ve)))throw new Q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Oe})}}else if("@type"in Oe&&!s(Oe["@type"]))Oe["@type"]=[Oe["@type"]];else if("@set"in Oe||"@list"in Oe){if(R>1&&(2!==R||!("@index"in Oe)))throw new Q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Oe});"@set"in Oe&&(Oe=Oe["@set"],R=(le=Object.keys(Oe)).length)}else 1===R&&"@language"in Oe&&(J.eventHandler&&q({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Oe}},options:J}),Oe=null);if(w(Oe)&&!J.keepFreeFloatingNodes&&!ie&&(null===$||"@graph"===be)&&(0===R||"@value"in Oe||"@list"in Oe||1===R&&"@id"in Oe)){if(J.eventHandler){let I,H;0===R?(I="empty object",H="Dropping empty object."):"@value"in Oe?(I="object with only @value",H="Dropping object with only @value."):"@list"in Oe?(I="object with only @list",H="Dropping object with only @list."):1===R&&"@id"in Oe&&(I="object with only @id",H="Dropping object with only @id."),q({event:{type:["JsonLdEvent"],code:I,level:"warning",message:H,details:{value:Oe}},options:J})}Oe=null}return Oe}},{"./JsonLdError":28,"./context":35,"./events":37,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],39:[function(G,X,Z){"use strict";const{isSubjectReference:Q}=G("./graphTypes"),{createMergedNodeMap:s}=G("./nodeMap"),w={};X.exports=w,w.flatten=c=>{const e=s(c),r=[],o=Object.keys(e).sort();for(let u=0;u<o.length;++u){const f=e[o[u]];Q(f)||r.push(f)}return r}},{"./graphTypes":42,"./nodeMap":44}],40:[function(G,X,Z){"use strict";const{isKeyword:Q}=G("./context"),s=G("./graphTypes"),w=G("./types"),c=G("./util"),e=G("./url"),r=G("./JsonLdError"),{createNodeMap:o,mergeNodeMapGraphs:u}=G("./nodeMap"),f={};function l(A){const k={};for(const j in A)void 0!==A[j]&&(k["@"+j]=[A[j]]);return[k]}function m(A,k,j){for(let D=j.length-1;D>=0;--D){const q=j[D];if(q.graph===k&&q.subject["@id"]===A["@id"])return!0}return!1}function d(A,k,j){const D="@"+j;let q=D in A?A[D][0]:k[j];if("embed"===j)if(!0===q)q="@once";else if(!1===q)q="@never";else if("@always"!==q&&"@never"!==q&&"@link"!==q&&"@first"!==q&&"@last"!==q&&"@once"!==q)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:A});return q}function a(A){if(!w.isArray(A)||1!==A.length||!w.isObject(A[0]))throw new r("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:A});if("@id"in A[0])for(const k of c.asArray(A[0]["@id"]))if(!w.isObject(k)&&!e.isAbsolute(k)||w.isString(k)&&0===k.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:A});if("@type"in A[0])for(const k of c.asArray(A[0]["@type"]))if(!w.isObject(k)&&!e.isAbsolute(k)||w.isString(k)&&0===k.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:A})}function v(A,k,j,D){let q=!0,P=!1;for(const W in j){let Y=!1;const ne=c.getValues(k,W),ce=0===c.getValues(j,W).length;if("@id"===W){if(w.isEmptyObject(j["@id"][0]||{})?Y=!0:j["@id"].length>=0&&(Y=j["@id"].includes(ne[0])),!D.requireAll)return Y}else if("@type"===W){if(q=!1,ce){if(ne.length>0)return!1;Y=!0}else if(1===j["@type"].length&&w.isEmptyObject(j["@type"][0]))Y=ne.length>0;else for(const $ of j["@type"])Y=!(!w.isObject($)||!("@default"in $))||Y||ne.some(ee=>ee===$);if(!D.requireAll)return Y}else{if(Q(W))continue;{const $=c.getValues(j,W)[0];let ee=!1;if($&&(a([$]),ee="@default"in $),q=!1,0===ne.length&&ee)continue;if(ne.length>0&&ce)return!1;if(void 0===$){if(ne.length>0)return!1;Y=!0}else if(s.isList($)){const J=$["@list"][0];if(s.isList(ne[0])){const ie=ne[0]["@list"];s.isValue(J)?Y=ie.some(oe=>N(J,oe)):(s.isSubject(J)||s.isSubjectReference(J))&&(Y=ie.some(oe=>B(A,J,oe,D)))}}else Y=s.isValue($)?ne.some(J=>N($,J)):s.isSubjectReference($)?ne.some(J=>B(A,$,J,D)):!!w.isObject($)&&ne.length>0}}if(!Y&&D.requireAll)return!1;P=P||Y}return q||P}function E(A,k){const j=A.uniqueEmbeds[A.graph],D=j[k],q=D.parent,P=D.property,W={"@id":k};if(w.isArray(q)){for(let ne=0;ne<q.length;++ne)if(c.compareValues(q[ne],W)){q[ne]=W;break}}else{const ne=w.isArray(q[P]);c.removeValue(q,P,W,{propertyIsArray:ne}),c.addValue(q,P,W,{propertyIsArray:ne})}const Y=ne=>{const ce=Object.keys(j);for(const $ of ce)$ in j&&w.isObject(j[$].parent)&&j[$].parent["@id"]===ne&&(delete j[$],Y($))};Y(k)}function F(A,k,j){w.isObject(A)?c.addValue(A,k,j,{propertyIsArray:!0}):A.push(j)}function B(A,k,j,D){if(!("@id"in j))return!1;const q=A.subjects[j["@id"]];return q&&v(A,q,k,D)}function N(A,k){const j=k["@value"],D=k["@type"],q=k["@language"],P=A["@value"]?w.isArray(A["@value"])?A["@value"]:[A["@value"]]:[],W=A["@type"]?w.isArray(A["@type"])?A["@type"]:[A["@type"]]:[],Y=A["@language"]?w.isArray(A["@language"])?A["@language"]:[A["@language"]]:[];return 0===P.length&&0===W.length&&0===Y.length||!(!P.includes(j)&&!w.isEmptyObject(P[0]))&&!!(!D&&0===W.length||W.includes(D)||D&&w.isEmptyObject(W[0]))&&!!(!q&&0===Y.length||Y.includes(q)||q&&w.isEmptyObject(Y[0]))}X.exports=f,f.frameMergedOrDefault=(A,k,j)=>{const D={options:j,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},q=new c.IdentifierIssuer("_:b");o(A,D.graphMap,"@default",q),j.merged&&(D.graphMap["@merged"]=u(D.graphMap),D.graph="@merged"),D.subjects=D.graphMap[D.graph];const P=[];return f.frame(D,Object.keys(D.subjects).sort(),k,P),j.pruneBlankNodeIdentifiers&&(j.bnodesToClear=Object.keys(D.bnodeMap).filter(W=>1===D.bnodeMap[W].length)),j.link={},function W(Y,ne){if(w.isArray(Y))return Y.map(ce=>W(ce,ne));if(w.isObject(Y)){if("@preserve"in Y)return Y["@preserve"][0];if(s.isValue(Y))return Y;if(s.isList(Y))return Y["@list"]=W(Y["@list"],ne),Y;if("@id"in Y){const ce=Y["@id"];if(ne.link.hasOwnProperty(ce)){const $=ne.link[ce].indexOf(Y);if(-1!==$)return ne.link[ce][$];ne.link[ce].push(Y)}else ne.link[ce]=[Y]}for(const ce in Y)"@id"===ce&&ne.bnodesToClear.includes(Y[ce])?delete Y["@id"]:Y[ce]=W(Y[ce],ne)}return Y}(P,j)},f.frame=(A,k,j,D,q=null)=>{a(j),j=j[0];const P=A.options,W={embed:d(j,P,"embed"),explicit:d(j,P,"explicit"),requireAll:d(j,P,"requireAll")};A.link.hasOwnProperty(A.graph)||(A.link[A.graph]={});const Y=A.link[A.graph],ne=function($,ee,J,ie){const oe={};for(const ye of ee){const be=$.graphMap[$.graph][ye];v($,be,J,ie)&&(oe[ye]=be)}return oe}(A,k,j,W),ce=Object.keys(ne).sort();for(const $ of ce){const ee=ne[$];if(null===q?A.uniqueEmbeds={[A.graph]:{}}:A.uniqueEmbeds[A.graph]=A.uniqueEmbeds[A.graph]||{},"@link"===W.embed&&$ in Y){F(D,q,Y[$]);continue}const J={"@id":$};if(0===$.indexOf("_:")&&c.addValue(A.bnodeMap,$,J,{propertyIsArray:!0}),Y[$]=J,("@first"===W.embed||"@last"===W.embed)&&A.is11)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:j});if(A.embedded||!A.uniqueEmbeds[A.graph].hasOwnProperty($))if(!A.embedded||"@never"!==W.embed&&!m(ee,A.graph,A.subjectStack))if(!A.embedded||"@first"!=W.embed&&"@once"!=W.embed||!A.uniqueEmbeds[A.graph].hasOwnProperty($)){if("@last"===W.embed&&$ in A.uniqueEmbeds[A.graph]&&E(A,$),A.uniqueEmbeds[A.graph][$]={parent:D,property:q},A.subjectStack.push({subject:ee,graph:A.graph}),$ in A.graphMap){let ie=!1,oe=null;"@graph"in j?(oe=j["@graph"][0],ie=!("@merged"===$||"@default"===$),w.isObject(oe)||(oe={})):(ie="@merged"!==A.graph,oe={}),ie&&f.frame({...A,graph:$,embedded:!1},Object.keys(A.graphMap[$]).sort(),[oe],J,"@graph")}"@included"in j&&f.frame({...A,embedded:!1},k,j["@included"],J,"@included");for(const ie of Object.keys(ee).sort())if(Q(ie)){if(J[ie]=c.clone(ee[ie]),"@type"===ie)for(const oe of ee["@type"])0===oe.indexOf("_:")&&c.addValue(A.bnodeMap,oe,J,{propertyIsArray:!0})}else if(!W.explicit||ie in j)for(const oe of ee[ie]){const ye=ie in j?j[ie]:l(W);if(s.isList(oe)){const be=j[ie]&&j[ie][0]&&j[ie][0]["@list"]?j[ie][0]["@list"]:l(W),de={"@list":[]};F(J,ie,de);const le=oe["@list"];for(const Ce of le)s.isSubjectReference(Ce)?f.frame({...A,embedded:!0},[Ce["@id"]],be,de,"@list"):F(de,"@list",c.clone(Ce))}else s.isSubjectReference(oe)?f.frame({...A,embedded:!0},[oe["@id"]],ye,J,ie):N(ye[0],oe)&&F(J,ie,c.clone(oe))}for(const ie of Object.keys(j).sort()){if("@type"===ie){if(!w.isObject(j[ie][0])||!("@default"in j[ie][0]))continue}else if(Q(ie))continue;const oe=j[ie][0]||{};if(!d(oe,P,"omitDefault")&&!(ie in J)){let ye="@null";"@default"in oe&&(ye=c.clone(oe["@default"])),w.isArray(ye)||(ye=[ye]),J[ie]=[{"@preserve":ye}]}}for(const ie of Object.keys(j["@reverse"]||{}).sort()){const oe=j["@reverse"][ie];for(const ye of Object.keys(A.subjects))c.getValues(A.subjects[ye],ie).some(be=>be["@id"]===$)&&(J["@reverse"]=J["@reverse"]||{},c.addValue(J["@reverse"],ie,[],{propertyIsArray:!0}),f.frame({...A,embedded:!0},[ye],oe,J["@reverse"][ie],q))}F(D,q,J),A.subjectStack.pop()}else F(D,q,J);else F(D,q,J)}},f.cleanupNull=(A,k)=>{if(w.isArray(A))return A.map(j=>f.cleanupNull(j,k)).filter(j=>j);if("@null"===A)return null;if(w.isObject(A)){if("@id"in A){const j=A["@id"];if(k.link.hasOwnProperty(j)){const D=k.link[j].indexOf(A);if(-1!==D)return k.link[j][D];k.link[j].push(A)}else k.link[j]=[A]}for(const j in A)A[j]=f.cleanupNull(A[j],k)}return A}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49}],41:[function(G,X,Z){"use strict";const Q=G("./JsonLdError"),s=G("./graphTypes"),w=G("./types"),{REGEX_BCP47:c,addValue:e}=G("./util"),{handleEvent:r}=G("./events"),{RDF_LIST:o,RDF_FIRST:u,RDF_REST:f,RDF_NIL:l,RDF_TYPE:m,RDF_JSON_LITERAL:d,XSD_BOOLEAN:a,XSD_DOUBLE:v,XSD_INTEGER:E,XSD_STRING:F}=G("./constants"),B={};function N(A,k,j,D){if(A.termType.endsWith("Node"))return{"@id":A.value};const q={"@value":A.value};if(A.language)A.language.match(c)||D.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A.language}},options:D}),q["@language"]=A.language;else{let P=A.datatype.value;if(P||(P=F),P===d){P="@json";try{q["@value"]=JSON.parse(q["@value"])}catch(W){throw new Q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:q["@value"],cause:W})}}if(k){if(P===a)"true"===q["@value"]?q["@value"]=!0:"false"===q["@value"]&&(q["@value"]=!1);else if(w.isNumeric(q["@value"]))if(P===E){const W=parseInt(q["@value"],10);W.toFixed(0)===q["@value"]&&(q["@value"]=W)}else P===v&&(q["@value"]=parseFloat(q["@value"]));[a,E,v,F].includes(P)||(q["@type"]=P)}else if("i18n-datatype"===j&&P.startsWith("https://www.w3.org/ns/i18n#")){const[,W,Y]=P.split(/[#_]/);W.length>0&&(q["@language"]=W,W.match(c)||D.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:W}},options:D})),q["@direction"]=Y}else P!==F&&(q["@type"]=P)}return q}X.exports=B,B.fromRDF=async(A,k)=>{const j={},D={"@default":j},q={},{useRdfType:P=!1,useNativeTypes:W=!1,rdfDirection:Y=null}=k;for(const $ of A){const ee="DefaultGraph"===$.graph.termType?"@default":$.graph.value;ee in D||(D[ee]={}),"@default"===ee||ee in j||(j[ee]={"@id":ee});const J=D[ee],ie=$.subject.value,oe=$.predicate.value,ye=$.object;ie in J||(J[ie]={"@id":ie});const be=J[ie],de=ye.termType.endsWith("Node");if(!de||ye.value in J||(J[ye.value]={"@id":ye.value}),oe===m&&!P&&de){e(be,"@type",ye.value,{propertyIsArray:!0});continue}const le=N(ye,W,Y,k);if(e(be,oe,le,{propertyIsArray:!0}),de)if(ye.value===l){const Ce=J[ye.value];"usages"in Ce||(Ce.usages=[]),Ce.usages.push({node:be,property:oe,value:le})}else ye.value in q?q[ye.value]=!1:q[ye.value]={node:be,property:oe,value:le}}for(const $ in D){const ee=D[$];if(!(l in ee))continue;const J=ee[l];if(J.usages){for(let ie of J.usages){let oe=ie.node,ye=ie.property,be=ie.value;const de=[],le=[];let Ce=Object.keys(oe).length;for(;ye===f&&w.isObject(q[oe["@id"]])&&w.isArray(oe[u])&&1===oe[u].length&&w.isArray(oe[f])&&1===oe[f].length&&(3===Ce||4===Ce&&w.isArray(oe["@type"])&&1===oe["@type"].length&&oe["@type"][0]===o)&&(de.push(oe[u][0]),le.push(oe["@id"]),oe=(ie=q[oe["@id"]]).node,ye=ie.property,be=ie.value,Ce=Object.keys(oe).length,s.isBlankNode(oe)););delete be["@id"],be["@list"]=de.reverse();for(const Ie of le)delete ee[Ie]}delete J.usages}}const ne=[],ce=Object.keys(j).sort();for(const $ of ce){const ee=j[$];if($ in D){const J=ee["@graph"]=[],ie=D[$],oe=Object.keys(ie).sort();for(const ye of oe){const be=ie[ye];s.isSubjectReference(be)||J.push(be)}}s.isSubjectReference(ee)||ne.push(ee)}return ne}},{"./JsonLdError":28,"./constants":34,"./events":37,"./graphTypes":42,"./types":47,"./util":49}],42:[function(G,X,Z){"use strict";const Q=G("./types"),s={};X.exports=s,s.isSubject=w=>!(!Q.isObject(w)||"@value"in w||"@set"in w||"@list"in w)&&(Object.keys(w).length>1||!("@id"in w)),s.isSubjectReference=w=>Q.isObject(w)&&1===Object.keys(w).length&&"@id"in w,s.isValue=w=>Q.isObject(w)&&"@value"in w,s.isList=w=>Q.isObject(w)&&"@list"in w,s.isGraph=w=>Q.isObject(w)&&"@graph"in w&&1===Object.keys(w).filter(c=>"@id"!==c&&"@index"!==c).length,s.isSimpleGraph=w=>s.isGraph(w)&&!("@id"in w),s.isBlankNode=w=>{if(Q.isObject(w)){if("@id"in w){const c=w["@id"];return!Q.isString(c)||0===c.indexOf("_:")}return 0===Object.keys(w).length||!("@value"in w||"@set"in w||"@list"in w)}return!1}},{"./types":47}],43:[function(G,X,Z){const Q=G("rdf-canonize"),s=G("./platform"),w=G("./util"),c=G("./ContextResolver"),e=w.IdentifierIssuer,r=G("./JsonLdError"),o=G("lru-cache"),u=G("./NQuads"),{expand:f}=G("./expand"),{flatten:l}=G("./flatten"),{fromRDF:m}=G("./fromRdf"),{toRDF:d}=G("./toRdf"),{frameMergedOrDefault:a,cleanupNull:v}=G("./frame"),{isArray:E,isObject:F,isString:B}=G("./types"),{isSubjectReference:N}=G("./graphTypes"),{expandIri:A,getInitialContext:k,process:j,processingMode:D}=G("./context"),{compact:q,compactIri:P}=G("./compact"),{createNodeMap:W,createMergedNodeMap:Y,mergeNodeMaps:ne}=G("./nodeMap"),{logEventHandler:ce,logWarningEventHandler:$,safeEventHandler:ee,setDefaultEventHandler:J,setupEventHandler:ie,strictEventHandler:oe,unhandledEventHandler:ye}=G("./events"),be=function(le){const Ce={},Ie=new o({max:100});function Oe(R,{documentLoader:I=le.documentLoader,...H}){if(R&&"compactionMap"in R)throw new r('"compactionMap" not supported.',"jsonld.OptionsError");if(R&&"expansionMap"in R)throw new r('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:I},H,R,{eventHandler:ie({options:R})})}return le.compact=async function(R,I,H){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===I)throw new r("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===R)return null;let re;(H=Oe(H,{base:B(R)?R:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new c({sharedCache:Ie})})).link&&(H.skipExpansion=!0),H.compactToRelative||delete H.base,re=H.skipExpansion?R:await le.expand(R,H);const ve=await le.processContext(k(H),I,H);let ae=await q({activeCtx:ve,element:re,options:H});H.compactArrays&&!H.graph&&E(ae)?1===ae.length?ae=ae[0]:0===ae.length&&(ae={}):H.graph&&F(ae)&&(ae=[ae]),F(I)&&"@context"in I&&(I=I["@context"]),I=w.clone(I),E(I)||(I=[I]);const Ee=I;I=[];for(let Re=0;Re<Ee.length;++Re)(!F(Ee[Re])||Object.keys(Ee[Re]).length>0)&&I.push(Ee[Re]);const Fe=I.length>0;if(1===I.length&&(I=I[0]),E(ae)){const Re=P({activeCtx:ve,iri:"@graph",relativeTo:{vocab:!0}}),Je=ae;ae={},Fe&&(ae["@context"]=I),ae[Re]=Je}else if(F(ae)&&Fe){const Re=ae;ae={"@context":I};for(const Je in Re)ae[Je]=Re[Je]}return ae},le.expand=async function(R,I){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const H={},re=[];if("expandContext"in(I=Oe(I,{keepFreeFloatingNodes:!1,contextResolver:new c({sharedCache:Ie})}))){const Fe=w.clone(I.expandContext);F(Fe)&&"@context"in Fe?H.expandContext=Fe:H.expandContext={"@context":Fe},re.push(H.expandContext)}let ve;if(B(R)){const Fe=await le.get(R,I);ve=Fe.documentUrl,H.input=Fe.document,Fe.contextUrl&&(H.remoteContext={"@context":Fe.contextUrl},re.push(H.remoteContext))}else H.input=w.clone(R);"base"in I||(I.base=ve||"");let ae=k(I);for(const Fe of re)ae=await j({activeCtx:ae,localCtx:Fe,options:I});let Ee=await f({activeCtx:ae,element:H.input,options:I});return F(Ee)&&"@graph"in Ee&&1===Object.keys(Ee).length?Ee=Ee["@graph"]:null===Ee&&(Ee=[]),E(Ee)||(Ee=[Ee]),Ee},le.flatten=async function(R,I,H){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");I="function"==typeof I?null:I||null,H=Oe(H,{base:B(R)?R:"",contextResolver:new c({sharedCache:Ie})});const re=await le.expand(R,H),ve=l(re);return null===I?ve:(H.graph=!0,H.skipExpansion=!0,await le.compact(ve,I,H))},le.frame=async function(R,I,H){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(H=Oe(H,{base:B(R)?R:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new c({sharedCache:Ie})}),B(I)){const it=await le.get(I,H);if(I=it.document,it.contextUrl){let at=I["@context"];at?E(at)?at.push(it.contextUrl):at=[at,it.contextUrl]:at=it.contextUrl,I["@context"]=at}}const re=I&&I["@context"]||{},ve=await le.processContext(k(H),re,H);H.hasOwnProperty("omitGraph")||(H.omitGraph=D(ve,1.1)),H.hasOwnProperty("pruneBlankNodeIdentifiers")||(H.pruneBlankNodeIdentifiers=D(ve,1.1));const ae=await le.expand(R,H),Ee={...H};Ee.isFrame=!0,Ee.keepFreeFloatingNodes=!0;const Fe=await le.expand(I,Ee),Re=Object.keys(I).map(it=>A(ve,it,{vocab:!0}));Ee.merged=!Re.includes("@graph"),Ee.is11=D(ve,1.1);const Je=a(ae,Fe,Ee);Ee.graph=!H.omitGraph,Ee.skipExpansion=!0,Ee.link={},Ee.framing=!0;let Ve=await le.compact(Je,re,Ee);return Ee.link={},v(Ve,Ee)},le.link=async function(R,I,H){const re={};return I&&(re["@context"]=I),re["@embed"]="@link",le.frame(R,re,H)},le.normalize=le.canonize=async function(R,I){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(I=Oe(I,{base:B(R)?R:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new c({sharedCache:Ie})}))){if("application/n-quads"!==I.inputFormat&&"application/nquads"!==I.inputFormat)throw new r("Unknown canonicalization input format.","jsonld.CanonizeError");const ve=u.parse(R);return Q.canonize(ve,I)}const H={...I};delete H.format,H.produceGeneralizedRdf=!1;const re=await le.toRDF(R,H);return Q.canonize(re,I)},le.fromRDF=async function(R,I){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");I=Oe(I,{format:B(R)?"application/n-quads":void 0});const{format:H}=I;let{rdfParser:re}=I;if(H){if(!(re=re||Ce[H]))throw new r("Unknown input format.","jsonld.UnknownFormat",{format:H})}else re=()=>R;const ve=await re(R);return m(ve,I)},le.toRDF=async function(R,I){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let H;H=(I=Oe(I,{base:B(R)?R:"",skipExpansion:!1,contextResolver:new c({sharedCache:Ie})})).skipExpansion?R:await le.expand(R,I);const re=d(H,I);if(I.format){if("application/n-quads"===I.format||"application/nquads"===I.format)return u.serialize(re);throw new r("Unknown output format.","jsonld.UnknownFormat",{format:I.format})}return re},le.createNodeMap=async function(R,I){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");I=Oe(I,{base:B(R)?R:"",contextResolver:new c({sharedCache:Ie})});const H=await le.expand(R,I);return Y(H,I)},le.merge=async function(R,I,H){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!E(R))throw new TypeError('Could not merge, "docs" must be an array.');I="function"==typeof I?null:I||null,H=Oe(H,{contextResolver:new c({sharedCache:Ie})});const re=await Promise.all(R.map(Ve=>{const it={...H};return le.expand(Ve,it)}));let ve=!0;"mergeNodes"in H&&(ve=H.mergeNodes);const ae=H.issuer||new e("_:b"),Ee={"@default":{}};for(let Ve=0;Ve<re.length;++Ve){const it=w.relabelBlankNodes(re[Ve],{issuer:new e("_:b"+Ve+"-")}),at=ve||0===Ve?Ee:{"@default":{}};if(W(it,at,"@default",ae),at!==Ee)for(const ge in at){const _e=at[ge];if(!(ge in Ee)){Ee[ge]=_e;continue}const ke=Ee[ge];for(const U in _e)U in ke||(ke[U]=_e[U])}}const Fe=ne(Ee),Re=[],Je=Object.keys(Fe).sort();for(let Ve=0;Ve<Je.length;++Ve){const it=Fe[Je[Ve]];N(it)||Re.push(it)}return null===I?Re:(H.graph=!0,H.skipExpansion=!0,await le.compact(Re,I,H))},Object.defineProperty(le,"documentLoader",{get:()=>le._documentLoader,set:R=>le._documentLoader=R}),le.documentLoader=async R=>{throw new r("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:R})},le.get=async function(R,I){let H;H="function"==typeof I.documentLoader?I.documentLoader:le.documentLoader;const re=await H(R);try{if(!re.document)throw new r("No remote document found at the given URL.","jsonld.NullRemoteDocument");B(re.document)&&(re.document=JSON.parse(re.document))}catch(ve){throw new r("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ve,remoteDoc:re})}return re},le.processContext=async function(R,I,H){return H=Oe(H,{base:"",contextResolver:new c({sharedCache:Ie})}),null===I?k(H):(I=w.clone(I),F(I)&&"@context"in I||(I={"@context":I}),j({activeCtx:R,localCtx:I,options:H}))},le.getContextValue=G("./context").getContextValue,le.documentLoaders={},le.useDocumentLoader=function(R){if(!(R in le.documentLoaders))throw new r('Unknown document loader type: "'+R+'"',"jsonld.UnknownDocumentLoader",{type:R});le.documentLoader=le.documentLoaders[R].apply(le,Array.prototype.slice.call(arguments,1))},le.registerRDFParser=function(R,I){Ce[R]=I},le.unregisterRDFParser=function(R){delete Ce[R]},le.registerRDFParser("application/n-quads",u.parse),le.registerRDFParser("application/nquads",u.parse),le.url=G("./url"),le.logEventHandler=ce,le.logWarningEventHandler=$,le.safeEventHandler=ee,le.setDefaultEventHandler=J,le.strictEventHandler=oe,le.unhandledEventHandler=ye,le.util=w,Object.assign(le,w),le.promises=le,le.RequestQueue=G("./RequestQueue"),le.JsonLdProcessor=G("./JsonLdProcessor")(le),s.setupGlobals(le),s.setupDocumentLoaders(le),le},de=function(){return be(function(){return de()})};be(de),X.exports=de},{"./ContextResolver":27,"./JsonLdError":28,"./JsonLdProcessor":29,"./NQuads":30,"./RequestQueue":31,"./compact":33,"./context":35,"./events":37,"./expand":38,"./flatten":39,"./frame":40,"./fromRdf":41,"./graphTypes":42,"./nodeMap":44,"./platform":45,"./toRdf":46,"./types":47,"./url":48,"./util":49,"lru-cache":50,"rdf-canonize":64}],44:[function(G,X,Z){"use strict";const{isKeyword:Q}=G("./context"),s=G("./graphTypes"),w=G("./types"),c=G("./util"),e=G("./JsonLdError"),r={};X.exports=r,r.createMergedNodeMap=(o,u)=>{const f=(u=u||{}).issuer||new c.IdentifierIssuer("_:b"),l={"@default":{}};return r.createNodeMap(o,l,"@default",f),r.mergeNodeMaps(l)},r.createNodeMap=(o,u,f,l,m,d)=>{if(w.isArray(o)){for(const F of o)r.createNodeMap(F,u,f,l,void 0,d);return}if(!w.isObject(o))return void(d&&d.push(o));if(s.isValue(o)){if("@type"in o){let F=o["@type"];0===F.indexOf("_:")&&(o["@type"]=F=l.getId(F))}return void(d&&d.push(o))}if(d&&s.isList(o)){const F=[];return r.createNodeMap(o["@list"],u,f,l,m,F),void d.push({"@list":F})}if("@type"in o){const F=o["@type"];for(const B of F)0===B.indexOf("_:")&&l.getId(B)}w.isUndefined(m)&&(m=s.isBlankNode(o)?l.getId(o["@id"]):o["@id"]),d&&d.push({"@id":m});const a=u[f],v=a[m]=a[m]||{};v["@id"]=m;const E=Object.keys(o).sort();for(let F of E){if("@id"===F)continue;if("@reverse"===F){const N={"@id":m},A=o["@reverse"];for(const k in A){const j=A[k];for(const D of j){let q=D["@id"];s.isBlankNode(D)&&(q=l.getId(q)),r.createNodeMap(D,u,f,l,q),c.addValue(a[q],k,N,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===F){m in u||(u[m]={}),r.createNodeMap(o[F],u,m,l);continue}if("@included"===F){r.createNodeMap(o[F],u,f,l);continue}if("@type"!==F&&Q(F)){if("@index"===F&&F in v&&(o[F]!==v[F]||o[F]["@id"]!==v[F]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:v});v[F]=o[F];continue}const B=o[F];if(0===F.indexOf("_:")&&(F=l.getId(F)),0!==B.length)for(let N of B)if("@type"===F&&(N=0===N.indexOf("_:")?l.getId(N):N),s.isSubject(N)||s.isSubjectReference(N)){if("@id"in N&&!N["@id"])continue;const A=s.isBlankNode(N)?l.getId(N["@id"]):N["@id"];c.addValue(v,F,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),r.createNodeMap(N,u,f,l,A)}else if(s.isValue(N))c.addValue(v,F,N,{propertyIsArray:!0,allowDuplicate:!1});else if(s.isList(N)){const A=[];r.createNodeMap(N["@list"],u,f,l,m,A),N={"@list":A},c.addValue(v,F,N,{propertyIsArray:!0,allowDuplicate:!1})}else r.createNodeMap(N,u,f,l,m),c.addValue(v,F,N,{propertyIsArray:!0,allowDuplicate:!1});else c.addValue(v,F,[],{propertyIsArray:!0})}},r.mergeNodeMapGraphs=o=>{const u={};for(const f of Object.keys(o).sort())for(const l of Object.keys(o[f]).sort()){const m=o[f][l];l in u||(u[l]={"@id":l});const d=u[l];for(const a of Object.keys(m).sort())if(Q(a)&&"@type"!==a)d[a]=c.clone(m[a]);else for(const v of m[a])c.addValue(d,a,c.clone(v),{propertyIsArray:!0,allowDuplicate:!1})}return u},r.mergeNodeMaps=o=>{const u=o["@default"],f=Object.keys(o).sort();for(const l of f){if("@default"===l)continue;const m=o[l];let d=u[l];d?"@graph"in d||(d["@graph"]=[]):u[l]=d={"@id":l,"@graph":[]};const a=d["@graph"];for(const v of Object.keys(m).sort()){const E=m[v];s.isSubjectReference(E)||a.push(E)}}return u}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./util":49}],45:[function(G,X,Z){"use strict";const Q=G("./documentLoaders/xhr"),s={};X.exports=s,s.setupDocumentLoaders=function(w){typeof XMLHttpRequest<"u"&&(w.documentLoaders.xhr=Q,w.useDocumentLoader("xhr"))},s.setupGlobals=function(w){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:w.JsonLdProcessor})}},{"./documentLoaders/xhr":36}],46:[function(G,X,Z){"use strict";const{createNodeMap:Q}=G("./nodeMap"),{isKeyword:s}=G("./context"),w=G("./graphTypes"),c=G("canonicalize"),e=G("./types"),r=G("./util"),{handleEvent:o}=G("./events"),{RDF_FIRST:u,RDF_REST:f,RDF_NIL:l,RDF_TYPE:m,RDF_JSON_LITERAL:d,RDF_LANGSTRING:a,XSD_BOOLEAN:v,XSD_DOUBLE:E,XSD_INTEGER:F,XSD_STRING:B}=G("./constants"),{isAbsolute:N}=G("./url"),A={};function k(D,q,P,W,Y){const ne=Object.keys(q).sort();for(const ce of ne){const $=q[ce],ee=Object.keys($).sort();for(let J of ee){const ie=$[J];if("@type"===J)J=m;else if(s(J))continue;for(const oe of ie){const ye={termType:ce.startsWith("_:")?"BlankNode":"NamedNode",value:ce};if(!N(ce)){Y.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:ce}},options:Y});continue}const be={termType:J.startsWith("_:")?"BlankNode":"NamedNode",value:J};if(!N(J)){Y.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:J}},options:Y});continue}if("BlankNode"===be.termType&&!Y.produceGeneralizedRdf){Y.eventHandler&&o({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:W.getOldIds().find(le=>W.getId(le)===J)}},options:Y});continue}const de=j(oe,W,D,P,Y.rdfDirection,Y);de&&D.push({subject:ye,predicate:be,object:de,graph:P})}}}}function j(D,q,P,W,Y,ne){const ce={};if(w.isValue(D)){ce.termType="Literal",ce.value=void 0,ce.datatype={termType:"NamedNode"};let $=D["@value"];const ee=D["@type"]||null;if("@json"===ee)ce.value=c($),ce.datatype.value=d;else if(e.isBoolean($))ce.value=$.toString(),ce.datatype.value=ee||v;else if(e.isDouble($)||ee===E)e.isDouble($)||($=parseFloat($)),ce.value=$.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),ce.datatype.value=ee||E;else if(e.isNumber($))ce.value=$.toFixed(0),ce.datatype.value=ee||F;else if("i18n-datatype"===Y&&"@direction"in D){const J="https://www.w3.org/ns/i18n#"+(D["@language"]||"")+`_${D["@direction"]}`;ce.datatype.value=J,ce.value=$}else"@language"in D?(ce.value=$,ce.datatype.value=ee||a,ce.language=D["@language"]):(ce.value=$,ce.datatype.value=ee||B)}else if(w.isList(D)){const $=function(ee,J,ie,oe,ye,be){const de={termType:"NamedNode",value:u},le={termType:"NamedNode",value:f},Ce={termType:"NamedNode",value:l},Ie=ee.pop(),Oe=Ie?{termType:"BlankNode",value:J.getId()}:Ce;let R=Oe;for(const I of ee){const H=j(I,J,ie,oe,ye,be),re={termType:"BlankNode",value:J.getId()};ie.push({subject:R,predicate:de,object:H,graph:oe}),ie.push({subject:R,predicate:le,object:re,graph:oe}),R=re}if(Ie){const I=j(Ie,J,ie,oe,ye,be);ie.push({subject:R,predicate:de,object:I,graph:oe}),ie.push({subject:R,predicate:le,object:Ce,graph:oe})}return Oe}(D["@list"],q,P,W,Y,ne);ce.termType=$.termType,ce.value=$.value}else{const $=e.isObject(D)?D["@id"]:D;ce.termType=$.startsWith("_:")?"BlankNode":"NamedNode",ce.value=$}return"NamedNode"!==ce.termType||N(ce.value)?ce:(ne.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:ce.value}},options:ne}),null)}X.exports=A,A.toRDF=(D,q)=>{const P=new r.IdentifierIssuer("_:b"),W={"@default":{}};Q(D,W,"@default",P);const Y=[],ne=Object.keys(W).sort();for(const ce of ne){let $;if("@default"===ce)$={termType:"DefaultGraph",value:""};else{if(!N(ce)){q.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:ce}},options:q});continue}($=ce.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=ce}k(Y,W[ce],$,P,q)}return Y}},{"./constants":34,"./context":35,"./events":37,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49,canonicalize:9}],47:[function(G,X,Z){"use strict";const Q={};X.exports=Q,Q.isArray=Array.isArray,Q.isBoolean=s=>"boolean"==typeof s||"[object Boolean]"===Object.prototype.toString.call(s),Q.isDouble=s=>Q.isNumber(s)&&(-1!==String(s).indexOf(".")||Math.abs(s)>=1e21),Q.isEmptyObject=s=>Q.isObject(s)&&0===Object.keys(s).length,Q.isNumber=s=>"number"==typeof s||"[object Number]"===Object.prototype.toString.call(s),Q.isNumeric=s=>!isNaN(parseFloat(s))&&isFinite(s),Q.isObject=s=>"[object Object]"===Object.prototype.toString.call(s),Q.isString=s=>"string"==typeof s||"[object String]"===Object.prototype.toString.call(s),Q.isUndefined=s=>void 0===s},{}],48:[function(G,X,Z){"use strict";const Q=G("./types"),s={};X.exports=s,s.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},s.parse=(c,e)=>{const r={},o=s.parsers[e||"full"],u=o.regex.exec(c);let f=o.keys.length;for(;f--;)r[o.keys[f]]=void 0===u[f]?null:u[f];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=s.removeDotSegments(r.path),r},s.prependBase=(c,e)=>{if(null===c||s.isAbsolute(e))return e;c&&!Q.isString(c)||(c=s.parse(c||""));const r=s.parse(e),o={protocol:c.protocol||""};if(null!==r.authority)o.authority=r.authority,o.path=r.path,o.query=r.query;else if(o.authority=c.authority,""===r.path)o.path=c.path,null!==r.query?o.query=r.query:o.query=c.query;else{if(0===r.path.indexOf("/"))o.path=r.path;else{let f=c.path;((f=f.substr(0,f.lastIndexOf("/")+1)).length>0||c.authority)&&"/"!==f.substr(-1)&&(f+="/"),f+=r.path,o.path=f}o.query=r.query}""!==r.path&&(o.path=s.removeDotSegments(o.path));let u=o.protocol;return null!==o.authority&&(u+="//"+o.authority),u+=o.path,null!==o.query&&(u+="?"+o.query),null!==r.fragment&&(u+="#"+r.fragment),""===u&&(u="./"),u},s.removeBase=(c,e)=>{if(null===c)return e;c&&!Q.isString(c)||(c=s.parse(c||""));let r="";if(""!==c.href?r+=(c.protocol||"")+"//"+(c.authority||""):e.indexOf("//")&&(r+="//"),0!==e.indexOf(r))return e;const o=s.parse(e.substr(r.length)),u=c.normalizedPath.split("/"),f=o.normalizedPath.split("/"),l=o.fragment||o.query?0:1;for(;u.length>0&&f.length>l&&u[0]===f[0];)u.shift(),f.shift();let m="";if(u.length>0){u.pop();for(let d=0;d<u.length;++d)m+="../"}return m+=f.join("/"),null!==o.query&&(m+="?"+o.query),null!==o.fragment&&(m+="#"+o.fragment),""===m&&(m="./"),m},s.removeDotSegments=c=>{if(0===c.length)return"";const e=c.split("/"),r=[];for(;e.length>0;){const o=e.shift(),u=0===e.length;"."!==o?".."!==o?r.push(o):(r.pop(),u&&r.push("")):u&&r.push("")}return"/"===c[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const w=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;s.isAbsolute=c=>Q.isString(c)&&w.test(c),s.isRelative=c=>Q.isString(c)},{"./types":47}],49:[function(G,X,Z){"use strict";const Q=G("./graphTypes"),s=G("./types"),w=G("rdf-canonize").IdentifierIssuer,c=G("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,o=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,u_accept="application/ld+json, application/json",f={};X.exports=f,f.IdentifierIssuer=w,f.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,f.REGEX_KEYWORD=/^@[a-zA-Z]+$/,f.clone=function(l){if(l&&"object"==typeof l){let m;if(s.isArray(l)){m=[];for(let d=0;d<l.length;++d)m[d]=f.clone(l[d])}else if(l instanceof Map){m=new Map;for(const[d,a]of l)m.set(d,f.clone(a))}else if(l instanceof Set){m=new Set;for(const d of l)m.add(f.clone(d))}else if(s.isObject(l)){m={};for(const d in l)m[d]=f.clone(l[d])}else m=l.toString();return m}return l},f.asArray=function(l){return Array.isArray(l)?l:[l]},f.buildHeaders=(l={})=>{if(Object.keys(l).some(m=>"accept"===m.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+u_accept+'" is supported.');return Object.assign({Accept:u_accept},l)},f.parseLinkHeader=l=>{const m={},d=l.match(e);for(let a=0;a<d.length;++a){let v=d[a].match(r);if(!v)continue;const E={target:v[1]},F=v[2];for(;v=o.exec(F);)E[v[1]]=void 0===v[2]?v[3]:v[2];const B=E.rel||"";Array.isArray(m[B])?m[B].push(E):m.hasOwnProperty(B)?m[B]=[m[B],E]:m[B]=E}return m},f.validateTypeValue=(l,m)=>{if(!(s.isString(l)||s.isArray(l)&&l.every(d=>s.isString(d)))){if(m&&s.isObject(l))switch(Object.keys(l).length){case 0:return;case 1:if("@default"in l&&f.asArray(l["@default"]).every(d=>s.isString(d)))return}throw new c('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:l})}},f.hasProperty=(l,m)=>{if(l.hasOwnProperty(m)){const d=l[m];return!s.isArray(d)||d.length>0}return!1},f.hasValue=(l,m,d)=>{if(f.hasProperty(l,m)){let a=l[m];const v=Q.isList(a);if(s.isArray(a)||v){v&&(a=a["@list"]);for(let E=0;E<a.length;++E)if(f.compareValues(d,a[E]))return!0}else if(!s.isArray(d))return f.compareValues(d,a)}return!1},f.addValue=(l,m,d,a)=>{if("propertyIsArray"in(a=a||{})||(a.propertyIsArray=!1),"valueIsArray"in a||(a.valueIsArray=!1),"allowDuplicate"in a||(a.allowDuplicate=!0),"prependValue"in a||(a.prependValue=!1),a.valueIsArray)l[m]=d;else if(s.isArray(d)){0===d.length&&a.propertyIsArray&&!l.hasOwnProperty(m)&&(l[m]=[]),a.prependValue&&(d=d.concat(l[m]),l[m]=[]);for(let v=0;v<d.length;++v)f.addValue(l,m,d[v],a)}else if(l.hasOwnProperty(m)){const v=!a.allowDuplicate&&f.hasValue(l,m,d);s.isArray(l[m])||v&&!a.propertyIsArray||(l[m]=[l[m]]),v||(a.prependValue?l[m].unshift(d):l[m].push(d))}else l[m]=a.propertyIsArray?[d]:d},f.getValues=(l,m)=>[].concat(l[m]||[]),f.removeProperty=(l,m)=>{delete l[m]},f.removeValue=(l,m,d,a)=>{"propertyIsArray"in(a=a||{})||(a.propertyIsArray=!1);const v=f.getValues(l,m).filter(E=>!f.compareValues(E,d));0===v.length?f.removeProperty(l,m):1!==v.length||a.propertyIsArray?l[m]=v:l[m]=v[0]},f.relabelBlankNodes=(l,m)=>function d(a,v){if(s.isArray(v))for(let E=0;E<v.length;++E)v[E]=d(a,v[E]);else if(Q.isList(v))v["@list"]=d(a,v["@list"]);else if(s.isObject(v)){Q.isBlankNode(v)&&(v["@id"]=a.getId(v["@id"]));const E=Object.keys(v).sort();for(let F=0;F<E.length;++F){const B=E[F];"@id"!==B&&(v[B]=d(a,v[B]))}}return v}((m=m||{}).issuer||new w("_:b"),l),f.compareValues=(l,m)=>l===m||!(!Q.isValue(l)||!Q.isValue(m)||l["@value"]!==m["@value"]||l["@type"]!==m["@type"]||l["@language"]!==m["@language"]||l["@index"]!==m["@index"])||!!(s.isObject(l)&&"@id"in l&&s.isObject(m)&&"@id"in m)&&l["@id"]===m["@id"],f.compareShortestLeast=(l,m)=>l.length<m.length?-1:m.length<l.length?1:l===m?0:l<m?-1:1},{"./JsonLdError":28,"./graphTypes":42,"./types":47,"rdf-canonize":64}],50:[function(G,X,Z){"use strict";const Q=G("yallist"),s=Symbol("max"),w=Symbol("length"),c=Symbol("lengthCalculator"),e=Symbol("allowStale"),r=Symbol("maxAge"),o=Symbol("dispose"),u=Symbol("noDisposeOnSet"),f=Symbol("lruList"),l=Symbol("cache"),m=Symbol("updateAgeOnGet"),d=()=>1,a=(A,k,j)=>{const D=A[l].get(k);if(D){const q=D.value;if(v(A,q)){if(F(A,D),!A[e])return}else j&&(A[m]&&(D.value.now=Date.now()),A[f].unshiftNode(D));return q.value}},v=(A,k)=>{if(!k||!k.maxAge&&!A[r])return!1;const j=Date.now()-k.now;return k.maxAge?j>k.maxAge:A[r]&&j>A[r]},E=A=>{if(A[w]>A[s])for(let k=A[f].tail;A[w]>A[s]&&null!==k;){const j=k.prev;F(A,k),k=j}},F=(A,k)=>{if(k){const j=k.value;A[o]&&A[o](j.key,j.value),A[w]-=j.length,A[l].delete(j.key),A[f].removeNode(k)}};class B{constructor(k,j,D,q,P){this.key=k,this.value=j,this.length=D,this.now=q,this.maxAge=P||0}}const N=(A,k,j,D)=>{let q=j.value;v(A,q)&&(F(A,j),A[e]||(q=void 0)),q&&k.call(D,q.value,q.key,A)};X.exports=class{constructor(A){if("number"==typeof A&&(A={max:A}),A||(A={}),A.max&&("number"!=typeof A.max||A.max<0))throw new TypeError("max must be a non-negative number");this[s]=A.max||1/0;const k=A.length||d;if(this[c]="function"!=typeof k?d:k,this[e]=A.stale||!1,A.maxAge&&"number"!=typeof A.maxAge)throw new TypeError("maxAge must be a number");this[r]=A.maxAge||0,this[o]=A.dispose,this[u]=A.noDisposeOnSet||!1,this[m]=A.updateAgeOnGet||!1,this.reset()}set max(A){if("number"!=typeof A||A<0)throw new TypeError("max must be a non-negative number");this[s]=A||1/0,E(this)}get max(){return this[s]}set allowStale(A){this[e]=!!A}get allowStale(){return this[e]}set maxAge(A){if("number"!=typeof A)throw new TypeError("maxAge must be a non-negative number");this[r]=A,E(this)}get maxAge(){return this[r]}set lengthCalculator(A){"function"!=typeof A&&(A=d),A!==this[c]&&(this[c]=A,this[w]=0,this[f].forEach(k=>{k.length=this[c](k.value,k.key),this[w]+=k.length})),E(this)}get lengthCalculator(){return this[c]}get length(){return this[w]}get itemCount(){return this[f].length}rforEach(A,k){k=k||this;for(let j=this[f].tail;null!==j;){const D=j.prev;N(this,A,j,k),j=D}}forEach(A,k){k=k||this;for(let j=this[f].head;null!==j;){const D=j.next;N(this,A,j,k),j=D}}keys(){return this[f].toArray().map(A=>A.key)}values(){return this[f].toArray().map(A=>A.value)}reset(){this[o]&&this[f]&&this[f].length&&this[f].forEach(A=>this[o](A.key,A.value)),this[l]=new Map,this[f]=new Q,this[w]=0}dump(){return this[f].map(A=>!v(this,A)&&{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[f]}set(A,k,j){if((j=j||this[r])&&"number"!=typeof j)throw new TypeError("maxAge must be a number");const D=j?Date.now():0,q=this[c](k,A);if(this[l].has(A)){if(q>this[s])return F(this,this[l].get(A)),!1;const W=this[l].get(A).value;return this[o]&&(this[u]||this[o](A,W.value)),W.now=D,W.maxAge=j,W.value=k,this[w]+=q-W.length,W.length=q,this.get(A),E(this),!0}const P=new B(A,k,q,D,j);return P.length>this[s]?(this[o]&&this[o](A,k),!1):(this[w]+=P.length,this[f].unshift(P),this[l].set(A,this[f].head),E(this),!0)}has(A){if(!this[l].has(A))return!1;const k=this[l].get(A).value;return!v(this,k)}get(A){return a(this,A,!0)}peek(A){return a(this,A,!1)}pop(){const A=this[f].tail;return A?(F(this,A),A.value):null}del(A){F(this,this[l].get(A))}load(A){this.reset();const k=Date.now();for(let j=A.length-1;j>=0;j--){const D=A[j],q=D.e||0;if(0===q)this.set(D.k,D.v);else{const P=q-k;P>0&&this.set(D.k,D.v,P)}}}prune(){this[l].forEach((A,k)=>a(this,k,!1))}}},{yallist:121}],51:[function(G,X,Z){var Q=G;G=function(){},Z=X.exports={Lexer:G("./lib/N3Lexer"),Parser:G("./lib/N3Parser"),Writer:G("./lib/N3Writer"),Store:G("./lib/N3Store"),StreamParser:G("./lib/N3StreamParser"),StreamWriter:G("./lib/N3StreamWriter"),Util:G("./lib/N3Util")},Object.keys(Z).forEach(function(s){Object.defineProperty(Z,s,{configurable:!0,enumerable:!0,get:function(){return delete Z[s],Z[s]=Q("./lib/N3"+s)}})})},{"./lib/N3Lexer":52,"./lib/N3Parser":53,"./lib/N3Store":54,"./lib/N3StreamParser":55,"./lib/N3StreamWriter":56,"./lib/N3Util":57,"./lib/N3Writer":58}],52:[function(G,X,Z){(function(Q){(function(){var s=String.fromCharCode,w="function"==typeof Q?Q:function(u){setTimeout(u,0)},c=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},r=/[\x00-\x20<>\\"\{\}\|\^\`]/;function o(u){if(!(this instanceof o))return new o(u);if((u=u||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var f=this;this._tokenize=this.tokenize,this.tokenize=function(l,m){this._tokenize(l,function(d,a){!d&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(a.type)?m&&m(d,a):m&&m(d||f._syntaxError(a.type,m=null))})}}this._n3Mode=!1!==u.n3,this._comments=!!u.comments}o.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(u,f){for(var l=this._input,m=this._comments;;){for(var d,a;d=this._newline.exec(l);)m&&(a=this._comment.exec(d[0]))&&u(null,{line:this._line,type:"comment",value:a[1],prefix:""}),l=l.substr(d[0].length,l.length),this._line++;if((d=this._whitespace.exec(l))&&(l=l.substr(d[0].length,l.length)),this._endOfFile.test(l))return f&&(m&&(a=this._comment.exec(l))&&u(null,{line:this._line,type:"comment",value:a[1],prefix:""}),u(l=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=l;var v,E=this._line,F="",B="",N="",A=l[0],k=null,j=0,D=!1;switch(A){case"^":if(l.length<3)break;if("^"!==l[1]){this._n3Mode&&(j=1,F="^");break}if(this._previousMarker="^^","<"!==(l=l.substr(2))[0]){D=!0;break}case"<":if(k=this._unescapedIri.exec(l))F="IRI",B=k[1];else if(k=this._iri.exec(l)){if(null===(v=this._unescape(k[1]))||r.test(v))return P(this);F="IRI",B=v}else this._n3Mode&&l.length>1&&"="===l[1]&&(F="inverse",j=2,B="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((k=this._blank.exec(l))||f&&(k=this._blank.exec(l+" ")))&&(F="blank",N="_",B=k[1]);break;case'"':case"'":if(k=this._unescapedString.exec(l))F="literal",B=k[0];else if(k=this._singleQuotedString.exec(l)){if(null===(v=this._unescape(k[0])))return P(this);F="literal",B=v.replace(/^'|'$/g,'"')}else if(k=this._tripleQuotedString.exec(l)){if(v=k[1]||k[2],this._line+=v.split(/\r\n|\r|\n/).length-1,null===(v=this._unescape(v)))return P(this);F="literal",B=v.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(k=this._variable.exec(l))&&(F="var",B=k[0]);break;case"@":"literal"===this._previousMarker&&(k=this._langcode.exec(l))?(F="langcode",B=k[1]):(k=this._keyword.exec(l))&&(F=k[0]);break;case".":if(1===l.length?f:l[1]<"0"||l[1]>"9"){F=".",j=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(k=this._number.exec(l)||f&&(k=this._number.exec(l+" ")))&&(F="literal",B='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(k[1]?"double":/^[+\-]?\d+$/.test(k[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(k=this._sparqlKeyword.exec(l))?F=k[0].toUpperCase():D=!0;break;case"f":case"t":(k=this._boolean.exec(l))?(F="literal",B='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):D=!0;break;case"a":(k=this._shortPredicates.exec(l))?(F="abbreviation",B="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):D=!0;break;case"=":this._n3Mode&&l.length>1&&(F="abbreviation",">"!==l[1]?(j=1,B="http://www.w3.org/2002/07/owl#sameAs"):(j=2,B="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":j=1,F=A;break;default:D=!0}if(D&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(k=this._prefix.exec(l))?((k=this._prefixed.exec(l))||f&&(k=this._prefixed.exec(l+" ")))&&(F="prefixed",N=k[1]||"",B=this._unescape(k[2])):(F="prefix",B=k[1]||"")),"^^"===this._previousMarker)switch(F){case"prefixed":F="type";break;case"IRI":F="typeIRI";break;default:F=""}if(!F)return f||!/^'''|^"""/.test(l)&&/\n|\r/.test(l)?P(this):this._input=l;var q={line:E,type:F,value:B,prefix:N};u(null,q),this.previousToken=q,this._previousMarker=F,l=l.substr(j||k[0].length,l.length)}function P(W){u(W._syntaxError(/^\S*/.exec(l)[0]))}},_unescape:function(u){try{return u.replace(c,function(f,l,m,d){var a;if(l){if(a=parseInt(l,16),isNaN(a))throw new Error;return s(a)}if(m){if(a=parseInt(m,16),isNaN(a))throw new Error;return a<=65535?s(a):s(55296+(a-=65536)/1024,56320+(1023&a))}var v=e[d];if(!v)throw new Error;return v})}catch{return null}},_syntaxError:function(u){this._input=null;var f=new Error('Unexpected "'+u+'" on line '+this._line+".");return f.context={token:void 0,line:this._line,previousToken:this.previousToken},f},tokenize:function(u,f){var l=this;if(this._line=1,"string"==typeof u){if(this._input=u,"function"!=typeof f){var m,d=[];if(this._tokenizeToEnd(function(a,v){a?m=a:d.push(v)},!0),m)throw m;return d}w(function(){l._tokenizeToEnd(f,!0)})}else this._input="","function"==typeof u.setEncoding&&u.setEncoding("utf8"),u.on("data",function(a){null!==l._input&&(l._input+=a,l._tokenizeToEnd(f,!1))}),u.on("end",function(){null!==l._input&&l._tokenizeToEnd(f,!0)}),u.on("error",f)}},X.exports=o}).call(this)}).call(this,G("timers").setImmediate)},{timers:111}],53:[function(G,X,Z){var Q=G("./N3Lexer"),s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",w=s+"nil",c=s+"first",e=s+"rest",r=/^[a-z][a-z0-9+.-]*:/i,o=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,u=/(?:^|\/)\.\.?(?:$|[\/#?])/,f=0,l=0;function m(a){if(!(this instanceof m))return new m(a);this._contextStack=[],this._graph=null,a=a||{},this._setBase(a.documentIRI);var v="string"==typeof a.format?a.format.match(/\w*$/)[0].toLowerCase():"",E="turtle"===v,F="trig"===v,B=/triple/.test(v),N=/quad/.test(v),A=this._n3Mode=/n3/.test(v),k=B||N;(this._supportsNamedGraphs=!(E||A))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(E||F||B||A),k&&(this._base="",this._resolveIRI=function(j){return this._error("Disallowed relative IRI",j),this._callback=d,this._subject=null}),this._blankNodePrefix="string"!=typeof a.blankNodePrefix?"":"_:"+a.blankNodePrefix.replace(/^_:/,""),this._lexer=a.lexer||new Q({lineMode:k,n3:A}),this._explicitQuantifiers=!!a.explicitQuantifiers}function d(){}m._resetBlankNodeIds=function(){f=l=0},m.prototype={_setBase:function(a){if(a){var v=a.indexOf("#");v>=0&&(a=a.substr(0,v)),this._base=a,this._basePath=a.indexOf("/")<0?a:a.replace(/[^\/?]*(?:\?.*)?$/,""),a=a.match(o),this._baseRoot=a[0],this._baseScheme=a[1]}else this._base=null},_saveContext:function(a,v,E,F,B){var N=this._n3Mode;this._contextStack.push({subject:E,predicate:F,object:B,graph:v,type:a,inverse:!!N&&this._inversePredicate,blankPrefix:N?this._prefixes._:"",quantified:N?this._quantified:null}),N&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var a=this._contextStack.pop(),v=this._n3Mode;this._subject=a.subject,this._predicate=a.predicate,this._object=a.object,this._graph=a.graph,v&&(this._inversePredicate=a.inverse,this._prefixes._=a.blankPrefix,this._quantified=a.quantified)},_readInTopContext:function(a){switch(a.type){case"eof":return null!==this._graph?this._error("Unclosed graph",a):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(a)}},_readEntity:function(a,v){var E;switch(a.type){case"IRI":case"typeIRI":E=null===this._base||r.test(a.value)?a.value:this._resolveIRI(a);break;case"type":case"blank":case"prefixed":var F=this._prefixes[a.prefix];if(void 0===F)return this._error('Undefined prefix "'+a.prefix+':"',a);E=F+a.value;break;case"var":return a.value;default:return this._error("Expected entity but got "+a.type,a)}return!v&&this._n3Mode&&E in this._quantified&&(E=this._quantified[E]),E},_readSubject:function(a){switch(this._predicate=null,a.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+l++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,w,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+l++,null,null),this._readSubject):this._error("Unexpected graph",a);case"}":return this._readPunctuation(a);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',a);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',a);default:if(void 0===(this._subject=this._readEntity(a)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(a){var v=a.type;switch(v){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=a.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+v,a):(this._subject=null,"]"===v?this._readBlankNodeTail(a):this._readPunctuation(a));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",a);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",a);default:if(void 0===(this._predicate=this._readEntity(a)))return}return this._readObject},_readObject:function(a){switch(a.type){case"literal":return this._object=a.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+l++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,w),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+l++),this._readSubject):this._error("Unexpected graph",a);default:if(void 0===(this._object=this._readEntity(a)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(a){return"{"===a.type?this._readGraph(a):this._readPredicate(a)},_readGraph:function(a){return"{"!==a.type?this._error("Expected graph but got "+a.type,a):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(a){return"]"===a.type?(this._subject=null,this._readBlankNodeTail(a)):(this._predicate=null,this._readPredicate(a))},_readBlankNodeTail:function(a){if("]"!==a.type)return this._readBlankNodePunctuation(a);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var v=null===this._predicate;return this._restoreContext(),null===this._object?v?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(a){return"."!==a.type||this._contextStack.length?this._readPredicate(a):(this._subject=null,this._readPunctuation(a))},_readListItem:function(a){var v=null,E=null,F=this._subject,B=this._contextStack,N=B[B.length-1],A=this._readListItem,k=!0;switch(a.type){case"[":this._saveContext("blank",this._graph,E="_:b"+l++,c,this._subject=v="_:b"+l++),A=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,E="_:b"+l++,c,w),this._subject=null;break;case")":if(this._restoreContext(),0!==B.length&&"list"===B[B.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(A=this._readPredicate,this._subject===w)return A}else if(A=this._getContextEndReader(),this._object===w)return A;E=w;break;case"literal":v=a.value,k=!1,A=this._readListItemDataTypeOrLang;break;default:if(void 0===(v=this._readEntity(a)))return}if(null===E&&(this._subject=E="_:b"+l++),null===F?null===N.predicate?N.subject=E:N.object=E:this._triple(F,e,E,this._graph),null!==v){if(this._n3Mode&&("IRI"===a.type||"prefixed"===a.type))return this._saveContext("item",this._graph,E,c,v),this._subject=v,this._predicate=null,this._getPathReader(this._readListItem);k?this._triple(E,c,v,this._graph):this._object=v}return A},_readDataTypeOrLang:function(a){return this._completeLiteral(a,!1)},_readListItemDataTypeOrLang:function(a){return this._completeLiteral(a,!0)},_completeLiteral:function(a,v){var E=!1;switch(a.type){case"type":case"typeIRI":var F=this._readEntity(a);if(void 0===F)return;E=!0,this._object+="^^"+F;break;case"langcode":E=!0,this._object+="@"+a.value.toLowerCase()}return v&&this._triple(this._subject,c,this._object,this._graph),E?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(a))},_readFormulaTail:function(a){return"}"!==a.type?this._readPunctuation(a):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(a){var v,E=this._subject,F=this._graph,B=this._inversePredicate;switch(a.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",a);if(this._n3Mode)return this._readFormulaTail(a);this._graph=null;case".":this._subject=null,v=this._contextStack.length?this._readSubject:this._readInTopContext,B&&(this._inversePredicate=!1);break;case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(F=this._readEntity(a))){v=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',a)}if(null!==E){var N=this._predicate,A=this._object;B?this._triple(A,N,E,F):this._triple(E,N,A,F)}return v},_readBlankNodePunctuation:function(a){var v;switch(a.type){case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}return this._triple(this._subject,this._predicate,this._object,this._graph),v},_readQuadPunctuation:function(a){return"."!==a.type?this._error("Expected dot to follow quad",a):this._readInTopContext},_readPrefix:function(a){return"prefix"!==a.type?this._error("Expected prefix to follow @prefix",a):(this._prefix=a.value,this._readPrefixIRI)},_readPrefixIRI:function(a){if("IRI"!==a.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',a);var v=this._readEntity(a);return this._prefixes[this._prefix]=v,this._prefixCallback(this._prefix,v),this._readDeclarationPunctuation},_readBaseIRI:function(a){return"IRI"!==a.type?this._error("Expected IRI to follow base declaration",a):(this._setBase(null===this._base||r.test(a.value)?a.value:this._resolveIRI(a)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(a){switch(a.type){case"IRI":case"blank":case"prefixed":return this._readSubject(a),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",a)}},_readNamedGraphBlankLabel:function(a){return"]"!==a.type?this._error("Invalid graph label",a):(this._subject="_:b"+l++,this._readGraph)},_readDeclarationPunctuation:function(a){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(a)):"."!==a.type?this._error("Expected declaration to end with a dot",a):this._readInTopContext},_readQuantifierList:function(a){var v;switch(a.type){case"IRI":case"prefixed":if(void 0!==(v=this._readEntity(a,!0)))break;default:return this._error("Unexpected "+a.type,a)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+l++,"urn:n3:quantifiers"):this._triple(this._subject,e,this._subject="_:b"+l++,"urn:n3:quantifiers"),this._triple(this._subject,c,v,"urn:n3:quantifiers")):this._quantified[v]=this._quantifiedPrefix+l++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(a){return","===a.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,w,"urn:n3:quantifiers"),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(a))},_getPathReader:function(a){return this._afterPath=a,this._readPath},_readPath:function(a){switch(a.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var v=this._contextStack,E=v.length&&v[v.length-1];if(E&&"item"===E.type){var F=this._subject;this._restoreContext(),this._triple(this._subject,c,F,this._graph)}return this._afterPath(a)}},_readForwardPath:function(a){var v,E,F="_:b"+l++;if(void 0!==(E=this._readEntity(a)))return null===this._predicate?(v=this._subject,this._subject=F):(v=this._object,this._object=F),this._triple(v,E,F,this._graph),this._readPath},_readBackwardPath:function(a){var v,E,F="_:b"+l++;if(void 0!==(v=this._readEntity(a)))return null===this._predicate?(E=this._subject,this._subject=F):(E=this._object,this._object=F),this._triple(F,v,E,this._graph),this._readPath},_getContextEndReader:function(){var a=this._contextStack;if(!a.length)return this._readPunctuation;switch(a[a.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(a,v,E,F){this._callback(null,{subject:a,predicate:v,object:E,graph:F||""})},_error:function(a,v){var E=new Error(a+" on line "+v.line+".");E.context={token:v,line:v.line,previousToken:this._lexer.previousToken},this._callback(E),this._callback=d},_resolveIRI:function(a){var v=a.value;switch(v[0]){case void 0:return this._base;case"#":return this._base+v;case"?":return this._base.replace(/(?:\?.*)?$/,v);case"/":return("/"===v[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(v);default:return this._removeDotSegments(this._basePath+v)}},_removeDotSegments:function(a){if(!u.test(a))return a;for(var v="",E=a.length,F=-1,B=-1,N=0,A="/";F<E;){switch(A){case":":if(B<0&&"/"===a[++F]&&"/"===a[++F])for(;(B=F+1)<E&&"/"!==a[B];)F=B;break;case"?":case"#":F=E;break;case"/":if("."===a[F+1])switch(A=a[1+ ++F]){case"/":v+=a.substring(N,F-1),N=F+1;break;case void 0:case"?":case"#":return v+a.substring(N,F)+a.substr(F+1);case".":if(void 0===(A=a[1+ ++F])||"/"===A||"?"===A||"#"===A){if((N=(v+=a.substring(N,F-2)).lastIndexOf("/"))>=B&&(v=v.substr(0,N)),"/"!==A)return v+"/"+a.substr(F+1);N=F+1}}}A=a[++F]}return v+a.substring(N)},parse:function(a,v,E){var F=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+f+++"_",this._prefixCallback=E||d,this._inversePredicate=!1,this._quantified=Object.create(null),!v){var B,N=[];if(this._callback=function(A,k){A?B=A:k&&N.push(k)},this._lexer.tokenize(a).every(function(A){return F._readCallback=F._readCallback(A)}),B)throw B;return N}this._callback=v,this._lexer.tokenize(a,function(A,k){null!==A?(F._callback(A),F._callback=d):F._readCallback&&(F._readCallback=F._readCallback(k))})}},X.exports=m},{"./N3Lexer":52}],54:[function(G,X,Z){var Q=G("./N3Util").expandPrefixedName;function s(c,e){if(!(this instanceof s))return new s(c,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!c||c[0]||(e=c,c=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),c&&this.addTriples(c)}function w(c){return"string"==typeof c||c instanceof String}s.prototype={get size(){var c=this._size;if(null!==c)return c;c=0;var e,r,o=this._graphs;for(var u in o)for(var f in e=o[u].subjects)for(var l in r=e[f])c+=Object.keys(r[l]).length;return this._size=c},_addToIndex:function(c,e,r,o){var u=c[e]||(c[e]={}),f=u[r]||(u[r]={}),l=o in f;return l||(f[o]=null),!l},_removeFromIndex:function(c,e,r,o){var u,f=c[e],l=f[r];for(u in delete l[o],l)return;for(u in delete f[r],f)return;delete c[e]},_findInIndex:function(c,e,r,o,u,f,l,m,d,a){var v,E,F,B=!e+!r+!o>1?Object.keys(this._ids):this._entities;for(var N in e&&((v=c,c={})[e]=v[e]),c){var A=B[N];if(E=c[N])for(var k in r&&((v=E,E={})[r]=v[r]),E){var j=B[k];if(F=E[k])for(var D=(o?o in F?[o]:[]:Object.keys(F)),q=D.length-1;q>=0;q--){var P={subject:"",predicate:"",object:"",graph:m};if(P[u]=A,P[f]=j,P[l]=B[D[q]],a)a.push(P);else if(d(P))return!0}}}return a},_loop:function(c,e){for(var r in c)e(r)},_loopByKey0:function(c,e,r){var o,u;if(o=c[e])for(u in o)r(u)},_loopByKey1:function(c,e,r){var o;for(o in c)c[o][e]&&r(o)},_loopBy2Keys:function(c,e,r,o){var u,f,l;if((u=c[e])&&(f=u[r]))for(l in f)o(l)},_countInIndex:function(c,e,r,o){var u,f,l,m=0;for(var d in e&&((u=c,c={})[e]=u[e]),c)if(f=c[d])for(var a in r&&((u=f,f={})[r]=u[r]),f)(l=f[a])&&(o?o in l&&m++:m+=Object.keys(l).length);return m},_getGraphs:function(c){if(!w(c))return this._graphs;var e={};return e[c]=this._graphs[c],e},_uniqueEntities:function(c){var e=Object.create(null),r=this._entities;return function(o){o in e||(e[o]=!0,c(r[o]))}},addTriple:function(c,e,r,o){e||(o=c.graph,r=c.object,e=c.predicate,c=c.subject),o=o||"";var u=this._graphs[o];u||(u=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(u));var f=this._ids,l=this._entities;c=f[c]||(f[l[++this._id]=c]=this._id),e=f[e]||(f[l[++this._id]=e]=this._id),r=f[r]||(f[l[++this._id]=r]=this._id);var m=this._addToIndex(u.subjects,c,e,r);return this._addToIndex(u.predicates,e,r,c),this._addToIndex(u.objects,r,c,e),this._size=null,m},addTriples:function(c){for(var e=c.length-1;e>=0;e--)this.addTriple(c[e])},addPrefix:function(c,e){this._prefixes[c]=e},addPrefixes:function(c){for(var e in c)this.addPrefix(e,c[e])},removeTriple:function(c,e,r,o){e||(o=c.graph,r=c.object,e=c.predicate,c=c.subject),o=o||"";var u,f,l,m=this._ids,d=this._graphs;if(!((c=m[c])&&(e=m[e])&&(r=m[r])&&(u=d[o])&&(f=u.subjects[c])&&(l=f[e])&&r in l))return!1;for(c in this._removeFromIndex(u.subjects,c,e,r),this._removeFromIndex(u.predicates,e,r,c),this._removeFromIndex(u.objects,r,c,e),null!==this._size&&this._size--,u.subjects)return!0;return delete d[o],!0},removeTriples:function(c){for(var e=c.length-1;e>=0;e--)this.removeTriple(c[e])},getTriples:function(c,e,r,o){var u=this._prefixes;return this.getTriplesByIRI(Q(c,u),Q(e,u),Q(r,u),Q(o,u))},getTriplesByIRI:function(c,e,r,o){var u,f,l,m,d=[],a=this._getGraphs(o),v=this._ids;if(w(c)&&!(f=v[c])||w(e)&&!(l=v[e])||w(r)&&!(m=v[r]))return d;for(var E in a)(u=a[E])&&(f?m?this._findInIndex(u.objects,m,f,l,"object","subject","predicate",E,null,d):this._findInIndex(u.subjects,f,l,null,"subject","predicate","object",E,null,d):l?this._findInIndex(u.predicates,l,m,null,"predicate","object","subject",E,null,d):m?this._findInIndex(u.objects,m,null,null,"object","subject","predicate",E,null,d):this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",E,null,d));return d},countTriples:function(c,e,r,o){var u=this._prefixes;return this.countTriplesByIRI(Q(c,u),Q(e,u),Q(r,u),Q(o,u))},countTriplesByIRI:function(c,e,r,o){var u,f,l,m,d=0,a=this._getGraphs(o),v=this._ids;if(w(c)&&!(f=v[c])||w(e)&&!(l=v[e])||w(r)&&!(m=v[r]))return 0;for(var E in a)(u=a[E])&&(d+=c?r?this._countInIndex(u.objects,m,f,l):this._countInIndex(u.subjects,f,l,m):e?this._countInIndex(u.predicates,l,m,f):this._countInIndex(u.objects,m,f,l));return d},forEach:function(c,e,r,o,u){var f=this._prefixes;this.forEachByIRI(c,Q(e,f),Q(r,f),Q(o,f),Q(u,f))},forEachByIRI:function(c,e,r,o,u){this.someByIRI(function(f){return c(f),!1},e,r,o,u)},every:function(c,e,r,o,u){var f=this._prefixes;return this.everyByIRI(c,Q(e,f),Q(r,f),Q(o,f),Q(u,f))},everyByIRI:function(c,e,r,o,u){var f=!1,l=!this.someByIRI(function(m){return f=!0,!c(m)},e,r,o,u);return f&&l},some:function(c,e,r,o,u){var f=this._prefixes;return this.someByIRI(c,Q(e,f),Q(r,f),Q(o,f),Q(u,f))},someByIRI:function(c,e,r,o,u){var f,l,m,d,a=this._getGraphs(u),v=this._ids;if(w(e)&&!(l=v[e])||w(r)&&!(m=v[r])||w(o)&&!(d=v[o]))return!1;for(var E in a)if(f=a[E])if(l){if(d){if(this._findInIndex(f.objects,d,l,m,"object","subject","predicate",E,c,null))return!0}else if(this._findInIndex(f.subjects,l,m,null,"subject","predicate","object",E,c,null))return!0}else if(m){if(this._findInIndex(f.predicates,m,d,null,"predicate","object","subject",E,c,null))return!0}else if(d){if(this._findInIndex(f.objects,d,null,null,"object","subject","predicate",E,c,null))return!0}else if(this._findInIndex(f.subjects,null,null,null,"subject","predicate","object",E,c,null))return!0;return!1},getSubjects:function(c,e,r){var o=this._prefixes;return this.getSubjectsByIRI(Q(c,o),Q(e,o),Q(r,o))},getSubjectsByIRI:function(c,e,r){var o=[];return this.forSubjectsByIRI(function(u){o.push(u)},c,e,r),o},forSubjects:function(c,e,r,o){var u=this._prefixes;this.forSubjectsByIRI(c,Q(e,u),Q(r,u),Q(o,u))},forSubjectsByIRI:function(c,e,r,o){var u,f,l,m=this._ids,d=this._getGraphs(o);if(c=this._uniqueEntities(c),!(w(e)&&!(f=m[e])||w(r)&&!(l=m[r])))for(o in d)(u=d[o])&&(f?l?this._loopBy2Keys(u.predicates,f,l,c):this._loopByKey1(u.subjects,f,c):l?this._loopByKey0(u.objects,l,c):this._loop(u.subjects,c))},getPredicates:function(c,e,r){var o=this._prefixes;return this.getPredicatesByIRI(Q(c,o),Q(e,o),Q(r,o))},getPredicatesByIRI:function(c,e,r){var o=[];return this.forPredicatesByIRI(function(u){o.push(u)},c,e,r),o},forPredicates:function(c,e,r,o){var u=this._prefixes;this.forPredicatesByIRI(c,Q(e,u),Q(r,u),Q(o,u))},forPredicatesByIRI:function(c,e,r,o){var u,f,l,m=this._ids,d=this._getGraphs(o);if(c=this._uniqueEntities(c),!(w(e)&&!(f=m[e])||w(r)&&!(l=m[r])))for(o in d)(u=d[o])&&(f?l?this._loopBy2Keys(u.objects,l,f,c):this._loopByKey0(u.subjects,f,c):l?this._loopByKey1(u.predicates,l,c):this._loop(u.predicates,c))},getObjects:function(c,e,r){var o=this._prefixes;return this.getObjectsByIRI(Q(c,o),Q(e,o),Q(r,o))},getObjectsByIRI:function(c,e,r){var o=[];return this.forObjectsByIRI(function(u){o.push(u)},c,e,r),o},forObjects:function(c,e,r,o){var u=this._prefixes;this.forObjectsByIRI(c,Q(e,u),Q(r,u),Q(o,u))},forObjectsByIRI:function(c,e,r,o){var u,f,l,m=this._ids,d=this._getGraphs(o);if(c=this._uniqueEntities(c),!(w(e)&&!(f=m[e])||w(r)&&!(l=m[r])))for(o in d)(u=d[o])&&(f?l?this._loopBy2Keys(u.subjects,f,l,c):this._loopByKey1(u.objects,f,c):l?this._loopByKey0(u.predicates,l,c):this._loop(u.objects,c))},getGraphs:function(c,e,r){var o=this._prefixes;return this.getGraphsByIRI(Q(c,o),Q(e,o),Q(r,o))},getGraphsByIRI:function(c,e,r){var o=[];return this.forGraphsByIRI(function(u){o.push(u)},c,e,r),o},forGraphs:function(c,e,r,o){var u=this._prefixes;this.forGraphsByIRI(c,Q(e,u),Q(r,u),Q(o,u))},forGraphsByIRI:function(c,e,r,o){for(var u in this._graphs)this.someByIRI(function(f){return c(f.graph),!0},e,r,o,u)},createBlankNode:function(c){var e,r;if(c)for(e=c="_:"+c,r=1;this._ids[e];)e=c+r++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},X.exports=s},{"./N3Util":57}],55:[function(G,X,Z){var Q=G("stream").Transform,s=G("util"),w=G("./N3Parser.js");function c(e){if(!(this instanceof c))return new c(e);Q.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var r,o,u=this;new w(e).parse({on:function(f,l){switch(f){case"data":r=l;break;case"end":o=l}}},function(f,l){f&&u.emit("error",f)||l&&u.push(l)},function(f,l){u.emit("prefix",f,l)}),this._transform=function(f,l,m){r(f),m()},this._flush=function(f){o(),f()}}s.inherits(c,Q),X.exports=c},{"./N3Parser.js":53,stream:76,util:117}],56:[function(G,X,Z){var Q=G("stream").Transform,s=G("util"),w=G("./N3Writer.js");function c(e){if(!(this instanceof c))return new c(e);Q.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var r=this,o=new w({write:function(u,f,l){r.push(u),l&&l()},end:function(u){r.push(null),u&&u()}},e);this._transform=function(u,f,l){o.addTriple(u,l)},this._flush=function(u){o.end(u)}}s.inherits(c,Q),X.exports=c},{"./N3Writer.js":58,stream:76,util:117}],57:[function(G,X,Z){var s="http://www.w3.org/2001/XMLSchema#double",w={isIRI:function(c){if("string"!=typeof c)return!1;if(0===c.length)return!0;var e=c[0];return'"'!==e&&"_"!==e},isLiteral:function(c){return"string"==typeof c&&'"'===c[0]},isBlank:function(c){return"string"==typeof c&&"_:"===c.substr(0,2)},isDefaultGraph:function(c){return!c},inDefaultGraph:function(c){return!c.graph},getLiteralValue:function(c){var e=/^"([^]*)"/.exec(c);if(!e)throw new Error(c+" is not a literal");return e[1]},getLiteralType:function(c){var e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!e)throw new Error(c+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(c){var e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!e)throw new Error(c+" is not a literal");return e[1]?e[1].toLowerCase():""},isPrefixedName:function(c){return"string"==typeof c&&/^[^:\/"']*:[^:\/"']+$/.test(c)},expandPrefixedName:function(c,e){var r,o,u,f=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(c);return f&&(o=e[r=f[1]],u=f.index),void 0===o?c:0===u?o+c.substr(r.length+1):c.substr(0,u+3)+o+c.substr(u+r.length+4)},createIRI:function(c){return c&&'"'===c[0]?w.getLiteralValue(c):c},createLiteral:function(c,e){if(!e)switch(typeof c){case"boolean":e="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":isFinite(c)?e=c%1==0?"http://www.w3.org/2001/XMLSchema#integer":s:(e=s,isNaN(c)||(c=c>0?"INF":"-INF"));break;default:return'"'+c+'"'}return'"'+c+(/^[a-z]+(-[a-z0-9]+)*$/i.test(e)?'"@'+e.toLowerCase():'"^^'+e)},prefix:function(c){return w.prefixes({"":c})("")},prefixes:function(c){var e=Object.create(null);for(var r in c)o(r,c[r]);function o(u,f){if(f||!(u in e)){var l=Object.create(null);f=f||"",e[u]=function(m){return l[m]||(l[m]=f+m)}}return e[u]}return o}};X.exports=w},{}],58:[function(G,X,Z){var Q=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,s=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,w=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,c={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(o,u){if(!(this instanceof e))return new e(o,u);if(o&&"function"!=typeof o.write&&(u=o,o=null),u=u||{},o)this._outputStream=o,this._endStream=void 0===u.end||!!u.end;else{var f="";this._outputStream={write:function(l,m,d){f+=l,d&&d()},end:function(l){l&&l(null,f)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(u.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),u.prefixes&&this.addPrefixes(u.prefixes))}function r(o){var u=c[o];return void 0===u&&(1===o.length?(u=o.charCodeAt(0).toString(16),u="\\u0000".substr(0,6-u.length)+u):(u=(1024*(o.charCodeAt(0)-55296)+o.charCodeAt(1)+9216).toString(16),u="\\U00000000".substr(0,10-u.length)+u)),u}e.prototype={_write:function(o,u){this._outputStream.write(o,"utf8",u)},_writeTriple:function(o,u,f,l,m){try{this._graph!==l&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(l?this._encodeIriOrBlankNode(l)+" {\n":"")),this._subject=null,this._graph="["!==l[0]?l:"]"),this._subject===o?this._predicate===u?this._write(", "+this._encodeObject(f),m):this._write(";\n    "+this._encodePredicate(this._predicate=u)+" "+this._encodeObject(f),m):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=o)+" "+this._encodePredicate(this._predicate=u)+" "+this._encodeObject(f),m)}catch(d){m&&m(d)}},_writeTripleLine:function(o,u,f,l,m){delete this._prefixMatch;try{this._write(this.tripleToString(o,u,f,l),m)}catch(d){m&&m(d)}},tripleToString:function(o,u,f,l){return this._encodeIriOrBlankNode(o)+" "+this._encodeIriOrBlankNode(u)+" "+this._encodeObject(f)+(l?" "+this._encodeIriOrBlankNode(l)+".\n":".\n")},triplesToString:function(o){return o.map(function(u){return this.tripleToString(u.subject,u.predicate,u.object,u.graph)},this).join("")},_encodeIriOrBlankNode:function(o){var u=o[0];if("["===u||"("===u||"_"===u&&":"===o[1])return o;s.test(o)&&(o=o.replace(w,r));var f=this._prefixRegex.exec(o);return f?f[1]?this._prefixIRIs[f[1]]+f[2]:o:"<"+o+">"},_encodeLiteral:function(o,u,f){return s.test(o)&&(o=o.replace(w,r)),f?'"'+o+'"@'+f:u?'"'+o+'"^^'+this._encodeIriOrBlankNode(u):'"'+o+'"'},_encodeSubject:function(o){if('"'===o[0])throw new Error("A literal as subject is not allowed: "+o);return"["===o[0]&&(this._subject="]"),this._encodeIriOrBlankNode(o)},_encodePredicate:function(o){if('"'===o[0])throw new Error("A literal as predicate is not allowed: "+o);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===o?"a":this._encodeIriOrBlankNode(o)},_encodeObject:function(o){if('"'!==o[0])return this._encodeIriOrBlankNode(o);var u=Q.exec(o);if(!u)throw new Error("Invalid literal: "+o);return this._encodeLiteral(u[1],u[2],u[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(o,u,f,l,m){void 0===f?this._writeTriple(o.subject,o.predicate,o.object,o.graph||"",u):"string"!=typeof l?this._writeTriple(o,u,f,"",l):this._writeTriple(o,u,f,l,m)},addTriples:function(o){for(var u=0;u<o.length;u++)this.addTriple(o[u])},addPrefix:function(o,u,f){var l={};l[o]=u,this.addPrefixes(l,f)},addPrefixes:function(o,u){var f=this._prefixIRIs,l=!1;for(var m in o){var d=o[m];/[#\/]$/.test(d)&&f[d]!==(m+=":")&&(l=!0,f[d]=m,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+m+" <"+d+">.\n"))}if(l){var a="",v="";for(var E in f)a+=a?"|"+E:E,v+=(v?"|":"")+f[E];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+v+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(l?"\n":"",u)},blank:function(o,u){var f,l,m=o;switch(void 0===o?m=[]:"string"==typeof o?m=[{predicate:o,object:u}]:"length"in o||(m=[o]),l=m.length){case 0:return"[]";case 1:if("["!==(f=m[0]).object[0])return"[ "+this._encodePredicate(f.predicate)+" "+this._encodeObject(f.object)+" ]";default:for(var d="[",a=0;a<l;a++)(f=m[a]).predicate===o?d+=", "+this._encodeObject(f.object):(d+=(a?";\n  ":"\n  ")+this._encodePredicate(f.predicate)+" "+this._encodeObject(f.object),o=f.predicate);return d+"\n]"}},list:function(o){for(var u=o&&o.length||0,f=new Array(u),l=0;l<u;l++)f[l]=this._encodeObject(o[l]);return"("+f.join(" ")+")"},_prefixRegex:/$0^/,end:function(o){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var u=o&&function(f,l){u=null,o(f,l)};if(this._endStream)try{return this._outputStream.end(u)}catch{}u&&u()}},X.exports=e},{}],59:[function(G,X,Z){var Q,s,w=X.exports={};function c(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(E){if(Q===setTimeout)return setTimeout(E,0);if((Q===c||!Q)&&setTimeout)return Q=setTimeout,setTimeout(E,0);try{return Q(E,0)}catch{try{return Q.call(null,E,0)}catch{return Q.call(this,E,0)}}}!function(){try{Q="function"==typeof setTimeout?setTimeout:c}catch{Q=c}try{s="function"==typeof clearTimeout?clearTimeout:e}catch{s=e}}();var o,u=[],f=!1,l=-1;function m(){f&&o&&(f=!1,o.length?u=o.concat(u):l=-1,u.length&&d())}function d(){if(!f){var E=r(m);f=!0;for(var F=u.length;F;){for(o=u,u=[];++l<F;)o&&o[l].run();l=-1,F=u.length}o=null,f=!1,function(B){if(s===clearTimeout)return clearTimeout(B);if((s===e||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(B);try{s(B)}catch{try{return s.call(null,B)}catch{return s.call(this,B)}}}(E)}}function a(E,F){this.fun=E,this.array=F}function v(){}w.nextTick=function(E){var F=new Array(arguments.length-1);if(arguments.length>1)for(var B=1;B<arguments.length;B++)F[B-1]=arguments[B];u.push(new a(E,F)),1!==u.length||f||r(d)},a.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={},w.on=v,w.addListener=v,w.once=v,w.off=v,w.removeListener=v,w.removeAllListeners=v,w.emit=v,w.prependListener=v,w.prependOnceListener=v,w.listeners=function(E){return[]},w.binding=function(E){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(E){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],60:[function(G,X,Z){(function(Q){(function(){!function(s){var w="object"==typeof Z&&Z&&!Z.nodeType&&Z,c="object"==typeof X&&X&&!X.nodeType&&X,e="object"==typeof Q&&Q;e.global!==e&&e.window!==e&&e.self!==e||(s=e);var r,o,u=2147483647,f=36,B=/^xn--/,N=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=Math.floor,q=String.fromCharCode;function P(oe){throw new RangeError(k[oe])}function W(oe,ye){for(var be=oe.length,de=[];be--;)de[be]=ye(oe[be]);return de}function Y(oe,ye){var be=oe.split("@"),de="";return be.length>1&&(de=be[0]+"@",oe=be[1]),de+W((oe=oe.replace(A,".")).split("."),ye).join(".")}function ne(oe){for(var ye,be,de=[],le=0,Ce=oe.length;le<Ce;)(ye=oe.charCodeAt(le++))>=55296&&ye<=56319&&le<Ce?56320==(64512&(be=oe.charCodeAt(le++)))?de.push(((1023&ye)<<10)+(1023&be)+65536):(de.push(ye),le--):de.push(ye);return de}function ce(oe){return W(oe,function(ye){var be="";return ye>65535&&(be+=q((ye-=65536)>>>10&1023|55296),ye=56320|1023&ye),be+q(ye)}).join("")}function $(oe,ye){return oe+22+75*(oe<26)-((0!=ye)<<5)}function ee(oe,ye,be){var de=0;for(oe=be?D(oe/700):oe>>1,oe+=D(oe/ye);oe>455;de+=f)oe=D(oe/35);return D(de+36*oe/(oe+38))}function J(oe){var ye,be,de,le,Ce,Ie,Oe,R,I,H,re,ve=[],ae=oe.length,Ee=0,Fe=128,Re=72;for((be=oe.lastIndexOf("-"))<0&&(be=0),de=0;de<be;++de)oe.charCodeAt(de)>=128&&P("not-basic"),ve.push(oe.charCodeAt(de));for(le=be>0?be+1:0;le<ae;){for(Ce=Ee,Ie=1,Oe=f;le>=ae&&P("invalid-input"),((R=(re=oe.charCodeAt(le++))-48<10?re-22:re-65<26?re-65:re-97<26?re-97:f)>=f||R>D((u-Ee)/Ie))&&P("overflow"),Ee+=R*Ie,!(R<(I=Oe<=Re?1:Oe>=Re+26?26:Oe-Re));Oe+=f)Ie>D(u/(H=f-I))&&P("overflow"),Ie*=H;Re=ee(Ee-Ce,ye=ve.length+1,0==Ce),D(Ee/ye)>u-Fe&&P("overflow"),Fe+=D(Ee/ye),Ee%=ye,ve.splice(Ee++,0,Fe)}return ce(ve)}function ie(oe){var ye,be,de,le,Ce,Ie,Oe,R,I,H,re,ve,ae,Ee,Fe,Re=[];for(ve=(oe=ne(oe)).length,ye=128,be=0,Ce=72,Ie=0;Ie<ve;++Ie)(re=oe[Ie])<128&&Re.push(q(re));for(de=le=Re.length,le&&Re.push("-");de<ve;){for(Oe=u,Ie=0;Ie<ve;++Ie)(re=oe[Ie])>=ye&&re<Oe&&(Oe=re);for(Oe-ye>D((u-be)/(ae=de+1))&&P("overflow"),be+=(Oe-ye)*ae,ye=Oe,Ie=0;Ie<ve;++Ie)if((re=oe[Ie])<ye&&++be>u&&P("overflow"),re==ye){for(R=be,I=f;!(R<(H=I<=Ce?1:I>=Ce+26?26:I-Ce));I+=f)Fe=R-H,Ee=f-H,Re.push(q($(H+Fe%Ee,0))),R=D(Fe/Ee);Re.push(q($(R,0))),Ce=ee(be,ae,de==le),be=0,++de}++be,++ye}return Re.join("")}if(r={version:"1.4.1",ucs2:{decode:ne,encode:ce},decode:J,encode:ie,toASCII:function(oe){return Y(oe,function(ye){return N.test(ye)?"xn--"+ie(ye):ye})},toUnicode:function(oe){return Y(oe,function(ye){return B.test(ye)?J(ye.slice(4).toLowerCase()):ye})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(w&&c)if(X.exports==w)c.exports=r;else for(o in r)r.hasOwnProperty(o)&&(w[o]=r[o]);else s.punycode=r}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(G,X,Z){"use strict";function Q(w,c){return Object.prototype.hasOwnProperty.call(w,c)}X.exports=function(w,c,e,r){c=c||"&",e=e||"=";var o={};if("string"!=typeof w||0===w.length)return o;var u=/\+/g;w=w.split(c);var f=1e3;r&&"number"==typeof r.maxKeys&&(f=r.maxKeys);var l=w.length;f>0&&l>f&&(l=f);for(var m=0;m<l;++m){var d,a,v,E,F=w[m].replace(u,"%20"),B=F.indexOf(e);B>=0?(d=F.substr(0,B),a=F.substr(B+1)):(d=F,a=""),v=decodeURIComponent(d),E=decodeURIComponent(a),Q(o,v)?s(o[v])?o[v].push(E):o[v]=[o[v],E]:o[v]=E}return o};var s=Array.isArray||function(w){return"[object Array]"===Object.prototype.toString.call(w)}},{}],62:[function(G,X,Z){"use strict";var Q=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};X.exports=function(e,r,o,u){return r=r||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?w(c(e),function(f){var l=encodeURIComponent(Q(f))+o;return s(e[f])?w(e[f],function(m){return l+encodeURIComponent(Q(m))}).join(r):l+encodeURIComponent(Q(e[f]))}).join(r):u?encodeURIComponent(Q(u))+o+encodeURIComponent(Q(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function w(e,r){if(e.map)return e.map(r);for(var o=[],u=0;u<e.length;u++)o.push(r(e[u],u));return o}var c=Object.keys||function(e){var r=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.push(o);return r}},{}],63:[function(G,X,Z){"use strict";Z.decode=Z.parse=G("./decode"),Z.encode=Z.stringify=G("./encode")},{"./decode":61,"./encode":62}],64:[function(G,X,Z){X.exports=G("./lib")},{"./lib":73}],65:[function(G,X,Z){"use strict";X.exports=class yu{constructor(s,w=new Map,c=0){this.prefix=s,this._existing=w,this.counter=c}clone(){const{prefix:s,_existing:w,counter:c}=this;return new yu(s,new Map(w),c)}getId(s){const w=s&&this._existing.get(s);if(w)return w;const c=this.prefix+this.counter;return this.counter++,s&&this._existing.set(s,c),c}hasId(s){return this._existing.has(s)}getOldIds(){return[...this._existing.keys()]}}},{}],66:[function(G,X,Z){"use strict";G("setimmediate");const Q=self.crypto||self.msCrypto;X.exports=class{constructor(s){if(!Q||!Q.subtle)throw new Error("crypto.subtle not found.");if("sha256"===s)this.algorithm={name:"SHA-256"};else{if("sha1"!==s)throw new Error(`Unsupport algorithm "${s}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(s){this._content+=s}async digest(){const s=(new TextEncoder).encode(this._content),w=new Uint8Array(await Q.subtle.digest(this.algorithm,s));let c="";for(let e=0;e<w.length;++e)c+=w[e].toString(16).padStart(2,"0");return c}}},{setimmediate:75}],67:[function(G,X,Z){"use strict";const Q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",s="http://www.w3.org/2001/XMLSchema#string",w="Literal",c={};function e(u,f){return u.subject.termType===f.subject.termType&&u.object.termType===f.object.termType&&u.subject.value===f.subject.value&&u.predicate.value===f.predicate.value&&u.object.value===f.object.value&&(u.object.termType!==w||u.object.datatype.termType===f.object.datatype.termType&&u.object.language===f.object.language&&u.object.datatype.value===f.object.datatype.value)}c.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,c.empty=new RegExp("^[ \\t]*$"),c.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),X.exports=class Ai{static parse(f){const l=[],m={},d=f.split(c.eoln);let a=0;for(const v of d){if(a++,c.empty.test(v))continue;const E=v.match(c.quad);if(null===E)throw new Error("N-Quads parse error on line "+a+".");const F={subject:null,predicate:null,object:null,graph:null};if(void 0!==E[1]?F.subject={termType:"NamedNode",value:E[1]}:F.subject={termType:"BlankNode",value:E[2]},F.predicate={termType:"NamedNode",value:E[3]},void 0!==E[4]?F.object={termType:"NamedNode",value:E[4]}:void 0!==E[5]?F.object={termType:"BlankNode",value:E[5]}:(F.object={termType:w,value:void 0,datatype:{termType:"NamedNode"}},void 0!==E[7]?F.object.datatype.value=E[7]:void 0!==E[8]?(F.object.datatype.value=Q,F.object.language=E[8]):F.object.datatype.value=s,F.object.value=E[6].replace(o,function(B,N,A,k){if(N)switch(N){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(A)return String.fromCharCode(parseInt(A,16));if(k)throw new Error("Unsupported U escape")})),void 0!==E[9]?F.graph={termType:"NamedNode",value:E[9]}:void 0!==E[10]?F.graph={termType:"BlankNode",value:E[10]}:F.graph={termType:"DefaultGraph",value:""},F.graph.value in m){let B=!0;const N=m[F.graph.value];for(const A of N)if(e(A,F)){B=!1;break}B&&(N.push(F),l.push(F))}else m[F.graph.value]=[F],l.push(F)}return l}static serialize(f){Array.isArray(f)||(f=Ai.legacyDatasetToQuads(f));const l=[];for(const m of f)l.push(Ai.serializeQuad(m));return l.sort().join("")}static serializeQuad(f){const l=f.subject,m=f.predicate,d=f.object,a=f.graph;let v="";return"NamedNode"===l.termType?v+=`<${l.value}>`:v+=`${l.value}`,v+=` <${m.value}> `,"NamedNode"===d.termType?v+=`<${d.value}>`:"BlankNode"===d.termType?v+=d.value:(v+=`"${E=d.value,E.replace(r,function(F){switch(F){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,d.datatype.value===Q?d.language&&(v+=`@${d.language}`):d.datatype.value!==s&&(v+=`^^<${d.datatype.value}>`)),"NamedNode"===a.termType?v+=` <${a.value}>`:"BlankNode"===a.termType&&(v+=` ${a.value}`),v+" .\n";var E}static legacyDatasetToQuads(f){const l=[],m={"blank node":"BlankNode",IRI:"NamedNode",literal:w};for(const d in f)f[d].forEach(a=>{const v={};for(const E in a){const F=a[E],B={termType:m[F.type],value:F.value};B.termType===w&&(B.datatype={termType:"NamedNode"},"datatype"in F&&(B.datatype.value=F.datatype),"language"in F?("datatype"in F||(B.datatype.value=Q),B.language=F.language):"datatype"in F||(B.datatype.value=s)),v[E]=B}v.graph="@default"===d?{termType:"DefaultGraph",value:""}:{termType:d.startsWith("_:")?"BlankNode":"NamedNode",value:d},l.push(v)});return l}};const r=/["\\\n\r]/g,o=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],68:[function(G,X,Z){"use strict";X.exports=class{constructor(Q){this.current=Q.sort(),this.done=!1,this.dir=new Map;for(let s=0;s<Q.length;++s)this.dir.set(Q[s],!0)}hasNext(){return!this.done}next(){const{current:Q,dir:s}=this,w=Q.slice();let c=null,e=0;const r=Q.length;for(let o=0;o<r;++o){const u=Q[o],f=s.get(u);(null===c||u>c)&&(f&&o>0&&u>Q[o-1]||!f&&o<r-1&&u>Q[o+1])&&(c=u,e=o)}if(null===c)this.done=!0;else{const o=s.get(c)?e-1:e+1;Q[e]=Q[o],Q[o]=c;for(const u of Q)u>c&&s.set(u,!s.get(u))}return w}}},{}],69:[function(G,X,Z){(function(Q){(function(){"use strict";const s=G("./IdentifierIssuer"),w=G("./MessageDigest"),c=G("./Permuter"),e=G("./NQuads");function r(o,u){return o.hash<u.hash?-1:o.hash>u.hash?1:0}X.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new s("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(o){this.quads=o;for(const v of o)this._addBlankNodeQuadInfo({quad:v,component:v.subject}),this._addBlankNodeQuadInfo({quad:v,component:v.object}),this._addBlankNodeQuadInfo({quad:v,component:v.graph});const u=new Map,f=[...this.blankNodeInfo.keys()];let l=0;for(const v of f)++l%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:v,hashToBlankNodes:u});const m=[...u.keys()].sort(),d=[];for(const v of m){const E=u.get(v);if(E.length>1){d.push(E);continue}const F=E[0];this.canonicalIssuer.getId(F)}for(const v of d){const E=[];for(const F of v){if(this.canonicalIssuer.hasId(F))continue;const B=new s("_:b");B.getId(F);const N=await this.hashNDegreeQuads(F,B);E.push(N)}E.sort(r);for(const F of E){const B=F.issuer.getOldIds();for(const N of B)this.canonicalIssuer.getId(N)}}const a=[];for(const v of this.quads){const E={...v};E.subject=this._useCanonicalId({component:E.subject}),E.object=this._useCanonicalId({component:E.object}),E.graph=this._useCanonicalId({component:E.graph}),a.push(e.serializeQuad(E))}return a.sort(),a.join("")}async hashFirstDegreeQuads(o){const u=[],f=this.blankNodeInfo.get(o),l=f.quads;for(const d of l){const a={subject:null,predicate:d.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),a.object=this.modifyFirstDegreeComponent(o,d.object,"object"),a.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),u.push(e.serializeQuad(a))}u.sort();const m=new w(this.hashAlgorithm);for(const d of u)m.update(d);return f.hash=await m.digest(),f.hash}async hashRelatedBlankNode(o,u,f,l){let m;m=this.canonicalIssuer.hasId(o)?this.canonicalIssuer.getId(o):f.hasId(o)?f.getId(o):this.blankNodeInfo.get(o).hash;const d=new w(this.hashAlgorithm);return d.update(l),"g"!==l&&d.update(this.getRelatedPredicate(u)),d.update(m),d.digest()}async hashNDegreeQuads(o,u){const f=new w(this.hashAlgorithm),l=await this.createHashToRelated(o,u),m=[...l.keys()].sort();for(const d of m){f.update(d);let a,v="";const E=new c(l.get(d));let F=0;for(;E.hasNext();){const B=E.next();++F%3==0&&await this._yield();let N=u.clone(),A="";const k=[];let j=!1;for(const D of B)if(this.canonicalIssuer.hasId(D)?A+=this.canonicalIssuer.getId(D):(N.hasId(D)||k.push(D),A+=N.getId(D)),0!==v.length&&A>v){j=!0;break}if(!j){for(const D of k){const q=await this.hashNDegreeQuads(D,N);if(A+=N.getId(D),A+=`<${q.hash}>`,N=q.issuer,0!==v.length&&A>v){j=!0;break}}j||(0===v.length||A<v)&&(v=A,a=N)}}f.update(v),u=a}return{hash:await f.digest(),issuer:u}}modifyFirstDegreeComponent(o,u){return"BlankNode"!==u.termType?u:{termType:"BlankNode",value:u.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,u){const f=new Map,l=this.blankNodeInfo.get(o).quads;let m=0;for(const d of l)++m%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:u,hashToRelated:f}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:u,hashToRelated:f}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:u,hashToRelated:f})]);return f}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:u}){const f=await this.hashFirstDegreeQuads(o),l=u.get(f);l?l.push(o):u.set(f,[o])}_addBlankNodeQuadInfo({quad:o,component:u}){if("BlankNode"!==u.termType)return;const f=u.value,l=this.blankNodeInfo.get(f);l?l.quads.add(o):this.blankNodeInfo.set(f,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:u,position:f,id:l,issuer:m,hashToRelated:d}){if("BlankNode"!==u.termType||u.value===l)return;const a=u.value,v=await this.hashRelatedBlankNode(a,o,m,f),E=d.get(v);E?E.push(a):d.set(v,[a])}_useCanonicalId({component:o}){return"BlankNode"!==o.termType||o.value.startsWith(this.canonicalIssuer.prefix)?o:{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}}async _yield(){return new Promise(o=>Q(o))}}}).call(this)}).call(this,G("timers").setImmediate)},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68,timers:111}],70:[function(G,X,Z){"use strict";const Q=G("./IdentifierIssuer"),s=G("./MessageDigest"),w=G("./Permuter"),c=G("./NQuads");function e(r,o){return r.hash<o.hash?-1:r.hash>o.hash?1:0}X.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Q("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(r){this.quads=r;for(const d of r)this._addBlankNodeQuadInfo({quad:d,component:d.subject}),this._addBlankNodeQuadInfo({quad:d,component:d.object}),this._addBlankNodeQuadInfo({quad:d,component:d.graph});const o=new Map,u=[...this.blankNodeInfo.keys()];for(const d of u)this._hashAndTrackBlankNode({id:d,hashToBlankNodes:o});const f=[...o.keys()].sort(),l=[];for(const d of f){const a=o.get(d);if(a.length>1){l.push(a);continue}const v=a[0];this.canonicalIssuer.getId(v)}for(const d of l){const a=[];for(const v of d){if(this.canonicalIssuer.hasId(v))continue;const E=new Q("_:b");E.getId(v);const F=this.hashNDegreeQuads(v,E);a.push(F)}a.sort(e);for(const v of a){const E=v.issuer.getOldIds();for(const F of E)this.canonicalIssuer.getId(F)}}const m=[];for(const d of this.quads){const a={...d};a.subject=this._useCanonicalId({component:a.subject}),a.object=this._useCanonicalId({component:a.object}),a.graph=this._useCanonicalId({component:a.graph}),m.push(c.serializeQuad(a))}return m.sort(),m.join("")}hashFirstDegreeQuads(r){const o=[],u=this.blankNodeInfo.get(r),f=u.quads;for(const m of f){const d={subject:null,predicate:m.predicate,object:null,graph:null};d.subject=this.modifyFirstDegreeComponent(r,m.subject,"subject"),d.object=this.modifyFirstDegreeComponent(r,m.object,"object"),d.graph=this.modifyFirstDegreeComponent(r,m.graph,"graph"),o.push(c.serializeQuad(d))}o.sort();const l=new s(this.hashAlgorithm);for(const m of o)l.update(m);return u.hash=l.digest(),u.hash}hashRelatedBlankNode(r,o,u,f){let l;l=this.canonicalIssuer.hasId(r)?this.canonicalIssuer.getId(r):u.hasId(r)?u.getId(r):this.blankNodeInfo.get(r).hash;const m=new s(this.hashAlgorithm);return m.update(f),"g"!==f&&m.update(this.getRelatedPredicate(o)),m.update(l),m.digest()}hashNDegreeQuads(r,o){const u=new s(this.hashAlgorithm),f=this.createHashToRelated(r,o),l=[...f.keys()].sort();for(const m of l){u.update(m);let d,a="";const v=new w(f.get(m));for(;v.hasNext();){const E=v.next();let F=o.clone(),B="";const N=[];let A=!1;for(const k of E)if(this.canonicalIssuer.hasId(k)?B+=this.canonicalIssuer.getId(k):(F.hasId(k)||N.push(k),B+=F.getId(k)),0!==a.length&&B>a){A=!0;break}if(!A){for(const k of N){const j=this.hashNDegreeQuads(k,F);if(B+=F.getId(k),B+=`<${j.hash}>`,F=j.issuer,0!==a.length&&B>a){A=!0;break}}A||(0===a.length||B<a)&&(a=B,d=F)}}u.update(a),o=d}return{hash:u.digest(),issuer:o}}modifyFirstDegreeComponent(r,o){return"BlankNode"!==o.termType?o:{termType:"BlankNode",value:o.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return`<${r.predicate.value}>`}createHashToRelated(r,o){const u=new Map,f=this.blankNodeInfo.get(r).quads;for(const l of f)this._addRelatedBlankNodeHash({quad:l,component:l.subject,position:"s",id:r,issuer:o,hashToRelated:u}),this._addRelatedBlankNodeHash({quad:l,component:l.object,position:"o",id:r,issuer:o,hashToRelated:u}),this._addRelatedBlankNodeHash({quad:l,component:l.graph,position:"g",id:r,issuer:o,hashToRelated:u});return u}_hashAndTrackBlankNode({id:r,hashToBlankNodes:o}){const u=this.hashFirstDegreeQuads(r),f=o.get(u);f?f.push(r):o.set(u,[r])}_addBlankNodeQuadInfo({quad:r,component:o}){if("BlankNode"!==o.termType)return;const u=o.value,f=this.blankNodeInfo.get(u);f?f.quads.add(r):this.blankNodeInfo.set(u,{quads:new Set([r]),hash:null})}_addRelatedBlankNodeHash({quad:r,component:o,position:u,id:f,issuer:l,hashToRelated:m}){if("BlankNode"!==o.termType||o.value===f)return;const d=o.value,a=this.hashRelatedBlankNode(d,r,l,u),v=m.get(a);v?v.push(d):m.set(a,[d])}_useCanonicalId({component:r}){return"BlankNode"!==r.termType||r.value.startsWith(this.canonicalIssuer.prefix)?r:{termType:"BlankNode",value:this.canonicalIssuer.getId(r.value)}}}},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68}],71:[function(G,X,Z){"use strict";const Q=G("./URDNA2015");X.exports=class extends Q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(s,w,c){return"BlankNode"!==w.termType?w:"graph"===c?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:w.value===s?"_:a":"_:z"}}getRelatedPredicate(s){return s.predicate.value}async createHashToRelated(s,w){const c=new Map,e=this.blankNodeInfo.get(s).quads;let r=0;for(const o of e){let u,f;if("BlankNode"===o.subject.termType&&o.subject.value!==s)f=o.subject.value,u="p";else{if("BlankNode"!==o.object.termType||o.object.value===s)continue;f=o.object.value,u="r"}++r%100==0&&await this._yield();const l=await this.hashRelatedBlankNode(f,o,w,u),m=c.get(l);m?m.push(f):c.set(l,[f])}return c}}},{"./URDNA2015":69}],72:[function(G,X,Z){"use strict";const Q=G("./URDNA2015Sync");X.exports=class extends Q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(s,w,c){return"BlankNode"!==w.termType?w:"graph"===c?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:w.value===s?"_:a":"_:z"}}getRelatedPredicate(s){return s.predicate.value}createHashToRelated(s,w){const c=new Map,e=this.blankNodeInfo.get(s).quads;for(const r of e){let o,u;if("BlankNode"===r.subject.termType&&r.subject.value!==s)u=r.subject.value,o="p";else{if("BlankNode"!==r.object.termType||r.object.value===s)continue;u=r.object.value,o="r"}const f=this.hashRelatedBlankNode(u,r,w,o),l=c.get(f);l?l.push(u):c.set(f,[u])}return c}}},{"./URDNA2015Sync":70}],73:[function(G,X,Z){"use strict";const Q=G("./URDNA2015"),s=G("./URGNA2012"),w=G("./URDNA2015Sync"),c=G("./URGNA2012Sync");let e;try{e=G("rdf-canonize-native")}catch{}const r={};X.exports=r,r.NQuads=G("./NQuads"),r.IdentifierIssuer=G("./IdentifierIssuer"),r._rdfCanonizeNative=function(o){return o&&(e=o),e},r.canonize=async function(o,u){if(Array.isArray(o)||(o=r.NQuads.legacyDatasetToQuads(o)),u.useNative){if(!e)throw new Error("rdf-canonize-native not available");return new Promise((f,l)=>e.canonize(o,u,(m,d)=>m?l(m):f(d)))}if("URDNA2015"===u.algorithm)return new Q(u).main(o);if("URGNA2012"===u.algorithm)return new s(u).main(o);throw"algorithm"in u?new Error("Invalid RDF Dataset Canonicalization algorithm: "+u.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},r._canonizeSync=function(o,u){if(Array.isArray(o)||(o=r.NQuads.legacyDatasetToQuads(o)),u.useNative){if(e)return e.canonizeSync(o,u);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===u.algorithm)return new w(u).main(o);if("URGNA2012"===u.algorithm)return new c(u).main(o);throw"algorithm"in u?new Error("Invalid RDF Dataset Canonicalization algorithm: "+u.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":65,"./NQuads":67,"./URDNA2015":69,"./URDNA2015Sync":70,"./URGNA2012":71,"./URGNA2012Sync":72,"rdf-canonize-native":3}],74:[function(G,X,Z){var Q=G("buffer"),s=Q.Buffer;function w(e,r){for(var o in e)r[o]=e[o]}function c(e,r,o){return s(e,r,o)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?X.exports=Q:(w(Q,Z),Z.Buffer=c),c.prototype=Object.create(s.prototype),w(s,c),c.from=function(e,r,o){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,r,o)},c.alloc=function(e,r,o){if("number"!=typeof e)throw new TypeError("Argument must be a number");var u=s(e);return void 0!==r?"string"==typeof o?u.fill(r,o):u.fill(r):u.fill(0),u},c.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},c.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Q.SlowBuffer(e)}},{buffer:5}],75:[function(G,X,Z){(function(Q,s){(function(){!function(w,c){"use strict";if(!w.setImmediate){var e,r,o,u,f,l=1,m={},d=!1,a=w.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(w);v=v&&v.setTimeout?v:w,"[object process]"==={}.toString.call(w.process)?e=function(B){Q.nextTick(function(){F(B)})}:function(){if(w.postMessage&&!w.importScripts){var B=!0,N=w.onmessage;return w.onmessage=function(){B=!1},w.postMessage("","*"),w.onmessage=N,B}}()?(u="setImmediate$"+Math.random()+"$",f=function(B){B.source===w&&"string"==typeof B.data&&0===B.data.indexOf(u)&&F(+B.data.slice(u.length))},w.addEventListener?w.addEventListener("message",f,!1):w.attachEvent("onmessage",f),e=function(B){w.postMessage(u+B,"*")}):w.MessageChannel?((o=new MessageChannel).port1.onmessage=function(B){F(B.data)},e=function(B){o.port2.postMessage(B)}):a&&"onreadystatechange"in a.createElement("script")?(r=a.documentElement,e=function(B){var N=a.createElement("script");N.onreadystatechange=function(){F(B),N.onreadystatechange=null,r.removeChild(N),N=null},r.appendChild(N)}):e=function(B){setTimeout(F,0,B)},v.setImmediate=function(B){"function"!=typeof B&&(B=new Function(""+B));for(var N=new Array(arguments.length-1),A=0;A<N.length;A++)N[A]=arguments[A+1];var k={callback:B,args:N};return m[l]=k,e(l),l++},v.clearImmediate=E}function E(B){delete m[B]}function F(B){if(d)setTimeout(F,0,B);else{var N=m[B];if(N){d=!0;try{!function(A){var k=A.callback,j=A.args;switch(j.length){case 0:k();break;case 1:k(j[0]);break;case 2:k(j[0],j[1]);break;case 3:k(j[0],j[1],j[2]);break;default:k.apply(undefined,j)}}(N)}finally{E(B),d=!1}}}}}(typeof self>"u"?void 0===s?this:s:self)}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:59}],76:[function(G,X,Z){X.exports=s;var Q=G("events").EventEmitter;function s(){Q.call(this)}G("inherits")(s,Q),s.Readable=G("readable-stream/lib/_stream_readable.js"),s.Writable=G("readable-stream/lib/_stream_writable.js"),s.Duplex=G("readable-stream/lib/_stream_duplex.js"),s.Transform=G("readable-stream/lib/_stream_transform.js"),s.PassThrough=G("readable-stream/lib/_stream_passthrough.js"),s.finished=G("readable-stream/lib/internal/streams/end-of-stream.js"),s.pipeline=G("readable-stream/lib/internal/streams/pipeline.js"),s.Stream=s,s.prototype.pipe=function(w,c){var e=this;function r(a){w.writable&&!1===w.write(a)&&e.pause&&e.pause()}function o(){e.readable&&e.resume&&e.resume()}e.on("data",r),w.on("drain",o),w._isStdio||c&&!1===c.end||(e.on("end",f),e.on("close",l));var u=!1;function f(){u||(u=!0,w.end())}function l(){u||(u=!0,"function"==typeof w.destroy&&w.destroy())}function m(a){if(d(),0===Q.listenerCount(this,"error"))throw a}function d(){e.removeListener("data",r),w.removeListener("drain",o),e.removeListener("end",f),e.removeListener("close",l),e.removeListener("error",m),w.removeListener("error",m),e.removeListener("end",d),e.removeListener("close",d),w.removeListener("close",d)}return e.on("error",m),w.on("error",m),e.on("end",d),e.on("close",d),w.on("close",d),w.emit("pipe",e),w}},{events:11,inherits:22,"readable-stream/lib/_stream_duplex.js":78,"readable-stream/lib/_stream_passthrough.js":79,"readable-stream/lib/_stream_readable.js":80,"readable-stream/lib/_stream_transform.js":81,"readable-stream/lib/_stream_writable.js":82,"readable-stream/lib/internal/streams/end-of-stream.js":86,"readable-stream/lib/internal/streams/pipeline.js":88}],77:[function(G,X,Z){"use strict";var Q={};function s(c,e,r){r||(r=Error);var o=function(u){var f,l;function m(d,a,v){return u.call(this,(E=d,F=a,B=v,"string"==typeof e?e:e(E,F,B)))||this;var E,F,B}return l=u,(f=m).prototype=Object.create(l.prototype),f.prototype.constructor=f,f.__proto__=l,m}(r);o.prototype.name=r.name,o.prototype.code=c,Q[c]=o}function w(c,e){if(Array.isArray(c)){var r=c.length;return c=c.map(function(o){return String(o)}),r>2?"one of ".concat(e," ").concat(c.slice(0,r-1).join(", "),", or ")+c[r-1]:2===r?"one of ".concat(e," ").concat(c[0]," or ").concat(c[1]):"of ".concat(e," ").concat(c[0])}return"of ".concat(e," ").concat(String(c))}s("ERR_INVALID_OPT_VALUE",function(c,e){return'The value "'+e+'" is invalid for option "'+c+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(c,e,r){var o,u,l,d,a,v;if("string"==typeof e&&(u="not ",e.substr(0,u.length)===u)?(o="must not be",e=e.replace(/^not /,"")):o="must be",d=c,a=" argument",(void 0===v||v>d.length)&&(v=d.length),d.substring(v-a.length,v)===a)l="The ".concat(c," ").concat(o," ").concat(w(e,"type"));else{var m=function(d,a,v){return"number"!=typeof v&&(v=0),!(v+".".length>d.length)&&-1!==d.indexOf(".",v)}(c)?"property":"argument";l='The "'.concat(c,'" ').concat(m," ").concat(o," ").concat(w(e,"type"))}return l+". Received type ".concat(typeof r)},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),X.exports.codes=Q},{}],78:[function(G,X,Z){(function(Q){(function(){"use strict";var s=Object.keys||function(m){var d=[];for(var a in m)d.push(a);return d};X.exports=u;var w=G("./_stream_readable"),c=G("./_stream_writable");G("inherits")(u,w);for(var e=s(c.prototype),r=0;r<e.length;r++){var o=e[r];u.prototype[o]||(u.prototype[o]=c.prototype[o])}function u(m){if(!(this instanceof u))return new u(m);w.call(this,m),c.call(this,m),this.allowHalfOpen=!0,m&&(!1===m.readable&&(this.readable=!1),!1===m.writable&&(this.writable=!1),!1===m.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||Q.nextTick(l,this)}function l(m){m.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}).call(this)}).call(this,G("_process"))},{"./_stream_readable":80,"./_stream_writable":82,_process:59,inherits:22}],79:[function(G,X,Z){"use strict";X.exports=s;var Q=G("./_stream_transform");function s(w){if(!(this instanceof s))return new s(w);Q.call(this,w)}G("inherits")(s,Q),s.prototype._transform=function(w,c,e){e(null,w)}},{"./_stream_transform":81,inherits:22}],80:[function(G,X,Z){(function(Q,s){(function(){"use strict";var w;X.exports=P,P.ReadableState=q,G("events").EventEmitter;var u,c=function(R,I){return R.listeners(I).length},e=G("./internal/streams/stream"),r=G("buffer").Buffer,o=s.Uint8Array||function(){},f=G("util");u=f&&f.debuglog?f.debuglog("stream"):function(){};var l,m,d,a=G("./internal/streams/buffer_list"),v=G("./internal/streams/destroy"),E=G("./internal/streams/state").getHighWaterMark,F=G("../errors").codes,B=F.ERR_INVALID_ARG_TYPE,N=F.ERR_STREAM_PUSH_AFTER_EOF,A=F.ERR_METHOD_NOT_IMPLEMENTED,k=F.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;G("inherits")(P,e);var j=v.errorOrDestroy,D=["error","close","destroy","pause","resume"];function q(R,I,H){w=w||G("./_stream_duplex"),R=R||{},"boolean"!=typeof H&&(H=I instanceof w),this.objectMode=!!R.objectMode,H&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=E(this,R,"readableHighWaterMark",H),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(l||(l=G("string_decoder/").StringDecoder),this.decoder=new l(R.encoding),this.encoding=R.encoding)}function P(R){if(w=w||G("./_stream_duplex"),!(this instanceof P))return new P(R);var I=this instanceof w;this._readableState=new q(R,this,I),this.readable=!0,R&&("function"==typeof R.read&&(this._read=R.read),"function"==typeof R.destroy&&(this._destroy=R.destroy)),e.call(this)}function W(R,I,H,re,ve){u("readableAddChunk",I);var ae,Fe,Re,Je,Ve,Ee=R._readableState;if(null===I)Ee.reading=!1,function(Fe,Re){if(u("onEofChunk"),!Re.ended){if(Re.decoder){var Je=Re.decoder.end();Je&&Je.length&&(Re.buffer.push(Je),Re.length+=Re.objectMode?1:Je.length)}Re.ended=!0,Re.sync?$(Fe):(Re.needReadable=!1,Re.emittedReadable||(Re.emittedReadable=!0,ee(Fe)))}}(R,Ee);else if(ve||(Fe=Ee,Ve=Re=I,r.isBuffer(Ve)||Ve instanceof o||"string"==typeof Re||void 0===Re||Fe.objectMode||(Je=new B("chunk",["string","Buffer","Uint8Array"],Re)),ae=Je),ae)j(R,ae);else if(Ee.objectMode||I&&I.length>0)if("string"==typeof I||Ee.objectMode||Object.getPrototypeOf(I)===r.prototype||(I=function(Fe){return r.from(Fe)}(I)),re)Ee.endEmitted?j(R,new k):Y(R,Ee,I,!0);else if(Ee.ended)j(R,new N);else{if(Ee.destroyed)return!1;Ee.reading=!1,Ee.decoder&&!H?(I=Ee.decoder.write(I),Ee.objectMode||0!==I.length?Y(R,Ee,I,!1):J(R,Ee)):Y(R,Ee,I,!1)}else re||(Ee.reading=!1,J(R,Ee));return!Ee.ended&&(Ee.length<Ee.highWaterMark||0===Ee.length)}function Y(R,I,H,re){I.flowing&&0===I.length&&!I.sync?(I.awaitDrain=0,R.emit("data",H)):(I.length+=I.objectMode?1:H.length,re?I.buffer.unshift(H):I.buffer.push(H),I.needReadable&&$(R)),J(R,I)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),P.prototype.destroy=v.destroy,P.prototype._undestroy=v.undestroy,P.prototype._destroy=function(R,I){I(R)},P.prototype.push=function(R,I){var H,re=this._readableState;return re.objectMode?H=!0:"string"==typeof R&&((I=I||re.defaultEncoding)!==re.encoding&&(R=r.from(R,I),I=""),H=!0),W(this,R,I,!1,H)},P.prototype.unshift=function(R){return W(this,R,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(R){l||(l=G("string_decoder/").StringDecoder);var I=new l(R);this._readableState.decoder=I,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,re="";null!==H;)re+=I.write(H.data),H=H.next;return this._readableState.buffer.clear(),""!==re&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var ne=1073741824;function ce(R,I){return R<=0||0===I.length&&I.ended?0:I.objectMode?1:R!=R?I.flowing&&I.length?I.buffer.head.data.length:I.length:(R>I.highWaterMark&&(I.highWaterMark=((H=R)>=ne?H=ne:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H)),R<=I.length?R:I.ended?I.length:(I.needReadable=!0,0));var H}function $(R){var I=R._readableState;u("emitReadable",I.needReadable,I.emittedReadable),I.needReadable=!1,I.emittedReadable||(u("emitReadable",I.flowing),I.emittedReadable=!0,Q.nextTick(ee,R))}function ee(R){var I=R._readableState;u("emitReadable_",I.destroyed,I.length,I.ended),I.destroyed||!I.length&&!I.ended||(R.emit("readable"),I.emittedReadable=!1),I.needReadable=!I.flowing&&!I.ended&&I.length<=I.highWaterMark,de(R)}function J(R,I){I.readingMore||(I.readingMore=!0,Q.nextTick(ie,R,I))}function ie(R,I){for(;!I.reading&&!I.ended&&(I.length<I.highWaterMark||I.flowing&&0===I.length);){var H=I.length;if(u("maybeReadMore read 0"),R.read(0),H===I.length)break}I.readingMore=!1}function oe(R){var I=R._readableState;I.readableListening=R.listenerCount("readable")>0,I.resumeScheduled&&!I.paused?I.flowing=!0:R.listenerCount("data")>0&&R.resume()}function ye(R){u("readable nexttick read 0"),R.read(0)}function be(R,I){u("resume",I.reading),I.reading||R.read(0),I.resumeScheduled=!1,R.emit("resume"),de(R),I.flowing&&!I.reading&&R.read(0)}function de(R){var I=R._readableState;for(u("flow",I.flowing);I.flowing&&null!==R.read(););}function le(R,I){return 0===I.length?null:(I.objectMode?H=I.buffer.shift():!R||R>=I.length?(H=I.decoder?I.buffer.join(""):1===I.buffer.length?I.buffer.first():I.buffer.concat(I.length),I.buffer.clear()):H=I.buffer.consume(R,I.decoder),H);var H}function Ce(R){var I=R._readableState;u("endReadable",I.endEmitted),I.endEmitted||(I.ended=!0,Q.nextTick(Ie,I,R))}function Ie(R,I){if(u("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&0===R.length&&(R.endEmitted=!0,I.readable=!1,I.emit("end"),R.autoDestroy)){var H=I._writableState;(!H||H.autoDestroy&&H.finished)&&I.destroy()}}function Oe(R,I){for(var H=0,re=R.length;H<re;H++)if(R[H]===I)return H;return-1}P.prototype.read=function(R){u("read",R),R=parseInt(R,10);var I=this._readableState,H=R;if(0!==R&&(I.emittedReadable=!1),0===R&&I.needReadable&&((0!==I.highWaterMark?I.length>=I.highWaterMark:I.length>0)||I.ended))return u("read: emitReadable",I.length,I.ended),0===I.length&&I.ended?Ce(this):$(this),null;if(0===(R=ce(R,I))&&I.ended)return 0===I.length&&Ce(this),null;var re,ve=I.needReadable;return u("need readable",ve),(0===I.length||I.length-R<I.highWaterMark)&&u("length less than watermark",ve=!0),I.ended||I.reading?u("reading or ended",ve=!1):ve&&(u("do read"),I.reading=!0,I.sync=!0,0===I.length&&(I.needReadable=!0),this._read(I.highWaterMark),I.sync=!1,I.reading||(R=ce(H,I))),null===(re=R>0?le(R,I):null)?(I.needReadable=I.length<=I.highWaterMark,R=0):(I.length-=R,I.awaitDrain=0),0===I.length&&(I.ended||(I.needReadable=!0),H!==R&&I.ended&&Ce(this)),null!==re&&this.emit("data",re),re},P.prototype._read=function(R){j(this,new A("_read()"))},P.prototype.pipe=function(R,I){var H=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=R;break;case 1:re.pipes=[re.pipes,R];break;default:re.pipes.push(R)}re.pipesCount+=1,u("pipe count=%d opts=%j",re.pipesCount,I);var ve=I&&!1===I.end||R===Q.stdout||R===Q.stderr?ge:Ee;function Ee(){u("onend"),R.end()}re.endEmitted?Q.nextTick(ve):H.once("end",ve),R.on("unpipe",function ae(_e,ke){u("onunpipe"),_e===H&&ke&&!1===ke.hasUnpiped&&(ke.hasUnpiped=!0,u("cleanup"),R.removeListener("close",it),R.removeListener("finish",at),R.removeListener("drain",Fe),R.removeListener("error",Ve),R.removeListener("unpipe",ae),H.removeListener("end",Ee),H.removeListener("end",ge),H.removeListener("data",Je),Re=!0,!re.awaitDrain||R._writableState&&!R._writableState.needDrain||Fe())});var _e,Fe=(_e=H,function(){var ke=_e._readableState;u("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,0===ke.awaitDrain&&c(_e,"data")&&(ke.flowing=!0,de(_e))});R.on("drain",Fe);var Re=!1;function Je(_e){u("ondata");var ke=R.write(_e);u("dest.write",ke),!1===ke&&((1===re.pipesCount&&re.pipes===R||re.pipesCount>1&&-1!==Oe(re.pipes,R))&&!Re&&(u("false write response, pause",re.awaitDrain),re.awaitDrain++),H.pause())}function Ve(_e){u("onerror",_e),ge(),R.removeListener("error",Ve),0===c(R,"error")&&j(R,_e)}function it(){R.removeListener("finish",at),ge()}function at(){u("onfinish"),R.removeListener("close",it),ge()}function ge(){u("unpipe"),H.unpipe(R)}return H.on("data",Je),function(_e,ke,U){if("function"==typeof _e.prependListener)return _e.prependListener(ke,U);_e._events&&_e._events[ke]?Array.isArray(_e._events[ke])?_e._events[ke].unshift(U):_e._events[ke]=[U,_e._events[ke]]:_e.on(ke,U)}(R,"error",Ve),R.once("close",it),R.once("finish",at),R.emit("pipe",H),re.flowing||(u("pipe resume"),H.resume()),R},P.prototype.unpipe=function(R){var I=this._readableState,H={hasUnpiped:!1};if(0===I.pipesCount)return this;if(1===I.pipesCount)return R&&R!==I.pipes||(R||(R=I.pipes),I.pipes=null,I.pipesCount=0,I.flowing=!1,R&&R.emit("unpipe",this,H)),this;if(!R){var re=I.pipes,ve=I.pipesCount;I.pipes=null,I.pipesCount=0,I.flowing=!1;for(var ae=0;ae<ve;ae++)re[ae].emit("unpipe",this,{hasUnpiped:!1});return this}var Ee=Oe(I.pipes,R);return-1===Ee||(I.pipes.splice(Ee,1),I.pipesCount-=1,1===I.pipesCount&&(I.pipes=I.pipes[0]),R.emit("unpipe",this,H)),this},P.prototype.on=function(R,I){var H=e.prototype.on.call(this,R,I),re=this._readableState;return"data"===R?(re.readableListening=this.listenerCount("readable")>0,!1!==re.flowing&&this.resume()):"readable"===R&&(re.endEmitted||re.readableListening||(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,u("on readable",re.length,re.reading),re.length?$(this):re.reading||Q.nextTick(ye,this))),H},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(R,I){var H=e.prototype.removeListener.call(this,R,I);return"readable"===R&&Q.nextTick(oe,this),H},P.prototype.removeAllListeners=function(R){var I=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==R&&void 0!==R||Q.nextTick(oe,this),I},P.prototype.resume=function(){var I,H,R=this._readableState;return R.flowing||(u("resume"),R.flowing=!R.readableListening,I=this,(H=R).resumeScheduled||(H.resumeScheduled=!0,Q.nextTick(be,I,H))),R.paused=!1,this},P.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(R){var I=this,H=this._readableState,re=!1;for(var ve in R.on("end",function(){if(u("wrapped end"),H.decoder&&!H.ended){var Ee=H.decoder.end();Ee&&Ee.length&&I.push(Ee)}I.push(null)}),R.on("data",function(Ee){u("wrapped data"),H.decoder&&(Ee=H.decoder.write(Ee)),H.objectMode&&null==Ee||(H.objectMode||Ee&&Ee.length)&&(I.push(Ee)||(re=!0,R.pause()))}),R)void 0===this[ve]&&"function"==typeof R[ve]&&(this[ve]=function(Ee){return function(){return R[Ee].apply(R,arguments)}}(ve));for(var ae=0;ae<D.length;ae++)R.on(D[ae],this.emit.bind(this,D[ae]));return this._read=function(Ee){u("wrapped _read",Ee),re&&(re=!1,R.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===m&&(m=G("./internal/streams/async_iterator")),m(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),P._fromList=le,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(R,I){return void 0===d&&(d=G("./internal/streams/from")),d(P,R,I)})}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/async_iterator":83,"./internal/streams/buffer_list":84,"./internal/streams/destroy":85,"./internal/streams/from":87,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,events:11,inherits:22,"string_decoder/":110,util:3}],81:[function(G,X,Z){"use strict";X.exports=u;var Q=G("../errors").codes,s=Q.ERR_METHOD_NOT_IMPLEMENTED,w=Q.ERR_MULTIPLE_CALLBACK,c=Q.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=Q.ERR_TRANSFORM_WITH_LENGTH_0,r=G("./_stream_duplex");function o(m,d){var a=this._transformState;a.transforming=!1;var v=a.writecb;if(null===v)return this.emit("error",new w);a.writechunk=null,a.writecb=null,null!=d&&this.push(d),v(m);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function u(m){if(!(this instanceof u))return new u(m);r.call(this,m),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&("function"==typeof m.transform&&(this._transform=m.transform),"function"==typeof m.flush&&(this._flush=m.flush)),this.on("prefinish",f)}function f(){var m=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush(function(d,a){l(m,d,a)})}function l(m,d,a){if(d)return m.emit("error",d);if(null!=a&&m.push(a),m._writableState.length)throw new e;if(m._transformState.transforming)throw new c;return m.push(null)}G("inherits")(u,r),u.prototype.push=function(m,d){return this._transformState.needTransform=!1,r.prototype.push.call(this,m,d)},u.prototype._transform=function(m,d,a){a(new s("_transform()"))},u.prototype._write=function(m,d,a){var v=this._transformState;if(v.writecb=a,v.writechunk=m,v.writeencoding=d,!v.transforming){var E=this._readableState;(v.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},u.prototype._read=function(m){var d=this._transformState;null===d.writechunk||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},u.prototype._destroy=function(m,d){r.prototype._destroy.call(this,m,function(a){d(a)})}},{"../errors":77,"./_stream_duplex":78,inherits:22}],82:[function(G,X,Z){(function(Q,s){(function(){"use strict";function w(J){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function(oe,ye,be){var de=oe.entry;for(oe.entry=null;de;){var le=de.callback;ye.pendingcb--,le(undefined),de=de.next}ye.corkedRequestsFree.next=oe}(ie,J)}}var c;X.exports=P,P.WritableState=q;var f,e={deprecate:G("util-deprecate")},r=G("./internal/streams/stream"),o=G("buffer").Buffer,u=s.Uint8Array||function(){},l=G("./internal/streams/destroy"),m=G("./internal/streams/state").getHighWaterMark,d=G("../errors").codes,a=d.ERR_INVALID_ARG_TYPE,v=d.ERR_METHOD_NOT_IMPLEMENTED,E=d.ERR_MULTIPLE_CALLBACK,F=d.ERR_STREAM_CANNOT_PIPE,B=d.ERR_STREAM_DESTROYED,N=d.ERR_STREAM_NULL_VALUES,A=d.ERR_STREAM_WRITE_AFTER_END,k=d.ERR_UNKNOWN_ENCODING,j=l.errorOrDestroy;function D(){}function q(J,ie,oe){c=c||G("./_stream_duplex"),J=J||{},"boolean"!=typeof oe&&(oe=ie instanceof c),this.objectMode=!!J.objectMode,oe&&(this.objectMode=this.objectMode||!!J.writableObjectMode),this.highWaterMark=m(this,J,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ye=!1===J.decodeStrings;this.decodeStrings=!ye,this.defaultEncoding=J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(be){!function(de,le){var I,Ce=de._writableState,Ie=Ce.sync,Oe=Ce.writecb;if("function"!=typeof Oe)throw new E;if((I=Ce).writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0,le)!function(I,H,re,ve,ae){--H.pendingcb,re?(Q.nextTick(ae,ve),Q.nextTick(ee,I,H),I._writableState.errorEmitted=!0,j(I,ve)):(ae(ve),I._writableState.errorEmitted=!0,j(I,ve),ee(I,H))}(de,Ce,Ie,le,Oe);else{var R=ce(Ce)||de.destroyed;R||Ce.corked||Ce.bufferProcessing||!Ce.bufferedRequest||ne(de,Ce),Ie?Q.nextTick(Y,de,Ce,R,Oe):Y(de,Ce,R,Oe)}}(ie,be)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==J.emitClose,this.autoDestroy=!!J.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function P(J){var ie=this instanceof(c=c||G("./_stream_duplex"));if(!ie&&!f.call(P,this))return new P(J);this._writableState=new q(J,this,ie),this.writable=!0,J&&("function"==typeof J.write&&(this._write=J.write),"function"==typeof J.writev&&(this._writev=J.writev),"function"==typeof J.destroy&&(this._destroy=J.destroy),"function"==typeof J.final&&(this._final=J.final)),r.call(this)}function W(J,ie,oe,ye,be,de,le){ie.writelen=ye,ie.writecb=le,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new B("write")):oe?J._writev(be,ie.onwrite):J._write(be,de,ie.onwrite),ie.sync=!1}function Y(J,ie,oe,ye){var be,de;oe||(be=J,0===(de=ie).length&&de.needDrain&&(de.needDrain=!1,be.emit("drain"))),ie.pendingcb--,ye(),ee(J,ie)}function ne(J,ie){ie.bufferProcessing=!0;var oe=ie.bufferedRequest;if(J._writev&&oe&&oe.next){var ye=ie.bufferedRequestCount,be=new Array(ye),de=ie.corkedRequestsFree;de.entry=oe;for(var le=0,Ce=!0;oe;)be[le]=oe,oe.isBuf||(Ce=!1),oe=oe.next,le+=1;be.allBuffers=Ce,W(J,ie,!0,ie.length,be,"",de.finish),ie.pendingcb++,ie.lastBufferedRequest=null,de.next?(ie.corkedRequestsFree=de.next,de.next=null):ie.corkedRequestsFree=new w(ie),ie.bufferedRequestCount=0}else{for(;oe;){var Ie=oe.chunk,Oe=oe.encoding,R=oe.callback;if(W(J,ie,!1,ie.objectMode?1:Ie.length,Ie,Oe,R),oe=oe.next,ie.bufferedRequestCount--,ie.writing)break}null===oe&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=oe,ie.bufferProcessing=!1}function ce(J){return J.ending&&0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function $(J,ie){J._final(function(oe){ie.pendingcb--,oe&&j(J,oe),ie.prefinished=!0,J.emit("prefinish"),ee(J,ie)})}function ee(J,ie){var be,de,oe=ce(ie);if(oe&&(be=J,(de=ie).prefinished||de.finalCalled||("function"!=typeof be._final||de.destroyed?(de.prefinished=!0,be.emit("prefinish")):(de.pendingcb++,de.finalCalled=!0,Q.nextTick($,be,de))),0===ie.pendingcb&&(ie.finished=!0,J.emit("finish"),ie.autoDestroy))){var ye=J._readableState;(!ye||ye.autoDestroy&&ye.endEmitted)&&J.destroy()}return oe}G("inherits")(P,r),q.prototype.getBuffer=function(){for(var J=this.bufferedRequest,ie=[];J;)ie.push(J),J=J.next;return ie},function(){try{Object.defineProperty(q.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(J){return!!f.call(this,J)||this===P&&J&&J._writableState instanceof q}})):f=function(J){return J instanceof this},P.prototype.pipe=function(){j(this,new F)},P.prototype.write=function(J,ie,oe){var ye,Ce,be=this._writableState,de=!1,le=!be.objectMode&&(ye=J,o.isBuffer(ye)||ye instanceof u);return le&&!o.isBuffer(J)&&(Ce=J,J=o.from(Ce)),"function"==typeof ie&&(oe=ie,ie=null),le?ie="buffer":ie||(ie=be.defaultEncoding),"function"!=typeof oe&&(oe=D),be.ending?function(Ce,Ie){var Oe=new A;j(Ce,Oe),Q.nextTick(Ie,Oe)}(this,oe):(le||function(Ce,Ie,Oe,R){var I;return null===Oe?I=new N:"string"==typeof Oe||Ie.objectMode||(I=new a("chunk",["string","Buffer"],Oe)),!I||(j(Ce,I),Q.nextTick(R,I),!1)}(this,be,J,oe))&&(be.pendingcb++,de=function(Ce,Ie,Oe,R,I,H){if(!Oe){var re=(Re=R,Je=I,(Fe=Ie).objectMode||!1===Fe.decodeStrings||"string"!=typeof Re||(Re=o.from(Re,Je)),Re);R!==re&&(Oe=!0,I="buffer",R=re)}var Fe,Re,Je,ve=Ie.objectMode?1:R.length;Ie.length+=ve;var ae=Ie.length<Ie.highWaterMark;if(ae||(Ie.needDrain=!0),Ie.writing||Ie.corked){var Ee=Ie.lastBufferedRequest;Ie.lastBufferedRequest={chunk:R,encoding:I,isBuf:Oe,callback:H,next:null},Ee?Ee.next=Ie.lastBufferedRequest:Ie.bufferedRequest=Ie.lastBufferedRequest,Ie.bufferedRequestCount+=1}else W(Ce,Ie,!1,ve,R,I,H);return ae}(this,be,le,J,ie,oe)),de},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||ne(this,J))},P.prototype.setDefaultEncoding=function(J){if("string"==typeof J&&(J=J.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((J+"").toLowerCase())>-1))throw new k(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(J,ie,oe){oe(new v("_write()"))},P.prototype._writev=null,P.prototype.end=function(J,ie,oe){var be,de,le,ye=this._writableState;return"function"==typeof J?(oe=J,J=null,ie=null):"function"==typeof ie&&(oe=ie,ie=null),null!=J&&this.write(J,ie),ye.corked&&(ye.corked=1,this.uncork()),ye.ending||(be=this,le=oe,(de=ye).ending=!0,ee(be,de),le&&(de.finished?Q.nextTick(le):be.once("finish",le)),de.ended=!0,be.writable=!1),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),P.prototype.destroy=l.destroy,P.prototype._undestroy=l.undestroy,P.prototype._destroy=function(J,ie){ie(J)}}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/destroy":85,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,inherits:22,"util-deprecate":114}],83:[function(G,X,Z){(function(Q){(function(){"use strict";var s;function w(F,B,N){return B in F?Object.defineProperty(F,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):F[B]=N,F}var c=G("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),o=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),l=Symbol("handlePromise"),m=Symbol("stream");function d(F,B){return{value:F,done:B}}function a(F){var B=F[e];if(null!==B){var N=F[m].read();null!==N&&(F[f]=null,F[e]=null,F[r]=null,B(d(N,!1)))}}var v=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((w(s={get stream(){return this[m]},next:function(){var F=this,B=this[o];if(null!==B)return Promise.reject(B);if(this[u])return Promise.resolve(d(void 0,!0));if(this[m].destroyed)return new Promise(function(j,D){Q.nextTick(function(){F[o]?D(F[o]):j(d(void 0,!0))})});var N,j,D,A=this[f];if(A)N=new Promise((j=A,D=this,function(q,P){j.then(function(){D[u]?q(d(void 0,!0)):D[l](q,P)},P)}));else{var k=this[m].read();if(null!==k)return Promise.resolve(d(k,!1));N=new Promise(this[l])}return this[f]=N,N}},Symbol.asyncIterator,function(){return this}),w(s,"return",function(){var F=this;return new Promise(function(B,N){F[m].destroy(null,function(A){A?N(A):B(d(void 0,!0))})})}),s),v);X.exports=function(F){var B,N=Object.create(E,(w(B={},m,{value:F,writable:!0}),w(B,e,{value:null,writable:!0}),w(B,r,{value:null,writable:!0}),w(B,o,{value:null,writable:!0}),w(B,u,{value:F._readableState.endEmitted,writable:!0}),w(B,l,{value:function(A,k){var j=N[m].read();j?(N[f]=null,N[e]=null,N[r]=null,A(d(j,!1))):(N[e]=A,N[r]=k)},writable:!0}),B));return N[f]=null,c(F,function(A){if(A&&"ERR_STREAM_PREMATURE_CLOSE"!==A.code){var k=N[r];return null!==k&&(N[f]=null,N[e]=null,N[r]=null,k(A)),void(N[o]=A)}var j=N[e];null!==j&&(N[f]=null,N[e]=null,N[r]=null,j(d(void 0,!0))),N[u]=!0}),F.on("readable",function(A){Q.nextTick(a,A)}.bind(null,N)),N}}).call(this)}).call(this,G("_process"))},{"./end-of-stream":86,_process:59}],84:[function(G,X,Z){"use strict";function Q(o,u){var f=Object.keys(o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);u&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(o,m).enumerable})),f.push.apply(f,l)}return f}function s(o,u,f){return u in o?Object.defineProperty(o,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):o[u]=f,o}function w(o,u){for(var f=0;f<u.length;f++){var l=u[f];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}var c=G("buffer").Buffer,e=G("util").inspect,r=e&&e.custom||"inspect";X.exports=function(){function o(){(function(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}var u,f;return u=o,(f=[{key:"push",value:function(m){var d={data:m,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(m){var d={data:m,next:this.head};0===this.length&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(0!==this.length){var m=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(0===this.length)return"";for(var d=this.head,a=""+d.data;d=d.next;)a+=m+d.data;return a}},{key:"concat",value:function(m){if(0===this.length)return c.alloc(0);for(var d,a,v,E=c.allocUnsafe(m>>>0),F=this.head,B=0;F;)d=F.data,a=E,v=B,c.prototype.copy.call(d,a,v),B+=F.data.length,F=F.next;return E}},{key:"consume",value:function(m,d){var a;return m<this.head.data.length?(a=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):a=m===this.head.data.length?this.shift():d?this._getString(m):this._getBuffer(m),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var d=this.head,a=1,v=d.data;for(m-=v.length;d=d.next;){var E=d.data,F=m>E.length?E.length:m;if(F===E.length?v+=E:v+=E.slice(0,m),0==(m-=F)){F===E.length?(++a,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=E.slice(F));break}++a}return this.length-=a,v}},{key:"_getBuffer",value:function(m){var d=c.allocUnsafe(m),a=this.head,v=1;for(a.data.copy(d),m-=a.data.length;a=a.next;){var E=a.data,F=m>E.length?E.length:m;if(E.copy(d,d.length-m,0,F),0==(m-=F)){F===E.length?(++v,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=E.slice(F));break}++v}return this.length-=v,d}},{key:r,value:function(m,d){return e(this,function(a){for(var v=1;v<arguments.length;v++){var E=null!=arguments[v]?arguments[v]:{};v%2?Q(Object(E),!0).forEach(function(F){s(a,F,E[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(E)):Q(Object(E)).forEach(function(F){Object.defineProperty(a,F,Object.getOwnPropertyDescriptor(E,F))})}return a}({},d,{depth:0,customInspect:!1}))}}])&&w(u.prototype,f),o}()},{buffer:5,util:3}],85:[function(G,X,Z){(function(Q){(function(){"use strict";function s(e,r){c(e,r),w(e)}function w(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function c(e,r){e.emit("error",r)}X.exports={destroy:function(e,r){var o=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Q.nextTick(c,this,e)):Q.nextTick(c,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(l){!r&&l?o._writableState?o._writableState.errorEmitted?Q.nextTick(w,o):(o._writableState.errorEmitted=!0,Q.nextTick(s,o,l)):Q.nextTick(s,o,l):r?(Q.nextTick(w,o),r(l)):Q.nextTick(w,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var o=e._readableState,u=e._writableState;o&&o.autoDestroy||u&&u.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,G("_process"))},{_process:59}],86:[function(G,X,Z){"use strict";var Q=G("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}X.exports=function w(c,e,r){if("function"==typeof e)return w(c,null,e);var B,N;e||(e={}),B=r||s,N=!1,r=function(){if(!N){N=!0;for(var A=arguments.length,k=new Array(A),j=0;j<A;j++)k[j]=arguments[j];B.apply(this,k)}};var o=e.readable||!1!==e.readable&&c.readable,u=e.writable||!1!==e.writable&&c.writable,f=function(){c.writable||m()},l=c._writableState&&c._writableState.finished,m=function(){u=!1,l=!0,o||r.call(c)},d=c._readableState&&c._readableState.endEmitted,a=function(){o=!1,d=!0,u||r.call(c)},v=function(B){r.call(c,B)},E=function(){var B;return o&&!d?(c._readableState&&c._readableState.ended||(B=new Q),r.call(c,B)):u&&!l?(c._writableState&&c._writableState.ended||(B=new Q),r.call(c,B)):void 0},F=function(){c.req.on("finish",m)};return function(B){return B.setHeader&&"function"==typeof B.abort}(c)?(c.on("complete",m),c.on("abort",E),c.req?F():c.on("request",F)):u&&!c._writableState&&(c.on("end",f),c.on("close",f)),c.on("end",a),c.on("finish",m),!1!==e.error&&c.on("error",v),c.on("close",E),function(){c.removeListener("complete",m),c.removeListener("abort",E),c.removeListener("request",F),c.req&&c.req.removeListener("finish",m),c.removeListener("end",f),c.removeListener("close",f),c.removeListener("finish",m),c.removeListener("end",a),c.removeListener("error",v),c.removeListener("close",E)}}},{"../../../errors":77}],87:[function(G,X,Z){X.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],88:[function(G,X,Z){"use strict";var Q,s=G("../../../errors").codes,w=s.ERR_MISSING_ARGS,c=s.ERR_STREAM_DESTROYED;function e(u){if(u)throw u}function r(u){u()}function o(u,f){return u.pipe(f)}X.exports=function(){for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];var m,v,d=(v=f).length?"function"!=typeof v[v.length-1]?e:v.pop():e;if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new w("streams");var a=f.map(function(v,E){var F=E<f.length-1;return function(B,N,A,k){var q,P;q=k,P=!1,k=function(){P||(P=!0,q.apply(void 0,arguments))};var j=!1;B.on("close",function(){j=!0}),void 0===Q&&(Q=G("./end-of-stream")),Q(B,{readable:N,writable:A},function(q){if(q)return k(q);j=!0,k()});var D=!1;return function(q){if(!j&&!D)return D=!0,function(P){return P.setHeader&&"function"==typeof P.abort}(B)?B.abort():"function"==typeof B.destroy?B.destroy():void k(q||new c("pipe"))}}(v,F,E>0,function(B){m||(m=B),B&&a.forEach(r),F||(a.forEach(r),d(m))})});return f.reduce(o)}},{"../../../errors":77,"./end-of-stream":86}],89:[function(G,X,Z){"use strict";var Q=G("../../../errors").codes.ERR_INVALID_OPT_VALUE;X.exports={getHighWaterMark:function(s,w,c,e){var o,u,f,r=(u=e,f=c,null!=(o=w).highWaterMark?o.highWaterMark:u?o[f]:null);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new Q(e?c:"highWaterMark",r);return Math.floor(r)}return s.objectMode?16:16384}}},{"../../../errors":77}],90:[function(G,X,Z){X.exports=G("events").EventEmitter},{events:11}],91:[function(G,X,Z){(function(Q){(function(){var s=G("./lib/request"),w=G("./lib/response"),c=G("xtend"),e=G("builtin-status-codes"),r=G("url"),o=Z;o.request=function(u,f){u="string"==typeof u?r.parse(u):c(u);var l=-1===Q.location.protocol.search(/^https?:$/)?"http:":"",m=u.protocol||l,d=u.hostname||u.host,a=u.port,v=u.path||"/";d&&-1!==d.indexOf(":")&&(d="["+d+"]"),u.url=(d?m+"//"+d:"")+(a?":"+a:"")+v,u.method=(u.method||"GET").toUpperCase(),u.headers=u.headers||{};var E=new s(u);return f&&E.on("response",f),E},o.get=function(u,f){var l=o.request(u,f);return l.end(),l},o.ClientRequest=s,o.IncomingMessage=w.IncomingMessage,o.Agent=function(){},o.Agent.defaultMaxSockets=4,o.globalAgent=new o.Agent,o.STATUS_CODES=e,o.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/request":93,"./lib/response":94,"builtin-status-codes":6,url:112,xtend:119}],92:[function(G,X,Z){(function(Q){(function(){var s;function w(){if(void 0!==s)return s;if(Q.XMLHttpRequest){s=new Q.XMLHttpRequest;try{s.open("GET",Q.XDomainRequest?"/":"https://example.com")}catch{s=null}}else s=null;return s}function c(r){var o=w();if(!o)return!1;try{return o.responseType=r,o.responseType===r}catch{}return!1}function e(r){return"function"==typeof r}Z.fetch=e(Q.fetch)&&e(Q.ReadableStream),Z.writableStream=e(Q.WritableStream),Z.abortController=e(Q.AbortController),Z.arraybuffer=Z.fetch||c("arraybuffer"),Z.msstream=!Z.fetch&&c("ms-stream"),Z.mozchunkedarraybuffer=!Z.fetch&&c("moz-chunked-arraybuffer"),Z.overrideMimeType=Z.fetch||!!w()&&e(w().overrideMimeType),s=null}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],93:[function(G,X,Z){(function(Q,s,w){(function(){var c=G("./capability"),e=G("inherits"),r=G("./response"),o=G("readable-stream"),u=r.IncomingMessage,f=r.readyStates,l=X.exports=function(d){var a,v=this;o.Writable.call(v),v._opts=d,v._body=[],v._headers={},d.auth&&v.setHeader("Authorization","Basic "+w.from(d.auth).toString("base64")),Object.keys(d.headers).forEach(function(F){v.setHeader(F,d.headers[F])});var F,B,E=!0;if("disable-fetch"===d.mode||"requestTimeout"in d&&!c.abortController)E=!1,a=!0;else if("prefer-streaming"===d.mode)a=!1;else if("allow-wrong-content-type"===d.mode)a=!c.overrideMimeType;else{if(d.mode&&"default"!==d.mode&&"prefer-fast"!==d.mode)throw new Error("Invalid value for opts.mode");a=!0}v._mode=(F=a,B=E,c.fetch&&B?"fetch":c.mozchunkedarraybuffer?"moz-chunked-arraybuffer":c.msstream?"ms-stream":c.arraybuffer&&F?"arraybuffer":"text"),v._fetchTimer=null,v._socketTimeout=null,v._socketTimer=null,v.on("finish",function(){v._onFinish()})};e(l,o.Writable),l.prototype.setHeader=function(d,a){var v=d.toLowerCase();-1===m.indexOf(v)&&(this._headers[v]={name:d,value:a})},l.prototype.getHeader=function(d){var a=this._headers[d.toLowerCase()];return a?a.value:null},l.prototype.removeHeader=function(d){delete this._headers[d.toLowerCase()]},l.prototype._onFinish=function(){var d=this;if(!d._destroyed){var a=d._opts;"timeout"in a&&0!==a.timeout&&d.setTimeout(a.timeout);var v=d._headers,E=null;"GET"!==a.method&&"HEAD"!==a.method&&(E=new Blob(d._body,{type:(v["content-type"]||{}).value||""}));var F=[];if(Object.keys(v).forEach(function(k){var j=v[k].name,D=v[k].value;Array.isArray(D)?D.forEach(function(q){F.push([j,q])}):F.push([j,D])}),"fetch"===d._mode){var B=null;if(c.abortController){var N=new AbortController;B=N.signal,d._fetchAbortController=N,"requestTimeout"in a&&0!==a.requestTimeout&&(d._fetchTimer=s.setTimeout(function(){d.emit("requestTimeout"),d._fetchAbortController&&d._fetchAbortController.abort()},a.requestTimeout))}s.fetch(d._opts.url,{method:d._opts.method,headers:F,body:E||void 0,mode:"cors",credentials:a.withCredentials?"include":"same-origin",signal:B}).then(function(k){d._fetchResponse=k,d._resetTimers(!1),d._connect()},function(k){d._resetTimers(!0),d._destroyed||d.emit("error",k)})}else{var A=d._xhr=new s.XMLHttpRequest;try{A.open(d._opts.method,d._opts.url,!0)}catch(k){return void Q.nextTick(function(){d.emit("error",k)})}"responseType"in A&&(A.responseType=d._mode),"withCredentials"in A&&(A.withCredentials=!!a.withCredentials),"text"===d._mode&&"overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in a&&(A.timeout=a.requestTimeout,A.ontimeout=function(){d.emit("requestTimeout")}),F.forEach(function(k){A.setRequestHeader(k[0],k[1])}),d._response=null,A.onreadystatechange=function(){switch(A.readyState){case f.LOADING:case f.DONE:d._onXHRProgress()}},"moz-chunked-arraybuffer"===d._mode&&(A.onprogress=function(){d._onXHRProgress()}),A.onerror=function(){d._destroyed||(d._resetTimers(!0),d.emit("error",new Error("XHR error")))};try{A.send(E)}catch(k){return void Q.nextTick(function(){d.emit("error",k)})}}}},l.prototype._onXHRProgress=function(){this._resetTimers(!1),function(d){try{var a=d.status;return null!==a&&0!==a}catch{return!1}}(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))},l.prototype._connect=function(){var d=this;d._destroyed||(d._response=new u(d._xhr,d._fetchResponse,d._mode,d._resetTimers.bind(d)),d._response.on("error",function(a){d.emit("error",a)}),d.emit("response",d._response))},l.prototype._write=function(d,a,v){this._body.push(d),v()},l.prototype._resetTimers=function(d){var a=this;s.clearTimeout(a._socketTimer),a._socketTimer=null,d?(s.clearTimeout(a._fetchTimer),a._fetchTimer=null):a._socketTimeout&&(a._socketTimer=s.setTimeout(function(){a.emit("timeout")},a._socketTimeout))},l.prototype.abort=l.prototype.destroy=function(d){this._destroyed=!0,this._resetTimers(!0),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort(),d&&this.emit("error",d)},l.prototype.end=function(d,a,v){"function"==typeof d&&(v=d,d=void 0),o.Writable.prototype.end.call(this,d,a,v)},l.prototype.setTimeout=function(d,a){a&&this.once("timeout",a),this._socketTimeout=d,this._resetTimers(!1)},l.prototype.flushHeaders=function(){},l.prototype.setNoDelay=function(){},l.prototype.setSocketKeepAlive=function(){};var m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},G("buffer").Buffer)},{"./capability":92,"./response":94,_process:59,buffer:5,inherits:22,"readable-stream":109}],94:[function(G,X,Z){(function(Q,s,w){(function(){var c=G("./capability"),e=G("inherits"),r=G("readable-stream"),o=Z.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=Z.IncomingMessage=function(f,l,m,d){var a=this;if(r.Readable.call(a),a._mode=m,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",function(){Q.nextTick(function(){a.emit("close")})}),"fetch"===m){if(a._fetchResponse=l,a.url=l.url,a.statusCode=l.status,a.statusMessage=l.statusText,l.headers.forEach(function(N,A){a.headers[A.toLowerCase()]=N,a.rawHeaders.push(A,N)}),c.writableStream){var v=new WritableStream({write:function(N){return d(!1),new Promise(function(A,k){a._destroyed?k():a.push(w.from(N))?A():a._resumeFetch=A})},close:function(){d(!0),a._destroyed||a.push(null)},abort:function(N){d(!0),a._destroyed||a.emit("error",N)}});try{return void l.body.pipeTo(v).catch(function(N){d(!0),a._destroyed||a.emit("error",N)})}catch{}}var E=l.body.getReader();!function N(){E.read().then(function(A){a._destroyed||(d(A.done),A.done?a.push(null):(a.push(w.from(A.value)),N()))}).catch(function(A){d(!0),a._destroyed||a.emit("error",A)})}()}else if(a._xhr=f,a._pos=0,a.url=f.responseURL,a.statusCode=f.status,a.statusMessage=f.statusText,f.getAllResponseHeaders().split(/\r?\n/).forEach(function(N){var A=N.match(/^([^:]+):\s*(.*)/);if(A){var k=A[1].toLowerCase();"set-cookie"===k?(void 0===a.headers[k]&&(a.headers[k]=[]),a.headers[k].push(A[2])):void 0!==a.headers[k]?a.headers[k]+=", "+A[2]:a.headers[k]=A[2],a.rawHeaders.push(A[1],A[2])}}),a._charset="x-user-defined",!c.overrideMimeType){var F=a.rawHeaders["mime-type"];if(F){var B=F.match(/;\s*charset=([^;])(;|$)/);B&&(a._charset=B[1].toLowerCase())}a._charset||(a._charset="utf-8")}};e(u,r.Readable),u.prototype._read=function(){var f=this._resumeFetch;f&&(this._resumeFetch=null,f())},u.prototype._onXHRProgress=function(f){var l=this,m=l._xhr,d=null;switch(l._mode){case"text":if((d=m.responseText).length>l._pos){var a=d.substr(l._pos);if("x-user-defined"===l._charset){for(var v=w.alloc(a.length),E=0;E<a.length;E++)v[E]=255&a.charCodeAt(E);l.push(v)}else l.push(a,l._charset);l._pos=d.length}break;case"arraybuffer":if(m.readyState!==o.DONE||!m.response)break;d=m.response,l.push(w.from(new Uint8Array(d)));break;case"moz-chunked-arraybuffer":if(d=m.response,m.readyState!==o.LOADING||!d)break;l.push(w.from(new Uint8Array(d)));break;case"ms-stream":if(d=m.response,m.readyState!==o.LOADING)break;var F=new s.MSStreamReader;F.onprogress=function(){F.result.byteLength>l._pos&&(l.push(w.from(new Uint8Array(F.result.slice(l._pos)))),l._pos=F.result.byteLength)},F.onload=function(){f(!0),l.push(null)},F.readAsArrayBuffer(d)}l._xhr.readyState===o.DONE&&"ms-stream"!==l._mode&&(f(!0),l.push(null))}}).call(this)}).call(this,G("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},G("buffer").Buffer)},{"./capability":92,_process:59,buffer:5,inherits:22,"readable-stream":109}],95:[function(G,X,Z){arguments[4][77][0].apply(Z,arguments)},{dup:77}],96:[function(G,X,Z){arguments[4][78][0].apply(Z,arguments)},{"./_stream_readable":98,"./_stream_writable":100,_process:59,dup:78,inherits:22}],97:[function(G,X,Z){arguments[4][79][0].apply(Z,arguments)},{"./_stream_transform":99,dup:79,inherits:22}],98:[function(G,X,Z){arguments[4][80][0].apply(Z,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/async_iterator":101,"./internal/streams/buffer_list":102,"./internal/streams/destroy":103,"./internal/streams/from":105,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:80,events:11,inherits:22,"string_decoder/":110,util:3}],99:[function(G,X,Z){arguments[4][81][0].apply(Z,arguments)},{"../errors":95,"./_stream_duplex":96,dup:81,inherits:22}],100:[function(G,X,Z){arguments[4][82][0].apply(Z,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/destroy":103,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:82,inherits:22,"util-deprecate":114}],101:[function(G,X,Z){arguments[4][83][0].apply(Z,arguments)},{"./end-of-stream":104,_process:59,dup:83}],102:[function(G,X,Z){arguments[4][84][0].apply(Z,arguments)},{buffer:5,dup:84,util:3}],103:[function(G,X,Z){arguments[4][85][0].apply(Z,arguments)},{_process:59,dup:85}],104:[function(G,X,Z){arguments[4][86][0].apply(Z,arguments)},{"../../../errors":95,dup:86}],105:[function(G,X,Z){arguments[4][87][0].apply(Z,arguments)},{dup:87}],106:[function(G,X,Z){arguments[4][88][0].apply(Z,arguments)},{"../../../errors":95,"./end-of-stream":104,dup:88}],107:[function(G,X,Z){arguments[4][89][0].apply(Z,arguments)},{"../../../errors":95,dup:89}],108:[function(G,X,Z){arguments[4][90][0].apply(Z,arguments)},{dup:90,events:11}],109:[function(G,X,Z){(Z=X.exports=G("./lib/_stream_readable.js")).Stream=Z,Z.Readable=Z,Z.Writable=G("./lib/_stream_writable.js"),Z.Duplex=G("./lib/_stream_duplex.js"),Z.Transform=G("./lib/_stream_transform.js"),Z.PassThrough=G("./lib/_stream_passthrough.js"),Z.finished=G("./lib/internal/streams/end-of-stream.js"),Z.pipeline=G("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":96,"./lib/_stream_passthrough.js":97,"./lib/_stream_readable.js":98,"./lib/_stream_transform.js":99,"./lib/_stream_writable.js":100,"./lib/internal/streams/end-of-stream.js":104,"./lib/internal/streams/pipeline.js":106}],110:[function(G,X,Z){"use strict";var Q=G("safe-buffer").Buffer,s=Q.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function w(d){var a;switch(this.encoding=function(v){var E=function(F){if(!F)return"utf8";for(var B;;)switch(F){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return F;default:if(B)return;F=(""+F).toLowerCase(),B=!0}}(v);if("string"!=typeof E&&(Q.isEncoding===s||!s(v)))throw new Error("Unknown encoding: "+v);return E||v}(d),this.encoding){case"utf16le":this.text=r,this.end=o,a=4;break;case"utf8":this.fillLast=e,a=4;break;case"base64":this.text=u,this.end=f,a=3;break;default:return this.write=l,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Q.allocUnsafe(a)}function c(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function e(d){var a=this.lastTotal-this.lastNeed,v=function(E,F,B){if(128!=(192&F[0]))return E.lastNeed=0,"\ufffd";if(E.lastNeed>1&&F.length>1){if(128!=(192&F[1]))return E.lastNeed=1,"\ufffd";if(E.lastNeed>2&&F.length>2&&128!=(192&F[2]))return E.lastNeed=2,"\ufffd"}}(this,d);return void 0!==v?v:this.lastNeed<=d.length?(d.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,a,0,d.length),void(this.lastNeed-=d.length))}function r(d,a){if((d.length-a)%2==0){var v=d.toString("utf16le",a);if(v){var E=v.charCodeAt(v.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",a,d.length-1)}function o(d){var a=d&&d.length?this.write(d):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,v)}return a}function u(d,a){var v=(d.length-a)%3;return 0===v?d.toString("base64",a):(this.lastNeed=3-v,this.lastTotal=3,1===v?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",a,d.length-v))}function f(d){var a=d&&d.length?this.write(d):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function l(d){return d.toString(this.encoding)}function m(d){return d&&d.length?this.write(d):""}Z.StringDecoder=w,w.prototype.write=function(d){if(0===d.length)return"";var a,v;if(this.lastNeed){if(void 0===(a=this.fillLast(d)))return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<d.length?a?a+this.text(d,v):this.text(d,v):a||""},w.prototype.end=function(d){var a=d&&d.length?this.write(d):"";return this.lastNeed?a+"\ufffd":a},w.prototype.text=function(d,a){var v=function(F,B,N){var A=B.length-1;if(A<N)return 0;var k=c(B[A]);return k>=0?(k>0&&(F.lastNeed=k-1),k):--A<N||-2===k?0:(k=c(B[A]))>=0?(k>0&&(F.lastNeed=k-2),k):--A<N||-2===k?0:(k=c(B[A]))>=0?(k>0&&(2===k?k=0:F.lastNeed=k-3),k):0}(this,d,a);if(!this.lastNeed)return d.toString("utf8",a);this.lastTotal=v;var E=d.length-(v-this.lastNeed);return d.copy(this.lastChar,0,E),d.toString("utf8",a,E)},w.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},{"safe-buffer":74}],111:[function(G,X,Z){(function(Q,s){(function(){var w=G("process/browser.js").nextTick,c=Function.prototype.apply,e=Array.prototype.slice,r={},o=0;function u(f,l){this._id=f,this._clearFn=l}Z.setTimeout=function(){return new u(c.call(setTimeout,window,arguments),clearTimeout)},Z.setInterval=function(){return new u(c.call(setInterval,window,arguments),clearInterval)},Z.clearTimeout=Z.clearInterval=function(f){f.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},Z.enroll=function(f,l){clearTimeout(f._idleTimeoutId),f._idleTimeout=l},Z.unenroll=function(f){clearTimeout(f._idleTimeoutId),f._idleTimeout=-1},Z._unrefActive=Z.active=function(f){clearTimeout(f._idleTimeoutId);var l=f._idleTimeout;l>=0&&(f._idleTimeoutId=setTimeout(function(){f._onTimeout&&f._onTimeout()},l))},Z.setImmediate="function"==typeof Q?Q:function(f){var l=o++,m=!(arguments.length<2)&&e.call(arguments,1);return r[l]=!0,w(function(){r[l]&&(m?f.apply(null,m):f.call(null),Z.clearImmediate(l))}),l},Z.clearImmediate="function"==typeof s?s:function(f){delete r[f]}}).call(this)}).call(this,G("timers").setImmediate,G("timers").clearImmediate)},{"process/browser.js":59,timers:111}],112:[function(G,X,Z){"use strict";var Q=G("punycode"),s=G("./util");function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Z.parse=B,Z.resolve=function(N,A){return B(N,!1,!0).resolve(A)},Z.resolveObject=function(N,A){return N?B(N,!1,!0).resolveObject(A):A},Z.format=function(N){return s.isString(N)&&(N=B(N)),N instanceof w?N.format():w.prototype.format.call(N)},Z.Url=w;var c=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(o),f=["%","/","?",";","#"].concat(u),l=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,a={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},F=G("querystring");function B(N,A,k){if(N&&s.isObject(N)&&N instanceof w)return N;var j=new w;return j.parse(N,A,k),j}w.prototype.parse=function(N,A,k){if(!s.isString(N))throw new TypeError("Parameter 'url' must be a string, not "+typeof N);var j=N.indexOf("?"),D=-1!==j&&j<N.indexOf("#")?"?":"#",q=N.split(D);q[0]=q[0].replace(/\\/g,"/");var P=N=q.join(D);if(P=P.trim(),!k&&1===N.split("#").length){var W=r.exec(P);if(W)return this.path=P,this.href=P,this.pathname=W[1],W[2]?(this.search=W[2],this.query=A?F.parse(this.search.substr(1)):this.search.substr(1)):A&&(this.search="",this.query={}),this}var Y=c.exec(P);if(Y){var ne=(Y=Y[0]).toLowerCase();this.protocol=ne,P=P.substr(Y.length)}if(k||Y||P.match(/^\/\/[^@\/]+@[^@\/]+/)){var ce="//"===P.substr(0,2);!ce||Y&&v[Y]||(P=P.substr(2),this.slashes=!0)}if(!v[Y]&&(ce||Y&&!E[Y])){for(var $,ee,J=-1,ie=0;ie<l.length;ie++)-1!==(oe=P.indexOf(l[ie]))&&(-1===J||oe<J)&&(J=oe);for(-1!==(ee=-1===J?P.lastIndexOf("@"):P.lastIndexOf("@",J))&&($=P.slice(0,ee),P=P.slice(ee+1),this.auth=decodeURIComponent($)),J=-1,ie=0;ie<f.length;ie++){var oe;-1!==(oe=P.indexOf(f[ie]))&&(-1===J||oe<J)&&(J=oe)}-1===J&&(J=P.length),this.host=P.slice(0,J),P=P.slice(J),this.parseHost(),this.hostname=this.hostname||"";var ye="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ye)for(var be=this.hostname.split(/\./),de=(ie=0,be.length);ie<de;ie++){var le=be[ie];if(le&&!le.match(m)){for(var Ce="",Ie=0,Oe=le.length;Ie<Oe;Ie++)le.charCodeAt(Ie)>127?Ce+="x":Ce+=le[Ie];if(!Ce.match(m)){var R=be.slice(0,ie),I=be.slice(ie+1),H=le.match(d);H&&(R.push(H[1]),I.unshift(H[2])),I.length&&(P="/"+I.join(".")+P),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ye||(this.hostname=Q.toASCII(this.hostname));var re=this.port?":"+this.port:"",ve=this.hostname||"";this.host=ve+re,this.href+=this.host,ye&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==P[0]&&(P="/"+P))}if(!a[ne])for(ie=0,de=u.length;ie<de;ie++){var ae=u[ie];if(-1!==P.indexOf(ae)){var Ee=encodeURIComponent(ae);Ee===ae&&(Ee=escape(ae)),P=P.split(ae).join(Ee)}}var Fe=P.indexOf("#");-1!==Fe&&(this.hash=P.substr(Fe),P=P.slice(0,Fe));var Re=P.indexOf("?");if(-1!==Re?(this.search=P.substr(Re),this.query=P.substr(Re+1),A&&(this.query=F.parse(this.query)),P=P.slice(0,Re)):A&&(this.search="",this.query={}),P&&(this.pathname=P),E[ne]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){re=this.pathname||"";var Je=this.search||"";this.path=re+Je}return this.href=this.format(),this},w.prototype.format=function(){var N=this.auth||"";N&&(N=(N=encodeURIComponent(N)).replace(/%3A/i,":"),N+="@");var A=this.protocol||"",k=this.pathname||"",j=this.hash||"",D=!1,q="";this.host?D=N+this.host:this.hostname&&(D=N+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(D+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(q=F.stringify(this.query));var P=this.search||q&&"?"+q||"";return A&&":"!==A.substr(-1)&&(A+=":"),this.slashes||(!A||E[A])&&!1!==D?(D="//"+(D||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):D||(D=""),j&&"#"!==j.charAt(0)&&(j="#"+j),P&&"?"!==P.charAt(0)&&(P="?"+P),A+D+(k=k.replace(/[?#]/g,function(W){return encodeURIComponent(W)}))+(P=P.replace("#","%23"))+j},w.prototype.resolve=function(N){return this.resolveObject(B(N,!1,!0)).format()},w.prototype.resolveObject=function(N){if(s.isString(N)){var A=new w;A.parse(N,!1,!0),N=A}for(var k=new w,j=Object.keys(this),D=0;D<j.length;D++){var q=j[D];k[q]=this[q]}if(k.hash=N.hash,""===N.href)return k.href=k.format(),k;if(N.slashes&&!N.protocol){for(var P=Object.keys(N),W=0;W<P.length;W++){var Y=P[W];"protocol"!==Y&&(k[Y]=N[Y])}return E[k.protocol]&&k.hostname&&!k.pathname&&(k.path=k.pathname="/"),k.href=k.format(),k}if(N.protocol&&N.protocol!==k.protocol){if(!E[N.protocol]){for(var ne=Object.keys(N),ce=0;ce<ne.length;ce++){var $=ne[ce];k[$]=N[$]}return k.href=k.format(),k}if(k.protocol=N.protocol,N.host||v[N.protocol])k.pathname=N.pathname;else{for(var ee=(N.pathname||"").split("/");ee.length&&!(N.host=ee.shift()););N.host||(N.host=""),N.hostname||(N.hostname=""),""!==ee[0]&&ee.unshift(""),ee.length<2&&ee.unshift(""),k.pathname=ee.join("/")}if(k.search=N.search,k.query=N.query,k.host=N.host||"",k.auth=N.auth,k.hostname=N.hostname||N.host,k.port=N.port,k.pathname||k.search){var J=k.pathname||"",ie=k.search||"";k.path=J+ie}return k.slashes=k.slashes||N.slashes,k.href=k.format(),k}var oe=k.pathname&&"/"===k.pathname.charAt(0),ye=N.host||N.pathname&&"/"===N.pathname.charAt(0),be=ye||oe||k.host&&N.pathname,de=be,le=k.pathname&&k.pathname.split("/")||[],Ce=(ee=N.pathname&&N.pathname.split("/")||[],k.protocol&&!E[k.protocol]);if(Ce&&(k.hostname="",k.port=null,k.host&&(""===le[0]?le[0]=k.host:le.unshift(k.host)),k.host="",N.protocol&&(N.hostname=null,N.port=null,N.host&&(""===ee[0]?ee[0]=N.host:ee.unshift(N.host)),N.host=null),be=be&&(""===ee[0]||""===le[0])),ye)k.host=N.host||""===N.host?N.host:k.host,k.hostname=N.hostname||""===N.hostname?N.hostname:k.hostname,k.search=N.search,k.query=N.query,le=ee;else if(ee.length)le||(le=[]),le.pop(),le=le.concat(ee),k.search=N.search,k.query=N.query;else if(!s.isNullOrUndefined(N.search))return Ce&&(k.hostname=k.host=le.shift(),(H=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=H.shift(),k.host=k.hostname=H.shift())),k.search=N.search,k.query=N.query,s.isNull(k.pathname)&&s.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.href=k.format(),k;if(!le.length)return k.pathname=null,k.search?k.path="/"+k.search:k.path=null,k.href=k.format(),k;for(var Ie=le.slice(-1)[0],Oe=(k.host||N.host||le.length>1)&&("."===Ie||".."===Ie)||""===Ie,R=0,I=le.length;I>=0;I--)"."===(Ie=le[I])?le.splice(I,1):".."===Ie?(le.splice(I,1),R++):R&&(le.splice(I,1),R--);if(!be&&!de)for(;R--;R)le.unshift("..");!be||""===le[0]||le[0]&&"/"===le[0].charAt(0)||le.unshift(""),Oe&&"/"!==le.join("/").substr(-1)&&le.push("");var H,re=""===le[0]||le[0]&&"/"===le[0].charAt(0);return Ce&&(k.hostname=k.host=re?"":le.length?le.shift():"",(H=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=H.shift(),k.host=k.hostname=H.shift())),(be=be||k.host&&le.length)&&!re&&le.unshift(""),le.length?k.pathname=le.join("/"):(k.pathname=null,k.path=null),s.isNull(k.pathname)&&s.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.auth=N.auth||k.auth,k.slashes=k.slashes||N.slashes,k.href=k.format(),k},w.prototype.parseHost=function(){var N=this.host,A=e.exec(N);A&&(":"!==(A=A[0])&&(this.port=A.substr(1)),N=N.substr(0,N.length-A.length)),N&&(this.hostname=N)}},{"./util":113,punycode:60,querystring:63}],113:[function(G,X,Z){"use strict";X.exports={isString:function(Q){return"string"==typeof Q},isObject:function(Q){return"object"==typeof Q&&null!==Q},isNull:function(Q){return null===Q},isNullOrUndefined:function(Q){return null==Q}}},{}],114:[function(G,X,Z){(function(Q){(function(){function s(w){try{if(!Q.localStorage)return!1}catch{return!1}var c=Q.localStorage[w];return null!=c&&"true"===String(c).toLowerCase()}X.exports=function(w,c){if(s("noDeprecation"))return w;var e=!1;return function(){if(!e){if(s("throwDeprecation"))throw new Error(c);s("traceDeprecation")?console.trace(c):console.warn(c),e=!0}return w.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],115:[function(G,X,Z){X.exports=function(Q){return Q&&"object"==typeof Q&&"function"==typeof Q.copy&&"function"==typeof Q.fill&&"function"==typeof Q.readUInt8}},{}],116:[function(G,X,Z){"use strict";var Q=G("is-arguments"),s=G("is-generator-function"),w=G("which-typed-array"),c=G("is-typed-array");function e(J){return J.call.bind(J)}var r=typeof BigInt<"u",o=typeof Symbol<"u",u=e(Object.prototype.toString),f=e(Number.prototype.valueOf),l=e(String.prototype.valueOf),m=e(Boolean.prototype.valueOf);if(r)var d=e(BigInt.prototype.valueOf);if(o)var a=e(Symbol.prototype.valueOf);function v(J,ie){if("object"!=typeof J)return!1;try{return ie(J),!0}catch{return!1}}function E(J){return"[object Map]"===u(J)}function F(J){return"[object Set]"===u(J)}function B(J){return"[object WeakMap]"===u(J)}function N(J){return"[object WeakSet]"===u(J)}function A(J){return"[object ArrayBuffer]"===u(J)}function k(J){return typeof ArrayBuffer<"u"&&(A.working?A(J):J instanceof ArrayBuffer)}function j(J){return"[object DataView]"===u(J)}function D(J){return typeof DataView<"u"&&(j.working?j(J):J instanceof DataView)}Z.isArgumentsObject=Q,Z.isGeneratorFunction=s,Z.isTypedArray=c,Z.isPromise=function(J){return typeof Promise<"u"&&J instanceof Promise||null!==J&&"object"==typeof J&&"function"==typeof J.then&&"function"==typeof J.catch},Z.isArrayBufferView=function(J){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(J):c(J)||D(J)},Z.isUint8Array=function(J){return"Uint8Array"===w(J)},Z.isUint8ClampedArray=function(J){return"Uint8ClampedArray"===w(J)},Z.isUint16Array=function(J){return"Uint16Array"===w(J)},Z.isUint32Array=function(J){return"Uint32Array"===w(J)},Z.isInt8Array=function(J){return"Int8Array"===w(J)},Z.isInt16Array=function(J){return"Int16Array"===w(J)},Z.isInt32Array=function(J){return"Int32Array"===w(J)},Z.isFloat32Array=function(J){return"Float32Array"===w(J)},Z.isFloat64Array=function(J){return"Float64Array"===w(J)},Z.isBigInt64Array=function(J){return"BigInt64Array"===w(J)},Z.isBigUint64Array=function(J){return"BigUint64Array"===w(J)},E.working=typeof Map<"u"&&E(new Map),Z.isMap=function(J){return typeof Map<"u"&&(E.working?E(J):J instanceof Map)},F.working=typeof Set<"u"&&F(new Set),Z.isSet=function(J){return typeof Set<"u"&&(F.working?F(J):J instanceof Set)},B.working=typeof WeakMap<"u"&&B(new WeakMap),Z.isWeakMap=function(J){return typeof WeakMap<"u"&&(B.working?B(J):J instanceof WeakMap)},N.working=typeof WeakSet<"u"&&N(new WeakSet),Z.isWeakSet=function(J){return N(J)},A.working=typeof ArrayBuffer<"u"&&A(new ArrayBuffer),Z.isArrayBuffer=k,j.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&j(new DataView(new ArrayBuffer(1),0,1)),Z.isDataView=D;var q=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function P(J){return"[object SharedArrayBuffer]"===u(J)}function W(J){return void 0!==q&&(void 0===P.working&&(P.working=P(new q)),P.working?P(J):J instanceof q)}function Y(J){return v(J,f)}function ne(J){return v(J,l)}function ce(J){return v(J,m)}function $(J){return r&&v(J,d)}function ee(J){return o&&v(J,a)}Z.isSharedArrayBuffer=W,Z.isAsyncFunction=function(J){return"[object AsyncFunction]"===u(J)},Z.isMapIterator=function(J){return"[object Map Iterator]"===u(J)},Z.isSetIterator=function(J){return"[object Set Iterator]"===u(J)},Z.isGeneratorObject=function(J){return"[object Generator]"===u(J)},Z.isWebAssemblyCompiledModule=function(J){return"[object WebAssembly.Module]"===u(J)},Z.isNumberObject=Y,Z.isStringObject=ne,Z.isBooleanObject=ce,Z.isBigIntObject=$,Z.isSymbolObject=ee,Z.isBoxedPrimitive=function(J){return Y(J)||ne(J)||ce(J)||$(J)||ee(J)},Z.isAnyArrayBuffer=function(J){return typeof Uint8Array<"u"&&(k(J)||W(J))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(J){Object.defineProperty(Z,J,{enumerable:!1,value:function(){throw new Error(J+" is not supported in userland")}})})},{"is-arguments":23,"is-generator-function":25,"is-typed-array":26,"which-typed-array":118}],117:[function(G,X,Z){(function(Q){(function(){var s=Object.getOwnPropertyDescriptors||function($){for(var ee=Object.keys($),J={},ie=0;ie<ee.length;ie++)J[ee[ie]]=Object.getOwnPropertyDescriptor($,ee[ie]);return J},w=/%[sdj%]/g;Z.format=function($){if(!B($)){for(var ee=[],J=0;J<arguments.length;J++)ee.push(o(arguments[J]));return ee.join(" ")}J=1;for(var ie=arguments,oe=ie.length,ye=String($).replace(w,function(de){if("%%"===de)return"%";if(J>=oe)return de;switch(de){case"%s":return String(ie[J++]);case"%d":return Number(ie[J++]);case"%j":try{return JSON.stringify(ie[J++])}catch{return"[Circular]"}default:return de}}),be=ie[J];J<oe;be=ie[++J])E(be)||!k(be)?ye+=" "+be:ye+=" "+o(be);return ye},Z.deprecate=function($,ee){if(void 0!==Q&&!0===Q.noDeprecation)return $;if(void 0===Q)return function(){return Z.deprecate($,ee).apply(this,arguments)};var J=!1;return function(){if(!J){if(Q.throwDeprecation)throw new Error(ee);Q.traceDeprecation?console.trace(ee):console.error(ee),J=!0}return $.apply(this,arguments)}};var c={},e=/^$/;if(Q.env.NODE_DEBUG){var r=Q.env.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+r+"$","i")}function o($,ee){var J={seen:[],stylize:f};return arguments.length>=3&&(J.depth=arguments[2]),arguments.length>=4&&(J.colors=arguments[3]),v(ee)?J.showHidden=ee:ee&&Z._extend(J,ee),N(J.showHidden)&&(J.showHidden=!1),N(J.depth)&&(J.depth=2),N(J.colors)&&(J.colors=!1),N(J.customInspect)&&(J.customInspect=!0),J.colors&&(J.stylize=u),l(J,$,J.depth)}function u($,ee){var J=o.styles[ee];return J?"\x1b["+o.colors[J][0]+"m"+$+"\x1b["+o.colors[J][1]+"m":$}function f($,ee){return $}function l($,ee,J){if($.customInspect&&ee&&q(ee.inspect)&&ee.inspect!==Z.inspect&&(!ee.constructor||ee.constructor.prototype!==ee)){var ie=ee.inspect(J,$);return B(ie)||(ie=l($,ie,J)),ie}var oe=function(R,I){if(N(I))return R.stylize("undefined","undefined");if(B(I)){var H="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(H,"string")}return F(I)?R.stylize(""+I,"number"):v(I)?R.stylize(""+I,"boolean"):E(I)?R.stylize("null","null"):void 0}($,ee);if(oe)return oe;var I,ye=Object.keys(ee),be=(I={},ye.forEach(function(H,re){I[H]=!0}),I);if($.showHidden&&(ye=Object.getOwnPropertyNames(ee)),D(ee)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return m(ee);if(0===ye.length){if(q(ee)){var de=ee.name?": "+ee.name:"";return $.stylize("[Function"+de+"]","special")}if(A(ee))return $.stylize(RegExp.prototype.toString.call(ee),"regexp");if(j(ee))return $.stylize(Date.prototype.toString.call(ee),"date");if(D(ee))return m(ee)}var le,Ce="",Ie=!1,Oe=["{","}"];return a(ee)&&(Ie=!0,Oe=["[","]"]),q(ee)&&(Ce=" [Function"+(ee.name?": "+ee.name:"")+"]"),A(ee)&&(Ce=" "+RegExp.prototype.toString.call(ee)),j(ee)&&(Ce=" "+Date.prototype.toUTCString.call(ee)),D(ee)&&(Ce=" "+m(ee)),0!==ye.length||Ie&&0!=ee.length?J<0?A(ee)?$.stylize(RegExp.prototype.toString.call(ee),"regexp"):$.stylize("[Object]","special"):($.seen.push(ee),le=Ie?function(R,I,H,re,ve){for(var ae=[],Ee=0,Fe=I.length;Ee<Fe;++Ee)ne(I,String(Ee))?ae.push(d(R,I,H,re,String(Ee),!0)):ae.push("");return ve.forEach(function(Re){Re.match(/^\d+$/)||ae.push(d(R,I,H,re,Re,!0))}),ae}($,ee,J,be,ye):ye.map(function(R){return d($,ee,J,be,R,Ie)}),$.seen.pop(),function(R,I,H){return R.reduce(function(re,ve){return ve.indexOf("\n"),re+ve.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?H[0]+(""===I?"":I+"\n ")+" "+R.join(",\n  ")+" "+H[1]:H[0]+I+" "+R.join(", ")+" "+H[1]}(le,Ce,Oe)):Oe[0]+Ce+Oe[1]}function m($){return"["+Error.prototype.toString.call($)+"]"}function d($,ee,J,ie,oe,ye){var be,de,le;if((le=Object.getOwnPropertyDescriptor(ee,oe)||{value:ee[oe]}).get?de=le.set?$.stylize("[Getter/Setter]","special"):$.stylize("[Getter]","special"):le.set&&(de=$.stylize("[Setter]","special")),ne(ie,oe)||(be="["+oe+"]"),de||($.seen.indexOf(le.value)<0?(de=E(J)?l($,le.value,null):l($,le.value,J-1)).indexOf("\n")>-1&&(de=ye?de.split("\n").map(function(Ce){return"  "+Ce}).join("\n").substr(2):"\n"+de.split("\n").map(function(Ce){return"   "+Ce}).join("\n")):de=$.stylize("[Circular]","special")),N(be)){if(ye&&oe.match(/^\d+$/))return de;(be=JSON.stringify(""+oe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(be=be.substr(1,be.length-2),be=$.stylize(be,"name")):(be=be.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),be=$.stylize(be,"string"))}return be+": "+de}function a($){return Array.isArray($)}function v($){return"boolean"==typeof $}function E($){return null===$}function F($){return"number"==typeof $}function B($){return"string"==typeof $}function N($){return void 0===$}function A($){return k($)&&"[object RegExp]"===P($)}function k($){return"object"==typeof $&&null!==$}function j($){return k($)&&"[object Date]"===P($)}function D($){return k($)&&("[object Error]"===P($)||$ instanceof Error)}function q($){return"function"==typeof $}function P($){return Object.prototype.toString.call($)}function W($){return $<10?"0"+$.toString(10):$.toString(10)}Z.debuglog=function($){if($=$.toUpperCase(),!c[$])if(e.test($)){var ee=Q.pid;c[$]=function(){var J=Z.format.apply(Z,arguments);console.error("%s %d: %s",$,ee,J)}}else c[$]=function(){};return c[$]},Z.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Z.types=G("./support/types"),Z.isArray=a,Z.isBoolean=v,Z.isNull=E,Z.isNullOrUndefined=function($){return null==$},Z.isNumber=F,Z.isString=B,Z.isSymbol=function($){return"symbol"==typeof $},Z.isUndefined=N,Z.isRegExp=A,Z.types.isRegExp=A,Z.isObject=k,Z.isDate=j,Z.types.isDate=j,Z.isError=D,Z.types.isNativeError=D,Z.isFunction=q,Z.isPrimitive=function($){return null===$||"boolean"==typeof $||"number"==typeof $||"string"==typeof $||"symbol"==typeof $||void 0===$},Z.isBuffer=G("./support/isBuffer");var Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ne($,ee){return Object.prototype.hasOwnProperty.call($,ee)}Z.log=function(){var $,ee;console.log("%s - %s",(ee=[W(($=new Date).getHours()),W($.getMinutes()),W($.getSeconds())].join(":"),[$.getDate(),Y[$.getMonth()],ee].join(" ")),Z.format.apply(Z,arguments))},Z.inherits=G("inherits"),Z._extend=function($,ee){if(!ee||!k(ee))return $;for(var J=Object.keys(ee),ie=J.length;ie--;)$[J[ie]]=ee[J[ie]];return $};var ce=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Z.promisify=function($){if("function"!=typeof $)throw new TypeError('The "original" argument must be of type Function');if(ce&&$[ce]){var ee;if("function"!=typeof(ee=$[ce]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ee,ce,{value:ee,enumerable:!1,writable:!1,configurable:!0}),ee}function ee(){for(var J,ie,oe=new Promise(function(de,le){J=de,ie=le}),ye=[],be=0;be<arguments.length;be++)ye.push(arguments[be]);ye.push(function(de,le){de?ie(de):J(le)});try{$.apply(this,ye)}catch(de){ie(de)}return oe}return Object.setPrototypeOf(ee,Object.getPrototypeOf($)),ce&&Object.defineProperty(ee,ce,{value:ee,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ee,s($))},Z.promisify.custom=ce,Z.callbackify=function($){if("function"!=typeof $)throw new TypeError('The "original" argument must be of type Function');function ee(){for(var J=[],ie=0;ie<arguments.length;ie++)J.push(arguments[ie]);var oe=J.pop();if("function"!=typeof oe)throw new TypeError("The last argument must be of type Function");var ye=this,be=function(){return oe.apply(ye,arguments)};$.apply(this,J).then(function(de){Q.nextTick(be.bind(null,null,de))},function(de){Q.nextTick(function(le,Ce){if(!le){var Ie=new Error("Promise was rejected with a falsy value");Ie.reason=le,le=Ie}return Ce(le)}.bind(null,de,be))})}return Object.setPrototypeOf(ee,Object.getPrototypeOf($)),Object.defineProperties(ee,s($)),ee}}).call(this)}).call(this,G("_process"))},{"./support/isBuffer":115,"./support/types":116,_process:59,inherits:22}],118:[function(G,X,Z){(function(Q){(function(){"use strict";var s=G("for-each"),w=G("available-typed-arrays"),c=G("call-bind/callBound"),e=c("Object.prototype.toString"),r=G("has-tostringtag/shams")(),o=typeof globalThis>"u"?Q:globalThis,u=w(),f=c("String.prototype.slice"),l={},m=G("es-abstract/helpers/getOwnPropertyDescriptor"),d=Object.getPrototypeOf;r&&m&&d&&s(u,function(v){if("function"==typeof o[v]){var E=new o[v];if(Symbol.toStringTag in E){var F=d(E),B=m(F,Symbol.toStringTag);if(!B){var N=d(F);B=m(N,Symbol.toStringTag)}l[v]=B.get}}});var a=G("is-typed-array");X.exports=function(v){return!!a(v)&&(r&&Symbol.toStringTag in v?(E=v,F=!1,s(l,function(B,N){if(!F)try{var A=B.call(E);A===N&&(F=A)}catch{}}),F):f(e(v),8,-1));var E,F}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18,"is-typed-array":26}],119:[function(G,X,Z){X.exports=function(){for(var s={},w=0;w<arguments.length;w++){var c=arguments[w];for(var e in c)Q.call(c,e)&&(s[e]=c[e])}return s};var Q=Object.prototype.hasOwnProperty},{}],120:[function(G,X,Z){"use strict";X.exports=function(Q){Q.prototype[Symbol.iterator]=function*(){for(let s=this.head;s;s=s.next)yield s.value}}},{}],121:[function(G,X,Z){"use strict";function Q(r){var o=this;if(o instanceof Q||(o=new Q),o.tail=null,o.head=null,o.length=0,r&&"function"==typeof r.forEach)r.forEach(function(l){o.push(l)});else if(arguments.length>0)for(var u=0,f=arguments.length;u<f;u++)o.push(arguments[u]);return o}function s(r,o,u){var f=o===r.head?new e(u,null,o,r):new e(u,o,o.next,r);return null===f.next&&(r.tail=f),null===f.prev&&(r.head=f),r.length++,f}function w(r,o){r.tail=new e(o,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function c(r,o){r.head=new e(o,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function e(r,o,u,f){if(!(this instanceof e))return new e(r,o,u,f);this.list=f,this.value=r,o?(o.next=this,this.prev=o):this.prev=null,u?(u.prev=this,this.next=u):this.next=null}X.exports=Q,Q.Node=e,Q.create=Q,Q.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var o=r.next,u=r.prev;return o&&(o.prev=u),u&&(u.next=o),r===this.head&&(this.head=o),r===this.tail&&(this.tail=u),r.list.length--,r.next=null,r.prev=null,r.list=null,o},Q.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var o=this.head;r.list=this,r.next=o,o&&(o.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},Q.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var o=this.tail;r.list=this,r.prev=o,o&&(o.next=r),this.tail=r,this.head||(this.head=r),this.length++}},Q.prototype.push=function(){for(var r=0,o=arguments.length;r<o;r++)w(this,arguments[r]);return this.length},Q.prototype.unshift=function(){for(var r=0,o=arguments.length;r<o;r++)c(this,arguments[r]);return this.length},Q.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},Q.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},Q.prototype.forEach=function(r,o){o=o||this;for(var u=this.head,f=0;null!==u;f++)r.call(o,u.value,f,this),u=u.next},Q.prototype.forEachReverse=function(r,o){o=o||this;for(var u=this.tail,f=this.length-1;null!==u;f--)r.call(o,u.value,f,this),u=u.prev},Q.prototype.get=function(r){for(var o=0,u=this.head;null!==u&&o<r;o++)u=u.next;if(o===r&&null!==u)return u.value},Q.prototype.getReverse=function(r){for(var o=0,u=this.tail;null!==u&&o<r;o++)u=u.prev;if(o===r&&null!==u)return u.value},Q.prototype.map=function(r,o){o=o||this;for(var u=new Q,f=this.head;null!==f;)u.push(r.call(o,f.value,this)),f=f.next;return u},Q.prototype.mapReverse=function(r,o){o=o||this;for(var u=new Q,f=this.tail;null!==f;)u.push(r.call(o,f.value,this)),f=f.prev;return u},Q.prototype.reduce=function(r,o){var u,f=this.head;if(arguments.length>1)u=o;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");f=this.head.next,u=this.head.value}for(var l=0;null!==f;l++)u=r(u,f.value,l),f=f.next;return u},Q.prototype.reduceReverse=function(r,o){var u,f=this.tail;if(arguments.length>1)u=o;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");f=this.tail.prev,u=this.tail.value}for(var l=this.length-1;null!==f;l--)u=r(u,f.value,l),f=f.prev;return u},Q.prototype.toArray=function(){for(var r=new Array(this.length),o=0,u=this.head;null!==u;o++)r[o]=u.value,u=u.next;return r},Q.prototype.toArrayReverse=function(){for(var r=new Array(this.length),o=0,u=this.tail;null!==u;o++)r[o]=u.value,u=u.prev;return r},Q.prototype.slice=function(r,o){(o=o||this.length)<0&&(o+=this.length),(r=r||0)<0&&(r+=this.length);var u=new Q;if(o<r||o<0)return u;r<0&&(r=0),o>this.length&&(o=this.length);for(var f=0,l=this.head;null!==l&&f<r;f++)l=l.next;for(;null!==l&&f<o;f++,l=l.next)u.push(l.value);return u},Q.prototype.sliceReverse=function(r,o){(o=o||this.length)<0&&(o+=this.length),(r=r||0)<0&&(r+=this.length);var u=new Q;if(o<r||o<0)return u;r<0&&(r=0),o>this.length&&(o=this.length);for(var f=this.length,l=this.tail;null!==l&&f>o;f--)l=l.prev;for(;null!==l&&f>r;f--,l=l.prev)u.push(l.value);return u},Q.prototype.splice=function(r,o,...u){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var f=0,l=this.head;null!==l&&f<r;f++)l=l.next;var m=[];for(f=0;l&&f<o;f++)m.push(l.value),l=this.removeNode(l);for(null===l&&(l=this.tail),l!==this.head&&l!==this.tail&&(l=l.prev),f=0;f<u.length;f++)l=s(this,l,u[f]);return m},Q.prototype.reverse=function(){for(var r=this.head,o=this.tail,u=r;null!==u;u=u.prev){var f=u.prev;u.prev=u.next,u.next=f}return this.head=o,this.tail=r,this};try{G("./iterator.js")(Q)}catch{}},{"./iterator.js":120}],122:[function(G,X,Z){var Q=G("./parser"),s=G("./utils"),w=s;function c(r,o){this.name="NonSupportedSparqlFeatureError",this.feature=r,this.message=o||"SPARQL feature "+r+" non supported"}function e(r){this.name=ParserError,this.message=r||"Error parsing SPARQL query"}c.prototype=new Error,c.constructor=c,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(r){return Q.parse(r)},AbstractQueryTree.prototype.parseExecutableUnit=function(r){if("select"===r.kind)return this.parseSelect(r);if("ask"===r.kind)return this.parseSelect(r);if("modify"===r.kind)return this.parseSelect(r);if("construct"===r.kind)return this.parseSelect(r);if("insertdata"===r.kind)return this.parseInsertData(r);if("deletedata"===r.kind)return this.parseInsertData(r);if("load"===r.kind||"clear"===r.kind||"drop"===r.kind||"create"===r.kind)return r;throw new Error("unknown executable unit: "+r.kind)},AbstractQueryTree.prototype.parseSelect=function(r){return null==r?(console.log("error parsing query"),null):(r.pattern=this.build(r.pattern,{freshCounter:0}),r)},AbstractQueryTree.prototype.parseInsertData=function(r){return r??(console.log("error parsing query"),null)},AbstractQueryTree.prototype.build=function(r,o){if("groupgraphpattern"===r.token)return this._buildGroupGraphPattern(r,o);if("basicgraphpattern"===r.token){var u={kind:"BGP",value:r.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(u,o)}if("graphunionpattern"===r.token)return{kind:"UNION",value:[this.build(r.value[0],o),this.build(r.value[1],o)]};if("graphgraphpattern"===r.token)return{kind:"GRAPH",value:this.build(r.value,o),graph:r.graph};throw null!=r.token?new c(r.token,"Non implemented SPARQL graph pattern: '"+r.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(r)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(r,o){for(var u,f,l,m=[],d=0;d<r.value.length;d++)if(r.value[d].predicate&&"path"===r.value[d].predicate.token){u=r.value[d],f=r.value.slice(d+1);var a=AbstractQueryTree.translatePathExpression(u,o),v=null;if("BGP"!==a.kind){if("ZERO_OR_MORE_PATH"===a.kind||"ONE_OR_MORE_PATH"===a.kind){if(l=m.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:m},rvalue:a}:a,"ZERO_OR_MORE_PATH"===a.kind)if("var"===a.y.token&&0===a.y.value.indexOf("fresh:")&&"var"===a.x.token&&0===a.x.value.indexOf("fresh:"))for(var E=0;E<r.value.length;E++)r.value[E].object&&"var"===r.value[E].object.token&&r.value[E].object.value===a.x.value&&((v=w.clone(r.value[E],!0)).object=a.y);else if("var"===a.y.token&&0===a.y.value.indexOf("fresh:"))for(E=0;E<r.value.length;E++)r.value[E].subject&&"var"===r.value[E].subject.token&&r.value[E].subject.value===a.y.value&&((v=w.clone(r.value[E],!0)).subject=a.x);if(f.length>0){var F=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:f},o);return null!=v?{kind:"UNION",value:[{kind:"JOIN",lvalue:l,rvalue:F},{kind:"BGP",value:m.concat([v]).concat(f)}]}:{kind:"JOIN",lvalue:l,rvalue:F}}return l}return a}m=m.concat(a.value)}else m.push(r.value[d]);return r.value=m,r},AbstractQueryTree.translatePathExpression=function(r,o){if("element"===r.predicate.kind)return"+"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,o),x:r.subject,y:r.object}):"*"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,o),x:r.subject,y:r.object}):(r.predicate=r.predicate.value,{kind:"BGP",value:[r]});if("sequence"===r.predicate.kind){for(var u,f,l=r.subject,m=r.object,d=r.graph,a=[],v=0;v<r.predicate.value.length;v++)v!=r.predicate.value.length-1?(u={token:"var",value:"fresh:"+o.freshCounter},o.freshCounter++):u=m,f={subject:l,predicate:r.predicate.value[v],object:u},null!=d&&(f.graph=w.clone(d,!0)),a.push(f),v!=r.predicate.value.length-1&&(l=w.clone(u,!0));var E={kind:"BGP",value:a};return AbstractQueryTree.translatePathExpressionsInBGP(E,o)}throw new c("Non supported path expression "+r.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(r,o){for(var u=r.filters||[],f=r.binds||[],l={kind:"EMPTY_PATTERN"},m=0;m<r.patterns.length;m++){var d=r.patterns[m];if("optionalgraphpattern"===d.token)l="FILTER"===(a=this.build(d.value,o)).kind?{kind:"LEFT_JOIN",lvalue:l,rvalue:a.value,filter:a.filter}:{kind:"LEFT_JOIN",lvalue:l,rvalue:a,filter:!0};else{var a=this.build(d,o);l="EMPTY_PATTERN"==l.kind?a:{kind:"JOIN",lvalue:l,rvalue:a}}}if(l.binds=f,0!=u.length){if("EMPTY_PATTERN"===l.kind)return{kind:"FILTER",filter:u,value:l};if("LEFT_JOIN"===l.kind&&!0===l.filter)return{kind:"FILTER",filter:u,value:l};if("LEFT_JOIN"===l.kind)return{kind:"FILTER",filter:u,value:l};if("JOIN"===l.kind)return{kind:"FILTER",filter:u,value:l};if("UNION"===l.kind)return{kind:"FILTER",filter:u,value:l};if("GRAPH"===l.kind)return{kind:"FILTER",filter:u,value:l};if("BGP"===l.kind)return{kind:"FILTER",filter:u,value:l};throw new Error("Unknow kind of algebra expression: "+l.kind)}return l},AbstractQueryTree.prototype.collectBasicTriples=function(r,o){if(null==o&&(o=[]),"select"===r.kind)o=this.collectBasicTriples(r.pattern,o);else if("BGP"===r.kind)o=o.concat(r.value);else if("ZERO_OR_MORE_PATH"===r.kind)o=this.collectBasicTriples(r.path);else if("UNION"===r.kind)o=this.collectBasicTriples(r.value[0],o),o=this.collectBasicTriples(r.value[1],o);else if("GRAPH"===r.kind)o=this.collectBasicTriples(r.value,o);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)o=this.collectBasicTriples(r.lvalue,o),o=this.collectBasicTriples(r.rvalue,o);else if("FILTER"===r.kind)o=this.collectBasicTriples(r.value,o);else if("construct"===r.kind)o=this.collectBasicTriples(r.pattern,o);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return o},AbstractQueryTree.prototype.bind=function(r,o){if(null!=r.graph&&r.graph.token&&"var"===r.graph.token&&null!=o[r.graph.value]&&(r.graph=o[r.graph.value]),null!=r.filter){for(var u=[],f=0;f<r.filter.length;f++)r.filter[f].value=this._bindFilter(r.filter[f].value,o),u.push(r.filter[f]);r.filter=u}if("select"===r.kind)r.pattern=this.bind(r.pattern,o);else if("BGP"===r.kind)r.value=this._bindTripleContext(r.value,o);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._bindTripleContext(r.path,o),r.x&&"var"===r.x.token&&null!=o[r.x.value]&&(r.x=o[r.x.value]),r.y&&"var"===r.y.token&&null!=o[r.y.value]&&(r.y=o[r.y.value]);else if("UNION"===r.kind)r.value[0]=this.bind(r.value[0],o),r.value[1]=this.bind(r.value[1],o);else if("GRAPH"===r.kind)r.value=this.bind(r.value,o);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.bind(r.lvalue,o),r.rvalue=this.bind(r.rvalue,o);else if("FILTER"===r.kind){var l=this;r.value=this.bind(r.value,o),r.filter=r.filter.map(function(m){return{token:"filter",value:l._bindFilter(m.value,o)}})}else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._bindTripleContext=function(r,o){for(var u=0;u<r.length;u++)for(var f in delete r[u].graph,delete r[u].variables,r[u]){var l=r[u][f];"var"===l.token&&null!=o[l.value]&&(r[u][f]=o[l.value])}return r},AbstractQueryTree.prototype._bindFilter=function(r,o){if(null!=r.expressionType){var u=r.expressionType;if("relationalexpression"==u)r.op1=this._bindFilter(r.op1,o),r.op2=this._bindFilter(r.op2,o);else if("conditionalor"==u||"conditionaland"==u)for(var f=0;f<r.operands.length;f++)r.operands[f]=this._bindFilter(r.operands[f],o);else if("additiveexpression"==u)for(r.summand=this._bindFilter(r.summand,o),f=0;f<r.summands.length;f++)r.summands[f].expression=this._bindFilter(r.summands[f].expression,o);else if("builtincall"==u)for(f=0;f<r.args.length;f++)r.args[f]=this._bindFilter(r.args[f],o);else if("multiplicativeexpression"==u)for(r.factor=this._bindFilter(r.factor,o),f=0;f<r.factors.length;f++)r.factors[f].expression=this._bindFilter(r.factors[f].expression,o);else if("unaryexpression"==u)r.expression=this._bindFilter(r.expression,o);else if("irireforfunction"==u)for(f=0;f<r.factors.args;f++)r.args[f]=this._bindFilter(r.args[f],o);else if("atomic"==u&&"var"==r.primaryexpression&&null!=o[r.value.value]){var l=o[r.value.value];"uri"===l.token?r.primaryexpression="iri":r.primaryexpression="literal",r.value=l}}return r},AbstractQueryTree.prototype.replace=function(r,o,u,f){if(null!=r.graph&&r.graph.token&&r.graph.token===o.token&&r.graph.value==o.value&&(r.graph=w.clone(u,!0)),null!=r.filter){for(var l=[],m=0;m<r.filter.length;m++)r.filter[m].value=this._replaceFilter(r.filter[m].value,o,u,f),l.push(r.filter[m]);r.filter=l}if("select"===r.kind)r.pattern=this.replace(r.pattern,o,u,f);else if("BGP"===r.kind)r.value=this._replaceTripleContext(r.value,o,u,f);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._replaceTripleContext(r.path,o,u,f),r.x&&r.x.token===o.token&&r.value===o.value&&(r.x=w.clone(u,!0)),r.y&&r.y.token===o.token&&r.value===o.value&&(r.y=w.clone(u,!0));else if("UNION"===r.kind)r.value[0]=this.replace(r.value[0],o,u,f),r.value[1]=this.replace(r.value[1],o,u,f);else if("GRAPH"===r.kind)r.value=this.replace(r.value,o,u);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.replace(r.lvalue,o,u,f),r.rvalue=this.replace(r.rvalue,o,u,f);else if("FILTER"===r.kind)r.value=this._replaceFilter(r.value,o,u,f);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._replaceTripleContext=function(r,o,u,f){for(var l=0;l<r.length;l++)for(var m in r[l]){var d=r[l][m];"var"===d.token&&"var"===o.token&&d.value===o.value||"blank"===d.token&&"blank"===o.token&&d.value===o.value?r[l][m]=u:"literal"!==d.token&&"uri"!==d.token||"literal"!==o.token&&"uri"!==o.token||d.token!==o.token||s.lexicalFormTerm(d,f)[d.token]!==s.lexicalFormTerm(o,f)[d.token]||(r[l][m]=u)}return r},AbstractQueryTree.prototype._replaceFilter=function(r,o,u,f){if(null!=r.expressionType){var l=r.expressionType;if("relationalexpression"==l)r.op1=this._replaceFilter(r.op1,o,u,f),r.op2=this._replaceFilter(r.op2,o,u,f);else if("conditionalor"==l||"conditionaland"==l)for(var m=0;m<r.operands.length;m++)r.operands[m]=this._replaceFilter(r.operands[m],o,u,f);else if("additiveexpression"==l)for(r.summand=this._replaceFilter(r.summand,o,u,f),m=0;m<r.summands.length;m++)r.summands[m].expression=this._replaceFilter(r.summands[m].expression,o,u,f);else if("builtincall"==l)for(m=0;m<r.args.length;m++)r.args[m]=this._replaceFilter(r.args[m],o,u,f);else if("multiplicativeexpression"==l)for(r.factor=this._replaceFilter(r.factor,o,u,f),m=0;m<r.factors.length;m++)r.factors[m].expression=this._replaceFilter(r.factors[m].expression,o,u,f);else if("unaryexpression"==l)r.expression=this._replaceFilter(r.expression,o,u,f);else if("irireforfunction"==l)for(m=0;m<r.factors.args;m++)r.args[m]=this._replaceFilter(r.args[m],o,u,f);else if("atomic"==l){var d=null;(r.primaryexpression==o.token&&r.value==o.value||"iri"==r.primaryexpression&&"uri"==o.token&&r.value==o.value)&&(d=u.value),null!=d&&("uri"===u.token?r.primaryexpression="iri":r.primaryexpression=u.token,r.value=d)}}return r},AbstractQueryTree.prototype.treeWithUnion=function(r){if(null==r||null==r.kind)return!1;if("select"===r.kind)return this.treeWithUnion(r.pattern);if("BGP"===r.kind)return this.treeWithUnion(r.value);if("ZERO_OR_MORE_PATH"===r.kind)return!1;if("UNION"===r.kind){if(null==r.value[0].value||null==r.value[0].value.variables||null==r.value[1].value||null==r.value[1].value.variables)return!0;if(r.value[0].variables.join("/")===r.values[1].variables.join("/"))return!!this.treeWithUnion(r.value[0])||this.treeWithUnion(r.value[1])}else{if("GRAPH"===r.kind)return!1;if("LEFT_JOIN"!==r.kind&&"JOIN"!==r.kind)return"FILTER"!==r.kind&&(r.kind,!1);if(this.treeWithUnion(r.lvalue))return!0;this.treeWithUnion(r.rvalue)}},X.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:c,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(G,X,Z){"use strict";var Q=G("./utils"),s=Q,w=Q.nextTick,c=function(r,o){if(0!=arguments.length){this.order=r,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var u=this;this._diskWrite(this.root,function(f){u.root=f,u._updateRootNode(u.root,function(l){u.comparator=function(m,d){return m<d?-1:m>d?1:0},u.merger=null,o?.(u)})})}};c.prototype._allocateNode=function(){return new e},c.prototype._diskWrite=function(r,o){w(function(){o(r)})},c.prototype._diskRead=function(r,o){w(function(){o(r)})},c.prototype._diskDelete=function(r,o){w(function(){o()})},c.prototype._updateRootNode=function(r,o){o(r)},c.prototype.search=function(r,o,u){var f=this.root;this.__search(this,r,f,o,u)},c.prototype.__search=function(r,o,u,f,l){for(var m=0;m<u.numberActives&&1===r.comparator(o,u.keys[m].key);)m++;m<u.numberActives&&0===r.comparator(u.keys[m].key,o)?f(null!=l&&1==l||u.keys[m].data):!0===u.isLeaf?f(null):r._diskRead(u.children[m],function(d){r.__search(r,o,d,f,l)})},c.prototype.walk=function(r,o){this.__walk(this,this.root,r,o)},c.prototype.__walk=function(r,o,u,f){var l=o.numberActives,m=0;if(o.isLeaf){for(m=0;m<o.numberActives;m++)u(o.keys[m]);return f()}s.whilst(function(){return m<l},function(d){r._diskRead(o.children[m],function(a){r.__walk(r,a,u,function(){r._diskRead(o.keys[m],function(v){u(v),m++,d()})})})},function(){r._diskRead(o.children[l],function(d){r.__walk(r,d,u,function(){f()})})})},c.prototype.walkNodes=function(r){this.__walkNodes(this,root,r,function(){})},c.prototype.__walkNodes=function(r,o,u,f){if(o.isLeaf)return u(o),f();u(o);var l=o.numberActives,m=0;s.whilst(function(){return m<l},function(d){r._diskRead(o.children[m],function(a){r.__walkNodes(r,a,u,function(){m++,d()})})},function(){r._diskRead(o.children[l],function(d){r.__walkNodes(r,d,u,function(){})})})},c.prototype._splitChild=function(r,o,u,f){var l=this._allocateNode();l.isLeaf=u.isLeaf,l.level=u.level,l.numberActives=this.order-1;var m=u.keys[this.order-1];u.keys[this.order-1]=null;for(var d=0;d<this.order-1;d++)l.keys[d]=u.keys[d+this.order],u.keys[d+this.order]=null,u.isLeaf||(l.children[d]=u.children[d+this.order],u.children[d+this.order]=null);for(u.isLeaf||(l.children[d]=u.children[d+this.order],u.children[d+this.order]=null),u.numberActives=this.order-1,d=r.numberActives+1;d>o+1;d--)r.children[d]=r.children[d-1];for(r.children[o+1]=l,d=r.numberActives;d>o;d--)r.keys[d]=r.keys[d-1];r.keys[o]=m,r.numberActives++;var a=this;this._diskWrite(l,function(v){a._diskWrite(r,function(E){E.children[o+1]=v,a._diskWrite(u,function(F){return f(E)})})})},c.prototype.insert=function(r,o,u){if(this.root.numberActives===2*this.order-1){var f=this._allocateNode();f.isLeaf=!1,f.level=this.root.level+1,f.numberActives=0,f.children[0]=this.root;var l=this;this._splitChild(f,0,this.root,function(m){f=m,l.root=f,l._updateRootNode(f,function(d){l._insertNonFull(d,r,o,u)})})}else this._insertNonFull(this.root,r,o,u)},c.prototype._insertNonFull=function(r,o,u,f){var l=r.numberActives-1;this.__insertNonFull(this,r,l,o,u,f)},c.prototype.__insertNonFull=function(r,o,u,f,l,m){if(o.isLeaf){for(;u>=0&&-1===r.comparator(f,o.keys[u].key);)o.keys[u+1]=o.keys[u],u--;u>=0&&0===r.comparator(f,o.keys[u].key)?o.keys[u]={key:f,data:l}:(o.keys[u+1]={key:f,data:l},o.numberActives++),r._diskWrite(o,function(a){return m(a)})}else{for(;u>=0&&-1===r.comparator(f,o.keys[u].key);)u--;u++;var d=r;r._diskRead(o.children[u],function(a){a.numberActives===2*d.order-1?d._splitChild(o,u,a,function(){1===d.comparator(f,o.keys[u].key)&&u++,d._diskRead(o.children[u],function(v){u=v.numberActives-1,d.__insertNonFull(r,v,u,f,l,m)})}):d._diskRead(o.children[u],function(v){u=v.numberActives-1,d.__insertNonFull(r,v,u,f,l,m)})})}},c.prototype.delete=function(r,o){var u=this.root;c.prototype.__deleteSearchNode(this,r,u,o)},c.prototype.__deleteSearchNode=function(r,o,u,f){var l=0;if(0===u.numberActives)return f(!1);for(;l<u.numberActives&&1===r.comparator(o,u.keys[l].key);)l++;var m=l;if(l<u.numberActives&&0===r.comparator(o,u.keys[l].key))return r.__deleteNodeFound(r,m,o,u,f);if(!0===u.isLeaf)return f(!1);var d=u;r._diskRead(u.children[l],function(a){if(null===a)return f(!1);var v=!1,E=!1,F=null,B=null;m===d.numberActives?(E=!0,B=d.children[m-1],F=d.children[m-1]):0===m?(v=!0,F=d.children[1],B=d.children[1]):(B=d.children[m-1],F=d.children[m+1]),r._diskRead(B,function(N){r._diskRead(F,function(A){!0===E&&(A=null),!0===v&&(N=null),a.numberActives===r.order-1&&null!=d?null!=A&&A.numberActives>r.order-1?r._moveKey(d,l,-1,function(k){r.__deleteSearchNode(r,o,a,f)}):null!=N&&N.numberActives>r.order-1?r._moveKey(d,l,1,function(k){r.__deleteSearchNode(r,o,a,f)}):null!=N&&N.numberActives===r.order-1?r._mergeSiblings(d,l,-1,function(k){r.__deleteSearchNode(r,o,k,f)}):null!=A&&A.numberActives===r.order-1&&r._mergeSiblings(d,l,1,function(k){r.__deleteSearchNode(r,o,k,f)}):r.__deleteSearchNode(r,o,a,f)})})})},c.prototype.__deleteNodeFound=function(r,o,u,f,l){return f.isLeaf&&f.numberActives>r.order-1||f.isLeaf&&f===r.root?(r._deleteKeyFromNode(f,o,function(){l(!0)}),!0):(!1===f.isLeaf&&r._diskRead(f.children[o],function(m){m.numberActives>r.order-1?r._getMaxKeyPos(r,m,function(d){u=d.node.keys[d.index],f.keys[o]=u,r._diskWrite(f,function(a){a=m,u=u.key,r.__deleteSearchNode(r,u,a,l)})}):r._diskRead(f.children[o+1],function(d){d.numberActives>r.order-1?r._getMinKeyPos(r,d,function(a){u=a.node.keys[a.index],f.keys[o]=u,r._diskWrite(f,function(v){v=d,u=u.key,r.__deleteSearchNode(r,u,v,l)})}):m.numberActives===r.order-1&&d.numberActives===r.order-1&&r._mergeNodes(m,f.keys[o],d,function(a){f.children[o]=a;for(var v=++o;v<f.numberActives;v++)f.children[v]=f.children[v+1],f.keys[v-1]=f.keys[v];f.children[v]=null,f.keys[v-1]=null,f.numberActives--,0===f.numberActives&&r.root===f&&(r.root=a),r._diskWrite(f,function(E){r.__deleteSearchNode(r,u,a,l)})})})}),void(f.isLeaf&&f.numberActives>r.order-1&&r._deleteKeyFromNode(f,o,function(m){r.__deleteSearchNode(r,u,m,l)})))},c.prototype._moveKey=function(r,o,u,f){1===u&&o--;var l=this;l._diskRead(r.children[o],function(m){l._diskRead(r.children[o+1],function(d){if(-1==u){m.keys[m.numberActives]=r.keys[o],m.children[m.numberActives+1]=d.children[0],d.children[0]=null,m.numberActives++,r.keys[o]=d.keys[0];for(var a=1;a<d.numberActives;a++)d.keys[a-1]=d.keys[a],d.children[a-1]=d.children[a];d.children[d.numberActives-1]=d.children[d.numberActives],d.numberActives--}else{for(d.children[d.numberActives+1]=d.children[d.numberActives],a=d.numberActives;a>0;a--)d.children[a]=d.children[a-1],d.keys[a]=d.keys[a-1];d.keys[0]=null,d.children[0]=null,d.children[0]=m.children[m.numberActives],d.keys[0]=r.keys[o],d.numberActives++,m.children[m.numberActives]=null,r.keys[o]=m.keys[m.numberActives-1],m.keys[m.numberActives-1]=null,m.numberActives--}l._diskWrite(m,function(v){l._diskWrite(d,function(E){l._diskWrite(r,function(F){return f(F)})})})})})},c.prototype._mergeSiblings=function(r,o,u,f){var l,m,d,a;o===r.numberActives?(o--,d=r.children[r.numberActives-1],a=r.children[r.numberActives]):(d=r.children[o],a=r.children[o+1]);var v=this;v._diskRead(d,function(E){v._diskRead(a,function(F){var B=v._allocateNode();for(B.isLeaf=E.isLeaf,B.level=E.level,m=0;m<v.order-1;m++)B.keys[m]=E.keys[m],B.children[m]=E.children[m];for(B.keys[v.order-1]=r.keys[o],B.children[v.order-1]=E.children[v.order-1],m=0;m<v.order-1;m++)B.keys[m+v.order]=F.keys[m],B.children[m+v.order]=F.children[m];for(B.children[2*v.order-1]=F.children[v.order-1],r.children[o]=B,m=o;m<r.numberActives;m++)r.keys[m]=r.keys[m+1],r.children[m+1]=r.children[m+2];for(B.numberActives=E.numberActives+F.numberActives+1,r.numberActives--,l=r.numberActives;l<2*v.order-1;l++)r.keys[l]=null;0===r.numberActives&&v.root===r&&(v.root=B,B.level?B.isLeaf=!1:B.isLeaf=!0),v._diskWrite(B,function(N){v._diskWrite(r,function(A){v._diskDelete(E,function(){v._diskDelete(F,function(){if(v.root!==N)return f(N);v._updateRootNode(v.root,function(){return f(N)})})})})})})})},c.prototype._deleteKeyFromNode=function(r,o,u){var f,l=2*this.order-1;if(r.numberActives<l&&(l=r.numberActives),!1===r.isLeaf)return!1;for(r.keys[o],f=o;f<l-1;f++)r.keys[f]=r.keys[f+1];r.keys.pop(),r.numberActives--,this._diskWrite(r,function(m){return u(m)})},c.prototype._mergeNodes=function(r,o,u,f){var l,m;for((l=this._allocateNode()).isLeaf=!0,m=0;m<r.numberActives;m++)l.keys[m]=r.keys[m],l.children[m]=r.children[m];for(l.children[r.numberActives]=r.children[r.numberActives],l.keys[r.numberActives]=o,m=0;m<u.numberActives;m++)l.keys[m+r.numberActives+1]=u.keys[m],l.children[m+r.numberActives+1]=u.children[m];l.children[2*this.order-1]=u.children[u.numberActives],l.numberActives=r.numberActives+u.numberActives+1,l.isLeaf=r.isLeaf,l.level=r.level;var d=this;this._diskWrite(l,function(a){d._diskDelete(r,function(){d._diskDelete(u,function(){return f(a)})})})},c.prototype.audit=function(r){var o=[],u=[],f=this,l=function(d){for(var a=0;a<u.length;a++)if(0===f.comparator(u[a],d)){var v=" !!! duplicated key "+d;!0===r&&console.log(v),o.push(v)}},m=null;return f=this,this.walkNodes(function(d){!0===r&&(console.log("--- Node at "+d.level+" level"),console.log(" - leaf? "+d.isLeaf),console.log(" - num actives? "+d.numberActives),console.log(" - keys: "));for(var a=d.numberActives;a<d.keys.length;a++)null!=d.keys[a]&&!0===r&&(console.log(" * warning : redundant key data"),o.push(" * warning : redundant key data"));for(a=d.numberActives+1;a<d.children.length;a++)null!=d.children[a]&&!0===r&&(console.log(" * warning : redundant children data"),o.push(" * warning : redundant key data"));if(!1===d.isLeaf)for(a=0;a<d.numberActives;a++){var v=this._diskRead(d.children[a]).keys[this._diskRead(d.children[a]).numberActives-1].key,E=this._diskRead(d.children[a+1]).keys[0].key;if(!0===r&&console.log("   "+d.keys[a].key+"("+v+","+E+")"),-1===f.comparator(d.keys[a].key,v)){var F=" !!! value max left "+v+" > key "+d.keys[a].key;!0===r&&console.log(F),o.push(F)}1===f.comparator(d.keys[a].key,E)&&(F=" !!! value min right "+E+" < key "+d.keys[a].key,!0===r&&console.log(F),o.push(F)),l(d.keys[a].key),u.push(d.keys[a].key)}else for(null===m?m=d.level:m!=d.level&&(F=" !!! Leaf node with wrong level value",!0===r&&console.log(F),o.push(F)),a=0;a<d.numberActives;a++)!0===r&&console.log(" "+d.keys[a].key),l(d.keys[a].key),u.push(d.keys[a].key);d!=f.root&&(d.numberActives>2*f.order-1&&(!0===r&&(F=" !!!! MAX num keys restriction violated "),console.log(F),o.push(F)),d.numberActives<f.order-1&&(!0===r&&(F=" !!!! MIN num keys restriction violated "),console.log(F),o.push(F)))}),o},c.prototype._getMaxKeyPos=function(r,o,u){var f={};return null===o?u(null):!0===o.isLeaf?(f.node=o,f.index=o.numberActives-1,u(f)):(f.node=o,f.index=o.numberActives-1,void r._diskRead(o.children[o.numberActives],function(l){return r._getMaxKeyPos(r,l,u)}))},c.prototype._getMinKeyPos=function(r,o,u){var f={};if(null===o&&u(null),!0===o.isLeaf)return f.node=o,f.index=0,u(f);f.node=o,f.index=0,r._diskRead(o.children[0],function(l){return r._getMinKeyPos(r,l,u)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};X.exports={Tree:c,Node:e}},{"./utils":140}],124:[function(G,X,Z){var Q=G("./utils"),s=G("./utils"),w=(G("./quad_index").QuadIndex,G("./quad_index").Pattern),c=G("./rdf_model"),e=G("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var r=0;r<this.indices.length;r++){var o=this.indices[r];this.indexMap[o]={},this.queriesIndexMap[o]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(r,o){this.updateInProgress[r].push(o)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(r){if(!0!==this.ongoingModification){var o=this;if(null!=this.updateInProgress){var u=o.updateInProgress;o.updateInProgress=null,this.sendNotification(Callbacks.deleted,u[Callbacks.deleted],function(){o.sendNotification(Callbacks.added,u[Callbacks.added],function(){o.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){o.dispatchQueries(function(){r(!0)})})})})}else r(!0)}else r(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(r,o,u){for(var f={},l=0;l<o.length;l++){var m=o[l];for(var d in this.indexMap){var a=this.indexMap[d],v=this.componentOrders[d];this._searchCallbacksInIndex(a,v,r,m,f),0!=this.pendingQueries.length&&(a=this.queriesIndexMap[d],this._searchQueriesInIndex(a,v,m))}}this.dispatchNotifications(f),u?.(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(r,o,u){for(var f=this.emptyNotificationsMap[r]||[],l=0;l<f.length;l++)f[l](r,o);u()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(r){for(var o in r){var u=this.callbacksMap[o],f=r[o][Callbacks.deleted];if(null!=f)try{u(Callbacks.deleted,f)}catch{}for(var l in r[o])if(l!=Callbacks.deleted)try{u(l,r[o][l])}catch{}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(r,o,u,f,l){for(var m=f[1],d=(f=f[0],0);d<o.length+1;d++){for(var a=r._||[],v=[],E=0;E<a.length;E++){var F=a[E];null!=this.callbacksMap[F]&&(l[F]=l[F]||{},l[F][u]=l[F][u]||[],l[F][u].push(f),v.push(F))}r._=v;var B=o[d];if(null==r[""+m[B]])break;r=r[""+m[B]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(r,o){var u=this.emptyNotificationsMap[r]||[];u.push(o),this.emptyNotificationsMap[r]=u},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(r,o){var u=this.emptyNotificationsMap[r];null!=u&&(u=Q.reject(u,function(f){return f===o})),this.emptyNotificationsMap[r]=u},Callbacks.CallbacksBackend.prototype.subscribe=function(r,o,u,f,l,m){var d=this._tokenizeComponents(r,o,u,f),a={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,a);var v=this;this.engine.normalizeQuad(d,a,!0,function(E){for(var F=new w(E),B=v._indexForPattern(F),N=v.componentOrders[B],A=v.indexMap[B],k=0;k<N.length;k++){var j=E[N[k]];if("_"===j){null==A._&&(A._=[]),v.callbackCounter++,A._.push(v.callbackCounter),v.callbacksMap[v.callbackCounter]=l,v.callbacksInverseMap[l]=v.callbackCounter;break}k===N.length-1?(A[j]=A[j]||{_:[]},v.callbackCounter++,A[j]._.push(v.callbackCounter),v.callbacksMap[v.callbackCounter]=l,v.callbacksInverseMap[l]=v.callbackCounter):(A[j]=A[j]||{},A=A[j])}m?.(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(r){var o=this.callbacksInverseMap[r];null!=o&&(delete this.callbacksInverseMap[r],delete this.callbacksMap[o])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(r,o,u,f){var l={};return null==r?l.subject=Callbacks.ANYTHING:0==r.indexOf("_:")?l.subject={token:"blank",value:r}:l.subject={token:"uri",value:r},l.predicate=null==o?Callbacks.ANYTHING:{token:"uri",value:o},l.object=null==u?Callbacks.ANYTHING:{token:"uri",value:u},l.graph=null==f?Callbacks.ANYTHING:{token:"uri",value:f},l},Callbacks.CallbacksBackend.prototype._indexForPattern=function(r){for(var o=r.indexKey,u=this.indices,f=0;f<u.length;f++)for(var l=u[f],m=this.componentOrders[l],d=0;d<m.length&&!1!==Q.include(o,m[d]);d++)if(d==o.length-1)return l;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var r,o,u,f;4===arguments.length?(r=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3]):(r=arguments[0],o=this.engine.lexicon.defaultGraphUri,u=arguments[1],f=arguments[2]);var l="CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+o+"> { <"+r+"> ?p ?o } }",m=this,d={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,d);var a=[];this.engine.execute(l,function(v,E){if(v)f&&f(!1);else{var F=E,B=!1,N=function(A,k){if("eventsFlushed"===A&&B){B=!1;try{u(F)}catch{}}else if("eventsFlushed"!==A){B=!0;for(var j=0;j<k.length;j++){var D=k[j],q=c.buildRDFResource(D.subject,a,m.engine,d),P=c.buildRDFResource(D.predicate,a,m.engine,d),W=c.buildRDFResource(D.object,a,m.engine,d);null!=q&&null!=P&&null!=W&&(D=new c.Triple(q,P,W),A===Callbacks.added?F.add(D):A===Callbacks.deleted&&F.remove(D))}}};m.observersMap[u]=N,m.subscribeEmpty(Callbacks.eventsFlushed,N),m.subscribe(r,null,null,null,N,function(){try{u(F)}catch{}f&&f(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(r){var o=this.observersMap[r];return!!o&&(this.unsubscribe(o),this.unsubscribeEmpty(Callbacks.eventsFlushed,o),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(r,o,u){var f=this.aqt.parseQueryString(r),l=this.aqt.parseSelect(f.units[0]),m=this.aqt.collectBasicTriples(l),d=this,a={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,a);var v=this.queryCounter;this.queryCounter++,this.queriesMap[v]=r,this.queriesInverseMap[r]=v,this.queriesList.push(v),this.queriesCallbacksMap[v]=o,s.eachSeries(m,function(E,F){null==E.graph&&(E.graph=d.engine.lexicon.defaultGraphUriTerm),d.engine.normalizeQuad(E,a,!0,function(B){for(var N=new w(B),A=d._indexForPattern(N),k=d.componentOrders[A],j=d.queriesIndexMap[A],D=0;D<k.length;D++){var q=B[k[D]];if("string"==typeof q){null==j._&&(j._=[]),j._.push(v);break}D===k.length-1?(j[q]=j[q]||{_:[]},j[q]._.push(v)):(j[q]=j[q]||{},j=j[q])}F()})},function(){d.engine.execute(r,function(E,F){E?console.log("ERROR in query callback "+F):o(F)}),u?.()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(r){var o=this.queriesInverseMap[r];null!=o&&(delete this.queriesInverseMap[r],delete this.queriesMap[o],this.queriesList=Q.reject(this.queriesList,function(u){return u===o}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(r,o,u){for(var f=u[1],l=(u=u[0],0);l<o.length+1;l++){for(var m=r._||[],d=[],a=0;a<m.length;a++){var v=m[a];Q.include(this.pendingQueries,v)&&(Q.remove(this.pendingQueries,function(F){return F===v}),this.matchedQueries.push(v)),null!=this.queriesMap[v]&&d.push(v)}r._=d;var E=o[l];if(null==r[""+f[E]])break;r=r[""+f[E]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(r){var o,u,f=this,l={};s.eachSeries(this.matchedQueries,function(m,d){null==l[m]?(l[m]=!0,o=f.queriesMap[m],u=f.queriesCallbacksMap[m],f.engine.execute(o,function(a,v){if(!a)try{u(v)}catch{}d()})):d()},function(){r()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,X.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(G,X,Z){var Q=G("jsonld");Z.JSONLDParser={};var s=Z.JSONLDParser;s.parser={async:!0,parse:function(w,c,e,r){try{"string"==typeof w&&(w=JSON.parse(w)),async function(o,u,f){var l=null;var d=function(A){return"BlankNode"===A.termType?{blank:A.value}:"NamedNode"===A.termType?{token:"uri",value:A.value}:"Literal"===A.termType?null!=A.language?{literal:'"'+A.value+'"@'+A.language}:null!==A.datatype?{literal:'"'+A.value+'"^^<'+A.datatype.value+">"}:{literal:'"'+A.value+'"'}:void 0};l=[];for(var a,v,E,F=await Q.toRDF(o,{}),B=0;B<F.length;B++){var N=F[B];a=N.subject,v=N.predicate,E=N.object,l.push({subject:d(a),predicate:d(v),object:d(E),graph:u})}f(null,l)}(w,c,r)}catch(o){r(o)}}},X.exports={JSONLDParser:s}},{jsonld:43}],126:[function(G,X,Z){var Q=G("./utils"),s=G("./btree").Tree;Lexicon=function(w){var c=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,Q.seq(function(e){new s(2,function(r){c.uris=r,e()})},function(e){new s(2,function(r){c.literals=r,e()})},function(e){new s(2,function(r){c.knownGraphs=r,e()})},function(e){new s(2,function(r){c.oidUris=r,e()})},function(e){new s(2,function(r){c.oidLiterals=r,e()})},function(e){new s(2,function(r){c.oidBlanks=r,e()})})(function(){w?.(c)})},Lexicon.prototype.registerGraph=function(w,c,e){w!=this.defaultGraphOid?this.knownGraphs.insert(w,c,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(w,c){var e=[];this.knownGraphs.walk(function(r){!0===w?e.push(r.data):e.push(r.key)},function(){c(e)})},Lexicon.prototype.registerUri=function(w,c){var e=this;w===this.defaultGraphUri?c(this.defaultGraphOid):this.uris.search(w,function(r){if(null==r){var o=e.oidCounter,u="u"+o;e.oidCounter++,Q.seq(function(f){e.uris.insert(w,[o,0],function(){f()})},function(f){e.oidUris.insert(u,w,function(){f()})})(function(){c(o)})}else o=r[0],r[1]=r[1]+1,c(o)})},Lexicon.prototype.resolveUri=function(w,c){w===this.defaultGraphUri?c(this.defaultGraphOid):this.uris.search(w,function(e){c(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(w,c){w===this.defaultGraphUri?c(0):this.uris.search(w,function(e){c(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(w){var c=this.oidCounter;this.oidCounter++;var e=""+c;this.oidBlanks.insert(e,e,function(){w(c)})},Lexicon.prototype.resolveBlank=function(w,c){var e=this;this.oidBlanks.search(w,function(r){if(null!=r)c(r);else{var o=e.oidCounter;this.oidCounter++,c(""+o)}})},Lexicon.prototype.resolveBlankCost=function(w,c){c(0)},Lexicon.prototype.registerLiteral=function(w,c){var e=this;this.literals.search(w,function(r){if(null==r){var o="l"+(u=e.oidCounter);e.oidCounter++,Q.seq(function(f){e.literals.insert(w,[u,0],function(){f()})},function(f){e.oidLiterals.insert(o,w,function(){f()})})(function(){c(u)})}else{var u=r[0];r[1]=r[1]+1,c(u)}})},Lexicon.prototype.resolveLiteral=function(w,c){this.literals.search(w,function(e){c(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(w,c){this.literals.search(w,function(e){c(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(w){var c;return-1!=(c=w.lastIndexOf("@"))&&'"'===w[c-1]&&null!=w.substring(c,w.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:w.substring(1,c-1),lang:w.substring(c+1,w.length)}:-1!=(c=w.lastIndexOf("^^"))&&'"'===w[c-1]&&"<"===w[c+2]&&">"===w[w.length-1]?{token:"literal",value:w.substring(1,c-1),type:w.substring(c+3,w.length-1)}:{token:"literal",value:w.substring(1,w.length-1)}},Lexicon.prototype.parseUri=function(w){return{token:"uri",value:w}},Lexicon.prototype.retrieve=function(w,c){var e=this;w===this.defaultGraphOid?c({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):Q.seq(function(r,o){e.oidUris.search("u"+w,function(u){o(null,null!=u?e.parseUri(u):null)})},function(r,o){null==r?e.oidLiterals.search("l"+w,function(u){o(null,null!=u?e.parseLiteral(u):null)}):o(null,r)},function(r,o){null==r?e.oidBlanks.search(""+w,function(u){o(null,null!=u?{token:"blank",value:"_:"+w}:null)}):o(null,r)})(null,function(r,o){c(o)})},Lexicon.prototype.clear=function(w){var c=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,Q.seq(function(e){new s(2,function(r){c.uris=r,e()})},function(e){new s(2,function(r){c.literals=r,e()})},function(e){new s(2,function(r){c.knownGraphs=r,e()})},function(e){new s(2,function(r){c.oidUris=r,e()})},function(e){new s(2,function(r){c.oidLiterals=r,e()})},function(e){new s(2,function(r){c.oidBlanks=r,e()})})(function(){w?.()})},Lexicon.prototype.unregister=function(w,c,e){var r=this;Q.seq(function(o){r._unregisterTerm(w.subject.token,c.subject,o)},function(o){r._unregisterTerm(w.predicate.token,c.predicate,o)},function(o){r._unregisterTerm(w.object.token,c.object,o)},function(o){null!=w.graph?r._unregisterTerm(w.graph.token,c.graph,o):o()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(w,c,e){var r=this;if("uri"===w)if(c!=this.defaultGraphOid){var o="u"+c;r.oidUris.search(o,function(u){r.uris.search(u,function(f){var l=f[1];""+f[0]==""+c?0===l?Q.seq(function(m){r.oidUris.delete(o,function(){m()})},function(m){r.uris.delete(u,function(){m()})},function(m){r.knownGraphs.delete(c,function(){m()})})(function(){e()}):r.uris.insert(u,[c,l-1],function(){e()}):e()})})}else e();else"literal"===w?(this.oidCounter++,o="l"+c,r.oidLiterals.search(o,function(u){r.literals.search(u,function(f){var l=f[1];""+f[0]==""+c?0===l?Q.seq(function(m){r.oidLiterals.delete(o,function(){m()})},function(m){r.literals.delete(u,function(){m()})})(function(){e()}):r.literals.insert(u,[c,l-1],function(){e()}):e()})})):"blank"===w?r.oidBlanks.delete(""+c,function(){e()}):e()},X.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(G,X,Z){if(!G("./utils").isWorker()){var Q=G("http"),s=G("https"),w=G("url");NetworkTransport={load:function(c,e,r,o){var u=o??3,f=w.parse(c,!0,!0),l={host:f.host,hostname:f.hostname,method:"GET",path:f.path,headers:{host:f.hostname,Accept:e}},m=null;"http:"===f.protocol?(l.port=f.port||80,m=Q):"https:"===f.protocol&&(l.port=f.port||443,m=s);var d=m.request(l,function(a){var v=a.headers,E="";if("2"==(""+a.statusCode)[0])a.on("end",function(){r(null,{headers:v,data:E})}),a.on("data",function(B){E+=B});else if("3"==(""+a.statusCode)[0])if(0==u)r(new Error("Too many redirections"));else{var F=v.Location||v.location;null!=F?NetworkTransport.load(F,e,r,u-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+a.statusCode))});d.on("error",r),d.end()}},X.exports={NetworkTransport}}},{"./utils":140,http:91,https:20,url:112}],128:[function(G,X,Z){X.exports=function(){"use strict";function Q(s,w,c,e){this.message=s,this.expected=w,this.found=c,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Q)}return function(s,w){function c(){this.constructor=s}c.prototype=w.prototype,s.prototype=new c}(Q,Error),Q.buildMessage=function(s,w){var u,c={literal:function(u){return'"'+r(u.text)+'"'},class:function(u){var f,l="";for(f=0;f<u.parts.length;f++)l+=u.parts[f]instanceof Array?o(u.parts[f][0])+"-"+o(u.parts[f][1]):o(u.parts[f]);return"["+(u.inverted?"^":"")+l+"]"},any:function(u){return"any character"},end:function(u){return"end of input"},other:function(u){return u.description}};function e(u){return u.charCodeAt(0).toString(16).toUpperCase()}function r(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+e(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+e(f)})}function o(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+e(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+e(f)})}return"Expected "+function(u){var f,l,m,d=new Array(u.length);for(f=0;f<u.length;f++)d[f]=(m=u[f],c[m.type](m));if(d.sort(),d.length>0){for(f=1,l=1;f<d.length;f++)d[f-1]!==d[f]&&(d[l]=d[f],l++);d.length=l}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(s)+" but "+(((u=w)?'"'+r(u)+'"':"end of input")+" found.")},{SyntaxError:Q,parse:function(s,w){w=void 0!==w?w:{};var c,e={},r={DOCUMENT:La},o=La,u=Ne("[1] QueryUnit"),f=Ne("[2] Query"),m=Ne("[3] Prologue"),a=Ne("[4] BaseDecl"),v="BASE",E=Se("BASE",!1),F="base",B=Se("base",!1),A=Ne("[5] PrefixDecl"),k="PREFIX",j=Se("PREFIX",!1),D="prefix",q=Se("prefix",!1),W=Ne("[6] SelectQuery"),ne=Ne("[7] SubSelect"),$=Ne("[8] SelectClause"),J=Se("SELECT",!1),oe=Se("select",!1),ye="DISTINCT",be=Se("DISTINCT",!1),de="distinct",le=Se("distinct",!1),Ce="REDUCED",Ie=Se("REDUCED",!1),Oe="reduced",R=Se("reduced",!1),I="(",H=Se("(",!1),re="AS",ve=Se("AS",!1),ae="as",Ee=Se("as",!1),Fe=")",Re=Se(")",!1),Je="*",Ve=Se("*",!1),at=Ne("[9] ConstructQuery"),ge="CONSTRUCT",_e=Se("CONSTRUCT",!1),ke="construct",U=Se("construct",!1),te="WHERE",ue=Se("WHERE",!1),me="where",he=Se("where",!1),fe="{",we=Se("{",!1),Te="}",Pe=Se("}",!1),De=Ne("[10] DescribeQuery"),ze="DESCRIBE",$e=Se("DESCRIBE",!1),We=Ne("[11] AskQuery"),et=Se("ASK",!1),He=Se("ask",!1),lt=Ne("[12] DatasetClause"),dr=Se("FROM",!1),kn=Se("from",!1),An=Ne("[13] DefaultGraphClause"),Cn=Ne("[14] NamedGraphClause"),Pt="NAMED",Wt=Se("NAMED",!1),Nt="named",$t=Se("named",!1),Bt=Ne("[15] SourceSelector"),Sr=Ne("[16] WhereClause"),Tr=Ne("[17] SolutionModifier"),Sn=Ne("[18] GroupClause"),jr=Se("GROUP",!1),Tn=Se("group",!1),Fi=Se("BY",!1),Ci=Se("by",!1),mu=Ne("[19] GroupCondition"),_u=Ne("[20] HavingClause"),ku=Se("HAVING",!1),Eu=Ne("[21] HavingCondition"),Au=Ne("[22] OrderClause"),Fu=Se("ORDER",!1),Cu=Se("order",!1),Tu=Ne("[23] OrderCondition"),ju=Se("ASC",!1),Iu=Se("asc",!1),Nu=Se("DESC",!1),Ru=Se("desc",!1),Du=Ne("[24] LimitOffsetClauses"),Bu=Ne("[25] LimitClause"),Mu=Se("LIMIT",!1),Qu=Se("limit",!1),Gu=Ne("[26] OffsetClause"),qu=Se("OFFSET",!1),Hu=Se("offset",!1),Ju=Ne("[27] BindingsClause"),Qi="BINDINGS",zu=Se("BINDINGS",!1),Xu=Ne("[28] BindingValue"),Nr="UNDEF",Ui=Se("UNDEF",!1),Wu=Ne("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Rr="VALUES",Gi=Se("VALUES",!1),Or="values",qi=Se("values",!1),Ku=Ne("[29] UpdateUnit"),Yu=Ne("[30] Update"),Rt=";",Ot=Se(";",!1),el=Ne("[31] Update1"),tl=Ne("[32] Load"),rl=Se("LOAD",!1),nl=Se("load",!1),il=Se("INTO",!1),ol=Se("into",!1),al=Ne("[33] Clear"),ul=Se("CLEAR",!1),ll=Se("clear",!1),Yt="SILENT",jn=Se("SILENT",!1),Zt="silent",In=Se("silent",!1),fl=Ne("[34] Drop"),pl=Se("DROP",!1),hl=Se("drop",!1),vl=Ne("[35] Create"),yl=Se("CREATE",!1),gl=Se("create",!1),bl=Ne("[36] InsertData"),Lr="INSERT",eo=Se("INSERT",!1),Dr="insert",to=Se("insert",!1),Pr="DATA",ro=Se("DATA",!1),Br="data",no=Se("data",!1),wl=Ne("[37] DeleteData"),er="DELETE",Nn=Se("DELETE",!1),tr="delete",Rn=Se("delete",!1),kl=Ne("[38] DeleteWhere"),Al=Ne("[39] Modify"),Fl=Se("WITH",!1),Cl=Se("with",!1),Tl=Ne("[40] DeleteClause"),jl=Ne("[41] InsertClause"),Il=Ne("[42] UsingClause"),Nl=Se("USING",!1),Rl=Se("using",!1),Ll=Ne("[43] GraphRef"),rr="GRAPH",On=Se("GRAPH",!1),nr="graph",Ln=Se("graph",!1),Pl=Ne("[44] GraphRefAll"),lo="DEFAULT",Bl=Se("DEFAULT",!1),co="default",Ml=Se("default",!1),Gl=Se("ALL",!1),ql=Se("all",!1),Vl=Ne("[45] QuadPattern"),ho=function(n){return n.quadsContext},Jl=Ne("[46] QuadData"),zl=Ne("[47] Quads"),_t=".",kt=Se(".",!1),Wl=Ne("[48] QuadsNotTriples"),Kl=Ne("[49] TriplesTemplate"),Zl=Ne("[50] GroupGraphPattern"),ec=Ne("[51] GroupGraphPatternSub"),rc=Ne("[54] TriplesBlock"),ic=Ne("[53] GraphPatternNotTriples"),oc=Ne("[54] OptionalGraphPattern"),vo="OPTIONAL",sc=Se("OPTIONAL",!1),yo="optional",ac=Se("optional",!1),lc=Ne("[55] GraphGraphPattern"),fc=Ne("[56] ServiceGraphPattern"),go="SERVICE",pc=Se("SERVICE",!1),dc=Ne("[57] MinusGraphPattern"),vc=Se("MINUS",!1),yc=Se("minus",!1),mc=Ne("[58] GroupOrUnionGraphPattern"),Mr="UNION",xo=Se("UNION",!1),Qr="union",wo=Se("union",!1),xc=Ne("[59] Filter"),wc=Se("FILTER",!1),_c=Se("filter",!1),Ec=Ne("[60] Bind"),Ac=Se("BIND",!1),Fc=Se("bind",!1),Sc=Ne("[60] Constraint"),Tc=Ne("[61] InlineData"),Ic=Ne("[62] DataBlock"),Nc=Ne("[63] InlineDataOneVar"),Oc=Ne("[64] InlineDataFull"),Dc=Ne("[65] DataBlockValue"),Pc=Ne("[61] FunctionCall"),Mc=Ne("[62] ArgList"),dt=",",vt=Se(",",!1),Uc=Ne("[63] ExpressionList"),qc=Ne("[64] ConstructTemplate"),Vc=Ne("[65] ConstructTriples"),zc=Ne("[66] TriplesSameSubject"),$c=Ne("[83] PropertyListPathNotEmpty"),Yc=Ne("[67] PropertyListNotEmpty"),ef=Ne("[68] PropertyList"),tf=Ne("[86] ObjectListPath"),nf=Ne("[69] ObjectList"),sf=Ne("[87] ObjectPath"),af=Ne("[70] Object"),uf=Ne("[71] Verb"),Gr=Se("a",!1),lf=Ne("[72] TriplesSameSubjectPath"),pf=Ne("[73] PropertyListNotEmptyPath"),df=Ne("[74] PropertyListPath"),vf=Ne("[75]"),gf=Ne("[76] VerbSimple"),mf=Ne("[77] Path"),bf=Ne("[78] PathAlternative"),Hr=Se("|",!1),wf=Ne("[79] PathSequence"),zt=Se("/",!1),kf=Ne("[88] PathElt"),Af=Ne("[81] PathEltOrInverse"),To=Se("^",!1),Cf=Ne("[82] PathMod"),Bn=Se("?",!1),Mt="+",Qt=Se("+",!1),Sf=Ne("[83] PathPrimary"),Qn=Se("!",!1),Tf=Ne("[85] PathOneInPropertySet"),jf=Ne("[86] Integer"),If=Ne("[100] TriplesNodePath"),Rf=Ne("[87] TriplesNode"),Lf=Ne("[101] BlankNodePropertyListPath"),Gn=Se("[",!1),Hn=Se("]",!1),Pf=Ne("[88] BlankNodePropertyList"),Mf=Ne("[103] CollectionPath"),Qf=Ne("[89] Collection"),Uf=Ne("[105] GraphNodePath"),Io=function(n){return n[1]},Gf=Ne("[90] GraphNode"),qf=Ne("[91] VarOrTerm"),Hf=Ne("[92] VarOrIRIref"),Vf=Ne("[93] Var"),zf=Ne("[94] GraphTerm"),Xf=Ne("[95] Expression"),Wf=Ne("[96] ConditionalOrExpression"),No=Se("||",!1),Kf=Ne("[97] ConditionalAndExpression"),Ro=Se("&&",!1),Zf=Ne("[98] ValueLogical"),ep=Ne("[99] RelationalExpression"),Xr=Se("=",!1),Oo=Se("!=",!1),Jn=Se("<",!1),Xn=Se(">",!1),Lo=Se("<=",!1),Do=Se(">=",!1),Zr=Se("I",!1),tn=Se("i",!1),or=Se("N",!1),ar=Se("n",!1),Bo=Se("O",!1),Qo=Se("o",!1),Go=Se("T",!1),Ho=Se("t",!1),rp=Ne("[100] NumericExpression"),np=Ne("[101] AdditiveExpression"),St="-",Tt=Se("-",!1),op=Ne("[102] MultiplicativeExpression"),ap=Ne("[103] UnaryExpression"),fp=Ne("[104] PrimaryExpression"),yp=Ne("[105] BrackettedExpression"),mp=Ne("[106] BuiltInCall"),bp=Se("STR",!1),xp=Se("str",!1),_p=Se("LANG",!1),kp=Se("lang",!1),Wo="LANGMATCHES",Ap=Se("LANGMATCHES",!1),$o="langmatches",Fp=Se("langmatches",!1),Ko="DATATYPE",Sp=Se("DATATYPE",!1),Yo="datatype",Tp=Se("datatype",!1),Ip=Se("BOUND",!1),Np=Se("bound",!1),Op=Se("IRI",!1),Lp=Se("iri",!1),Pp=Se("URI",!1),Bp=Se("uri",!1),Qp=Se("BNODE",!1),Up=Se("bnode",!1),as="COALESCE",qp=Se("COALESCE",!1),us="coalesce",Hp=Se("coalesce",!1),Jp=Se("IF",!1),zp=Se("if",!1),fs="ISLITERAL",Wp=Se("ISLITERAL",!1),ps="isliteral",$p=Se("isliteral",!1),hs="isLITERAL",Kp=Se("isLITERAL",!1),ds="ISBLANK",Zp=Se("ISBLANK",!1),vs="isblank",eh=Se("isblank",!1),ys="isBLANK",th=Se("isBLANK",!1),gs="SAMETERM",nh=Se("SAMETERM",!1),ms="sameterm",ih=Se("sameterm",!1),sh=Se("ISURI",!1),ah=Se("isuri",!1),uh=Se("isURI",!1),lh=Se("ISIRI",!1),ch=Se("isiri",!1),fh=Se("isIRI",!1),As="custom:",hh=Se("custom:",!1),Fs="CUSTOM:",dh=Se("CUSTOM:",!1),Cs=/^[a-zA-Z0-9_]/,Ss=st([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),yh=Ne("[107] RegexExpression"),gh=Se("REGEX",!1),mh=Se("regex",!1),xh=Ne("[108] ExistsFunc"),rn="EXISTS",Is=Se("EXISTS",!1),nn="exists",Ns=Se("exists",!1),_h=Ne("[109] NotExistsFunc"),kh=Se("NOT",!1),Eh=Se("not",!1),Fh=Ne("[110] Aggregate"),Ch=Se("COUNT",!1),Sh=Se("count",!1),Ps="GROUP_CONCAT",jh=Se("GROUP_CONCAT",!1),Bs="group_concat",Ih=Se("group_concat",!1),Ms="SEPARATOR",Nh=Se("SEPARATOR",!1),Oh=Se("SUM",!1),Lh=Se("sum",!1),Ph=Se("MIN",!1),Bh=Se("min",!1),Qh=Se("MAX",!1),Uh=Se("max",!1),qh=Se("AVG",!1),Hh=Se("avg",!1),Jh=Ne("[117] IRIrefOrFunction"),Xh=Ne("[112] RDFLiteral"),Wh=Se("^^",!1),Kh=Ne("[113] NumericLiteral"),Yh=Ne("[114] NumericLiteralUnsigned"),Zh=Ne("[115] NumericLiteralPositive"),ed=Ne("[116] NumericLiteralNegative"),td=Ne("[117] BooleanLiteral"),rd=Se("TRUE",!1),nd=Se("true",!1),od=Se("FALSE",!1),sd=Se("false",!1),ud=Ne("[118] String"),on=function(n){return{token:"string",value:n}},ld=Ne("[119] IRIref"),fd=Ne("[120] PrefixedName"),dd=Ne("[121] BlankNode"),gd=Ne("[122] IRI_REF"),ea=/^[^<>"{}|\^`\\]/,ta=st(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),bd=Ne("[123] PNAME_NS"),mr=Se(":",!1),xd=Ne("[124] PNAME_LN"),_d=Ne("[125] BLANK_NODE_LABEL"),kd=Se("_:",!1),Ad=Ne("[126] VAR1"),Fd=Ne("[127] VAR2"),oa=Se("$",!1),Cd=Ne("[128] LANGTAG"),aa=Se("@",!1),ua=/^[a-zA-Z]/,la=st([["a","z"],["A","Z"]],!1,!1),sn=/^[a-zA-Z0-9]/,an=st([["a","z"],["A","Z"],["0","9"]],!1,!1),Td=Ne("[129] INTEGER"),ct=/^[0-9]/,ft=st([["0","9"]],!1,!1),Id=Ne("[130] DECIMAL"),Od=Ne("[131] DOUBLE"),Bd=Ne("[132] INTEGER_POSITIVE"),Qd=Ne("[133] DECIMAL_POSITIVE"),ca=function(n){return n.value="+"+n.value,n},Ud=Ne("[134] DOUBLE_POSITIVE"),Gd=Ne("[135] INTEGER_NEGATIVE"),Wn=function(n){return n.value="-"+n.value,n},qd=Ne("[136] DECIMAL_NEGATIVE"),Hd=Ne("[137] DOUBLE_NEGATIVE"),Vd=Ne("[138] EXPONENT"),Jd=/^[eE]/,zd=st(["e","E"],!1,!1),Xd=/^[+\-]/,Wd=st(["+","-"],!1,!1),Kd=Ne("[139] STRING_LITERAL1"),Kn=Se("'",!1),fa=/^[^'\\\n\r]/,pa=st(["'","\\","\n","\r"],!0,!1),un=function(n){return Gt(n)},Yd=Ne("[140] STRING_LITERAL2"),da=Se('"',!1),va=/^[^"\\\n\r]/,ya=st(['"',"\\","\n","\r"],!0,!1),Zd=Ne("[141] STRING_LITERAL_LONG1"),ln="'''",ga=Se("'''",!1),ma=/^[^'\\]/,ba=st(["'","\\"],!0,!1),ev=Ne("[142] STRING_LITERAL_LONG2"),cn='"""',xa=Se('"""',!1),wa=/^[^"\\]/,_a=st(['"',"\\"],!0,!1),tv=Ne("[143] ECHAR"),Ea=Se("\\",!1),rv=/^[tbnrf"']/,nv=st(["t","b","n","r","f",'"',"'"],!1,!1),iv=Ne("[144] NIL"),sv=Ne("[145] WS"),av=/^[ ]/,uv=st([" "],!1,!1),lv=/^[\t]/,cv=st(["\t"],!1,!1),fv=/^[\r]/,pv=st(["\r"],!1,!1),hv=/^[\n]/,dv=st(["\n"],!1,!1),vv=Ne(" COMMENT"),Fa=Se("#",!1),Ca=/^[^\n\r]/,Sa=st(["\n","\r"],!0,!1),yv=Ne("[146] ANON"),gv=Ne("[147] PN_CHARS_BASE"),mv=/^[A-Z]/,bv=st([["A","Z"]],!1,!1),xv=/^[a-z]/,wv=st([["a","z"]],!1,!1),_v=/^[\xC0-\xD6]/,kv=st([["\xc0","\xd6"]],!1,!1),Ev=/^[\xD8-\xF6]/,Av=st([["\xd8","\xf6"]],!1,!1),Fv=/^[\xF8-\u02FF]/,Cv=st([["\xf8","\u02ff"]],!1,!1),Sv=/^[\u0370-\u037D]/,Tv=st([["\u0370","\u037d"]],!1,!1),jv=/^[\u037F-\u1FFF]/,Iv=st([["\u037f","\u1fff"]],!1,!1),Nv=/^[\u200C-\u200D]/,Rv=st([["\u200c","\u200d"]],!1,!1),Ov=/^[\u2070-\u218F]/,Lv=st([["\u2070","\u218f"]],!1,!1),Dv=/^[\u2C00-\u2FEF]/,Pv=st([["\u2c00","\u2fef"]],!1,!1),Bv=/^[\u3001-\uD7FF]/,Mv=st([["\u3001","\ud7ff"]],!1,!1),Qv=/^[\uF900-\uFDCF]/,Uv=st([["\uf900","\ufdcf"]],!1,!1),Gv=/^[\uFDF0-\uFFFD]/,qv=st([["\ufdf0","\ufffd"]],!1,!1),Hv=/^[\u1000-\uEFFF]/,Vv=st([["\u1000","\uefff"]],!1,!1),Jv=Ne("[148] PN_CHARS_U"),ja=Se("_",!1),zv=Ne("[149] VARNAME"),Yn=/^[\xB7]/,Zn=st(["\xb7"],!1,!1),ei=/^[\u0300-\u036F]/,ti=st([["\u0300","\u036f"]],!1,!1),ri=/^[\u203F-\u2040]/,ni=st([["\u203f","\u2040"]],!1,!1),Wv=Ne("[150] PN_CHARS"),$v=Ne("[151] PN_PREFIX"),Yv=Ne("[152] PN_LOCAL"),ey=Ne("[170] PLX"),ty=Ne("[171] PERCENT"),Na=Se("%",!1),ny=Ne("[172] HEX"),iy=/^[A-F]/,oy=st([["A","F"]],!1,!1),sy=/^[a-f]/,ay=st([["a","f"]],!1,!1),uy=Ne("[173] PN_LOCAL_ESC"),cy=Se("~",!1),py=Se("&",!1),t=0,fn=[{line:1,column:1}],jt=0,ii=[],x=0;if("startRule"in w){if(!(w.startRule in r))throw new Error("Can't start parsing from rule \""+w.startRule+'".');o=r[w.startRule]}function Se(n,h){return{type:"literal",text:n,ignoreCase:h}}function st(n,h,b){return{type:"class",parts:n,inverted:h,ignoreCase:b}}function Ne(n){return{type:"other",description:n}}function Ra(n){var h,b=fn[n];if(b)return b;for(h=n-1;!fn[h];)h--;for(b={line:(b=fn[h]).line,column:b.column};h<n;)10===s.charCodeAt(h)?(b.line++,b.column=1):b.column++,h++;return fn[n]=b,b}function Oa(n,h){var b=Ra(n),y=Ra(h);return{start:{offset:n,line:b.line,column:b.column},end:{offset:h,line:y.line,column:y.column}}}function M(n){t<jt||(t>jt&&(jt=t,ii=[]),ii.push(n))}function La(){return x++,x++,b=t,(y=Da())!==e?((_=function(){var C,O,V,K,se,xe,je,pe,Le,Me;if(x++,C=t,(O=Ba())!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e){for(K=[],se=It();se!==e;)K.push(se),se=It();if(K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if((xe=br())!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if((pe=xr())!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();Le!==e&&(Me=function(){var Ae,Be,Qe,qe,Ze,Ge,nt,ut,Ye;if(x++,Ae=t,s.substr(t,8)===Qi?(Be=Qi,t+=8):(Be=e,0===x&&M(zu)),Be!==e){for(Qe=[],qe=gt();qe!==e;)Qe.push(qe),qe=gt();if(Qe!==e)if(123===s.charCodeAt(t)?(qe=fe,t++):(qe=e,0===x&&M(we)),qe!==e){if(Ze=[],Ge=t,40===s.charCodeAt(t)?(nt=I,t++):(nt=e,0===x&&M(H)),nt!==e){if(ut=[],(Ye=pn())!==e)for(;Ye!==e;)ut.push(Ye),Ye=pn();else ut=e;ut!==e?(41===s.charCodeAt(t)?(Ye=Fe,t++):(Ye=e,0===x&&M(Re)),Ye!==e?Ge=nt=[nt,ut,Ye]:(t=Ge,Ge=e)):(t=Ge,Ge=e)}else t=Ge,Ge=e;for(Ge===e&&(Ge=Dt());Ge!==e;){if(Ze.push(Ge),Ge=t,40===s.charCodeAt(t)?(nt=I,t++):(nt=e,0===x&&M(H)),nt!==e){if(ut=[],(Ye=pn())!==e)for(;Ye!==e;)ut.push(Ye),Ye=pn();else ut=e;ut!==e?(41===s.charCodeAt(t)?(Ye=Fe,t++):(Ye=e,0===x&&M(Re)),Ye!==e?Ge=nt=[nt,ut,Ye]:(t=Ge,Ge=e)):(t=Ge,Ge=e)}else t=Ge,Ge=e;Ge===e&&(Ge=Dt())}Ze!==e?(125===s.charCodeAt(t)?(Ge=Te,t++):(Ge=e,0===x&&M(Pe)),Ge!==e?Ae=Be=[Be,Qe,qe,Ze,Ge]:(t=Ae,Ae=e)):(t=Ae,Ae=e)}else t=Ae,Ae=e;else t=Ae,Ae=e}else t=Ae,Ae=e;return Ae===e&&(Ae=null),x--,Ae===e&&(Be=e,0===x&&M(Ju)),Ae}())!==e?(O=function(n,h,b,y){for(var _={named:[],implicit:[]},T=0;T<h.length;T++){var C=h[T];"default"===C.kind?_.implicit.push(C.graph):_.named.push(C.graph)}0===_.named.length&&0===_.implicit.length&&_.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var O={kind:"select",token:"executableunit"};return O.dataset=_,O.projection=n.vars,O.modifier=n.modifier,O.pattern=b,null!=y&&null!=y.limit&&(O.limit=y.limit),null!=y&&null!=y.offset&&(O.offset=y.offset),null!=y&&null!=y.order&&""!=y.order&&(O.order=y.order),null!=y&&null!=y.group&&(O.group=y.group),O}(O,K,xe,pe),C=O):(t=C,C=e)}else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e}else t=C,C=e}else t=C,C=e}else t=C,C=e;return x--,C===e&&(O=e,0===x&&M(W)),C}())===e&&(_=function(){var C,O,V,K,se,xe,je,pe,Le,Me,Ae,Be,Qe,qe,Ze;for(x++,C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(s.substr(t,9)===ge?(V=ge,t+=9):(V=e,0===x&&M(_e)),V===e&&(s.substr(t,9)===ke?(V=ke,t+=9):(V=e,0===x&&M(U))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e)if((se=function(){var Ge,nt,ut,Ye,bt,pt;if(x++,Ge=t,123===s.charCodeAt(t)?(nt=fe,t++):(nt=e,0===x&&M(we)),nt!==e){for(ut=[],Ye=L();Ye!==e;)ut.push(Ye),Ye=L();if(ut!==e)if((Ye=function yt(){var xt,wt,ht,Ar,qt,_n,Ht;if(x++,xt=t,(wt=ru())!==e){for(ht=t,Ar=[],qt=L();qt!==e;)Ar.push(qt),qt=L();if(Ar!==e)if(46===s.charCodeAt(t)?(qt=_t,t++):(qt=e,0===x&&M(kt)),qt!==e){for(_n=[],Ht=L();Ht!==e;)_n.push(Ht),Ht=L();_n!==e?((Ht=yt())===e&&(Ht=null),Ht!==e?ht=Ar=[Ar,qt,_n,Ht]:(t=ht,ht=e)):(t=ht,ht=e)}else t=ht,ht=e;else t=ht,ht=e;ht===e&&(ht=null),ht!==e?(wt=function(n,h){var b=n.triplesContext;return null!=h&&"object"==typeof h&&null!=h.length&&null!=h[3]&&null!=h[3].triplesContext&&(b=b.concat(h[3].triplesContext)),{token:"triplestemplate",triplesContext:b}}(wt,ht),xt=wt):(t=xt,xt=e)}else t=xt,xt=e;return x--,xt===e&&(wt=e,0===x&&M(Vc)),xt}())===e&&(Ye=null),Ye!==e){for(bt=[],pt=L();pt!==e;)bt.push(pt),pt=L();bt!==e?(125===s.charCodeAt(t)?(pt=Te,t++):(pt=e,0===x&&M(Pe)),pt!==e?Ge=nt=Ye:(t=Ge,Ge=e)):(t=Ge,Ge=e)}else t=Ge,Ge=e;else t=Ge,Ge=e}else t=Ge,Ge=e;return x--,Ge===e&&(nt=e,0===x&&M(qc)),Ge}())!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();if(xe!==e){for(je=[],pe=It();pe!==e;)je.push(pe),pe=It();if(je!==e){for(pe=[],Le=L();Le!==e;)pe.push(Le),Le=L();if(pe!==e)if((Le=br())!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();Me!==e&&(Ae=xr())!==e?(O=function(n,h,b,y){for(var _={named:[],implicit:[]},T=0;T<h.length;T++){var C=h[T];"default"===C.kind?_.implicit.push(C.graph):_.named.push(C.graph)}0===_.named.length&&0===_.implicit.length&&_.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var O={kind:"construct",token:"executableunit"};return O.dataset=_,O.template=n,O.pattern=b,null!=y&&null!=y.limit&&(O.limit=y.limit),null!=y&&null!=y.offset&&(O.offset=y.offset),null!=y&&null!=y.order&&""!=y.order&&(O.order=y.order),O}(se,je,Le,Ae),C=O):(t=C,C=e)}else t=C,C=e;else t=C,C=e}else t=C,C=e}else t=C,C=e}else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(s.substr(t,9)===ge?(V=ge,t+=9):(V=e,0===x&&M(_e)),V===e&&(s.substr(t,9)===ke?(V=ke,t+=9):(V=e,0===x&&M(U))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e){for(se=[],xe=It();xe!==e;)se.push(xe),xe=It();if(se!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();if(xe!==e)if(s.substr(t,5)===te?(je=te,t+=5):(je=e,0===x&&M(ue)),je===e&&(s.substr(t,5)===me?(je=me,t+=5):(je=e,0===x&&M(he))),je!==e){for(pe=[],Le=L();Le!==e;)pe.push(Le),Le=L();if(pe!==e)if(123===s.charCodeAt(t)?(Le=fe,t++):(Le=e,0===x&&M(we)),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if((Ae=ur())===e&&(Ae=null),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();if(Be!==e)if(125===s.charCodeAt(t)?(Qe=Te,t++):(Qe=e,0===x&&M(Pe)),Qe!==e){for(qe=[],Ze=L();Ze!==e;)qe.push(Ze),Ze=L();qe!==e&&(Ze=xr())!==e?(O=function(n,h,b){for(var y={named:[],implicit:[]},_=0;_<n.length;_++){var T=n[_];"default"===T.kind?y.implicit.push(T.graph):y.named.push(T.graph)}0===y.named.length&&0===y.implicit.length&&y.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var C={kind:"construct",token:"executableunit"};return C.dataset=y,C.template=h,C.pattern={token:"basicgraphpattern",triplesContext:h.triplesContext},null!=b&&null!=b.limit&&(C.limit=b.limit),null!=b&&null!=b.offset&&(C.offset=b.offset),null!=b&&null!=b.order&&""!=b.order&&(C.order=b.order),C}(se,Ae,Ze),C=O):(t=C,C=e)}else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e}else t=C,C=e;else t=C,C=e}else t=C,C=e}else t=C,C=e}else t=C,C=e;else t=C,C=e}return x--,C===e&&(O=e,0===x&&M(at)),C}())===e&&(_=function(){var C,O,V,K,se,xe;if(x++,C=t,s.substr(t,8)===ze?(O=ze,t+=8):(O=e,0===x&&M($e)),O!==e){if(V=[],(K=pr())!==e)for(;K!==e;)V.push(K),K=pr();else V=e;if(V===e&&(42===s.charCodeAt(t)?(V=Je,t++):(V=e,0===x&&M(Ve))),V!==e){for(K=[],se=It();se!==e;)K.push(se),se=It();K!==e?((se=br())===e&&(se=null),se!==e&&(xe=xr())!==e?C=O=[O,V,K,se,xe]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e}else t=C,C=e;return x--,C===e&&(O=e,0===x&&M(De)),C}())===e&&(_=function(){var C,O,V,K,se,xe,je;for(x++,C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if("ASK"===s.substr(t,3)?(V="ASK",t+=3):(V=e,0===x&&M(et)),V===e&&("ask"===s.substr(t,3)?(V="ask",t+=3):(V=e,0===x&&M(He))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e){for(se=[],xe=It();xe!==e;)se.push(xe),xe=It();if(se!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();xe!==e&&(je=br())!==e?(O=function(n,h){for(var b={named:[],implicit:[]},y=0;y<n.length;y++){var _=n[y];"implicit"===_.kind?b.implicit.push(_.graph):b.named.push(_.graph)}0===b.named.length&&0===b.implicit.length&&b.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var T={kind:"ask",token:"executableunit"};return T.dataset=b,T.pattern=h,T}(se,je),C=O):(t=C,C=e)}else t=C,C=e}else t=C,C=e}else t=C,C=e;else t=C,C=e;return x--,C===e&&(O=e,0===x&&M(We)),C}()),_!==e&&(x++,O=t,s.substr(t,6)===Rr?(V=Rr,t+=6):(V=e,0===x&&M(Gi)),V===e&&(s.substr(t,6)===Or?(V=Or,t+=6):(V=e,0===x&&M(qi))),V!==e&&(K=Za())!==e?O=V=[V,K]:(t=O,O=e),O===e&&(O=null),O!==e&&(O=function(n){return null!=n?n[1]:null}(O)),x--,(C=O)===e&&(O=e,0===x&&M(Wu)),(T=C)!==e)?(y=function(n,h,b){return{token:"query",kind:"query",prologue:n,units:[h],inlineData:b}}(y,_,T),b=y):(t=b,b=e)):(t=b,b=e),x--,b===e&&(y=e,0===x&&M(f)),x--,(h=b)===e&&0===x&&M(u),(n=h)===e&&(n=function(){var h;return x++,h=function b(){var y,_,T,C,O,V,K,se,xe,je;if(x++,y=t,(_=Da())!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(x++,(je=function(){var pe,Le,Me,Ae,Be,Qe,qe,Ze,Ge;if(x++,pe=t,"LOAD"===s.substr(t,4)?(Le="LOAD",t+=4):(Le=e,0===x&&M(rl)),Le===e&&("load"===s.substr(t,4)?(Le="load",t+=4):(Le=e,0===x&&M(nl))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if((Ae=mt())!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();if(Be!==e){if(Qe=t,"INTO"===s.substr(t,4)?(qe="INTO",t+=4):(qe=e,0===x&&M(il)),qe===e&&("into"===s.substr(t,4)?(qe="into",t+=4):(qe=e,0===x&&M(ol))),qe!==e){for(Ze=[],Ge=L();Ge!==e;)Ze.push(Ge),Ge=L();Ze!==e&&(Ge=oi())!==e?Qe=qe=[qe,Ze,Ge]:(t=Qe,Qe=e)}else t=Qe,Qe=e;Qe===e&&(Qe=null),Qe!==e?(Le=function(n,h){var b={kind:"load",token:"executableunit"};return b.sourceGraph=n,null!=h&&(b.destinyGraph=h[2]),b}(Ae,Qe),pe=Le):(t=pe,pe=e)}else t=pe,pe=e}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(tl)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be,Qe;if(x++,pe=t,"CLEAR"===s.substr(t,5)?(Le="CLEAR",t+=5):(Le=e,0===x&&M(ul)),Le===e&&("clear"===s.substr(t,5)?(Le="clear",t+=5):(Le=e,0===x&&M(ll))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if(s.substr(t,6)===Yt?(Ae=Yt,t+=6):(Ae=e,0===x&&M(jn)),Ae===e&&(s.substr(t,6)===Zt?(Ae=Zt,t+=6):(Ae=e,0===x&&M(In))),Ae===e&&(Ae=null),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();Be!==e&&(Qe=za())!==e?(Le=function(n){var h={kind:"clear",token:"executableunit"};return h.destinyGraph=n,h}(Qe),pe=Le):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(al)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be,Qe;if(x++,pe=t,"DROP"===s.substr(t,4)?(Le="DROP",t+=4):(Le=e,0===x&&M(pl)),Le===e&&("drop"===s.substr(t,4)?(Le="drop",t+=4):(Le=e,0===x&&M(hl))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if(s.substr(t,6)===Yt?(Ae=Yt,t+=6):(Ae=e,0===x&&M(jn)),Ae===e&&(s.substr(t,6)===Zt?(Ae=Zt,t+=6):(Ae=e,0===x&&M(In))),Ae===e&&(Ae=null),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();Be!==e&&(Qe=za())!==e?(Le=function(n){var h={kind:"drop",token:"executableunit"};return h.destinyGraph=n,h}(Qe),pe=Le):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(fl)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be,Qe;if(x++,pe=t,"CREATE"===s.substr(t,6)?(Le="CREATE",t+=6):(Le=e,0===x&&M(yl)),Le===e&&("create"===s.substr(t,6)?(Le="create",t+=6):(Le=e,0===x&&M(gl))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if(s.substr(t,6)===Yt?(Ae=Yt,t+=6):(Ae=e,0===x&&M(jn)),Ae===e&&(s.substr(t,6)===Zt?(Ae=Zt,t+=6):(Ae=e,0===x&&M(In))),Ae===e&&(Ae=null),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();Be!==e&&(Qe=oi())!==e?(Le=function(n){var h={kind:"create",token:"executableunit"};return h.destinyGraph=n,h}(Qe),pe=Le):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(vl)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be,Qe;if(x++,pe=t,s.substr(t,6)===Lr?(Le=Lr,t+=6):(Le=e,0===x&&M(eo)),Le===e&&(s.substr(t,6)===Dr?(Le=Dr,t+=6):(Le=e,0===x&&M(to))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if(s.substr(t,4)===Pr?(Ae=Pr,t+=4):(Ae=e,0===x&&M(ro)),Ae===e&&(s.substr(t,4)===Br?(Ae=Br,t+=4):(Ae=e,0===x&&M(no))),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();Be!==e&&(Qe=Wa())!==e?(Le=function(n){var h={kind:"insertdata",token:"executableunit"};return h.quads=n,h}(Qe),pe=Le):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(bl)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be;if(x++,pe=t,s.substr(t,6)===er?(Le=er,t+=6):(Le=e,0===x&&M(Nn)),Le===e&&(s.substr(t,6)===tr?(Le=tr,t+=6):(Le=e,0===x&&M(Rn))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();Me!==e?(s.substr(t,4)===Pr?(Ae=Pr,t+=4):(Ae=e,0===x&&M(ro)),Ae===e&&(s.substr(t,4)===Br?(Ae=Br,t+=4):(Ae=e,0===x&&M(no))),Ae!==e&&(Be=Wa())!==e?(Le=function(n){var h={kind:"deletedata",token:"executableunit"};return h.quads=n,h}(Be),pe=Le):(t=pe,pe=e)):(t=pe,pe=e)}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(wl)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be,Qe;if(x++,pe=t,s.substr(t,6)===er?(Le=er,t+=6):(Le=e,0===x&&M(Nn)),Le===e&&(s.substr(t,6)===tr?(Le=tr,t+=6):(Le=e,0===x&&M(Rn))),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e)if(s.substr(t,5)===te?(Ae=te,t+=5):(Ae=e,0===x&&M(ue)),Ae===e&&(s.substr(t,5)===me?(Ae=me,t+=5):(Ae=e,0===x&&M(he))),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();Be!==e&&(Qe=Ft())!==e?(Le=function(n){var h={kind:"modify"};h.pattern=n,h.with=null,h.using=null;var b=[],y=n.patterns[0];y=null==y.triplesContext&&null!=y.patterns?y.patterns[0].triplesContext:y.triplesContext;for(var _=0;_<y.length;_++){var T={},C=y[_];T.subject=C.subject,T.predicate=C.predicate,T.object=C.object,T.graph=C.graph,b.push(T)}return h.delete=b,h}(Qe),pe=Le):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(kl)),pe}())===e&&(je=function(){var pe,Le,Me,Ae,Be,Qe,qe,Ze,Ge,nt,ut,Ye,bt,pt,yt;if(x++,pe=t,Le=t,"WITH"===s.substr(t,4)?(Me="WITH",t+=4):(Me=e,0===x&&M(Fl)),Me===e&&("with"===s.substr(t,4)?(Me="with",t+=4):(Me=e,0===x&&M(Cl))),Me!==e){for(Ae=[],Be=L();Be!==e;)Ae.push(Be),Be=L();Ae!==e&&(Be=mt())!==e?Le=Me=[Me,Ae,Be]:(t=Le,Le=e)}else t=Le,Le=e;if(Le===e&&(Le=null),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();if(Me!==e){if(Ae=t,x++,bt=t,s.substr(t,6)===er?(pt=er,t+=6):(pt=e,0===x&&M(Nn)),pt===e&&(s.substr(t,6)===tr?(pt=tr,t+=6):(pt=e,0===x&&M(Rn))),pt!==e&&(yt=Xa())!==e?bt=pt=yt:(t=bt,bt=e),x--,bt===e&&(pt=e,0===x&&M(Tl)),(Be=bt)!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();Qe!==e?((qe=Va())===e&&(qe=null),qe!==e?Ae=Be=[Be,Qe,qe]:(t=Ae,Ae=e)):(t=Ae,Ae=e)}else t=Ae,Ae=e;if(Ae===e&&(Ae=Va()),Ae!==e){for(Be=[],Qe=L();Qe!==e;)Be.push(Qe),Qe=L();if(Be!==e){for(Qe=[],qe=Ja();qe!==e;)Qe.push(qe),qe=Ja();if(Qe!==e){for(qe=[],Ze=L();Ze!==e;)qe.push(Ze),Ze=L();if(qe!==e)if(s.substr(t,5)===te?(Ze=te,t+=5):(Ze=e,0===x&&M(ue)),Ze===e&&(s.substr(t,5)===me?(Ze=me,t+=5):(Ze=e,0===x&&M(he))),Ze!==e){for(Ge=[],nt=L();nt!==e;)Ge.push(nt),nt=L();if(Ge!==e)if((nt=Ft())!==e){for(ut=[],Ye=L();Ye!==e;)ut.push(Ye),Ye=L();ut!==e?(Le=function(n,h,b,y){var _={kind:"modify"};return _.with=""!=n&&null!=n?n[2]:null,3!==h.length||""!==h[2]&&null!=h[2]?3===h.length&&null!=h[0].length&&null!=h[1].length&&null!=h[2].length?(_.delete=h[0],_.insert=h[2]):(_.insert=h,_.delete=null):(_.delete=h[0],_.insert=null),""!=b&&(_.using=b),_.pattern=y,_}(Le,Ae,Qe,nt),pe=Le):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e}else t=pe,pe=e}else t=pe,pe=e}else t=pe,pe=e}else t=pe,pe=e;return x--,pe===e&&(Le=e,0===x&&M(Al)),pe}()),x--,je===e&&0===x&&M(el),(C=je)!==e){for(O=t,V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if(59===s.charCodeAt(t)?(K=Rt,t++):(K=e,0===x&&M(Ot)),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e?((xe=b())===e&&(xe=null),xe!==e?O=V=[V,K,se,xe]:(t=O,O=e)):(t=O,O=e)}else t=O,O=e;else t=O,O=e;O===e&&(O=null),O!==e?(_=function(n,h,b){var y={token:"query",kind:"update"};y.prologue=n;var _=[h];return null!=b&&null!=b.length&&null!=b[3]&&null!=b[3].units&&(_=_.concat(b[3].units)),y.units=_,y}(_,C,O),y=_):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;return x--,y===e&&(_=e,0===x&&M(Yu)),y}(),x--,h===e&&0===x&&M(Ku),h}()),n;var n,h,b,y,_,T,C,O,V,K}function Da(){var n,h,b,y,_;if(x++,n=t,(h=function(){var T,C,O,V,K;for(x++,T=t,C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,4)===v?(O=v,t+=4):(O=e,0===x&&M(E)),O===e&&(s.substr(t,4)===F?(O=F,t+=4):(O=e,0===x&&M(B))),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e&&(K=xn())!==e?(C=function(n){yy(n);var h={token:"base"};return h.value=n,h}(K),T=C):(t=T,T=e)}else t=T,T=e;else t=T,T=e;return x--,T===e&&(C=e,0===x&&M(a)),T}())===e&&(h=null),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e){for(y=[],_=Pa();_!==e;)y.push(_),_=Pa();y!==e?n=h=function(n,h){return{token:"prologue",base:n,prefixes:h}}(h,y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(m)),n}function Pa(){var n,h,b,y,_,T,C;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if(s.substr(t,6)===k?(b=k,t+=6):(b=e,0===x&&M(j)),b===e&&(s.substr(t,6)===D?(b=D,t+=6):(b=e,0===x&&M(q))),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if((_=xi())!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();T!==e&&(C=xn())!==e?n=h=function(n,h){vy(n,h);var b={token:"prefix"};return b.prefix=n,b.local=h,b}(_,C):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(A)),n}function Ba(){var n,h,b,y,_,T,C,O,V,K,se,xe,je,pe,Le,Me,Ae,Be,Qe,qe;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if("SELECT"===s.substr(t,6)?(b="SELECT",t+=6):(b=e,0===x&&M(J)),b===e&&("select"===s.substr(t,6)?(b="select",t+=6):(b=e,0===x&&M(oe))),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(s.substr(t,8)===ye?(_=ye,t+=8):(_=e,0===x&&M(be)),_===e&&(s.substr(t,8)===de?(_=de,t+=8):(_=e,0===x&&M(le))),_===e&&(s.substr(t,7)===Ce?(_=Ce,t+=7):(_=e,0===x&&M(Ie)),_===e&&(s.substr(t,7)===Oe?(_=Oe,t+=7):(_=e,0===x&&M(R)))),_===e&&(_=null),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e){for(C=[],O=t,V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=gt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e?O=V=[V,K,se]:(t=O,O=e)}else t=O,O=e;else t=O,O=e;if(O===e){for(O=t,V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if(40===s.charCodeAt(t)?(K=I,t++):(K=e,0===x&&M(H)),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if((xe=rt())!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if(s.substr(t,2)===re?(pe=re,t+=2):(pe=e,0===x&&M(ve)),pe===e&&(s.substr(t,2)===ae?(pe=ae,t+=2):(pe=e,0===x&&M(Ee))),pe!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();if(Le!==e)if((Me=gt())!==e){for(Ae=[],Be=L();Be!==e;)Ae.push(Be),Be=L();if(Ae!==e)if(41===s.charCodeAt(t)?(Be=Fe,t++):(Be=e,0===x&&M(Re)),Be!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();Qe!==e?O=V=[V,K,se,xe,je,pe,Le,Me,Ae,Be,Qe]:(t=O,O=e)}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}if(O!==e)for(;O!==e;){for(C.push(O),O=t,V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=gt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e?O=V=[V,K,se]:(t=O,O=e)}else t=O,O=e;else t=O,O=e;if(O===e){for(O=t,V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if(40===s.charCodeAt(t)?(K=I,t++):(K=e,0===x&&M(H)),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if((xe=rt())!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if(s.substr(t,2)===re?(pe=re,t+=2):(pe=e,0===x&&M(ve)),pe===e&&(s.substr(t,2)===ae?(pe=ae,t+=2):(pe=e,0===x&&M(Ee))),pe!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();if(Le!==e)if((Me=gt())!==e){for(Ae=[],Be=L();Be!==e;)Ae.push(Be),Be=L();if(Ae!==e)if(41===s.charCodeAt(t)?(Be=Fe,t++):(Be=e,0===x&&M(Re)),Be!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();Qe!==e?O=V=[V,K,se,xe,je,pe,Le,Me,Ae,Be,Qe]:(t=O,O=e)}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}else t=O,O=e;else t=O,O=e}}else C=e;if(C===e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(42===s.charCodeAt(t)?(V=Je,t++):(V=e,0===x&&M(Ve)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e?C=O=[O,V,K]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}C!==e?n=h=function(n,h){var b=[];if(3===h.length&&"*"===h[1])return{vars:[{token:"variable",kind:"*"}],modifier:vu(n)};for(var y=0;y<h.length;y++){var _=h[y];3===_.length?b.push({token:"variable",kind:"var",value:_[1]}):b.push({token:"variable",kind:"aliased",expression:_[3],alias:_[7]})}return{vars:b,modifier:vu(n)}}(_,C):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M($)),n}function It(){var n,h,b,y,_,T;if(x++,n=t,"FROM"===s.substr(t,4)?(h="FROM",t+=4):(h=e,0===x&&M(dr)),h===e&&("from"===s.substr(t,4)?(h="from",t+=4):(h=e,0===x&&M(kn))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=function(){var C,O,V;for(x++,C=t,O=[],V=L();V!==e;)O.push(V),V=L();return O!==e&&(V=Ma())!==e?(O=function(n){return{graph:n,kind:"default",token:"graphClause"}}(V),C=O):(t=C,C=e),x--,C===e&&(O=e,0===x&&M(An)),C}())===e&&(y=function(){var C,O,V,K;if(x++,C=t,s.substr(t,5)===Pt?(O=Pt,t+=5):(O=e,0===x&&M(Wt)),O===e&&(s.substr(t,5)===Nt?(O=Nt,t+=5):(O=e,0===x&&M($t))),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e&&(K=Ma())!==e?(O=function(n){return{graph:n,kind:"named",token:"graphCluase"}}(K),C=O):(t=C,C=e)}else t=C,C=e;return x--,C===e&&(O=e,0===x&&M(Cn)),C}()),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?n=h=y:(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(lt)),n}function Ma(){var n;return x++,n=mt(),x--,n===e&&0===x&&M(Bt),n}function br(){var n,h,b,y,_,T;if(x++,n=t,s.substr(t,5)===te?(h=te,t+=5):(h=e,0===x&&M(ue)),h===e&&(s.substr(t,5)===me?(h=me,t+=5):(h=e,0===x&&M(he))),h===e&&(h=null),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=Ft())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?n=h=y:(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Sr)),n}function xr(){var n,h,b,y,_,T,C,O,V;return x++,n=t,(h=function(){var T,C,O,V,K,se,xe;if(x++,T=t,"GROUP"===s.substr(t,5)?(C="GROUP",t+=5):(C=e,0===x&&M(jr)),C===e&&("group"===s.substr(t,5)?(C="group",t+=5):(C=e,0===x&&M(Tn))),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if("BY"===s.substr(t,2)?(V="BY",t+=2):(V=e,0===x&&M(Fi)),V===e&&("by"===s.substr(t,2)?(V="by",t+=2):(V=e,0===x&&M(Ci))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e){if(se=[],(xe=Qa())!==e)for(;xe!==e;)se.push(xe),xe=Qa();else se=e;se!==e?T=C=se:(t=T,T=e)}else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;return x--,T===e&&(C=e,0===x&&M(Sn)),T}())===e&&(h=null),h!==e?((b=function(){var T,C,O,V;if(x++,T=t,"HAVING"===s.substr(t,6)?(C="HAVING",t+=6):(C=e,0===x&&M(ku)),C!==e){if(O=[],(V=Ua())!==e)for(;V!==e;)O.push(V),V=Ua();else O=e;O!==e?T=C=[C,O]:(t=T,T=e)}else t=T,T=e;return x--,T===e&&(C=e,0===x&&M(_u)),T}())===e&&(b=null),b!==e?((y=function(){var T,C,O,V,K,se,xe,je;if(x++,T=t,"ORDER"===s.substr(t,5)?(C="ORDER",t+=5):(C=e,0===x&&M(Fu)),C===e&&("order"===s.substr(t,5)?(C="order",t+=5):(C=e,0===x&&M(Cu))),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if("BY"===s.substr(t,2)?(V="BY",t+=2):(V=e,0===x&&M(Fi)),V===e&&("by"===s.substr(t,2)?(V="by",t+=2):(V=e,0===x&&M(Ci))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e){if(se=[],(xe=Ga())!==e)for(;xe!==e;)se.push(xe),xe=Ga();else se=e;if(se!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();xe!==e?T=C=se:(t=T,T=e)}else t=T,T=e}else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;return x--,T===e&&(C=e,0===x&&M(Au)),T}())===e&&(y=null),y!==e?(x++,C=t,(O=qa())!==e?((V=Ha())===e&&(V=null),V!==e?C=O=[O,V]:(t=C,C=e)):(t=C,C=e),C===e&&(C=t,(O=Ha())!==e?((V=qa())===e&&(V=null),V!==e?C=O=[O,V]:(t=C,C=e)):(t=C,C=e)),C!==e&&(C=function(n){for(var h={},b=0;b<n.length;b++){var y=n[b];null!=y&&null!=y.limit?h.limit=y.limit:null!=y&&null!=y.offset&&(h.offset=y.offset)}return h}(C)),x--,(T=C)===e&&(C=e,0===x&&M(Du)),(_=T)===e&&(_=null),_!==e?n=h=function(n,h,b){var y={};return null!=b&&(null!=b.limit&&(y.limit=b.limit),null!=b.offset&&(y.offset=b.offset)),null!=n&&(y.group=n),y.order=h,y}(h,y,_):(t=n,n=e)):(t=n,n=e)):(t=n,n=e)):(t=n,n=e),x--,n===e&&(h=e,0===x&&M(Tr)),n}function Qa(){var n,h,b,y,_,T,C,O,V,K,se;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if((b=bi())!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e?n=h=b:(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if((b=eu())!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e?n=h=b:(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if(40===s.charCodeAt(t)?(b=I,t++):(b=e,0===x&&M(H)),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if((_=rt())!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e){if(C=t,s.substr(t,2)===re?(O=re,t+=2):(O=e,0===x&&M(ve)),O===e&&(s.substr(t,2)===ae?(O=ae,t+=2):(O=e,0===x&&M(Ee))),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e&&(K=gt())!==e?C=O=[O,V,K]:(t=C,C=e)}else t=C,C=e;if(C===e&&(C=null),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(41===s.charCodeAt(t)?(V=Fe,t++):(V=e,0===x&&M(Re)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e?n=h=function(n,h){return 0!=h.length?{token:"aliased_expression",expression:n,alias:h[2]}:n}(_,C):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if((b=gt())!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e?n=h=b:(t=n,n=e)}else t=n,n=e;else t=n,n=e}}}return x--,n===e&&(h=e,0===x&&M(mu)),n}function Ua(){var n;return x++,n=si(),x--,n===e&&0===x&&M(Eu),n}function Ga(){var n,h,b,y,_,T;if(x++,n=t,"ASC"===s.substr(t,3)?(h="ASC",t+=3):(h=e,0===x&&M(ju)),h===e&&("asc"===s.substr(t,3)?(h="asc",t+=3):(h=e,0===x&&M(Iu)),h===e&&("DESC"===s.substr(t,4)?(h="DESC",t+=4):(h=e,0===x&&M(Nu)),h===e&&("desc"===s.substr(t,4)?(h="desc",t+=4):(h=e,0===x&&M(Ru))))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=mi())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?n=h=function(n,h){return{direction:n.toUpperCase(),expression:h}}(h,y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e)if(n=t,(h=si())===e&&(h=gt()),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e?n=h=function(n){return"var"===n.token&&(n={token:"expression",expressionType:"atomic",primaryexpression:"var",value:n}),{direction:"ASC",expression:n}}(h):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Tu)),n}function qa(){var n,h,b,y,_,T;if(x++,n=t,"LIMIT"===s.substr(t,5)?(h="LIMIT",t+=5):(h=e,0===x&&M(Mu)),h===e&&("limit"===s.substr(t,5)?(h="limit",t+=5):(h=e,0===x&&M(Qu))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=hr())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?n=h=function(n){return{limit:parseInt(n.value)}}(y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Bu)),n}function Ha(){var n,h,b,y,_,T;if(x++,n=t,"OFFSET"===s.substr(t,6)?(h="OFFSET",t+=6):(h=e,0===x&&M(qu)),h===e&&("offset"===s.substr(t,6)?(h="offset",t+=6):(h=e,0===x&&M(Hu))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=hr())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?n=h=function(n){return{offset:parseInt(n.value)}}(y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Gu)),n}function pn(){var n;return x++,(n=mt())===e&&(n=gn())===e&&(n=mn())===e&&(n=bn())===e&&(s.substr(t,5)===Nr?(n=Nr,t+=5):(n=e,0===x&&M(Ui))),x--,n===e&&0===x&&M(Xu),n}function Va(){var n,h,b;return x++,n=t,s.substr(t,6)===Lr?(h=Lr,t+=6):(h=e,0===x&&M(eo)),h===e&&(s.substr(t,6)===Dr?(h=Dr,t+=6):(h=e,0===x&&M(to))),h!==e&&(b=Xa())!==e?n=h=b:(t=n,n=e),x--,n===e&&(h=e,0===x&&M(jl)),n}function Ja(){var n,h,b,y,_,T,C,O;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if("USING"===s.substr(t,5)?(b="USING",t+=5):(b=e,0===x&&M(Nl)),b===e&&("using"===s.substr(t,5)?(b="using",t+=5):(b=e,0===x&&M(Rl))),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e){if((_=mt())===e)if(_=t,s.substr(t,5)===Pt?(T=Pt,t+=5):(T=e,0===x&&M(Wt)),T===e&&(s.substr(t,5)===Nt?(T=Nt,t+=5):(T=e,0===x&&M($t))),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=mt())!==e?_=T=[T,C,O]:(t=_,_=e)}else t=_,_=e;_!==e?n=h=function(n){return null!=n.length?{kind:"named",uri:n[2]}:{kind:"default",uri:n}}(_):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Il)),n}function oi(){var n,h,b,y;if(x++,n=t,s.substr(t,5)===rr?(h=rr,t+=5):(h=e,0===x&&M(On)),h===e&&(s.substr(t,5)===nr?(h=nr,t+=5):(h=e,0===x&&M(Ln))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e&&(y=mt())!==e?n=h=y:(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Ll)),n}function za(){var n,h;return x++,n=t,(n=h=oi())===e&&(n=t,s.substr(t,7)===lo?(h=lo,t+=7):(h=e,0===x&&M(Bl)),h===e&&(s.substr(t,7)===co?(h=co,t+=7):(h=e,0===x&&M(Ml))),h!==e&&(h="default"),(n=h)===e&&(n=t,s.substr(t,5)===Pt?(h=Pt,t+=5):(h=e,0===x&&M(Wt)),h===e&&(s.substr(t,5)===Nt?(h=Nt,t+=5):(h=e,0===x&&M($t))),h!==e&&(h="named"),(n=h)===e&&(n=t,"ALL"===s.substr(t,3)?(h="ALL",t+=3):(h=e,0===x&&M(Gl)),h===e&&("all"===s.substr(t,3)?(h="all",t+=3):(h=e,0===x&&M(ql))),h!==e&&(h="all"),n=h))),x--,n===e&&(h=e,0===x&&M(Pl)),n}function Xa(){var n,h,b,y,_,T,C,O,V;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if(123===s.charCodeAt(t)?(b=fe,t++):(b=e,0===x&&M(we)),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if((_=$a())!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(125===s.charCodeAt(t)?(C=Te,t++):(C=e,0===x&&M(Pe)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e?n=h=ho(_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Vl)),n}function Wa(){var n,h,b,y,_,T,C,O,V;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if(123===s.charCodeAt(t)?(b=fe,t++):(b=e,0===x&&M(we)),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if((_=$a())!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(125===s.charCodeAt(t)?(C=Te,t++):(C=e,0===x&&M(Pe)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e?n=h=ho(_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Jl)),n}function $a(){var n,h,b,y,_,T,C;if(x++,n=t,(h=ur())===e&&(h=null),h!==e){for(b=[],y=t,(_=Ka())!==e?(46===s.charCodeAt(t)?(T=_t,t++):(T=e,0===x&&M(kt)),T===e&&(T=null),T!==e?((C=ur())===e&&(C=null),C!==e?y=_=[_,T,C]:(t=y,y=e)):(t=y,y=e)):(t=y,y=e);y!==e;)b.push(y),y=t,(_=Ka())!==e?(46===s.charCodeAt(t)?(T=_t,t++):(T=e,0===x&&M(kt)),T===e&&(T=null),T!==e?((C=ur())===e&&(C=null),C!==e?y=_=[_,T,C]:(t=y,y=e)):(t=y,y=e)):(t=y,y=e);b!==e?n=h=function(n,h){var b=[];if(null!=n&&null!=n.triplesContext)for(var y=0;y<n.triplesContext.length;y++)(_=n.triplesContext[y]).graph=null,b.push(_);if(h&&h.length>0&&h[0].length>0&&(b=b.concat(h[0][0].quadsContext),null!=h[0][2]&&null!=h[0][2].triplesContext))for(y=0;y<h[0][2].triplesContext.length;y++){var _;(_=h[0][2].triplesContext[y]).graph=null,b.push(_)}return{token:"quads",quadsContext:b}}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(zl)),n}function Ka(){var n,h,b,y,_,T,C,O,V,K,se,xe,je;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if(s.substr(t,5)===rr?(b=rr,t+=5):(b=e,0===x&&M(On)),b===e&&(s.substr(t,5)===nr?(b=nr,t+=5):(b=e,0===x&&M(Ln))),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if((_=pr())!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(123===s.charCodeAt(t)?(C=fe,t++):(C=e,0===x&&M(we)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if((V=ur())===e&&(V=null),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e)if(125===s.charCodeAt(t)?(se=Te,t++):(se=e,0===x&&M(Pe)),se!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();xe!==e?n=h=function(n,h){var b=[];if(null!=h)for(var y=0;y<h.triplesContext.length;y++){var _=h.triplesContext[y];_.graph=n,b.push(_)}return{token:"quadsnottriples",quadsContext:b}}(_,V):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Wl)),n}function ur(){var n,h,b,y,_,T,C;if(x++,n=t,(h=ru())!==e){for(b=t,y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(46===s.charCodeAt(t)?(_=_t,t++):(_=e,0===x&&M(kt)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();T!==e?((C=ur())===e&&(C=null),C!==e?b=y=[y,_,T,C]:(t=b,b=e)):(t=b,b=e)}else t=b,b=e;else t=b,b=e;b===e&&(b=null),b!==e?n=h=function(n,h){var b=n.triplesContext;return null!=h&&"object"==typeof h&&null!=h.length&&null!=h[3]&&null!=h[3].triplesContext&&(b=b.concat(h[3].triplesContext)),{token:"triplestemplate",triplesContext:b}}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Kl)),n}function Ft(){var n,h,b,y,_,T,C,O,V,K;if(x++,n=t,123===s.charCodeAt(t)?(h=fe,t++):(h=e,0===x&&M(we)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(x++,C=t,(O=Ba())!==e&&(V=br())!==e&&(K=xr())!==e?C=O=function(n,h,b){var y={kind:"select",token:"subselect"};return y.projection=n.vars,y.modifier=n.modifier,y.pattern=h,null!=b&&null!=b.limit&&(y.limit=b.limit),null!=b&&null!=b.offset&&(y.offset=b.offset),null!=b&&null!=b.order&&""!=b.order&&(y.order=b.order),null!=b&&null!=b.group&&(y.group=b.group),y}(O,V,K):(t=C,C=e),x--,C===e&&(O=e,0===x&&M(ne)),(y=C)!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?(125===s.charCodeAt(t)?(T=Te,t++):(T=e,0===x&&M(Pe)),T!==e?n=h=y:(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e)if(n=t,123===s.charCodeAt(t)?(h=fe,t++):(h=e,0===x&&M(we)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=function(){var C,O,V,K,se,xe,je,pe,Le,Me;if(x++,C=t,(O=hn())===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e){if(K=[],se=t,(xe=Ya())!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if(46===s.charCodeAt(t)?(pe=_t,t++):(pe=e,0===x&&M(kt)),pe===e&&(pe=null),pe!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();Le!==e?((Me=hn())===e&&(Me=null),Me!==e?se=xe=[xe,je,pe,Le,Me]:(t=se,se=e)):(t=se,se=e)}else t=se,se=e;else t=se,se=e}else t=se,se=e;for(;se!==e;)if(K.push(se),se=t,(xe=Ya())!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if(46===s.charCodeAt(t)?(pe=_t,t++):(pe=e,0===x&&M(kt)),pe===e&&(pe=null),pe!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();Le!==e?((Me=hn())===e&&(Me=null),Me!==e?se=xe=[xe,je,pe,Le,Me]:(t=se,se=e)):(t=se,se=e)}else t=se,se=e;else t=se,se=e}else t=se,se=e;K!==e?(O=function(n,h){var b=[];null!=n&&n!=[]&&b.push(n);for(var y=0;y<h.length;y++)for(var _=0;_<h[y].length;_++)null!=h[y][_]&&null!=h[y][_].token&&b.push(h[y][_]);var T=[],C=[],O=[],V=[];for(y=0;y<b.length;y++)if("triplespattern"!==b[y].token&&"filter"!==b[y].token&&"bind"!==b[y].token){if(0!=C.length||0!=O.length){var K=[];for(_=0;_<C.length;_++)K=K.concat(C[_].triplesContext);K.length>0&&T.push({token:"basicgraphpattern",triplesContext:K}),C=[]}T.push(b[y])}else"triplespattern"===b[y].token?C.push(b[y]):"bind"===b[y].token?V.push(b[y]):O.push(b[y]);if(0!=C.length||0!=O.length){for(K=[],_=0;_<C.length;_++)K=K.concat(C[_].triplesContext);K.length>0&&T.push({token:"basicgraphpattern",triplesContext:K})}return{token:"groupgraphpattern",patterns:T,filters:O,binds:V}}(O,K),C=O):(t=C,C=e)}else t=C,C=e}else t=C,C=e;return x--,C===e&&(O=e,0===x&&M(ec)),C}())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?(125===s.charCodeAt(t)?(T=Te,t++):(T=e,0===x&&M(Pe)),T!==e?n=h=y:(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Zl)),n}function hn(){var n,h,b,y,_,T;if(x++,n=t,(h=function(){var C,O,V,K,se,xe;for(x++,C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if((V=vn())!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e&&(se=iu())!==e?(O=function(n,h){var b=h.triplesContext,y=n;if(h.pairs)for(var _=0;_<h.pairs.length;_++){var T=h.pairs[_],C=null;null!=T[1].length&&(T[1]=T[1][0]),y.token&&"triplesnodecollection"===y.token?("path"===(C={subject:y.chainSubject[0],predicate:T[0],object:T[1]}).predicate.token&&"element"===C.predicate.kind&&(C.predicate=C.predicate.value),b.push(C),b=b.concat(y.triplesContext)):("path"===(C={subject:y,predicate:T[0],object:T[1]}).predicate.token&&"element"===C.predicate.kind&&(C.predicate=C.predicate.value),b.push(C))}var O={token:"triplessamesubject"};return O.triplesContext=b,O.chainSubject=y,O}(V,se),C=O):(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if((V=au())!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e&&(x++,(xe=function(){var je,pe,Le,Me,Ae,Be,Qe,qe,Ze,Ge,nt,ut,Ye;if(x++,je=t,(pe=cr())===e&&(pe=fr()),pe!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();if(Le!==e)if((Me=nu())!==e){for(Ae=[],Be=t,Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();if(Qe!==e)if(59===s.charCodeAt(t)?(qe=Rt,t++):(qe=e,0===x&&M(Ot)),qe!==e){for(Ze=[],Ge=L();Ge!==e;)Ze.push(Ge),Ge=L();if(Ze!==e){if(Ge=t,(nt=cr())===e&&(nt=fr()),nt!==e){for(ut=[],Ye=L();Ye!==e;)ut.push(Ye),Ye=L();ut!==e&&(Ye=Xt())!==e?Ge=nt=[nt,ut,Ye]:(t=Ge,Ge=e)}else t=Ge,Ge=e;Ge===e&&(Ge=null),Ge!==e?Be=Qe=[Qe,qe,Ze,Ge]:(t=Be,Be=e)}else t=Be,Be=e}else t=Be,Be=e;else t=Be,Be=e;for(;Be!==e;){for(Ae.push(Be),Be=t,Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();if(Qe!==e)if(59===s.charCodeAt(t)?(qe=Rt,t++):(qe=e,0===x&&M(Ot)),qe!==e){for(Ze=[],Ge=L();Ge!==e;)Ze.push(Ge),Ge=L();if(Ze!==e){if(Ge=t,(nt=cr())===e&&(nt=fr()),nt!==e){for(ut=[],Ye=L();Ye!==e;)ut.push(Ye),Ye=L();ut!==e&&(Ye=Xt())!==e?Ge=nt=[nt,ut,Ye]:(t=Ge,Ge=e)}else t=Ge,Ge=e;Ge===e&&(Ge=null),Ge!==e?Be=Qe=[Qe,qe,Ze,Ge]:(t=Be,Be=e)}else t=Be,Be=e}else t=Be,Be=e;else t=Be,Be=e}Ae!==e?(pe=function(n,h,b){for(var y={token:"propertylist"},_=[],T=[],C=0;C<h.length;C++)null!=h[C].triplesContext?(_=_.concat(h[C].triplesContext),"triplesnodecollection"===h[C].token&&null!=h[C].chainSubject.length?T.push([n,h[C].chainSubject[0]]):T.push([n,h[C].chainSubject])):T.push([n,h[C]]);for(C=0;C<b.length;C++)for(var O=b[C][3],V=O[0],K=O[2]||[],se=0;se<K.length;se++)null!=K[se].triplesContext?(_=_.concat(K[se].triplesContext),T.push([V,K[se].chainSubject])):T.push([V,K[se]]);return y.pairs=T,y.triplesContext=_,y}(pe,Me,Ae),je=pe):(t=je,je=e)}else t=je,je=e;else t=je,je=e}else t=je,je=e;return x--,je===e&&(pe=e,0===x&&M($c)),je}())===e&&(xe=null),x--,xe===e&&0===x&&M(df),(se=xe)!==e)?(O=function(n,h){var b=n.triplesContext,y=n.chainSubject;if(null!=h&&null!=h.pairs)for(var _=0;_<h.pairs.length;_++){var T=h.pairs[_];if(null!=T[1].length&&(T[1]=T[1][0]),"triplesnodecollection"===n.token)for(var C=0;C<y.length;C++){var O=y[C];if(null!=O.triplesContext){var V={subject:O.chainSubject,predicate:T[0],object:T[1]};b.concat(O.triplesContext)}else V={subject:y[C],predicate:T[0],object:T[1]},b.push(V)}else V={subject:y,predicate:T[0],object:T[1]},b.push(V)}var K={token:"triplessamesubject"};return K.triplesContext=b,K.chainSubject=y,K}(V,se),C=O):(t=C,C=e)}else t=C,C=e;else t=C,C=e}return x--,C===e&&(O=e,0===x&&M(lf)),C}())!==e){for(b=t,y=[],_=L();_!==e;)y.push(_),_=L();y!==e?(46===s.charCodeAt(t)?(_=_t,t++):(_=e,0===x&&M(kt)),_!==e?((T=hn())===e&&(T=null),T!==e?b=y=[y,_,T]:(t=b,b=e)):(t=b,b=e)):(t=b,b=e),b===e&&(b=null),b!==e?n=h=function(n,h){var b=n.triplesContext;return null!=h&&"object"==typeof h&&null!=h&&null!=h.length&&null!=h[2]&&null!=h[2].triplesContext&&(b=b.concat(h[2].triplesContext)),{token:"triplespattern",triplesContext:b}}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(rc)),n}function Ya(){var n,h,b,y,_;return x++,(n=function(){var h,b,y,_,T,C,O,V;if(x++,h=t,(b=Ft())!==e){for(y=[],_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(s.substr(t,5)===Mr?(C=Mr,t+=5):(C=e,0===x&&M(xo)),C===e&&(s.substr(t,5)===Qr?(C=Qr,t+=5):(C=e,0===x&&M(wo))),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Ft())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;for(;_!==e;){for(y.push(_),_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(s.substr(t,5)===Mr?(C=Mr,t+=5):(C=e,0===x&&M(xo)),C===e&&(s.substr(t,5)===Qr?(C=Qr,t+=5):(C=e,0===x&&M(wo))),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Ft())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}y!==e?(b=function(n,h){if(0===h.length)return n;for(var b={token:"graphunionpattern",value:[n]},y=0;y<h.length;y++)y==h.length-1?b.value.push(h[y][3]):(b.value.push(h[y][3]),b={token:"graphunionpattern",value:[b]});return b}(b,y),h=b):(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(mc)),h}())===e&&(n=function(){var h,b,y,_,T;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(s.substr(t,8)===vo?(y=vo,t+=8):(y=e,0===x&&M(sc)),y===e&&(s.substr(t,8)===yo?(y=yo,t+=8):(y=e,0===x&&M(ac))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e&&(T=Ft())!==e?(b=function(n){return{token:"optionalgraphpattern",value:n}}(T),h=b):(t=h,h=e)}else t=h,h=e;else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(oc)),h}())===e&&(n=function(){var h,b,y,_;if(x++,h=t,"MINUS"===s.substr(t,5)?(b="MINUS",t+=5):(b=e,0===x&&M(vc)),b===e&&("minus"===s.substr(t,5)?(b="minus",t+=5):(b=e,0===x&&M(yc))),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e&&(_=Ft())!==e?(b=function(n){return{token:"minusgraphpattern",status:"todo",value:n}}(_),h=b):(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(dc)),h}())===e&&(n=function(){var h,b,y,_,T,C,O;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(s.substr(t,5)===rr?(y=rr,t+=5):(y=e,0===x&&M(On)),y===e&&(s.substr(t,5)===nr?(y=nr,t+=5):(y=e,0===x&&M(Ln))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=pr())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=Ft())!==e?(b=function(n,h){for(var b=0;b<h.patterns.length;b++)for(var y=h.patterns[b],_=0;_<y.triplesContext.length;_++)y.triplesContext[_].graph=n;return h.token="groupgraphpattern",h}(T,O),h=b):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(lc)),h}())===e&&(x++,h=t,s.substr(t,7)===go?(b=go,t+=7):(b=e,0===x&&M(pc)),b!==e&&(y=pr())!==e&&(_=Ft())!==e?(b=function(n,h){return{token:"servicegraphpattern",status:"todo",value:[n,h]}}(y,_),h=b):(t=h,h=e),x--,h===e&&(b=e,0===x&&M(fc)),(n=h)===e)&&(n=function(){var h,b,y,_,T;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if("FILTER"===s.substr(t,6)?(y="FILTER",t+=6):(y=e,0===x&&M(wc)),y===e&&("filter"===s.substr(t,6)?(y="filter",t+=6):(y=e,0===x&&M(_c))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e&&(T=si())!==e?(b=function(n){return{token:"filter",value:n}}(T),h=b):(t=h,h=e)}else t=h,h=e;else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(xc)),h}())===e&&(n=function(){var h,b,y,_,T,C,O,V,K,se,xe,je,pe;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if("BIND"===s.substr(t,4)?(y="BIND",t+=4):(y=e,0===x&&M(Ac)),y===e&&("bind"===s.substr(t,4)?(y="bind",t+=4):(y=e,0===x&&M(Fc))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if((O=rt())!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if(s.substr(t,2)===ae?(K=ae,t+=2):(K=e,0===x&&M(Ee)),K===e&&(s.substr(t,2)===re?(K=re,t+=2):(K=e,0===x&&M(ve))),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if((xe=gt())!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(41===s.charCodeAt(t)?(pe=Fe,t++):(pe=e,0===x&&M(Re)),pe!==e?(b=function(n,h){return{token:"bind",expression:n,as:h}}(O,xe),h=b):(t=h,h=e)):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(Ec)),h}())===e&&(n=function(){var h,b,y,_,T;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(s.substr(t,6)===Rr?(y=Rr,t+=6):(y=e,0===x&&M(Gi)),y===e&&(s.substr(t,6)===Or?(y=Or,t+=6):(y=e,0===x&&M(qi))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e&&(T=Za())!==e?h=b=T:(t=h,h=e)}else t=h,h=e;else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(Tc)),h}()),x--,n===e&&0===x&&M(ic),n}function si(){var n;return x++,(n=mi())===e&&(n=bi())===e&&(n=eu()),x--,n===e&&0===x&&M(Sc),n}function Za(){var n;return x++,(n=function(){var h,b,y,_,T,C,O,V;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=gt())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(123===s.charCodeAt(t)?(T=fe,t++):(T=e,0===x&&M(we)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e){for(O=[],V=lr();V!==e;)O.push(V),V=lr();O!==e?(125===s.charCodeAt(t)?(V=Te,t++):(V=e,0===x&&M(Pe)),V!==e?(b=function(n,h){return{token:"inlineData",values:[{var:n,value:h}]}}(y,O),h=b):(t=h,h=e)):(t=h,h=e)}else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(Nc)),h}())===e&&(n=function(){var h,b,y,_,T,C,O,V,K,se,xe,je,pe,Le,Me,Ae;for(x++,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e){if((y=Dt())===e)if(y=t,40===s.charCodeAt(t)?(_=I,t++):(_=e,0===x&&M(H)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e){for(C=[],O=gt();O!==e;)C.push(O),O=gt();if(C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e?(41===s.charCodeAt(t)?(V=Fe,t++):(V=e,0===x&&M(Re)),V!==e?y=_=[_,T,C,O,V]:(t=y,y=e)):(t=y,y=e)}else t=y,y=e}else t=y,y=e}else t=y,y=e;if(y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(123===s.charCodeAt(t)?(T=fe,t++):(T=e,0===x&&M(we)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e){for(O=[],V=t,K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e)if(40===s.charCodeAt(t)?(se=I,t++):(se=e,0===x&&M(H)),se!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();if(xe!==e){for(je=[],pe=lr();pe!==e;)je.push(pe),pe=lr();if(je!==e){for(pe=[],Le=L();Le!==e;)pe.push(Le),Le=L();if(pe!==e)if(41===s.charCodeAt(t)?(Le=Fe,t++):(Le=e,0===x&&M(Re)),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();Me!==e?V=K=[K,se,xe,je,pe,Le,Me]:(t=V,V=e)}else t=V,V=e;else t=V,V=e}else t=V,V=e}else t=V,V=e}else t=V,V=e;else t=V,V=e;for(V===e&&(V=Dt());V!==e;){for(O.push(V),V=t,K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e)if(40===s.charCodeAt(t)?(se=I,t++):(se=e,0===x&&M(H)),se!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();if(xe!==e){for(je=[],pe=lr();pe!==e;)je.push(pe),pe=lr();if(je!==e){for(pe=[],Le=L();Le!==e;)pe.push(Le),Le=L();if(pe!==e)if(41===s.charCodeAt(t)?(Le=Fe,t++):(Le=e,0===x&&M(Re)),Le!==e){for(Me=[],Ae=L();Ae!==e;)Me.push(Ae),Ae=L();Me!==e?V=K=[K,se,xe,je,pe,Le,Me]:(t=V,V=e)}else t=V,V=e;else t=V,V=e}else t=V,V=e}else t=V,V=e}else t=V,V=e;else t=V,V=e;V===e&&(V=Dt())}if(O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?(125===s.charCodeAt(t)?(K=Te,t++):(K=e,0===x&&M(Pe)),K!==e?h=b={token:"inlineData",values:[],todo:!0}:(t=h,h=e)):(t=h,h=e)}else t=h,h=e}else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(Oc)),h}()),x--,n===e&&0===x&&M(Ic),n}function lr(){var n,h,b,y,_;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if((b=xn())===e&&(b=gn())===e&&(b=mn())===e&&(b=bn())===e&&(s.substr(t,5)===Nr?(b=Nr,t+=5):(b=e,0===x&&M(Ui))),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e?n=h=b:(t=n,n=e)}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Dc)),n}function eu(){var n,h,b,y;if(x++,n=t,(h=mt())!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e&&(y=tu())!==e?n=h=function(n,h){var b={token:"expression",expressionType:"irireforfunction"};return b.iriref=n,b.args=h.value,b}(h,y):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Pc)),n}function tu(){var n,h,b,y,_,T,C,O,V,K,se,xe;if(x++,n=t,(h=Dt())!==e&&(h={token:"args",value:[]}),(n=h)===e)if(n=t,40===s.charCodeAt(t)?(h=I,t++):(h=e,0===x&&M(H)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(s.substr(t,8)===ye?(y=ye,t+=8):(y=e,0===x&&M(be)),y===e&&(s.substr(t,8)===de?(y=de,t+=8):(y=e,0===x&&M(le))),y===e&&(y=null),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e){if(O=[],V=t,44===s.charCodeAt(t)?(K=dt,t++):(K=e,0===x&&M(vt)),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e&&(xe=rt())!==e?V=K=[K,se,xe]:(t=V,V=e)}else t=V,V=e;for(;V!==e;)if(O.push(V),V=t,44===s.charCodeAt(t)?(K=dt,t++):(K=e,0===x&&M(vt)),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e&&(xe=rt())!==e?V=K=[K,se,xe]:(t=V,V=e)}else t=V,V=e;O!==e?(41===s.charCodeAt(t)?(V=Fe,t++):(V=e,0===x&&M(Re)),V!==e?n=h=function(n,h,b){for(var y=[],_=0;_<b.length;_++)y.push(b[_][2]);var T={token:"args"};return T.value=[h].concat(y),null!=n&&"DISTINCT"===n.toUpperCase()?T.distinct=!0:T.distinct=!1,T}(y,T,O):(t=n,n=e)):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Mc)),n}function wr(){var n,h,b,y,_,T,C,O,V,K;if(x++,n=t,(h=Dt())!==e&&(h={token:"args",value:[]}),(n=h)===e)if(n=t,40===s.charCodeAt(t)?(h=I,t++):(h=e,0===x&&M(H)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=mt())===e&&(y=rt()),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e){if(T=[],C=t,44===s.charCodeAt(t)?(O=dt,t++):(O=e,0===x&&M(vt)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?((K=mt())===e&&(K=rt()),K!==e?C=O=[O,V,K]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e;for(;C!==e;)if(T.push(C),C=t,44===s.charCodeAt(t)?(O=dt,t++):(O=e,0===x&&M(vt)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?((K=mt())===e&&(K=rt()),K!==e?C=O=[O,V,K]:(t=C,C=e)):(t=C,C=e)}else t=C,C=e;T!==e?(41===s.charCodeAt(t)?(C=Fe,t++):(C=e,0===x&&M(Re)),C!==e?n=h=function(n,h){for(var b=[],y=0;y<h.length;y++)b.push(h[y][2]);var _={token:"args"};return _.value=[n].concat(b),_}(y,T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Uc)),n}function ru(){var n,h,b,y,_,T;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if((b=vn())!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e&&(_=ai())!==e?n=h=function(n,h){var b=h.triplesContext,y=n;if(h.pairs)for(var _=0;_<h.pairs.length;_++){var T=h.pairs[_],C=null;null!=T[1].length&&(T[1]=T[1][0]),y.token&&"triplesnodecollection"===y.token?(C={subject:y.chainSubject[0],predicate:T[0],object:T[1]},b.push(C),b=b.concat(y.triplesContext)):(C={subject:y,predicate:T[0],object:T[1]},b.push(C))}var O={token:"triplessamesubject"};return O.triplesContext=b,O.chainSubject=y,O}(b,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if((b=uu())!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e&&(x++,(T=ai())===e&&(T=null),x--,T===e&&0===x&&M(ef),(_=T)!==e)?n=h=function(n,h){var b=n.triplesContext,y=n.chainSubject;if(h.pairs)for(var _=0;_<h.pairs.length;_++){var T=h.pairs[_];if(null!=T[1].length&&(T[1]=T[1][0]),"triplesnodecollection"===n.token)for(var C=0;C<y.length;C++){var O=y[C];if(null!=O.triplesContext){var V={subject:O.chainSubject,predicate:T[0],object:T[1]};b.concat(O.triplesContext)}else V={subject:y[C],predicate:T[0],object:T[1]},b.push(V)}else V={subject:y,predicate:T[0],object:T[1]},b.push(V)}var K={token:"triplessamesubject"};return K.triplesContext=b,K.chainSubject=y,K}(b,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}return x--,n===e&&(h=e,0===x&&M(zc)),n}function ai(){var n,h,b,y,_,T,C,O,V,K,se,xe,je;if(x++,n=t,(h=ci())!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=Xt())!==e){for(_=[],T=t,C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(59===s.charCodeAt(t)?(O=Rt,t++):(O=e,0===x&&M(Ot)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e){if(K=t,(se=ci())!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();xe!==e&&(je=Xt())!==e?K=se=[se,xe,je]:(t=K,K=e)}else t=K,K=e;K===e&&(K=null),K!==e?T=C=[C,O,V,K]:(t=T,T=e)}else t=T,T=e}else t=T,T=e;else t=T,T=e;for(;T!==e;){for(_.push(T),T=t,C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(59===s.charCodeAt(t)?(O=Rt,t++):(O=e,0===x&&M(Ot)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e){if(K=t,(se=ci())!==e){for(xe=[],je=L();je!==e;)xe.push(je),je=L();xe!==e&&(je=Xt())!==e?K=se=[se,xe,je]:(t=K,K=e)}else t=K,K=e;K===e&&(K=null),K!==e?T=C=[C,O,V,K]:(t=T,T=e)}else t=T,T=e}else t=T,T=e;else t=T,T=e}_!==e?n=h=function(n,h,b){for(var y={token:"propertylist"},_=[],T=[],C=0;C<h.length;C++)null!=h[C].triplesContext?(_=_.concat(h[C].triplesContext),"triplesnodecollection"===h[C].token&&null!=h[C].chainSubject.length?T.push([n,h[C].chainSubject[0]]):T.push([n,h[C].chainSubject])):T.push([n,h[C]]);for(C=0;C<b.length;C++)for(var O=b[C][3],V=O[0],K=O[2]||[],se=0;se<K.length;se++)null!=K[se].triplesContext?(_=_.concat(K[se].triplesContext),T.push([V,K[se].chainSubject])):T.push([V,K[se]]);return y.pairs=T,y.triplesContext=_,y}(h,y,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Yc)),n}function nu(){var n,h,b,y,_,T,C,O;if(x++,n=t,(h=ui())!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e){if(y=[],_=t,44===s.charCodeAt(t)?(T=dt,t++):(T=e,0===x&&M(vt)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=ui())!==e?_=T=[T,C,O]:(t=_,_=e)}else t=_,_=e;for(;_!==e;)if(y.push(_),_=t,44===s.charCodeAt(t)?(T=dt,t++):(T=e,0===x&&M(vt)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=ui())!==e?_=T=[T,C,O]:(t=_,_=e)}else t=_,_=e;y!==e?n=h=function(n,h){var b=[];b.push(n);for(var y=0;y<h.length;y++)for(var _=0;_<h[y].length;_++)"object"==typeof h[y][_]&&null!=h[y][_].token&&b.push(h[y][_]);return b}(h,y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(tf)),n}function Xt(){var n,h,b,y,_,T,C,O;if(x++,n=t,(h=li())!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e){if(y=[],_=t,44===s.charCodeAt(t)?(T=dt,t++):(T=e,0===x&&M(vt)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=li())!==e?_=T=[T,C,O]:(t=_,_=e)}else t=_,_=e;for(;_!==e;)if(y.push(_),_=t,44===s.charCodeAt(t)?(T=dt,t++):(T=e,0===x&&M(vt)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=li())!==e?_=T=[T,C,O]:(t=_,_=e)}else t=_,_=e;y!==e?n=h=function(n,h){var b=[];b.push(n);for(var y=0;y<h.length;y++)for(var _=0;_<h[y].length;_++)"object"==typeof h[y][_]&&null!=h[y][_].token&&b.push(h[y][_]);return b}(h,y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(nf)),n}function ui(){var n;return x++,n=di(),x--,n===e&&0===x&&M(sf),n}function li(){var n;return x++,n=vi(),x--,n===e&&0===x&&M(af),n}function ci(){var n,h;return x++,(n=pr())===e&&(n=t,97===s.charCodeAt(t)?(h="a",t++):(h=e,0===x&&M(Gr)),h!==e&&(h={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),n=h),x--,n===e&&(h=e,0===x&&M(uf)),n}function iu(){var n,h,b,y,_,T,C,O,V,K,se,xe;if(x++,n=t,(h=cr())===e&&(h=fr()),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=nu())!==e){for(_=[],T=t,C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(59===s.charCodeAt(t)?(O=Rt,t++):(O=e,0===x&&M(Ot)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?(K=t,(se=cr())===e&&(se=fr()),se!==e&&(xe=Xt())!==e?K=se=[se,xe]:(t=K,K=e),K===e&&(K=null),K!==e?T=C=[C,O,V,K]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;else t=T,T=e;for(;T!==e;){for(_.push(T),T=t,C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(59===s.charCodeAt(t)?(O=Rt,t++):(O=e,0===x&&M(Ot)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?(K=t,(se=cr())===e&&(se=fr()),se!==e&&(xe=Xt())!==e?K=se=[se,xe]:(t=K,K=e),K===e&&(K=null),K!==e?T=C=[C,O,V,K]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;else t=T,T=e}_!==e?n=h=function(n,h,b){for(var y={token:"propertylist"},_=[],T=[],C=0;C<h.length;C++)null!=h[C].triplesContext?(_=_.concat(h[C].triplesContext),"triplesnodecollection"===h[C].token&&null!=h[C].chainSubject.length?T.push([n,h[C].chainSubject[0]]):T.push([n,h[C].chainSubject])):T.push([n,h[C]]);for(C=0;C<b.length;C++)for(var O=b[C][3],V=O[0],K=O[1]||[],se=0;se<K.length;se++)null!=K[se].triplesContext?(_=_.concat(K[se].triplesContext),T.push([V,K[se].chainSubject])):T.push([V,K[se]]);return y.pairs=T,y.triplesContext=_,y}(h,y,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(pf)),n}function cr(){var n,h;return x++,t,(h=ou())!==e&&(h=function(n){return{token:"path",kind:"element"}.value=n,n}(h)),x--,(n=h)===e&&(h=e,0===x&&M(vf)),n}function fr(){var n;return x++,n=gt(),x--,n===e&&0===x&&M(gf),n}function ou(){var n;return x++,n=function(){var h,b,y,_,T,C;if(x++,h=t,(b=fi())!==e){for(y=[],_=t,124===s.charCodeAt(t)?(T="|",t++):(T=e,0===x&&M(Hr)),T!==e&&(C=fi())!==e?_=T=[T,C]:(t=_,_=e);_!==e;)y.push(_),_=t,124===s.charCodeAt(t)?(T="|",t++):(T=e,0===x&&M(Hr)),T!==e&&(C=fi())!==e?_=T=[T,C]:(t=_,_=e);y!==e?(b=function(n,h){if(null==h||0===h.length)return n;for(var b=[],y=0;y<h.length;y++)b.push(h[1]);var _={token:"path",kind:"alternative"};return _.value=b,_}(b,y),h=b):(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(bf)),h}(),x--,n===e&&0===x&&M(mf),n}function fi(){var n,h,b,y,_,T;if(x++,n=t,(h=pi())!==e){for(b=[],y=t,47===s.charCodeAt(t)?(_="/",t++):(_=e,0===x&&M(zt)),_!==e&&(T=pi())!==e?y=_=[_,T]:(t=y,y=e);y!==e;)b.push(y),y=t,47===s.charCodeAt(t)?(_="/",t++):(_=e,0===x&&M(zt)),_!==e&&(T=pi())!==e?y=_=[_,T]:(t=y,y=e);b!==e?n=h=function(n,h){if(null==h||0===h.length)return n;for(var b=[n],y=0;y<h.length;y++)b.push(h[y][1]);var _={token:"path",kind:"sequence"};return _.value=b,_}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(wf)),n}function su(){var n,h,b,y,_,T,C;return x++,n=t,x++,(y=mt())===e&&(y=t,97===s.charCodeAt(t)?(_="a",t++):(_=e,0===x&&M(Gr)),_!==e&&(_={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(y=_)===e&&(y=t,33===s.charCodeAt(t)?(_="!",t++):(_=e,0===x&&M(Qn)),_!==e&&(T=function(){var O,V,K,se,xe,je,pe,Le;if((O=dn())===e)if(O=t,40===s.charCodeAt(t)?(V=I,t++):(V=e,0===x&&M(H)),V!==e){if(K=t,(se=dn())!==e){for(xe=[],je=t,124===s.charCodeAt(t)?(pe="|",t++):(pe=e,0===x&&M(Hr)),pe!==e&&(Le=dn())!==e?je=pe=[pe,Le]:(t=je,je=e);je!==e;)xe.push(je),je=t,124===s.charCodeAt(t)?(pe="|",t++):(pe=e,0===x&&M(Hr)),pe!==e&&(Le=dn())!==e?je=pe=[pe,Le]:(t=je,je=e);xe!==e?K=se=[se,xe]:(t=K,K=e)}else t=K,K=e;K===e&&(K=null),K!==e?(41===s.charCodeAt(t)?(se=Fe,t++):(se=e,0===x&&M(Re)),se!==e?O=V=[V,K,se]:(t=O,O=e)):(t=O,O=e)}else t=O,O=e;return O}())!==e?y=_=[_,T]:(t=y,y=e),y===e&&(y=t,40===s.charCodeAt(t)?(_=I,t++):(_=e,0===x&&M(H)),_!==e&&(T=ou())!==e?(41===s.charCodeAt(t)?(C=Fe,t++):(C=e,0===x&&M(Re)),C!==e?y=_=T:(t=y,y=e)):(t=y,y=e)))),x--,y===e&&(_=e,0===x&&M(Sf)),(h=y)!==e?((b=function(){var y,_,T,C,O,V,K,se,xe;return x++,42===s.charCodeAt(t)?(y=Je,t++):(y=e,0===x&&M(Ve)),y===e&&(63===s.charCodeAt(t)?(y="?",t++):(y=e,0===x&&M(Bn)),y===e&&(43===s.charCodeAt(t)?(y=Mt,t++):(y=e,0===x&&M(Qt)),y===e&&(y=t,123===s.charCodeAt(t)?(_=fe,t++):(_=e,0===x&&M(we)),_!==e?(T=t,(C=hi())!==e?(O=t,44===s.charCodeAt(t)?(V=dt,t++):(V=e,0===x&&M(vt)),V!==e?(125===s.charCodeAt(t)?(K=Te,t++):(K=e,0===x&&M(Pe)),K===e&&(K=t,(se=hi())!==e?(125===s.charCodeAt(t)?(xe=Te,t++):(xe=e,0===x&&M(Pe)),xe!==e?K=se=[se,xe]:(t=K,K=e)):(t=K,K=e)),K!==e?O=V=[V,K]:(t=O,O=e)):(t=O,O=e),O===e&&(125===s.charCodeAt(t)?(O=Te,t++):(O=e,0===x&&M(Pe))),O!==e?T=C=[C,O]:(t=T,T=e)):(t=T,T=e),T===e&&(T=t,44===s.charCodeAt(t)?(C=dt,t++):(C=e,0===x&&M(vt)),C!==e&&(O=hi())!==e?(125===s.charCodeAt(t)?(V=Te,t++):(V=e,0===x&&M(Pe)),V!==e?T=C=[C,O,V]:(t=T,T=e)):(t=T,T=e)),T!==e?y=_=[_,T]:(t=y,y=e)):(t=y,y=e)))),x--,y===e&&(_=e,0===x&&M(Cf)),y}())===e&&(b=null),b!==e?n=h=function(n,h){if(n.token&&"path"!=n.token&&""==h)return n;if(n.token&&n.token!=b&&""!=h){var b={token:"path",kind:"element"};return b.value=n,b.modifier=h,b}return n.modifier=h,n}(h,b):(t=n,n=e)):(t=n,n=e),x--,n===e&&(h=e,0===x&&M(kf)),n}function pi(){var n,h,b;return x++,(n=su())===e&&(n=t,94===s.charCodeAt(t)?(h="^",t++):(h=e,0===x&&M(To)),h!==e&&(b=su())!==e?n=h=function(n){var h={token:"path",kind:"inversePath"};return h.value=n,h}(b):(t=n,n=e)),x--,n===e&&(h=e,0===x&&M(Af)),n}function dn(){var n,h,b;return x++,(n=mt())===e&&(97===s.charCodeAt(t)?(n="a",t++):(n=e,0===x&&M(Gr)),n===e&&(n=t,94===s.charCodeAt(t)?(h="^",t++):(h=e,0===x&&M(To)),h!==e?((b=mt())===e&&(97===s.charCodeAt(t)?(b="a",t++):(b=e,0===x&&M(Gr))),b!==e?n=h=[h,b]:(t=n,n=e)):(t=n,n=e))),x--,n===e&&(h=e,0===x&&M(Tf)),n}function hi(){var n;return x++,n=hr(),x--,n===e&&0===x&&M(jf),n}function au(){var n,h;return x++,n=t,(h=function(){var b,y,_,T,C,O,V,K,se;for(x++,b=t,y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(40===s.charCodeAt(t)?(_=I,t++):(_=e,0===x&&M(H)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e){if(C=[],(O=di())!==e)for(;O!==e;)C.push(O),O=di();else C=e;if(C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(41===s.charCodeAt(t)?(V=Fe,t++):(V=e,0===x&&M(Re)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e?b=y=C:(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e}else t=b,b=e}else t=b,b=e;else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Mf)),b}())!==e&&(h=function(n){for(var h=[],b=[],y=null,_=0;_<n.length;_++){At++;var T=null;null==n[_].chainSubject&&null==n[_].triplesContext?T=n[_]:(T=n[_].chainSubject,h=h.concat(n[_].triplesContext)),y={subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:T},0==_&&b.push(y.subject),h.push(y),y=_===n.length-1?{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(At+1)}},h.push(y)}return{token:"triplesnodecollection",triplesContext:h,chainSubject:b}}(h)),(n=h)===e&&(n=function(){var b,y,_,T,C,O,V,K;for(x++,b=t,y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(91===s.charCodeAt(t)?(_="[",t++):(_=e,0===x&&M(Gn)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if((C=iu())!==e)if(93===s.charCodeAt(t)?(O="]",t++):(O=e,0===x&&M(Hn)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?(y=function(n){for(var h={token:"blank",value:"_:"+ ++At},b=[],y=0;y<n.pairs.length;y++){var _=n.pairs[y],T={};T.subject=h,T.predicate=_[0],null!=_[1].length&&(_[1]=_[1][0]),T.object=_[1],b.push(T)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:n.triplesContext.concat(b),chainSubject:h}}(C),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Lf)),b}()),x--,n===e&&(h=e,0===x&&M(If)),n}function uu(){var n,h;return x++,n=t,(h=function(){var b,y,_,T,C,O,V,K,se;for(x++,b=t,y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(40===s.charCodeAt(t)?(_=I,t++):(_=e,0===x&&M(H)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e){if(C=[],(O=vi())!==e)for(;O!==e;)C.push(O),O=vi();else C=e;if(C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(41===s.charCodeAt(t)?(V=Fe,t++):(V=e,0===x&&M(Re)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e?b=y=C:(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e}else t=b,b=e}else t=b,b=e;else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Qf)),b}())!==e&&(h=function(n){for(var h=[],b=[],y=null,_=0;_<n.length;_++){At++;var T=null;null==n[_].chainSubject&&null==n[_].triplesContext?T=n[_]:(T=n[_].chainSubject,h=h.concat(T.triplesContext)),y={subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:T},0==_&&b.push(y.subject),h.push(y),y=_===n.length-1?{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+At},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(At+1)}},h.push(y)}return{token:"triplesnodecollection",triplesContext:h,chainSubject:b}}(h)),(n=h)===e&&(n=function(){var b,y,_,T,C,O,V,K,se;for(x++,b=t,y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(91===s.charCodeAt(t)?(_="[",t++):(_=e,0===x&&M(Gn)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if((C=ai())!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(93===s.charCodeAt(t)?(V="]",t++):(V=e,0===x&&M(Hn)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e?(y=function(n){for(var h={token:"blank",value:"_:"+ ++At},b=[],y=0;y<n.pairs.length;y++){var _=n.pairs[y],T={};T.subject=h,T.predicate=_[0],null!=_[1].length&&(_[1]=_[1][0]),T.object=_[1],b.push(T)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:n.triplesContext.concat(b),chainSubject:h}}(C),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Pf)),b}()),x--,n===e&&(h=e,0===x&&M(Rf)),n}function di(){var n,h,b,y,_,T;for(x++,t,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=vn())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?h=b=[b,y,_]:(t=h,h=e)}else t=h,h=e;else t=h,h=e;if(h===e){for(h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=au())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?h=b=[b,y,_]:(t=h,h=e)}else t=h,h=e;else t=h,h=e}return h!==e&&(h=Io(h)),x--,(n=h)===e&&(h=e,0===x&&M(Uf)),n}function vi(){var n,h,b,y,_,T;for(x++,t,h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=vn())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?h=b=[b,y,_]:(t=h,h=e)}else t=h,h=e;else t=h,h=e;if(h===e){for(h=t,b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=uu())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?h=b=[b,y,_]:(t=h,h=e)}else t=h,h=e;else t=h,h=e}return h!==e&&(h=Io(h)),x--,(n=h)===e&&(h=e,0===x&&M(Gf)),n}function vn(){var n,h,b,y,_,T,C;return x++,(n=gt())===e&&(x++,(h=mt())===e&&(h=gn())===e&&(h=mn())===e&&(h=bn())===e&&(x++,b=t,x++,_=t,"_:"===s.substr(t,2)?(T="_:",t+=2):(T=e,0===x&&M(kd)),T!==e&&(C=pu())!==e?_=T=C:(t=_,_=e),x--,_===e&&(T=e,0===x&&M(_d)),(y=_)!==e&&(y=function(n){return{token:"blank",value:n}}(y)),(b=y)===e&&(b=t,(y=function(){var _,T,C,O;if(x++,_=t,91===s.charCodeAt(t)?(T="[",t++):(T=e,0===x&&M(Gn)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(93===s.charCodeAt(t)?(O="]",t++):(O=e,0===x&&M(Hn)),O!==e?_=T=[T,C,O]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e;return x--,_===e&&(T=e,0===x&&M(yv)),_}())!==e&&(y={token:"blank",value:"_:"+ ++At}),b=y),x--,b===e&&(y=e,0===x&&M(dd)),(h=b)===e)&&(h=Dt()),x--,h===e&&0===x&&M(zf),n=h),x--,n===e&&0===x&&M(qf),n}function pr(){var n;return x++,(n=gt())===e&&(n=mt()),x--,n===e&&0===x&&M(Hf),n}function gt(){var n,h,b,y,_,T,C,O;for(x++,n=t,h=[],b=L();b!==e;)h.push(b),b=L();if(h!==e)if(x++,T=t,63===s.charCodeAt(t)?(C="?",t++):(C=e,0===x&&M(Bn)),C!==e&&(O=fu())!==e?T=C=O:(t=T,T=e),x--,T===e&&(C=e,0===x&&M(Ad)),(b=T)===e&&(b=function(){var T,C,O;return x++,T=t,36===s.charCodeAt(t)?(C="$",t++):(C=e,0===x&&M(oa)),C!==e&&(O=fu())!==e?T=C=O:(t=T,T=e),x--,T===e&&(C=e,0===x&&M(Fd)),T}()),b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();y!==e?n=h=function(n){var h={token:"var"};return h.value=n,h}(b):(t=n,n=e)}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Vf)),n}function rt(){var n;return x++,n=function(){var h,b,y,_,T,C,O,V;if(x++,h=t,(b=yi())!==e){for(y=[],_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if("||"===s.substr(t,2)?(C="||",t+=2):(C=e,0===x&&M(No)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=yi())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;for(;_!==e;){for(y.push(_),_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if("||"===s.substr(t,2)?(C="||",t+=2):(C=e,0===x&&M(No)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=yi())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}y!==e?(b=function(n,h){if(0===h.length)return n;for(var b={token:"expression",expressionType:"conditionalor"},y=[n],_=0;_<h.length;_++)y.push(h[_][3]);return b.operands=y,b}(b,y),h=b):(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(Wf)),h}(),x--,n===e&&0===x&&M(Xf),n}function yi(){var n,h,b,y,_,T,C,O;if(x++,n=t,(h=gi())!==e){for(b=[],y=t,_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if("&&"===s.substr(t,2)?(T="&&",t+=2):(T=e,0===x&&M(Ro)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=gi())!==e?y=_=[_,T,C,O]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;for(;y!==e;){for(b.push(y),y=t,_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if("&&"===s.substr(t,2)?(T="&&",t+=2):(T=e,0===x&&M(Ro)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=gi())!==e?y=_=[_,T,C,O]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}b!==e?n=h=function(n,h){if(0===h.length)return n;for(var b={token:"expression",expressionType:"conditionaland"},y=[n],_=0;_<h.length;_++)y.push(h[_][3]);return b.operands=y,b}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Kf)),n}function gi(){var n;return x++,n=function(){var h,b,y,_,T,C,O,V,K,se,xe,je,pe;if(x++,h=t,(b=Et())!==e){for(y=[],_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(61===s.charCodeAt(t)?(C="=",t++):(C=e,0===x&&M(Xr)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if("!="===s.substr(t,2)?(C="!=",t+=2):(C=e,0===x&&M(Oo)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(60===s.charCodeAt(t)?(C="<",t++):(C=e,0===x&&M(Jn)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(62===s.charCodeAt(t)?(C=">",t++):(C=e,0===x&&M(Xn)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if("<="===s.substr(t,2)?(C="<=",t+=2):(C=e,0===x&&M(Lo)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(">="===s.substr(t,2)?(C=">=",t+=2):(C=e,0===x&&M(Do)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(73===s.charCodeAt(t)?(C="I",t++):(C=e,0===x&&M(Zr)),C===e&&(105===s.charCodeAt(t)?(C="i",t++):(C=e,0===x&&M(tn))),C!==e)if(78===s.charCodeAt(t)?(O="N",t++):(O=e,0===x&&M(or)),O===e&&(110===s.charCodeAt(t)?(O="n",t++):(O=e,0===x&&M(ar))),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e&&(K=wr())!==e?_=T=[T,C,O,V,K]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(78===s.charCodeAt(t)?(C="N",t++):(C=e,0===x&&M(or)),C===e&&(110===s.charCodeAt(t)?(C="n",t++):(C=e,0===x&&M(ar))),C!==e)if(79===s.charCodeAt(t)?(O="O",t++):(O=e,0===x&&M(Bo)),O===e&&(111===s.charCodeAt(t)?(O="o",t++):(O=e,0===x&&M(Qo))),O!==e)if(84===s.charCodeAt(t)?(V="T",t++):(V=e,0===x&&M(Go)),V===e&&(116===s.charCodeAt(t)?(V="t",t++):(V=e,0===x&&M(Ho))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e)if(73===s.charCodeAt(t)?(se="I",t++):(se=e,0===x&&M(Zr)),se===e&&(105===s.charCodeAt(t)?(se="i",t++):(se=e,0===x&&M(tn))),se!==e)if(78===s.charCodeAt(t)?(xe="N",t++):(xe=e,0===x&&M(or)),xe===e&&(110===s.charCodeAt(t)?(xe="n",t++):(xe=e,0===x&&M(ar))),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e&&(pe=wr())!==e?_=T=[T,C,O,V,K,se,xe,je,pe]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e;else t=_,_=e;else t=_,_=e}}}}}}}for(;_!==e;){for(y.push(_),_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(61===s.charCodeAt(t)?(C="=",t++):(C=e,0===x&&M(Xr)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if("!="===s.substr(t,2)?(C="!=",t+=2):(C=e,0===x&&M(Oo)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(60===s.charCodeAt(t)?(C="<",t++):(C=e,0===x&&M(Jn)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(62===s.charCodeAt(t)?(C=">",t++):(C=e,0===x&&M(Xn)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if("<="===s.substr(t,2)?(C="<=",t+=2):(C=e,0===x&&M(Lo)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(">="===s.substr(t,2)?(C=">=",t+=2):(C=e,0===x&&M(Do)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=Et())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(73===s.charCodeAt(t)?(C="I",t++):(C=e,0===x&&M(Zr)),C===e&&(105===s.charCodeAt(t)?(C="i",t++):(C=e,0===x&&M(tn))),C!==e)if(78===s.charCodeAt(t)?(O="N",t++):(O=e,0===x&&M(or)),O===e&&(110===s.charCodeAt(t)?(O="n",t++):(O=e,0===x&&M(ar))),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e&&(K=wr())!==e?_=T=[T,C,O,V,K]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(78===s.charCodeAt(t)?(C="N",t++):(C=e,0===x&&M(or)),C===e&&(110===s.charCodeAt(t)?(C="n",t++):(C=e,0===x&&M(ar))),C!==e)if(79===s.charCodeAt(t)?(O="O",t++):(O=e,0===x&&M(Bo)),O===e&&(111===s.charCodeAt(t)?(O="o",t++):(O=e,0===x&&M(Qo))),O!==e)if(84===s.charCodeAt(t)?(V="T",t++):(V=e,0===x&&M(Go)),V===e&&(116===s.charCodeAt(t)?(V="t",t++):(V=e,0===x&&M(Ho))),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();if(K!==e)if(73===s.charCodeAt(t)?(se="I",t++):(se=e,0===x&&M(Zr)),se===e&&(105===s.charCodeAt(t)?(se="i",t++):(se=e,0===x&&M(tn))),se!==e)if(78===s.charCodeAt(t)?(xe="N",t++):(xe=e,0===x&&M(or)),xe===e&&(110===s.charCodeAt(t)?(xe="n",t++):(xe=e,0===x&&M(ar))),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e&&(pe=wr())!==e?_=T=[T,C,O,V,K,se,xe,je,pe]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e;else t=_,_=e;else t=_,_=e}}}}}}}}y!==e?(b=function(n,h){if(0===h.length)return n;if("i"===h[0][1]||"I"===h[0][1]||"n"===h[0][1]||"N"===h[0][1]){var b={};if("i"===h[0][1]||"I"===h[0][1]){var y="=";b.expressionType="conditionalor"}else y="!=",b.expressionType="conditionaland";for(var _=n,T=[],C=0;C<h[0].length;C++)if("args"===h[0][C].token){T=h[0][C].value;break}b.token="expression",b.operands=[];for(var O=0;O<T.length;O++){var V={token:"expression",expressionType:"relationalexpression"};V.operator=y,V.op1=_,V.op2=T[O],b.operands.push(V)}return b}return(b={expressionType:"relationalexpression"}).operator=h[0][1],b.op1=n,b.op2=h[0][3],b.token="expression",b}(b,y),h=b):(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(ep)),h}(),x--,n===e&&0===x&&M(Zf),n}function Et(){var n;return x++,n=function(){var h,b,y,_,T,C,O,V,K,se;if(x++,h=t,(b=_r())!==e){for(y=[],_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(43===s.charCodeAt(t)?(C=Mt,t++):(C=e,0===x&&M(Qt)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=_r())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(45===s.charCodeAt(t)?(C=St,t++):(C=e,0===x&&M(Tt)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=_r())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e)if(_=t,(T=kr())===e&&(T=kr()),T!==e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(42===s.charCodeAt(t)?(V=Je,t++):(V=e,0===x&&M(Ve)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e&&(se=Lt())!==e?C=O=[O,V,K,se]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(47===s.charCodeAt(t)?(V="/",t++):(V=e,0===x&&M(zt)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e&&(se=Lt())!==e?C=O=[O,V,K,se]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}C===e&&(C=null),C!==e?_=T=[T,C]:(t=_,_=e)}else t=_,_=e}for(;_!==e;){for(y.push(_),_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(43===s.charCodeAt(t)?(C=Mt,t++):(C=e,0===x&&M(Qt)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=_r())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if(45===s.charCodeAt(t)?(C=St,t++):(C=e,0===x&&M(Tt)),C!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=_r())!==e?_=T=[T,C,O,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e)if(_=t,(T=kr())===e&&(T=kr()),T!==e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(42===s.charCodeAt(t)?(V=Je,t++):(V=e,0===x&&M(Ve)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e&&(se=Lt())!==e?C=O=[O,V,K,se]:(t=C,C=e)}else t=C,C=e;else t=C,C=e;if(C===e){for(C=t,O=[],V=L();V!==e;)O.push(V),V=L();if(O!==e)if(47===s.charCodeAt(t)?(V="/",t++):(V=e,0===x&&M(zt)),V!==e){for(K=[],se=L();se!==e;)K.push(se),se=L();K!==e&&(se=Lt())!==e?C=O=[O,V,K,se]:(t=C,C=e)}else t=C,C=e;else t=C,C=e}C===e&&(C=null),C!==e?_=T=[T,C]:(t=_,_=e)}else t=_,_=e}}y!==e?(b=function(n,h){if(0===h.length)return n;var b={token:"expression",expressionType:"additiveexpression"};b.summand=n,b.summands=[];for(var y=0;y<h.length;y++){var _=h[y],T={};if(4==_.length&&"string"==typeof _[1])T.operator=_[1],T.expression=_[3];else{var C={},O=T[0],V=(T[1][1],T[1][3]);O.value<0?(T.operator="-",O.value=-O.value):T.operator="+",C.token="expression",C.expressionType="multiplicativeexpression",C.operator=O,C.factors=[{operator:null,expression:V}],T.expression=C}b.summands.push(T)}return b}(b,y),h=b):(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(np)),h}(),x--,n===e&&0===x&&M(rp),n}function _r(){var n,h,b,y,_,T,C,O;if(x++,n=t,(h=Lt())!==e){for(b=[],y=t,_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(42===s.charCodeAt(t)?(T=Je,t++):(T=e,0===x&&M(Ve)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=Lt())!==e?y=_=[_,T,C,O]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;if(y===e){for(y=t,_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(47===s.charCodeAt(t)?(T="/",t++):(T=e,0===x&&M(zt)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=Lt())!==e?y=_=[_,T,C,O]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}for(;y!==e;){for(b.push(y),y=t,_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(42===s.charCodeAt(t)?(T=Je,t++):(T=e,0===x&&M(Ve)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=Lt())!==e?y=_=[_,T,C,O]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;if(y===e){for(y=t,_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(47===s.charCodeAt(t)?(T="/",t++):(T=e,0===x&&M(zt)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e&&(O=Lt())!==e?y=_=[_,T,C,O]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}}b!==e?n=h=function(n,h){if(0===h.length)return n;var b={token:"expression",expressionType:"multiplicativeexpression"};b.factor=n,b.factors=[];for(var y=0;y<h.length;y++){var _=h[y],T={};T.operator=_[1],T.expression=_[3],b.factors.push(T)}return b}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(op)),n}function Lt(){var n,h,b,y;if(x++,n=t,33===s.charCodeAt(t)?(h="!",t++):(h=e,0===x&&M(Qn)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e&&(y=yn())!==e?n=h=function(n){var h={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return h.expression=n,h}(y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,43===s.charCodeAt(t)?(h=Mt,t++):(h=e,0===x&&M(Qt)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e&&(y=yn())!==e?n=h=function(n){var h={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return h.expression=n,h}(y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,45===s.charCodeAt(t)?(h=St,t++):(h=e,0===x&&M(Tt)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e&&(y=yn())!==e?n=h=function(n){var h={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return h.expression=n,h}(y):(t=n,n=e)}else t=n,n=e;n===e&&(n=yn())}}return x--,n===e&&(h=e,0===x&&M(ap)),n}function yn(){var n,h;return x++,(n=mi())===e&&(n=bi())===e&&(n=function(){var b,y,_,T;if(x++,b=t,(y=mt())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?((T=tu())===e&&(T=null),T!==e?(y=function(n,h){var b={token:"expression",expressionType:"irireforfunction"};return b.iriref=n,b.args=null!=h?h.value:h,b}(y,T),b=y):(t=b,b=e)):(t=b,b=e)}else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Jh)),b}())===e&&(n=t,(h=gn())!==e&&(h=function(n){var h={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return h.value=n,h}(h)),(n=h)===e&&(n=t,(h=mn())!==e&&(h=function(n){var h={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return h.value=n,h}(h)),(n=h)===e&&(n=t,(h=bn())!==e&&(h=function(n){var h={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return h.value=n,h}(h)),(n=h)===e&&(n=function(){var b,y,_,T,C,O,V,K,se,xe,je,pe,Le,Me,Ae,Be,Qe,qe;if(x++,b=t,"COUNT"===s.substr(t,5)?(y="COUNT",t+=5):(y=e,0===x&&M(Ch)),y===e&&("count"===s.substr(t,5)?(y="count",t+=5):(y=e,0===x&&M(Sh))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,8)===ye?(O=ye,t+=8):(O=e,0===x&&M(be)),O===e&&(s.substr(t,8)===de?(O=de,t+=8):(O=e,0===x&&M(le))),O===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if(42===s.charCodeAt(t)?(K=Je,t++):(K=e,0===x&&M(Ve)),K===e&&(K=rt()),K!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(y=function(n,h){var b={token:"expression",expressionType:"aggregate",aggregateType:"count"};return b.distinct=""!=n&&null!=n?"DISTINCT":n,b.expression=h,b}(O,K),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;if(b===e){if(b=t,s.substr(t,12)===Ps?(y=Ps,t+=12):(y=e,0===x&&M(jh)),y===e&&(s.substr(t,12)===Bs?(y=Bs,t+=12):(y=e,0===x&&M(Ih))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,8)===ye?(O=ye,t+=8):(O=e,0===x&&M(be)),O===e&&(s.substr(t,8)===de?(O=de,t+=8):(O=e,0===x&&M(le))),O===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){if(se=t,59===s.charCodeAt(t)?(xe=Rt,t++):(xe=e,0===x&&M(Ot)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if(s.substr(t,9)===Ms?(pe=Ms,t+=9):(pe=e,0===x&&M(Nh)),pe!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();if(Le!==e)if(61===s.charCodeAt(t)?(Me="=",t++):(Me=e,0===x&&M(Xr)),Me!==e){for(Ae=[],Be=L();Be!==e;)Ae.push(Be),Be=L();if(Ae!==e)if((Be=lu())!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();Qe!==e?se=xe=[xe,je,pe,Le,Me,Ae,Be,Qe]:(t=se,se=e)}else t=se,se=e;else t=se,se=e}else t=se,se=e;else t=se,se=e}else t=se,se=e;else t=se,se=e}else t=se,se=e;if(se===e&&(se=null),se!==e)if(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(y=function(n,h,b){var y={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return y.distinct=""!=n&&null!=n?"DISTINCT":n,y.expression=h,y.separator=b,y}(O,K,se),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;if(b===e){if(b=t,"SUM"===s.substr(t,3)?(y="SUM",t+=3):(y=e,0===x&&M(Oh)),y===e&&("sum"===s.substr(t,3)?(y="sum",t+=3):(y=e,0===x&&M(Lh))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,8)===ye?(O=ye,t+=8):(O=e,0===x&&M(be)),O===e&&(s.substr(t,8)===de?(O=de,t+=8):(O=e,0===x&&M(le))),O===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(y=function(n,h){var b={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return b.distinct=""!=n&&null!=n?"DISTINCT":n,b.expression=h,b}(O,K),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;if(b===e){if(b=t,"MIN"===s.substr(t,3)?(y="MIN",t+=3):(y=e,0===x&&M(Ph)),y===e&&("min"===s.substr(t,3)?(y="min",t+=3):(y=e,0===x&&M(Bh))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,8)===ye?(O=ye,t+=8):(O=e,0===x&&M(be)),O===e&&(s.substr(t,8)===de?(O=de,t+=8):(O=e,0===x&&M(le))),O===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(y=function(n,h){var b={token:"expression",expressionType:"aggregate",aggregateType:"min"};return b.distinct=""!=n&&null!=n?"DISTINCT":n,b.expression=h,b}(O,K),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;if(b===e){if(b=t,"MAX"===s.substr(t,3)?(y="MAX",t+=3):(y=e,0===x&&M(Qh)),y===e&&("max"===s.substr(t,3)?(y="max",t+=3):(y=e,0===x&&M(Uh))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,8)===ye?(O=ye,t+=8):(O=e,0===x&&M(be)),O===e&&(s.substr(t,8)===de?(O=de,t+=8):(O=e,0===x&&M(le))),O===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(y=function(n,h){var b={token:"expression",expressionType:"aggregate",aggregateType:"max"};return b.distinct=""!=n&&null!=n?"DISTINCT":n,b.expression=h,b}(O,K),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;if(b===e)if(b=t,"AVG"===s.substr(t,3)?(y="AVG",t+=3):(y=e,0===x&&M(qh)),y===e&&("avg"===s.substr(t,3)?(y="avg",t+=3):(y=e,0===x&&M(Hh))),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if(40===s.charCodeAt(t)?(T=I,t++):(T=e,0===x&&M(H)),T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(s.substr(t,8)===ye?(O=ye,t+=8):(O=e,0===x&&M(be)),O===e&&(s.substr(t,8)===de?(O=de,t+=8):(O=e,0===x&&M(le))),O===e&&(O=null),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();je!==e?(y=function(n,h){var b={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return b.distinct=""!=n&&null!=n?"DISTINCT":n,b.expression=h,b}(O,K),b=y):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e}}}}return x--,b===e&&(y=e,0===x&&M(Fh)),b}())===e&&(n=t,(h=gt())!==e&&(h=function(n){var h={token:"expression",expressionType:"atomic",primaryexpression:"var"};return h.value=n,h}(h)),n=h)))),x--,n===e&&(h=e,0===x&&M(fp)),n}function mi(){var n,h,b,y,_,T;if(x++,n=t,40===s.charCodeAt(t)?(h=I,t++):(h=e,0===x&&M(H)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if((y=rt())!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();_!==e?(41===s.charCodeAt(t)?(T=Fe,t++):(T=e,0===x&&M(Re)),T!==e?n=h=y:(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(yp)),n}function bi(){var n,h,b,y,_,T,C,O,V,K,se,xe,je,pe,Le,Me;if(x++,n=t,"STR"===s.substr(t,3)?(h="STR",t+=3):(h=e,0===x&&M(bp)),h===e&&("str"===s.substr(t,3)?(h="str",t+=3):(h=e,0===x&&M(xp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"str"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,"LANG"===s.substr(t,4)?(h="LANG",t+=4):(h=e,0===x&&M(_p)),h===e&&("lang"===s.substr(t,4)?(h="lang",t+=4):(h=e,0===x&&M(kp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"lang"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,11)===Wo?(h=Wo,t+=11):(h=e,0===x&&M(Ap)),h===e&&(s.substr(t,11)===$o?(h=$o,t+=11):(h=e,0===x&&M(Fp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(44===s.charCodeAt(t)?(O=dt,t++):(O=e,0===x&&M(vt)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e?(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e?n=h=function(n,h){var b={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return b.args=[n,h],b}(T,K):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,8)===Ko?(h=Ko,t+=8):(h=e,0===x&&M(Sp)),h===e&&(s.substr(t,8)===Yo?(h=Yo,t+=8):(h=e,0===x&&M(Tp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,"BOUND"===s.substr(t,5)?(h="BOUND",t+=5):(h=e,0===x&&M(Ip)),h===e&&("bound"===s.substr(t,5)?(h="bound",t+=5):(h=e,0===x&&M(Np))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=gt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"bound"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,"IRI"===s.substr(t,3)?(h="IRI",t+=3):(h=e,0===x&&M(Op)),h===e&&("iri"===s.substr(t,3)?(h="iri",t+=3):(h=e,0===x&&M(Lp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"iri"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,"URI"===s.substr(t,3)?(h="URI",t+=3):(h=e,0===x&&M(Pp)),h===e&&("uri"===s.substr(t,3)?(h="uri",t+=3):(h=e,0===x&&M(Bp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"uri"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,"BNODE"===s.substr(t,5)?(h="BNODE",t+=5):(h=e,0===x&&M(Qp)),h===e&&("bnode"===s.substr(t,5)?(h="bnode",t+=5):(h=e,0===x&&M(Up))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e){if(y=t,40===s.charCodeAt(t)?(_=I,t++):(_=e,0===x&&M(H)),_!==e){for(T=[],C=L();C!==e;)T.push(C),C=L();if(T!==e)if((C=rt())!==e){for(O=[],V=L();V!==e;)O.push(V),V=L();O!==e?(41===s.charCodeAt(t)?(V=Fe,t++):(V=e,0===x&&M(Re)),V!==e?y=_=[_,T,C,O,V]:(t=y,y=e)):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;y===e&&(y=Dt()),y!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===n.length?h.args=[n[2]]:h.args=null,h}(y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,8)===as?(h=as,t+=8):(h=e,0===x&&M(qp)),h===e&&(s.substr(t,8)===us?(h=us,t+=8):(h=e,0===x&&M(Hp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e&&(y=wr())!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return h.args=n,h}(y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,"IF"===s.substr(t,2)?(h="IF",t+=2):(h=e,0===x&&M(Jp)),h===e&&("if"===s.substr(t,2)?(h="if",t+=2):(h=e,0===x&&M(zp))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(44===s.charCodeAt(t)?(O=dt,t++):(O=e,0===x&&M(vt)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();if(se!==e)if(44===s.charCodeAt(t)?(xe=dt,t++):(xe=e,0===x&&M(vt)),xe!==e){for(je=[],pe=L();pe!==e;)je.push(pe),pe=L();if(je!==e)if((pe=rt())!==e){for(Le=[],Me=L();Me!==e;)Le.push(Me),Me=L();Le!==e?(41===s.charCodeAt(t)?(Me=Fe,t++):(Me=e,0===x&&M(Re)),Me!==e?n=h=function(n,h,b){var y={token:"expression",expressionType:"builtincall",builtincall:"if"};return y.args=[n,h,b],y}(T,K,pe):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,9)===fs?(h=fs,t+=9):(h=e,0===x&&M(Wp)),h===e&&(s.substr(t,9)===ps?(h=ps,t+=9):(h=e,0===x&&M($p)),h===e&&(s.substr(t,9)===hs?(h=hs,t+=9):(h=e,0===x&&M(Kp)))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,7)===ds?(h=ds,t+=7):(h=e,0===x&&M(Zp)),h===e&&(s.substr(t,7)===vs?(h=vs,t+=7):(h=e,0===x&&M(eh)),h===e&&(s.substr(t,7)===ys?(h=ys,t+=7):(h=e,0===x&&M(th)))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,8)===gs?(h=gs,t+=8):(h=e,0===x&&M(nh)),h===e&&(s.substr(t,8)===ms?(h=ms,t+=8):(h=e,0===x&&M(ih))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if(44===s.charCodeAt(t)?(O=dt,t++):(O=e,0===x&&M(vt)),O!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();if(V!==e)if((K=rt())!==e){for(se=[],xe=L();xe!==e;)se.push(xe),xe=L();se!==e?(41===s.charCodeAt(t)?(xe=Fe,t++):(xe=e,0===x&&M(Re)),xe!==e?n=h=function(n,h){var b={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return b.args=[n,h],b}(T,K):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,"ISURI"===s.substr(t,5)?(h="ISURI",t+=5):(h=e,0===x&&M(sh)),h===e&&("isuri"===s.substr(t,5)?(h="isuri",t+=5):(h=e,0===x&&M(ah)),h===e&&("isURI"===s.substr(t,5)?(h="isURI",t+=5):(h=e,0===x&&M(uh)),h===e&&("ISIRI"===s.substr(t,5)?(h="ISIRI",t+=5):(h=e,0===x&&M(lh)),h===e&&("isiri"===s.substr(t,5)?(h="isiri",t+=5):(h=e,0===x&&M(ch)),h===e&&("isIRI"===s.substr(t,5)?(h="isIRI",t+=5):(h=e,0===x&&M(fh))))))),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();if(b!==e)if(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y!==e){for(_=[],T=L();T!==e;)_.push(T),T=L();if(_!==e)if((T=rt())!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();C!==e?(41===s.charCodeAt(t)?(O=Fe,t++):(O=e,0===x&&M(Re)),O!==e?n=h=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return h.args=[n],h}(T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,s.substr(t,7)===As?(h=As,t+=7):(h=e,0===x&&M(hh)),h===e&&(s.substr(t,7)===Fs?(h=Fs,t+=7):(h=e,0===x&&M(dh))),h!==e){if(b=[],Cs.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(Ss)),y!==e)for(;y!==e;)b.push(y),Cs.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(Ss));else b=e;if(b!==e){for(y=[],_=L();_!==e;)y.push(_),_=L();if(y!==e)if(40===s.charCodeAt(t)?(_=I,t++):(_=e,0===x&&M(H)),_!==e){for(T=[],C=t,O=[],V=L();V!==e;)O.push(V),V=L();for(O!==e&&(V=rt())!==e?(44===s.charCodeAt(t)?(K=dt,t++):(K=e,0===x&&M(vt)),K!==e?C=O=[O,V,K]:(t=C,C=e)):(t=C,C=e);C!==e;){for(T.push(C),C=t,O=[],V=L();V!==e;)O.push(V),V=L();O!==e&&(V=rt())!==e?(44===s.charCodeAt(t)?(K=dt,t++):(K=e,0===x&&M(vt)),K!==e?C=O=[O,V,K]:(t=C,C=e)):(t=C,C=e)}if(T!==e){for(C=[],O=L();O!==e;)C.push(O),O=L();if(C!==e)if((O=rt())!==e){for(V=[],K=L();K!==e;)V.push(K),K=L();V!==e?(41===s.charCodeAt(t)?(K=Fe,t++):(K=e,0===x&&M(Re)),K!==e?n=h=function(n,h,b){var y={token:"expression",expressionType:"custom"};y.name=n.join("");for(var _=[],T=0;T<h.length;T++)_.push(h[T][1]);return _.push(b),y.args=_,y}(b,T,O):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e}else t=n,n=e;n===e&&(n=function(){var Ae,Be,Qe,qe,Ze,Ge,nt,ut,Ye,bt,pt,yt,xt,wt,ht;if(x++,Ae=t,"REGEX"===s.substr(t,5)?(Be="REGEX",t+=5):(Be=e,0===x&&M(gh)),Be===e&&("regex"===s.substr(t,5)?(Be="regex",t+=5):(Be=e,0===x&&M(mh))),Be!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();if(Qe!==e)if(40===s.charCodeAt(t)?(qe=I,t++):(qe=e,0===x&&M(H)),qe!==e){for(Ze=[],Ge=L();Ge!==e;)Ze.push(Ge),Ge=L();if(Ze!==e)if((Ge=rt())!==e){for(nt=[],ut=L();ut!==e;)nt.push(ut),ut=L();if(nt!==e)if(44===s.charCodeAt(t)?(ut=dt,t++):(ut=e,0===x&&M(vt)),ut!==e){for(Ye=[],bt=L();bt!==e;)Ye.push(bt),bt=L();if(Ye!==e)if((bt=rt())!==e){for(pt=[],yt=L();yt!==e;)pt.push(yt),yt=L();if(pt!==e){if(yt=t,44===s.charCodeAt(t)?(xt=dt,t++):(xt=e,0===x&&M(vt)),xt!==e){for(wt=[],ht=L();ht!==e;)wt.push(ht),ht=L();wt!==e&&(ht=rt())!==e?yt=xt=[xt,wt,ht]:(t=yt,yt=e)}else t=yt,yt=e;if(yt===e&&(yt=null),yt!==e){for(xt=[],wt=L();wt!==e;)xt.push(wt),wt=L();xt!==e?(41===s.charCodeAt(t)?(wt=Fe,t++):(wt=e,0===x&&M(Re)),wt!==e?(Be=function(n,h,b){var y={token:"expression",expressionType:"regex"};return y.text=n,y.pattern=h,null!=b&&(y.flags=b[2]),y}(Ge,bt,yt),Ae=Be):(t=Ae,Ae=e)):(t=Ae,Ae=e)}else t=Ae,Ae=e}else t=Ae,Ae=e}else t=Ae,Ae=e;else t=Ae,Ae=e}else t=Ae,Ae=e;else t=Ae,Ae=e}else t=Ae,Ae=e;else t=Ae,Ae=e}else t=Ae,Ae=e;else t=Ae,Ae=e}else t=Ae,Ae=e;return x--,Ae===e&&(Be=e,0===x&&M(yh)),Ae}())===e&&(n=function(){var Ae,Be,Qe,qe;if(x++,Ae=t,s.substr(t,6)===rn?(Be=rn,t+=6):(Be=e,0===x&&M(Is)),Be===e&&(s.substr(t,6)===nn?(Be=nn,t+=6):(Be=e,0===x&&M(Ns))),Be!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();Qe!==e&&(qe=Ft())!==e?(Be=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"exists"};return h.args=[n],h}(qe),Ae=Be):(t=Ae,Ae=e)}else t=Ae,Ae=e;return x--,Ae===e&&(Be=e,0===x&&M(xh)),Ae}())===e&&(n=function(){var Ae,Be,Qe,qe,Ze,Ge;if(x++,Ae=t,"NOT"===s.substr(t,3)?(Be="NOT",t+=3):(Be=e,0===x&&M(kh)),Be===e&&("not"===s.substr(t,3)?(Be="not",t+=3):(Be=e,0===x&&M(Eh))),Be!==e){for(Qe=[],qe=L();qe!==e;)Qe.push(qe),qe=L();if(Qe!==e)if(s.substr(t,6)===rn?(qe=rn,t+=6):(qe=e,0===x&&M(Is)),qe===e&&(s.substr(t,6)===nn?(qe=nn,t+=6):(qe=e,0===x&&M(Ns))),qe!==e){for(Ze=[],Ge=L();Ge!==e;)Ze.push(Ge),Ge=L();Ze!==e&&(Ge=Ft())!==e?(Be=function(n){var h={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return h.args=[n],h}(Ge),Ae=Be):(t=Ae,Ae=e)}else t=Ae,Ae=e;else t=Ae,Ae=e}else t=Ae,Ae=e;return x--,Ae===e&&(Be=e,0===x&&M(_h)),Ae}())}}}}}}}}}}}}}}return x--,n===e&&(h=e,0===x&&M(mp)),n}function gn(){var n,h,b,y,_;return x++,n=t,(h=lu())!==e?((b=function(){var T,C,O,V,K,se,xe,je;if(x++,T=t,64===s.charCodeAt(t)?(C="@",t++):(C=e,0===x&&M(aa)),C!==e){if(O=[],ua.test(s.charAt(t))?(V=s.charAt(t),t++):(V=e,0===x&&M(la)),V!==e)for(;V!==e;)O.push(V),ua.test(s.charAt(t))?(V=s.charAt(t),t++):(V=e,0===x&&M(la));else O=e;if(O!==e){if(V=[],K=t,45===s.charCodeAt(t)?(se=St,t++):(se=e,0===x&&M(Tt)),se!==e){if(xe=[],sn.test(s.charAt(t))?(je=s.charAt(t),t++):(je=e,0===x&&M(an)),je!==e)for(;je!==e;)xe.push(je),sn.test(s.charAt(t))?(je=s.charAt(t),t++):(je=e,0===x&&M(an));else xe=e;xe!==e?K=se=[se,xe]:(t=K,K=e)}else t=K,K=e;for(;K!==e;)if(V.push(K),K=t,45===s.charCodeAt(t)?(se=St,t++):(se=e,0===x&&M(Tt)),se!==e){if(xe=[],sn.test(s.charAt(t))?(je=s.charAt(t),t++):(je=e,0===x&&M(an)),je!==e)for(;je!==e;)xe.push(je),sn.test(s.charAt(t))?(je=s.charAt(t),t++):(je=e,0===x&&M(an));else xe=e;xe!==e?K=se=[se,xe]:(t=K,K=e)}else t=K,K=e;V!==e?(C=function(n,h){return 0===h.length?("@"+n.join("")).toLowerCase():("@"+n.join("")+"-"+h[0][1].join("")).toLowerCase()}(O,V),T=C):(t=T,T=e)}else t=T,T=e}else t=T,T=e;return x--,T===e&&(C=e,0===x&&M(Cd)),T}())===e&&(b=t,"^^"===s.substr(t,2)?(y="^^",t+=2):(y=e,0===x&&M(Wh)),y!==e&&(_=mt())!==e?b=y=[y,_]:(t=b,b=e)),b===e&&(b=null),b!==e?n=h=function(n,h){return"string"==typeof h&&h.length>0?{token:"literal",value:n.value,lang:h.slice(1),type:null}:null!=h&&"object"==typeof h?(h.shift(),{token:"literal",value:n.value,lang:null,type:h[0]}):{token:"literal",value:n.value,lang:null,type:null}}(h,b):(t=n,n=e)):(t=n,n=e),x--,n===e&&(h=e,0===x&&M(Xh)),n}function mn(){var n,h;return x++,x++,(h=_i())===e&&(h=wi())===e&&(h=hr()),x--,h===e&&0===x&&M(Yh),(n=h)===e&&(n=function(){var h,b,y,_;return x++,x++,b=t,43===s.charCodeAt(t)?(y=Mt,t++):(y=e,0===x&&M(Qt)),y!==e&&(_=_i())!==e?b=y=ca(_):(t=b,b=e),x--,b===e&&(y=e,0===x&&M(Ud)),(h=b)===e&&(h=function(){var b,y,_;return x++,b=t,43===s.charCodeAt(t)?(y=Mt,t++):(y=e,0===x&&M(Qt)),y!==e&&(_=wi())!==e?b=y=ca(_):(t=b,b=e),x--,b===e&&(y=e,0===x&&M(Qd)),b}())===e&&(h=function(){var b,y,_;return x++,b=t,43===s.charCodeAt(t)?(y=Mt,t++):(y=e,0===x&&M(Qt)),y!==e&&(_=hr())!==e?(y=function(n){return n.value="+"+n.value,n}(_),b=y):(t=b,b=e),x--,b===e&&(y=e,0===x&&M(Bd)),b}()),x--,h===e&&0===x&&M(Zh),h}())===e&&(n=kr()),x--,n===e&&0===x&&M(Kh),n}function kr(){var n,h,b,y;return x++,x++,h=t,45===s.charCodeAt(t)?(b=St,t++):(b=e,0===x&&M(Tt)),b!==e&&(y=_i())!==e?h=b=Wn(y):(t=h,h=e),x--,h===e&&(b=e,0===x&&M(Hd)),(n=h)===e&&(n=function(){var h,b,y;return x++,h=t,45===s.charCodeAt(t)?(b=St,t++):(b=e,0===x&&M(Tt)),b!==e&&(y=wi())!==e?h=b=Wn(y):(t=h,h=e),x--,h===e&&(b=e,0===x&&M(qd)),h}())===e&&(n=function(){var h,b,y;return x++,h=t,45===s.charCodeAt(t)?(b=St,t++):(b=e,0===x&&M(Tt)),b!==e&&(y=hr())!==e?h=b=Wn(y):(t=h,h=e),x--,h===e&&(b=e,0===x&&M(Gd)),h}()),x--,n===e&&0===x&&M(ed),n}function bn(){var n,h;return x++,n=t,"TRUE"===s.substr(t,4)?(h="TRUE",t+=4):(h=e,0===x&&M(rd)),h===e&&("true"===s.substr(t,4)?(h="true",t+=4):(h=e,0===x&&M(nd))),h!==e&&(h={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(n=h)===e&&(n=t,"FALSE"===s.substr(t,5)?(h="FALSE",t+=5):(h=e,0===x&&M(od)),h===e&&("false"===s.substr(t,5)?(h="false",t+=5):(h=e,0===x&&M(sd))),h!==e&&(h={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),n=h),x--,n===e&&(h=e,0===x&&M(td)),n}function lu(){var n,h;return x++,n=t,(h=function(){var b,y,_,T;if(x++,b=t,s.substr(t,3)===ln?(y=ln,t+=3):(y=e,0===x&&M(ga)),y!==e){for(_=[],ma.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(ba)),T===e&&(T=Ut());T!==e;)_.push(T),ma.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(ba)),T===e&&(T=Ut());_!==e?(s.substr(t,3)===ln?(T=ln,t+=3):(T=e,0===x&&M(ga)),T!==e?b=y=un(_):(t=b,b=e)):(t=b,b=e)}else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Zd)),b}())!==e&&(h=on(h)),(n=h)===e&&(n=t,(h=function(){var b,y,_,T;if(x++,b=t,s.substr(t,3)===cn?(y=cn,t+=3):(y=e,0===x&&M(xa)),y!==e){for(_=[],wa.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(_a)),T===e&&(T=Ut());T!==e;)_.push(T),wa.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(_a)),T===e&&(T=Ut());_!==e?(s.substr(t,3)===cn?(T=cn,t+=3):(T=e,0===x&&M(xa)),T!==e?b=y=un(_):(t=b,b=e)):(t=b,b=e)}else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(ev)),b}())!==e&&(h=on(h)),(n=h)===e&&(n=t,(h=function(){var b,y,_,T;if(x++,b=t,39===s.charCodeAt(t)?(y="'",t++):(y=e,0===x&&M(Kn)),y!==e){for(_=[],fa.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(pa)),T===e&&(T=Ut());T!==e;)_.push(T),fa.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(pa)),T===e&&(T=Ut());_!==e?(39===s.charCodeAt(t)?(T="'",t++):(T=e,0===x&&M(Kn)),T!==e?b=y=un(_):(t=b,b=e)):(t=b,b=e)}else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Kd)),b}())!==e&&(h=on(h)),(n=h)===e&&(n=t,(h=function(){var b,y,_,T;if(x++,b=t,34===s.charCodeAt(t)?(y='"',t++):(y=e,0===x&&M(da)),y!==e){for(_=[],va.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(ya)),T===e&&(T=Ut());T!==e;)_.push(T),va.test(s.charAt(t))?(T=s.charAt(t),t++):(T=e,0===x&&M(ya)),T===e&&(T=Ut());_!==e?(34===s.charCodeAt(t)?(T='"',t++):(T=e,0===x&&M(da)),T!==e?b=y=un(_):(t=b,b=e)):(t=b,b=e)}else t=b,b=e;return x--,b===e&&(y=e,0===x&&M(Yd)),b}())!==e&&(h=on(h)),n=h))),x--,n===e&&(h=e,0===x&&M(ud)),n}function mt(){var n,h,b,y,_,T,C;return x++,n=t,(h=xn())!==e&&(h=function(n){return{token:"uri",prefix:null,suffix:null,value:n}}(h)),(n=h)===e&&(n=t,x++,b=t,x++,_=t,(T=xi())!==e&&(C=pu())!==e?(T=function(n,h){return[n,h]}(T,C),_=T):(t=_,_=e),x--,_===e&&(T=e,0===x&&M(xd)),(y=_)!==e&&(y=function(n){return{token:"uri",prefix:n[0],suffix:n[1],value:null}}(y)),(b=y)===e&&(b=t,(y=xi())!==e&&(y=function(n){return{token:"uri",prefix:n,suffix:"",value:null}}(y)),b=y),x--,b===e&&(y=e,0===x&&M(fd)),n=h=b),x--,n===e&&(h=e,0===x&&M(ld)),n}function xn(){var n,h,b,y;if(x++,n=t,60===s.charCodeAt(t)?(h="<",t++):(h=e,0===x&&M(Jn)),h!==e){for(b=[],ea.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ta));y!==e;)b.push(y),ea.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ta));b!==e?(62===s.charCodeAt(t)?(y=">",t++):(y=e,0===x&&M(Xn)),y!==e?n=h=function(n){return n.join("")}(b):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(gd)),n}function xi(){var n,h,b;return x++,n=t,(h=function(){var y,_,T,C;if(x++,y=t,(_=cu())!==e){for(T=[],(C=wn())===e&&(46===s.charCodeAt(t)?(C=_t,t++):(C=e,0===x&&M(kt)));C!==e;)T.push(C),(C=wn())===e&&(46===s.charCodeAt(t)?(C=_t,t++):(C=e,0===x&&M(kt)));T!==e?(_=function(n,h){if("."==h[h.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return n+h.join("")}(_,T),y=_):(t=y,y=e)}else t=y,y=e;return x--,y===e&&(_=e,0===x&&M($v)),y}())===e&&(h=null),h!==e?(58===s.charCodeAt(t)?(b=":",t++):(b=e,0===x&&M(mr)),b!==e?n=h:(t=n,n=e)):(t=n,n=e),x--,n===e&&(h=e,0===x&&M(bd)),n}function hr(){var n,h,b;if(x++,t,h=[],ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft)),b!==e)for(;b!==e;)h.push(b),ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft));else h=e;return h!==e&&(h=function(n){var h={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return h.value=Gt(n),h}(h)),x--,(n=h)===e&&(h=e,0===x&&M(Td)),n}function wi(){var n,h,b,y,_;if(x++,n=t,h=[],ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft)),b!==e)for(;b!==e;)h.push(b),ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft));else h=e;if(h!==e)if(46===s.charCodeAt(t)?(b=_t,t++):(b=e,0===x&&M(kt)),b!==e){for(y=[],ct.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(ft));_!==e;)y.push(_),ct.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(ft));y!==e?n=h=function(n,h,b){var y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return y.value=Gt([n,h,b]),y}(h,b,y):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e)if(n=t,46===s.charCodeAt(t)?(h=_t,t++):(h=e,0===x&&M(kt)),h!==e){if(b=[],ct.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ft)),y!==e)for(;y!==e;)b.push(y),ct.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ft));else b=e;b!==e?n=h=function(n,h){var b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return b.value=Gt([n,h]),b}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Id)),n}function _i(){var n,h,b,y,_;if(x++,n=t,h=[],ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft)),b!==e)for(;b!==e;)h.push(b),ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft));else h=e;if(h!==e)if(46===s.charCodeAt(t)?(b=_t,t++):(b=e,0===x&&M(kt)),b!==e){for(y=[],ct.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(ft));_!==e;)y.push(_),ct.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(ft));y!==e&&(_=ki())!==e?n=h=function(n,h,b,y){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return _.value=Gt([n,h,b,y]),_}(h,b,y,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){if(n=t,46===s.charCodeAt(t)?(h=_t,t++):(h=e,0===x&&M(kt)),h!==e){if(b=[],ct.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ft)),y!==e)for(;y!==e;)b.push(y),ct.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ft));else b=e;b!==e&&(y=ki())!==e?n=h=function(n,h,b){var y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return y.value=Gt([n,h,b]),y}(h,b,y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,h=[],ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft)),b!==e)for(;b!==e;)h.push(b),ct.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(ft));else h=e;h!==e&&(b=ki())!==e?n=h=function(n,h){var b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return b.value=Gt([n,h]),b}(h,b):(t=n,n=e)}}return x--,n===e&&(h=e,0===x&&M(Od)),n}function ki(){var n,h,b,y,_;if(x++,n=t,Jd.test(s.charAt(t))?(h=s.charAt(t),t++):(h=e,0===x&&M(zd)),h!==e)if(Xd.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(Wd)),b===e&&(b=null),b!==e){if(y=[],ct.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(ft)),_!==e)for(;_!==e;)y.push(_),ct.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(ft));else y=e;y!==e?n=h=function(n,h,b){return Gt([n,h,b])}(h,b,y):(t=n,n=e)}else t=n,n=e;else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Vd)),n}function Ut(){var n,h,b;return x++,n=t,92===s.charCodeAt(t)?(h="\\",t++):(h=e,0===x&&M(Ea)),h!==e?(rv.test(s.charAt(t))?(b=s.charAt(t),t++):(b=e,0===x&&M(nv)),b!==e?n=h=[h,b]:(t=n,n=e)):(t=n,n=e),x--,n===e&&(h=e,0===x&&M(tv)),n}function Dt(){var n,h,b,y;if(x++,n=t,40===s.charCodeAt(t)?(h=I,t++):(h=e,0===x&&M(H)),h!==e){for(b=[],y=L();y!==e;)b.push(y),y=L();b!==e?(41===s.charCodeAt(t)?(y=Fe,t++):(y=e,0===x&&M(Re)),y!==e?n=h={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(t=n,n=e)):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(iv)),n}function L(){var n;return x++,av.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(uv)),n===e&&(lv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(cv)),n===e&&(fv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(pv)),n===e&&(hv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(dv)),n===e&&(n=function(){var h,b,y,_;if(x++,h=t,35===s.charCodeAt(t)?(b="#",t++):(b=e,0===x&&M(Fa)),b!==e){for(y=[],Ca.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(Sa));_!==e;)y.push(_),Ca.test(s.charAt(t))?(_=s.charAt(t),t++):(_=e,0===x&&M(Sa));y!==e?h=b=[b,y]:(t=h,h=e)}else t=h,h=e;return x--,h===e&&(b=e,0===x&&M(vv)),h}())))),x--,n===e&&0===x&&M(sv),n}function cu(){var n;return x++,mv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(bv)),n===e&&(xv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(wv)),n===e&&(_v.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(kv)),n===e&&(Ev.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Av)),n===e&&(Fv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Cv)),n===e&&(Sv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Tv)),n===e&&(jv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Iv)),n===e&&(Nv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Rv)),n===e&&(Ov.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Lv)),n===e&&(Dv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Pv)),n===e&&(Bv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Mv)),n===e&&(Qv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Uv)),n===e&&(Gv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(qv)),n===e&&(Hv.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Vv))))))))))))))),x--,n===e&&0===x&&M(gv),n}function Er(){var n;return x++,(n=cu())===e&&(95===s.charCodeAt(t)?(n="_",t++):(n=e,0===x&&M(ja))),x--,n===e&&0===x&&M(Jv),n}function fu(){var n,h,b,y;if(x++,n=t,(h=Er())===e&&(ct.test(s.charAt(t))?(h=s.charAt(t),t++):(h=e,0===x&&M(ft))),h!==e){for(b=[],(y=Er())===e&&(ct.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ft)),y===e&&(Yn.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(Zn)),y===e&&(ei.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ti)),y===e&&(ri.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ni))))));y!==e;)b.push(y),(y=Er())===e&&(ct.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ft)),y===e&&(Yn.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(Zn)),y===e&&(ei.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ti)),y===e&&(ri.test(s.charAt(t))?(y=s.charAt(t),t++):(y=e,0===x&&M(ni))))));b!==e?n=h=function(n,h){return n+h.join("")}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(zv)),n}function wn(){var n;return x++,(n=Er())===e&&(45===s.charCodeAt(t)?(n=St,t++):(n=e,0===x&&M(Tt)),n===e&&(ct.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(ft)),n===e&&(Yn.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(Zn)),n===e&&(ei.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(ti)),n===e&&(ri.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(ni))))))),x--,n===e&&0===x&&M(Wv),n}function pu(){var n,h,b,y;if(x++,n=t,(h=Er())===e&&(ct.test(s.charAt(t))?(h=s.charAt(t),t++):(h=e,0===x&&M(ft)),h===e&&(58===s.charCodeAt(t)?(h=":",t++):(h=e,0===x&&M(mr)),h===e&&(h=Ei()))),h!==e){for(b=[],(y=wn())===e&&(46===s.charCodeAt(t)?(y=_t,t++):(y=e,0===x&&M(kt)),y===e&&(58===s.charCodeAt(t)?(y=":",t++):(y=e,0===x&&M(mr)),y===e&&(y=Ei())));y!==e;)b.push(y),(y=wn())===e&&(46===s.charCodeAt(t)?(y=_t,t++):(y=e,0===x&&M(kt)),y===e&&(58===s.charCodeAt(t)?(y=":",t++):(y=e,0===x&&M(mr)),y===e&&(y=Ei())));b!==e?n=h=function(n,h){return n+(h||[]).join("")}(h,b):(t=n,n=e)}else t=n,n=e;return x--,n===e&&(h=e,0===x&&M(Yv)),n}function Ei(){var n,h,b,y,_,T;return x++,x++,b=t,37===s.charCodeAt(t)?(y="%",t++):(y=e,0===x&&M(Na)),y!==e&&(_=hu())!==e&&(T=hu())!==e?b=y=[y,_,T]:(t=b,b=e),b!==e&&(b=function(n){return n.join("")}(b)),x--,(h=b)===e&&(b=e,0===x&&M(ty)),(n=h)===e&&(n=function(){var h,b,y;return x++,h=t,92===s.charCodeAt(t)?(b="\\",t++):(b=e,0===x&&M(Ea)),b!==e?(95===s.charCodeAt(t)?(y="_",t++):(y=e,0===x&&M(ja)),y===e&&(126===s.charCodeAt(t)?(y="~",t++):(y=e,0===x&&M(cy)),y===e&&(46===s.charCodeAt(t)?(y=_t,t++):(y=e,0===x&&M(kt)),y===e&&(45===s.charCodeAt(t)?(y=St,t++):(y=e,0===x&&M(Tt)),y===e&&(33===s.charCodeAt(t)?(y="!",t++):(y=e,0===x&&M(Qn)),y===e&&(36===s.charCodeAt(t)?(y="$",t++):(y=e,0===x&&M(oa)),y===e&&(38===s.charCodeAt(t)?(y="&",t++):(y=e,0===x&&M(py)),y===e&&(39===s.charCodeAt(t)?(y="'",t++):(y=e,0===x&&M(Kn)),y===e&&(40===s.charCodeAt(t)?(y=I,t++):(y=e,0===x&&M(H)),y===e&&(41===s.charCodeAt(t)?(y=Fe,t++):(y=e,0===x&&M(Re)),y===e&&(42===s.charCodeAt(t)?(y=Je,t++):(y=e,0===x&&M(Ve)),y===e&&(43===s.charCodeAt(t)?(y=Mt,t++):(y=e,0===x&&M(Qt)),y===e&&(44===s.charCodeAt(t)?(y=dt,t++):(y=e,0===x&&M(vt)),y===e&&(59===s.charCodeAt(t)?(y=Rt,t++):(y=e,0===x&&M(Ot)),y===e&&(58===s.charCodeAt(t)?(y=":",t++):(y=e,0===x&&M(mr)),y===e&&(61===s.charCodeAt(t)?(y="=",t++):(y=e,0===x&&M(Xr)),y===e&&(47===s.charCodeAt(t)?(y="/",t++):(y=e,0===x&&M(zt)),y===e&&(63===s.charCodeAt(t)?(y="?",t++):(y=e,0===x&&M(Bn)),y===e&&(35===s.charCodeAt(t)?(y="#",t++):(y=e,0===x&&M(Fa)),y===e&&(64===s.charCodeAt(t)?(y="@",t++):(y=e,0===x&&M(aa)),y===e&&(37===s.charCodeAt(t)?(y="%",t++):(y=e,0===x&&M(Na)))))))))))))))))))))),y!==e?(b=function(n){return"\\"+n}(y),h=b):(t=h,h=e)):(t=h,h=e),x--,h===e&&(b=e,0===x&&M(uy)),h}()),x--,n===e&&0===x&&M(ey),n}function hu(){var n;return x++,ct.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(ft)),n===e&&(iy.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(oy)),n===e&&(sy.test(s.charAt(t))?(n=s.charAt(t),t++):(n=e,0===x&&M(ay)))),x--,n===e&&0===x&&M(ny),n}var Gt=function(n){for(var h="",b=0;b<n.length;b++)"string"==typeof n[b]?h+=n[b]:h+=n[b].join("");return h},At=0,du={},vy=function(n,h){du[n]=h},yy=function(n){du.null=n},vu=function(n){var h="";if(null==n)return null;for(var b=0;b<n.length;b++)h+=n[b];return h.toUpperCase()};if((c=o())!==e&&t===s.length)return c;throw c!==e&&t<s.length&&M({type:"end"}),function dy(n,h,b){return new Q(Q.buildMessage(n,h),n,h,b)}(ii,jt<s.length?s.charAt(jt):null,jt<s.length?Oa(jt,jt+1):Oa(jt,jt))}}}()},{}],129:[function(G,X,Z){G("./btree").Tree;var Q=G("./utils"),s=Q,w=G("./lexicon").Lexicon;PersistentLexicon=function(c,e){var r=this;Q.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=e||"rdfstorejs";var o=r.indexedDB.open(this.dbName+"_lexicon",1);o.onerror=function(u){c(null,new Error("Error opening IndexedDB: "+u.target.errorCode))},o.onsuccess=function(u){r.db=u.target.result,c(r)},o.onupgradeneeded=function(u){r.db=u.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(c,e,r){if(c!=this.defaultGraphOid){var o=this.db.transaction(["knownGraphs"],"readwrite");o.onerror=function(f){r(null,new Error(f.target.statusCode))};var u=o.objectStore("knownGraphs");u.get(e).onsuccess=function(f){f.target.result?r(!0):u.add({oid:c,uriToken:e}).onsuccess=function(l){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(c,e){var r=[],o=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();o.onsuccess=function(u){var f=u.target.result;f?(!0===c?r.push(f.value.uriToken):r.push(f.value.oid),f.continue()):e(r)},o.onerror=function(u){e(null,new Error("Error retrieving data from the cursor: "+u.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(c,e){if(c===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"],"readwrite").objectStore("components"),o=r.index("value").get("_u:"+c);o.onsuccess=function(u){var f=u.target.result;if(f){f.counter++;var l=f.id,m=r.put(f);m.onsuccess=function(a){e(l)},m.onerror=function(a){e(null,new Error("Error updating the URI data"+a.target.errorCode))}}else{var d=r.add({value:"_u:"+c,counter:0,uri:!0});d.onsuccess=function(a){e(a.target.result)},d.onerror=function(a){e(null,new Error("Error inserting the URI data"+a.target.errorCode))}}},o.onerror=function(u){e(null,new Error("Error retrieving the URI data"+u.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(c,e){if(c===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+c);r.onsuccess=function(o){null!=o.target.result?e(o.target.result.id):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving uri data "+o.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(c,e){if(c===this.defaultGraphUri)e(0);else{var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+c);r.onsuccess=function(o){null!=o.target.result?e(o.target.result.cost):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving uri data "+o.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(c){var e=guid(),r=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});r.onsuccess=function(o){c(o.target.result)},r.onerror=function(o){c(null,new Error("Error inserting the URI data"+o.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(c,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(c,e){var r=this.db.transaction(["components"],"readwrite").objectStore("components"),o=r.index("value").get("_l:"+c);o.onsuccess=function(u){var f=u.target.result;if(f){f.counter++;var l=f.id,m=r.put(f);m.onsuccess=function(a){e(l)},m.onerror=function(a){e(null,new Error("Error updating the literal data"+a.target.errorCode))}}else{var d=r.add({value:"_l:"+c,counter:0,literal:!0});d.onsuccess=function(a){e(a.target.result)},d.onerror=function(a){e(null,new Error("Error inserting the literal data"+a.target.errorCode))}}},o.onerror=function(u){e(null,new Error("Error retrieving the literal data"+u.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(c,e){var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+c);r.onsuccess=function(o){null!=o.target.result?e(o.target.result.id):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving literal data "+o.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(c,e){var r=that.db.transaction(["components"]).objectStore("components").index("components").get(c);r.onsuccess=function(o){null!=o.target.result?e(o.target.result.cost):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving literal data "+o.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(c){return w.prototype.parseLiteral(c)},PersistentLexicon.prototype.parseUri=function(c){return w.prototype.parseUri(c)},PersistentLexicon.prototype.retrieve=function(c,e){var r,o=this;c===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((r=o.db.transaction(["components"]).objectStore("components").get(c)).onsuccess=function(u){if(null!=u.target.result)if(null!=u.target.result.label){var f="_:"+u.target.result.id;e({token:"blank",value:f})}else null!=u.target.result.uri?e(o.parseUri(u.target.result.value.slice(3,u.target.result.value.length))):null!=u.target.result.literal?e(o.parseLiteral(u.target.result.value.slice(3,u.target.result.value.length))):(console.log(u.target.result),e(null,new Error("Unknown type of component "+u.target.result)));else e(null,null)},r.onerror=function(u){e(null,new Error("Error searching in blanks data "+u.target.errorCode))})},PersistentLexicon.prototype.clear=function(c){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,r=function(){c?.()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=r,e.onerror=r},PersistentLexicon.prototype.unregister=function(c,e,r){var o=this;s.seq(function(u){o._unregisterTerm(c.subject.token,e.subject,u)},function(u){o._unregisterTerm(c.predicate.token,e.predicate,u)},function(u){o._unregisterTerm(c.object.token,e.object,u)},function(u){null!=c.graph?o._unregisterTerm(c.graph.token,e.graph,u):u()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(c,e,r){var o=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===c?e!=this.defaultGraphOid?o.objectStore("components").delete(e).onsuccess=void(o.objectStore("knownGraphs").delete(e).onsuccess=function(){r()}):r():o.objectStore("components").delete(e).onsuccess=function(){r()}},X.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(G,X,Z){var Q=G("./utils");PersistentQuadBackend=function(s,w){var c=this;if(0!==arguments){for(var e in Q.registerIndexedDB(c),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var r=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[r]=e}c.dbName=s.name||"rdfstorejs";var o=c.indexedDB.open(this.dbName+"_db",1);o.onerror=function(u){w(null,new Error("Error opening IndexedDB: "+u.target.errorCode))},o.onsuccess=function(u){c.db=u.target.result,w(c)},o.onupgradeneeded=function(u){var f=u.target.result.createObjectStore(c.dbName,{keyPath:"SPOG"});Q.each(c.indices,function(l){"SPOG"!==l&&f.createIndex(l,l,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(s,w){var c=this;Q.each(this.indices,function(r){s[r]=c._genMinIndexKey(s,r)});var e=c.db.transaction([c.dbName],"readwrite");e.oncomplete=function(r){},e.onerror=function(r){w(null,new Error(r.target.statusCode))},e.objectStore(c.dbName).add(s).onsuccess=function(r){w(!0)}},PersistentQuadBackend.prototype.range=function(s,w){var c=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._indexForPattern(s),r=this._genMinIndexKey(s,e),o=this._genMaxIndexKey(s,e),u=this.IDBKeyRange.bound(r,o,!1,!1),f=[];("SPOG"===e?c:c.index(e)).openCursor(u).onsuccess=function(l){var m=l.target.result;m?(f.push(m.value),m.continue()):w(f)}},PersistentQuadBackend.prototype.search=function(s,w){var c=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._genMinIndexKey(s,"SPOG"),r=c.get(e);r.onerror=function(o){w(null,new Error(o.target.statusCode))},r.onsuccess=function(o){w(null!=o.target.result)}},PersistentQuadBackend.prototype.delete=function(s,w){var c=this._genMinIndexKey(s,"SPOG"),e=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(c);e.onsuccess=function(){w(!0)},e.onerror=function(r){w(null,new Error(r.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(s,w){var c=this.componentOrders[w];return Q.map(c,function(e){return"string"==typeof s[e]||null==s[e]?"0":s[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(s,w){for(var c=this.componentOrders[w],e=[],r=0;r<c.length;r++){var o=s[c[r]];e[r]="string"==typeof o?"z":o}return Q.map(e,function(u){return""+u}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(s){var w=s.indexKey.sort().join("."),c=this.componentOrdersMap[w];if(null==c)throw new Error("Error, cannot find index for indexKey "+w);return c},PersistentQuadBackend.prototype.clear=function(s){var w;(w=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){s()},w.onerror=function(){s()}},X.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(G,X,Z){var Q=G("./quad_index").QuadIndex,s=G("./utils");QuadBackend=function(w,c){this.indexMap={},this.treeOrder=w.treeOrder,this.indices=w.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;s.eachSeries(this.indices,function(r,o){new Q({order:e.treeOrder,componentOrder:e.componentOrders[r]},function(u){e.indexMap[r]=u,o()})},function(){c(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(w){for(var c=w.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var r=QuadBackend.allIndices[e],o=QuadBackend.componentOrders[r],u=0;u<o.length&&!1!==s.include(c,o[u]);u++)if(u==c.length-1)return r;return"SPOG"},QuadBackend.prototype.index=function(w,c){var e=this;s.eachSeries(this.indices,function(r,o){e.indexMap[r].insert(w,function(){o()})},function(){c(!0)})},QuadBackend.prototype.range=function(w,c){var e=this._indexForPattern(w);this.indexMap[e]?.range(w,function(o){c(o)})},QuadBackend.prototype.search=function(w,c){this.indexMap.SPOG?.search(w,function(r){c(null!=r)})},QuadBackend.prototype.delete=function(w,c){var e=this;s.eachSeries(this.indices,function(r,o){e.indexMap[r].delete(w,function(){o()})},function(){c(!0)})},QuadBackend.prototype.clear=function(w){var c=this;s.eachSeries(this.indices,function(e,r){new Q({order:c.treeOrder,componentOrder:c.componentOrders[e]},function(o){c.indexMap[e]=o,r()})},function(){w(!0)})},X.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(G,X,Z){var Q=G("./btree").Tree,s=G("./utils"),w=G("./utils");NodeKey=function(c,e){this.subject=c.subject,this.predicate=c.predicate,this.object=c.object,this.graph=c.graph,this.order=e},NodeKey.prototype.comparator=function(c){for(var e=0;e<this.order.length;e++){var r=this.order[e];if(null==c[r])return 0;if(this[r]<c[r])return-1;if(this[r]>c[r])return 1}return 0},Pattern=function(c){this.subject=c.subject,this.predicate=c.predicate,this.object=c.object,this.graph=c.graph,this.indexKey=[],this.keyComponents={};var e=[],r=[],o=this;s.forEach(["subject","predicate","object","graph"],function(u){"string"==typeof o[u]?(r.push(u),o.keyComponents[u]=null):(e.push(u),o.keyComponents[u]=o[u],o.indexKey.push(u))}),this.order=e.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(c,e){0!=arguments&&(this.componentOrder=c.componentOrder,Q.call(this,c.order,function(r){r.comparator=function(o,u){for(var f=0;f<r.componentOrder.length;f++){var l=r.componentOrder[f],m=o[l],d=u[l];if(m<d)return-1;if(m>d)return 1}return 0},r.rangeComparator=function(o,u){for(var f=0;f<r.componentOrder.length;f++){var l=r.componentOrder[f];if(null==u[l]||null==o[l])return 0;if(o[l]<u[l])return-1;if(o[l]>u[l])return 1}return 0},e(r)}))},QuadIndex.prototype=s.create(Q.prototype,{constructor:Q}),QuadIndex.prototype.insert=function(c,e){Q.prototype.insert.call(this,c,null,function(r){e(r)})},QuadIndex.prototype.search=function(c,e){Q.prototype.search.call(this,c,function(r){e(r)},!0)},QuadIndex.prototype.range=function(c,e){this._rangeTraverse(this,this.root,c,e)},QuadIndex.prototype._rangeTraverse=function(c,e,r,o){var u=r.key,f=[],l=[e];w.whilst(function(){return l.length>0},function(m){for(var d=l.shift(),a=0;a<d.numberActives&&-1===c.rangeComparator(d.keys[a].key,u);)a++;if(!0===d.isLeaf){for(var v=a;v<d.numberActives&&0===c.rangeComparator(d.keys[v].key,u);)f.push(d.keys[v].key),v++;m()}else c._diskRead(d.children[a],function(E){l.push(E);var F=a;w.whilst(function(){return F<d.numberActives&&0===c.rangeComparator(d.keys[F].key,u)},function(B){f.push(d.keys[F].key),F++,c._diskRead(d.children[F],function(N){l.push(N),B()})},function(){m()})})},function(){o(f)})},X.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(G,X,Z){var Q=G("./abstract_query_tree").AbstractQueryTree,s=G("./abstract_query_tree").NonSupportedSparqlFeatureError,w=G("./utils"),c=G("./quad_index"),e=G("./query_plan").QueryPlan,r=G("./query_filters").QueryFilters,o=G("./rdf_model"),u=G("./rdf_loader").RDFLoader,f=G("./graph_callbacks").CallbacksBackend,l=G("./utils"),m=G("./utils");function d(a,v,E){this.name="BindExpressionError",this.bind=v,this.error=E,this.message=a}d.prototype=new Error,d.constructor=d,QueryEngine=function(a){0!=arguments.length&&(this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new Q,this.rdfLoader=new u(a.communication),this.callbacksBackend=new f(this),this.customFns=a.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(a){this.customFns=a},QueryEngine.prototype.registerNsInEnvironment=function(a,v){var E=[];null!=a&&null!=a.prefixes&&(E=a.prefixes);var F={};for(var B in this.defaultPrefixes)F[B]=this.defaultPrefixes[B];for(var N=0;N<E.length;N++){var A=E[N];"prefix"===A.token&&(F[A.prefix]=A.local)}v.namespaces=F,null!=a&&a.base&&"object"==typeof a.base?v.base=a.base.value:v.base=null},QueryEngine.prototype.applyModifier=function(a,v){if("DISTINCT"==a){for(var E={},F=[],B=0;B<v.length;B++){var N=v[B],A="";for(var k in N){var j=N[k];null==j?A=A+k+"null":"literal"==j.token?(null!=j.value&&(A+=j.value),null!=j.lang&&(A+=j.lang),null!=j.type&&(A+=j.type)):A=j.value?A+k+j.value:A+k+j}null==E[A]&&(F.push(N),E[A]=!0)}return F}return v},QueryEngine.prototype.applyLimitOffset=function(a,v,E){return null==v&&null==a?E:(null==a&&(a=0),v=null==v?E.length:a+v,E.slice(a,v))},QueryEngine.prototype.applySingleOrderBy=function(a,v,E,F,B){var N=[],A=this;l.eachSeries(a,function(k,j){r.collect(k.expression,[v],E,F,A,function(D){N.push(D[0].value),j()})},function(){B({binding:v,value:N})})},QueryEngine.prototype.applyOrderBy=function(a,v,E,F,B){var N=this,A=[];null!=a&&a.length>0?l.eachSeries(v,function(k,j){N.applySingleOrderBy(a,k,E,F,function(D){A.push(D),j()})},function(){A.sort(function(D,q){return N.compareFilteredBindings(D,q,a,F)});for(var k=[],j=0;j<A.length;j++)k.push(A[j].binding);B(k)}):B(v)},QueryEngine.prototype.compareFilteredBindings=function(a,v,E,F){for(var B=0;;){if(B==a.value.length)return 0;var N,A=E[B].direction;if(null!=a.value[B]||null!=v.value[B]){if(null==a.value[B])N={value:!1};else if(null==v.value[B])N={value:!0};else{if("blank"===a.value[B].token&&"blank"===v.value[B].token){B++;continue}if("blank"===a.value[B].token)N={value:!1};else if("blank"===v.value[B].token)N={value:!0};else if("uri"===a.value[B].token&&"uri"===v.value[B].token){if(1==r.runEqualityFunction(a.value[B],v.value[B],[],this,F).value){B++;continue}N=r.runTotalGtFunction(a.value[B],v.value[B],[])}else if("uri"===a.value[B].token)N={value:!1};else if("uri"===v.value[B].token)N={value:!0};else if("literal"===a.value[B].token&&"literal"===v.value[B].token&&null==a.value[B].type&&null==v.value[B].type){if(1==r.runEqualityFunction(a.value[B],v.value[B],[],this,F).value){B++;continue}N=r.runTotalGtFunction(a.value[B],v.value[B],[])}else if("literal"===a.value[B].token&&null==a.value[B].type)N={value:!1};else if("literal"===v.value[B].token&&null==v.value[B].type)N={value:!0};else{if(1==r.runEqualityFunction(a.value[B],v.value[B],[],this,F).value){B++;continue}N=r.runTotalGtFunction(a.value[B],v.value[B],[])}}return 1==N.value?"ASC"===A?1:-1:"ASC"===A?-1:1}B++}},QueryEngine.prototype.removeDefaultGraphBindings=function(a,v){for(var E=[],F={},B=0;B<v.named.length;B++)F[v.named[B].oid]=!0;for(B=0;B<v.implicit.length;B++)null==F[v.implicit[B].oid]&&E.push(v.implicit[B].oid);var N=[];for(B=0;B<a.length;B++){var A=a[B],k=!1;for(var j in A){for(var D=0;D<F.length;D++)if(A[j]===F[D]){k=!0;break}if(k)break}k||N.push(A)}return N},QueryEngine.prototype.aggregateBindings=function(a,v,E,F,B){this.copyDenormalizedBindings(v,F.outCache,function(N){for(var A={},k=0;k<a.length;k++){var j=r.runAggregator(a[k],N,this,E,F);a[k].alias?A[a[k].alias.value]=j:A[a[k].value.value]=j}B(A)})},QueryEngine.prototype.projectBindings=function(a,v,E){if("*"===a[0].kind)return v;for(var F=[],B=0;B<v.length;B++){for(var N=v[B],A={},k=!0,j=0;j<a.length;j++)if("variable"==a[j].token&&"aliased"!=a[j].kind)A[a[j].value.value]=N[a[j].value.value];else if("variable"==a[j].token&&"aliased"==a[j].kind){var D=r.runFilter(a[j].expression,N,this,E,{blanks:{},outCache:{}});if(r.isEbvError(D)){k=!1;break}A[a[j].alias.value]=D}!0===k&&F.push(A)}return F},QueryEngine.prototype.resolveNsInEnvironment=function(a,v){return v.namespaces[a]},QueryEngine.prototype.normalizeTerm=function(a,v,E,F){if("uri"===a.token){var B=w.lexicalFormBaseUri(a,v);null==B?F(null):E?this.lexicon.registerUri(B,F):this.lexicon.resolveUri(B,F)}else if("literal"===a.token){var N=w.lexicalFormLiteral(a,v);E?this.lexicon.registerLiteral(N,F):this.lexicon.resolveLiteral(N,F)}else if("blank"===a.token){var A=a.value,k=v.blanks[A];null!=k?F(k):E?this.lexicon.registerBlank(function(j){v.blanks[A]=j,F(j)}):this.lexicon.resolveBlank(function(j){v.blanks[A]=j,F(j)})}else"var"===a.token?F(a.value):F(null)},QueryEngine.prototype.normalizeDatasets=function(a,v,E){var F=this;l.eachSeries(a,function(B,N){B.value===F.lexicon.defaultGraphUri?(B.oid=F.lexicon.defaultGraphOid,N()):F.normalizeTerm(B,v,!1,function(A){null!=A&&(B.oid=A),N()})},function(){E(!0)})},QueryEngine.prototype.normalizeQuad=function(a,v,E,F){var B=null,N=null,A=null,k=null,j=this,D=!1;l.seq(function(q){if(null==a.graph||a.graph.value===j.lexicon.defaultGraphUri)k=0,q();else{var P=w.lexicalFormBaseUri(a.graph,v);j.normalizeTerm(a.graph,v,E,function(W){null!=W?(k=W,!0===E&&"var"!=a.graph.token?j.lexicon.registerGraph(W,P,function(){q()}):q()):(D=!0,q())})}},function(q){!1===D?j.normalizeTerm(a.subject,v,E,function(P){null!=P?(B=P,q()):(D=!0,q())}):q()},function(q){!1===D?j.normalizeTerm(a.predicate,v,E,function(P){null!=P?(N=P,q()):(D=!0,q())}):q()},function(q){!1===D?j.normalizeTerm(a.object,v,E,function(P){null!=P?(A=P,q()):(D=!0,q())}):q()})(function(){F(!0===D?null:{subject:B,predicate:N,object:A,graph:k})})},QueryEngine.prototype.denormalizeBindingsList=function(a,v,E){var F=this,B=[];l.eachSeries(a,function(N,A){F.denormalizeBindings(N,v,function(k){B.push(k),A()})},function(){E(B)})},QueryEngine.prototype.copyDenormalizedBindings=function(a,v,E){var F=this,B=[];l.eachSeries(a,function(N,A){var k={},j=m.keys(N);l.eachSeries(j,function(D,q){var P=N[D];if(null==P)k[D]=null,q();else if("object"==typeof P)k[D]=P,q();else{var W=v[P];null!=W?(k[D]=W,q()):F.lexicon.retrieve(P,function(Y){v[P]=Y,k[D]=Y,q()})}},function(){B.push(k),A()})},function(){E(B)})},QueryEngine.prototype.denormalizeBindings=function(a,v,E){var F=m.keys(a),B=v.outCache,N=this;l.eachSeries(F,function(A,k){var j=a[A];null==j?(a[A]=null,k()):"object"==typeof j?k():null!=B[j]?(a[A]=B[j],k()):N.lexicon.retrieve(j,function(D){a[A]=D,"blank"===D.token&&(v.blanks[D.value]=j),k()})},function(){E(a)})},QueryEngine.prototype.execute=function(a,v,E,F){a=w.normalizeUnicodeLiterals(a);var B=this.abstractQueryTree.parseQueryString(a);if(null==B)v(!1,"Error parsing query string");else if("query"===B.token&&"update"==B.kind){this.callbacksBackend.startGraphModification();var N=this;this.executeUpdate(B,function(A,k){N.lexicon.updateAfterWrite&&N.lexicon.updateAfterWrite(),A?(N.callbacksBackend.cancelGraphModification(),v(A,k)):N.callbacksBackend.endGraphModification(function(){v(A,k)})})}else"query"===B.token&&"query"==B.kind&&this.executeQuery(B,v,E,F)},QueryEngine.prototype.executeQuery=function(a,v,E,F){var B=a.prologue,N=a.units,A=this,k={blanks:{},outCache:{}};this.registerNsInEnvironment(B,k);var j=A.abstractQueryTree.parseExecutableUnit(N[0]);"select"===j.kind?this.executeSelect(j,k,E,F,function(D,q){null==D?"object"==typeof q&&!0===q.denorm?v(null,q.bindings):A.denormalizeBindingsList(q,k,function(P){v(null,P)}):v(D)}):"ask"===j.kind?(j.projection=[{token:"variable",kind:"*"}],this.executeSelect(j,k,E,F,function(D,q){null==D?q.length>0?v(null,!0):v(null,!1):v(D)})):"construct"===j.kind&&(j.projection=[{token:"variable",kind:"*"}],A=this,this.executeSelect(j,k,E,F,function(D,q){null==D?A.denormalizeBindingsList(q,k,function(P){if(null!=P){var W=new o.Graph;null==j.template&&(j.template={triplesContext:j.pattern});for(var Y=1,ne=[],ce=0;ce<P.length;ce++){for(var $=P[ce],ee=0;ee<ne.length;ee++)delete ne[ee].valuetmp;for(ee=0;ee<j.template.triplesContext.length;ee++){for(var J=["subject","predicate","object"],ie=j.template.triplesContext[ee],oe=0;oe<J.length;oe++){var ye=J[oe];if("blank"===ie[ye].token&&(!ie[ye].valuetmp||null==ie[ye].valuetmp)){var be="_:b"+Y;Y++,ie[ye].valuetmp=be,ne.push(ie[ye])}}var de=o.buildRDFResource(ie.subject,$,A,k),le=(oe=o.buildRDFResource(ie.predicate,$,A,k),o.buildRDFResource(ie.object,$,A,k));if(null!=de&&null!=oe&&null!=le){var Ce=new o.Triple(de,oe,le);W.add(Ce)}}}v(null,W)}else v(new Error("Error denormalizing bindings."))}):v(D)}))},QueryEngine.prototype.executeSelect=function(a,v,E,F,B){if("select"===a.kind||"ask"===a.kind||"construct"===a.kind||"modify"===a.kind){var N=a.projection,A=a.dataset,k=a.modifier,j=a.limit,D=a.offset,q=a.order,P=this;null==E&&null==F||(A.implicit=E||[],A.named=F||[]),null!=A.implicit&&0===A.implicit.length&&null!=A.named&&0===A.named.length&&A.implicit.push(this.lexicon.defaultGraphUriTerm),P.normalizeDatasets(A.implicit.concat(A.named),v,function(){try{P.executeSelectUnit(N,A,a.pattern,v,function(W){if(null!=W){if(null!=a.group&&""===a.group){for(var Y=!1,ne=0;ne<a.projection.length;ne++)if(null!=a.projection[ne].expression&&"aggregate"===a.projection[ne].expression.expressionType){Y=!0;break}!0===Y&&(a.group="singleGroup")}a.group&&""!=a.group?P.checkGroupSemantics(a.group,N)?P.groupSolution(W,a.group,A,v,function(ce){var $=[];l.eachSeries(ce,function(ee,J){P.aggregateBindings(N,ee,A,v,function(ie){$.push(ie),J()})},function(){B(null,{bindings:$,denorm:!0})})}):B(new Error("Incompatible Group and Projection variables")):P.applyOrderBy(q,W,A,v,function(ce){var $=P.projectBindings(N,ce,A),ee=P.applyModifier(k,$),J=P.applyLimitOffset(D,j,ee),ie=P.removeDefaultGraphBindings(J,A);B(null,ie)})}else B(new Error("Error executing SELECT query."))})}catch(W){B(W)}})}else B(new Error("Cannot execute "+a.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(a,v,E,F,B){var N=[],A=[],k=!1,j=this;"singleGroup"===v?B([a]):l.eachSeries(a,function(D,q){var P=!0;l.eachSeries(v,function(W,Y){var ne=null;if("var"===W.token)ne=W.value,0==k&&N.push(ne),Y();else if("aliased_expression"===W.token){if(ne=W.alias.value,0==k&&N.push(ne),"var"===W.expression.primaryexpression)D[W.alias.value]=D[W.expression.value.value];else{var ce=j.copyDenormalizedBindings([D],F.outCache),$=r.runFilter(W.expression,ce[0],j,E,F);r.isEbvError($)?P=!1:(null!=$.value&&($.value=""+$.value),D[W.alias.value]=$)}Y()}else j.copyDenormalizedBindings([D],F.outCache,function(ee){var J=r.runFilter(W,ee[0],j,F);r.isEbvError(J)?P=!1:(D["groupCondition"+env._i]=J,ne="groupCondition"+env._i,0==k&&N.push(ne)),Y()})},function(){0==k&&(k=!0),!0===P&&A.push(D),q()})},function(){for(var D={},q={},P=0;P<A.length;P++){for(var W=A[P],Y="",ne=0;ne<N.length;ne++){var ce=W[N[ne]];Y+="object"==typeof ce?ce.value:ce}null==D[Y]?(q[Y]=0,D[Y]=[W]):D[Y].push(W)}var $=[];for(var ee in D)$.push(D[ee]);B($)})},QueryEngine.prototype.executeSelectUnit=function(a,v,E,F,B){if("BGP"===E.kind)this.executeAndBGP(a,v,E,F,B);else if("UNION"===E.kind)this.executeUNION(a,v,E.value,F,B);else if("JOIN"===E.kind)this.executeJOIN(a,v,E,F,B);else if("LEFT_JOIN"===E.kind)this.executeLEFT_JOIN(a,v,E,F,B);else if("FILTER"===E.kind){var N=this;this.executeSelectUnit(a,v,E.value,F,function(A){null!=A?r.checkFilters(E,A,!1,v,F,N,B):B([])})}else{if("EMPTY_PATTERN"!==E.kind)throw new s(E.kind);B([])}},QueryEngine.prototype.executeUNION=function(a,v,E,F,B){var N,A,k=E[0],j=E[1],D=null;if(2!=E.length)throw"SPARQL algebra UNION with more than two components";var q=this;l.seq(function(P){try{q.executeSelectUnit(a,v,k,F,function(W){N=W,P()})}catch(W){D=W,P()}},function(P){if(null==D)try{q.executeSelectUnit(a,v,j,F,function(W){A=W,P()})}catch(W){D=W,P()}else P()})(function(){if(null!=D)B(D);else{var P=e.unionBindings(N,A);q.runBinds(E.binds,P,v,F,function(W,Y){if(null!=W)throw new d("Error processing bind expressions",E.binds,W);r.checkFilters(E,Y,!1,v,F,q,B)})}})},QueryEngine.prototype.executeAndBGP=function(a,v,E,F,B){var N=this;e.executeAndBGPsDPSize(E.value,v,this,F,function(A){null!=A?N.runBinds(E.binds,A,v,F,function(k,j){if(null!=k)throw new d("Error processing bind expressions",E.binds,k);r.checkFilters(E,j,!1,v,F,N,B)}):B(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(a,v,E,F,B){var N=E.lvalue,A=E.rvalue;if("EMPTY_PATTERN"===N.kind)this.executeSelectUnit(a,v,A,F,B);else{var k,j,D=null,q=null,P=null,W=this;l.seq(function(Y){try{W.executeSelectUnit(a,v,N,F,function(ne){D=ne,Y()})}catch(ne){P=ne,Y()}},function(Y){if(null!=P)Y();else try{W.executeSelectUnit(a,v,A,F,function(ne){q=ne,Y()})}catch(ne){P=ne,Y()}})(function(){if(null!=P)B(P);else{var Y=e.leftOuterJoinBindings(D,q);W.runBinds(E.binds,Y,v,F,function(ne,ce){if(null!=ne)throw new d("Error processing bind expressions",E.binds,ne);r.checkFilters(E,Y,!0,v,F,W,function($){if(D.length>1&&q.length>1){var ee=[],J={};for(var ie in D[0])J[ie]=!0;for(ie in q[0])1!=J[ie]&&ee.push(ie);k=[],j={};for(var oe=0;oe<$.length;oe++)if(!0===$[oe].__nullify__){for(var ye=0;ye<ee.length;ye++)$[oe].bindings[ee[ye]]=null;var be=[],de=[];for(var ie in $[oe].bindings)null!=$[oe].bindings[ie]&&(be.push(ie+$[oe].bindings[ie]),be.sort(),de.push(be.join("")));if(null==j[be.join("")]){for(ye=0;ye<de.length;ye++)j[de[ye]]=!0;k.push($[oe].bindings)}}else for(var ie in k.push($[oe]),be=[],de=[],$[oe])be.push(ie+$[oe][ie]),be.sort(),j[be.join("")]=!0;B(k)}else B($)})})}})}},QueryEngine.prototype.executeJOIN=function(a,v,E,F,B){var N=E.lvalue,A=E.rvalue,k=null,j=null,D=null,q=this;l.seq(function(P){try{q.executeSelectUnit(a,v,N,F,function(W){k=W,P()})}catch(W){D=W,P()}},function(P){if(null!=D)P();else try{q.executeSelectUnit(a,v,A,F,function(W){j=W,P()})}catch(W){D=W,P()}})(function(){var P=null;if(null!=D)B(D);else if(0===k.length||0===j.length)B([]);else{var W={},Y=[];for(var ne in k[0])W[ne]=!1;for(var ne in j[0])!1===W[ne]&&Y.push(ne);P=0==Y.length||q.abstractQueryTree.treeWithUnion(N)||q.abstractQueryTree.treeWithUnion(A)?e.joinBindings(k,j):e.joinBindings2(Y,k,j),q.runBinds(E.binds,P,v,F,function(ce,$){if(null!=ce)throw new d("Error processing bind expressions",E.binds,ce);r.checkFilters(E,$,!1,v,F,q,B)})}})},QueryEngine.prototype.rangeQuery=function(a,v,E){var F=this;F.normalizeQuad(a,v,!1,function(B){null!=B?F.backend.range(new c.Pattern(B),function(N){null==N||0==N.length?E([]):E(N)}):E(null)})},QueryEngine.prototype.executeUpdate=function(a,v){var E=a.prologue,F=a.units,B=this,N={blanks:{},outCache:{}};this.registerNsInEnvironment(E,N);for(var A=0;A<F.length;A++){var k=B.abstractQueryTree.parseExecutableUnit(F[A]);if("insertdata"===k.kind){var j=null;l.eachSeries(k.quads,function(q,P){null===j?B._executeQuadInsert(q,N,function(W){null!=W&&(j=W),P()}):P()},function(){null===j?v(null,!0):v(j)})}else if("deletedata"===k.kind)j=null,l.eachSeries(k.quads,function(q,P){null===j?B._executeQuadDelete(q,N,function(W){null!=W&&(j=W),P()}):P()},function(){null===j?v(null,!0):v(j)});else if("modify"===k.kind)this._executeModifyQuery(k,N,v);else if("create"===k.kind)v(!0);else if("load"===k.kind){var D={uri:w.lexicalFormBaseUri(k.sourceGraph,N)};null!=k.destinyGraph&&(D={uri:w.lexicalFormBaseUri(k.destinyGraph,N)}),B=this,this.rdfLoader.load(k.sourceGraph.value,D,function(q,P){q?v(new Error("error batch loading quads")):B.batchLoad(P,function(W){null!==W?v(null,W):v(new Error("Error batch loading quads"))})})}else if("drop"===k.kind)this._executeClearGraph(k.destinyGraph,N,v);else{if("clear"!==k.kind)throw new Error("not supported execution unit");this._executeClearGraph(k.destinyGraph,N,v)}}},QueryEngine.prototype.batchLoad=function(a,v){var E=0,F={},B=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),l.eachSeries(a,function(N,A){var k={};l.eachSeries(["subject","predicate","object","graph"],function(j,D){!function(q,P,W,Y){var ne;if(q[P].uri||"uri"===q[P].token){var ce=q[P].uri||q[P].value;B.lexicon.registerUri(ce,function($){var ee=function(){null!=q[P].uri&&(q[P]={token:"uri",value:q[P].uri},delete q[P].uri),W[P]=$,Y()};"graph"===P?B.lexicon.registerGraph($,ce,function(){ee()}):ee()})}else q[P].literal||"literal"===q[P].token?B.lexicon.registerLiteral(q[P].literal||q[P].value,function($){null!=q[P].literal&&(q[P]=B.lexicon.parseLiteral(q[P].literal),delete q[P].literal),W[P]=$,Y()}):null==(ne=F[q[P].blank||q[P].value])?B.lexicon.registerBlank(function($){F[q[P].blank||q[P].value]=$,null==q[P].token&&(q[P].token="blank",q[P].value=q[P].blank,delete q[P].blank),W[P]=$,Y()}):(null==q[P].token&&(q[P].token="blank",q[P].value=q[P].blank,delete q[P].blank),W[P]=ne,Y())}(N,j,k,D)},function(){var j=N;N=k;var D=new c.NodeKey(N);B.backend.search(D,function(q){q?A():B.backend.index(D,function(P){P&&(B.eventsOnBatchLoad&&B.callbacksBackend.nextGraphModification(f.added,[j,N]),E+=1),A()})})})},function(){null!=B.lexicon.updateAfterWrite&&B.lexicon.updateAfterWrite();var N=function(){v(E)};B.eventsOnBatchLoad?B.callbacksBackend.endGraphModification(N()):N()})},QueryEngine.prototype._executeModifyQuery=function(a,v,E){var F=this,B=!0,N=new Error("Error executing modify query"),A=null,k=["subject","predicate","object","graph"];a.insert=null==a.insert?[]:a.insert,a.delete=null==a.delete?[]:a.delete,l.seq(function(j){var D=[],q=[];if(null!=a.with&&D.push(a.with),null!=a.using){q=[];for(var P=0;P<a.using.length;P++){var W=a.using[P];"named"===W.kind?q.push(W.uri):D.push(W.uri)}}a.dataset={},a.projection=[{token:"variable",kind:"*"}],F.executeSelect(a,v,D,q,function(Y,ne){if(Y)return N=Y,B=!1,j();F.denormalizeBindingsList(ne,v,function(ce){null!=ce?A=ce:(N=new Error("Error denormalizing bindings list"),B=!1),j()})})},function(j){var D=a.with;if(B){for(var q=[],P=0;P<a.delete.length;P++)for(var W=a.delete[P],Y=0;Y<A.length;Y++){for(var ne={},ce=A[Y],$=0;$<k.length;$++){var ee=k[$];"graph"==ee&&null==W[ee]?ne.graph=D:"var"===W[ee].token?ne[ee]=ce[W[ee].value]:ne[ee]=W[ee]}q.push(ne)}l.eachSeries(q,function(J,ie){F._executeQuadDelete(J,v,function(){ie()})},function(){j()})}else j()},function(j){var D=a.with;if(B){for(var q=[],P=0;P<a.insert.length;P++)for(var W=a.insert[P],Y=0;Y<A.length;Y++){for(var ne={},ce=A[Y],$=0;$<k.length;$++){var ee=k[$];"graph"==ee&&null==W[ee]?ne.graph=D:"var"===W[ee].token?ne[ee]=ce[W[ee].value]:ne[ee]=W[ee]}q.push(ne)}l.eachSeries(q,function(J,ie){F._executeQuadInsert(J,v,function(){ie()})},function(){j()})}else j()})(function(){E(B?null:N)})},QueryEngine.prototype._executeQuadInsert=function(a,v,E){var F,B=this,N=!1,A=null;l.seq(function(k){B.normalizeQuad(a,v,!0,function(j){null!=j?F=j:(N=!0,A="Error normalizing quad."),k()})},function(k){if(!1===N){var j=new c.NodeKey(F);B.backend.search(j,function(D){!0===D?k():B.backend.index(j,function(){B.callbacksBackend.nextGraphModification(f.added,[a,F]),k()})})}else k()})(function(){N?E(new Error(A)):E(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(a,v,E){var F,B,N,A=this,k=!1;l.seq(function(j){A.normalizeQuad(a,v,!0,function(D){null!=D?F=D:(k=!0,B="Error normalizing quad."),j()})},function(j){!1===k?(N=new c.NodeKey(F),A.backend.delete(N,function(){j()})):j()},function(j){!1===k?A.lexicon.unregister(a,N,function(){A.callbacksBackend.nextGraphModification(f.deleted,[a,F]),j()}):j()})(function(){k?E(new Error(B)):E(null,!0)})},QueryEngine.prototype._executeClearGraph=function(a,v,E){var F=this;if("default"===a)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",E);else if("named"===a)F.lexicon.registeredGraphs(!0,function(N){if(null!=N){var A=!1;l.eachSeries(N,function(k,j){A?j():F.execute("DELETE { GRAPH <"+k+"> { ?s ?p ?o } } WHERE { GRAPH <"+k+"> { ?s ?p ?o } }",function(D,q){D?(A=D,j()):F.lexicon.resolveUri(k,function(P){-1!=P?F.lexicon.knownGraphs.delete(P,function(){j()}):(A="Cannot find graph "+k+" to clear it",j())})})},function(){E(!A)})}else E(!1,"Error deleting named graphs")});else if("all"===a)F=this,this.execute("CLEAR DEFAULT",function(N,A){N?E(!1,A):F.execute("CLEAR NAMED",E)});else if("uri"==a.token){var B=w.lexicalFormBaseUri(a,v);null!=B?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+B+"> { ?s ?p ?o } } WHERE { GRAPH <"+B+"> { ?s ?p ?o } }",function(N){F.callbacksBackend.ongoingModification=!1,E(N)})):E(!1,"wrong graph URI")}else E(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(a,v){if("singleGroup"===a)return!0;for(var E={},F=0;F<a.length;F++){var B=a[F];"var"===B.token?E[B.value]=!0:"aliased_expression"===B.token&&(E[B.alias.value]=!0)}for(F=0;F<v.length;F++){var N=v[F];if("var"===N.kind){if(null==E[N.value.value])return!1}else if("aliased"===N.kind&&N.expression&&"var"===N.expression.primaryexpression&&null==E[N.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(a,v,E,F,B){var N=this,A=v;null!=a&&a.length>0?N.copyDenormalizedBindings(v,F.outCache,function(k){for(var j=0;j<v.length;j++)for(var D=0;D<a.length;D++){var q=a[D],P=k[j],W=r.runFilter(q.expression,P,N,E,F);r.isEbvError(W)?B(W):A[j][q.as.value]=W}B(null,v)}):B(null,v)},QueryEngine.prototype.computeCosts=function(a,v,E){for(var F=0;F<a.length;F++)a[F]._cost=this.quadCost(a[F],v);E(a)},QueryEngine.prototype.quadCost=function(a,v){return 1},QueryEngine.prototype.registerDefaultNamespace=function(a,v){this.defaultPrefixes[a]=v},X.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(G,X,Z){var Q=G("./utils"),s=Q,w=G("./utils");QueryFilters={};var c="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,r,o,u,f,l,m){var d=[];e.filter&&"function"!=typeof e.filter&&(d=e.filter);var a=[];if(null==d||0===d.length||null!=e.length)return m(r);QueryFilters.preprocessExistentialFilters(d,r,l,u,f,function(v){w.eachSeries(v,function(E,F){QueryFilters.run(E.value,r,o,u,f,l,function(B){for(var N=[],A=0;A<B.length;A++){var k=B[A];null!=k.__nullify__?a.push(k):N.push(k)}r=N,F()})},function(){m(r.concat(a))})})},QueryFilters.preprocessExistentialFilters=function(e,r,o,u,f,l){var m=[];w.eachSeries(e,function(d,a){if("builtincall"!==d.value.expressionType||"exists"!==d.value.builtincall&&"notexists"!==d.value.builtincall)if("conditionalor"===d.value.expressionType||"conditionaland"===d.value.expressionType){var v=s.map(d.value.operands,function(N){return{value:N}});QueryFilters.preprocessExistentialFilters(v,r,o,u,f,function(N){d.value.operands=N.map(function(A){return A.value}),m.push(d),a()})}else"multiplicativeexpression"===d.value.expressionType?(v=s.map(d.value.factors,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(v,r,o,u,f,function(N){d.value.factors=N.map(function(A){return A.value}),m.push(d),a()})):"additiveexpression"===d.value.expressionType?(v=s.map(d.value.summands,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(v,r,o,u,f,function(N){d.value.summands=N.map(function(A){return A.value}),m.push(d),a()})):"relationalexpression"===d.value.expressionType?(v=[{value:d.value.op1},{value:d.value.op2}],QueryFilters.preprocessExistentialFilters(v,r,o,u,f,function(N){d.value.op1=N[0].value,d.value.op2=N[1].value,m.push(d),a()})):"irireforfunction"!==d.value.expressionType&&"custom"!==d.value.expressionType||null==d.value.args?(m.push(d),a()):(v=s.map(d.value.args,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(v,r,o,u,f,function(N){d.value.args=N.map(function(A){return A.value}),m.push(d),a()}));else{var E=d.value.builtincall,F=d.value.args,B={};o.copyDenormalizedBindings(r,f.outCache,function(N){w.eachSeries(N,function(A,k){var j=s.clone(F[0],!0),D=o.abstractQueryTree.parseSelect({pattern:j},A);D=o.abstractQueryTree.bind(D.pattern,A),o.executeSelectUnit([{kind:"*"}],u,D,f,function(q){var P;P="exists"===E?QueryFilters.ebvBoolean(0!==q.length):QueryFilters.ebvBoolean(0===q.length);var W=[];for(var Y in A)W.push(JSON.stringify(A[Y]));W=W.sort().join(""),B[W]=P,k()})},function(){d.value.origArgs=d.value.args,d.value.args=B,m.push(d),a()})})}},function(){l(m)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var r=e.expressionType;if("relationalexpression"==r){var o=e.op1,u=e.op2;return QueryFilters.boundVars(o)+QueryFilters.boundVars(u)}if("conditionalor"==r||"conditionaland"==r){for(var f=[],l=0;l<e.operands;l++)f=f.concat(QueryFilters.boundVars(e.operands[l]));return f}if("builtincall"==r){if(null==e.args)return[];var m=[];for(l=0;l<e.args.length;l++)m=m.concat(QueryFilters.boundVars(e.args[l]));return m}if("multiplicativeexpression"==r){m=QueryFilters.boundVars(e.factor);for(l=0;l<e.factors.length;l++)m=m.concat(QueryFilters.boundVars(e.factors[l].expression));return m}if("additiveexpression"==r){for(m=QueryFilters.boundVars(e.summand),l=0;l<e.summands.length;l++)m=m.concat(QueryFilters.boundVars(e.summands[l].expression));return m}return"regex"==r?(m=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==r?QueryFilters.boundVars(e.expression):"atomic"==r?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,r,o,u,f,l,m){l.copyDenormalizedBindings(r,f.outCache,function(d){for(var a=[],v=0;v<r.length;v++){var E=d[v],F=QueryFilters.runFilter(e,E,l,u,f);if(F=QueryFilters.ebv(F),QueryFilters.isEbvError(F)){if(o){var B={__nullify__:!0,bindings:r[v]};a.push(B)}}else!0===F?a.push(r[v]):o&&(B={__nullify__:!0,bindings:r[v]},a.push(B))}m(a)})},QueryFilters.collect=function(e,r,o,u,f,l){f.copyDenormalizedBindings(r,u.outCache,function(m){for(var d=[],a=0;a<m.length;a++){var v=m[a],E=QueryFilters.runFilter(e,v,f,o,u);d.push({binding:r[a],value:E})}return l(d)})},QueryFilters.runDistinct=function(e,r){},QueryFilters.runAggregator=function(e,r,o,u,f){if(null==r||0===r.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return r[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return r[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var l=null,m=0;m<r.length;m++){var d=r[m],a=QueryFilters.runFilter(e.expression.expression,d,o,u,f);QueryFilters.isEbvError(a)||(null===l||!0===QueryFilters.runLtFunction(l,a).value)&&(l=a)}return null===l?QueryFilters.ebvError():l}if("min"===e.expression.aggregateType){var v=null;for(m=0;m<r.length;m++)d=r[m],a=QueryFilters.runFilter(e.expression.expression,d,o,u,f),QueryFilters.isEbvError(a)||(null===v||!0===QueryFilters.runGtFunction(v,a).value)&&(v=a);return null===v?QueryFilters.ebvError():v}if("count"===e.expression.aggregateType){var E={},F=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(m=0;m<r.length;m++)d=r[m],null==E[A=Q.hashTerm(d)]&&(E[A]=!0,F++);else F=r.length;else for(m=0;m<r.length;m++)d=r[m],a=QueryFilters.runFilter(e.expression.expression,d,o,u,f),QueryFilters.isEbvError(a)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=Q.hashTerm(a)]&&(E[A]=!0,F++):F++);return{token:"literal",type:c+"integer",value:""+F}}if("avg"===e.expression.aggregateType){E={};var B={token:"literal",type:c+"integer",value:"0"};for(F=0,m=0;m<r.length;m++)d=r[m],a=QueryFilters.runFilter(e.expression.expression,d,o,u,f),QueryFilters.isEbvError(a)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=Q.hashTerm(a)]&&(E[A]=!0,QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a),F++)):QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a),F++));var N=QueryFilters.runDivFunction(B,{token:"literal",type:c+"integer",value:""+F});return N.value=""+N.value,N}if("sum"===e.expression.aggregateType){for(E={},B={token:"literal",type:c+"integer",value:"0"},m=0;m<r.length;m++){var A;d=r[m],a=QueryFilters.runFilter(e.expression.expression,d,o,u,f),QueryFilters.isEbvError(a)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==E[A=Q.hashTerm(a)]&&(E[A]=!0,QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a))):QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a)))}return B.value=""+B.value,B}return QueryFilters.runFilter(aggregate.expression,r[0],u,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,r,o,u,f){if(null!=e.expressionType){var l=e.expressionType;if("relationalexpression"==l){var m=QueryFilters.runFilter(e.op1,r,o,u,f),d=QueryFilters.runFilter(e.op2,r,o,u,f);return QueryFilters.runRelationalFilter(e,m,d,r,o,u,f)}if("conditionalor"==l)return QueryFilters.runOrFunction(e,r,o,u,f);if("conditionaland"==l)return QueryFilters.runAndFunction(e,r,o,u,f);if("additiveexpression"==l)return QueryFilters.runAddition(e.summand,e.summands,r,o,u,f);if("builtincall"==l)return QueryFilters.runBuiltInCall(e.builtincall,e.args,r,o,u,f);if("multiplicativeexpression"==l)return QueryFilters.runMultiplication(e.factor,e.factors,r,o,u,f);if("unaryexpression"==l)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,r,o,u,f);if("irireforfunction"==l)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,r,o,u,f);if("regex"==l)return QueryFilters.runRegex(e.text,e.pattern,e.flags,r,o,u,f);if("custom"==l)return QueryFilters.runBuiltInCall(e.name,e.args,r,o,u,f);if("atomic"==l)return"var"==e.primaryexpression?r[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=Q.lexicalFormBaseUri(e.value.type,f)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,r,o,u){return"literal"===e.token&&"literal"===r.token?e.lang==r.lang&&e.type==r.type&&e.value==r.value||(null!=e.type&&null!=r.type||QueryFilters.isSimpleLiteral(e)&&null!=r.type||!(!QueryFilters.isSimpleLiteral(r)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===r.token?Q.lexicalFormBaseUri(e,u)==Q.lexicalFormBaseUri(r,u):"blank"===e.token&&"blank"===r.token&&e.value==r.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==c+"integer"||e.type==c+"decimal"||e.type==c+"double"||e.type==c+"nonPositiveInteger"||e.type==c+"negativeInteger"||e.type==c+"long"||e.type==c+"int"||e.type==c+"short"||e.type==c+"byte"||e.type==c+"nonNegativeInteger"||e.type==c+"unsignedLong"||e.type==c+"unsignedInt"||e.type==c+"unsignedShort"||e.type==c+"unsignedByte"||e.type==c+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==c+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==c+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==c+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==c+"integer"||e.type==c+"decimal"||e.type==c+"float"||e.type==c+"double"||e.type==c+"nonPositiveInteger"||e.type==c+"negativeInteger"||e.type==c+"long"||e.type==c+"int"||e.type==c+"short"||e.type==c+"byte"||e.type==c+"nonNegativeInteger"||e.type==c+"unsignedLong"||e.type==c+"unsignedInt"||e.type==c+"unsignedShort"||e.type==c+"unsignedByte"||e.type==c+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,r){return!(!r||"literal"!=r.token)&&r.type==c+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==c+"integer"||e.type==c+"decimal"||e.type==c+"double"||e.type==c+"nonPositiveInteger"||e.type==c+"negativeInteger"||e.type==c+"long"||e.type==c+"int"||e.type==c+"short"||e.type==c+"byte"||e.type==c+"nonNegativeInteger"||e.type==c+"unsignedLong"||e.type==c+"unsignedInt"||e.type==c+"unsignedShort"||e.type==c+"unsignedByte"||e.type==c+"positiveInteger"){var r=parseFloat(e.value);return!isNaN(r)&&0!=parseFloat(e.value)}return e.type===c+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===c+"string"?""!=e.value:e.type===c+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:c+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:c+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,r,o,u,f,l,m){var d=e.operator;if("="===d)return QueryFilters.runEqualityFunction(r,o,u,f,l,m);if("!="===d){var a=QueryFilters.runEqualityFunction(r,o,u,f,l,m);return QueryFilters.isEbvError(a)||(a.value=!a.value),a}if("<"===d)return QueryFilters.runLtFunction(r,o,u);if(">"===d)return QueryFilters.runGtFunction(r,o,u);if("<="===d)return QueryFilters.runLtEqFunction(r,o,u);if(">="===d)return QueryFilters.runGtEqFunction(r,o,u);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==c+"integer")return parseInt(e.value);if(e.type==c+"decimal"||e.type==c+"float"||e.type==c+"double"||e.type==c+"nonPositiveInteger")return parseFloat(e.value);if(e.type==c+"negativeInteger"||e.type==c+"long"||e.type==c+"int"||e.type==c+"short"||e.type==c+"byte"||e.type==c+"nonNegativeInteger"||e.type==c+"unsignedLong"||e.type==c+"unsignedInt"||e.type==c+"unsignedShort"||e.type==c+"unsignedByte"||e.type==c+"positiveInteger")return parseInt(e.value);if(e.type!=c+"date"&&e.type!=c+"dateTime")return e.type==c+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==c+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return Q.parseISO8601(e.value)}catch{return null}},QueryFilters.runOrFunction=function(e,r,o,u,f){for(var l=null,m=0;m<e.operands.length;m++){var d=QueryFilters.runFilter(e.operands[m],r,o,u,f);0==QueryFilters.isEbvError(d)&&(d=QueryFilters.ebv(d)),null==l?l=d:QueryFilters.isEbvError(d)?l=QueryFilters.isEbvError(l)?QueryFilters.ebvError():!0===l||QueryFilters.ebvError():!0===d?l=!0:QueryFilters.isEbvError(l)&&(l=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(l)},QueryFilters.runAndFunction=function(e,r,o,u,f){for(var l=null,m=0;m<e.operands.length;m++){var d=QueryFilters.runFilter(e.operands[m],r,o,u,f);0==QueryFilters.isEbvError(d)&&(d=QueryFilters.ebv(d)),null==l?l=d:QueryFilters.isEbvError(d)?l=(QueryFilters.isEbvError(l)||!0===l)&&QueryFilters.ebvError():!0===d?QueryFilters.isEbvError(l)&&(l=QueryFilters.ebvError()):l=!1}return QueryFilters.ebvBoolean(l)},QueryFilters.runEqualityFunction=function(e,r,o,u,f,l){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)){var m=QueryFilters.effectiveTypeValue(e),d=QueryFilters.effectiveTypeValue(r);return isNaN(m)||isNaN(d)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,u,l)):QueryFilters.ebvBoolean(m==d)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",r))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var a=Q.compareDateComponents(e.value,r.value);return null!=a?0==a?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(r)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,u,l)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var u=Q.compareDateComponents(e.value,r.value);return null!=u?1==u?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,r){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",r)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",r)?QueryFilters.runGtFunction(e,r,[]):e.token&&"uri"===e.token&&r.token&&"uri"===r.token?QueryFilters.ebvBoolean(e.value>r.value):e.token&&"literal"===e.token&&r.token&&"literal"===r.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+r.value+r.type+r.lang):e.token&&"blank"===e.token&&r.token&&"blank"===r.token||e.value&&r.value?QueryFilters.ebvBoolean(e.value>r.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var u=Q.compareDateComponents(e.value,r.value);return null!=u?-1==u?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var u=Q.compareDateComponents(e.value,r.value);return null!=u?-1!=u?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var u=Q.compareDateComponents(e.value,r.value);return null!=u?1!=u?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,r,o,u,f,l){var m=QueryFilters.runFilter(e,o,u,f,l);if(QueryFilters.isEbvError(m))return QueryFilters.ebvError();var d=m;if(QueryFilters.isNumeric(m)){for(var a=0;a<r.length;a++){var v=QueryFilters.runFilter(r[a].expression,o,u,f,l);if(!QueryFilters.isNumeric(v))return QueryFilters.ebvFalse();"+"===r[a].operator?d=QueryFilters.runSumFunction(d,v):"-"===r[a].operator&&(d=QueryFilters.runSubFunction(d,v))}return d}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:c+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:c+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:c+"decimal",value:o}:{token:"literal",type:c+"integer",value:o}},QueryFilters.runSubFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:c+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:c+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:c+"decimal",value:o}:{token:"literal",type:c+"integer",value:o}},QueryFilters.runMultiplication=function(e,r,o,u,f,l){var m=QueryFilters.runFilter(e,o,u,f,l);if(QueryFilters.isEbvError(m))return m;var d=m;if(QueryFilters.isNumeric(m)){for(var a=0;a<r.length;a++){var v=QueryFilters.runFilter(r[a].expression,o,u,f,l);if(QueryFilters.isEbvError(v))return m;if(!QueryFilters.isNumeric(v))return QueryFilters.ebvFalse();"*"===r[a].operator?d=QueryFilters.runMulFunction(d,v):"/"===r[a].operator&&(d=QueryFilters.runDivFunction(d,v))}return d}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:c+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:c+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:c+"decimal",value:o}:{token:"literal",type:c+"integer",value:o}},QueryFilters.runDivFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:c+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:c+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:c+"decimal",value:o}:{token:"literal",type:c+"integer",value:o}},QueryFilters.runBuiltInCall=function(e,r,o,u,f,l){if("notexists"===e||"exists"===e){var m=[];for(var d in o)m.push(JSON.stringify(o[d]));return r[m=m.sort().join("")]}for(var a=[],v=0;v<r.length;v++)if("var"===r[v].token)a.push(r[v]);else{var E=QueryFilters.runFilter(r[v],o,u,f,l);if(QueryFilters.isEbvError(E))return E;a.push(E)}if("str"===e)return"literal"===a[0].token?{token:"literal",type:null,value:""+a[0].value}:"uri"===a[0].token?{token:"literal",type:null,value:a[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===a[0].token?null!=a[0].lang?{token:"literal",value:""+a[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===a[0].token){var F=a[0];return null!=F.type?"string"==typeof F.type?{token:"uri",value:F.type,prefix:null,suffix:null}:F.type:null==F.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===a[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===a[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===a[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var B=a[0],N=a[1],A=QueryFilters.RDFTermEquality(B,N,u,l);return QueryFilters.isEbvError(A)&&(A=!1),QueryFilters.ebvBoolean(A)}if("langmatches"===e){var k=a[0],j=a[1];return"literal"===k.token&&"literal"===j.token?"*"===j.value&&""!=k.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===k.value.toLowerCase().indexOf(j.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var D=a[0].value;return null==D?QueryFilters.ebvError():null!=o[D]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=u.customFns[e])return u.customFns[e](QueryFilters,a);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,r,o,u,f,l){var m=QueryFilters.runFilter(r,o,u,f,l);if(QueryFilters.isEbvError(m))return m;if("!"===e){var d=QueryFilters.ebv(m);return QueryFilters.isEbvError(d)?QueryFilters.ebvFalse():(d=!d,QueryFilters.ebvBoolean(d))}if("+"===e)return QueryFilters.isNumeric(m)?m:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(m)){var a={};for(var v in m)a[v]=m[v];return a.value=-a.value,a}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,r,o,u,f,l,m){if(null==e||(e=QueryFilters.runFilter(e,u,f,l,m),null==r)||(r=QueryFilters.runFilter(r,u,f,l,m),null!=o&&(o=QueryFilters.runFilter(o,u,f,l,m)),null==r||"literal"!==r.token||null!=o&&"literal"!==o.token))return QueryFilters.ebvError();if(r=r.value,o=null==o?null:o.value,null!=e&&"var"==e.token){if(null==u[e.value])return QueryFilters.ebvError();e=u[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==o?new RegExp(r):new RegExp(r,o.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,r,o){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=Q.lexicalFormBaseUri(e.value.type,o)),e},QueryFilters.runIriRefOrFunction=function(e,r,o,u,f,l){if(null==r)return e;for(var m=[],d=0;d<r.length;d++)m.push(QueryFilters.runFilter(r[d],o,u,f,l));var a=Q.lexicalFormBaseUri(e,l);if(a==c+"integer"||a==c+"decimal"||a==c+"double"||a==c+"nonPositiveInteger"||a==c+"negativeInteger"||a==c+"long"||a==c+"int"||a==c+"short"||a==c+"byte"||a==c+"nonNegativeInteger"||a==c+"unsignedLong"||a==c+"unsignedInt"||a==c+"unsignedShort"||a==c+"unsignedByte"||a==c+"positiveInteger"){if("literal"!==(v=m[0]).token)return QueryFilters.ebvError();if((v=QueryFilters.normalizeLiteralDatatype(v,u,l)).type==c+"integer"||v.type==c+"decimal"||v.type==c+"double"||v.type==c+"nonPositiveInteger"||v.type==c+"negativeInteger"||v.type==c+"long"||v.type==c+"int"||v.type==c+"short"||v.type==c+"byte"||v.type==c+"nonNegativeInteger"||v.type==c+"unsignedLong"||v.type==c+"unsignedInt"||v.type==c+"unsignedShort"||v.type==c+"unsignedByte"||v.type==c+"positiveInteger")return v.type=a,v;if("http://www.w3.org/2001/XMLSchema#boolean"==v.type)return 1==QueryFilters.ebv(v)?(v.type=a,v.value=1):(v.type=a,v.value=0),v;if("http://www.w3.org/2001/XMLSchema#float"==v.type||"http://www.w3.org/2001/XMLSchema#double"==v.type)return v.type=a,v.value=parseInt(v.value),v;if("http://www.w3.org/2001/XMLSchema#string"!=v.type&&null!=v.type||v.value.split(".").length>2||v.value.split("-").length>2||v.value.split("/").length>2||v.value.split("+").length>2||a==c+"decimal"&&(-1!=v.value.indexOf("e")||-1!=v.value.indexOf("E"))||!(a!=c+"int"&&a!=c+"integer"||-1==v.value.indexOf("e")&&-1==v.value.indexOf("E")&&-1==v.value.indexOf(".")))return QueryFilters.ebvError();try{return v.value=parseInt(parseFloat(v.value)),isNaN(v.value)?QueryFilters.ebvError():(v.type=a,v)}catch{return QueryFilters.ebvError()}}else{if(a==c+"boolean")return"literal"===(v=m[0]).token&&null==v.type?"true"===v.value||"1"===v.value?QueryFilters.ebvTrue():"false"===v.value||"0"===v.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===v.token?QueryFilters.isEbvError(v)?v:QueryFilters.ebvBoolean(v):QueryFilters.ebvError();if(a==c+"string")return"literal"===(v=m[0]).token?(v=QueryFilters.normalizeLiteralDatatype(v,u,l)).type==c+"integer"||v.type==c+"decimal"||v.type==c+"double"||v.type==c+"nonPositiveInteger"||v.type==c+"negativeInteger"||v.type==c+"long"||v.type==c+"int"||v.type==c+"short"||v.type==c+"byte"||v.type==c+"nonNegativeInteger"||v.type==c+"unsignedLong"||v.type==c+"unsignedInt"||v.type==c+"unsignedShort"||v.type==c+"unsignedByte"||v.type==c+"positiveInteger"||v.type==c+"float"?(v.type=a,v.value=""+v.value,v):v.type==c+"string"?v:v.type==c+"boolean"?(QueryFilters.ebv(v)?(v.type=a,v.value="true"):(v.type=a,v.value="false"),v):v.type==c+"dateTime"||v.type==c+"date"?(v.type=a,"string"!=typeof v.value&&(v.value=Q.iso8601(v.value)),v):null==v.type?(v.value=""+v.value,v.type=a,v):QueryFilters.ebvError():"uri"===v.token?{token:"literal",value:Q.lexicalFormBaseUri(v,l),type:a,lang:null}:QueryFilters.ebvError();if(a==c+"dateTime"||a==c+"date"){if((v=m[0]).type==c+"dateTime"||v.type==c+"date")return v;if(v.type!=c+"string"&&null!=v.type)return QueryFilters.ebvError();try{return v.value=Q.iso8601(Q.parseISO8601(v.value)),v.type=a,v}catch{return QueryFilters.ebvError()}}else{if(a!=c+"float")return null!=u.customFns[a]?u.customFns[a](QueryFilters,m):QueryFilters.ebvError();var v;if("literal"!==(v=m[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(v=QueryFilters.normalizeLiteralDatatype(v,u,l)).type||"http://www.w3.org/2001/XMLSchema#int"==v.type)return v.type=a,v.value=parseFloat(v.value),v;if("http://www.w3.org/2001/XMLSchema#boolean"==v.type)return 1==QueryFilters.ebv(v)?(v.type=a,v.value=1):(v.type=a,v.value=0),v;if("http://www.w3.org/2001/XMLSchema#float"==v.type||"http://www.w3.org/2001/XMLSchema#double"==v.type)return v.type=a,v.value=parseFloat(v.value),v;if("http://www.w3.org/2001/XMLSchema#string"==v.type)try{return v.value=parseFloat(v.value),isNaN(v.value)?QueryFilters.ebvError():(v.type=a,v)}catch{return QueryFilters.ebvError()}else{if(null!=v.type||v.value.split(".").length>2||v.value.split("-").length>2||v.value.split("/").length>2||v.value.split("+").length>2)return QueryFilters.ebvError();try{return v.value=parseFloat(v.value),isNaN(v.value)?QueryFilters.ebvError():(v.type=a,v)}catch{return QueryFilters.ebvError()}}}}},X.exports={QueryFilters}},{"./utils":140}],135:[function(G,X,Z){var Q=G("./utils"),s=G("./utils"),w={variablesInBGP:function(c){var e=c.variables;if(e)return e;var r=c.value||c;for(var o in e=[],r)r[o]&&"var"===r[o].token?e.push(r[o].value):r[o]&&"blank"===r[o].token&&e.push("blank:"+r[o].value);return c.variables=e,e},connected:function(c,e){for(var r="/"+c.vars.join("/")+"/",o=0;o<e.vars.length;o++)if(-1!=r.indexOf("/"+e.vars[o]+"/"))return!0;return!1},variablesIntersectionBGP:function(c,e){return function(r,o){for(var u={},f=0;f<r.lenght;f++)u[r[f]]=1;for(f=0;f<o.length;f++){var l=u[o[f]]||0;l++,u[o[f]]=l}var m=[];for(var d in u)2==u[d]&&m.push(u[d]);return m}(w.variablesInBGP(c),w.variablesInBGP(e))},executeAndBGPsGroups:function(c){for(var e={},r={},o=0,u=function(B,N){for(var A=0;A<B.length;A++){var k="/"+B[A]+"/";if(-1!=N.indexOf(k))return!0}return!1},f=function(B,N,A,k){var j=[],D="",q="";for(var P in N)D+=P,j=j.concat(e[P]),q+=r[P];q=q+v.join("/")+"/",j.push(B),A[D]=j,k[D]=q},l=0;l<c.length;l++){var m=c[l],d={},a={},v=w.variablesInBGP(m),E={};for(var F in r)u(v,r[F])?E[F]=!0:(d[F]=e[F],a[F]=r[F]);0===Q.size(E)?(d["g"+o]=[m],a["g"+o]="/"+v.join("/")+"/",o++):f(m,E,d,a),e=d,r=a}return Q.values(e)},intersectionSize:function(c,e){for(var r=e.i.split("_"),o=0;o<r.length;o++)if(""!=r[o]&&-1!=c.i.indexOf("_"+r[o]+"_"))return 1;return 0},createJoinTree:function(c,e){for(var r="/"+c.vars.join("/")+"/",o=c.vars.concat([]),u=[],f=0;f<e.vars.length;f++)-1!=r.indexOf("/"+e.vars[f]+"/")?0==e.vars[f].indexOf("_:")?u.push("blank:"+e.vars[f]):u.push(e.vars[f]):o.push(e.vars[f]);var l=e.i.split("_"),m=c.i.split("_"),d={};for(f=0;f<l.length;f++)""!=l[f]&&(d[l[f]]=!0);for(f=0;f<m.length;f++)""!=m[f]&&(d[m[f]]=!0);var a=Q.keys(d);return{left:c,right:e,cost:c.cost+e.cost,i:"_"+a.sort().join("_")+"_",vars:o,join:u}},executeBushyTree:function(c,e,r,o,u){null==c.left?w.executeEmptyJoinBGP(c.right,e,r,o,u):null==c.right?w.executeEmptyJoinBGP(c.left,e,r,o,u):w.executeBushyTree(c.left,e,r,o,function(f){null!=f?w.executeBushyTree(c.right,e,r,o,function(l){u(null!=l?w.joinBindings2(c.join,f,l):null)}):u(null)})},executeAndBGPsDPSize:function(c,e,r,o,u){var f=w.executeAndBGPsGroups(c),l=[];s.eachSeries(f,function(m,d){r.computeCosts(m,o,function(a){var v={},E={},F={},B=1,N=null,A={};F[1]=[];for(var k=0;k<a.length;k++){var j=[];for(var D in delete a[k].variables,a[k])"_cost"!=D&&("var"===a[k][D].token||"blank"===a[k][D].token)&&j.push(a[k][D].value);E["_"+k+"_"]={left:a[k],right:null,cost:a[k]._cost,i:"_"+k+"_",vars:j};var q={left:a[k],right:null,cost:a[k]._cost,i:"_"+k+"_",vars:j};v["_"+k+"_"]=q,delete a[k]._cost,A["_"+k+"_"]=!0,F[1].push("_"+k+"_"),(null==N||N.cost>q.cost)&&(N=q)}for(var P=2;P<=a.length;P++)for(var W=1;W<P;W++){var Y=P-W,ne=F[""+W]||[],ce=F[""+Y]||[];for(k=0;k<ne.length;k++)for(var $=0;$<ce.length;$++)if(ne[k]!==ce[$]){var ee=E[ne[k]],J=E[ce[$]];if(0==w.intersectionSize(ee,J)&&w.connected(ee,J)){B=P;var ie=v[ee.i],oe=v[J.i],ye=w.createJoinTree(ie,oe);if(!A[ye.i]){A[ye.i]=!0;var be=ye.cost+1;null!=v[ye.i]&&(be=v[ye.i].cost);var de=F[P]||[];de.push(ye.i),E[ye.i]=ye,F[P]=de,be>ye.cost&&(B===P&&(N=ye),v[ye.i]=ye)}}}}l.push(N),d()})},function(){var m=null;s.eachSeries(l,function(d,a){w.executeBushyTree(d,e,r,o,function(v){v?null==m?(m=v,a()):(m=w.crossProductBindings(m,v),a()):a("Error executing bushy tree")})},function(d){d?u(null,d):u(m)})})},executeEmptyJoinBGP:function(c,e,r,o,u){return w.executeBGPDatasets(c,e,r,o,u)},executeBGPDatasets:function(c,e,r,o,u){var f={};if(null==c.graph){var l=[];s.eachSeries(e.implicit,function(d,a){null==f[d.oid]?(f[d.oid]=!0,c.graph=d,r.rangeQuery(c,o,function(v){v=w.buildBindingsFromRange(v,c),l.push(v),a()})):a()},function(){var d=w.unionManyBindings(l);u(d)})}else if("var"===c.graph.token){var m=c.graph.value;l=[],s.eachSeries(e.named,function(d,a){null==f[d.oid]?(f[d.oid]=!0,c.graph=d,null!=l?r.rangeQuery(c,o,function(v){if(null!=v){v=w.buildBindingsFromRange(v,c);for(var E=0;E<v.length;E++)v[E][m]=d.oid;l.push(v)}else l=null;a()}):a()):a()},function(){if(null==l)u(null);else{var d=w.unionManyBindings(l);u(d)}})}else r.rangeQuery(c,o,function(d){null!=d?(d=w.buildBindingsFromRange(d,c),u(d)):u(null)})},buildBindingsFromRange:function(c,e){w.variablesInBGP(e);var r=e.value||e,o={};for(a in r)r[a]&&"var"===r[a].token?o[a]=r[a].value:r[a]&&"blank"===r[a].token&&(o[a]="blank:"+r[a].value);var u=[];if(null!=c)for(var f=0;f<c.length;f++){var l={},m=c[f],d=!1;for(var a in o){var v=m[a];if(null!=l[o[a]]&&l[o[a]]!==v){d=!0;break}l[o[a]]=v}d||u.push(l)}return u},areCompatibleBindings:function(c,e){for(var r in c)if(null!=e[r]&&e[r]!=c[r])return!1;return!0},mergeBindings:function(c,e){var r={};for(var o in c)r[o]=c[o];for(var o in e)r[o]=e[o];return r},joinBindings2:function(c,e,r){for(var o,u,f,l,m={},d=[],a=0;a<e.length;a++){o=e[a],l=m;for(var v=0;v<c.length;v++)u=o[c[v]],v==c.length-1?((f=l[u]||[]).push(o),l[u]=f):(f=l[u]||{},l[u]=f,l=f)}for(a=0;a<r.length;a++)for(o=r[a],l=m,v=0;v<c.length;v++)if(null!=l[u=o[c[v]]])if(v==c.length-1)for(var E=0;E<l[u].length;E++)d.push(w.mergeBindings(l[u][E],o));else l=l[u];return d},joinBindings:function(c,e){for(var r=[],o=0;o<c.length;o++)for(var u=c[o],f=0;f<e.length;f++){var l=e[f];w.areCompatibleBindings(u,l)&&r.push(w.mergeBindings(u,l))}return r},augmentMissingBindings:function(c,e){for(var r in e)null==c[r]&&(c[r]=null);return c},leftOuterJoinBindings:function(c,e){for(var r=[],o=0;o<c.length;o++){for(var u=c[o],f=!1,l=0;l<e.length;l++){var m=e[l];w.areCompatibleBindings(u,m)&&(f=!0,r.push(w.mergeBindings(u,m)))}!1===f&&(w.augmentMissingBindings(u,m),r.push(u))}return r},crossProductBindings:function(c,e){for(var r=[],o=0;o<c.length;o++)for(var u=c[o],f=0;f<e.length;f++){var l=e[f];r.push(w.mergeBindings(u,l))}return r},unionBindings:function(c,e){return c.concat(e)},unionManyBindings:function(c){for(var e=[],r=0;r<c.length;r++){var o=c[r];e=w.unionBindings(e,o)}return e}};X.exports={QueryPlan:w}},{"./utils":140}],136:[function(G,X,Z){var Q=G("./network_transport").NetworkTransport,s=G("./rvn3_parser").RVN3Parser,w=G("./jsonld_parser").JSONLDParser,c=G("./utils"),e=function(r){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":s.parser,"text/n3":s.parser,"application/ld+json":w.parser,"application/json":w.parser},typeof RDFXMLParser<"u"&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=r)for(var o in r.parsers)this.parsers[o]=r.parsers[o];if(r&&null!=r.precedences)for(var o in this.precedences=r.precedences,r.parsers)c.include(this.precedences,o)||this.precedences.push(o);this.acceptHeaderValue="";for(var u=0;u<this.precedences.length;u++)this.acceptHeaderValue=0!=u?this.acceptHeaderValue+","+this.precedences[u]:this.acceptHeaderValue+this.precedences[u]};e.prototype.registerParser=function(r,o){this.parsers[r]=o,this.precedences.push(r)},e.prototype.unregisterParser=function(r){delete this.parsers[r];for(var o=[],u=0;u<this.precedences.length;u++)this.precedences[u]!=r&&o.push(this.precedences[u]);this.precedences=o},e.prototype.setAcceptHeaderPrecedence=function(r){this.precedences=r},e.prototype.load=function(r,o,u){var f=this;Q.load(r,this.acceptHeaderValue,function(l,m){if(l)u(l);else{var d=m.headers["Content-Type"]||m.headers["content-type"],a=m.data;if(null!=d){for(var v in d=d.split(";")[0],f.parsers)if(-1!=v.indexOf("/")){var E=v.split("/");if("*"===E[1]){if(-1!=d.indexOf(E[0]))return f.tryToParse(f.parsers[v],o,a,{documentURI:r},u)}else{if(-1!=d.indexOf(v))return f.tryToParse(f.parsers[v],o,a,{documentURI:r},u);if(-1!=d.indexOf(E[1]))return f.tryToParse(f.parsers[v],o,a,{documentURI:r},u)}}else if(-1!=d.indexOf(v))return f.tryToParse(f.parsers[v],o,a,{documentURI:r},u);u(new Error("Unknown media type : "+d))}else u(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(r,o,u,f){try{var l=this;G("fs").readFile(u.split("file:/")[1],function(m,d){m?f(m):(d=d.toString("utf8"),l.tryToParse(r,o,d,{documentURI:u},f))})}catch(m){f(m)}},e.prototype.tryToParse=function(r,o,u,f,l){try{"string"==typeof u&&(u=c.normalizeUnicodeLiterals(u)),r.parse(u,o,f,l)}catch(m){console.log(m.message),console.log(m.stack),l(m)}},X.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:4}],137:[function(G,X,Z){var Q=G("./utils"),s=G("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var w={};for(var c in this)Q.include(this.interfaceProperties,c)||"function"==typeof this[c]||"defaultNs"===c||"interfaceProperties"===c||(w[c]=this[c]);return w},RDFModel.UrisMap.prototype.get=function(w){if(-1!=w.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[w]},RDFModel.UrisMap.prototype.remove=function(w){if(-1!=w.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[w],null},RDFModel.UrisMap.prototype.set=function(w,c){if(-1!=w.indexOf(" "))throw"Prefix must not contain any whitespaces";this[w]=c},RDFModel.UrisMap.prototype.setDefault=function(w){this.defaultNs=w},RDFModel.UrisMap.prototype.addAll=function(w,c){for(var e in w)Q.include(this.interfaceProperties,e)||(null!=this[e]?!0===c&&(this[e]=w[e]):this[e]=w[e]);return this},RDFModel.UrisMap.prototype.resolve=function(w){var c=w.split(":"),e=c[0],r=c[1];return""===e?null==this.defaultNs?null:this.defaultNs+r:null!=this[e]?this[e]+r:null},RDFModel.UrisMap.prototype.shrink=function(w){for(var c in this){var e=this[c];if(0===w.indexOf(e)&&""!==e&&"defaultNs"!=c)return c+":"+w.split(e)[1]}return w},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(w,c){this.prefixes.addAll(w.prefixes,c),this.terms.addAll(w.terms,c)},RDFModel.Profile.prototype.resolve=function(w){return-1!=w.indexOf(":")?this.prefixes.resolve(w):null!=this.terms[w]?this.terms.resolve(w):null},RDFModel.Profile.prototype.setDefaultPrefix=function(w){this.prefixes.setDefault(w)},RDFModel.Profile.prototype.setDefaultVocabulary=function(w){this.terms.setDefault(w)},RDFModel.Profile.prototype.setPrefix=function(w,c){this.prefixes.set(w,c)},RDFModel.Profile.prototype.setTerm=function(w,c){this.terms.set(w,c)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var w=this;for(var c in this.filters={s:function(e){return function(r){return r.subject.equals(e)}},p:function(e){return function(r){return r.predicate.equals(e)}},o:function(e){return function(r){return r.object.equals(e)}},sp:function(e,r){return function(o){return o.subject.equals(e)&&o.predicate.equals(r)}},so:function(e,r){return function(o){return o.subject.equals(e)&&o.object.equals(r)}},po:function(e,r){return function(o){return o.predicate.equals(e)&&o.object.equals(r)}},spo:function(e,r,o){return function(u){return u.subject.equals(e)&&u.predicate.equals(r)&&u.object.equals(o)}},describes:function(e){return function(r){return r.subject.equals(e)||r.object.equals(e)}},type:function(e){var r=w.resolve("rdf:type");return function(o){return o.predicate.equals(r)&&o.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(c,RDFModel.defaultContext[c])},RDFModel.RDFEnvironment.prototype=Q.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var w=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,w},RDFModel.RDFEnvironment.prototype.createNamedNode=function(w){var c=this.resolve(w);return null!=c?new RDFModel.NamedNode(c):new RDFModel.NamedNode(w)},RDFModel.RDFEnvironment.prototype.createLiteral=function(w,c,e){return null!=e?new RDFModel.Literal(w,c,e.toString()):new RDFModel.Literal(w,c,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(w,c,e){return new RDFModel.Triple(w,c,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(w){var c=new RDFModel.Graph;if(null!=w)for(var e=0;e<w.length;e++)c.add(w[e]);return c},RDFModel.RDFEnvironment.prototype.createAction=function(w,c){return function(e){return w(e)?c(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(w){if(!0===w)return new RDFModel.RDFEnvironment.Profile;var c=new RDFModel.RDFEnvironment.Profile;return c.importProfile(this),c},RDFModel.RDFEnvironment.prototype.createTermMap=function(w){if(!0===w)return new RDFModel.UrisMap;var c=this.terms.values(),e=new RDFModel.UrisMap;for(var r in c)e[r]=c[r];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(w){if(!0===w)return new RDFModel.UrisMap;var c=this.prefixes.values(),e=new RDFModel.UrisMap;for(var r in c)e[r]=c[r];return e},RDFModel.RDFNode=function(w){this.interfaceName=w,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(w){if(null==w.interfaceName)return this.valueOf()==w;for(var c in this.attributes){var e=this.attributes[c];if(this[e]!=w[e])return!1}return!0},RDFModel.BlankNode=function(w){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+w,this.bnodeId=w},RDFModel.BlankNode.prototype=Q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(w,c,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=w,null!=c?this.language=c:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=Q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var w='"'+this.nominalValue+'"';return null!=this.language?w=w+"@"+this.language:(null!=this.datatype||this.type)&&(w=w+"^^<"+(this.datatype||this.type)+">"),w},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return s.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(w){RDFModel.RDFNode.call(this,"NamedNode"),null!=w.value?this.nominalValue=w.value:this.nominalValue=w},RDFModel.NamedNode.prototype=Q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(w,c,e){this.subject=w,this.predicate=c,this.object=e},RDFModel.Triple.prototype.equals=function(w){return this.subject.equals(w.subject)&&this.predicate.equals(w.predicate)&&this.object.equals(w.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(w){for(var c=0;c<this.actions.length;c++)w=this.actions[c](w);var e=w.subject.toString()+w.predicate.toString()+w.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(w)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(w,c){if(this.actions.push(w),1==c)for(var e=0;e<this.triples.length;e++)this.triples[e]=w(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(w){for(var c=w.toArray(),e=0;e<c.length;e++)this.add(c[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(w){for(var c=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(w)){var r=w.subject.toString()+w.predicate.toString()+w.object.toString();delete this.duplicates[r],c=e;break}return null!=c&&this.triples.splice(c,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(w){for(var c=0;c<this.triples.length;c++)if(!0===w(this.triples[c],this))return!0;return!1},RDFModel.Graph.prototype.every=function(w){for(var c=0;c<this.triples.length;c++)if(!1===w(this.triples[c],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(w){for(var c=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===w(this.triples[e],this)&&c.add(this.triples[e]);return c},RDFModel.Graph.prototype.forEach=function(w){for(var c=0;c<this.triples.length;c++)w(this.triples[c],this)},RDFModel.Graph.prototype.merge=function(w){for(var c=new RDFModel.Graph,e=0;e<this.triples.length;e++)c.add(this.triples[e]);return c},RDFModel.Graph.prototype.match=function(w,c,e,r){for(var o=new RDFModel.Graph,u=0,f=0;f<this.triples.length;f++){var l=this.triples[f];if((null==w||l.subject.equals(w))&&(null==c||l.predicate.equals(c))&&(null==e||l.object.equals(e))){if(!(null==r||u<r))return o;u++,o.add(l)}}return o},RDFModel.Graph.prototype.removeMatches=function(w,c,e){for(var r=[],o=0;o<this.triples.length;o++){var u=this.triples[o];(null==w||u.subject.equals(w))&&(null==c||u.predicate.equals(c))&&(null==e||u.object.equals(e))&&r.push(u)}for(o=0;o<r.length;o++)this.remove(r[o]);return this},RDFModel.Graph.prototype.toNT=function(){var w="";return this.forEach(function(c){w+=c.toString()}),w},RDFModel.buildRDFResource=function(w,c,e,r){if("blank"===w.token)return RDFModel.buildBlankNode(w,c,e,r);if("literal"===w.token)return RDFModel.buildLiteral(w,c,e,r);if("uri"===w.token)return RDFModel.buildNamedNode(w,c,e,r);if("var"===w.token){var o=c[w.value];return null!=o?RDFModel.buildRDFResource(o,c,e,r):null}return null},RDFModel.buildBlankNode=function(w,c,e,r){return null!=w.valuetmp&&(w.value=w.valuetmp),0===w.value.indexOf("_:")&&(w.value=w.value.split("_:")[1]),new RDFModel.BlankNode(w.value)},RDFModel.buildLiteral=function(w,c,e,r){return new RDFModel.Literal(w.value,w.lang,w.type)},RDFModel.buildNamedNode=function(w,c,e,r){if(null!=w.value)return new RDFModel.NamedNode(w);if(null!=w.prefix){var o=e.resolveNsInEnvironment(w.prefix,r);return w.value=o+w.suffix,new RDFModel.NamedNode(w)}return new RDFModel.NamedNode(w)},RDFModel.rdf=new RDFModel.RDFEnvironment,X.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(G,X,Z){var Q=G("n3").Parser,s={};function w(c){switch(c[0]){case'"':if(c.indexOf("^^")>0){var e=c.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:c};case"_":return{blank:c.replace("b","")};default:return{token:"uri",value:c,prefix:null,suffix:null}}}s.parser={async:!0,parse:function(c,e,r,o){o||(o=r,r=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var u=[];new Q(r).parse(c,function(f,l){f?o(f):l?u.push({subject:w(l.subject),predicate:w(l.predicate),object:w(l.object),graph:e}):o(!1,u)})},resetBlankNodeIds:function(){Q._resetBlankNodeIds()}},X.exports={RVN3Parser:s}},{n3:51}],139:[function(G,X,Z){var Q=G("./query_engine").QueryEngine,s=G("./quad_backend").QuadBackend,w=G("./persistent_quad_backend").PersistentQuadBackend,c=G("./lexicon").Lexicon,e=G("./persistent_lexicon").PersistentLexicon,r=G("./rdf_model"),o=G("./utils");Store=function(u,f){var l=null,m=null;if(0==arguments.length)m={};else if(1==arguments.length)m={},l=u;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";m=u,l=f}null==m.treeOrder&&(m.treeOrder=15);var d=c,a=s;!0===m.persistent&&(d=e,a=w),this.functionMap={};var v=this;this.customFns={},new d(function(E){var F=function(){new a(m,function(B){var N=function(){m.backend=B,m.lexicon=E,v.engine=new Q(m),l(null,v)};m.overwrite?B.clear(N):N()})};!0===m.overwrite?E.clear(F):F()},m.name)},Store.prototype.rdf=r.rdf,Store.prototype.rdf.api=r,Store.prototype.registerCustomFunction=function(u,f){this.customFns[u]=f,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var u;if(1===arguments.length){u=arguments[0];var f=function(){}}else 2===arguments.length&&(u=arguments[0],f=arguments[1]);this.engine.execute(u,f)}},Store.prototype.executeWithEnvironment=function(){var u,f,l;if(3===arguments.length){u=arguments[0];var m=function(){};f=arguments[1],l=arguments[2]}else 4===arguments.length&&(u=arguments[0],m=arguments[3],f=arguments[1],l=arguments[2]);f=o.map(f,function(d){return{token:"uri",value:d}}),l=o.map(l,function(d){return{token:"uri",value:d}}),this.engine.execute(u,m,f,l)},Store.prototype.graph=function(){var u=null,f=null;if(1===arguments.length)f=arguments[0]||function(){},u=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";f=arguments[1]||function(){},u=arguments[0]}null!=this.rdf.resolve(u)&&(u=this.rdf.resolve(u)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+u+"> { ?s ?p ?o } }",f)},Store.prototype.node=function(){var u=null,f=null,l=null;if(2===arguments.length)l=arguments[0],f=arguments[1]||function(){},u=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";l=arguments[0],u=arguments[1],f=arguments[2]||function(){}}null!=this.rdf.resolve(u)&&(u=this.rdf.resolve(u)),null!=this.rdf.resolve(l)&&(l=this.rdf.resolve(l)),this.engine.execute("CONSTRUCT { <"+l+"> ?p ?o } WHERE { GRAPH <"+u+"> { <"+l+"> ?p ?o } }",f)},Store.prototype.startObservingNode=function(){var u,f,l;2===arguments.length?(u=arguments[0],l=arguments[1],this.engine.callbacksBackend.observeNode(u,l,function(){})):3===arguments.length&&(u=arguments[0],f=arguments[1],l=arguments[2],this.engine.callbacksBackend.observeNode(u,f,l,function(){}))},Store.prototype.stopObservingNode=function(u){this.engine.callbacksBackend.stopObservingNode(u)},Store.prototype.startObservingQuery=function(){var u=arguments[0],f=arguments[1],l=arguments[2];null!=l?this.engine.callbacksBackend.observeQuery(u,f,l):this.engine.callbacksBackend.observeQuery(u,f,function(){})},Store.prototype.stopObservingQuery=function(u){this.engine.callbacksBackend.stopObservingQuery(u)},Store.prototype.subscribe=function(u,f,l,m,d){var a=this,v=function(E,F){var B=[],N={blanks:{},outCache:{}},A=[];o.each(F,function(k){var j=r.buildRDFResource(k.subject,A,a.engine,N),D=r.buildRDFResource(k.predicate,A,a.engine,N),q=r.buildRDFResource(k.object,A,a.engine,N);null!=j&&null!=D&&null!=q&&(k=new r.Triple(j,D,q),B.push(k))}),d(E,B)};this.functionMap[d]=v,this.engine.callbacksBackend.subscribe(u,f,l,m,v,function(){})},Store.prototype.unsubscribe=function(u){var f=this.functionMap[u];this.engine.callbacksBackend.unsubscribe(f),delete this.functionMap[u]},Store.prototype.setPrefix=function(u,f){this.rdf.setPrefix(u,f)},Store.prototype.setDefaultPrefix=function(u){this.rdf.setDefaultPrefix(u)},Store.prototype.insert=function(){var u,f,l;if(1===arguments.length)f=arguments[0],l=function(){};else if(2===arguments.length)f=arguments[0],l=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";f=arguments[0],u=this.rdf.createNamedNode(arguments[1]),l=arguments[2]||function(){}}var m="",d=this;f.forEach(function(a){m=m+d._nodeToQuery(a.subject)+d._nodeToQuery(a.predicate)+d._nodeToQuery(a.object)+"."}),m=null!=u?"INSERT DATA { GRAPH "+this._nodeToQuery(u)+" { "+m+" } }":"INSERT DATA { "+m+" }",this.engine.execute(m,l)},Store.prototype._nodeToQuery=function(u){if("NamedNode"===u.interfaceName){var f=this.rdf.resolve(u.valueOf());return null!=f?"<"+f+">":"<"+u.valueOf()+">"}return u.toString()},Store.prototype.delete=function(){var u,f,l;if(1===arguments.length)f=arguments[0],l=function(){};else if(2===arguments.length)f=arguments[0],l=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";f=arguments[0],u=this.rdf.createNamedNode(arguments[1]),l=arguments[2]||function(){}}var m="",d=this;f.forEach(function(a){m=m+d._nodeToQuery(a.subject)+d._nodeToQuery(a.predicate)+d._nodeToQuery(a.object)+"."}),m=null!=u?"DELETE DATA { GRAPH "+this._nodeToQuery(u)+" { "+m+" } }":"DELETE DATA { "+m+" }",this.engine.execute(m,l)},Store.prototype.clear=function(){var u;if(0===arguments.length){u=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var f=function(){}}else if(1===arguments.length)u=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),f=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";u=this.rdf.createNamedNode(arguments[0]),f=arguments[1]||function(){}}var l="CLEAR GRAPH "+this._nodeToQuery(u);this.engine.execute(l,f)},Store.prototype.setBatchLoadEvents=function(u){this.engine.eventsOnBatchLoad=u},Store.prototype.registerDefaultNamespace=function(u,f){this.rdf.prefixes.set(u,f),this.engine.registerDefaultNamespace(u,f)},Store.prototype.registerDefaultProfileNamespaces=function(){var u=this.rdf.prefixes.values();for(var f in u)this.registerDefaultNamespace(f,u[f])},Store.prototype.load=function(){var u,f,l,m,d={};if(3===arguments.length)l=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),u=arguments[0],f=arguments[1],m=arguments[2]||function(){};else if(4===arguments.length)u=arguments[0],f=arguments[1],"string"==typeof(d=arguments[2])?(l=this.rdf.createNamedNode(d),d={}):(l=this.rdf.createNamedNode(d.graph||this.engine.lexicon.defaultGraphUri),delete d.graph),m=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===u){var a="LOAD <"+(f=this.rdf.createNamedNode(f)).valueOf()+"> INTO GRAPH <"+l.valueOf()+">";this.engine.execute(a,m)}else{var v=this,E=this.engine.rdfLoader.parsers[u];if(!E)return m(new Error("Cannot find parser for the provided media type:"+u));var F=[E,{token:"uri",value:l.valueOf()},f,d,function(B,N){B?m(B,N):v.engine.batchLoad(N,function(A){null!=A?m(null,A):m(new Error("Error batch-loading triples."))})}];f&&"string"==typeof f&&0===f.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,F):this.engine.rdfLoader.tryToParse.apply(null,F)}},Store.prototype.registerParser=function(u,f){this.engine.rdfLoader.registerParser(u,f)},Store.prototype.registeredGraphs=function(u){this.engine.lexicon.registeredGraphs(!0,function(f){var l=o.map(f,function(m){return new r.NamedNode(m)});u(null,l)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(u){NetworkTransport=u},Store.prototype.close=function(u){null==u&&(u=function(){}),this.engine.close?this.engine.close(u):u()},Store.VERSION="0.9.18-alpha.7",Store.yieldFrequency=function(u){o.yieldFrequency(u)},X.exports.Store=Store,X.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},X.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:typeof window<"u"&&window.setImmediate?window.setImmediate:function(G){setTimeout(G,0)},spin=0,yieldFrequency=100,nextTick=function(G){++spin<yieldFrequency?G():(spin=0,slowNextTick(G))},hashTerm=function(G){try{if(null==G)return"";if("uri"===G.token)return"u"+G.value;if("blank"===G.token)return"b"+G.value;if("literal"===G.token){var X="l"+G.value;return X+=G.type||"",X+=G.lang||""}}catch{if("object"==typeof G){var Z="";for(p in G)Z=Z+p+G[p];return Z}return G}},lexicalFormBaseUri=function(G,X){var Z=null;if(X=X||{},null==G.value){var Q=G.prefix,s=G.suffix,w=X.namespaces[Q];Z=null!=w?w+s:Q+":"+s}else Z=G.value;return null===Z?null:(-1==Z.indexOf(":")&&(Z=(X.base||"")+Z),Z)};parseISO8601=function(G){return Date.parse(G)},Date.prototype.toISOString||function(){function G(X){return X<10?"0"+X:X}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+G(this.getUTCMonth()+1)+"-"+G(this.getUTCDate())+"T"+G(this.getUTCHours())+":"+G(this.getUTCMinutes())+":"+G(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(G){return G.toISOString()},compareDateComponents=function(G,X){var Z=parseISO8601(G),Q=parseISO8601(X);return Z==Q?0:Z<Q?-1:1},lexicalFormLiteral=function(G,X){var Z=G.value,Q=G.lang,s=G.type,w=null;if(null!=Z&&null!=s&&"string"!=typeof s){var c=s.value;if(null==c){var e=s.prefix,r=s.suffix,o=X.namespaces[e];G.type=o+r,c=o+r}w=-1!=c.indexOf("hexBinary")?'"'+G.value.toLowerCase()+'"^^<'+c+">":'"'+G.value+'"^^<'+c+">"}else w=null==Q&&null==s?'"'+Z+'"':null==s?'"'+Z+'"@'+Q:-1!=s.indexOf("hexBinary")?'"'+G.value.toLowerCase()+'"^^<'+s+">":'"'+G.value+'"^^<'+s+">";return w},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(G){if(typeof window>"u"&&void 0!==process&&!1===process.browser){var X=_dereq_("sqlite3"),Z=_dereq_("indexeddb-js"),Q=new X.Database(":memory:"),s=Z.makeScope("sqlite3",Q);G.indexedDB=s.indexedDB,G.IDBKeyRange=s.IDBKeyRange}else{var w;(w=typeof window>"u"?self:window).indexedDB=w.indexedDB||w.mozIndexedDB||w.webkitIndexedDB||w.msIndexedDB,w.IDBKeyRange=w.IDBKeyRange||w.webkitIDBKeyRange||w.msIDBKeyRange,w.indexedDB?(G.indexedDB=w.indexedDB,G.IDBKeyRange=w.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function G(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return G()+G()+"-"+G()+"-"+G()+"-"+G()+"-"+G()+G()+G()},hashTerm=function(G){try{if(null==G)return"";if("uri"===G.token)return"u"+G.value;if("blank"===G.token)return"b"+G.value;if("literal"===G.token){var X="l"+G.value;return X+=G.type||"",X+=G.lang||""}}catch{if("object"==typeof G){var Z="";for(p in G)Z=Z+p+G[p];return Z}return G}};var reject=function(G,X){for(var Z=[],Q=0;Q<G.length;Q++)X(G[Q])&&Z.push(G[Q]);return Z},include=function(G,X){for(var Z=0;Z<G.length;Z++)if(G[Z]===X)return!0;return!1},each=function(G,X){if(G.forEach)G.forEach(X);else for(var Z=0;Z<G.length;Z++)X(G[Z])},map=function(G,X){if(G.map)return G.map(X);for(var Z=[],Q=0;Q<G.length;Q++)Z[Q]=X(G[Q]);return Z},keys=function(G){var X=[];for(var Z in G)X.push(Z);return X},values=function(G){var X=[];for(var Z in G)X.push(G[Z]);return X},size=function(G){if(G.length)return G.length;var X=0;for(var Z in G)X++;return X};clone=function(G){return JSON.parse(JSON.stringify(G))};var isObject=function(G){var X=typeof G;return"function"==X||G&&"object"==X||!1},create=function(){function G(){}return function(X){if(isObject(X)){G.prototype=X;var Z=new G;G.prototype=null}return Z||void 0}}(),whilst=function(G,X,Z){G()?X(function(Q){if(Q)return Z(Q);whilst(G,X,Z)}):Z()},eachSeries=function(G,X,Z){if(Z=Z||function(){},!G.length)return Z();var Q=0,s=function(){X(G[Q],function(w){w?(Z(w),Z=function(){}):(Q+=1)>=G.length?Z():nextTick(s)})};s()},eachParallel=function(G,X,Z){if(Z=Z||function(){},!G.length)return Z();for(var Q=!1,s=0,w=function(e){if(e)throw Q=!0,new Error(e);Q||++s===G.length&&Z()},c=0;c<G.length;c++)!function(e,r,o,u){nextTick(function(){try{u(e[r],function(){o()})}catch(f){o(f)}})}(G,c,w,X)},reduce=function(G,X,Z,Q){eachSeries(G,function(s,w){Z(X,s,function(c,e){X=e,w(c)})},function(s){Q(s,X)})},seq=function(){var G=arguments;return function(){var X=this,Z=Array.prototype.slice.call(arguments),Q=Z.pop();reduce(G,Z,function(s,w,c){w.apply(X,s.concat([function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1);c(e,r)}]))},function(s,w){Q.apply(X,[s].concat(w))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&typeof window>"u"};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(G){yieldFrequency=G}}}).call(this)}).call(this,require("_process"))},{_process:59}]},{},[139])(139)});